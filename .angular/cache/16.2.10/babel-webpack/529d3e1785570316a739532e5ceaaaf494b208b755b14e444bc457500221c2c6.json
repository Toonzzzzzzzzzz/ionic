{"ast":null,"code":"// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/**\n * Database variables for AddonModLessonProvider.\n */\nexport const PASSWORD_TABLE_NAME = 'addon_mod_lesson_password';\nexport const SITE_SCHEMA = {\n  name: 'AddonModLessonProvider',\n  version: 1,\n  tables: [{\n    name: PASSWORD_TABLE_NAME,\n    columns: [{\n      name: 'lessonid',\n      type: 'INTEGER',\n      primaryKey: true\n    }, {\n      name: 'password',\n      type: 'TEXT'\n    }, {\n      name: 'timemodified',\n      type: 'INTEGER'\n    }]\n  }]\n};\n/**\n * Database variables for AddonModLessonOfflineProvider.\n */\nexport const RETAKES_TABLE_NAME = 'addon_mod_lesson_retakes';\nexport const PAGE_ATTEMPTS_TABLE_NAME = 'addon_mod_lesson_page_attempts';\nexport const OFFLINE_SITE_SCHEMA = {\n  name: 'AddonModLessonOfflineProvider',\n  version: 1,\n  tables: [{\n    name: RETAKES_TABLE_NAME,\n    columns: [{\n      name: 'lessonid',\n      type: 'INTEGER',\n      primaryKey: true // Only 1 offline retake per lesson.\n    }, {\n      name: 'retake',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'courseid',\n      type: 'INTEGER'\n    }, {\n      name: 'finished',\n      type: 'INTEGER'\n    }, {\n      name: 'outoftime',\n      type: 'INTEGER'\n    }, {\n      name: 'timemodified',\n      type: 'INTEGER'\n    }, {\n      name: 'lastquestionpage',\n      type: 'INTEGER'\n    }]\n  }, {\n    name: PAGE_ATTEMPTS_TABLE_NAME,\n    columns: [{\n      name: 'lessonid',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'retake',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'pageid',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'timemodified',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'courseid',\n      type: 'INTEGER'\n    }, {\n      name: 'data',\n      type: 'TEXT'\n    }, {\n      name: 'type',\n      type: 'INTEGER'\n    }, {\n      name: 'newpageid',\n      type: 'INTEGER'\n    }, {\n      name: 'correct',\n      type: 'INTEGER'\n    }, {\n      name: 'answerid',\n      type: 'INTEGER'\n    }, {\n      name: 'useranswer',\n      type: 'TEXT'\n    }],\n    // A user can attempt several times per page and retake.\n    primaryKeys: ['lessonid', 'retake', 'pageid', 'timemodified']\n  }]\n};\n/**\n * Database variables for AddonModLessonSyncProvider.\n */\nexport const RETAKES_FINISHED_SYNC_TABLE_NAME = 'addon_mod_lesson_retakes_finished_sync';\nexport const SYNC_SITE_SCHEMA = {\n  name: 'AddonModLessonSyncProvider',\n  version: 1,\n  tables: [{\n    name: RETAKES_FINISHED_SYNC_TABLE_NAME,\n    columns: [{\n      name: 'lessonid',\n      type: 'INTEGER',\n      primaryKey: true\n    }, {\n      name: 'retake',\n      type: 'INTEGER'\n    }, {\n      name: 'pageid',\n      type: 'INTEGER'\n    }, {\n      name: 'timefinished',\n      type: 'INTEGER'\n    }]\n  }]\n};","map":{"version":3,"names":["PASSWORD_TABLE_NAME","SITE_SCHEMA","name","version","tables","columns","type","primaryKey","RETAKES_TABLE_NAME","PAGE_ATTEMPTS_TABLE_NAME","OFFLINE_SITE_SCHEMA","notNull","primaryKeys","RETAKES_FINISHED_SYNC_TABLE_NAME","SYNC_SITE_SCHEMA"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lesson/services/database/lesson.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreSiteSchema } from '@services/sites';\n\n/**\n * Database variables for AddonModLessonProvider.\n */\nexport const PASSWORD_TABLE_NAME = 'addon_mod_lesson_password';\nexport const SITE_SCHEMA: CoreSiteSchema = {\n    name: 'AddonModLessonProvider',\n    version: 1,\n    tables: [\n        {\n            name: PASSWORD_TABLE_NAME,\n            columns: [\n                {\n                    name: 'lessonid',\n                    type: 'INTEGER',\n                    primaryKey: true,\n                },\n                {\n                    name: 'password',\n                    type: 'TEXT',\n                },\n                {\n                    name: 'timemodified',\n                    type: 'INTEGER',\n                },\n            ],\n        },\n    ],\n};\n\n/**\n * Database variables for AddonModLessonOfflineProvider.\n */\nexport const RETAKES_TABLE_NAME = 'addon_mod_lesson_retakes';\nexport const PAGE_ATTEMPTS_TABLE_NAME = 'addon_mod_lesson_page_attempts';\nexport const OFFLINE_SITE_SCHEMA: CoreSiteSchema = {\n    name: 'AddonModLessonOfflineProvider',\n    version: 1,\n    tables: [\n        {\n            name: RETAKES_TABLE_NAME,\n            columns: [\n                {\n                    name: 'lessonid',\n                    type: 'INTEGER',\n                    primaryKey: true, // Only 1 offline retake per lesson.\n                },\n                {\n                    name: 'retake', // Retake number.\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'courseid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'finished',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'outoftime',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'timemodified',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'lastquestionpage',\n                    type: 'INTEGER',\n                },\n            ],\n        },\n        {\n            name: PAGE_ATTEMPTS_TABLE_NAME,\n            columns: [\n                {\n                    name: 'lessonid',\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'retake', // Retake number.\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'pageid',\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'timemodified',\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'courseid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'data',\n                    type: 'TEXT',\n                },\n                {\n                    name: 'type',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'newpageid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'correct',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'answerid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'useranswer',\n                    type: 'TEXT',\n                },\n            ],\n            // A user can attempt several times per page and retake.\n            primaryKeys: ['lessonid', 'retake', 'pageid', 'timemodified'],\n        },\n    ],\n};\n\n/**\n * Database variables for AddonModLessonSyncProvider.\n */\nexport const RETAKES_FINISHED_SYNC_TABLE_NAME = 'addon_mod_lesson_retakes_finished_sync';\nexport const SYNC_SITE_SCHEMA: CoreSiteSchema = {\n    name: 'AddonModLessonSyncProvider',\n    version: 1,\n    tables: [\n        {\n            name: RETAKES_FINISHED_SYNC_TABLE_NAME,\n            columns: [\n                {\n                    name: 'lessonid',\n                    type: 'INTEGER',\n                    primaryKey: true,\n                },\n                {\n                    name: 'retake',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'pageid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'timefinished',\n                    type: 'INTEGER',\n                },\n            ],\n        },\n    ],\n};\n\n/**\n * Lesson retake data.\n */\nexport type AddonModLessonPasswordDBRecord = {\n    lessonid: number;\n    password: string;\n    timemodified: number;\n};\n\n/**\n * Lesson retake data.\n */\nexport type AddonModLessonRetakeDBRecord = {\n    lessonid: number;\n    retake: number;\n    courseid: number;\n    finished: number;\n    outoftime?: number | null;\n    timemodified?: number | null;\n    lastquestionpage?: number | null;\n};\n\n/**\n * Lesson page attempts data.\n */\nexport type AddonModLessonPageAttemptDBRecord = {\n    lessonid: number;\n    retake: number;\n    pageid: number;\n    timemodified: number;\n    courseid: number;\n    data: string | null;\n    type: number;\n    newpageid: number;\n    correct: number;\n    answerid: number | null;\n    useranswer: string | null;\n};\n\n/**\n * Data about a retake finished in sync.\n */\nexport type AddonModLessonRetakeFinishedInSyncDBRecord = {\n    lessonid: number;\n    retake: number;\n    pageid: number;\n    timefinished: number;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}