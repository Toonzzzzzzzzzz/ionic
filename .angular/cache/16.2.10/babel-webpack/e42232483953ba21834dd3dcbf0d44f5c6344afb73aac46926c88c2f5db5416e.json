{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourse } from '@features/course/services/course';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreSites } from '@services/sites';\nimport { CoreSiteHome } from '@features/sitehome/services/sitehome';\nimport { CoreCourses } from '@features//courses/services/courses';\nimport { CoreEvents } from '@singletons/events';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreCourseModuleDelegate } from '@features/course/services/module-delegate';\nimport { CoreCourseModulePrefetchDelegate } from '@features/course/services/module-prefetch-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreBlockHelper } from '@features/block/services/block-helper';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreBlockSideBlocksComponent } from '@features/block/components/side-blocks/side-blocks';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../components/empty-box/empty-box\";\nimport * as i4 from \"../../../../components/loading/loading\";\nimport * as i5 from \"../../../../components/navbar-buttons/navbar-buttons\";\nimport * as i6 from \"../../../../components/spacer/spacer\";\nimport * as i7 from \"../../../../directives/fa-icon\";\nimport * as i8 from \"../../../../directives/format-text\";\nimport * as i9 from \"../../../../directives/content\";\nimport * as i10 from \"../../../../directives/update-non-reactive-attributes\";\nimport * as i11 from \"@ionic/angular\";\nimport * as i12 from \"../../../block/components/side-blocks-button/side-blocks-button\";\nimport * as i13 from \"../../../course/components/module/module\";\nimport * as i14 from \"@ngx-translate/core\";\nfunction CoreSiteHomeIndexPage_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 14);\n    i0.ɵɵlistener(\"click\", function CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.openSearch());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.courses.searchcourses\"));\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 18)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 19);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r17.section.summary)(\"contextInstanceId\", ctx_r17.siteHomeId);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-course-module\", 20);\n  }\n  if (rf & 2) {\n    const module_r19 = ctx.$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"module\", module_r19)(\"section\", ctx_r18.section);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template, 3, 2, \"ion-item\", 16);\n    i0.ɵɵtemplate(2, CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template, 1, 2, \"core-course-module\", 17);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.section.summary);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r1.section.modules);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-spacer\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template(rf, ctx) {}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r5 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r5);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template(rf, ctx) {}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r9 = i0.ɵɵreference(17);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r9);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template(rf, ctx) {}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r13 = i0.ɵɵreference(21);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r13);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template(rf, ctx) {}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r11 = i0.ɵɵreference(19);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r11);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template(rf, ctx) {}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template, 0, 0, \"ng-template\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template, 1, 0, null, 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r7 = i0.ɵɵreference(15);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r7);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0)(1, 22);\n    i0.ɵɵtemplate(2, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵtemplate(3, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵtemplate(4, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵtemplate(5, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵtemplate(6, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template, 2, 1, \"ng-container\", 23);\n    i0.ɵɵelementContainerEnd()();\n  }\n  if (rf & 2) {\n    const item_r22 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitch\", item_r22);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"LIST_OF_COURSE\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"LIST_OF_CATEGORIES\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"COURSE_SEARCH_BOX\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"ENROLLED_COURSES\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"NEWS_ITEMS\");\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template, 1, 0, \"core-spacer\", 6);\n    i0.ɵɵtemplate(2, CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template, 7, 6, \"ng-container\", 21);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.section && ctx_r2.section.hasContent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.items);\n  }\n}\nfunction CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-block-side-blocks-button\", 25);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"instanceId\", ctx_r3.siteHomeId);\n  }\n}\nfunction CoreSiteHomeIndexPage_core_empty_box_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 26);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"core.course.nocontentavailable\"));\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r39 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 27);\n    i0.ɵɵlistener(\"click\", function CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener() {\n      i0.ɵɵrestoreView(_r39);\n      const ctx_r38 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r38.openAvailableCourses());\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 28);\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 1, \"core.courses.availablecourses\"));\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-course-module\", 31);\n  }\n  if (rf & 2) {\n    const ctx_r40 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"module\", ctx_r40.newsForumModule);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template, 1, 1, \"core-course-module\", 30);\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.newsForumModule);\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r42 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 27);\n    i0.ɵɵlistener(\"click\", function CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener() {\n      i0.ɵɵrestoreView(_r42);\n      const ctx_r41 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r41.openCourseCategories());\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 32);\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 1, \"core.courses.categories\"));\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 27);\n    i0.ɵɵlistener(\"click\", function CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener() {\n      i0.ɵɵrestoreView(_r44);\n      const ctx_r43 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r43.openMyCourses());\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 28);\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 1, \"core.courses.mycourses\"));\n  }\n}\nfunction CoreSiteHomeIndexPage_ng_template_20_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r46 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 27);\n    i0.ɵɵlistener(\"click\", function CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener() {\n      i0.ɵɵrestoreView(_r46);\n      const ctx_r45 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r45.openSearch());\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 33);\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 1, \"core.courses.searchcourses\"));\n  }\n}\n/**\n * Page that displays site home index.\n */\nexport class CoreSiteHomeIndexPage {\n  constructor(route) {\n    var _this = this;\n    this.route = route;\n    this.dataLoaded = false;\n    this.hasContent = false;\n    this.hasBlocks = false;\n    this.items = [];\n    this.siteHomeId = 1;\n    this.searchEnabled = false;\n    // Refresh the enabled flags if site is updated.\n    this.updateSiteObserver = CoreEvents.on(CoreEvents.SITE_UPDATED, () => {\n      this.searchEnabled = !CoreCourses.isSearchCoursesDisabledInSite();\n    }, CoreSites.getCurrentSiteId());\n    this.logView = CoreTime.once( /*#__PURE__*/_asyncToGenerator(function* () {\n      var _this$currentSite$get, _this$currentSite$get2;\n      yield CoreUtils.ignoreErrors(CoreCourse.logView(_this.siteHomeId));\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'core_course_view_course',\n        name: (_this$currentSite$get = (_this$currentSite$get2 = _this.currentSite.getInfo()) === null || _this$currentSite$get2 === void 0 ? void 0 : _this$currentSite$get2.sitename) !== null && _this$currentSite$get !== void 0 ? _this$currentSite$get : '',\n        data: {\n          id: _this.siteHomeId,\n          category: 'course'\n        },\n        url: '/?redirect=0'\n      });\n    }));\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    this.searchEnabled = !CoreCourses.isSearchCoursesDisabledInSite();\n    this.currentSite = CoreSites.getRequiredCurrentSite();\n    this.siteHomeId = CoreSites.getCurrentSiteHomeId();\n    const module = CoreNavigator.getRouteParam('module');\n    if (module) {\n      const modNavOptions = CoreNavigator.getRouteParam('modNavOptions');\n      CoreCourseHelper.openModule(module, this.siteHomeId, {\n        modNavOptions\n      });\n    }\n    this.loadContent().finally(() => {\n      this.dataLoaded = true;\n    });\n    this.openFocusedInstance();\n    this.route.queryParams.subscribe(() => this.openFocusedInstance());\n  }\n  /**\n   * Convenience function to fetch the data.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.hasContent = false;\n      const config = _this2.currentSite.getStoredConfig() || {\n        numsections: 1,\n        frontpageloggedin: undefined\n      };\n      _this2.items = yield CoreSiteHome.getFrontPageItems(config.frontpageloggedin);\n      _this2.hasContent = _this2.items.length > 0;\n      // Get the news forum.\n      if (_this2.items.includes('NEWS_ITEMS')) {\n        try {\n          const forum = yield CoreSiteHome.getNewsForum(_this2.siteHomeId);\n          _this2.newsForumModule = yield CoreCourse.getModule(forum.cmid, forum.course);\n          _this2.newsForumModule.handlerData = yield CoreCourseModuleDelegate.getModuleDataFor(_this2.newsForumModule.modname, _this2.newsForumModule, _this2.siteHomeId, undefined, true);\n        } catch (_unused) {\n          // Ignore errors.\n        }\n      }\n      try {\n        const sections = yield CoreCourse.getSections(_this2.siteHomeId, false, true);\n        // Check \"Include a topic section\" setting from numsections.\n        _this2.section = config.numsections ? sections.find(section => section.section == 1) : undefined;\n        if (_this2.section) {\n          const result = yield CoreCourseHelper.addHandlerDataForModules([_this2.section], _this2.siteHomeId, undefined, undefined, true);\n          _this2.section.hasContent = result.hasContent;\n          _this2.hasContent = result.hasContent || _this2.hasContent;\n        }\n        _this2.logView();\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'core.course.couldnotloadsectioncontent', true);\n      }\n      _this2.hasBlocks = yield CoreBlockHelper.hasCourseBlocks(_this2.siteHomeId);\n    })();\n  }\n  /**\n   * Refresh the data.\n   *\n   * @param refresher Refresher.\n   */\n  doRefresh(refresher) {\n    var _this3 = this;\n    const promises = [];\n    promises.push(CoreCourse.invalidateSections(this.siteHomeId));\n    promises.push(this.currentSite.invalidateConfig().then( /*#__PURE__*/_asyncToGenerator(function* () {\n      // Config invalidated, fetch it again.\n      const config = yield _this3.currentSite.getConfig();\n      _this3.currentSite.setConfig(config);\n      return;\n    })));\n    promises.push(CoreCourse.invalidateCourseBlocks(this.siteHomeId));\n    if (this.section && this.section.modules) {\n      // Invalidate modules prefetch data.\n      promises.push(CoreCourseModulePrefetchDelegate.invalidateModules(this.section.modules, this.siteHomeId));\n    }\n    Promise.all(promises).finally( /*#__PURE__*/_asyncToGenerator(function* () {\n      yield _this3.loadContent().finally(() => {\n        refresher === null || refresher === void 0 || refresher.complete();\n      });\n    }));\n  }\n  /**\n   * Go to search courses.\n   */\n  openSearch() {\n    CoreNavigator.navigateToSitePath('courses/list', {\n      params: {\n        mode: 'search'\n      }\n    });\n  }\n  /**\n   * Go to available courses.\n   */\n  openAvailableCourses() {\n    CoreNavigator.navigateToSitePath('courses/list', {\n      params: {\n        mode: 'all'\n      }\n    });\n  }\n  /**\n   * Go to my courses.\n   */\n  openMyCourses() {\n    CoreNavigator.navigateToSitePath('courses/list', {\n      params: {\n        mode: 'my'\n      }\n    });\n  }\n  /**\n   * Go to course categories.\n   */\n  openCourseCategories() {\n    CoreNavigator.navigateToSitePath('courses/categories');\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    this.updateSiteObserver.off();\n  }\n  /**\n   * Check whether there is a focused instance in the page parameters and open it.\n   */\n  openFocusedInstance() {\n    const blockInstanceId = CoreNavigator.getRouteNumberParam('blockInstanceId');\n    if (blockInstanceId) {\n      CoreDomUtils.openSideModal({\n        component: CoreBlockSideBlocksComponent,\n        componentProps: {\n          contextLevel: 'course',\n          instanceId: this.siteHomeId,\n          initialBlockInstanceId: blockInstanceId\n        }\n      });\n    }\n  }\n}\n_class = CoreSiteHomeIndexPage;\n_class.ɵfac = function CoreSiteHomeIndexPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-sitehome-index\"]],\n  decls: 22,\n  vars: 10,\n  consts: [[\"slot\", \"end\", \"prepend\", \"\"], [3, \"click\", 4, \"ngIf\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [1, \"core-course-module-list-wrapper\"], [4, \"ngIf\"], [\"slot\", \"fixed\", \"contextLevel\", \"course\", 3, \"instanceId\", 4, \"ngIf\"], [\"icon\", \"fas-box-open\", 3, \"message\", 4, \"ngIf\"], [\"allCourseList\", \"\"], [\"news\", \"\"], [\"categories\", \"\"], [\"enrolledCourseList\", \"\"], [\"courseSearch\", \"\"], [3, \"click\"], [\"name\", \"fas-magnifying-glass\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"class\", \"ion-text-wrap section-summary\", 4, \"ngIf\"], [3, \"module\", \"section\", 4, \"ngFor\", \"ngForOf\"], [1, \"ion-text-wrap\", \"section-summary\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [3, \"module\", \"section\"], [4, \"ngFor\", \"ngForOf\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngTemplateOutlet\"], [\"slot\", \"fixed\", \"contextLevel\", \"course\", 3, \"instanceId\"], [\"icon\", \"fas-box-open\", 3, \"message\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"click\"], [\"name\", \"fas-graduation-cap\", \"fixed-width\", \"\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [1, \"item-heading\"], [\"class\", \"core-sitehome-news\", 3, \"module\", 4, \"ngIf\"], [1, \"core-sitehome-news\", 3, \"module\"], [\"name\", \"fas-folder\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"name\", \"fas-magnifying-glass\", \"slot\", \"start\", \"aria-hidden\", \"true\"]],\n  template: function CoreSiteHomeIndexPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"core-navbar-buttons\", 0);\n      i0.ɵɵtemplate(1, CoreSiteHomeIndexPage_ion_button_1_Template, 3, 3, \"ion-button\", 1);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"ion-content\")(3, \"ion-refresher\", 2);\n      i0.ɵɵlistener(\"ionRefresh\", function CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener($event) {\n        return ctx.doRefresh($event.target);\n      });\n      i0.ɵɵelement(4, \"ion-refresher-content\", 3);\n      i0.ɵɵpipe(5, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"core-loading\", 4)(7, \"ion-list\", 5);\n      i0.ɵɵtemplate(8, CoreSiteHomeIndexPage_ng_container_8_Template, 3, 2, \"ng-container\", 6);\n      i0.ɵɵtemplate(9, CoreSiteHomeIndexPage_ng_container_9_Template, 3, 2, \"ng-container\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template, 1, 1, \"core-block-side-blocks-button\", 7);\n      i0.ɵɵtemplate(11, CoreSiteHomeIndexPage_core_empty_box_11_Template, 2, 3, \"core-empty-box\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(12, CoreSiteHomeIndexPage_ng_template_12_Template, 7, 3, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(14, CoreSiteHomeIndexPage_ng_template_14_Template, 1, 1, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(16, CoreSiteHomeIndexPage_ng_template_16_Template, 7, 3, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(18, CoreSiteHomeIndexPage_ng_template_18_Template, 7, 3, \"ng-template\", null, 12, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(20, CoreSiteHomeIndexPage_ng_template_20_Template, 7, 3, \"ng-template\", null, 13, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchEnabled);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.dataLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(5, 8, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.dataLoaded);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.section && ctx.section.hasContent);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.items.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.hasBlocks);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.hasContent);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i2.NgTemplateOutlet, i2.NgSwitch, i2.NgSwitchCase, i3.CoreEmptyBoxComponent, i4.CoreLoadingComponent, i5.CoreNavBarButtonsComponent, i6.CoreSpacerComponent, i7.CoreFaIconDirective, i8.CoreFormatTextDirective, i9.CoreContentDirective, i10.CoreUpdateNonReactiveAttributesDirective, i11.IonButton, i11.IonCard, i11.IonContent, i11.IonIcon, i11.IonItem, i11.IonLabel, i11.IonList, i11.IonRefresher, i11.IonRefresherContent, i12.CoreBlockSideBlocksButtonComponent, i13.CoreCourseModuleComponent, i14.TranslatePipe],\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\nion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  display: inline-block;\\n  border-radius: var(--radius-xs);\\n  padding: 4px;\\n  background-color: var(--gray-100);\\n  color: var(--gray-900);\\n  line-height: var(--size);\\n  --margin-end: 8px;\\n  -webkit-margin-end: var(--margin-end);\\n  margin-inline-end: var(--margin-end);\\n}\\n\\ncore-spacer[_ngcontent-%COMP%] {\\n  --spacer-horizontal: 10px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvY29yZS9mZWF0dXJlcy9zaXRlaG9tZS9wYWdlcy9pbmRleC9pbmRleC5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7O0VBQUE7QUNFQTs7OztFQUFBO0FBNEdBOztFQUFBO0FDOUdBOzs7O0VBQUE7QUNBQTs7OztFQUFBO0FBK0RBOzs7O0VBQUE7QUM3REE7RUFDSSxxQkFBQTtFQUNBLCtCQUFBO0VBQ0EsWUFBQTtFQUNBLGlDQUFBO0VBQ0Esc0JBQUE7RUFDQSx3QkFBQTtFQUNBLGlCQUFBO0VMOFNBLHFDSzdTaUM7RUw4U2pDLG9DSzlTaUM7QUFxRHJDOztBQWxEQTtFQUNJLHlCQUFBO0FBcURKIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBcHAgR2xvYmFsIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIHRoZSBkaWZmZXJlbnQgZmlsZXMgeW91IHNob3VsZCBpbXBvcnQgdG8gdXNlIGdsb2JhbCB2YXJpYWJsZXMuXG4gKi9cblxuJGZvbnQtcGF0aDogXCIuLi9hc3NldHMvZm9udHNcIjtcbiRhc3NldHMtcGF0aDogXCIuLi9hc3NldHNcIjtcblxuQGltcG9ydCBcIi4vaGVscGVycy9oZWxwZXJzLnNjc3NcIjtcbkBpbXBvcnQgXCIuL2dsb2JhbHMuY3VzdG9tLnNjc3NcIjtcbkBpbXBvcnQgXCIuL2dsb2JhbHMudmFyaWFibGVzLnNjc3NcIjtcbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgc3RyaW5nIGZ1bmN0aW9ucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMuZnVuY3Rpb25zLnN0cmluZy5zY3NzXG4gKi9cblxuXG4vLyBTdHJpbmcgVXRpbGl0eSBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIFN0cmluZyBSZXBsYWNlIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLXJlcGxhY2UoJHN0cmluZywgJHNlYXJjaCwgJHJlcGxhY2U6IFwiXCIpIHtcbiAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlYXJjaCk7XG5cbiAgQGlmICRpbmRleCB7XG4gICAgQHJldHVybiBzdHItc2xpY2UoJHN0cmluZywgMSwgJGluZGV4IC0gMSkgKyAkcmVwbGFjZSArIHN0ci1yZXBsYWNlKHN0ci1zbGljZSgkc3RyaW5nLCAkaW5kZXggKyBzdHItbGVuZ3RoKCRzZWFyY2gpKSwgJHNlYXJjaCwgJHJlcGxhY2UpO1xuICB9XG5cbiAgQHJldHVybiAkc3RyaW5nO1xufVxuXG4vLyBTdHJpbmcgU3BsaXQgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuQGZ1bmN0aW9uIHN0ci1zcGxpdCgkc3RyaW5nLCAkc2VwYXJhdG9yKSB7XG4gIC8vIGVtcHR5IGFycmF5L2xpc3RcbiAgJHNwbGl0LWFycjogKCk7XG4gIC8vIGZpcnN0IGluZGV4IG9mIHNlcGFyYXRvciBpbiBzdHJpbmdcbiAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlcGFyYXRvcik7XG4gIC8vIGxvb3AgdGhyb3VnaCBzdHJpbmdcbiAgQHdoaWxlICRpbmRleCAhPSBudWxsIHtcbiAgICAvLyBnZXQgdGhlIHN1YnN0cmluZyBmcm9tIHRoZSBmaXJzdCBjaGFyYWN0ZXIgdG8gdGhlIHNlcGFyYXRvclxuICAgICRpdGVtOiBzdHItc2xpY2UoJHN0cmluZywgMSwgJGluZGV4IC0gMSk7XG4gICAgLy8gcHVzaCBpdGVtIHRvIGFycmF5XG4gICAgJHNwbGl0LWFycjogYXBwZW5kKCRzcGxpdC1hcnIsICRpdGVtKTtcbiAgICAvLyByZW1vdmUgaXRlbSBhbmQgc2VwYXJhdG9yIGZyb20gc3RyaW5nXG4gICAgJHN0cmluZzogc3RyLXNsaWNlKCRzdHJpbmcsICRpbmRleCArIDEpO1xuICAgIC8vIGZpbmQgbmV3IGluZGV4IG9mIHNlcGFyYXRvclxuICAgICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZXBhcmF0b3IpO1xuICB9XG4gIC8vIGFkZCB0aGUgcmVtYWluaW5nIHN0cmluZyB0byBsaXN0ICh0aGUgbGFzdCBpdGVtKVxuICAkc3BsaXQtYXJyOiBhcHBlbmQoJHNwbGl0LWFyciwgJHN0cmluZyk7XG5cbiAgQHJldHVybiAkc3BsaXQtYXJyO1xufVxuXG5cbi8vIFN0cmluZyBFeHRyYWN0IEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLWV4dHJhY3QoJHN0cmluZywgJHN0YXJ0LCAkZW5kKSB7XG4gICRzdGFydC1pbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzdGFydCk7XG5cbiAgQGlmICRzdGFydC1pbmRleCB7XG4gICAgJHBvc3Q6IHN0ci1zbGljZSgkc3RyaW5nLCAkc3RhcnQtaW5kZXggKyBzdHItbGVuZ3RoKCRzdGFydCkpO1xuICAgICRlbmQtaW5kZXg6IHN0ci1pbmRleCgkcG9zdCwgJGVuZCk7XG5cbiAgICBAaWYgJGVuZC1pbmRleCB7XG4gICAgICBAcmV0dXJuIHN0ci1zbGljZSgkcG9zdCwgMSwgJGVuZC1pbmRleCAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIEByZXR1cm4gbnVsbDtcbn1cblxuXG4vLyBTdHJpbmcgQ29udGFpbnMgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItY29udGFpbnMoJHN0cmluZywgJG5lZWRsZSkge1xuICBAaWYgKHR5cGUtb2YoJHN0cmluZykgPT0gc3RyaW5nKSB7XG4gICAgQHJldHVybiBzdHItaW5kZXgoJHN0cmluZywgJG5lZWRsZSkgIT0gbnVsbDtcbiAgfVxuXG4gIEByZXR1cm4gZmFsc2U7XG59XG5cblxuLy8gVVJMIEVuY29kZSBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHVybC1lbmNvZGUoJHZhbCkge1xuICAkc3BhY2VzOiBzdHItcmVwbGFjZSgkdmFsLCBcIiBcIiwgXCIlMjBcIik7XG4gICRlbmNvZGVkOiBzdHItcmVwbGFjZSgkc3BhY2VzLCBcIiNcIiwgXCIlMjNcIik7XG4gIEByZXR1cm4gJGVuY29kZWQ7XG59XG5cblxuLy8gQWRkIFJvb3QgU2VsZWN0b3Jcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBBZGRzIGEgcm9vdCBzZWxlY3RvciB1c2luZyBob3N0IGJhc2VkIG9uIHRoZSBzZWxlY3RvciBwYXNzZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBhZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgJGFkZEhvc3RTZWxlY3Rvcikge1xuICAkc2VsZWN0b3JzOiBzdHItc3BsaXQoJHJvb3QsIFwiLFwiKTtcblxuICAkbGlzdDogKCk7XG5cbiAgQGVhY2ggJHNlbGVjdG9yIGluICRzZWxlY3RvcnMge1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBjb250YWlucyA6aG9zdCggaXQgbWVhbnMgaXQgaXMgdGFyZ2V0aW5nIGEgY2xhc3Mgb24gdGhlIGhvc3RcbiAgICAvLyBlbGVtZW50IHNvIHdlIG5lZWQgdG8gY2hhbmdlIGhvdyB3ZSB0YXJnZXQgaXQ6XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZClcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgQGlmIHN0ci1jb250YWlucygkc2VsZWN0b3IsIFwiOmhvc3QoXCIpIHtcbiAgICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZClcbiAgICAgICRzaGFkb3ctZWxlbWVudDogc3RyLXJlcGxhY2UoJHNlbGVjdG9yLCBcIjpob3N0KFwiLCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSk6aG9zdChcIik7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkc2hhZG93LWVsZW1lbnQsIGNvbW1hKTtcblxuICAgICAgJG5ldy1lbGVtZW50OiAoKTtcbiAgICAgICRlbGVtZW50czogc3RyLXNwbGl0KCRzZWxlY3RvciwgXCIgXCIpO1xuXG4gICAgICBAZWFjaCAkZWxlbWVudCBpbiAkZWxlbWVudHMge1xuICAgICAgICBAaWYgc3RyLWNvbnRhaW5zKCRlbGVtZW50LCBcIjpob3N0KFwiKSB7XG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiAkZWxlbWVudDtcblxuICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIDpob3N0KCBhbmQgKSBzbyBhbGwgd2UgaGF2ZSBsZWZ0IGlzIHRoZSBjbGFzc1xuICAgICAgICAgIC8vIGluc2lkZSBvZiBpdDpcbiAgICAgICAgICAvLyA6aG9zdCguZml4ZWQpIC0+IC5maXhlZFxuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCBcIilcIiwgXCJcIik7XG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsIFwiOmhvc3QoXCIsIFwiXCIpO1xuXG4gICAgICAgICAgLy8gQWRkIHRoZSBjbGFzcyBiYWNrIGluc2lkZSBvZiBob3N0IHdpdGggdGhlIHJ0bCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyAuZml4ZWQgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsICRzY29wZWQtZWxlbWVudCwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pI3skc2NvcGVkLWVsZW1lbnR9XCIpO1xuXG4gICAgICAgICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJHNjb3BlZC1lbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH0gQGVsc2Uge1xuICAgICAgICAgIC8vIEFkZCBiYWNrIGFueSBzZWxlY3RvcnMgdGhhdCBmb2xsb3dlZCB0aGUgaG9zdCBhZnRlciB0cmFuc2Zvcm1pbmcgdGhlXG4gICAgICAgICAgLy8gZmlyc3Qgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QoLmZpeGVkKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZCkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWQgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJGVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkbmV3LWVsZW1lbnQsIGNvbW1hKTtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgY29udGFpbnMgOmhvc3Qgd2l0aG91dCBhIHBhcmFudGhlc2VzXG4gICAgLy8gaXQgbWVhbnMgaXQgaXMgdGFyZ2V0aW5nIGp1c3QgdGhlIGhvc3RcbiAgICAvLyBlbGVtZW50IHNvIHdlIGNhbiBjaGFuZ2UgaXQgdG8gbG9vayBmb3IgaG9zdC1jb250ZXh0XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdFwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAvLyAtLT4gOmhvc3Q6ZGlyKHJ0bClcbiAgICB9IEBlbHNlIGlmIHN0ci1jb250YWlucygkc2VsZWN0b3IsIFwiOmhvc3RcIikge1xuICAgICAgJG5ldy1lbGVtZW50OiAoKTtcbiAgICAgICRlbGVtZW50czogc3RyLXNwbGl0KCRzZWxlY3RvciwgXCIgXCIpO1xuXG4gICAgICBAZWFjaCAkZWxlbWVudCBpbiAkZWxlbWVudHMge1xuICAgICAgICBAaWYgc3RyLWNvbnRhaW5zKCRlbGVtZW50LCBcIjpob3N0XCIpIHtcbiAgICAgICAgICAvLyBSZXBsYWNlIHRoZSA6aG9zdCB3aXRoIHRoZSBhZGRIb3N0U2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgICAgICAgJHVwZGF0ZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJGVsZW1lbnQsIFwiOmhvc3RcIiwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pXCIpO1xuXG4gICAgICAgICAgLy8gQWRkIHRoZSBmaW5hbCBzZWxlY3RvciBhZnRlciBhbGwgdHJhbnNmb3JtYXRpb25zOlxuICAgICAgICAgIC8vIDpob3N0IC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJHVwZGF0ZWQtZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9IEBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgYmFjayBhbnkgc2VsZWN0b3JzIHRoYXQgZm9sbG93ZWQgdGhlIGhvc3QgYWZ0ZXIgdHJhbnNmb3JtaW5nIHRoZVxuICAgICAgICAgIC8vIGZpcnN0IHNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0IDo6c2xvdHRlZChpb24taWNvbikgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRlbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJG5ldy1lbGVtZW50LCBjb21tYSk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGRvZXMgbm90IGNvbnRhaW4gaG9zdCBhdCBhbGwgaXQgaXMgZWl0aGVyIGEgc2hhZG93XG4gICAgLy8gb3Igbm9ybWFsIGVsZW1lbnQgc28gYXBwZW5kIGJvdGggdGhlIGFkZEhvc3RTZWxlY3RvciBhbmQgaG9zdC1jb250ZXh0XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCJpb24tY29tcG9uZW50XCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSBpb24tY29tcG9uZW50XG4gICAgLy8gLS0+IFtkaXI9cnRsXSBpb24tY29tcG9uZW50XG4gICAgfSBAZWxzZSB7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCBcIiN7JGFkZEhvc3RTZWxlY3Rvcn0gI3skc2VsZWN0b3J9XCIsIGNvbW1hKTtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KSAjeyRzZWxlY3Rvcn1cIiwgY29tbWEpO1xuICAgIH1cbiAgfVxuXG4gIEByZXR1cm4gJGxpc3Q7XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIGNvbG9yIGZ1bmN0aW9ucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMuZnVuY3Rpb25zLmNvbG9yLnNjc3NcbiAqL1xuXG4vLyBHZXRzIHRoZSBhY3RpdmUgY29sb3IncyBjc3MgdmFyaWFibGUgZnJvbSBhIHZhcmlhdGlvbi4gQWxwaGEgaXMgb3B0aW9uYWwuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXhhbXBsZSB1c2FnZTpcbi8vIGN1cnJlbnQtY29sb3IoYmFzZSkgPT4gdmFyKC0taW9uLWNvbG9yLWJhc2UpXG4vLyBjdXJyZW50LWNvbG9yKGNvbnRyYXN0LCAwLjEpID0+IHJnYmEodmFyKC0taW9uLWNvbG9yLWNvbnRyYXN0LXJnYiksIDAuMSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gY3VycmVudC1jb2xvcigkdmFyaWF0aW9uLCAkYWxwaGE6IG51bGwpIHtcbiAgQGlmICRhbHBoYSA9PSBudWxsIHtcbiAgICBAcmV0dXJuIHZhcigtLWlvbi1jb2xvci0jeyR2YXJpYXRpb259KTtcbiAgfSBAZWxzZSB7XG4gICAgQHJldHVybiByZ2JhKHZhcigtLWlvbi1jb2xvci0jeyR2YXJpYXRpb259LXJnYiksICN7JGFscGhhfSk7XG4gIH1cbn1cblxuLy8gR2V0cyB0aGUgc3BlY2lmaWMgY29sb3IncyBjc3MgdmFyaWFibGUgZnJvbSB0aGUgbmFtZSBhbmQgdmFyaWF0aW9uLiBBbHBoYS9yZ2IgYXJlIG9wdGlvbmFsLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV4YW1wbGUgdXNhZ2U6XG4vLyBpb24tY29sb3IocHJpbWFyeSwgYmFzZSkgPT4gdmFyKC0taW9uLWNvbG9yLXByaW1hcnksICMzODgwZmYpXG4vLyBpb24tY29sb3Ioc2Vjb25kYXJ5LCBjb250cmFzdCkgPT4gdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeS1jb250cmFzdClcbi8vIGlvbi1jb2xvcihwcmltYXJ5LCBiYXNlLCAwLjUpID0+IHJnYmEodmFyKC0taW9uLWNvbG9yLXByaW1hcnktcmdiLCA1NiwgMTI4LCAyNTUpLCAwLjUpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGlvbi1jb2xvcigkbmFtZSwgJHZhcmlhdGlvbiwgJGFscGhhOiBudWxsLCAkcmdiOiBudWxsKSB7XG4gICR2YWx1ZXM6IG1hcC1nZXQoJGNvbG9ycywgJG5hbWUpO1xuICAkdmFsdWU6IG1hcC1nZXQoJHZhbHVlcywgJHZhcmlhdGlvbik7XG4gICR2YXJpYWJsZTogLS1pb24tY29sb3ItI3skbmFtZX0tI3skdmFyaWF0aW9ufTtcblxuICBAaWYgKCR2YXJpYXRpb24gPT0gYmFzZSkge1xuICAgICR2YXJpYWJsZTogLS1pb24tY29sb3ItI3skbmFtZX07XG4gIH1cblxuICBAaWYgKCRhbHBoYSkge1xuICAgICR2YWx1ZTogY29sb3ItdG8tcmdiLWxpc3QoJHZhbHVlKTtcbiAgICBAcmV0dXJuIHJnYmEodmFyKCN7JHZhcmlhYmxlfS1yZ2IsICR2YWx1ZSksICRhbHBoYSk7XG4gIH1cbiAgQGlmICgkcmdiKSB7XG4gICAgJHZhbHVlOiBjb2xvci10by1yZ2ItbGlzdCgkdmFsdWUpO1xuICAgICR2YXJpYWJsZTogI3skdmFyaWFibGV9LXJnYjtcbiAgfVxuXG4gIEByZXR1cm4gdmFyKCN7JHZhcmlhYmxlfSwgJHZhbHVlKTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIGJsYWNrIHRvIGNyZWF0ZSBpdHMgc2hhZGUuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci1zaGFkZSgkY29sb3IpIHtcbiAgQHJldHVybiBtaXgoIzAwMCwgJGNvbG9yLCAxMiUpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggd2hpdGUgdG8gY3JlYXRlIGl0cyB0aW50LlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3ItdGludCgkY29sb3IpIHtcbiAgQHJldHVybiBtaXgoI2ZmZiwgJGNvbG9yLCAxMCUpO1xufVxuXG4vLyBDb252ZXJ0cyBhIGNvbG9yIHRvIGEgY29tbWEgc2VwYXJhdGVkIHJnYi5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gY29sb3ItdG8tcmdiLWxpc3QoJGNvbG9yKSB7XG4gIEByZXR1cm4gI3tyZWQoJGNvbG9yKX0sI3tncmVlbigkY29sb3IpfSwje2JsdWUoJGNvbG9yKX07XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIG1peGlucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMubWl4aW5zLnNjc3NcbiAqL1xuXG5AbWl4aW4gaW5wdXQtY292ZXIoKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uKDAsIG51bGwsIG51bGwsIDApO1xuICBAaW5jbHVkZSBtYXJnaW4oMCk7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gIGFwcGVhcmFuY2U6IG5vbmU7XG4gIG91dGxpbmU6IG5vbmU7XG5cbiAgJjo6LW1vei1mb2N1cy1pbm5lciB7XG4gICAgYm9yZGVyOiAwO1xuICB9XG59XG5cbkBtaXhpbiB2aXN1YWxseS1oaWRkZW4oKSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcblxuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG5cbiAgYm9yZGVyOiAwO1xuICBvdXRsaW5lOiAwO1xuICBjbGlwOiByZWN0KDAgMCAwIDApO1xuXG4gIG9wYWNpdHk6IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAtbW96LWFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbkBtaXhpbiB0ZXh0LWluaGVyaXQoKSB7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICBmb250LXNpemU6IGluaGVyaXQ7XG4gIGZvbnQtc3R5bGU6IGluaGVyaXQ7XG4gIGZvbnQtd2VpZ2h0OiBpbmhlcml0O1xuICBsZXR0ZXItc3BhY2luZzogaW5oZXJpdDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBpbmhlcml0O1xuICB0ZXh0LWluZGVudDogaW5oZXJpdDtcbiAgdGV4dC1vdmVyZmxvdzogaW5oZXJpdDtcbiAgdGV4dC10cmFuc2Zvcm06IGluaGVyaXQ7XG4gIHRleHQtYWxpZ246IGluaGVyaXQ7XG4gIHdoaXRlLXNwYWNlOiBpbmhlcml0O1xuICBjb2xvcjogaW5oZXJpdDtcbn1cblxuQG1peGluIGJ1dHRvbi1zdGF0ZSgpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24oMCwgMCwgMCwgMCk7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIGNvbnRlbnQ6IFwiXCI7XG5cbiAgb3BhY2l0eTogMDtcbn1cblxuLy8gRm9udCBzbW9vdGhpbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBmb250LXNtb290aGluZygpIHtcbiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XG59XG5cbi8vIEdldCB0aGUga2V5IGZyb20gYSBtYXAgYmFzZWQgb24gdGhlIGluZGV4XG5AZnVuY3Rpb24gaW5kZXgtdG8ta2V5KCRtYXAsICRpbmRleCkge1xuICAka2V5czogbWFwLWtleXMoJG1hcCk7XG5cbiAgQHJldHVybiBudGgoJGtleXMsICRpbmRleCk7XG59XG5cblxuLy8gQnJlYWtwb2ludCBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBCcmVha3BvaW50IHZpZXdwb3J0IHNpemVzIGFuZCBtZWRpYSBxdWVyaWVzLlxuLy9cbi8vIEJyZWFrcG9pbnRzIGFyZSBkZWZpbmVkIGFzIGEgbWFwIG9mIChuYW1lOiBtaW5pbXVtIHdpZHRoKSwgb3JkZXIgZnJvbSBzbWFsbCB0byBsYXJnZTpcbi8vXG4vLyAgICAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpXG4vL1xuLy8gVGhlIG1hcCBkZWZpbmVkIGluIHRoZSBgJHNjcmVlbi1icmVha3BvaW50c2AgZ2xvYmFsIHZhcmlhYmxlIGlzIHVzZWQgYXMgdGhlIGAkYnJlYWtwb2ludHNgIGFyZ3VtZW50IGJ5IGRlZmF1bHQuXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBNaW5pbXVtIGJyZWFrcG9pbnQgd2lkdGguIE51bGwgZm9yIHRoZSBzbWFsbGVzdCAoZmlyc3QpIGJyZWFrcG9pbnQuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1taW4oc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICA1NzZweFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1pbjogbWFwLWdldCgkYnJlYWtwb2ludHMsICRuYW1lKTtcblxuICBAcmV0dXJuIGlmKCRuYW1lICE9IGluZGV4LXRvLWtleSgkYnJlYWtwb2ludHMsIDEpLCAkbWluLCBudWxsKTtcbn1cblxuLy8gUmV0dXJucyBhIGJsYW5rIHN0cmluZyBpZiBzbWFsbGVzdCBicmVha3BvaW50LCBvdGhlcndpc2UgcmV0dXJucyB0aGUgbmFtZSB3aXRoIGEgZGFzaCBpbmZyb250LlxuLy8gVXNlZnVsIGZvciBtYWtpbmcgcmVzcG9uc2l2ZSB1dGlsaXRpZXMuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1pbmZpeCh4cywgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIFwiXCIgIChSZXR1cm5zIGEgYmxhbmsgc3RyaW5nKVxuLy8gICAgPj4gYnJlYWtwb2ludC1pbmZpeChzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIFwiLXNtXCJcbkBmdW5jdGlvbiBicmVha3BvaW50LWluZml4KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgQHJldHVybiBpZihicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzKSA9PSBudWxsLCBcIlwiLCBcIi0jeyRuYW1lfVwiKTtcbn1cblxuLy8gTWVkaWEgb2YgYXQgbGVhc3QgdGhlIG1pbmltdW0gYnJlYWtwb2ludCB3aWR0aC4gTm8gcXVlcnkgZm9yIHRoZSBzbWFsbGVzdCBicmVha3BvaW50LlxuLy8gTWFrZXMgdGhlIEBjb250ZW50IGFwcGx5IHRvIHRoZSBnaXZlbiBicmVha3BvaW50IGFuZCB3aWRlci5cbkBtaXhpbiBtZWRpYS1icmVha3BvaW50LXVwKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1pbjogYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50cyk7XG4gIEBpZiAkbWluIHtcbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJG1pbikge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG4vLyBOYW1lIG9mIHRoZSBuZXh0IGJyZWFrcG9pbnQsIG9yIG51bGwgZm9yIHRoZSBsYXN0IGJyZWFrcG9pbnQuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtKVxuLy8gICAgbWRcbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIG1kXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20sICRicmVha3BvaW50LW5hbWVzOiAoeHMgc20gbWQgbGcgeGwpKVxuLy8gICAgbWRcbkBmdW5jdGlvbiBicmVha3BvaW50LW5leHQoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cywgJGJyZWFrcG9pbnQtbmFtZXM6IG1hcC1rZXlzKCRicmVha3BvaW50cykpIHtcbiAgJG46IGluZGV4KCRicmVha3BvaW50LW5hbWVzLCAkbmFtZSk7XG4gIEByZXR1cm4gaWYoJG4gPCBsZW5ndGgoJGJyZWFrcG9pbnQtbmFtZXMpLCBudGgoJGJyZWFrcG9pbnQtbmFtZXMsICRuICsgMSksIG51bGwpO1xufVxuXG4vLyBNYXhpbXVtIGJyZWFrcG9pbnQgd2lkdGguIE51bGwgZm9yIHRoZSBzbWFsbGVzdCAoZmlyc3QpIGJyZWFrcG9pbnQuXG4vLyBUaGUgbWF4aW11bSB2YWx1ZSBpcyByZWR1Y2VkIGJ5IDAuMDJweCB0byB3b3JrIGFyb3VuZCB0aGUgbGltaXRhdGlvbnMgb2Zcbi8vIGBtaW4tYCBhbmQgYG1heC1gIHByZWZpeGVzIGFuZCB2aWV3cG9ydHMgd2l0aCBmcmFjdGlvbmFsIHdpZHRocy5cbi8vXG4vLyBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL21lZGlhcXVlcmllcy00LyNtcS1taW4tbWF4XG4vLyBVc2VzIDAuMDJweCByYXRoZXIgdGhhbiAwLjAxcHggdG8gd29yayBhcm91bmQgYSBjdXJyZW50IHJvdW5kaW5nIGJ1ZyBpbiBTYWZhcmkuXHQvLyBVc2VzIDAuMDJweCByYXRoZXIgdGhhbiAwLjAxcHggdG8gd29yayBhcm91bmQgYSBjdXJyZW50IHJvdW5kaW5nIGJ1ZyBpbiBTYWZhcmkuXG4vLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3ODI2MVx0Ly8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzgyNjFcbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW1heChtZCwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIDc2Ny45OHB4XG5AZnVuY3Rpb24gYnJlYWtwb2ludC1tYXgoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWF4OiBtYXAtZ2V0KCRicmVha3BvaW50cywgJG5hbWUpO1xuICBAcmV0dXJuIGlmKCRtYXggYW5kICRtYXggPiAwLCAkbWF4IC0gLjAyLCBudWxsKTtcbn1cblxuLy8gTWVkaWEgb2YgYXQgbW9zdCB0aGUgbWF4aW11bSBicmVha3BvaW50IHdpZHRoLiBObyBxdWVyeSBmb3IgdGhlIGxhcmdlc3QgYnJlYWtwb2ludC5cbi8vIE1ha2VzIHRoZSBAY29udGVudCBhcHBseSB0byB0aGUgZ2l2ZW4gYnJlYWtwb2ludCBhbmQgbmFycm93ZXIuXG5AbWl4aW4gbWVkaWEtYnJlYWtwb2ludC1kb3duKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1heDogYnJlYWtwb2ludC1tYXgoJG5hbWUsICRicmVha3BvaW50cyk7XG4gIEBpZiAkbWF4IHtcbiAgICBAbWVkaWEgKG1heC13aWR0aDogJG1heCkge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5cbi8vIFRleHQgRGlyZWN0aW9uIC0gbHRyIC8gcnRsXG4vL1xuLy8gQ1NTIGRlZmF1bHRzIHRvIHVzZSB0aGUgbHRyIGNzcywgYW5kIGFkZHMgW2Rpcj1ydGxdIHNlbGVjdG9yc1xuLy8gdG8gb3ZlcnJpZGUgbHRyIGRlZmF1bHRzLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbXVsdGktZGlyKCkge1xuICBAY29udGVudDtcblxuICAvLyAkcm9vdDogI3smfTtcbiAgLy8gQGF0LXJvb3QgW2Rpcl0ge1xuICAvLyAgICN7JHJvb3R9IHtcbiAgLy8gICAgIEBjb250ZW50O1xuICAvLyAgIH1cbiAgLy8gfVxufVxuXG5AbWl4aW4gcnRsKCkge1xuICAkcm9vdDogI3smfTtcblxuICAkcm9vdFNwbGl0OiBzdHItc3BsaXQoJHJvb3QsIFwiLFwiKTtcbiAgJHNlbGVjdG9yczogI3thZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgXCJbZGlyPXJ0bF1cIil9O1xuICAkc2VsZWN0b3JzU3BsaXQ6IHN0ci1zcGxpdCgkc2VsZWN0b3JzLCBcIixcIik7XG5cbiAgJGhvc3RDb250ZXh0U2VsZWN0b3JzOiAoKTtcbiAgJHJlc3RTZWxlY3RvcnM6ICgpO1xuICAkZGlyU2VsZWN0b3JzOiAoKTtcblxuICAvLyBTZWxlY3RvcnMgbXVzdCBiZSBzcGxpdCBpbnRvIGluZGl2aWR1YWwgc2VsZWN0b3JzIGluIGNhc2UgdGhlIGJyb3dzZXJcbiAgLy8gZG9lc24ndCBzdXBwb3J0IGEgc3BlY2lmaWMgc2VsZWN0b3IuXG4gIC8vIEZvciBleGFtcGxlLCBGaXJlZm94IGFuZCBTYWZhcmkgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLlxuICAvLyBJZiBhbiBpbnZhbGlkIHNlbGVjdG9yIGlzIHVzZWQsIHRoZW4gdGhlIGVudGlyZSBncm91cCBvZiBzZWxlY3RvcnNcbiAgLy8gd2lsbCBiZSBpZ25vcmVkLlxuICAvLyBAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLTMvI2dyb3VwaW5nXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkc2VsZWN0b3JzU3BsaXQge1xuICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgQGlmIHN0ci1pbmRleCgkc2VsZWN0b3IsIFwiOmhvc3QtY29udGV4dFwiKSB7XG4gICAgICAkaG9zdENvbnRleHRTZWxlY3RvcnM6IGFwcGVuZCgkaG9zdENvbnRleHRTZWxlY3RvcnMsICRzZWxlY3RvciwgY29tbWEpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICAgICRyZXN0U2VsZWN0b3JzOiBhcHBlbmQoJHJlc3RTZWxlY3RvcnMsICRzZWxlY3RvciwgY29tbWEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBDaHJvbWUuXG4gIEBpZiBsZW5ndGgoJGhvc3RDb250ZXh0U2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JGhvc3RDb250ZXh0U2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgYWxsIGJyb3dzZXJzLlxuICBAaWYgbGVuZ3RoKCRyZXN0U2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JHJlc3RTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIGJyb3dzZXIgY2FuIHN1cHBvcnQgYDpkaXIoKWAsIHRoZW4gYWRkIHRoZSBgOmRpcigpYCBzZWxlY3RvcnMuXG4gIC8vIEBzdXBwb3J0cyBzZWxlY3Rvcig6ZGlyKHJ0bCkpIHsgLy8gQCBJTVBPVEFOVCBOT1RFOiBUaGlzIGhhcyBiZWVuIHJlbW92ZWQgYmVjYXVzZSBzZWxlY3RvciBmdW5jdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIGN1cnJlbnQgU0NTU1xuICAvLyBBZGRpbmcgOmRpcigpIGluIGNhc2UgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgIGFuZCBkb2VzIHN1cHBvcnQgYDpkaXIoKWAuXG4gIC8vIGA6aG9zdC1jb250ZXh0KClgIGlzIGFkZGVkOlxuICAvLyAtIHRocm91Z2ggdGhlIGBhZGQtcm9vdC1zZWxlY3RvcigpYCBmdW5jdGlvbi5cbiAgLy8gLSBmaXJzdCBzbyB0aGF0IGl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgOmRpcigpYC5cbiAgLy8gRm9yIGV4YW1wbGUsXG4gIC8vIC0gRmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAsIGJ1dCBkb2VzIHN1cHBvcnQgYDpkaXIoKWAuXG4gIC8vIC0gU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCwgYnV0IFNhZmFyaSAxNi40KyBzdXBwb3J0cyBgOmRpcigpYFxuICAvLyBAbGluayBodHRwczovL3dlYmtpdC5vcmcvYmxvZy8xMzk2Ni93ZWJraXQtZmVhdHVyZXMtaW4tc2FmYXJpLTE2LTQvXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkcm9vdFNwbGl0IHtcbiAgICAkZGlyU2VsZWN0b3I6IFwiI3skc2VsZWN0b3J9OmRpcihydGwpXCI7XG4gICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICAkZGlyU2VsZWN0b3JzOiBhcHBlbmQoJGRpclNlbGVjdG9ycywgJGRpclNlbGVjdG9yLCBjb21tYSk7XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgRmlyZWZveC5cbiAgQGlmIGxlbmd0aCgkZGlyU2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JGRpclNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG4gIC8vfVxufVxuXG5AbWl4aW4gbHRyKCkge1xuICBAY29udGVudDtcbn1cblxuXG4vLyBTVkcgQmFja2dyb3VuZCBJbWFnZSBNaXhpblxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBzdmctYmFja2dyb3VuZC1pbWFnZSgkc3ZnLCAkZmxpcC1ydGw6IGZhbHNlKSB7XG4gICR1cmw6IHVybC1lbmNvZGUoJHN2Zyk7XG4gICR2aWV3Qm94OiBzdHItc3BsaXQoc3RyLWV4dHJhY3QoJHN2ZywgXCJ2aWV3Qm94PSdcIiwgXCInXCIpLCBcIiBcIik7XG5cbiAgQGlmICRmbGlwLXJ0bCAhPSB0cnVlIG9yICR2aWV3Qm94ID09IG51bGwge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JHVybH1cIik7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICAkdHJhbnNmb3JtOiBcInRyYW5zZm9ybT0ndHJhbnNsYXRlKCN7bnRoKCR2aWV3Qm94LCAzKX0sIDApIHNjYWxlKC0xLCAxKSdcIjtcbiAgICAkZmxpcHBlZC11cmw6ICRzdmc7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPHBhdGhcIiwgXCI8cGF0aCAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxsaW5lXCIsIFwiPGxpbmUgI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8cG9seWdvblwiLCBcIjxwb2x5Z29uICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiB1cmwtZW5jb2RlKCRmbGlwcGVkLXVybCk7XG5cbiAgICBAaW5jbHVkZSBsdHIgKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skdXJsfVwiKTtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skZmxpcHBlZC11cmx9XCIpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgcHJvcGVydHkgaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwcm9wZXJ0eS1ob3Jpem9udGFsKCRwcm9wLCAkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaWYgJHN0YXJ0ID09IDAgYW5kICRlbmQgPT0gMCB7XG4gICAgI3skcHJvcH0tbGVmdDogJHN0YXJ0O1xuICAgICN7JHByb3B9LXJpZ2h0OiAkZW5kO1xuXG4gIH0gQGVsc2Uge1xuICAgIC13ZWJraXQtI3skcHJvcH0tc3RhcnQ6ICRzdGFydDtcbiAgICAjeyRwcm9wfS1pbmxpbmUtc3RhcnQ6ICRzdGFydDtcbiAgICAtd2Via2l0LSN7JHByb3B9LWVuZDogJGVuZDtcbiAgICAjeyRwcm9wfS1pbmxpbmUtZW5kOiAkZW5kO1xuICB9XG59XG5cbi8vIEFkZCBwcm9wZXJ0eSBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkcHJvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtib29sZWFufSAkY29udGVudCBpbmNsdWRlIGNvbnRlbnQgb3IgdXNlIGRlZmF1bHRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwcm9wZXJ0eSgkcHJvcCwgJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoJHByb3AsICRzdGFydCwgJGVuZCk7XG4gICN7JHByb3B9LXRvcDogJHRvcDtcbiAgI3skcHJvcH0tYm90dG9tOiAkYm90dG9tO1xufVxuXG4vLyBBZGQgcGFkZGluZyBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKHBhZGRpbmcsICRzdGFydCwgJGVuZCk7XG59XG5cbi8vIEFkZCBwYWRkaW5nIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBhZGRpbmcoJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KHBhZGRpbmcsICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBtYXJnaW4gaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBtYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKG1hcmdpbiwgJHN0YXJ0LCAkZW5kKTtcbn1cblxuLy8gQWRkIG1hcmdpbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBtYXJnaW4oJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KG1hcmdpbiwgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIHBvc2l0aW9uIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnQgLSBhbW91bnQgdG8gcG9zaXRpb24gc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kIC0gYW1vdW50IHRvIGxlZnQ6IDA7IGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBvc2l0aW9uLWhvcml6b250YWwoJHN0YXJ0OiBudWxsLCAkZW5kOiBudWxsKSB7XG4gIEBpZiAkc3RhcnQgPT0gJGVuZCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgbGVmdDogJHN0YXJ0O1xuICAgICAgcmlnaHQ6ICRlbmQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAYXQtcm9vdCB7XG4gICAgICBAc3VwcG9ydHMgKGluc2V0LWlubGluZS1zdGFydDogMCkge1xuICAgICAgICAmIHtcbiAgICAgICAgICBpbnNldC1pbmxpbmUtc3RhcnQ6ICRzdGFydDtcbiAgICAgICAgICBpbnNldC1pbmxpbmUtZW5kOiAkZW5kO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETyBGVy0zNzY2XG4gICAgQGF0LXJvb3Qge1xuICAgICAgQHN1cHBvcnRzIG5vdCAoaW5zZXQtaW5saW5lLXN0YXJ0OiAwKSB7XG4gICAgICAgICYge1xuICAgICAgICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgICAgICAgIGxlZnQ6ICRzdGFydDtcbiAgICAgICAgICAgIHJpZ2h0OiAkZW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICAgICAgICBsZWZ0OiB1bnNldDtcbiAgICAgICAgICAgIHJpZ2h0OiB1bnNldDtcblxuICAgICAgICAgICAgbGVmdDogJGVuZDtcbiAgICAgICAgICAgIHJpZ2h0OiAkc3RhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBwb3NpdGlvbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwb3NpdGlvbigkdG9wOiBudWxsLCAkZW5kOiBudWxsLCAkYm90dG9tOiBudWxsLCAkc3RhcnQ6IG51bGwpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQpO1xuICB0b3A6ICR0b3A7XG4gIGJvdHRvbTogJGJvdHRvbTtcbn1cblxuLy8gQWRkIGJvcmRlciBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBib3JkZXIoJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KGJvcmRlciwgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIGJvcmRlciByYWRpdXMgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcC1zdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3AtZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbS1lbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tLXN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gYm9yZGVyLXJhZGl1cygkdG9wLXN0YXJ0LCAkdG9wLWVuZDogJHRvcC1zdGFydCwgJGJvdHRvbS1lbmQ6ICR0b3Atc3RhcnQsICRib3R0b20tc3RhcnQ6ICR0b3AtZW5kKSB7XG4gIEBpZiAkdG9wLXN0YXJ0ID09ICR0b3AtZW5kIGFuZCAkdG9wLXN0YXJ0ID09ICRib3R0b20tZW5kIGFuZCAkdG9wLXN0YXJ0ID09ICRib3R0b20tc3RhcnQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJvcmRlci1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICR0b3AtZW5kO1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6ICRib3R0b20tZW5kO1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJGJvdHRvbS1zdGFydDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAkdG9wLWVuZDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6ICRib3R0b20tc3RhcnQ7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAkYm90dG9tLWVuZDtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIGRpcmVjdGlvbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZGlyIC0gRGlyZWN0aW9uIG9uIExUUlxuQG1peGluIGRpcmVjdGlvbigkZGlyKSB7XG4gICRvdGhlci1kaXI6IG51bGw7XG5cbiAgQGlmICRkaXIgPT0gbHRyIHtcbiAgICAkb3RoZXItZGlyOiBydGw7XG4gIH0gQGVsc2Uge1xuICAgICRvdGhlci1kaXI6IGx0cjtcbiAgfVxuXG4gIEBpbmNsdWRlIGx0cigpIHtcbiAgICBkaXJlY3Rpb246ICRkaXI7XG4gIH1cbiAgQGluY2x1ZGUgcnRsKCkge1xuICAgIGRpcmVjdGlvbjogJG90aGVyLWRpcjtcbiAgfVxufVxuXG4vLyBBZGQgZmxvYXQgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHNpZGVcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZGVjb3JhdG9yIC0gIWltcG9ydGFudFxuQG1peGluIGZsb2F0KCRzaWRlLCAkZGVjb3JhdG9yOiBudWxsKSB7XG4gIEBpZiAkc2lkZSA9PSBzdGFydCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgZmxvYXQ6IGxlZnQgJGRlY29yYXRvcjtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgZmxvYXQ6IHJpZ2h0ICRkZWNvcmF0b3I7XG4gICAgfVxuICB9IEBlbHNlIGlmICRzaWRlID09IGVuZCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgZmxvYXQ6IHJpZ2h0ICRkZWNvcmF0b3I7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGZsb2F0OiBsZWZ0ICRkZWNvcmF0b3I7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBmbG9hdDogJHNpZGUgJGRlY29yYXRvcjtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGJhY2tncm91bmQtcG9zaXRpb24oJGhvcml6b250YWwsICRob3Jpem9udGFsLWFtb3VudDogbnVsbCwgJHZlcnRpY2FsOiBudWxsLCAkdmVydGljYWwtYW1vdW50OiBudWxsKSB7XG4gIEBpZiAkaG9yaXpvbnRhbCA9PSBzdGFydCBvciAkaG9yaXpvbnRhbCA9PSBlbmQge1xuICAgICRob3Jpem9udGFsLWx0cjogbnVsbDtcbiAgICAkaG9yaXpvbnRhbC1ydGw6IG51bGw7XG4gICAgQGlmICRob3Jpem9udGFsID09IHN0YXJ0IHtcbiAgICAgICRob3Jpem9udGFsLWx0cjogbGVmdDtcbiAgICAgICRob3Jpem9udGFsLXJ0bDogcmlnaHQ7XG4gICAgfSBAZWxzZSB7XG4gICAgICAkaG9yaXpvbnRhbC1sdHI6IHJpZ2h0O1xuICAgICAgJGhvcml6b250YWwtcnRsOiBsZWZ0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsLWx0ciAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsLXJ0bCAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbCAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiB0cmFuc2Zvcm0tb3JpZ2luKCR4LWF4aXMsICR5LWF4aXM6IG51bGwpIHtcbiAgQGlmICR4LWF4aXMgPT0gc3RhcnQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHgtYXhpcyA9PSBlbmQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0ICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHgtYXhpcyA9PSBsZWZ0IG9yICR4LWF4aXMgPT0gcmlnaHQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR4LWF4aXMgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR4LWF4aXMgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2FsYygxMDAlIC0gI3skeC1heGlzfSkgJHktYXhpcztcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRyYW5zZm9ybSBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdHJhbnNmb3JtcyAtIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHRyYW5zZm9ybXNcbkBtaXhpbiB0cmFuc2Zvcm0oJHRyYW5zZm9ybXMuLi4pIHtcbiAgJGV4dHJhOiBudWxsO1xuXG4gICR4OiBudWxsO1xuICAkbHRyLXRyYW5zbGF0ZTogbnVsbDtcbiAgJHJ0bC10cmFuc2xhdGU6IG51bGw7XG5cbiAgQGVhY2ggJHRyYW5zZm9ybSBpbiAkdHJhbnNmb3JtcyB7XG4gICAgQGlmIChzdHItaW5kZXgoJHRyYW5zZm9ybSwgdHJhbnNsYXRlM2QpKSB7XG4gICAgICAkdHJhbnNmb3JtOiBzdHItcmVwbGFjZSgkdHJhbnNmb3JtLCAndHJhbnNsYXRlM2QoJyk7XG4gICAgICAkdHJhbnNmb3JtOiBzdHItcmVwbGFjZSgkdHJhbnNmb3JtLCAnKScpO1xuXG4gICAgICAkY29vcmRpbmF0ZXM6IHN0ci1zcGxpdCgkdHJhbnNmb3JtLCAnLCcpO1xuXG4gICAgICAkeDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICAgICAkeTogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICAgICAkejogbnRoKCRjb29yZGluYXRlcywgMyk7XG5cbiAgICAgICRsdHItdHJhbnNsYXRlOiB0cmFuc2xhdGUzZCgkeCwgJHksICR6KTtcbiAgICAgICRydGwtdHJhbnNsYXRlOiB0cmFuc2xhdGUzZChjYWxjKC0xICogI3skeH0pLCAkeSwgJHopO1xuICAgIH0gQGVsc2Uge1xuICAgICAgQGlmICRleHRyYSA9PSBudWxsIHtcbiAgICAgICAgJGV4dHJhOiAkdHJhbnNmb3JtO1xuICAgICAgfSBAZWxzZSB7XG4gICAgICAgICRleHRyYTogJGV4dHJhICR0cmFuc2Zvcm07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgQGlmICR4ID09ICcwJyBvciAkeCA9PSBudWxsIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRsdHItdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybTogJGx0ci10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybTogJHJ0bC10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBtaXhpbnMgZm9yIFNDU1MgZnJvbSBkaWZmZXJlbnQgY29tcG9uZW50c1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy9jb21wb25lbnRzL2dyaWQvZ3JpZC5taXhpbnMuc2Nzc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL2NvbXBvbmVudHMvaXRlbS9pdGVtLm1peGlucy5zY3NzXG4gKi9cblxuLy8gUmVzcG9uc2l2ZSBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8gQ3JlYXRlcyBhIGZpeGVkIHdpZHRoIGZvciB0aGUgZ3JpZCBiYXNlZCBvbiB0aGUgc2NyZWVuIHNpemVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbWFrZS1ncmlkLXdpZHRocygkd2lkdGhzOiAkZ3JpZC13aWR0aHMsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICBAZWFjaCAkYnJlYWtwb2ludCwgJHdpZHRoIGluICR3aWR0aHMge1xuICAgIEBpbmNsdWRlIG1lZGlhLWJyZWFrcG9pbnQtdXAoJGJyZWFrcG9pbnQsICRicmVha3BvaW50cykge1xuICAgICAgd2lkdGg6ICR3aWR0aDtcbiAgICB9XG4gIH1cblxuICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cblxuLy8gQWRkcyBwYWRkaW5nIHRvIHRoZSBlbGVtZW50IGJhc2VkIG9uIGJyZWFrcG9pbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG1ha2UtYnJlYWtwb2ludC1wYWRkaW5nKCRwYWRkaW5ncykge1xuICBAZWFjaCAkYnJlYWtwb2ludCBpbiBtYXAta2V5cygkcGFkZGluZ3MpIHtcbiAgICBAaW5jbHVkZSBtZWRpYS1icmVha3BvaW50LXVwKCRicmVha3BvaW50KSB7XG4gICAgICAkcGFkZGluZzogbWFwLWdldCgkcGFkZGluZ3MsICRicmVha3BvaW50KTtcblxuICAgICAgQGluY2x1ZGUgcGFkZGluZygkcGFkZGluZyk7XG4gICAgfVxuICB9XG59XG5cblxuLy8gSXRlbSBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBpdGVtLXB1c2gtc3ZnLXVybCgkZmlsbCkge1xuICAkaXRlbS1kZXRhaWwtcHVzaC1zdmc6IFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMiAyMCc+PHBhdGggZD0nTTIsMjBsLTItMmw4LThMMCwybDItMmwxMCwxMEwyLDIweicgZmlsbD0nI3skZmlsbH0nLz48L3N2Zz5cIjtcblxuICBAaW5jbHVkZSBzdmctYmFja2dyb3VuZC1pbWFnZSgkaXRlbS1kZXRhaWwtcHVzaC1zdmcsIHRydWUpO1xufVxuIiwiQHVzZSBcInNhc3M6bWF0aFwiIGFzIG1hdGg7XG5cbi8qKlxuICogQXBwIGN1c3RvbSBtaXhpbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgb3VyIGN1c3RvbSBtaXhpbnMuXG4gKi9cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIGJsYWNrIHRvIGNyZWF0ZSBpdHMgc2hhZGUuXG4vLyBEZWZhdWx0IHRvIGJvb3RzdHJhcCBsZXZlbCA2LlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3Itc2hhZGUtcGVyY2VudCgkY29sb3IsICRwZXJjZW50OiA0OCUpIHtcbiAgICBAcmV0dXJuIG1peCgjMDAwLCAkY29sb3IsICRwZXJjZW50KTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIHdoaXRlIHRvIGNyZWF0ZSBpdHMgdGludC5cbi8vIERlZmF1bHQgdG8gYm9vdHN0cmFwIGxldmVsIC0xMC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXRpbnQtcGVyY2VudCgkY29sb3IsICRwZXJjZW50OiA4MCUpIHtcbiAgICBAcmV0dXJuIG1peCgjZmZmLCAkY29sb3IsICRwZXJjZW50KTtcbn1cblxuLy8gSW9uaWMgQ29sb3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gR2VuZXJhdGVzIHRoZSBjb2xvciBjbGFzc2VzIGFuZCB2YXJpYWJsZXMgYmFzZWQgb24gdGhlXG4vLyBjb2xvcnMgbWFwXG5cbkBtaXhpbiBnZW5lcmF0ZS1jb2xvcigkY29sb3ItbmFtZSwgJGNvbG9ycywgJHRoZW1lKSB7XG4gICAgJGNvbG9yLXRoZW1lczogbWFwLWdldCgkY29sb3JzLCAkY29sb3ItbmFtZSk7XG4gICAgJGJhc2U6IG1hcC1nZXQoJGNvbG9yLXRoZW1lcywgJHRoZW1lKTtcblxuICAgIEBpZiAkdGhlbWUgPT0gJ2RhcmsnIHtcbiAgICAgICAgJGJhc2U6IG1peChtYXAtZ2V0KCRjb2xvci10aGVtZXMsICdsaWdodCcpLCB3aGl0ZSwgODAlKSAhZGVmYXVsdDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBnZW5lcmF0ZS1jb2xvci12YXJpYW50cygkY29sb3ItbmFtZSwgJGJhc2UpO1xufVxuXG5AbWl4aW4gZ2VuZXJhdGUtY29sb3ItdmFyaWFudHMoJGNvbG9yLW5hbWUsICRiYXNlKSB7XG4gICAgJGNvbnRyYXN0OiBnZXRfY29udHJhc3RfY29sb3IoJGJhc2UpO1xuICAgICRzaGFkZTogZ2V0LWNvbG9yLXNoYWRlLXBlcmNlbnQoJGJhc2UpO1xuICAgICR0aW50OiBnZXQtY29sb3ItdGludC1wZXJjZW50KCRiYXNlKTtcblxuICAgIC0tI3skY29sb3ItbmFtZX06ICN7JGJhc2V9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tc2hhZGU6ICN7JHNoYWRlfTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LXRpbnQ6ICN7JHRpbnR9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tY29udHJhc3Q6ICN7JGNvbnRyYXN0fTtcblxuICAgIC8vIEludGVybmFsIGlvbmljIHVzZSBvbmx5LlxuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9OiB2YXIoLS0jeyRjb2xvci1uYW1lfSk7XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tYmFzZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1yZ2I6ICN7Y29sb3ItdG8tcmdiLWxpc3QoJGJhc2UpfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdDogI3skY29udHJhc3R9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0LXJnYjogI3tjb2xvci10by1yZ2ItbGlzdCgkY29udHJhc3QpfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1zaGFkZTogI3skc2hhZGV9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXRpbnQ6ICN7JHRpbnR9O1xuXG4gICAgLmlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSB7XG4gICAgICAgIC0taW9uLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0pO1xuICAgICAgICAtLWlvbi1jb2xvci1iYXNlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tYmFzZSk7XG4gICAgICAgIC0taW9uLWNvbG9yLXJnYjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXJnYik7XG4gICAgICAgIC0taW9uLWNvbG9yLWNvbnRyYXN0OiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QpO1xuICAgICAgICAtLWlvbi1jb2xvci1jb250cmFzdC1yZ2I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdC1yZ2IpO1xuICAgICAgICAtLWlvbi1jb2xvci1zaGFkZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXNoYWRlKTtcbiAgICAgICAgLS1pb24tY29sb3ItdGludDogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXRpbnQpO1xuICAgIH1cbn1cblxuQG1peGluIGNvcmUtZm9jdXMoKSB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgJjo6YWZ0ZXIge1xuICAgICAgICBAaW5jbHVkZSBwb3NpdGlvbigwLCAwLCAwLCAwKTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBAaW5jbHVkZSBjb3JlLWZvY3VzLXN0eWxlKCk7XG4gICAgfVxufVxuXG5AbWl4aW4gY29yZS1mb2N1cy1zdHlsZSgpIHtcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgdmFyKC0tYTExeS1mb2N1cy13aWR0aCkgMXB4IHZhcigtLWExMXktZm9jdXMtY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xuICAgIC8vIFRoaWNrZXIgb3B0aW9uOlxuICAgIC8vIGJvcmRlcjogdmFyKC0tYTExeS1mb2N1cy13aWR0aCkgc29saWQgdmFyKC0tYTExeS1mb2N1cy1jb2xvcik7XG59XG5cbkBtaXhpbiBjb3JlLXRyYW5zaXRpb24oJHByb3BlcnRpZXM6IGFsbCwgJGR1cmF0aW9uOiA1MDBtcywgJHRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQpIHtcbiAgICAkdHJhbnNpdGlvbnM6ICgpO1xuICAgIEBlYWNoICRwcm9wZXJ0eSBpbiAkcHJvcGVydGllcyB7XG4gICAgICAkdHJhbnNpdGlvbnM6IGFwcGVuZCgkdHJhbnNpdGlvbnMsICRwcm9wZXJ0eSAkZHVyYXRpb24gJHRpbWluZy1mdW5jdGlvbiwgY29tbWEpO1xuICAgIH1cblxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogJHRyYW5zaXRpb25zO1xuICAgIHRyYW5zaXRpb246ICR0cmFuc2l0aW9ucztcbn1cblxuQG1peGluIHNyLW9ubHkoKSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiAxcHg7XG4gICAgaGVpZ2h0OiAxcHg7XG4gICAgcGFkZGluZzogMDtcbiAgICBtYXJnaW46IC0xcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBjbGlwOiByZWN0KDAsIDAsIDAsIDApO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgYm9yZGVyOiAwO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgaXRlbS1wdXNoLXN2Zy11cmwgYnV0IGFkbWl0cyBmbGlwLXJ0bFxuICovXG5AbWl4aW4gcHVzaC1hcnJvdy1jb2xvcigkZmlsbDogNjI2MjYyLCAkZmxpcC1ydGw6IGZhbHNlKSB7XG4gICAgJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnOiBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMjAnPjxwYXRoIGQ9J00yLDIwbC0yLTJsOC04TDAsMmwyLTJsMTAsMTBMMiwyMHonIGZpbGw9JyN7JGZpbGx9Jy8+PC9zdmc+XCI7XG5cbiAgICBAaW5jbHVkZSBzdmctYmFja2dyb3VuZC1pbWFnZSgkaXRlbS1kZXRhaWwtcHVzaC1zdmcsICRmbGlwLXJ0bCk7XG59XG5cbkBtaXhpbiBib3JkZXItc3RhcnQoJHB4LCAkdHlwZTogbnVsbCwgJGNvbG9yOiBudWxsKSB7XG4gICAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChib3JkZXIsICRweCAkdHlwZSAkY29sb3IsIG51bGwpO1xufVxuXG5AbWl4aW4gYm9yZGVyLWVuZCgkcHgsICR0eXBlOiBudWxsLCAkY29sb3I6IG51bGwpIHtcbiAgICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKGJvcmRlciwgbnVsbCwgJHB4ICR0eXBlICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtYm9yZGVyLXN0YXJ0KCRweCwgJHR5cGUsICRjb2xvcikge1xuICAgICRzYWZlLWFyZWEtcG9zaXRpb246IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHB4fSk7XG5cbiAgICBAaW5jbHVkZSBib3JkZXItc3RhcnQoJHNhZmUtYXJlYS1wb3NpdGlvbiwgJHR5cGUsICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtYm9yZGVyLWVuZCgkcHgsICR0eXBlLCAkY29sb3IpIHtcbiAgICAkc2FmZS1hcmVhLXBvc2l0aW9uOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skcHh9KTtcblxuICAgIEBpbmNsdWRlIGJvcmRlci1lbmQoJHNhZmUtYXJlYS1wb3NpdGlvbiwgJHR5cGUsICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogbnVsbDtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBudWxsO1xuXG4gICAgQGlmICgkZW5kKSB7XG4gICAgICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG4gICAgfVxuICAgIEBpZiAoJHN0YXJ0KSB7XG4gICAgICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1zdGFydCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJGVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLWVuZCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IG51bGw7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogbnVsbDtcblxuICAgIEBpZiAoJGVuZCkge1xuICAgICAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuICAgIH1cbiAgICBAaWYgKCRzdGFydCkge1xuICAgICAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1zdGFydCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRlbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctZW5kKCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcG9zaXRpb24oJHRvcDogbnVsbCwgJGVuZDogbnVsbCwgJGJvdHRvbTogbnVsbCwgJHN0YXJ0OiBudWxsKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgcG9zaXRpb24oJHRvcCwgJHNhZmUtYXJlYS1lbmQsICRib3R0b20sICRzYWZlLWFyZWEtc3RhcnQpO1xufVxuXG5AbWl4aW4gY29yZS1oZWFkaW5ncygpIHtcbiAgICBoMSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjZweDtcbiAgICB9XG4gICAgaDIsIC5pdGVtLWhlYWRpbmcge1xuICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgfVxuICAgIGgzIHtcbiAgICAgICAgZm9udC1zaXplOiAyMnB4O1xuICAgIH1cbiAgICBoNCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICB9XG4gICAgaDUge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxuICAgIGg2IHtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgIH1cbn1cblxuQG1peGluIGRhcmttb2RlKCkge1xuICAgICRyb290OiAjeyZ9O1xuXG4gICAgQGF0LXJvb3QgI3thZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgXCJodG1sLmRhcmtcIil9IHtcbiAgICAgICAgQGNvbnRlbnQ7XG4gICAgfVxufVxuXG5AbWl4aW4gaG9yaXpvbnRhbF9zY3JvbGxfaXRlbSgkd2lkdGgsICRtaW4td2lkdGgsICRtYXgtd2lkdGgpIHtcbiAgICBmbGV4OiAwIDAgJHdpZHRoO1xuICAgIG1pbi13aWR0aDogJG1pbi13aWR0aDtcbiAgICBtYXgtd2lkdGg6ICRtYXgtd2lkdGg7XG4gICAgYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgICBkaXNwbGF5OiBibG9jaztcblxuICAgIGlvbi1jYXJkIHtcbiAgICAgICAgLS12ZXJ0aWNhbC1tYXJnaW46IDEwcHg7XG4gICAgICAgIC0taG9yaXpvbnRhbC1tYXJnaW46IDEwcHg7XG5cbiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIHZhcigtLWhvcml6b250YWwtbWFyZ2luKSAtIHZhcigtLWhvcml6b250YWwtbWFyZ2luKSk7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0tdmVydGljYWwtbWFyZ2luKSAtIHZhcigtLXZlcnRpY2FsLW1hcmdpbikpO1xuICAgICAgICBtYXJnaW46IHZhcigtLXZlcnRpY2FsLW1hcmdpbikgdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pO1xuXG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiAzNjBweCkge1xuICAgICAgICAgICAgLS1ob3Jpem9udGFsLW1hcmdpbjogNnB4O1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBDb2xvciBtaXhpbnMuXG5AZnVuY3Rpb24gZ2V0X2JyaWdodG5lc3MoJGNvbG9yKSB7XG4gICAgQHJldHVybiBtYXRoLmRpdihyZWQoJGNvbG9yKSArIGdyZWVuKCRjb2xvcikgKyBibHVlKCRjb2xvciksIDMpO1xufVxuXG4vLyBHZXQgdGhlIGJldHRlciBjb2xvciBjb250cmFzdCB1c2luZyBXQ0FHIGFsZ29yeXRobS5cbkBmdW5jdGlvbiBnZXRfY29udHJhc3RfY29sb3IoJGNvbG9yKSB7XG4gICAgJGx1bWlhbmNlOiBsdW1pbmFuY2UoJGNvbG9yKTtcblxuICAgIC8vIFdoaXRlIGx1bWlhbmNlIGlzIDEuXG4gICAgJHdoaXRlQ29udHJhc3Q6IG1hdGguZGl2KCRsdW1pYW5jZSArIDAuMDUsIDEgKyAwLjA1KTtcbiAgICAvLyBXaGl0ZSBsdW1pYW5jZSBpcyAwLlxuICAgICRibGFja0NvbnRyYXN0OiBtYXRoLmRpdigwLjA1LCAkbHVtaWFuY2UgKyAwLjA1KTtcblxuICAgIEByZXR1cm4gaWYoJHdoaXRlQ29udHJhc3QgPCAkYmxhY2tDb250cmFzdCwgd2hpdGUsIGJsYWNrKTtcbn1cblxuLy8gQ29sb3IgY29udHJhc3QgdXNpbmcgeWlxIGFwcm94aW1hdGlvbiB3aXRoIDE1MCB0aHJlc2hvbGQuXG5AZnVuY3Rpb24gZ2V0X2NvbnRyYXN0X2NvbG9yX3lpcSgkY29sb3IsICRkYXJrOiBibGFjaywgJGxpZ2h0OiB3aGl0ZSkge1xuICAgICRyOiByZWQoJGNvbG9yKTtcbiAgICAkZzogZ3JlZW4oJGNvbG9yKTtcbiAgICAkYjogYmx1ZSgkY29sb3IpO1xuXG4gICAgJHlpcTogbWF0aC5kaXYoKCRyICogMjk5KSArICgkZyAqIDU4NykgKyAoJGIgKiAxMTQpLCAxMDAwKTtcblxuICAgIEByZXR1cm4gaWYoJHlpcSA+PSAxMjgsICRkYXJrLCAkbGlnaHQpO1xufVxuXG4vLyBXQ0FHIGNvbnRyYXN0IGFsZ29yaXRobVxuQGZ1bmN0aW9uIGNoZWNrLWNvbnRyYXN0KCRmb3JlZ3JvdW5kLCAkYmFja2dyb3VuZCkge1xuICAgICRmb3JlZ3JvdW5kTHVtaWFuY2U6IGx1bWluYW5jZSgkZm9yZWdyb3VuZCk7XG4gICAgJGJhY2tncm91bmRMdW1pbmFuY2U6IGx1bWluYW5jZSgkYmFja2dyb3VuZCk7XG5cbiAgICBAaWYgKCRiYWNrZ3JvdW5kTHVtaW5hbmNlIDwgJGZvcmVncm91bmRMdW1pYW5jZSkge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCRiYWNrZ3JvdW5kTHVtaW5hbmNlICsgMC4wNSwgJGZvcmVncm91bmRMdW1pYW5jZSArIDAuMDUpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCRmb3JlZ3JvdW5kTHVtaWFuY2UgKyAwLjA1LCAkYmFja2dyb3VuZEx1bWluYW5jZSArIDAuMDUpO1xuICAgIH1cbn1cblxuQGZ1bmN0aW9uIGx1bWluYW5jZSgkY29sb3IpIHtcbiAgICAkcjogcmVkKCRjb2xvcik7XG4gICAgJGc6IGdyZWVuKCRjb2xvcik7XG4gICAgJGI6IGJsdWUoJGNvbG9yKTtcblxuICAgICRyOiBjb21wb25lbnQtbHVtaW5hbmNlKCRyKTtcbiAgICAkZzogY29tcG9uZW50LWx1bWluYW5jZSgkZyk7XG4gICAgJGI6IGNvbXBvbmVudC1sdW1pbmFuY2UoJGIpO1xuXG4gICAgQHJldHVybiAkciAqIDAuMjEyNiArICRnICogMC43MTUyICsgJGIgKiAwLjA3MjI7XG59XG5cbkBmdW5jdGlvbiBjb21wb25lbnQtbHVtaW5hbmNlKCR2YWx1ZSkge1xuICAgICR2YWx1ZTogbWF0aC5kaXYoJHZhbHVlLCAyNTUpO1xuXG4gICAgQGlmICgkdmFsdWUgPD0gMC4wMzkyOCkge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCR2YWx1ZSwgMTIuOTIpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgICBAcmV0dXJuIG1hdGgucG93KG1hdGguZGl2KCR2YWx1ZSArIDAuMDU1LCAxLjA1NSksIDIuNCk7XG4gICAgfVxufVxuIiwiLypcbiAqIEFwcCBDdXN0b20gQXBwIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIGFsbCBjdXN0b20gYXBwIHZhcmlhYmxlcy5cbiAqL1xuIiwiLypcbiAqIEFwcCBHbG9iYWwgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgYWxsIGdsb2JhbCB2YXJpYWJsZXMuXG4gKi9cblxuJHdoaXRlOiAgICAgICAjZmZmZmZmICFkZWZhdWx0O1xuJGdyYXktMTAwOiAgICAjZjhmOWZhICFkZWZhdWx0O1xuJGdyYXktMjAwOiAgICAjZTllY2VmICFkZWZhdWx0O1xuJGdyYXktMzAwOiAgICAjZGVlMmU2ICFkZWZhdWx0OyAvLyBTdHJva2VcbiRncmF5LTQwMDogICAgI2NlZDRkYSAhZGVmYXVsdDtcbiRncmF5LTUwMDogICAgIzhmOTU5ZSAhZGVmYXVsdDsgLy8gU3Ryb2tlIG9uIGlucHV0c1xuJGdyYXktNjAwOiAgICAjNmE3MzdiICFkZWZhdWx0O1xuJGdyYXktNzAwOiAgICAjNDk1MDU3ICFkZWZhdWx0O1xuJGdyYXktODAwOiAgICAjMzQzYTQwICFkZWZhdWx0O1xuJGdyYXktOTAwOiAgICAjMjgyODI4ICFkZWZhdWx0OyAvLyBDb3B5IHRleHRcbiRibGFjazogICAgICAgIzAwMDAwMCAhZGVmYXVsdDsgLy8gQXZvaWQgdXNhZ2VcblxuJGJsdWU6ICAgICAgICAjMGY2Y2JmICFkZWZhdWx0O1xuJGN5YW46ICAgICAgICAjMDA4MTk2ICFkZWZhdWx0OyAvLyBOb3QgdXNlZC5cbiRncmVlbjogICAgICAgIzM1N2EzMiAhZGVmYXVsdDtcbiRyZWQ6ICAgICAgICAgI2NhMzEyMCAhZGVmYXVsdDtcbiR5ZWxsb3c6ICAgICAgI2YwYWQ0ZSAhZGVmYXVsdDtcblxuJGJyYW5kLWNvbG9yOiAjZjk4MDEyICFkZWZhdWx0O1xuXG4kdGV4dC1jb2xvcjogICAgICAgICAgICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1yZ2I6ICAgICAgICAgICBjb2xvci10by1yZ2ItbGlzdCgkdGV4dC1jb2xvcikgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1kYXJrOiAgICAgICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1kYXJrLXJnYjogICAgICBjb2xvci10by1yZ2ItbGlzdCgkdGV4dC1jb2xvci1kYXJrKSAhZGVmYXVsdDtcblxuJGJhY2tncm91bmQtY29sb3I6ICAgICAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiRiYWNrZ3JvdW5kLWNvbG9yLXJnYjogICAgICBjb2xvci10by1yZ2ItbGlzdCgkYmFja2dyb3VuZC1jb2xvcikgIWRlZmF1bHQ7XG4kYmFja2dyb3VuZC1jb2xvci1kYXJrOiAgICAgJGdyYXktOTAwICFkZWZhdWx0OyAvLyAjMWExYTFhXG4kYmFja2dyb3VuZC1jb2xvci1kYXJrLXJnYjogY29sb3ItdG8tcmdiLWxpc3QoJGJhY2tncm91bmQtY29sb3ItZGFyaykgIWRlZmF1bHQ7XG5cbiRpb24taXRlbS1iYWNrZ3JvdW5kOiAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLXJnYjogIGNvbG9yLXRvLXJnYi1saXN0KCRpb24taXRlbS1iYWNrZ3JvdW5kKSAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcms6ICRncmF5LTkwMCAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcmstcmdiOiBjb2xvci10by1yZ2ItbGlzdCgkaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrKSAhZGVmYXVsdDtcblxuJHByaW1hcnk6ICAgICRicmFuZC1jb2xvciAhZGVmYXVsdDtcbiRzZWNvbmRhcnk6ICAkZ3JheS0zMDAgIWRlZmF1bHQ7XG4kZGFuZ2VyOiAgICAgJHJlZCAhZGVmYXVsdDtcbiR3YXJuaW5nOiAgICAkeWVsbG93ICFkZWZhdWx0O1xuJHN1Y2Nlc3M6ICAgICRncmVlbiAhZGVmYXVsdDtcbiRpbmZvOiAgICAgICAkYmx1ZSAhZGVmYXVsdDtcbiRsaWdodDogICAgICAkZ3JheS0xMDAgIWRlZmF1bHQ7XG4kbWVkaXVtOiAgICAgJGdyYXktNzAwICFkZWZhdWx0O1xuJGRhcms6ICAgICAgICRncmF5LTkwMCAhZGVmYXVsdDtcblxuJGNvbG9yczogIChcbiAgICBwcmltYXJ5OiAobGlnaHQ6ICRwcmltYXJ5LCBkYXJrOiAkcHJpbWFyeSksXG4gICAgc2Vjb25kYXJ5OiAobGlnaHQ6ICRzZWNvbmRhcnksIGRhcms6ICRncmF5LTcwMCksXG4gICAgc3VjY2VzczogKGxpZ2h0OiAkc3VjY2VzcyksXG4gICAgd2FybmluZzogKGxpZ2h0OiAkd2FybmluZyksXG4gICAgZGFuZ2VyOiAgKGxpZ2h0OiAkZGFuZ2VyKSxcbiAgICBpbmZvOiAobGlnaHQ6ICRpbmZvKSxcbiAgICBsaWdodDogKGxpZ2h0OiAkbGlnaHQsIGRhcms6ICRkYXJrKSxcbiAgICBtZWRpdW06IChsaWdodDogJG1lZGl1bSwgZGFyazogJGdyYXktMjAwKSxcbiAgICBkYXJrOiAobGlnaHQ6ICRkYXJrLCBkYXJrOiAkbGlnaHQpLFxuKSAhZGVmYXVsdDtcblxuLyoqXG4gKiBMYXlvdXQgQnJlYWtwb2ludHNcbiAqXG4gKiBodHRwczovL2lvbmljZnJhbWV3b3JrLmNvbS9kb2NzL2xheW91dC9ncmlkI2RlZmF1bHQtYnJlYWtwb2ludHNcbiAqL1xuXG4vLyBUaGUgbWluaW11bSBkaW1lbnNpb25zIGF0IHdoaWNoIHlvdXIgbGF5b3V0IHdpbGwgY2hhbmdlLFxuLy8gYWRhcHRpbmcgdG8gZGlmZmVyZW50IHNjcmVlbiBzaXplcywgZm9yIHVzZSBpbiBtZWRpYSBxdWVyaWVzXG4kc2NyZWVuLWJyZWFrcG9pbnRzOiAoXG4gICAgeHM6IDBweCxcbiAgICBzbTogNTc2cHgsXG4gICAgbWQ6IDc2OHB4LFxuICAgIGxnOiA5OTJweCxcbiAgICB0YWJsZXQ6IDk5MnB4LFxuICAgIHhsOiAxMjAwcHhcbikgIWRlZmF1bHQ7XG5cbiRjb3JlLWNvdXJzZS1pbWFnZS1iYWNrZ3JvdW5kOiAjODFlY2VjLCAjNzRiOWZmLCAjYTI5YmZlLCAjZGZlNmU5LCAjMDBiODk0LCAjMDk4NGUzLCAjYjJiZWMzLCAjZmRjYjZlLCAjZmQ3OWE4LCAjNmM1Y2U3ICFkZWZhdWx0O1xuJGNvcmUtZGQtcXVlc3Rpb24tY29sb3JzOiAjRkZGRkZGLCAjQjBDNERFLCAjRENEQ0RDLCAjRDhCRkQ4LCAjODdDRUZBLCAjREFBNTIwLCAjRkZENzAwLCAjRjBFNjhDICFkZWZhdWx0O1xuJGNvcmUtdGV4dC1oaWdodGxpZ2h0LWJhY2tncm91bmQtY29sb3I6IGxpZ2h0ZW4oJGJsdWUsIDQwJSkgIWRlZmF1bHQ7XG5cbiRjb3JlLWZpeGVkLXVybDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1kYXNoYm9hcmQtbG9nbzogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1hbHdheXMtc2hvdy1tYWluLW1lbnU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtZm9ybWF0LXRleHQtbmV2ZXItc2hvcnRlbjogZmFsc2UgIWRlZmF1bHQ7XG5cbiRjb3JlLWhpZGUtY291cnNlaW1hZ2Utb24tY291cnNlOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWhpZGUtcHJvZ3Jlc3Mtb24tY291cnNlOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWhpZGUtcHJvZ3Jlc3Mtb24tc2VjdGlvbi1zZWxlY3RvcjogZmFsc2UgIWRlZmF1bHQ7XG5cbiRjb3JlLWNvdXJzZS1oaWRlLXRodW1iLW9uLWNhcmRzOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWNvdXJzZS10aHVtYi1vbi1jYXJkcy1iYWNrZ3JvdW5kOiBudWxsICFkZWZhdWx0O1xuJGNvcmUtY291cnNlLWhpZGUtcHJvZ3Jlc3Mtb24tY2FyZHM6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGxvZ2luIHBhZ2UuXG4kY29yZS1sb2dpbi1idXR0b24tb3V0bGluZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1idXR0b24tb3V0bGluZS1kYXJrOiAkY29yZS1sb2dpbi1idXR0b24tb3V0bGluZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3I6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tbG9hZGluZy1jb2xvci1kYXJrOiAkdGV4dC1jb2xvci1kYXJrICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1mb3Jnb3QtcGFzc3dvcmQ6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1uZWVkLWhlbHA6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1xcmNvZGU6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIG1vcmUgcGFnZS4gKGRlcHJlY2F0ZWQgb24gNC4wKVxuJGNvcmUtbW9yZS1oaWRlLXNpdGVpbmZvOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLW1vcmUtaGlkZS1zaXRlbmFtZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1tb3JlLWhpZGUtc2l0ZXVybDogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdXNlciBwYWdlLlxuJGNvcmUtdXNlci1oaWRlLXNpdGVpbmZvOiAkY29yZS1tb3JlLWhpZGUtc2l0ZWluZm8gIWRlZmF1bHQ7XG4kY29yZS11c2VyLWhpZGUtc2l0ZW5hbWU6ICRjb3JlLW1vcmUtaGlkZS1zaXRlbmFtZSAhZGVmYXVsdDtcbiRjb3JlLXVzZXItaGlkZS1zaXRldXJsOiAkY29yZS1tb3JlLWhpZGUtc2l0ZXVybCAhZGVmYXVsdDtcblxuLy8gQWN0aXZpdHkgaWNvbiBiYWNrZ3JvdW5kIGNvbG9ycy5cbiRhY3Rpdml0eS1pY29uLWNvbG9yczogKFxuICAgIGFkbWluaXN0cmF0aW9uOiAjNWQ2M2Y2LFxuICAgIGFzc2Vzc21lbnQ6ICNlYjY2YTIsXG4gICAgY29sbGFib3JhdGlvbjogI2Y3NjM0ZCxcbiAgICBjb21tdW5pY2F0aW9uOiAjMTFhNjc2LFxuICAgIGNvbnRlbnQ6ICMzOTliZTIsXG4gICAgaW50ZXJmYWNlOiAjYTM3OGZmXG4pICFkZWZhdWx0O1xuXG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY2F0ZWdvcnk6ICM4ZTI0YWEgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY291cnNlOiAkcmVkICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWdyb3VwOiAkeWVsbG93ICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXVzZXI6ICRibHVlICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXNpdGU6ICRncmVlbiAhZGVmYXVsdDtcblxuLy8gQ2FsZW5kYXIgZXZlbnQgY2F0ZWdvcnkgYmFja2dyb3VuZCBjb2xvcnMuXG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY29sb3JzOiAoXG4gICAgY2F0ZWdvcnk6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jYXRlZ29yeSxcbiAgICBjb3Vyc2U6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb3Vyc2UsXG4gICAgZ3JvdXA6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1ncm91cCxcbiAgICB1c2VyOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktdXNlcixcbiAgICBzaXRlOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktc2l0ZSxcbikgIWRlZmF1bHQ7XG4iLCJAdXNlIFwidGhlbWUvZ2xvYmFsc1wiIGFzICo7XG5cbmlvbi1pdGVtIGlvbi1pY29uIHtcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tcmFkaXVzLXhzKTtcbiAgICBwYWRkaW5nOiA0cHg7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tZ3JheS0xMDApO1xuICAgIGNvbG9yOiB2YXIoLS1ncmF5LTkwMCk7XG4gICAgbGluZS1oZWlnaHQ6IHZhcigtLXNpemUpO1xuICAgIC0tbWFyZ2luLWVuZDogOHB4O1xuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKG51bGwsIHZhcigtLW1hcmdpbi1lbmQpKTtcbn1cblxuY29yZS1zcGFjZXIge1xuICAgIC0tc3BhY2VyLWhvcml6b250YWw6IDEwcHg7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["CoreCourse","CoreDomUtils","CoreSites","CoreSiteHome","CoreCourses","CoreEvents","CoreCourseHelper","CoreCourseModuleDelegate","CoreCourseModulePrefetchDelegate","CoreNavigator","CoreBlockHelper","CoreUtils","CoreTime","CoreAnalytics","CoreAnalyticsEventType","CoreBlockSideBlocksComponent","i0","ɵɵelementStart","ɵɵlistener","CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener","ɵɵrestoreView","_r16","ctx_r15","ɵɵnextContext","ɵɵresetView","openSearch","ɵɵelement","ɵɵelementEnd","ɵɵattribute","ɵɵpipeBind1","ɵɵadvance","ɵɵproperty","ctx_r17","section","summary","siteHomeId","module_r19","ctx_r18","ɵɵelementContainerStart","ɵɵtemplate","CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template","CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template","ɵɵelementContainerEnd","ctx_r1","modules","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template","_r5","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template","_r9","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template","_r13","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template","_r11","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template","_r7","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template","item_r22","CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template","CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template","ctx_r2","hasContent","items","ctx_r3","CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener","_r39","ctx_r38","openAvailableCourses","ɵɵtext","ɵɵtextInterpolate","ctx_r40","newsForumModule","CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template","ctx_r8","CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener","_r42","ctx_r41","openCourseCategories","CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener","_r44","ctx_r43","openMyCourses","CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener","_r46","ctx_r45","CoreSiteHomeIndexPage","constructor","route","_this","dataLoaded","hasBlocks","searchEnabled","updateSiteObserver","on","SITE_UPDATED","isSearchCoursesDisabledInSite","getCurrentSiteId","logView","once","_asyncToGenerator","_this$currentSite$get","_this$currentSite$get2","ignoreErrors","logEvent","type","VIEW_ITEM","ws","name","currentSite","getInfo","sitename","data","id","category","url","ngOnInit","getRequiredCurrentSite","getCurrentSiteHomeId","module","getRouteParam","modNavOptions","openModule","loadContent","finally","openFocusedInstance","queryParams","subscribe","_this2","config","getStoredConfig","numsections","frontpageloggedin","undefined","getFrontPageItems","length","includes","forum","getNewsForum","getModule","cmid","course","handlerData","getModuleDataFor","modname","_unused","sections","getSections","find","result","addHandlerDataForModules","error","showErrorModalDefault","hasCourseBlocks","doRefresh","refresher","_this3","promises","push","invalidateSections","invalidateConfig","then","getConfig","setConfig","invalidateCourseBlocks","invalidateModules","Promise","all","complete","navigateToSitePath","params","mode","ngOnDestroy","off","blockInstanceId","getRouteNumberParam","openSideModal","component","componentProps","contextLevel","instanceId","initialBlockInstanceId","ɵɵdirectiveInject","i1","ActivatedRoute","selectors","decls","vars","consts","template","CoreSiteHomeIndexPage_Template","rf","ctx","CoreSiteHomeIndexPage_ion_button_1_Template","CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener","$event","target","CoreSiteHomeIndexPage_ng_container_8_Template","CoreSiteHomeIndexPage_ng_container_9_Template","CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template","CoreSiteHomeIndexPage_core_empty_box_11_Template","CoreSiteHomeIndexPage_ng_template_12_Template","ɵɵtemplateRefExtractor","CoreSiteHomeIndexPage_ng_template_14_Template","CoreSiteHomeIndexPage_ng_template_16_Template","CoreSiteHomeIndexPage_ng_template_18_Template","CoreSiteHomeIndexPage_ng_template_20_Template","ɵɵpropertyInterpolate"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/sitehome/pages/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/sitehome/pages/index/index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\n\nimport { CoreSite, CoreSiteConfig } from '@classes/sites/site';\nimport { CoreCourse, CoreCourseWSSection } from '@features/course/services/course';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreSites } from '@services/sites';\nimport { CoreSiteHome } from '@features/sitehome/services/sitehome';\nimport { CoreCourses } from '@features//courses/services/courses';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreCourseHelper, CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { CoreCourseModuleDelegate } from '@features/course/services/module-delegate';\nimport { CoreCourseModulePrefetchDelegate } from '@features/course/services/module-prefetch-delegate';\nimport { CoreNavigationOptions, CoreNavigator } from '@services/navigator';\nimport { CoreBlockHelper } from '@features/block/services/block-helper';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreBlockSideBlocksComponent } from '@features/block/components/side-blocks/side-blocks';\n\n/**\n * Page that displays site home index.\n */\n@Component({\n    selector: 'page-core-sitehome-index',\n    templateUrl: 'index.html',\n    styleUrls: ['index.scss'],\n})\nexport class CoreSiteHomeIndexPage implements OnInit, OnDestroy {\n\n    dataLoaded = false;\n    section?: CoreCourseWSSection & {\n        hasContent?: boolean;\n    };\n\n    hasContent = false;\n    hasBlocks = false;\n    items: string[] = [];\n    siteHomeId = 1;\n    currentSite!: CoreSite;\n    searchEnabled = false;\n    newsForumModule?: CoreCourseModuleData;\n\n    protected updateSiteObserver: CoreEventObserver;\n    protected logView: () => void;\n\n    constructor(protected route: ActivatedRoute) {\n        // Refresh the enabled flags if site is updated.\n        this.updateSiteObserver = CoreEvents.on(CoreEvents.SITE_UPDATED, () => {\n            this.searchEnabled = !CoreCourses.isSearchCoursesDisabledInSite();\n        }, CoreSites.getCurrentSiteId());\n\n        this.logView = CoreTime.once(async () => {\n            await CoreUtils.ignoreErrors(CoreCourse.logView(this.siteHomeId));\n\n            CoreAnalytics.logEvent({\n                type: CoreAnalyticsEventType.VIEW_ITEM,\n                ws: 'core_course_view_course',\n                name: this.currentSite.getInfo()?.sitename ?? '',\n                data: { id: this.siteHomeId, category: 'course' },\n                url: '/?redirect=0',\n            });\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnInit(): void {\n        this.searchEnabled = !CoreCourses.isSearchCoursesDisabledInSite();\n\n        this.currentSite = CoreSites.getRequiredCurrentSite();\n        this.siteHomeId = CoreSites.getCurrentSiteHomeId();\n\n        const module = CoreNavigator.getRouteParam<CoreCourseModuleData>('module');\n        if (module) {\n            const modNavOptions = CoreNavigator.getRouteParam<CoreNavigationOptions>('modNavOptions');\n            CoreCourseHelper.openModule(module, this.siteHomeId, { modNavOptions });\n        }\n\n        this.loadContent().finally(() => {\n            this.dataLoaded = true;\n        });\n\n        this.openFocusedInstance();\n\n        this.route.queryParams.subscribe(() => this.openFocusedInstance());\n    }\n\n    /**\n     * Convenience function to fetch the data.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadContent(): Promise<void> {\n        this.hasContent = false;\n\n        const config = this.currentSite.getStoredConfig() || { numsections: 1, frontpageloggedin: undefined };\n\n        this.items = await CoreSiteHome.getFrontPageItems(config.frontpageloggedin);\n        this.hasContent = this.items.length > 0;\n\n        // Get the news forum.\n        if (this.items.includes('NEWS_ITEMS')) {\n            try {\n                const forum = await CoreSiteHome.getNewsForum(this.siteHomeId);\n                this.newsForumModule = await CoreCourse.getModule(forum.cmid, forum.course);\n                this.newsForumModule.handlerData = await CoreCourseModuleDelegate.getModuleDataFor(\n                    this.newsForumModule.modname,\n                    this.newsForumModule,\n                    this.siteHomeId,\n                    undefined,\n                    true,\n                );\n            } catch {\n                // Ignore errors.\n            }\n        }\n\n        try {\n            const sections = await CoreCourse.getSections(this.siteHomeId, false, true);\n\n            // Check \"Include a topic section\" setting from numsections.\n            this.section = config.numsections ? sections.find((section) => section.section == 1) : undefined;\n            if (this.section) {\n                const result = await CoreCourseHelper.addHandlerDataForModules(\n                    [this.section],\n                    this.siteHomeId,\n                    undefined,\n                    undefined,\n                    true,\n                );\n\n                this.section.hasContent = result.hasContent;\n                this.hasContent = result.hasContent || this.hasContent;\n            }\n\n            this.logView();\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.couldnotloadsectioncontent', true);\n        }\n\n        this.hasBlocks = await CoreBlockHelper.hasCourseBlocks(this.siteHomeId);\n    }\n\n    /**\n     * Refresh the data.\n     *\n     * @param refresher Refresher.\n     */\n    doRefresh(refresher?: HTMLIonRefresherElement): void {\n        const promises: Promise<unknown>[] = [];\n\n        promises.push(CoreCourse.invalidateSections(this.siteHomeId));\n        promises.push(this.currentSite.invalidateConfig().then(async () => {\n            // Config invalidated, fetch it again.\n            const config: CoreSiteConfig = await this.currentSite.getConfig();\n            this.currentSite.setConfig(config);\n\n            return;\n        }));\n\n        promises.push(CoreCourse.invalidateCourseBlocks(this.siteHomeId));\n\n        if (this.section && this.section.modules) {\n            // Invalidate modules prefetch data.\n            promises.push(CoreCourseModulePrefetchDelegate.invalidateModules(this.section.modules, this.siteHomeId));\n        }\n\n        Promise.all(promises).finally(async () => {\n            await this.loadContent().finally(() => {\n                refresher?.complete();\n            });\n        });\n    }\n\n    /**\n     * Go to search courses.\n     */\n    openSearch(): void {\n        CoreNavigator.navigateToSitePath('courses/list', { params : { mode: 'search' } });\n    }\n\n    /**\n     * Go to available courses.\n     */\n    openAvailableCourses(): void {\n        CoreNavigator.navigateToSitePath('courses/list', { params : { mode: 'all' } });\n    }\n\n    /**\n     * Go to my courses.\n     */\n    openMyCourses(): void {\n        CoreNavigator.navigateToSitePath('courses/list', { params : { mode: 'my' } });\n    }\n\n    /**\n     * Go to course categories.\n     */\n    openCourseCategories(): void {\n        CoreNavigator.navigateToSitePath('courses/categories');\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.updateSiteObserver.off();\n    }\n\n    /**\n     * Check whether there is a focused instance in the page parameters and open it.\n     */\n    private openFocusedInstance() {\n        const blockInstanceId = CoreNavigator.getRouteNumberParam('blockInstanceId');\n\n        if (blockInstanceId) {\n            CoreDomUtils.openSideModal({\n                component: CoreBlockSideBlocksComponent,\n                componentProps: {\n                    contextLevel: 'course',\n                    instanceId: this.siteHomeId,\n                    initialBlockInstanceId: blockInstanceId,\n                },\n            });\n        }\n    }\n\n}\n","<core-navbar-buttons slot=\"end\" prepend>\n    <ion-button *ngIf=\"searchEnabled\" (click)=\"openSearch()\" [attr.aria-label]=\"'core.courses.searchcourses' | translate\">\n        <ion-icon name=\"fas-magnifying-glass\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n</core-navbar-buttons>\n<ion-content>\n    <ion-refresher slot=\"fixed\" [disabled]=\"!dataLoaded\" (ionRefresh)=\"doRefresh($event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n    <core-loading [hideUntil]=\"dataLoaded\">\n        <ion-list class=\"core-course-module-list-wrapper\">\n            <!-- Site home main contents. -->\n            <ng-container *ngIf=\"section && section.hasContent\">\n                <ion-item class=\"ion-text-wrap section-summary\" *ngIf=\"section.summary\">\n                    <ion-label>\n                        <core-format-text [text]=\"section.summary\" contextLevel=\"course\" [contextInstanceId]=\"siteHomeId\" />\n                    </ion-label>\n                </ion-item>\n\n                <core-course-module *ngFor=\"let module of section.modules\" [module]=\"module\" [section]=\"section\" />\n            </ng-container>\n\n            <!-- Site home items: news, categories, courses, etc. -->\n            <ng-container *ngIf=\"items.length > 0\">\n                <core-spacer *ngIf=\"section && section!.hasContent\" />\n                <ng-container *ngFor=\"let item of items\">\n                    <ng-container [ngSwitch]=\"item\">\n                        <ng-container *ngSwitchCase=\"'LIST_OF_COURSE'\">\n                            <ng-template *ngTemplateOutlet=\"allCourseList\"></ng-template>\n                        </ng-container>\n                        <ng-container *ngSwitchCase=\"'LIST_OF_CATEGORIES'\">\n                            <ng-template *ngTemplateOutlet=\"categories\"></ng-template>\n                        </ng-container>\n                        <ng-container *ngSwitchCase=\"'COURSE_SEARCH_BOX'\">\n                            <ng-template *ngTemplateOutlet=\"courseSearch\"></ng-template>\n                        </ng-container>\n                        <ng-container *ngSwitchCase=\"'ENROLLED_COURSES'\">\n                            <ng-template *ngTemplateOutlet=\"enrolledCourseList\"></ng-template>\n                        </ng-container>\n                        <ng-container *ngSwitchCase=\"'NEWS_ITEMS'\">\n                            <ng-template *ngTemplateOutlet=\"news\"></ng-template>\n                        </ng-container>\n                    </ng-container>\n                </ng-container>\n            </ng-container>\n        </ion-list>\n        <core-block-side-blocks-button slot=\"fixed\" *ngIf=\"hasBlocks\" contextLevel=\"course\" [instanceId]=\"siteHomeId\" />\n\n        <core-empty-box *ngIf=\"!hasContent\" icon=\"fas-box-open\" [message]=\"'core.course.nocontentavailable' | translate\" />\n    </core-loading>\n</ion-content>\n\n<ng-template #allCourseList>\n    <ion-card>\n        <ion-item button class=\"ion-text-wrap\" (click)=\"openAvailableCourses()\">\n            <ion-icon name=\"fas-graduation-cap\" fixed-width slot=\"start\" aria-hidden=\"true\" />\n            <ion-label>\n                <p class=\"item-heading\">{{ 'core.courses.availablecourses' | translate}}</p>\n            </ion-label>\n        </ion-item>\n    </ion-card>\n</ng-template>\n\n<ng-template #news>\n    <core-course-module class=\"core-sitehome-news\" *ngIf=\"newsForumModule\" [module]=\"newsForumModule\" />\n</ng-template>\n\n<ng-template #categories>\n    <ion-card>\n        <ion-item button class=\"ion-text-wrap\" (click)=\"openCourseCategories()\">\n            <ion-icon name=\"fas-folder\" slot=\"start\" aria-hidden=\"true\" />\n            <ion-label>\n                <p class=\"item-heading\">{{ 'core.courses.categories' | translate}}</p>\n            </ion-label>\n        </ion-item>\n    </ion-card>\n</ng-template>\n\n<ng-template #enrolledCourseList>\n    <ion-card>\n        <ion-item button class=\"ion-text-wrap\" (click)=\"openMyCourses()\">\n            <ion-icon name=\"fas-graduation-cap\" fixed-width slot=\"start\" aria-hidden=\"true\" />\n            <ion-label>\n                <p class=\"item-heading\">{{ 'core.courses.mycourses' | translate}}</p>\n            </ion-label>\n        </ion-item>\n    </ion-card>\n</ng-template>\n\n<ng-template #courseSearch>\n    <ion-card>\n        <ion-item button class=\"ion-text-wrap\" (click)=\"openSearch()\">\n            <ion-icon name=\"fas-magnifying-glass\" slot=\"start\" aria-hidden=\"true\" />\n            <ion-label>\n                <p class=\"item-heading\">{{ 'core.courses.searchcourses' | translate}}</p>\n            </ion-label>\n        </ion-item>\n    </ion-card>\n</ng-template>\n"],"mappings":";;AAkBA,SAASA,UAAU,QAA6B,kCAAkC;AAClF,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,YAAY,QAAQ,sCAAsC;AACnE,SAASC,WAAW,QAAQ,qCAAqC;AACjE,SAA4BC,UAAU,QAAQ,oBAAoB;AAClE,SAASC,gBAAgB,QAA8B,yCAAyC;AAChG,SAASC,wBAAwB,QAAQ,2CAA2C;AACpF,SAASC,gCAAgC,QAAQ,oDAAoD;AACrG,SAAgCC,aAAa,QAAQ,qBAAqB;AAC1E,SAASC,eAAe,QAAQ,uCAAuC;AACvE,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,QAAQ,QAAQ,kBAAkB;AAC3C,SAASC,aAAa,EAAEC,sBAAsB,QAAQ,qBAAqB;AAC3E,SAASC,4BAA4B,QAAQ,oDAAoD;;;;;;;;;;;;;;;;;;;IC/B7FC,EAAA,CAAAC,cAAA,qBAAsH;IAApFD,EAAA,CAAAE,UAAA,mBAAAC,wEAAA;MAAAH,EAAA,CAAAI,aAAA,CAAAC,IAAA;MAAA,MAAAC,OAAA,GAAAN,EAAA,CAAAO,aAAA;MAAA,OAASP,EAAA,CAAAQ,WAAA,CAAAF,OAAA,CAAAG,UAAA,EAAY;IAAA,EAAC;;IACpDT,EAAA,CAAAU,SAAA,mBAA4E;IAChFV,EAAA,CAAAW,YAAA,EAAa;;;IAF4CX,EAAA,CAAAY,WAAA,eAAAZ,EAAA,CAAAa,WAAA,qCAA4D;;;;;IAYzGb,EAAA,CAAAC,cAAA,mBAAwE;IAEhED,EAAA,CAAAU,SAAA,2BAAoG;IACxGV,EAAA,CAAAW,YAAA,EAAY;;;;IADUX,EAAA,CAAAc,SAAA,GAAwB;IAAxBd,EAAA,CAAAe,UAAA,SAAAC,OAAA,CAAAC,OAAA,CAAAC,OAAA,CAAwB,sBAAAF,OAAA,CAAAG,UAAA;;;;;IAIlDnB,EAAA,CAAAU,SAAA,6BAAmG;;;;;IAAxCV,EAAA,CAAAe,UAAA,WAAAK,UAAA,CAAiB,YAAAC,OAAA,CAAAJ,OAAA;;;;;IAPhFjB,EAAA,CAAAsB,uBAAA,GAAoD;IAChDtB,EAAA,CAAAuB,UAAA,IAAAC,wDAAA,uBAIW;IAEXxB,EAAA,CAAAuB,UAAA,IAAAE,kEAAA,iCAAmG;IACvGzB,EAAA,CAAA0B,qBAAA,EAAe;;;;IAPsC1B,EAAA,CAAAc,SAAA,GAAqB;IAArBd,EAAA,CAAAe,UAAA,SAAAY,MAAA,CAAAV,OAAA,CAAAC,OAAA,CAAqB;IAM/BlB,EAAA,CAAAc,SAAA,GAAkB;IAAlBd,EAAA,CAAAe,UAAA,YAAAY,MAAA,CAAAV,OAAA,CAAAW,OAAA,CAAkB;;;;;IAKzD5B,EAAA,CAAAU,SAAA,kBAAsD;;;;;;IAI1CV,EAAA,CAAAuB,UAAA,IAAAM,2FAAA,sBAA6D;;;;;IADjE7B,EAAA,CAAAsB,uBAAA,GAA+C;IAC3CtB,EAAA,CAAAuB,UAAA,IAAAO,6EAAA,iBAA6D;IACjE9B,EAAA,CAAA0B,qBAAA,EAAe;;;;;IADG1B,EAAA,CAAAc,SAAA,GAA+B;IAA/Bd,EAAA,CAAAe,UAAA,qBAAAgB,GAAA,CAA+B;;;;;;IAG7C/B,EAAA,CAAAuB,UAAA,IAAAS,2FAAA,sBAA0D;;;;;IAD9DhC,EAAA,CAAAsB,uBAAA,GAAmD;IAC/CtB,EAAA,CAAAuB,UAAA,IAAAU,6EAAA,iBAA0D;IAC9DjC,EAAA,CAAA0B,qBAAA,EAAe;;;;;IADG1B,EAAA,CAAAc,SAAA,GAA4B;IAA5Bd,EAAA,CAAAe,UAAA,qBAAAmB,GAAA,CAA4B;;;;;;IAG1ClC,EAAA,CAAAuB,UAAA,IAAAY,2FAAA,sBAA4D;;;;;IADhEnC,EAAA,CAAAsB,uBAAA,GAAkD;IAC9CtB,EAAA,CAAAuB,UAAA,IAAAa,6EAAA,iBAA4D;IAChEpC,EAAA,CAAA0B,qBAAA,EAAe;;;;;IADG1B,EAAA,CAAAc,SAAA,GAA8B;IAA9Bd,EAAA,CAAAe,UAAA,qBAAAsB,IAAA,CAA8B;;;;;;IAG5CrC,EAAA,CAAAuB,UAAA,IAAAe,2FAAA,sBAAkE;;;;;IADtEtC,EAAA,CAAAsB,uBAAA,GAAiD;IAC7CtB,EAAA,CAAAuB,UAAA,IAAAgB,6EAAA,iBAAkE;IACtEvC,EAAA,CAAA0B,qBAAA,EAAe;;;;;IADG1B,EAAA,CAAAc,SAAA,GAAoC;IAApCd,EAAA,CAAAe,UAAA,qBAAAyB,IAAA,CAAoC;;;;;;IAGlDxC,EAAA,CAAAuB,UAAA,IAAAkB,2FAAA,sBAAoD;;;;;IADxDzC,EAAA,CAAAsB,uBAAA,GAA2C;IACvCtB,EAAA,CAAAuB,UAAA,IAAAmB,6EAAA,iBAAoD;IACxD1C,EAAA,CAAA0B,qBAAA,EAAe;;;;;IADG1B,EAAA,CAAAc,SAAA,GAAsB;IAAtBd,EAAA,CAAAe,UAAA,qBAAA4B,GAAA,CAAsB;;;;;IAfhD3C,EAAA,CAAAsB,uBAAA,GAAyC;IAEjCtB,EAAA,CAAAuB,UAAA,IAAAqB,2EAAA,2BAEe;IACf5C,EAAA,CAAAuB,UAAA,IAAAsB,2EAAA,2BAEe;IACf7C,EAAA,CAAAuB,UAAA,IAAAuB,2EAAA,2BAEe;IACf9C,EAAA,CAAAuB,UAAA,IAAAwB,2EAAA,2BAEe;IACf/C,EAAA,CAAAuB,UAAA,IAAAyB,2EAAA,2BAEe;IACnBhD,EAAA,CAAA0B,qBAAA,EAAe;;;;IAhBD1B,EAAA,CAAAc,SAAA,GAAiB;IAAjBd,EAAA,CAAAe,UAAA,aAAAkC,QAAA,CAAiB;IACZjD,EAAA,CAAAc,SAAA,GAA8B;IAA9Bd,EAAA,CAAAe,UAAA,kCAA8B;IAG9Bf,EAAA,CAAAc,SAAA,GAAkC;IAAlCd,EAAA,CAAAe,UAAA,sCAAkC;IAGlCf,EAAA,CAAAc,SAAA,GAAiC;IAAjCd,EAAA,CAAAe,UAAA,qCAAiC;IAGjCf,EAAA,CAAAc,SAAA,GAAgC;IAAhCd,EAAA,CAAAe,UAAA,oCAAgC;IAGhCf,EAAA,CAAAc,SAAA,GAA0B;IAA1Bd,EAAA,CAAAe,UAAA,8BAA0B;;;;;IAhBrDf,EAAA,CAAAsB,uBAAA,GAAuC;IACnCtB,EAAA,CAAAuB,UAAA,IAAA2B,2DAAA,yBAAsD;IACtDlD,EAAA,CAAAuB,UAAA,IAAA4B,4DAAA,2BAkBe;IACnBnD,EAAA,CAAA0B,qBAAA,EAAe;;;;IApBG1B,EAAA,CAAAc,SAAA,GAAoC;IAApCd,EAAA,CAAAe,UAAA,SAAAqC,MAAA,CAAAnC,OAAA,IAAAmC,MAAA,CAAAnC,OAAA,CAAAoC,UAAA,CAAoC;IACnBrD,EAAA,CAAAc,SAAA,GAAQ;IAARd,EAAA,CAAAe,UAAA,YAAAqC,MAAA,CAAAE,KAAA,CAAQ;;;;;IAqB/CtD,EAAA,CAAAU,SAAA,wCAAgH;;;;IAA5BV,EAAA,CAAAe,UAAA,eAAAwC,MAAA,CAAApC,UAAA,CAAyB;;;;;IAE7GnB,EAAA,CAAAU,SAAA,yBAAmH;;;;IAA3DV,EAAA,CAAAe,UAAA,YAAAf,EAAA,CAAAa,WAAA,yCAAwD;;;;;;IAKpHb,EAAA,CAAAC,cAAA,eAAU;IACiCD,EAAA,CAAAE,UAAA,mBAAAsD,wEAAA;MAAAxD,EAAA,CAAAI,aAAA,CAAAqD,IAAA;MAAA,MAAAC,OAAA,GAAA1D,EAAA,CAAAO,aAAA;MAAA,OAASP,EAAA,CAAAQ,WAAA,CAAAkD,OAAA,CAAAC,oBAAA,EAAsB;IAAA,EAAC;IACnE3D,EAAA,CAAAU,SAAA,mBAAkF;IAClFV,EAAA,CAAAC,cAAA,gBAAW;IACiBD,EAAA,CAAA4D,MAAA,GAAgD;;IAAA5D,EAAA,CAAAW,YAAA,EAAI;;;IAApDX,EAAA,CAAAc,SAAA,GAAgD;IAAhDd,EAAA,CAAA6D,iBAAA,CAAA7D,EAAA,CAAAa,WAAA,wCAAgD;;;;;IAOpFb,EAAA,CAAAU,SAAA,6BAAoG;;;;IAA7BV,EAAA,CAAAe,UAAA,WAAA+C,OAAA,CAAAC,eAAA,CAA0B;;;;;IAAjG/D,EAAA,CAAAuB,UAAA,IAAAyC,kEAAA,iCAAoG;;;;IAApDhE,EAAA,CAAAe,UAAA,SAAAkD,MAAA,CAAAF,eAAA,CAAqB;;;;;;IAIrE/D,EAAA,CAAAC,cAAA,eAAU;IACiCD,EAAA,CAAAE,UAAA,mBAAAgE,wEAAA;MAAAlE,EAAA,CAAAI,aAAA,CAAA+D,IAAA;MAAA,MAAAC,OAAA,GAAApE,EAAA,CAAAO,aAAA;MAAA,OAASP,EAAA,CAAAQ,WAAA,CAAA4D,OAAA,CAAAC,oBAAA,EAAsB;IAAA,EAAC;IACnErE,EAAA,CAAAU,SAAA,mBAA8D;IAC9DV,EAAA,CAAAC,cAAA,gBAAW;IACiBD,EAAA,CAAA4D,MAAA,GAA0C;;IAAA5D,EAAA,CAAAW,YAAA,EAAI;;;IAA9CX,EAAA,CAAAc,SAAA,GAA0C;IAA1Cd,EAAA,CAAA6D,iBAAA,CAAA7D,EAAA,CAAAa,WAAA,kCAA0C;;;;;;IAO9Eb,EAAA,CAAAC,cAAA,eAAU;IACiCD,EAAA,CAAAE,UAAA,mBAAAoE,wEAAA;MAAAtE,EAAA,CAAAI,aAAA,CAAAmE,IAAA;MAAA,MAAAC,OAAA,GAAAxE,EAAA,CAAAO,aAAA;MAAA,OAASP,EAAA,CAAAQ,WAAA,CAAAgE,OAAA,CAAAC,aAAA,EAAe;IAAA,EAAC;IAC5DzE,EAAA,CAAAU,SAAA,mBAAkF;IAClFV,EAAA,CAAAC,cAAA,gBAAW;IACiBD,EAAA,CAAA4D,MAAA,GAAyC;;IAAA5D,EAAA,CAAAW,YAAA,EAAI;;;IAA7CX,EAAA,CAAAc,SAAA,GAAyC;IAAzCd,EAAA,CAAA6D,iBAAA,CAAA7D,EAAA,CAAAa,WAAA,iCAAyC;;;;;;IAO7Eb,EAAA,CAAAC,cAAA,eAAU;IACiCD,EAAA,CAAAE,UAAA,mBAAAwE,wEAAA;MAAA1E,EAAA,CAAAI,aAAA,CAAAuE,IAAA;MAAA,MAAAC,OAAA,GAAA5E,EAAA,CAAAO,aAAA;MAAA,OAASP,EAAA,CAAAQ,WAAA,CAAAoE,OAAA,CAAAnE,UAAA,EAAY;IAAA,EAAC;IACzDT,EAAA,CAAAU,SAAA,mBAAwE;IACxEV,EAAA,CAAAC,cAAA,gBAAW;IACiBD,EAAA,CAAA4D,MAAA,GAA6C;;IAAA5D,EAAA,CAAAW,YAAA,EAAI;;;IAAjDX,EAAA,CAAAc,SAAA,GAA6C;IAA7Cd,EAAA,CAAA6D,iBAAA,CAAA7D,EAAA,CAAAa,WAAA,qCAA6C;;;AD5DrF;;;AAQA,OAAM,MAAOgE,qBAAqB;EAkB9BC,YAAsBC,KAAqB;IAAA,IAAAC,KAAA;IAArB,KAAAD,KAAK,GAALA,KAAK;IAhB3B,KAAAE,UAAU,GAAG,KAAK;IAKlB,KAAA5B,UAAU,GAAG,KAAK;IAClB,KAAA6B,SAAS,GAAG,KAAK;IACjB,KAAA5B,KAAK,GAAa,EAAE;IACpB,KAAAnC,UAAU,GAAG,CAAC;IAEd,KAAAgE,aAAa,GAAG,KAAK;IAOjB;IACA,IAAI,CAACC,kBAAkB,GAAG/F,UAAU,CAACgG,EAAE,CAAChG,UAAU,CAACiG,YAAY,EAAE,MAAK;MAClE,IAAI,CAACH,aAAa,GAAG,CAAC/F,WAAW,CAACmG,6BAA6B,EAAE;IACrE,CAAC,EAAErG,SAAS,CAACsG,gBAAgB,EAAE,CAAC;IAEhC,IAAI,CAACC,OAAO,GAAG7F,QAAQ,CAAC8F,IAAI,eAAAC,iBAAA,CAAC,aAAW;MAAA,IAAAC,qBAAA,EAAAC,sBAAA;MACpC,MAAMlG,SAAS,CAACmG,YAAY,CAAC9G,UAAU,CAACyG,OAAO,CAACT,KAAI,CAAC7D,UAAU,CAAC,CAAC;MAEjEtB,aAAa,CAACkG,QAAQ,CAAC;QACnBC,IAAI,EAAElG,sBAAsB,CAACmG,SAAS;QACtCC,EAAE,EAAE,yBAAyB;QAC7BC,IAAI,GAAAP,qBAAA,IAAAC,sBAAA,GAAEb,KAAI,CAACoB,WAAW,CAACC,OAAO,EAAE,cAAAR,sBAAA,uBAA1BA,sBAAA,CAA4BS,QAAQ,cAAAV,qBAAA,cAAAA,qBAAA,GAAI,EAAE;QAChDW,IAAI,EAAE;UAAEC,EAAE,EAAExB,KAAI,CAAC7D,UAAU;UAAEsF,QAAQ,EAAE;QAAQ,CAAE;QACjDC,GAAG,EAAE;OACR,CAAC;IACN,CAAC,EAAC;EACN;EAEA;;;EAGAC,QAAQA,CAAA;IACJ,IAAI,CAACxB,aAAa,GAAG,CAAC/F,WAAW,CAACmG,6BAA6B,EAAE;IAEjE,IAAI,CAACa,WAAW,GAAGlH,SAAS,CAAC0H,sBAAsB,EAAE;IACrD,IAAI,CAACzF,UAAU,GAAGjC,SAAS,CAAC2H,oBAAoB,EAAE;IAElD,MAAMC,MAAM,GAAGrH,aAAa,CAACsH,aAAa,CAAuB,QAAQ,CAAC;IAC1E,IAAID,MAAM,EAAE;MACR,MAAME,aAAa,GAAGvH,aAAa,CAACsH,aAAa,CAAwB,eAAe,CAAC;MACzFzH,gBAAgB,CAAC2H,UAAU,CAACH,MAAM,EAAE,IAAI,CAAC3F,UAAU,EAAE;QAAE6F;MAAa,CAAE,CAAC;;IAG3E,IAAI,CAACE,WAAW,EAAE,CAACC,OAAO,CAAC,MAAK;MAC5B,IAAI,CAAClC,UAAU,GAAG,IAAI;IAC1B,CAAC,CAAC;IAEF,IAAI,CAACmC,mBAAmB,EAAE;IAE1B,IAAI,CAACrC,KAAK,CAACsC,WAAW,CAACC,SAAS,CAAC,MAAM,IAAI,CAACF,mBAAmB,EAAE,CAAC;EACtE;EAEA;;;;;EAKgBF,WAAWA,CAAA;IAAA,IAAAK,MAAA;IAAA,OAAA5B,iBAAA;MACvB4B,MAAI,CAAClE,UAAU,GAAG,KAAK;MAEvB,MAAMmE,MAAM,GAAGD,MAAI,CAACnB,WAAW,CAACqB,eAAe,EAAE,IAAI;QAAEC,WAAW,EAAE,CAAC;QAAEC,iBAAiB,EAAEC;MAAS,CAAE;MAErGL,MAAI,CAACjE,KAAK,SAASnE,YAAY,CAAC0I,iBAAiB,CAACL,MAAM,CAACG,iBAAiB,CAAC;MAC3EJ,MAAI,CAAClE,UAAU,GAAGkE,MAAI,CAACjE,KAAK,CAACwE,MAAM,GAAG,CAAC;MAEvC;MACA,IAAIP,MAAI,CAACjE,KAAK,CAACyE,QAAQ,CAAC,YAAY,CAAC,EAAE;QACnC,IAAI;UACA,MAAMC,KAAK,SAAS7I,YAAY,CAAC8I,YAAY,CAACV,MAAI,CAACpG,UAAU,CAAC;UAC9DoG,MAAI,CAACxD,eAAe,SAAS/E,UAAU,CAACkJ,SAAS,CAACF,KAAK,CAACG,IAAI,EAAEH,KAAK,CAACI,MAAM,CAAC;UAC3Eb,MAAI,CAACxD,eAAe,CAACsE,WAAW,SAAS9I,wBAAwB,CAAC+I,gBAAgB,CAC9Ef,MAAI,CAACxD,eAAe,CAACwE,OAAO,EAC5BhB,MAAI,CAACxD,eAAe,EACpBwD,MAAI,CAACpG,UAAU,EACfyG,SAAS,EACT,IAAI,CACP;SACJ,CAAC,OAAAY,OAAA,EAAM;UACJ;QAAA;;MAIR,IAAI;QACA,MAAMC,QAAQ,SAASzJ,UAAU,CAAC0J,WAAW,CAACnB,MAAI,CAACpG,UAAU,EAAE,KAAK,EAAE,IAAI,CAAC;QAE3E;QACAoG,MAAI,CAACtG,OAAO,GAAGuG,MAAM,CAACE,WAAW,GAAGe,QAAQ,CAACE,IAAI,CAAE1H,OAAO,IAAKA,OAAO,CAACA,OAAO,IAAI,CAAC,CAAC,GAAG2G,SAAS;QAChG,IAAIL,MAAI,CAACtG,OAAO,EAAE;UACd,MAAM2H,MAAM,SAAStJ,gBAAgB,CAACuJ,wBAAwB,CAC1D,CAACtB,MAAI,CAACtG,OAAO,CAAC,EACdsG,MAAI,CAACpG,UAAU,EACfyG,SAAS,EACTA,SAAS,EACT,IAAI,CACP;UAEDL,MAAI,CAACtG,OAAO,CAACoC,UAAU,GAAGuF,MAAM,CAACvF,UAAU;UAC3CkE,MAAI,CAAClE,UAAU,GAAGuF,MAAM,CAACvF,UAAU,IAAIkE,MAAI,CAAClE,UAAU;;QAG1DkE,MAAI,CAAC9B,OAAO,EAAE;OACjB,CAAC,OAAOqD,KAAK,EAAE;QACZ7J,YAAY,CAAC8J,qBAAqB,CAACD,KAAK,EAAE,wCAAwC,EAAE,IAAI,CAAC;;MAG7FvB,MAAI,CAACrC,SAAS,SAASxF,eAAe,CAACsJ,eAAe,CAACzB,MAAI,CAACpG,UAAU,CAAC;IAAC;EAC5E;EAEA;;;;;EAKA8H,SAASA,CAACC,SAAmC;IAAA,IAAAC,MAAA;IACzC,MAAMC,QAAQ,GAAuB,EAAE;IAEvCA,QAAQ,CAACC,IAAI,CAACrK,UAAU,CAACsK,kBAAkB,CAAC,IAAI,CAACnI,UAAU,CAAC,CAAC;IAC7DiI,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACjD,WAAW,CAACmD,gBAAgB,EAAE,CAACC,IAAI,eAAA7D,iBAAA,CAAC,aAAW;MAC9D;MACA,MAAM6B,MAAM,SAAyB2B,MAAI,CAAC/C,WAAW,CAACqD,SAAS,EAAE;MACjEN,MAAI,CAAC/C,WAAW,CAACsD,SAAS,CAAClC,MAAM,CAAC;MAElC;IACJ,CAAC,EAAC,CAAC;IAEH4B,QAAQ,CAACC,IAAI,CAACrK,UAAU,CAAC2K,sBAAsB,CAAC,IAAI,CAACxI,UAAU,CAAC,CAAC;IAEjE,IAAI,IAAI,CAACF,OAAO,IAAI,IAAI,CAACA,OAAO,CAACW,OAAO,EAAE;MACtC;MACAwH,QAAQ,CAACC,IAAI,CAAC7J,gCAAgC,CAACoK,iBAAiB,CAAC,IAAI,CAAC3I,OAAO,CAACW,OAAO,EAAE,IAAI,CAACT,UAAU,CAAC,CAAC;;IAG5G0I,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CAACjC,OAAO,eAAAxB,iBAAA,CAAC,aAAW;MACrC,MAAMwD,MAAI,CAACjC,WAAW,EAAE,CAACC,OAAO,CAAC,MAAK;QAClC+B,SAAS,aAATA,SAAS,eAATA,SAAS,CAAEa,QAAQ,EAAE;MACzB,CAAC,CAAC;IACN,CAAC,EAAC;EACN;EAEA;;;EAGAtJ,UAAUA,CAAA;IACNhB,aAAa,CAACuK,kBAAkB,CAAC,cAAc,EAAE;MAAEC,MAAM,EAAG;QAAEC,IAAI,EAAE;MAAQ;IAAE,CAAE,CAAC;EACrF;EAEA;;;EAGAvG,oBAAoBA,CAAA;IAChBlE,aAAa,CAACuK,kBAAkB,CAAC,cAAc,EAAE;MAAEC,MAAM,EAAG;QAAEC,IAAI,EAAE;MAAK;IAAE,CAAE,CAAC;EAClF;EAEA;;;EAGAzF,aAAaA,CAAA;IACThF,aAAa,CAACuK,kBAAkB,CAAC,cAAc,EAAE;MAAEC,MAAM,EAAG;QAAEC,IAAI,EAAE;MAAI;IAAE,CAAE,CAAC;EACjF;EAEA;;;EAGA7F,oBAAoBA,CAAA;IAChB5E,aAAa,CAACuK,kBAAkB,CAAC,oBAAoB,CAAC;EAC1D;EAEA;;;EAGAG,WAAWA,CAAA;IACP,IAAI,CAAC/E,kBAAkB,CAACgF,GAAG,EAAE;EACjC;EAEA;;;EAGQhD,mBAAmBA,CAAA;IACvB,MAAMiD,eAAe,GAAG5K,aAAa,CAAC6K,mBAAmB,CAAC,iBAAiB,CAAC;IAE5E,IAAID,eAAe,EAAE;MACjBpL,YAAY,CAACsL,aAAa,CAAC;QACvBC,SAAS,EAAEzK,4BAA4B;QACvC0K,cAAc,EAAE;UACZC,YAAY,EAAE,QAAQ;UACtBC,UAAU,EAAE,IAAI,CAACxJ,UAAU;UAC3ByJ,sBAAsB,EAAEP;;OAE/B,CAAC;;EAEV;;SAvMSxF,qBAAqB;;mBAArBA,MAAqB,EAAA7E,EAAA,CAAA6K,iBAAA,CAAAC,EAAA,CAAAC,cAAA;AAAA;;QAArBlG,MAAqB;EAAAmG,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,+BAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MC1ClCtL,EAAA,CAAAC,cAAA,6BAAwC;MACpCD,EAAA,CAAAuB,UAAA,IAAAiK,2CAAA,wBAEa;MACjBxL,EAAA,CAAAW,YAAA,EAAsB;MACtBX,EAAA,CAAAC,cAAA,kBAAa;MAC4CD,EAAA,CAAAE,UAAA,wBAAAuL,mEAAAC,MAAA;QAAA,OAAcH,GAAA,CAAAtC,SAAA,CAAAyC,MAAA,CAAAC,MAAA,CAAwB;MAAA,EAAC;MACxF3L,EAAA,CAAAU,SAAA,+BAA8E;;MAClFV,EAAA,CAAAW,YAAA,EAAgB;MAChBX,EAAA,CAAAC,cAAA,sBAAuC;MAG/BD,EAAA,CAAAuB,UAAA,IAAAqK,6CAAA,0BAQe;MAGf5L,EAAA,CAAAuB,UAAA,IAAAsK,6CAAA,0BAqBe;MACnB7L,EAAA,CAAAW,YAAA,EAAW;MACXX,EAAA,CAAAuB,UAAA,KAAAuK,+DAAA,2CAAgH;MAEhH9L,EAAA,CAAAuB,UAAA,KAAAwK,gDAAA,4BAAmH;MACvH/L,EAAA,CAAAW,YAAA,EAAe;MAGnBX,EAAA,CAAAuB,UAAA,KAAAyK,6CAAA,gCAAAhM,EAAA,CAAAiM,sBAAA,CASc;MAEdjM,EAAA,CAAAuB,UAAA,KAAA2K,6CAAA,iCAAAlM,EAAA,CAAAiM,sBAAA,CAEc;MAEdjM,EAAA,CAAAuB,UAAA,KAAA4K,6CAAA,iCAAAnM,EAAA,CAAAiM,sBAAA,CASc;MAEdjM,EAAA,CAAAuB,UAAA,KAAA6K,6CAAA,iCAAApM,EAAA,CAAAiM,sBAAA,CASc;MAEdjM,EAAA,CAAAuB,UAAA,KAAA8K,6CAAA,iCAAArM,EAAA,CAAAiM,sBAAA,CASc;;;MAjGGjM,EAAA,CAAAc,SAAA,GAAmB;MAAnBd,EAAA,CAAAe,UAAA,SAAAwK,GAAA,CAAApG,aAAA,CAAmB;MAKJnF,EAAA,CAAAc,SAAA,GAAwB;MAAxBd,EAAA,CAAAe,UAAA,cAAAwK,GAAA,CAAAtG,UAAA,CAAwB;MACzBjF,EAAA,CAAAc,SAAA,GAAoD;MAApDd,EAAA,CAAAsM,qBAAA,gBAAAtM,EAAA,CAAAa,WAAA,6BAAoD;MAEjEb,EAAA,CAAAc,SAAA,GAAwB;MAAxBd,EAAA,CAAAe,UAAA,cAAAwK,GAAA,CAAAtG,UAAA,CAAwB;MAGfjF,EAAA,CAAAc,SAAA,GAAmC;MAAnCd,EAAA,CAAAe,UAAA,SAAAwK,GAAA,CAAAtK,OAAA,IAAAsK,GAAA,CAAAtK,OAAA,CAAAoC,UAAA,CAAmC;MAWnCrD,EAAA,CAAAc,SAAA,GAAsB;MAAtBd,EAAA,CAAAe,UAAA,SAAAwK,GAAA,CAAAjI,KAAA,CAAAwE,MAAA,KAAsB;MAuBI9H,EAAA,CAAAc,SAAA,GAAe;MAAfd,EAAA,CAAAe,UAAA,SAAAwK,GAAA,CAAArG,SAAA,CAAe;MAE3ClF,EAAA,CAAAc,SAAA,GAAiB;MAAjBd,EAAA,CAAAe,UAAA,UAAAwK,GAAA,CAAAlI,UAAA,CAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}