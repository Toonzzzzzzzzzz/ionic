{"ast":null,"code":"import _objectSpread from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreConstants } from '@/core/constants';\nimport { CoreCourse, CoreCourseProvider } from '@features/course/services/course';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreCourseModulePrefetchDelegate } from '@features/course/services/module-prefetch-delegate';\nimport { CoreCourses } from '@features/courses/services/courses';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { Translate } from '@singletons';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreEvents } from '@singletons/events';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/download-refresh/download-refresh\";\nimport * as i3 from \"../../../../core/components/loading/loading\";\nimport * as i4 from \"../../../../core/components/mod-icon/mod-icon\";\nimport * as i5 from \"../../../../core/components/progress-bar/progress-bar\";\nimport * as i6 from \"../../../../core/directives/fa-icon\";\nimport * as i7 from \"../../../../core/directives/format-text\";\nimport * as i8 from \"../../../../core/directives/content\";\nimport * as i9 from \"../../../../core/directives/update-non-reactive-attributes\";\nimport * as i10 from \"@ionic/angular\";\nimport * as i11 from \"../../../../core/pipes/bytes-to-size\";\nimport * as i12 from \"@ngx-translate/core\";\nfunction AddonStorageManagerCourseStoragePage_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 15)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, \"addon.storagemanager.courseinfo\"));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreBytesToSize\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r1.totalSize));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.calculating\"));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ion_button_24_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 19);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"name\", ctx_r5.prefetchCourseData.icon);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ion_button_24_ion_spinner_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\", 0);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ion_button_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 16);\n    i0.ɵɵlistener(\"click\", function AddonStorageManagerCourseStoragePage_ion_button_24_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.prefetchCourse($event));\n    });\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ion_button_24_ion_icon_1_Template, 1, 1, \"ion-icon\", 17);\n    i0.ɵɵtemplate(2, AddonStorageManagerCourseStoragePage_ion_button_24_ion_spinner_2_Template, 1, 0, \"ion-spinner\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"disabled\", ctx_r3.prefetchCourseData.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.prefetchCourseData.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.prefetchCourseData.loading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 4, ctx_r3.prefetchCourseData.statusTranslatable), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 30);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.downloaded\"));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 28);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_ion_icon_1_Template, 2, 3, \"ion-icon\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"coreBytesToSize\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"color\", section_r9.downloadStatus === ctx_r11.statusDownloaded ? \"success\" : \"light\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r9.downloadStatus === ctx_r11.statusDownloaded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 3, section_r9.totalSize), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.calculating\"), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵelement(1, \"core-progress-bar\", 32);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"progress\", section_r9.total === 0 ? -1 : section_r9.count / section_r9.total);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_core_download_refresh_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-download-refresh\", 39);\n    i0.ɵɵlistener(\"action\", function AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_core_download_refresh_1_Template_core_download_refresh_action_0_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const section_r9 = i0.ɵɵnextContext(4).$implicit;\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.prefecthSection(section_r9));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(4).$implicit;\n    i0.ɵɵproperty(\"status\", section_r9.downloadStatus)(\"enabled\", true)(\"loading\", section_r9.isDownloading || section_r9.isCalculating)(\"canTrustDownload\", true);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_ion_badge_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 40);\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(4).$implicit;\n    i0.ɵɵattribute(\"aria-valuemax\", section_r9.total)(\"aria-valuenow\", section_r9.count)(\"aria-valuetext\", i0.ɵɵpipeBind2(1, 5, \"core.course.downloadsectionprogressdescription\", section_r9));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\" \", section_r9.count, \" / \", section_r9.total, \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 36);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_core_download_refresh_1_Template, 1, 4, \"core-download-refresh\", 37);\n    i0.ɵɵtemplate(2, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_ion_badge_2_Template, 3, 8, \"ion-badge\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r19 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !section_r9.isDownloading && section_r9.downloadStatus !== ctx_r19.statusDownloaded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r9.isDownloading && section_r9.count < section_r9.total);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    name: a0\n  };\n};\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 41);\n    i0.ɵɵlistener(\"click\", function AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_ion_button_2_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r31);\n      const section_r9 = i0.ɵɵnextContext(3).$implicit;\n      const ctx_r29 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r29.deleteForSection($event, section_r9));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 42);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind2(2, 1, \"addon.storagemanager.deletedatafrom\", i0.ɵɵpureFunction1(4, _c0, section_r9.name)));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 33);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_Template, 3, 2, \"div\", 34);\n    i0.ɵɵtemplate(2, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_ion_button_2_Template, 3, 6, \"ion-button\", 35);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.downloadEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !section_r9.calculatingSize && section_r9.totalSize > 0);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_mod_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-mod-icon\", 50);\n  }\n  if (rf & 2) {\n    const module_r35 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"modicon\", module_r35.handlerData.icon)(\"modname\", module_r35.modname)(\"componentId\", module_r35.instance)(\"fallbackTranslation\", module_r35.modplural);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 30);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.downloaded\"));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 28);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_ion_icon_1_Template, 2, 3, \"ion-icon\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"coreBytesToSize\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const module_r35 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r38 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"color\", module_r35.downloadStatus === ctx_r38.statusDownloaded ? \"success\" : \"light\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", module_r35.downloadStatus === ctx_r38.statusDownloaded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 3, module_r35.totalSize), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.calculating\"), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_download_refresh_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r48 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-download-refresh\", 51);\n    i0.ɵɵlistener(\"action\", function AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_download_refresh_8_Template_core_download_refresh_action_0_listener() {\n      i0.ɵɵrestoreView(_r48);\n      const module_r35 = i0.ɵɵnextContext(2).$implicit;\n      const ctx_r46 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r46.prefetchModule(module_r35));\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const module_r35 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"status\", module_r35.downloadStatus)(\"enabled\", true)(\"canTrustDownload\", true)(\"loading\", module_r35.spinner || module_r35.handlerData.spinner);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r52 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 52);\n    i0.ɵɵlistener(\"click\", function AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_button_9_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r52);\n      const module_r35 = i0.ɵɵnextContext(2).$implicit;\n      const section_r9 = i0.ɵɵnextContext(3).$implicit;\n      const ctx_r50 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r50.deleteForModule($event, module_r35, section_r9));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 42);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const module_r35 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind2(2, 1, \"addon.storagemanager.deletedatafrom\", i0.ɵɵpureFunction1(4, _c0, module_r35.name)));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 53);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.notdownloadable\"), \" \");\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 44);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_mod_icon_1_Template, 1, 4, \"core-mod-icon\", 45);\n    i0.ɵɵelementStart(2, \"ion-label\", 15)(3, \"p\");\n    i0.ɵɵelement(4, \"core-format-text\", 46);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_Template, 4, 5, \"ion-badge\", 24);\n    i0.ɵɵtemplate(6, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_6_Template, 3, 3, \"ion-badge\", 25);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 33);\n    i0.ɵɵtemplate(8, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_download_refresh_8_Template, 1, 4, \"core-download-refresh\", 47);\n    i0.ɵɵtemplate(9, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_button_9_Template, 3, 6, \"ion-button\", 48);\n    i0.ɵɵtemplate(10, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_p_10_Template, 3, 3, \"p\", 49);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const module_r35 = i0.ɵɵnextContext().$implicit;\n    const ctx_r36 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", module_r35.handlerData.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassMapInterpolate1(\"item-heading \", module_r35.handlerData.class, \" addon-storagemanager-module-size\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", module_r35.handlerData.title)(\"courseId\", module_r35.course)(\"contextInstanceId\", module_r35.id)(\"adaptImg\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !module_r35.calculatingSize && module_r35.totalSize > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", module_r35.calculatingSize);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r36.downloadEnabled && (module_r35.handlerData == null ? null : module_r35.handlerData.showDownloadButton) && module_r35.downloadStatus !== ctx_r36.statusDownloaded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !module_r35.calculatingSize && module_r35.totalSize > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r36.downloadEnabled || !(module_r35.handlerData == null ? null : module_r35.handlerData.showDownloadButton));\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_Template, 11, 13, \"ion-item\", 43);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const module_r35 = ctx.$implicit;\n    const ctx_r34 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r34.downloadEnabled || !module_r35.calculatingSize && module_r35.totalSize > 0);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_Template, 2, 1, \"ng-container\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", section_r9.modules);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r59 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\", 21)(1, \"ion-card-header\")(2, \"ion-item\", 22);\n    i0.ɵɵlistener(\"click\", function AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_Template_ion_item_click_2_listener($event) {\n      i0.ɵɵrestoreView(_r59);\n      const section_r9 = i0.ɵɵnextContext().$implicit;\n      const ctx_r57 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r57.toggleExpand($event, section_r9));\n    });\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelement(4, \"ion-icon\", 23);\n    i0.ɵɵelementStart(5, \"ion-label\")(6, \"p\", 8);\n    i0.ɵɵelement(7, \"core-format-text\", 6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_Template, 4, 5, \"ion-badge\", 24);\n    i0.ɵɵtemplate(9, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_9_Template, 3, 3, \"ion-badge\", 25);\n    i0.ɵɵtemplate(10, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_p_10_Template, 2, 1, \"p\", 10);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_Template, 3, 2, \"div\", 26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"ion-card-content\", 27);\n    i0.ɵɵtemplate(13, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_Template, 2, 1, \"ng-container\", 10);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const section_r9 = i0.ɵɵnextContext().$implicit;\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"core-course-storage-section-expanded\", section_r9.expanded);\n    i0.ɵɵproperty(\"lines\", section_r9.expanded ? \"full\" : \"none\")(\"detail\", false);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(3, 18, section_r9.expanded ? \"core.collapse\" : \"core.expand\"))(\"aria-expanded\", section_r9.expanded)(\"aria-controls\", \"core-course-storage-section-\" + section_r9.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"expandable-status-icon-expanded\", section_r9.expanded);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", section_r9.name)(\"contextInstanceId\", section_r9.course)(\"adaptImg\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !section_r9.calculatingSize && section_r9.totalSize > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r9.calculatingSize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.downloadEnabled && section_r9.isDownloading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !section_r9.calculatingSize && section_r9.totalSize > 0 || ctx_r10.downloadEnabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"core-course-storage-section-\", section_r9.id, \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r9.expanded);\n  }\n}\nfunction AddonStorageManagerCourseStoragePage_ng_container_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_Template, 14, 20, \"ion-card\", 20);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const section_r9 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", section_r9.modules.length > 0);\n  }\n}\n/**\n * Page that displays the amount of file storage used by each activity on the course, and allows\n * the user to prefecth and delete this data.\n */\nexport class AddonStorageManagerCourseStoragePage {\n  constructor(elementRef, changeDetectorRef) {\n    this.elementRef = elementRef;\n    this.changeDetectorRef = changeDetectorRef;\n    this.title = '';\n    this.loaded = false;\n    this.sections = [];\n    this.totalSize = 0;\n    this.calculatingSize = true;\n    this.downloadEnabled = false;\n    this.downloadCourseEnabled = false;\n    this.prefetchCourseData = {\n      icon: CoreConstants.ICON_LOADING,\n      statusTranslatable: 'core.course.downloadcourse',\n      status: '',\n      loading: true\n    };\n    this.statusDownloaded = CoreConstants.DOWNLOADED;\n    this.isDestroyed = false;\n    this.isGuest = false;\n    // Refresh the enabled flags if site is updated.\n    this.siteUpdatedObserver = CoreEvents.on(CoreEvents.SITE_UPDATED, () => {\n      this.downloadCourseEnabled = !CoreCourses.isDownloadCourseDisabledInSite();\n      this.downloadEnabled = !CoreSites.getRequiredCurrentSite().isOfflineDisabled();\n      this.initCoursePrefetch();\n      this.initModulePrefetch();\n      this.changeDetectorRef.markForCheck();\n    }, CoreSites.getCurrentSiteId());\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _CoreNavigator$getRou;\n      try {\n        _this.courseId = CoreNavigator.getRequiredRouteParam('courseId');\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n        CoreNavigator.back();\n        return;\n      }\n      _this.title = CoreNavigator.getRouteParam('title') || '';\n      if (!_this.title && _this.courseId == CoreSites.getCurrentSiteHomeId()) {\n        _this.title = Translate.instant('core.sitehome.sitehome');\n      }\n      _this.isGuest = (_CoreNavigator$getRou = CoreNavigator.getRouteBooleanParam('isGuest')) !== null && _CoreNavigator$getRou !== void 0 ? _CoreNavigator$getRou : (yield CoreCourseHelper.courseUsesGuestAccessInfo(_this.courseId)).guestAccess;\n      _this.initialSectionId = CoreNavigator.getRouteNumberParam('sectionId');\n      _this.downloadCourseEnabled = !CoreCourses.isDownloadCourseDisabledInSite();\n      _this.downloadEnabled = !CoreSites.getRequiredCurrentSite().isOfflineDisabled();\n      const sections = (yield CoreCourse.getSections(_this.courseId, false, true)).filter(section => !CoreCourseHelper.isSectionStealth(section));\n      _this.sections = (yield CoreCourseHelper.addHandlerDataForModules(sections, _this.courseId)).sections.map(section => _objectSpread(_objectSpread({}, section), {}, {\n        totalSize: 0,\n        calculatingSize: true,\n        expanded: section.id === _this.initialSectionId,\n        modules: section.modules.map(module => _objectSpread(_objectSpread({}, module), {}, {\n          calculatingSize: true\n        }))\n      }));\n      _this.loaded = true;\n      CoreDom.scrollToElement(_this.elementRef.nativeElement, '.core-course-storage-section-expanded', {\n        addYAxis: -10\n      });\n      yield Promise.all([_this.initSizes(), _this.initCoursePrefetch(), _this.initModulePrefetch()]);\n      _this.changeDetectorRef.markForCheck();\n    })();\n  }\n  /**\n   * Init course prefetch information.\n   *\n   * @returns Promise resolved when done.\n   */\n  initCoursePrefetch() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.downloadCourseEnabled || _this2.courseStatusObserver) {\n        return;\n      }\n      // Listen for changes in course status.\n      _this2.courseStatusObserver = CoreEvents.on(CoreEvents.COURSE_STATUS_CHANGED, data => {\n        if (data.courseId == _this2.courseId || data.courseId == CoreCourseProvider.ALL_COURSES_CLEARED) {\n          _this2.updateCourseStatus(data.status);\n        }\n      }, CoreSites.getCurrentSiteId());\n      // Determine the course prefetch status.\n      yield _this2.determineCoursePrefetchIcon();\n      if (_this2.prefetchCourseData.icon != CoreConstants.ICON_LOADING) {\n        return;\n      }\n      // Course is being downloaded. Get the download promise.\n      const promise = CoreCourseHelper.getCourseDownloadPromise(_this2.courseId);\n      if (promise) {\n        // There is a download promise. Show an error if it fails.\n        promise.catch(error => {\n          if (!_this2.isDestroyed) {\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n          }\n        });\n      } else {\n        // No download, this probably means that the app was closed while downloading. Set previous status.\n        const status = yield CoreCourse.setCoursePreviousStatus(_this2.courseId);\n        _this2.updateCourseStatus(status);\n      }\n    })();\n  }\n  /**\n   * Init module prefetch information.\n   *\n   * @returns Promise resolved when done.\n   */\n  initModulePrefetch() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.downloadEnabled || _this3.sectionStatusObserver) {\n        return;\n      }\n      // Listen for section status changes.\n      _this3.sectionStatusObserver = CoreEvents.on(CoreEvents.SECTION_STATUS_CHANGED, /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (data) {\n          if (!_this3.downloadEnabled || !_this3.sections.length || !data.sectionId || data.courseId != _this3.courseId) {\n            return;\n          }\n          // Check if the affected section is being downloaded.\n          // If so, we don't update section status because it'll already be updated when the download finishes.\n          const downloadId = CoreCourseHelper.getSectionDownloadId({\n            id: data.sectionId\n          });\n          if (CoreCourseModulePrefetchDelegate.isBeingDownloaded(downloadId)) {\n            return;\n          }\n          // Get the affected section.\n          const section = _this3.sections.find(section => section.id == data.sectionId);\n          if (!section) {\n            return;\n          }\n          // Recalculate the status.\n          yield CoreCourseHelper.calculateSectionStatus(section, _this3.courseId, false);\n          if (section.isDownloading && !CoreCourseModulePrefetchDelegate.isBeingDownloaded(downloadId)) {\n            // All the modules are now downloading, set a download all promise.\n            _this3.prefecthSection(section);\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }(), CoreSites.getCurrentSiteId());\n      // The download status of a section might have been changed from within a module page.\n      CoreCourseHelper.calculateSectionsStatus(_this3.sections, _this3.courseId, false, false);\n      _this3.sections.forEach(section => {\n        section.modules.forEach(module => {\n          var _module$handlerData;\n          if ((_module$handlerData = module.handlerData) !== null && _module$handlerData !== void 0 && _module$handlerData.showDownloadButton) {\n            module.spinner = true;\n            // Listen for changes on this module status, even if download isn't enabled.\n            module.prefetchHandler = CoreCourseModulePrefetchDelegate.getPrefetchHandlerFor(module.modname);\n            _this3.calculateModuleStatus(module);\n          }\n        });\n      });\n      _this3.moduleStatusObserver = CoreEvents.on(CoreEvents.PACKAGE_STATUS_CHANGED, data => {\n        let module;\n        _this3.sections.some(section => {\n          module = section.modules.find(module => {\n            var _module$prefetchHandl;\n            return module.id == data.componentId && module.prefetchHandler && data.component == ((_module$prefetchHandl = module.prefetchHandler) === null || _module$prefetchHandl === void 0 ? void 0 : _module$prefetchHandl.component);\n          });\n          return !!module;\n        });\n        if (!module) {\n          return;\n        }\n        // Call determineModuleStatus to get the right status to display.\n        const status = CoreCourseModulePrefetchDelegate.determineModuleStatus(module, data.status);\n        // Update the status.\n        _this3.updateModuleStatus(module, status);\n      }, CoreSites.getCurrentSiteId());\n    })();\n  }\n  /**\n   * Init section, course and modules sizes.\n   */\n  initSizes() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      yield Promise.all(_this4.sections.map( /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator(function* (section) {\n          yield Promise.all(section.modules.map( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(function* (module) {\n              // Note: This function only gets the size for modules which are downloadable.\n              // For other modules it always returns 0, even if they have downloaded some files.\n              // However there is no 100% reliable way to actually track the files in this case.\n              // You can maybe guess it based on the component and componentid.\n              // But these aren't necessarily consistent, for example mod_frog vs mmaModFrog.\n              // There is nothing enforcing correct values.\n              // Most modules which have large files are downloadable, so I think this is sufficient.\n              const size = yield CoreCourseModulePrefetchDelegate.getModuleStoredSize(module, _this4.courseId);\n              // There are some cases where the return from this is not a valid number.\n              if (!isNaN(size)) {\n                module.totalSize = Number(size);\n                section.totalSize += size;\n                _this4.totalSize += size;\n              }\n              module.calculatingSize = false;\n            });\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }()));\n          section.calculatingSize = false;\n        });\n        return function (_x2) {\n          return _ref2.apply(this, arguments);\n        };\n      }()));\n      _this4.calculatingSize = false;\n      // Mark course as not downloaded if course size is 0.\n      if (_this4.totalSize == 0) {\n        _this4.markCourseAsNotDownloaded();\n      }\n    })();\n  }\n  /**\n   * Update the sizes of some modules.\n   *\n   * @param modules Modules.\n   * @param section Section the modules belong to.\n   * @returns Promise resolved when done.\n   */\n  updateModulesSizes(modules, section) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      _this5.calculatingSize = true;\n      yield Promise.all(modules.map( /*#__PURE__*/function () {\n        var _ref4 = _asyncToGenerator(function* (module) {\n          if (module.calculatingSize) {\n            return;\n          }\n          module.calculatingSize = true;\n          _this5.changeDetectorRef.markForCheck();\n          if (!section) {\n            section = _this5.sections.find(section => section.modules.some(mod => mod.id === module.id));\n            if (section) {\n              section.calculatingSize = true;\n              _this5.changeDetectorRef.markForCheck();\n            }\n          }\n          try {\n            var _module$totalSize;\n            const size = yield CoreCourseModulePrefetchDelegate.getModuleStoredSize(module, _this5.courseId);\n            const diff = (isNaN(size) ? 0 : size) - ((_module$totalSize = module.totalSize) !== null && _module$totalSize !== void 0 ? _module$totalSize : 0);\n            module.totalSize = Number(size);\n            _this5.totalSize += diff;\n            if (section) {\n              section.totalSize += diff;\n            }\n          } catch (_unused) {\n            // Ignore errors, it shouldn't happen.\n          } finally {\n            module.calculatingSize = false;\n            _this5.changeDetectorRef.markForCheck();\n          }\n        });\n        return function (_x4) {\n          return _ref4.apply(this, arguments);\n        };\n      }()));\n      _this5.calculatingSize = false;\n      if (section) {\n        section.calculatingSize = false;\n      }\n      _this5.changeDetectorRef.markForCheck();\n    })();\n  }\n  /**\n   * The user has requested a delete for the whole course data.\n   *\n   * (This works by deleting data for each module on the course that has data.)\n   *\n   * @param event Event object.\n   */\n  deleteForCourse(event) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      event.stopPropagation();\n      event.preventDefault();\n      try {\n        yield CoreDomUtils.showDeleteConfirm('addon.storagemanager.confirmdeletedatafrom', {\n          name: _this6.title\n        });\n      } catch (error) {\n        if (!CoreDomUtils.isCanceledError(error)) {\n          throw error;\n        }\n        return;\n      }\n      const modules = [];\n      _this6.sections.forEach(section => {\n        section.modules.forEach(module => {\n          if (module.totalSize && module.totalSize > 0) {\n            modules.push(module);\n          }\n        });\n      });\n      _this6.deleteModules(modules);\n    })();\n  }\n  /**\n   * The user has requested a delete for a section's data.\n   *\n   * (This works by deleting data for each module in the section that has data.)\n   *\n   * @param event Event object.\n   * @param section Section object with information about section and modules\n   */\n  deleteForSection(event, section) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      event.stopPropagation();\n      event.preventDefault();\n      try {\n        yield CoreDomUtils.showDeleteConfirm('addon.storagemanager.confirmdeletedatafrom', {\n          name: section.name\n        });\n      } catch (error) {\n        if (!CoreDomUtils.isCanceledError(error)) {\n          throw error;\n        }\n        return;\n      }\n      const modules = [];\n      section.modules.forEach(module => {\n        if (module.totalSize && module.totalSize > 0) {\n          modules.push(module);\n        }\n      });\n      _this7.deleteModules(modules, section);\n    })();\n  }\n  /**\n   * The user has requested a delete for a module's data\n   *\n   * @param event Event object.\n   * @param module Module details\n   * @param section Section the module belongs to.\n   */\n  deleteForModule(event, module, section) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      event.stopPropagation();\n      event.preventDefault();\n      if (module.totalSize === 0) {\n        return;\n      }\n      try {\n        yield CoreDomUtils.showDeleteConfirm('addon.storagemanager.confirmdeletedatafrom', {\n          name: module.name\n        });\n      } catch (error) {\n        if (!CoreDomUtils.isCanceledError(error)) {\n          throw error;\n        }\n        return;\n      }\n      _this8.deleteModules([module], section);\n    })();\n  }\n  /**\n   * Deletes the specified modules, showing the loading overlay while it happens.\n   *\n   * @param modules Modules to delete\n   * @param section Section the modules belong to.\n   * @returns Promise<void> Once deleting has finished\n   */\n  deleteModules(modules, section) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield CoreDomUtils.showModalLoading('core.deleting', true);\n      const promises = [];\n      modules.forEach(module => {\n        // Remove the files.\n        const promise = CoreCourseHelper.removeModuleStoredData(module, _this9.courseId).then(() => {\n          const moduleSize = module.totalSize || 0;\n          // When the files and cache are removed, update the size.\n          if (section) {\n            section.totalSize -= moduleSize;\n          }\n          _this9.totalSize -= moduleSize;\n          module.totalSize = 0;\n          return;\n        });\n        promises.push(promise);\n      });\n      try {\n        yield Promise.all(promises);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, Translate.instant('core.errordeletefile'));\n      } finally {\n        modal.dismiss();\n        yield _this9.updateModulesSizes(modules, section);\n        CoreCourseHelper.calculateSectionsStatus(_this9.sections, _this9.courseId, false, false);\n        // For delete all, reset all section sizes so icons are updated.\n        if (_this9.totalSize === 0) {\n          _this9.sections.map(section => section.totalSize = 0);\n        }\n        _this9.changeDetectorRef.markForCheck();\n      }\n    })();\n  }\n  /**\n   * Mark course as not downloaded.\n   */\n  markCourseAsNotDownloaded() {\n    // @TODO In order to correctly check the status of the course we should check all module statuses.\n    // We are currently marking as not downloaded if size is 0 but we should take into account that\n    // resources without files can be downloaded and cached.\n    CoreCourse.setCourseStatus(this.courseId, CoreConstants.NOT_DOWNLOADED);\n  }\n  /**\n   * Calculate the status of sections.\n   *\n   * @param refresh If refresh or not.\n   */\n  calculateSectionsStatus(refresh) {\n    if (!this.sections) {\n      return;\n    }\n    CoreUtils.ignoreErrors(CoreCourseHelper.calculateSectionsStatus(this.sections, this.courseId, refresh));\n  }\n  /**\n   * Confirm and prefetch a section. If the section is \"all sections\", prefetch all the sections.\n   *\n   * @param section Section to download.\n   */\n  prefecthSection(section) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      section.isCalculating = true;\n      _this10.changeDetectorRef.markForCheck();\n      try {\n        yield CoreCourseHelper.confirmDownloadSizeSection(_this10.courseId, section, _this10.sections);\n        try {\n          yield CoreCourseHelper.prefetchSection(section, _this10.courseId, _this10.sections);\n        } catch (error) {\n          if (!_this10.isDestroyed) {\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingsection', true);\n          }\n        } finally {\n          yield _this10.updateModulesSizes(section.modules, section);\n          _this10.changeDetectorRef.markForCheck();\n        }\n      } catch (error) {\n        // User cancelled or there was an error calculating the size.\n        if (!_this10.isDestroyed && error) {\n          CoreDomUtils.showErrorModal(error);\n          _this10.changeDetectorRef.markForCheck();\n          return;\n        }\n      } finally {\n        section.isCalculating = false;\n        _this10.changeDetectorRef.markForCheck();\n      }\n    })();\n  }\n  /**\n   * Download the module.\n   *\n   * @param module Module to prefetch.\n   * @param refresh Whether it's refreshing.\n   * @returns Promise resolved when done.\n   */\n  prefetchModule(module, refresh = false) {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (!module.prefetchHandler) {\n        return;\n      }\n      // Show spinner since this operation might take a while.\n      module.spinner = true;\n      try {\n        // Get download size to ask for confirm if it's high.\n        const size = yield module.prefetchHandler.getDownloadSize(module, module.course, true);\n        yield CoreCourseHelper.prefetchModule(module.prefetchHandler, module, size, module.course, refresh);\n        CoreCourseHelper.calculateSectionsStatus(_this11.sections, _this11.courseId, false, false);\n      } catch (error) {\n        if (!_this11.isDestroyed) {\n          CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n        }\n      } finally {\n        module.spinner = false;\n        yield _this11.updateModulesSizes([module]);\n      }\n    })();\n  }\n  /**\n   * Show download buttons according to module status.\n   *\n   * @param module Module to update.\n   * @param status Module status.\n   */\n  updateModuleStatus(module, status) {\n    var _module$handlerData2, _module$handlerData2$;\n    if (!status) {\n      return;\n    }\n    module.spinner = false;\n    module.downloadStatus = status;\n    (_module$handlerData2 = module.handlerData) === null || _module$handlerData2 === void 0 || (_module$handlerData2$ = _module$handlerData2.updateStatus) === null || _module$handlerData2$ === void 0 || _module$handlerData2$.call(_module$handlerData2, status);\n    this.changeDetectorRef.markForCheck();\n  }\n  /**\n   * Calculate and show module status.\n   *\n   * @param module Module to update.\n   * @returns Promise resolved when done.\n   */\n  calculateModuleStatus(module) {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      if (!module) {\n        return;\n      }\n      const status = yield CoreCourseModulePrefetchDelegate.getModuleStatus(module, _this12.courseId);\n      _this12.updateModuleStatus(module, status);\n    })();\n  }\n  /**\n   * Determines the prefetch icon of the course.\n   *\n   * @returns Promise resolved when done.\n   */\n  determineCoursePrefetchIcon() {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      _this13.prefetchCourseData = yield CoreCourseHelper.getCourseStatusIconAndTitle(_this13.courseId);\n    })();\n  }\n  /**\n   * Update the course status icon and title.\n   *\n   * @param status Status to show.\n   */\n  updateCourseStatus(status) {\n    const statusData = CoreCourseHelper.getCoursePrefetchStatusInfo(status);\n    this.prefetchCourseData.status = statusData.status;\n    this.prefetchCourseData.icon = statusData.icon;\n    this.prefetchCourseData.statusTranslatable = statusData.statusTranslatable;\n    this.prefetchCourseData.loading = statusData.loading;\n    this.changeDetectorRef.markForCheck();\n  }\n  getCourse(courseId) {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Check if user is enrolled. If enrolled, no guest access.\n        return yield CoreCourses.getUserCourse(courseId, true);\n      } catch (_unused2) {\n        // Ignore errors.\n      }\n      try {\n        // The user is not enrolled in the course. Use getCourses to see if it's an admin/manager and can see the course.\n        return yield CoreCourses.getCourse(courseId);\n      } catch (_unused3) {\n        // Ignore errors.\n      }\n      return yield CoreCourses.getCourseByField('id', _this14.courseId);\n    })();\n  }\n  /**\n   * Prefetch the whole course.\n   *\n   * @param event Event object.\n   */\n  prefetchCourse(event) {\n    var _this15 = this;\n    return _asyncToGenerator(function* () {\n      event.stopPropagation();\n      event.preventDefault();\n      const course = yield _this15.getCourse(_this15.courseId);\n      if (!course) {\n        CoreDomUtils.showErrorModal('core.course.errordownloadingcourse', true);\n        return;\n      }\n      try {\n        _this15.changeDetectorRef.markForCheck();\n        yield CoreCourseHelper.confirmAndPrefetchCourse(_this15.prefetchCourseData, course, {\n          sections: _this15.sections,\n          isGuest: _this15.isGuest\n        });\n        yield Promise.all(_this15.sections.map(section => _this15.updateModulesSizes(section.modules, section)));\n        _this15.changeDetectorRef.markForCheck();\n      } catch (error) {\n        if (_this15.isDestroyed) {\n          return;\n        }\n        CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n      }\n    })();\n  }\n  /**\n   * Toggle expand status.\n   *\n   * @param event Event object.\n   * @param section Section to expand / collapse.\n   */\n  toggleExpand(event, section) {\n    section.expanded = !section.expanded;\n    event.stopPropagation();\n    event.preventDefault();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$courseStatusObs, _this$sectionStatusOb, _this$moduleStatusObs, _this$siteUpdatedObse;\n    (_this$courseStatusObs = this.courseStatusObserver) === null || _this$courseStatusObs === void 0 || _this$courseStatusObs.off();\n    (_this$sectionStatusOb = this.sectionStatusObserver) === null || _this$sectionStatusOb === void 0 || _this$sectionStatusOb.off();\n    (_this$moduleStatusObs = this.moduleStatusObserver) === null || _this$moduleStatusObs === void 0 || _this$moduleStatusObs.off();\n    (_this$siteUpdatedObse = this.siteUpdatedObserver) === null || _this$siteUpdatedObse === void 0 || _this$siteUpdatedObse.off();\n    this.sections.forEach(section => {\n      section.modules.forEach(module => {\n        var _module$handlerData3, _module$handlerData3$;\n        (_module$handlerData3 = module.handlerData) === null || _module$handlerData3 === void 0 || (_module$handlerData3$ = _module$handlerData3.onDestroy) === null || _module$handlerData3$ === void 0 || _module$handlerData3$.call(_module$handlerData3);\n      });\n    });\n    this.isDestroyed = true;\n  }\n}\n_class = AddonStorageManagerCourseStoragePage;\n_class.ɵfac = function AddonStorageManagerCourseStoragePage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-storagemanager-course-storage\"]],\n  decls: 31,\n  vars: 28,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [1, \"limited-width\"], [3, \"hideUntil\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [1, \"wholecourse\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\", \"adaptImg\"], [1, \"size\", \"ion-text-wrap\", \"ion-no-padding\"], [1, \"item-heading\", \"ion-text-wrap\"], [\"color\", \"light\", \"slot\", \"end\"], [4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", \"class\", \"ion-no-margin\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"color\", \"danger\", 1, \"ion-no-margin\", \"ion-margin-top\", 3, \"disabled\", \"click\"], [\"name\", \"fas-trash\", \"slot\", \"start\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ion-text-wrap\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-no-margin\", 3, \"disabled\", \"click\"], [\"slot\", \"start\", 3, \"name\", 4, \"ngIf\"], [\"slot\", \"start\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"name\"], [\"class\", \"section\", 4, \"ngIf\"], [1, \"section\"], [\"button\", \"\", 3, \"lines\", \"detail\", \"click\"], [\"name\", \"fas-chevron-right\", \"flip-rtl\", \"\", \"slot\", \"start\", 1, \"expandable-status-icon\"], [3, \"color\", 4, \"ngIf\"], [\"color\", \"light\", 4, \"ngIf\"], [\"class\", \"storage-buttons\", \"slot\", \"end\", 4, \"ngIf\"], [3, \"id\"], [3, \"color\"], [\"name\", \"fam-cloud-done\", 4, \"ngIf\"], [\"name\", \"fam-cloud-done\"], [\"color\", \"light\"], [3, \"progress\"], [\"slot\", \"end\", 1, \"storage-buttons\"], [\"slot\", \"end\", \"class\", \"core-button-spinner\", 4, \"ngIf\"], [\"color\", \"danger\", \"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [\"slot\", \"end\", 1, \"core-button-spinner\"], [3, \"status\", \"enabled\", \"loading\", \"canTrustDownload\", \"action\", 4, \"ngIf\"], [\"class\", \"core-course-download-section-progress\", \"role\", \"progressbar\", 4, \"ngIf\"], [3, \"status\", \"enabled\", \"loading\", \"canTrustDownload\", \"action\"], [\"role\", \"progressbar\", 1, \"core-course-download-section-progress\"], [\"color\", \"danger\", \"fill\", \"clear\", 3, \"click\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\"], [\"class\", \"core-course-storage-activity\", 4, \"ngIf\"], [1, \"core-course-storage-activity\"], [\"slot\", \"start\", 3, \"modicon\", \"modname\", \"componentId\", \"fallbackTranslation\", 4, \"ngIf\"], [\"contextLevel\", \"module\", 3, \"text\", \"courseId\", \"contextInstanceId\", \"adaptImg\"], [3, \"status\", \"enabled\", \"canTrustDownload\", \"loading\", \"action\", 4, \"ngIf\"], [\"fill\", \"clear\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"sr-only\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"modicon\", \"modname\", \"componentId\", \"fallbackTranslation\"], [3, \"status\", \"enabled\", \"canTrustDownload\", \"loading\", \"action\"], [\"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [1, \"sr-only\"]],\n  template: function AddonStorageManagerCourseStoragePage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"ion-content\", 2)(10, \"core-loading\", 3);\n      i0.ɵɵtemplate(11, AddonStorageManagerCourseStoragePage_ion_item_11_Template, 5, 3, \"ion-item\", 4);\n      i0.ɵɵelementStart(12, \"ion-card\", 5)(13, \"ion-card-header\")(14, \"ion-card-title\");\n      i0.ɵɵelement(15, \"core-format-text\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(16, \"ion-item\", 7)(17, \"ion-label\")(18, \"p\", 8);\n      i0.ɵɵtext(19);\n      i0.ɵɵpipe(20, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(21, \"ion-badge\", 9);\n      i0.ɵɵtemplate(22, AddonStorageManagerCourseStoragePage_ng_container_22_Template, 3, 3, \"ng-container\", 10);\n      i0.ɵɵtemplate(23, AddonStorageManagerCourseStoragePage_ng_container_23_Template, 3, 3, \"ng-container\", 10);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(24, AddonStorageManagerCourseStoragePage_ion_button_24_Template, 5, 6, \"ion-button\", 11);\n      i0.ɵɵelementStart(25, \"ion-button\", 12);\n      i0.ɵɵlistener(\"click\", function AddonStorageManagerCourseStoragePage_Template_ion_button_click_25_listener($event) {\n        return ctx.deleteForCourse($event);\n      });\n      i0.ɵɵelement(26, \"ion-icon\", 13);\n      i0.ɵɵpipe(27, \"translate\");\n      i0.ɵɵtext(28);\n      i0.ɵɵpipe(29, \"translate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(30, AddonStorageManagerCourseStoragePage_ng_container_30_Template, 2, 1, \"ng-container\", 14);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 15, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 17, \"addon.storagemanager.coursedownloads\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.downloadCourseEnabled);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"text\", ctx.title)(\"contextInstanceId\", ctx.courseId)(\"adaptImg\", false);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(20, 19, \"addon.storagemanager.totaldownloads\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", !ctx.calculatingSize);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.calculatingSize);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.downloadCourseEnabled);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.calculatingSize || ctx.totalSize <= 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind2(27, 21, \"addon.storagemanager.deletedatafrom\", i0.ɵɵpureFunction1(26, _c0, ctx.title)));\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(29, 24, \"addon.storagemanager.deleteall\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.sections);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreDownloadRefreshComponent, i3.CoreLoadingComponent, i4.CoreModIconComponent, i5.CoreProgressBarComponent, i6.CoreFaIconDirective, i7.CoreFormatTextDirective, i8.CoreContentDirective, i9.CoreUpdateNonReactiveAttributesDirective, i10.IonBadge, i10.IonButton, i10.IonButtons, i10.IonCard, i10.IonCardContent, i10.IonCardHeader, i10.IonCardTitle, i10.IonContent, i10.IonHeader, i10.IonIcon, i10.IonItem, i10.IonLabel, i10.IonSpinner, i10.IonTitle, i10.IonToolbar, i10.IonBackButton, i11.CoreBytesToSizePipe, i12.TranslatePipe],\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%] {\\n  --course-storage-max-activity-height: 120px;\\n}\\n[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-item.size[_ngcontent-%COMP%] {\\n  --inner-padding-end: 0px;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%] {\\n  padding: 0;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%] {\\n  padding: 0;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .core-course-storage-activity[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n  position: relative;\\n  max-height: var(--course-storage-max-activity-height);\\n  overflow: hidden;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .core-course-storage-activity[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]     * {\\n  pointer-events: none !important;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]   .core-course-storage-activity[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before {\\n  content: \\\"\\\";\\n  height: var(--course-storage-max-activity-height);\\n  position: absolute;\\n  left: 0;\\n  right: 0;\\n  top: 0;\\n  background: linear-gradient(to bottom, rgba(var(--background-gradient-rgb), 0) calc(100% - 30px), rgba(var(--background-gradient-rgb), 1) calc(100% - 20px));\\n  z-index: 6;\\n  pointer-events: none;\\n}\\n[_nghost-%COMP%]   ion-card.section[_ngcontent-%COMP%]   .item-heading[_ngcontent-%COMP%] {\\n  font-weight: bold;\\n  font-size: 1.2rem;\\n}\\n\\nion-badge[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n}\\nion-badge[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  -webkit-margin-end: 8px;\\n  margin-inline-end: 8px;\\n}\\n\\nion-item[_ngcontent-%COMP%]   core-mod-icon[_ngcontent-%COMP%] {\\n  --size: 18px;\\n  --padding: 9px;\\n  --margin-vertical: 8px;\\n  --margin-end: 8px;\\n}\\n\\n.storage-buttons[_ngcontent-%COMP%] {\\n  display: flex;\\n  align-items: center;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvYWRkb25zL3N0b3JhZ2VtYW5hZ2VyL3BhZ2VzL2NvdXJzZS1zdG9yYWdlL2NvdXJzZS1zdG9yYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7Ozs7RUFBQTtBQ0VBOzs7O0VBQUE7QUE0R0E7O0VBQUE7QUM5R0E7Ozs7RUFBQTtBQ0FBOzs7O0VBQUE7QUErREE7Ozs7RUFBQTtBQzdEQTtFQUNJLDJDQUFBO0FBb0RKO0FBbERJO0VBQ0ksd0JBQUE7QUFvRFI7QUFoRFE7RUFDSSxVQUFBO0FBa0RaO0FBaERRO0VBQ0ksVUFBQTtBQWtEWjtBQS9DZ0I7RUFDSSxrQkFBQTtFQUNBLHFEQUFBO0VBQ0EsZ0JBQUE7QUFpRHBCO0FBaERvQjtFQUNJLCtCQUFBO0FBa0R4QjtBQS9Db0I7RUFDSSxXQUFBO0VBQ0EsaURBQUE7RUFDQSxrQkFBQTtFTHlWbEIsT0t4VmdEO0VMeVZoRCxRS3pWdUM7RUxrWTNDLE1LbFl3QztFQUNsQiw0SkFBQTtFQUNBLFVBQUE7RUFDQSxvQkFBQTtBQW1EeEI7QUE5Q1E7RUFDSSxpQkFBQTtFQUNBLGlCQUFBO0FBZ0RaOztBQTNDQTtFQUNJLGVBQUE7QUE4Q0o7QUE3Q0k7RUx5UUEsdUJLeFFxQztFTHlRckMsc0JLelFxQztBQWdEekM7O0FBNUNBO0VBQ0ksWUFBQTtFQUNBLGNBQUE7RUFDQSxzQkFBQTtFQUNBLGlCQUFBO0FBK0NKOztBQTVDQTtFQUNJLGFBQUE7RUFDQSxtQkFBQTtBQStDSiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXBwIEdsb2JhbCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSB0aGUgZGlmZmVyZW50IGZpbGVzIHlvdSBzaG91bGQgaW1wb3J0IHRvIHVzZSBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiRmb250LXBhdGg6IFwiLi4vYXNzZXRzL2ZvbnRzXCI7XG4kYXNzZXRzLXBhdGg6IFwiLi4vYXNzZXRzXCI7XG5cbkBpbXBvcnQgXCIuL2hlbHBlcnMvaGVscGVycy5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLmN1c3RvbS5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLnZhcmlhYmxlcy5zY3NzXCI7XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIHN0cmluZyBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5zdHJpbmcuc2Nzc1xuICovXG5cblxuLy8gU3RyaW5nIFV0aWxpdHkgRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBTdHJpbmcgUmVwbGFjZSBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1yZXBsYWNlKCRzdHJpbmcsICRzZWFyY2gsICRyZXBsYWNlOiBcIlwiKSB7XG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZWFyY2gpO1xuXG4gIEBpZiAkaW5kZXgge1xuICAgIEByZXR1cm4gc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpICsgJHJlcGxhY2UgKyBzdHItcmVwbGFjZShzdHItc2xpY2UoJHN0cmluZywgJGluZGV4ICsgc3RyLWxlbmd0aCgkc2VhcmNoKSksICRzZWFyY2gsICRyZXBsYWNlKTtcbiAgfVxuXG4gIEByZXR1cm4gJHN0cmluZztcbn1cblxuLy8gU3RyaW5nIFNwbGl0IEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbkBmdW5jdGlvbiBzdHItc3BsaXQoJHN0cmluZywgJHNlcGFyYXRvcikge1xuICAvLyBlbXB0eSBhcnJheS9saXN0XG4gICRzcGxpdC1hcnI6ICgpO1xuICAvLyBmaXJzdCBpbmRleCBvZiBzZXBhcmF0b3IgaW4gc3RyaW5nXG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZXBhcmF0b3IpO1xuICAvLyBsb29wIHRocm91Z2ggc3RyaW5nXG4gIEB3aGlsZSAkaW5kZXggIT0gbnVsbCB7XG4gICAgLy8gZ2V0IHRoZSBzdWJzdHJpbmcgZnJvbSB0aGUgZmlyc3QgY2hhcmFjdGVyIHRvIHRoZSBzZXBhcmF0b3JcbiAgICAkaXRlbTogc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpO1xuICAgIC8vIHB1c2ggaXRlbSB0byBhcnJheVxuICAgICRzcGxpdC1hcnI6IGFwcGVuZCgkc3BsaXQtYXJyLCAkaXRlbSk7XG4gICAgLy8gcmVtb3ZlIGl0ZW0gYW5kIHNlcGFyYXRvciBmcm9tIHN0cmluZ1xuICAgICRzdHJpbmc6IHN0ci1zbGljZSgkc3RyaW5nLCAkaW5kZXggKyAxKTtcbiAgICAvLyBmaW5kIG5ldyBpbmRleCBvZiBzZXBhcmF0b3JcbiAgICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VwYXJhdG9yKTtcbiAgfVxuICAvLyBhZGQgdGhlIHJlbWFpbmluZyBzdHJpbmcgdG8gbGlzdCAodGhlIGxhc3QgaXRlbSlcbiAgJHNwbGl0LWFycjogYXBwZW5kKCRzcGxpdC1hcnIsICRzdHJpbmcpO1xuXG4gIEByZXR1cm4gJHNwbGl0LWFycjtcbn1cblxuXG4vLyBTdHJpbmcgRXh0cmFjdCBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1leHRyYWN0KCRzdHJpbmcsICRzdGFydCwgJGVuZCkge1xuICAkc3RhcnQtaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc3RhcnQpO1xuXG4gIEBpZiAkc3RhcnQtaW5kZXgge1xuICAgICRwb3N0OiBzdHItc2xpY2UoJHN0cmluZywgJHN0YXJ0LWluZGV4ICsgc3RyLWxlbmd0aCgkc3RhcnQpKTtcbiAgICAkZW5kLWluZGV4OiBzdHItaW5kZXgoJHBvc3QsICRlbmQpO1xuXG4gICAgQGlmICRlbmQtaW5kZXgge1xuICAgICAgQHJldHVybiBzdHItc2xpY2UoJHBvc3QsIDEsICRlbmQtaW5kZXggLSAxKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuIG51bGw7XG59XG5cblxuLy8gU3RyaW5nIENvbnRhaW5zIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLWNvbnRhaW5zKCRzdHJpbmcsICRuZWVkbGUpIHtcbiAgQGlmICh0eXBlLW9mKCRzdHJpbmcpID09IHN0cmluZykge1xuICAgIEByZXR1cm4gc3RyLWluZGV4KCRzdHJpbmcsICRuZWVkbGUpICE9IG51bGw7XG4gIH1cblxuICBAcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIFVSTCBFbmNvZGUgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiB1cmwtZW5jb2RlKCR2YWwpIHtcbiAgJHNwYWNlczogc3RyLXJlcGxhY2UoJHZhbCwgXCIgXCIsIFwiJTIwXCIpO1xuICAkZW5jb2RlZDogc3RyLXJlcGxhY2UoJHNwYWNlcywgXCIjXCIsIFwiJTIzXCIpO1xuICBAcmV0dXJuICRlbmNvZGVkO1xufVxuXG5cbi8vIEFkZCBSb290IFNlbGVjdG9yXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQWRkcyBhIHJvb3Qgc2VsZWN0b3IgdXNpbmcgaG9zdCBiYXNlZCBvbiB0aGUgc2VsZWN0b3IgcGFzc2VkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gYWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsICRhZGRIb3N0U2VsZWN0b3IpIHtcbiAgJHNlbGVjdG9yczogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG5cbiAgJGxpc3Q6ICgpO1xuXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkc2VsZWN0b3JzIHtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgY29udGFpbnMgOmhvc3QoIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBhIGNsYXNzIG9uIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBuZWVkIHRvIGNoYW5nZSBob3cgd2UgdGFyZ2V0IGl0OlxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgIEBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0KFwiKSB7XG4gICAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgICAkc2hhZG93LWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzZWxlY3RvciwgXCI6aG9zdChcIiwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pOmhvc3QoXCIpO1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJHNoYWRvdy1lbGVtZW50LCBjb21tYSk7XG5cbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdChcIikge1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogJGVsZW1lbnQ7XG5cbiAgICAgICAgICAvLyBSZXBsYWNlIHRoZSA6aG9zdCggYW5kICkgc28gYWxsIHdlIGhhdmUgbGVmdCBpcyB0aGUgY2xhc3NcbiAgICAgICAgICAvLyBpbnNpZGUgb2YgaXQ6XG4gICAgICAgICAgLy8gOmhvc3QoLmZpeGVkKSAtPiAuZml4ZWRcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgXCIpXCIsIFwiXCIpO1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCBcIjpob3N0KFwiLCBcIlwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgY2xhc3MgYmFjayBpbnNpZGUgb2YgaG9zdCB3aXRoIHRoZSBydGwgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gLmZpeGVkIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCAkc2NvcGVkLWVsZW1lbnQsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KSN7JHNjb3BlZC1lbGVtZW50fVwiKTtcblxuICAgICAgICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRzY29wZWQtZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9IEBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgYmFjayBhbnkgc2VsZWN0b3JzIHRoYXQgZm9sbG93ZWQgdGhlIGhvc3QgYWZ0ZXIgdHJhbnNmb3JtaW5nIHRoZVxuICAgICAgICAgIC8vIGZpcnN0IHNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0KC5maXhlZCkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRlbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJG5ldy1lbGVtZW50LCBjb21tYSk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGNvbnRhaW5zIDpob3N0IHdpdGhvdXQgYSBwYXJhbnRoZXNlc1xuICAgIC8vIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBqdXN0IHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBjYW4gY2hhbmdlIGl0IHRvIGxvb2sgZm9yIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3RcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgLy8gLS0+IDpob3N0OmRpcihydGwpXG4gICAgfSBAZWxzZSBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0XCIpIHtcbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdFwiKSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgOmhvc3Qgd2l0aCB0aGUgYWRkSG9zdFNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0IC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgICAgICAgICR1cGRhdGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRlbGVtZW50LCBcIjpob3N0XCIsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KVwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgZmluYWwgc2VsZWN0b3IgYWZ0ZXIgYWxsIHRyYW5zZm9ybWF0aW9uczpcbiAgICAgICAgICAvLyA6aG9zdCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICR1cGRhdGVkLWVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfSBAZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGJhY2sgYW55IHNlbGVjdG9ycyB0aGF0IGZvbGxvd2VkIHRoZSBob3N0IGFmdGVyIHRyYW5zZm9ybWluZyB0aGVcbiAgICAgICAgICAvLyBmaXJzdCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCA6OnNsb3R0ZWQoaW9uLWljb24pIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRuZXctZWxlbWVudCwgY29tbWEpO1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBkb2VzIG5vdCBjb250YWluIGhvc3QgYXQgYWxsIGl0IGlzIGVpdGhlciBhIHNoYWRvd1xuICAgIC8vIG9yIG5vcm1hbCBlbGVtZW50IHNvIGFwcGVuZCBib3RoIHRoZSBhZGRIb3N0U2VsZWN0b3IgYW5kIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiaW9uLWNvbXBvbmVudFwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgaW9uLWNvbXBvbmVudFxuICAgIC8vIC0tPiBbZGlyPXJ0bF0gaW9uLWNvbXBvbmVudFxuICAgIH0gQGVsc2Uge1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgXCIjeyRhZGRIb3N0U2VsZWN0b3J9ICN7JHNlbGVjdG9yfVwiLCBjb21tYSk7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSkgI3skc2VsZWN0b3J9XCIsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuICRsaXN0O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBjb2xvciBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5jb2xvci5zY3NzXG4gKi9cblxuLy8gR2V0cyB0aGUgYWN0aXZlIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gYSB2YXJpYXRpb24uIEFscGhhIGlzIG9wdGlvbmFsLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV4YW1wbGUgdXNhZ2U6XG4vLyBjdXJyZW50LWNvbG9yKGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1iYXNlKVxuLy8gY3VycmVudC1jb2xvcihjb250cmFzdCwgMC4xKSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1jb250cmFzdC1yZ2IpLCAwLjEpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGN1cnJlbnQtY29sb3IoJHZhcmlhdGlvbiwgJGFscGhhOiBudWxsKSB7XG4gIEBpZiAkYWxwaGEgPT0gbnVsbCB7XG4gICAgQHJldHVybiB2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufSk7XG4gIH0gQGVsc2Uge1xuICAgIEByZXR1cm4gcmdiYSh2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufS1yZ2IpLCAjeyRhbHBoYX0pO1xuICB9XG59XG5cbi8vIEdldHMgdGhlIHNwZWNpZmljIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gdGhlIG5hbWUgYW5kIHZhcmlhdGlvbi4gQWxwaGEvcmdiIGFyZSBvcHRpb25hbC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gaW9uLWNvbG9yKHByaW1hcnksIGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LCAjMzg4MGZmKVxuLy8gaW9uLWNvbG9yKHNlY29uZGFyeSwgY29udHJhc3QpID0+IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnktY29udHJhc3QpXG4vLyBpb24tY29sb3IocHJpbWFyeSwgYmFzZSwgMC41KSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LXJnYiwgNTYsIDEyOCwgMjU1KSwgMC41KVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBpb24tY29sb3IoJG5hbWUsICR2YXJpYXRpb24sICRhbHBoYTogbnVsbCwgJHJnYjogbnVsbCkge1xuICAkdmFsdWVzOiBtYXAtZ2V0KCRjb2xvcnMsICRuYW1lKTtcbiAgJHZhbHVlOiBtYXAtZ2V0KCR2YWx1ZXMsICR2YXJpYXRpb24pO1xuICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9LSN7JHZhcmlhdGlvbn07XG5cbiAgQGlmICgkdmFyaWF0aW9uID09IGJhc2UpIHtcbiAgICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9O1xuICB9XG5cbiAgQGlmICgkYWxwaGEpIHtcbiAgICAkdmFsdWU6IGNvbG9yLXRvLXJnYi1saXN0KCR2YWx1ZSk7XG4gICAgQHJldHVybiByZ2JhKHZhcigjeyR2YXJpYWJsZX0tcmdiLCAkdmFsdWUpLCAkYWxwaGEpO1xuICB9XG4gIEBpZiAoJHJnYikge1xuICAgICR2YWx1ZTogY29sb3ItdG8tcmdiLWxpc3QoJHZhbHVlKTtcbiAgICAkdmFyaWFibGU6ICN7JHZhcmlhYmxlfS1yZ2I7XG4gIH1cblxuICBAcmV0dXJuIHZhcigjeyR2YXJpYWJsZX0sICR2YWx1ZSk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3Itc2hhZGUoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCMwMDAsICRjb2xvciwgMTIlKTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIHdoaXRlIHRvIGNyZWF0ZSBpdHMgdGludC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXRpbnQoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCNmZmYsICRjb2xvciwgMTAlKTtcbn1cblxuLy8gQ29udmVydHMgYSBjb2xvciB0byBhIGNvbW1hIHNlcGFyYXRlZCByZ2IuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGNvbG9yLXRvLXJnYi1saXN0KCRjb2xvcikge1xuICBAcmV0dXJuICN7cmVkKCRjb2xvcil9LCN7Z3JlZW4oJGNvbG9yKX0sI3tibHVlKCRjb2xvcil9O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBtaXhpbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLm1peGlucy5zY3NzXG4gKi9cblxuQG1peGluIGlucHV0LWNvdmVyKCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbigwLCBudWxsLCBudWxsLCAwKTtcbiAgQGluY2x1ZGUgbWFyZ2luKDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIGJvcmRlcjogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICBhcHBlYXJhbmNlOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuXG4gICY6Oi1tb3otZm9jdXMtaW5uZXIge1xuICAgIGJvcmRlcjogMDtcbiAgfVxufVxuXG5AbWl4aW4gdmlzdWFsbHktaGlkZGVuKCkge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuXG4gIGJvcmRlcjogMDtcbiAgb3V0bGluZTogMDtcbiAgY2xpcDogcmVjdCgwIDAgMCAwKTtcblxuICBvcGFjaXR5OiAwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbiAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5AbWl4aW4gdGV4dC1pbmhlcml0KCkge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiBpbmhlcml0O1xuICBmb250LXN0eWxlOiBpbmhlcml0O1xuICBmb250LXdlaWdodDogaW5oZXJpdDtcbiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7XG4gIHRleHQtZGVjb3JhdGlvbjogaW5oZXJpdDtcbiAgdGV4dC1pbmRlbnQ6IGluaGVyaXQ7XG4gIHRleHQtb3ZlcmZsb3c6IGluaGVyaXQ7XG4gIHRleHQtdHJhbnNmb3JtOiBpbmhlcml0O1xuICB0ZXh0LWFsaWduOiBpbmhlcml0O1xuICB3aGl0ZS1zcGFjZTogaW5oZXJpdDtcbiAgY29sb3I6IGluaGVyaXQ7XG59XG5cbkBtaXhpbiBidXR0b24tc3RhdGUoKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uKDAsIDAsIDAsIDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICBjb250ZW50OiBcIlwiO1xuXG4gIG9wYWNpdHk6IDA7XG59XG5cbi8vIEZvbnQgc21vb3RoaW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gZm9udC1zbW9vdGhpbmcoKSB7XG4gIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xufVxuXG4vLyBHZXQgdGhlIGtleSBmcm9tIGEgbWFwIGJhc2VkIG9uIHRoZSBpbmRleFxuQGZ1bmN0aW9uIGluZGV4LXRvLWtleSgkbWFwLCAkaW5kZXgpIHtcbiAgJGtleXM6IG1hcC1rZXlzKCRtYXApO1xuXG4gIEByZXR1cm4gbnRoKCRrZXlzLCAkaW5kZXgpO1xufVxuXG5cbi8vIEJyZWFrcG9pbnQgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQnJlYWtwb2ludCB2aWV3cG9ydCBzaXplcyBhbmQgbWVkaWEgcXVlcmllcy5cbi8vXG4vLyBCcmVha3BvaW50cyBhcmUgZGVmaW5lZCBhcyBhIG1hcCBvZiAobmFtZTogbWluaW11bSB3aWR0aCksIG9yZGVyIGZyb20gc21hbGwgdG8gbGFyZ2U6XG4vL1xuLy8gICAgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KVxuLy9cbi8vIFRoZSBtYXAgZGVmaW5lZCBpbiB0aGUgYCRzY3JlZW4tYnJlYWtwb2ludHNgIGdsb2JhbCB2YXJpYWJsZSBpcyB1c2VkIGFzIHRoZSBgJGJyZWFrcG9pbnRzYCBhcmd1bWVudCBieSBkZWZhdWx0LlxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gTWluaW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbWluKHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgNTc2cHhcbkBmdW5jdGlvbiBicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbmFtZSk7XG5cbiAgQHJldHVybiBpZigkbmFtZSAhPSBpbmRleC10by1rZXkoJGJyZWFrcG9pbnRzLCAxKSwgJG1pbiwgbnVsbCk7XG59XG5cbi8vIFJldHVybnMgYSBibGFuayBzdHJpbmcgaWYgc21hbGxlc3QgYnJlYWtwb2ludCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG5hbWUgd2l0aCBhIGRhc2ggaW5mcm9udC5cbi8vIFVzZWZ1bCBmb3IgbWFraW5nIHJlc3BvbnNpdmUgdXRpbGl0aWVzLlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoeHMsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIlwiICAoUmV0dXJucyBhIGJsYW5rIHN0cmluZylcbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIi1zbVwiXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1pbmZpeCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gIEByZXR1cm4gaWYoYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50cykgPT0gbnVsbCwgXCJcIiwgXCItI3skbmFtZX1cIik7XG59XG5cbi8vIE1lZGlhIG9mIGF0IGxlYXN0IHRoZSBtaW5pbXVtIGJyZWFrcG9pbnQgd2lkdGguIE5vIHF1ZXJ5IGZvciB0aGUgc21hbGxlc3QgYnJlYWtwb2ludC5cbi8vIE1ha2VzIHRoZSBAY29udGVudCBhcHBseSB0byB0aGUgZ2l2ZW4gYnJlYWtwb2ludCBhbmQgd2lkZXIuXG5AbWl4aW4gbWVkaWEtYnJlYWtwb2ludC11cCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1pbiB7XG4gICAgQG1lZGlhIChtaW4td2lkdGg6ICRtaW4pIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuLy8gTmFtZSBvZiB0aGUgbmV4dCBicmVha3BvaW50LCBvciBudWxsIGZvciB0aGUgbGFzdCBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSlcbi8vICAgIG1kXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBtZFxuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtLCAkYnJlYWtwb2ludC1uYW1lczogKHhzIHNtIG1kIGxnIHhsKSlcbi8vICAgIG1kXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1uZXh0KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMsICRicmVha3BvaW50LW5hbWVzOiBtYXAta2V5cygkYnJlYWtwb2ludHMpKSB7XG4gICRuOiBpbmRleCgkYnJlYWtwb2ludC1uYW1lcywgJG5hbWUpO1xuICBAcmV0dXJuIGlmKCRuIDwgbGVuZ3RoKCRicmVha3BvaW50LW5hbWVzKSwgbnRoKCRicmVha3BvaW50LW5hbWVzLCAkbiArIDEpLCBudWxsKTtcbn1cblxuLy8gTWF4aW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy8gVGhlIG1heGltdW0gdmFsdWUgaXMgcmVkdWNlZCBieSAwLjAycHggdG8gd29yayBhcm91bmQgdGhlIGxpbWl0YXRpb25zIG9mXG4vLyBgbWluLWAgYW5kIGBtYXgtYCBwcmVmaXhlcyBhbmQgdmlld3BvcnRzIHdpdGggZnJhY3Rpb25hbCB3aWR0aHMuXG4vL1xuLy8gU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9tZWRpYXF1ZXJpZXMtNC8jbXEtbWluLW1heFxuLy8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlx0Ly8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlxuLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzgyNjFcdC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4MjYxXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1tYXgobWQsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICA3NjcuOThweFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1heDogbWFwLWdldCgkYnJlYWtwb2ludHMsICRuYW1lKTtcbiAgQHJldHVybiBpZigkbWF4IGFuZCAkbWF4ID4gMCwgJG1heCAtIC4wMiwgbnVsbCk7XG59XG5cbi8vIE1lZGlhIG9mIGF0IG1vc3QgdGhlIG1heGltdW0gYnJlYWtwb2ludCB3aWR0aC4gTm8gcXVlcnkgZm9yIHRoZSBsYXJnZXN0IGJyZWFrcG9pbnQuXG4vLyBNYWtlcyB0aGUgQGNvbnRlbnQgYXBwbHkgdG8gdGhlIGdpdmVuIGJyZWFrcG9pbnQgYW5kIG5hcnJvd2VyLlxuQG1peGluIG1lZGlhLWJyZWFrcG9pbnQtZG93bigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtYXg6IGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1heCB7XG4gICAgQG1lZGlhIChtYXgtd2lkdGg6ICRtYXgpIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuXG4vLyBUZXh0IERpcmVjdGlvbiAtIGx0ciAvIHJ0bFxuLy9cbi8vIENTUyBkZWZhdWx0cyB0byB1c2UgdGhlIGx0ciBjc3MsIGFuZCBhZGRzIFtkaXI9cnRsXSBzZWxlY3RvcnNcbi8vIHRvIG92ZXJyaWRlIGx0ciBkZWZhdWx0cy5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG11bHRpLWRpcigpIHtcbiAgQGNvbnRlbnQ7XG5cbiAgLy8gJHJvb3Q6ICN7Jn07XG4gIC8vIEBhdC1yb290IFtkaXJdIHtcbiAgLy8gICAjeyRyb290fSB7XG4gIC8vICAgICBAY29udGVudDtcbiAgLy8gICB9XG4gIC8vIH1cbn1cblxuQG1peGluIHJ0bCgpIHtcbiAgJHJvb3Q6ICN7Jn07XG5cbiAgJHJvb3RTcGxpdDogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG4gICRzZWxlY3RvcnM6ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiW2Rpcj1ydGxdXCIpfTtcbiAgJHNlbGVjdG9yc1NwbGl0OiBzdHItc3BsaXQoJHNlbGVjdG9ycywgXCIsXCIpO1xuXG4gICRob3N0Q29udGV4dFNlbGVjdG9yczogKCk7XG4gICRyZXN0U2VsZWN0b3JzOiAoKTtcbiAgJGRpclNlbGVjdG9yczogKCk7XG5cbiAgLy8gU2VsZWN0b3JzIG11c3QgYmUgc3BsaXQgaW50byBpbmRpdmlkdWFsIHNlbGVjdG9ycyBpbiBjYXNlIHRoZSBicm93c2VyXG4gIC8vIGRvZXNuJ3Qgc3VwcG9ydCBhIHNwZWNpZmljIHNlbGVjdG9yLlxuICAvLyBGb3IgZXhhbXBsZSwgRmlyZWZveCBhbmQgU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYC5cbiAgLy8gSWYgYW4gaW52YWxpZCBzZWxlY3RvciBpcyB1c2VkLCB0aGVuIHRoZSBlbnRpcmUgZ3JvdXAgb2Ygc2VsZWN0b3JzXG4gIC8vIHdpbGwgYmUgaWdub3JlZC5cbiAgLy8gQGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy0zLyNncm91cGluZ1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHNlbGVjdG9yc1NwbGl0IHtcbiAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgIEBpZiBzdHItaW5kZXgoJHNlbGVjdG9yLCBcIjpob3N0LWNvbnRleHRcIikge1xuICAgICAgJGhvc3RDb250ZXh0U2VsZWN0b3JzOiBhcHBlbmQoJGhvc3RDb250ZXh0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgICAkcmVzdFNlbGVjdG9yczogYXBwZW5kKCRyZXN0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgQ2hyb21lLlxuICBAaWYgbGVuZ3RoKCRob3N0Q29udGV4dFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRob3N0Q29udGV4dFNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IGFsbCBicm93c2Vycy5cbiAgQGlmIGxlbmd0aCgkcmVzdFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRyZXN0U2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBicm93c2VyIGNhbiBzdXBwb3J0IGA6ZGlyKClgLCB0aGVuIGFkZCB0aGUgYDpkaXIoKWAgc2VsZWN0b3JzLlxuICAvLyBAc3VwcG9ydHMgc2VsZWN0b3IoOmRpcihydGwpKSB7IC8vIEAgSU1QT1RBTlQgTk9URTogVGhpcyBoYXMgYmVlbiByZW1vdmVkIGJlY2F1c2Ugc2VsZWN0b3IgZnVuY3Rpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBjdXJyZW50IFNDU1NcbiAgLy8gQWRkaW5nIDpkaXIoKSBpbiBjYXNlIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCBhbmQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyBgOmhvc3QtY29udGV4dCgpYCBpcyBhZGRlZDpcbiAgLy8gLSB0aHJvdWdoIHRoZSBgYWRkLXJvb3Qtc2VsZWN0b3IoKWAgZnVuY3Rpb24uXG4gIC8vIC0gZmlyc3Qgc28gdGhhdCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYDpkaXIoKWAuXG4gIC8vIEZvciBleGFtcGxlLFxuICAvLyAtIEZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLCBidXQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyAtIFNhZmFyaSBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAsIGJ1dCBTYWZhcmkgMTYuNCsgc3VwcG9ydHMgYDpkaXIoKWBcbiAgLy8gQGxpbmsgaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvMTM5NjYvd2Via2l0LWZlYXR1cmVzLWluLXNhZmFyaS0xNi00L1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHJvb3RTcGxpdCB7XG4gICAgJGRpclNlbGVjdG9yOiBcIiN7JHNlbGVjdG9yfTpkaXIocnRsKVwiO1xuICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgJGRpclNlbGVjdG9yczogYXBwZW5kKCRkaXJTZWxlY3RvcnMsICRkaXJTZWxlY3RvciwgY29tbWEpO1xuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IEZpcmVmb3guXG4gIEBpZiBsZW5ndGgoJGRpclNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRkaXJTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuICAvL31cbn1cblxuQG1peGluIGx0cigpIHtcbiAgQGNvbnRlbnQ7XG59XG5cblxuLy8gU1ZHIEJhY2tncm91bmQgSW1hZ2UgTWl4aW5cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3ZnXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gc3ZnLWJhY2tncm91bmQtaW1hZ2UoJHN2ZywgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAkdXJsOiB1cmwtZW5jb2RlKCRzdmcpO1xuICAkdmlld0JveDogc3RyLXNwbGl0KHN0ci1leHRyYWN0KCRzdmcsIFwidmlld0JveD0nXCIsIFwiJ1wiKSwgXCIgXCIpO1xuXG4gIEBpZiAkZmxpcC1ydGwgIT0gdHJ1ZSBvciAkdmlld0JveCA9PSBudWxsIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyR1cmx9XCIpO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgJHRyYW5zZm9ybTogXCJ0cmFuc2Zvcm09J3RyYW5zbGF0ZSgje250aCgkdmlld0JveCwgMyl9LCAwKSBzY2FsZSgtMSwgMSknXCI7XG4gICAgJGZsaXBwZWQtdXJsOiAkc3ZnO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxwYXRoXCIsIFwiPHBhdGggI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8bGluZVwiLCBcIjxsaW5lICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPHBvbHlnb25cIiwgXCI8cG9seWdvbiAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogdXJsLWVuY29kZSgkZmxpcHBlZC11cmwpO1xuXG4gICAgQGluY2x1ZGUgbHRyICgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JHVybH1cIik7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JGZsaXBwZWQtdXJsfVwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHByb3BlcnR5IGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHktaG9yaXpvbnRhbCgkcHJvcCwgJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGlmICRzdGFydCA9PSAwIGFuZCAkZW5kID09IDAge1xuICAgICN7JHByb3B9LWxlZnQ6ICRzdGFydDtcbiAgICAjeyRwcm9wfS1yaWdodDogJGVuZDtcblxuICB9IEBlbHNlIHtcbiAgICAtd2Via2l0LSN7JHByb3B9LXN0YXJ0OiAkc3RhcnQ7XG4gICAgI3skcHJvcH0taW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgLXdlYmtpdC0jeyRwcm9wfS1lbmQ6ICRlbmQ7XG4gICAgI3skcHJvcH0taW5saW5lLWVuZDogJGVuZDtcbiAgfVxufVxuXG4vLyBBZGQgcHJvcGVydHkgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHByb3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7Ym9vbGVhbn0gJGNvbnRlbnQgaW5jbHVkZSBjb250ZW50IG9yIHVzZSBkZWZhdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHkoJHByb3AsICR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKCRwcm9wLCAkc3RhcnQsICRlbmQpO1xuICAjeyRwcm9wfS10b3A6ICR0b3A7XG4gICN7JHByb3B9LWJvdHRvbTogJGJvdHRvbTtcbn1cblxuLy8gQWRkIHBhZGRpbmcgaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChwYWRkaW5nLCAkc3RhcnQsICRlbmQpO1xufVxuXG4vLyBBZGQgcGFkZGluZyBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShwYWRkaW5nLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgbWFyZ2luIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChtYXJnaW4sICRzdGFydCwgJGVuZCk7XG59XG5cbi8vIEFkZCBtYXJnaW4gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShtYXJnaW4sICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBwb3NpdGlvbiBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0IC0gYW1vdW50IHRvIHBvc2l0aW9uIHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZCAtIGFtb3VudCB0byBsZWZ0OiAwOyBlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwb3NpdGlvbi1ob3Jpem9udGFsKCRzdGFydDogbnVsbCwgJGVuZDogbnVsbCkge1xuICBAaWYgJHN0YXJ0ID09ICRlbmQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGxlZnQ6ICRzdGFydDtcbiAgICAgIHJpZ2h0OiAkZW5kO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGF0LXJvb3Qge1xuICAgICAgQHN1cHBvcnRzIChpbnNldC1pbmxpbmUtc3RhcnQ6IDApIHtcbiAgICAgICAgJiB7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLWVuZDogJGVuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlctMzc2NlxuICAgIEBhdC1yb290IHtcbiAgICAgIEBzdXBwb3J0cyBub3QgKGluc2V0LWlubGluZS1zdGFydDogMCkge1xuICAgICAgICAmIHtcbiAgICAgICAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICAgICAgICBsZWZ0OiAkc3RhcnQ7XG4gICAgICAgICAgICByaWdodDogJGVuZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgICAgICAgbGVmdDogdW5zZXQ7XG4gICAgICAgICAgICByaWdodDogdW5zZXQ7XG5cbiAgICAgICAgICAgIGxlZnQ6ICRlbmQ7XG4gICAgICAgICAgICByaWdodDogJHN0YXJ0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgcG9zaXRpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcG9zaXRpb24oJHRvcDogbnVsbCwgJGVuZDogbnVsbCwgJGJvdHRvbTogbnVsbCwgJHN0YXJ0OiBudWxsKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kKTtcbiAgdG9wOiAkdG9wO1xuICBib3R0b206ICRib3R0b207XG59XG5cbi8vIEFkZCBib3JkZXIgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gYm9yZGVyKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShib3JkZXIsICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBib3JkZXIgcmFkaXVzIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Atc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wLWVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b20tZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbS1zdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIGJvcmRlci1yYWRpdXMoJHRvcC1zdGFydCwgJHRvcC1lbmQ6ICR0b3Atc3RhcnQsICRib3R0b20tZW5kOiAkdG9wLXN0YXJ0LCAkYm90dG9tLXN0YXJ0OiAkdG9wLWVuZCkge1xuICBAaWYgJHRvcC1zdGFydCA9PSAkdG9wLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLXN0YXJ0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBib3JkZXItcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAkdG9wLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICRib3R0b20tc3RhcnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1lbmQ7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLXN0YXJ0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJGJvdHRvbS1lbmQ7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBkaXJlY3Rpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRpciAtIERpcmVjdGlvbiBvbiBMVFJcbkBtaXhpbiBkaXJlY3Rpb24oJGRpcikge1xuICAkb3RoZXItZGlyOiBudWxsO1xuXG4gIEBpZiAkZGlyID09IGx0ciB7XG4gICAgJG90aGVyLWRpcjogcnRsO1xuICB9IEBlbHNlIHtcbiAgICAkb3RoZXItZGlyOiBsdHI7XG4gIH1cblxuICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgZGlyZWN0aW9uOiAkZGlyO1xuICB9XG4gIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICBkaXJlY3Rpb246ICRvdGhlci1kaXI7XG4gIH1cbn1cblxuLy8gQWRkIGZsb2F0IGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRzaWRlXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRlY29yYXRvciAtICFpbXBvcnRhbnRcbkBtaXhpbiBmbG9hdCgkc2lkZSwgJGRlY29yYXRvcjogbnVsbCkge1xuICBAaWYgJHNpZGUgPT0gc3RhcnQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiBsZWZ0ICRkZWNvcmF0b3I7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkc2lkZSA9PSBlbmQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBmbG9hdDogbGVmdCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgZmxvYXQ6ICRzaWRlICRkZWNvcmF0b3I7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBiYWNrZ3JvdW5kLXBvc2l0aW9uKCRob3Jpem9udGFsLCAkaG9yaXpvbnRhbC1hbW91bnQ6IG51bGwsICR2ZXJ0aWNhbDogbnVsbCwgJHZlcnRpY2FsLWFtb3VudDogbnVsbCkge1xuICBAaWYgJGhvcml6b250YWwgPT0gc3RhcnQgb3IgJGhvcml6b250YWwgPT0gZW5kIHtcbiAgICAkaG9yaXpvbnRhbC1sdHI6IG51bGw7XG4gICAgJGhvcml6b250YWwtcnRsOiBudWxsO1xuICAgIEBpZiAkaG9yaXpvbnRhbCA9PSBzdGFydCB7XG4gICAgICAkaG9yaXpvbnRhbC1sdHI6IGxlZnQ7XG4gICAgICAkaG9yaXpvbnRhbC1ydGw6IHJpZ2h0O1xuICAgIH0gQGVsc2Uge1xuICAgICAgJGhvcml6b250YWwtbHRyOiByaWdodDtcbiAgICAgICRob3Jpem9udGFsLXJ0bDogbGVmdDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1sdHIgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1ydGwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gdHJhbnNmb3JtLW9yaWdpbigkeC1heGlzLCAkeS1heGlzOiBudWxsKSB7XG4gIEBpZiAkeC1heGlzID09IHN0YXJ0IHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gZW5kIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gbGVmdCBvciAkeC1heGlzID09IHJpZ2h0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGNhbGMoMTAwJSAtICN7JHgtYXhpc30pICR5LWF4aXM7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCB0cmFuc2Zvcm0gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRyYW5zZm9ybXMgLSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiB0cmFuc2Zvcm1zXG5AbWl4aW4gdHJhbnNmb3JtKCR0cmFuc2Zvcm1zLi4uKSB7XG4gICRleHRyYTogbnVsbDtcblxuICAkeDogbnVsbDtcbiAgJGx0ci10cmFuc2xhdGU6IG51bGw7XG4gICRydGwtdHJhbnNsYXRlOiBudWxsO1xuXG4gIEBlYWNoICR0cmFuc2Zvcm0gaW4gJHRyYW5zZm9ybXMge1xuICAgIEBpZiAoc3RyLWluZGV4KCR0cmFuc2Zvcm0sIHRyYW5zbGF0ZTNkKSkge1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJ3RyYW5zbGF0ZTNkKCcpO1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJyknKTtcblxuICAgICAgJGNvb3JkaW5hdGVzOiBzdHItc3BsaXQoJHRyYW5zZm9ybSwgJywnKTtcblxuICAgICAgJHg6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAgICAgJHk6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgJHo6IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuXG4gICAgICAkbHRyLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoJHgsICR5LCAkeik7XG4gICAgICAkcnRsLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoY2FsYygtMSAqICN7JHh9KSwgJHksICR6KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIEBpZiAkZXh0cmEgPT0gbnVsbCB7XG4gICAgICAgICRleHRyYTogJHRyYW5zZm9ybTtcbiAgICAgIH0gQGVsc2Uge1xuICAgICAgICAkZXh0cmE6ICRleHRyYSAkdHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBpZiAkeCA9PSAnMCcgb3IgJHggPT0gbnVsbCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgdHJhbnNmb3JtOiAkbHRyLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRsdHItdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRydGwtdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgbWl4aW5zIGZvciBTQ1NTIGZyb20gZGlmZmVyZW50IGNvbXBvbmVudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvY29tcG9uZW50cy9ncmlkL2dyaWQubWl4aW5zLnNjc3NcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy9jb21wb25lbnRzL2l0ZW0vaXRlbS5taXhpbnMuc2Nzc1xuICovXG5cbi8vIFJlc3BvbnNpdmUgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbi8vIENyZWF0ZXMgYSBmaXhlZCB3aWR0aCBmb3IgdGhlIGdyaWQgYmFzZWQgb24gdGhlIHNjcmVlbiBzaXplXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG1ha2UtZ3JpZC13aWR0aHMoJHdpZHRoczogJGdyaWQtd2lkdGhzLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQsICR3aWR0aCBpbiAkd2lkdGhzIHtcbiAgICBAaW5jbHVkZSBtZWRpYS1icmVha3BvaW50LXVwKCRicmVha3BvaW50LCAkYnJlYWtwb2ludHMpIHtcbiAgICAgIHdpZHRoOiAkd2lkdGg7XG4gICAgfVxuICB9XG5cbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG5cbi8vIEFkZHMgcGFkZGluZyB0byB0aGUgZWxlbWVudCBiYXNlZCBvbiBicmVha3BvaW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtYWtlLWJyZWFrcG9pbnQtcGFkZGluZygkcGFkZGluZ3MpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQgaW4gbWFwLWtleXMoJHBhZGRpbmdzKSB7XG4gICAgQGluY2x1ZGUgbWVkaWEtYnJlYWtwb2ludC11cCgkYnJlYWtwb2ludCkge1xuICAgICAgJHBhZGRpbmc6IG1hcC1nZXQoJHBhZGRpbmdzLCAkYnJlYWtwb2ludCk7XG5cbiAgICAgIEBpbmNsdWRlIHBhZGRpbmcoJHBhZGRpbmcpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIEl0ZW0gTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gaXRlbS1wdXNoLXN2Zy11cmwoJGZpbGwpIHtcbiAgJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnOiBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMjAnPjxwYXRoIGQ9J00yLDIwbC0yLTJsOC04TDAsMmwyLTJsMTAsMTBMMiwyMHonIGZpbGw9JyN7JGZpbGx9Jy8+PC9zdmc+XCI7XG5cbiAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCB0cnVlKTtcbn1cbiIsIkB1c2UgXCJzYXNzOm1hdGhcIiBhcyBtYXRoO1xuXG4vKipcbiAqIEFwcCBjdXN0b20gbWl4aW5zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIG91ciBjdXN0b20gbWl4aW5zLlxuICovXG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gRGVmYXVsdCB0byBib290c3RyYXAgbGV2ZWwgNi5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXNoYWRlLXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogNDglKSB7XG4gICAgQHJldHVybiBtaXgoIzAwMCwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCB3aGl0ZSB0byBjcmVhdGUgaXRzIHRpbnQuXG4vLyBEZWZhdWx0IHRvIGJvb3RzdHJhcCBsZXZlbCAtMTAuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci10aW50LXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogODAlKSB7XG4gICAgQHJldHVybiBtaXgoI2ZmZiwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIElvbmljIENvbG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEdlbmVyYXRlcyB0aGUgY29sb3IgY2xhc3NlcyBhbmQgdmFyaWFibGVzIGJhc2VkIG9uIHRoZVxuLy8gY29sb3JzIG1hcFxuXG5AbWl4aW4gZ2VuZXJhdGUtY29sb3IoJGNvbG9yLW5hbWUsICRjb2xvcnMsICR0aGVtZSkge1xuICAgICRjb2xvci10aGVtZXM6IG1hcC1nZXQoJGNvbG9ycywgJGNvbG9yLW5hbWUpO1xuICAgICRiYXNlOiBtYXAtZ2V0KCRjb2xvci10aGVtZXMsICR0aGVtZSk7XG5cbiAgICBAaWYgJHRoZW1lID09ICdkYXJrJyB7XG4gICAgICAgICRiYXNlOiBtaXgobWFwLWdldCgkY29sb3ItdGhlbWVzLCAnbGlnaHQnKSwgd2hpdGUsIDgwJSkgIWRlZmF1bHQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgZ2VuZXJhdGUtY29sb3ItdmFyaWFudHMoJGNvbG9yLW5hbWUsICRiYXNlKTtcbn1cblxuQG1peGluIGdlbmVyYXRlLWNvbG9yLXZhcmlhbnRzKCRjb2xvci1uYW1lLCAkYmFzZSkge1xuICAgICRjb250cmFzdDogZ2V0X2NvbnRyYXN0X2NvbG9yKCRiYXNlKTtcbiAgICAkc2hhZGU6IGdldC1jb2xvci1zaGFkZS1wZXJjZW50KCRiYXNlKTtcbiAgICAkdGludDogZ2V0LWNvbG9yLXRpbnQtcGVyY2VudCgkYmFzZSk7XG5cbiAgICAtLSN7JGNvbG9yLW5hbWV9OiAjeyRiYXNlfTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LXNoYWRlOiAjeyRzaGFkZX07XG4gICAgLS0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0OiAjeyRjb250cmFzdH07XG5cbiAgICAvLyBJbnRlcm5hbCBpb25pYyB1c2Ugb25seS5cbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfTogdmFyKC0tI3skY29sb3ItbmFtZX0pO1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2U6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSk7XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tcmdiOiAje2NvbG9yLXRvLXJnYi1saXN0KCRiYXNlKX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3Q6ICN7JGNvbnRyYXN0fTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdC1yZ2I6ICN7Y29sb3ItdG8tcmdiLWxpc3QoJGNvbnRyYXN0KX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tc2hhZGU6ICN7JHNoYWRlfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcblxuICAgIC5pb24tY29sb3ItI3skY29sb3ItbmFtZX0ge1xuICAgICAgICAtLWlvbi1jb2xvcjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAgICAgLS1pb24tY29sb3ItYmFzZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2UpO1xuICAgICAgICAtLWlvbi1jb2xvci1yZ2I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1yZ2IpO1xuICAgICAgICAtLWlvbi1jb2xvci1jb250cmFzdDogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0KTtcbiAgICAgICAgLS1pb24tY29sb3ItY29udHJhc3QtcmdiOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QtcmdiKTtcbiAgICAgICAgLS1pb24tY29sb3Itc2hhZGU6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1zaGFkZSk7XG4gICAgICAgIC0taW9uLWNvbG9yLXRpbnQ6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50KTtcbiAgICB9XG59XG5cbkBtaXhpbiBjb3JlLWZvY3VzKCkge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICY6OmFmdGVyIHtcbiAgICAgICAgQGluY2x1ZGUgcG9zaXRpb24oMCwgMCwgMCwgMCk7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgQGluY2x1ZGUgY29yZS1mb2N1cy1zdHlsZSgpO1xuICAgIH1cbn1cblxuQG1peGluIGNvcmUtZm9jdXMtc3R5bGUoKSB7XG4gICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIHZhcigtLWExMXktZm9jdXMtd2lkdGgpIDFweCB2YXIoLS1hMTF5LWZvY3VzLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcbiAgICAvLyBUaGlja2VyIG9wdGlvbjpcbiAgICAvLyBib3JkZXI6IHZhcigtLWExMXktZm9jdXMtd2lkdGgpIHNvbGlkIHZhcigtLWExMXktZm9jdXMtY29sb3IpO1xufVxuXG5AbWl4aW4gY29yZS10cmFuc2l0aW9uKCRwcm9wZXJ0aWVzOiBhbGwsICRkdXJhdGlvbjogNTAwbXMsICR0aW1pbmctZnVuY3Rpb246IGVhc2UtaW4tb3V0KSB7XG4gICAgJHRyYW5zaXRpb25zOiAoKTtcbiAgICBAZWFjaCAkcHJvcGVydHkgaW4gJHByb3BlcnRpZXMge1xuICAgICAgJHRyYW5zaXRpb25zOiBhcHBlbmQoJHRyYW5zaXRpb25zLCAkcHJvcGVydHkgJGR1cmF0aW9uICR0aW1pbmctZnVuY3Rpb24sIGNvbW1hKTtcbiAgICB9XG5cbiAgICAtd2Via2l0LXRyYW5zaXRpb246ICR0cmFuc2l0aW9ucztcbiAgICB0cmFuc2l0aW9uOiAkdHJhbnNpdGlvbnM7XG59XG5cbkBtaXhpbiBzci1vbmx5KCkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMXB4O1xuICAgIGhlaWdodDogMXB4O1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAtMXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgY2xpcDogcmVjdCgwLCAwLCAwLCAwKTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGJvcmRlcjogMDtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGl0ZW0tcHVzaC1zdmctdXJsIGJ1dCBhZG1pdHMgZmxpcC1ydGxcbiAqL1xuQG1peGluIHB1c2gtYXJyb3ctY29sb3IoJGZpbGw6IDYyNjI2MiwgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAgICRpdGVtLWRldGFpbC1wdXNoLXN2ZzogXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyIDIwJz48cGF0aCBkPSdNMiwyMGwtMi0ybDgtOEwwLDJsMi0ybDEwLDEwTDIsMjB6JyBmaWxsPScjeyRmaWxsfScvPjwvc3ZnPlwiO1xuXG4gICAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCAkZmxpcC1ydGwpO1xufVxuXG5AbWl4aW4gYm9yZGVyLXN0YXJ0KCRweCwgJHR5cGU6IG51bGwsICRjb2xvcjogbnVsbCkge1xuICAgIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoYm9yZGVyLCAkcHggJHR5cGUgJGNvbG9yLCBudWxsKTtcbn1cblxuQG1peGluIGJvcmRlci1lbmQoJHB4LCAkdHlwZTogbnVsbCwgJGNvbG9yOiBudWxsKSB7XG4gICAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChib3JkZXIsIG51bGwsICRweCAkdHlwZSAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1zdGFydCgkcHgsICR0eXBlLCAkY29sb3IpIHtcbiAgICAkc2FmZS1hcmVhLXBvc2l0aW9uOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRweH0pO1xuXG4gICAgQGluY2x1ZGUgYm9yZGVyLXN0YXJ0KCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1lbmQoJHB4LCAkdHlwZSwgJGNvbG9yKSB7XG4gICAgJHNhZmUtYXJlYS1wb3NpdGlvbjogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JHB4fSk7XG5cbiAgICBAaW5jbHVkZSBib3JkZXItZW5kKCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IG51bGw7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogbnVsbDtcblxuICAgIEBpZiAoJGVuZCkge1xuICAgICAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuICAgIH1cbiAgICBAaWYgKCRzdGFydCkge1xuICAgICAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4tc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRlbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1lbmQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBudWxsO1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IG51bGw7XG5cbiAgICBAaWYgKCRlbmQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcbiAgICB9XG4gICAgQGlmICgkc3RhcnQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLWVuZCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBvc2l0aW9uKCR0b3A6IG51bGwsICRlbmQ6IG51bGwsICRib3R0b206IG51bGwsICRzdGFydDogbnVsbCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIHBvc2l0aW9uKCR0b3AsICRzYWZlLWFyZWEtZW5kLCAkYm90dG9tLCAkc2FmZS1hcmVhLXN0YXJ0KTtcbn1cblxuQG1peGluIGNvcmUtaGVhZGluZ3MoKSB7XG4gICAgaDEge1xuICAgICAgICBmb250LXNpemU6IDI2cHg7XG4gICAgfVxuICAgIGgyLCAuaXRlbS1oZWFkaW5nIHtcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgIH1cbiAgICBoMyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICB9XG4gICAgaDQge1xuICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgfVxuICAgIGg1IHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgIH1cbiAgICBoNiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG59XG5cbkBtaXhpbiBkYXJrbW9kZSgpIHtcbiAgICAkcm9vdDogI3smfTtcblxuICAgIEBhdC1yb290ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiaHRtbC5kYXJrXCIpfSB7XG4gICAgICAgIEBjb250ZW50O1xuICAgIH1cbn1cblxuQG1peGluIGhvcml6b250YWxfc2Nyb2xsX2l0ZW0oJHdpZHRoLCAkbWluLXdpZHRoLCAkbWF4LXdpZHRoKSB7XG4gICAgZmxleDogMCAwICR3aWR0aDtcbiAgICBtaW4td2lkdGg6ICRtaW4td2lkdGg7XG4gICAgbWF4LXdpZHRoOiAkbWF4LXdpZHRoO1xuICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gICAgZGlzcGxheTogYmxvY2s7XG5cbiAgICBpb24tY2FyZCB7XG4gICAgICAgIC0tdmVydGljYWwtbWFyZ2luOiAxMHB4O1xuICAgICAgICAtLWhvcml6b250YWwtbWFyZ2luOiAxMHB4O1xuXG4gICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikpO1xuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIHZhcigtLXZlcnRpY2FsLW1hcmdpbikgLSB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pKTtcbiAgICAgICAgbWFyZ2luOiB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pIHZhcigtLWhvcml6b250YWwtbWFyZ2luKTtcblxuICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogMzYwcHgpIHtcbiAgICAgICAgICAgIC0taG9yaXpvbnRhbC1tYXJnaW46IDZweDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gQ29sb3IgbWl4aW5zLlxuQGZ1bmN0aW9uIGdldF9icmlnaHRuZXNzKCRjb2xvcikge1xuICAgIEByZXR1cm4gbWF0aC5kaXYocmVkKCRjb2xvcikgKyBncmVlbigkY29sb3IpICsgYmx1ZSgkY29sb3IpLCAzKTtcbn1cblxuLy8gR2V0IHRoZSBiZXR0ZXIgY29sb3IgY29udHJhc3QgdXNpbmcgV0NBRyBhbGdvcnl0aG0uXG5AZnVuY3Rpb24gZ2V0X2NvbnRyYXN0X2NvbG9yKCRjb2xvcikge1xuICAgICRsdW1pYW5jZTogbHVtaW5hbmNlKCRjb2xvcik7XG5cbiAgICAvLyBXaGl0ZSBsdW1pYW5jZSBpcyAxLlxuICAgICR3aGl0ZUNvbnRyYXN0OiBtYXRoLmRpdigkbHVtaWFuY2UgKyAwLjA1LCAxICsgMC4wNSk7XG4gICAgLy8gV2hpdGUgbHVtaWFuY2UgaXMgMC5cbiAgICAkYmxhY2tDb250cmFzdDogbWF0aC5kaXYoMC4wNSwgJGx1bWlhbmNlICsgMC4wNSk7XG5cbiAgICBAcmV0dXJuIGlmKCR3aGl0ZUNvbnRyYXN0IDwgJGJsYWNrQ29udHJhc3QsIHdoaXRlLCBibGFjayk7XG59XG5cbi8vIENvbG9yIGNvbnRyYXN0IHVzaW5nIHlpcSBhcHJveGltYXRpb24gd2l0aCAxNTAgdGhyZXNob2xkLlxuQGZ1bmN0aW9uIGdldF9jb250cmFzdF9jb2xvcl95aXEoJGNvbG9yLCAkZGFyazogYmxhY2ssICRsaWdodDogd2hpdGUpIHtcbiAgICAkcjogcmVkKCRjb2xvcik7XG4gICAgJGc6IGdyZWVuKCRjb2xvcik7XG4gICAgJGI6IGJsdWUoJGNvbG9yKTtcblxuICAgICR5aXE6IG1hdGguZGl2KCgkciAqIDI5OSkgKyAoJGcgKiA1ODcpICsgKCRiICogMTE0KSwgMTAwMCk7XG5cbiAgICBAcmV0dXJuIGlmKCR5aXEgPj0gMTI4LCAkZGFyaywgJGxpZ2h0KTtcbn1cblxuLy8gV0NBRyBjb250cmFzdCBhbGdvcml0aG1cbkBmdW5jdGlvbiBjaGVjay1jb250cmFzdCgkZm9yZWdyb3VuZCwgJGJhY2tncm91bmQpIHtcbiAgICAkZm9yZWdyb3VuZEx1bWlhbmNlOiBsdW1pbmFuY2UoJGZvcmVncm91bmQpO1xuICAgICRiYWNrZ3JvdW5kTHVtaW5hbmNlOiBsdW1pbmFuY2UoJGJhY2tncm91bmQpO1xuXG4gICAgQGlmICgkYmFja2dyb3VuZEx1bWluYW5jZSA8ICRmb3JlZ3JvdW5kTHVtaWFuY2UpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkYmFja2dyb3VuZEx1bWluYW5jZSArIDAuMDUsICRmb3JlZ3JvdW5kTHVtaWFuY2UgKyAwLjA1KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkZm9yZWdyb3VuZEx1bWlhbmNlICsgMC4wNSwgJGJhY2tncm91bmRMdW1pbmFuY2UgKyAwLjA1KTtcbiAgICB9XG59XG5cbkBmdW5jdGlvbiBsdW1pbmFuY2UoJGNvbG9yKSB7XG4gICAgJHI6IHJlZCgkY29sb3IpO1xuICAgICRnOiBncmVlbigkY29sb3IpO1xuICAgICRiOiBibHVlKCRjb2xvcik7XG5cbiAgICAkcjogY29tcG9uZW50LWx1bWluYW5jZSgkcik7XG4gICAgJGc6IGNvbXBvbmVudC1sdW1pbmFuY2UoJGcpO1xuICAgICRiOiBjb21wb25lbnQtbHVtaW5hbmNlKCRiKTtcblxuICAgIEByZXR1cm4gJHIgKiAwLjIxMjYgKyAkZyAqIDAuNzE1MiArICRiICogMC4wNzIyO1xufVxuXG5AZnVuY3Rpb24gY29tcG9uZW50LWx1bWluYW5jZSgkdmFsdWUpIHtcbiAgICAkdmFsdWU6IG1hdGguZGl2KCR2YWx1ZSwgMjU1KTtcblxuICAgIEBpZiAoJHZhbHVlIDw9IDAuMDM5MjgpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkdmFsdWUsIDEyLjkyKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLnBvdyhtYXRoLmRpdigkdmFsdWUgKyAwLjA1NSwgMS4wNTUpLCAyLjQpO1xuICAgIH1cbn1cbiIsIi8qXG4gKiBBcHAgQ3VzdG9tIEFwcCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBhbGwgY3VzdG9tIGFwcCB2YXJpYWJsZXMuXG4gKi9cbiIsIi8qXG4gKiBBcHAgR2xvYmFsIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIGFsbCBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiR3aGl0ZTogICAgICAgI2ZmZmZmZiAhZGVmYXVsdDtcbiRncmF5LTEwMDogICAgI2Y4ZjlmYSAhZGVmYXVsdDtcbiRncmF5LTIwMDogICAgI2U5ZWNlZiAhZGVmYXVsdDtcbiRncmF5LTMwMDogICAgI2RlZTJlNiAhZGVmYXVsdDsgLy8gU3Ryb2tlXG4kZ3JheS00MDA6ICAgICNjZWQ0ZGEgIWRlZmF1bHQ7XG4kZ3JheS01MDA6ICAgICM4Zjk1OWUgIWRlZmF1bHQ7IC8vIFN0cm9rZSBvbiBpbnB1dHNcbiRncmF5LTYwMDogICAgIzZhNzM3YiAhZGVmYXVsdDtcbiRncmF5LTcwMDogICAgIzQ5NTA1NyAhZGVmYXVsdDtcbiRncmF5LTgwMDogICAgIzM0M2E0MCAhZGVmYXVsdDtcbiRncmF5LTkwMDogICAgIzI4MjgyOCAhZGVmYXVsdDsgLy8gQ29weSB0ZXh0XG4kYmxhY2s6ICAgICAgICMwMDAwMDAgIWRlZmF1bHQ7IC8vIEF2b2lkIHVzYWdlXG5cbiRibHVlOiAgICAgICAgIzBmNmNiZiAhZGVmYXVsdDtcbiRjeWFuOiAgICAgICAgIzAwODE5NiAhZGVmYXVsdDsgLy8gTm90IHVzZWQuXG4kZ3JlZW46ICAgICAgICMzNTdhMzIgIWRlZmF1bHQ7XG4kcmVkOiAgICAgICAgICNjYTMxMjAgIWRlZmF1bHQ7XG4keWVsbG93OiAgICAgICNmMGFkNGUgIWRlZmF1bHQ7XG5cbiRicmFuZC1jb2xvcjogI2Y5ODAxMiAhZGVmYXVsdDtcblxuJHRleHQtY29sb3I6ICAgICAgICAgICAgICAgJGdyYXktOTAwICFkZWZhdWx0O1xuJHRleHQtY29sb3ItcmdiOiAgICAgICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3IpICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyazogICAgICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyay1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3ItZGFyaykgIWRlZmF1bHQ7XG5cbiRiYWNrZ3JvdW5kLWNvbG9yOiAgICAgICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kYmFja2dyb3VuZC1jb2xvci1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJGJhY2tncm91bmQtY29sb3IpICFkZWZhdWx0O1xuJGJhY2tncm91bmQtY29sb3ItZGFyazogICAgICRncmF5LTkwMCAhZGVmYXVsdDsgLy8gIzFhMWExYVxuJGJhY2tncm91bmQtY29sb3ItZGFyay1yZ2I6IGNvbG9yLXRvLXJnYi1saXN0KCRiYWNrZ3JvdW5kLWNvbG9yLWRhcmspICFkZWZhdWx0O1xuXG4kaW9uLWl0ZW0tYmFja2dyb3VuZDogICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1yZ2I6ICBjb2xvci10by1yZ2ItbGlzdCgkaW9uLWl0ZW0tYmFja2dyb3VuZCkgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrOiAkZ3JheS05MDAgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrLXJnYjogY29sb3ItdG8tcmdiLWxpc3QoJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyaykgIWRlZmF1bHQ7XG5cbiRwcmltYXJ5OiAgICAkYnJhbmQtY29sb3IgIWRlZmF1bHQ7XG4kc2Vjb25kYXJ5OiAgJGdyYXktMzAwICFkZWZhdWx0O1xuJGRhbmdlcjogICAgICRyZWQgIWRlZmF1bHQ7XG4kd2FybmluZzogICAgJHllbGxvdyAhZGVmYXVsdDtcbiRzdWNjZXNzOiAgICAkZ3JlZW4gIWRlZmF1bHQ7XG4kaW5mbzogICAgICAgJGJsdWUgIWRlZmF1bHQ7XG4kbGlnaHQ6ICAgICAgJGdyYXktMTAwICFkZWZhdWx0O1xuJG1lZGl1bTogICAgICRncmF5LTcwMCAhZGVmYXVsdDtcbiRkYXJrOiAgICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7XG5cbiRjb2xvcnM6ICAoXG4gICAgcHJpbWFyeTogKGxpZ2h0OiAkcHJpbWFyeSwgZGFyazogJHByaW1hcnkpLFxuICAgIHNlY29uZGFyeTogKGxpZ2h0OiAkc2Vjb25kYXJ5LCBkYXJrOiAkZ3JheS03MDApLFxuICAgIHN1Y2Nlc3M6IChsaWdodDogJHN1Y2Nlc3MpLFxuICAgIHdhcm5pbmc6IChsaWdodDogJHdhcm5pbmcpLFxuICAgIGRhbmdlcjogIChsaWdodDogJGRhbmdlciksXG4gICAgaW5mbzogKGxpZ2h0OiAkaW5mbyksXG4gICAgbGlnaHQ6IChsaWdodDogJGxpZ2h0LCBkYXJrOiAkZGFyayksXG4gICAgbWVkaXVtOiAobGlnaHQ6ICRtZWRpdW0sIGRhcms6ICRncmF5LTIwMCksXG4gICAgZGFyazogKGxpZ2h0OiAkZGFyaywgZGFyazogJGxpZ2h0KSxcbikgIWRlZmF1bHQ7XG5cbi8qKlxuICogTGF5b3V0IEJyZWFrcG9pbnRzXG4gKlxuICogaHR0cHM6Ly9pb25pY2ZyYW1ld29yay5jb20vZG9jcy9sYXlvdXQvZ3JpZCNkZWZhdWx0LWJyZWFrcG9pbnRzXG4gKi9cblxuLy8gVGhlIG1pbmltdW0gZGltZW5zaW9ucyBhdCB3aGljaCB5b3VyIGxheW91dCB3aWxsIGNoYW5nZSxcbi8vIGFkYXB0aW5nIHRvIGRpZmZlcmVudCBzY3JlZW4gc2l6ZXMsIGZvciB1c2UgaW4gbWVkaWEgcXVlcmllc1xuJHNjcmVlbi1icmVha3BvaW50czogKFxuICAgIHhzOiAwcHgsXG4gICAgc206IDU3NnB4LFxuICAgIG1kOiA3NjhweCxcbiAgICBsZzogOTkycHgsXG4gICAgdGFibGV0OiA5OTJweCxcbiAgICB4bDogMTIwMHB4XG4pICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaW1hZ2UtYmFja2dyb3VuZDogIzgxZWNlYywgIzc0YjlmZiwgI2EyOWJmZSwgI2RmZTZlOSwgIzAwYjg5NCwgIzA5ODRlMywgI2IyYmVjMywgI2ZkY2I2ZSwgI2ZkNzlhOCwgIzZjNWNlNyAhZGVmYXVsdDtcbiRjb3JlLWRkLXF1ZXN0aW9uLWNvbG9yczogI0ZGRkZGRiwgI0IwQzRERSwgI0RDRENEQywgI0Q4QkZEOCwgIzg3Q0VGQSwgI0RBQTUyMCwgI0ZGRDcwMCwgI0YwRTY4QyAhZGVmYXVsdDtcbiRjb3JlLXRleHQtaGlnaHRsaWdodC1iYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGVuKCRibHVlLCA0MCUpICFkZWZhdWx0O1xuXG4kY29yZS1maXhlZC11cmw6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtZGFzaGJvYXJkLWxvZ286IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtYWx3YXlzLXNob3ctbWFpbi1tZW51OiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWZvcm1hdC10ZXh0LW5ldmVyLXNob3J0ZW46IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1oaWRlLWNvdXJzZWltYWdlLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLXNlY3Rpb24tc2VsZWN0b3I6IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaGlkZS10aHVtYi1vbi1jYXJkczogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1jb3Vyc2UtdGh1bWItb24tY2FyZHMtYmFja2dyb3VuZDogbnVsbCAhZGVmYXVsdDtcbiRjb3JlLWNvdXJzZS1oaWRlLXByb2dyZXNzLW9uLWNhcmRzOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBsb2dpbiBwYWdlLlxuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUtZGFyazogJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3ItZGFyazogJHRleHQtY29sb3ItZGFyayAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtZm9yZ290LXBhc3N3b3JkOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtbmVlZC1oZWxwOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtcXJjb2RlOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBtb3JlIHBhZ2UuIChkZXByZWNhdGVkIG9uIDQuMClcbiRjb3JlLW1vcmUtaGlkZS1zaXRlaW5mbzogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmw6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHVzZXIgcGFnZS5cbiRjb3JlLXVzZXItaGlkZS1zaXRlaW5mbzogJGNvcmUtbW9yZS1oaWRlLXNpdGVpbmZvICFkZWZhdWx0O1xuJGNvcmUtdXNlci1oaWRlLXNpdGVuYW1lOiAkY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWUgIWRlZmF1bHQ7XG4kY29yZS11c2VyLWhpZGUtc2l0ZXVybDogJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmwgIWRlZmF1bHQ7XG5cbi8vIEFjdGl2aXR5IGljb24gYmFja2dyb3VuZCBjb2xvcnMuXG4kYWN0aXZpdHktaWNvbi1jb2xvcnM6IChcbiAgICBhZG1pbmlzdHJhdGlvbjogIzVkNjNmNixcbiAgICBhc3Nlc3NtZW50OiAjZWI2NmEyLFxuICAgIGNvbGxhYm9yYXRpb246ICNmNzYzNGQsXG4gICAgY29tbXVuaWNhdGlvbjogIzExYTY3NixcbiAgICBjb250ZW50OiAjMzk5YmUyLFxuICAgIGludGVyZmFjZTogI2EzNzhmZlxuKSAhZGVmYXVsdDtcblxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNhdGVnb3J5OiAjOGUyNGFhICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvdXJzZTogJHJlZCAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1ncm91cDogJHllbGxvdyAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS11c2VyOiAkYmx1ZSAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1zaXRlOiAkZ3JlZW4gIWRlZmF1bHQ7XG5cbi8vIENhbGVuZGFyIGV2ZW50IGNhdGVnb3J5IGJhY2tncm91bmQgY29sb3JzLlxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvbG9yczogKFxuICAgIGNhdGVnb3J5OiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY2F0ZWdvcnksXG4gICAgY291cnNlOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY291cnNlLFxuICAgIGdyb3VwOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktZ3JvdXAsXG4gICAgdXNlcjogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXVzZXIsXG4gICAgc2l0ZTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXNpdGUsXG4pICFkZWZhdWx0O1xuIiwiQHVzZSBcInRoZW1lL2dsb2JhbHNcIiBhcyAqO1xuXG46aG9zdCB7XG4gICAgLS1jb3Vyc2Utc3RvcmFnZS1tYXgtYWN0aXZpdHktaGVpZ2h0OiAxMjBweDtcblxuICAgIGlvbi1jYXJkIGlvbi1pdGVtLnNpemUge1xuICAgICAgICAtLWlubmVyLXBhZGRpbmctZW5kOiAwcHg7XG4gICAgfVxuXG4gICAgaW9uLWNhcmQuc2VjdGlvbiB7XG4gICAgICAgIGlvbi1jYXJkLWhlYWRlciB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICB9XG4gICAgICAgIGlvbi1jYXJkLWNvbnRlbnQge1xuICAgICAgICAgICAgcGFkZGluZzogMDtcblxuICAgICAgICAgICAgLmNvcmUtY291cnNlLXN0b3JhZ2UtYWN0aXZpdHkgaW9uLWxhYmVsIHtcbiAgICAgICAgICAgICAgICBoMyB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAgICAgICAgICAgICAgICAgbWF4LWhlaWdodDogdmFyKC0tY291cnNlLXN0b3JhZ2UtbWF4LWFjdGl2aXR5LWhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgICAgICAgICAgICAgICAgIDo6bmctZGVlcCAqIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lICFpbXBvcnRhbnQ7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAmOmJlZm9yZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogdmFyKC0tY291cnNlLXN0b3JhZ2UtbWF4LWFjdGl2aXR5LWhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICAgICAgICAgICAgICBAaW5jbHVkZSBwb3NpdGlvbigwLCAwLCBudWxsLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byBib3R0b20sIHJnYmEodmFyKC0tYmFja2dyb3VuZC1ncmFkaWVudC1yZ2IpLCAwKSBjYWxjKDEwMCUgLSAzMHB4KSwgcmdiYSh2YXIoLS1iYWNrZ3JvdW5kLWdyYWRpZW50LXJnYiksIDEpIGNhbGMoMTAwJSAtIDIwcHgpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDY7XG4gICAgICAgICAgICAgICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAuaXRlbS1oZWFkaW5nIHtcbiAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiBib2xkO1xuICAgICAgICAgICAgZm9udC1zaXplOiAxLjJyZW07XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmlvbi1iYWRnZSB7XG4gICAgbWFyZ2luLXRvcDogOHB4O1xuICAgIGlvbi1pY29uIHtcbiAgICAgICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwobnVsbCwgOHB4KTtcbiAgICB9XG59XG5cbmlvbi1pdGVtIGNvcmUtbW9kLWljb24ge1xuICAgIC0tc2l6ZTogMThweDtcbiAgICAtLXBhZGRpbmc6IDlweDtcbiAgICAtLW1hcmdpbi12ZXJ0aWNhbDogOHB4O1xuICAgIC0tbWFyZ2luLWVuZDogOHB4O1xufVxuXG4uc3RvcmFnZS1idXR0b25zIHtcbiAgICBkaXNwbGF5OiBmbGV4O1xuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"],\n  changeDetection: 0\n});","map":{"version":3,"names":["CoreConstants","CoreCourse","CoreCourseProvider","CoreCourseHelper","CoreCourseModulePrefetchDelegate","CoreCourses","CoreNavigator","CoreSites","CoreDomUtils","CoreUtils","Translate","CoreDom","CoreEvents","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵelementContainerStart","ɵɵelementContainerEnd","ctx_r1","totalSize","ɵɵelement","ɵɵproperty","ctx_r5","prefetchCourseData","icon","ɵɵlistener","AddonStorageManagerCourseStoragePage_ion_button_24_Template_ion_button_click_0_listener","$event","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","prefetchCourse","ɵɵtemplate","AddonStorageManagerCourseStoragePage_ion_button_24_ion_icon_1_Template","AddonStorageManagerCourseStoragePage_ion_button_24_ion_spinner_2_Template","ctx_r3","loading","ɵɵtextInterpolate1","statusTranslatable","ɵɵattribute","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_ion_icon_1_Template","section_r9","downloadStatus","ctx_r11","statusDownloaded","total","count","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_core_download_refresh_1_Template_core_download_refresh_action_0_listener","_r25","$implicit","ctx_r23","prefecthSection","isDownloading","isCalculating","ɵɵpipeBind2","ɵɵtextInterpolate2","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_core_download_refresh_1_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_ion_badge_2_Template","ctx_r19","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_ion_button_2_Template_ion_button_click_0_listener","_r31","ctx_r29","deleteForSection","ɵɵpureFunction1","_c0","name","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_div_1_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_ion_button_2_Template","ctx_r14","downloadEnabled","calculatingSize","module_r35","handlerData","modname","instance","modplural","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_ion_icon_1_Template","ctx_r38","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_download_refresh_8_Template_core_download_refresh_action_0_listener","_r48","ctx_r46","prefetchModule","spinner","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_button_9_Template_ion_button_click_0_listener","_r52","ctx_r50","deleteForModule","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_mod_icon_1_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_5_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_badge_6_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_core_download_refresh_8_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_ion_button_9_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_p_10_Template","ɵɵclassMapInterpolate1","class","title","course","id","ctx_r36","showDownloadButton","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_ion_item_1_Template","ctx_r34","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_ng_container_1_Template","modules","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_Template_ion_item_click_2_listener","_r59","ctx_r57","toggleExpand","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_8_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ion_badge_9_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_p_10_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_div_11_Template","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_ng_container_13_Template","ɵɵclassProp","expanded","ctx_r10","ɵɵpropertyInterpolate1","AddonStorageManagerCourseStoragePage_ng_container_30_ion_card_1_Template","length","AddonStorageManagerCourseStoragePage","constructor","elementRef","changeDetectorRef","loaded","sections","downloadCourseEnabled","ICON_LOADING","status","DOWNLOADED","isDestroyed","isGuest","siteUpdatedObserver","on","SITE_UPDATED","isDownloadCourseDisabledInSite","getRequiredCurrentSite","isOfflineDisabled","initCoursePrefetch","initModulePrefetch","markForCheck","getCurrentSiteId","ngOnInit","_this","_asyncToGenerator","_CoreNavigator$getRou","courseId","getRequiredRouteParam","error","showErrorModal","back","getRouteParam","getCurrentSiteHomeId","instant","getRouteBooleanParam","courseUsesGuestAccessInfo","guestAccess","initialSectionId","getRouteNumberParam","getSections","filter","section","isSectionStealth","addHandlerDataForModules","map","_objectSpread","module","scrollToElement","nativeElement","addYAxis","Promise","all","initSizes","_this2","courseStatusObserver","COURSE_STATUS_CHANGED","data","ALL_COURSES_CLEARED","updateCourseStatus","determineCoursePrefetchIcon","promise","getCourseDownloadPromise","catch","showErrorModalDefault","setCoursePreviousStatus","_this3","sectionStatusObserver","SECTION_STATUS_CHANGED","_ref","sectionId","downloadId","getSectionDownloadId","isBeingDownloaded","find","calculateSectionStatus","_x","apply","arguments","calculateSectionsStatus","forEach","_module$handlerData","prefetchHandler","getPrefetchHandlerFor","calculateModuleStatus","moduleStatusObserver","PACKAGE_STATUS_CHANGED","some","_module$prefetchHandl","componentId","component","determineModuleStatus","updateModuleStatus","_this4","_ref2","_ref3","size","getModuleStoredSize","isNaN","Number","_x3","_x2","markCourseAsNotDownloaded","updateModulesSizes","_this5","_ref4","mod","_module$totalSize","diff","_unused","_x4","deleteForCourse","event","_this6","stopPropagation","preventDefault","showDeleteConfirm","isCanceledError","push","deleteModules","_this7","_this8","_this9","modal","showModalLoading","promises","removeModuleStoredData","then","moduleSize","dismiss","setCourseStatus","NOT_DOWNLOADED","refresh","ignoreErrors","_this10","confirmDownloadSizeSection","prefetchSection","_this11","getDownloadSize","_module$handlerData2","_module$handlerData2$","updateStatus","call","_this12","getModuleStatus","_this13","getCourseStatusIconAndTitle","statusData","getCoursePrefetchStatusInfo","getCourse","_this14","getUserCourse","_unused2","_unused3","getCourseByField","_this15","confirmAndPrefetchCourse","ngOnDestroy","_this$courseStatusObs","_this$sectionStatusOb","_this$moduleStatusObs","_this$siteUpdatedObse","off","_module$handlerData3","_module$handlerData3$","onDestroy","ɵɵdirectiveInject","ElementRef","ChangeDetectorRef","selectors","decls","vars","consts","template","AddonStorageManagerCourseStoragePage_Template","rf","ctx","AddonStorageManagerCourseStoragePage_ion_item_11_Template","AddonStorageManagerCourseStoragePage_ng_container_22_Template","AddonStorageManagerCourseStoragePage_ng_container_23_Template","AddonStorageManagerCourseStoragePage_ion_button_24_Template","AddonStorageManagerCourseStoragePage_Template_ion_button_click_25_listener","AddonStorageManagerCourseStoragePage_ng_container_30_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/storagemanager/pages/course-storage/course-storage.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/storagemanager/pages/course-storage/course-storage.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreConstants } from '@/core/constants';\nimport { ChangeDetectionStrategy, ChangeDetectorRef, Component, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { CoreCourse, CoreCourseProvider } from '@features/course/services/course';\nimport {\n    CoreCourseHelper,\n    CoreCourseModuleData,\n    CoreCourseSectionWithStatus,\n    CorePrefetchStatusInfo,\n} from '@features/course/services/course-helper';\nimport {\n    CoreCourseModulePrefetchDelegate,\n    CoreCourseModulePrefetchHandler } from '@features/course/services/module-prefetch-delegate';\nimport { CoreCourseAnyCourseData, CoreCourses } from '@features/courses/services/courses';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { Translate } from '@singletons';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\n\n/**\n * Page that displays the amount of file storage used by each activity on the course, and allows\n * the user to prefecth and delete this data.\n */\n@Component({\n    selector: 'page-addon-storagemanager-course-storage',\n    templateUrl: 'course-storage.html',\n    styleUrls: ['course-storage.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddonStorageManagerCourseStoragePage implements OnInit, OnDestroy {\n\n    courseId!: number;\n    title = '';\n    loaded = false;\n    sections: AddonStorageManagerCourseSection[] = [];\n    totalSize = 0;\n    calculatingSize = true;\n\n    downloadEnabled = false;\n    downloadCourseEnabled = false;\n\n    prefetchCourseData: CorePrefetchStatusInfo = {\n        icon: CoreConstants.ICON_LOADING,\n        statusTranslatable: 'core.course.downloadcourse',\n        status: '',\n        loading: true,\n    };\n\n    statusDownloaded = CoreConstants.DOWNLOADED;\n\n    protected initialSectionId?: number;\n    protected siteUpdatedObserver?: CoreEventObserver;\n    protected courseStatusObserver?: CoreEventObserver;\n    protected sectionStatusObserver?: CoreEventObserver;\n    protected moduleStatusObserver?: CoreEventObserver;\n    protected isDestroyed = false;\n    protected isGuest = false;\n\n    constructor(protected elementRef: ElementRef, protected changeDetectorRef: ChangeDetectorRef) {\n        // Refresh the enabled flags if site is updated.\n        this.siteUpdatedObserver = CoreEvents.on(CoreEvents.SITE_UPDATED, () => {\n            this.downloadCourseEnabled = !CoreCourses.isDownloadCourseDisabledInSite();\n            this.downloadEnabled = !CoreSites.getRequiredCurrentSite().isOfflineDisabled();\n\n            this.initCoursePrefetch();\n            this.initModulePrefetch();\n            this.changeDetectorRef.markForCheck();\n        }, CoreSites.getCurrentSiteId());\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            this.courseId = CoreNavigator.getRequiredRouteParam('courseId');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        this.title = CoreNavigator.getRouteParam<string>('title') || '';\n        if (!this.title && this.courseId == CoreSites.getCurrentSiteHomeId()) {\n            this.title = Translate.instant('core.sitehome.sitehome');\n        }\n\n        this.isGuest = CoreNavigator.getRouteBooleanParam('isGuest') ??\n            (await CoreCourseHelper.courseUsesGuestAccessInfo(this.courseId)).guestAccess;\n\n        this.initialSectionId = CoreNavigator.getRouteNumberParam('sectionId');\n\n        this.downloadCourseEnabled = !CoreCourses.isDownloadCourseDisabledInSite();\n        this.downloadEnabled = !CoreSites.getRequiredCurrentSite().isOfflineDisabled();\n\n        const sections = (await CoreCourse.getSections(this.courseId, false, true))\n            .filter((section) => !CoreCourseHelper.isSectionStealth(section));\n        this.sections = (await CoreCourseHelper.addHandlerDataForModules(sections, this.courseId)).sections\n            .map(section => ({\n                ...section,\n                totalSize: 0,\n                calculatingSize: true,\n                expanded: section.id === this.initialSectionId,\n                modules: section.modules.map(module => ({\n                    ...module,\n                    calculatingSize: true,\n                })),\n            }));\n\n        this.loaded = true;\n\n        CoreDom.scrollToElement(\n            this.elementRef.nativeElement,\n            '.core-course-storage-section-expanded',\n            { addYAxis: -10 },\n        );\n\n        await Promise.all([\n            this.initSizes(),\n            this.initCoursePrefetch(),\n            this.initModulePrefetch(),\n        ]);\n        this.changeDetectorRef.markForCheck();\n    }\n\n    /**\n     * Init course prefetch information.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async initCoursePrefetch(): Promise<void> {\n        if (!this.downloadCourseEnabled || this.courseStatusObserver) {\n            return;\n        }\n\n        // Listen for changes in course status.\n        this.courseStatusObserver = CoreEvents.on(CoreEvents.COURSE_STATUS_CHANGED, (data) => {\n            if (data.courseId == this.courseId || data.courseId == CoreCourseProvider.ALL_COURSES_CLEARED) {\n                this.updateCourseStatus(data.status);\n            }\n        }, CoreSites.getCurrentSiteId());\n\n        // Determine the course prefetch status.\n        await this.determineCoursePrefetchIcon();\n\n        if (this.prefetchCourseData.icon != CoreConstants.ICON_LOADING) {\n            return;\n        }\n\n        // Course is being downloaded. Get the download promise.\n        const promise = CoreCourseHelper.getCourseDownloadPromise(this.courseId);\n        if (promise) {\n            // There is a download promise. Show an error if it fails.\n            promise.catch((error) => {\n                if (!this.isDestroyed) {\n                    CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n                }\n            });\n        } else {\n            // No download, this probably means that the app was closed while downloading. Set previous status.\n            const status = await CoreCourse.setCoursePreviousStatus(this.courseId);\n\n            this.updateCourseStatus(status);\n        }\n    }\n\n    /**\n     * Init module prefetch information.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async initModulePrefetch(): Promise<void> {\n        if (!this.downloadEnabled || this.sectionStatusObserver) {\n            return;\n        }\n\n        // Listen for section status changes.\n        this.sectionStatusObserver = CoreEvents.on(\n            CoreEvents.SECTION_STATUS_CHANGED,\n            async (data) => {\n                if (!this.downloadEnabled || !this.sections.length || !data.sectionId || data.courseId != this.courseId) {\n                    return;\n                }\n\n                // Check if the affected section is being downloaded.\n                // If so, we don't update section status because it'll already be updated when the download finishes.\n                const downloadId = CoreCourseHelper.getSectionDownloadId({ id: data.sectionId });\n                if (CoreCourseModulePrefetchDelegate.isBeingDownloaded(downloadId)) {\n                    return;\n                }\n\n                // Get the affected section.\n                const section = this.sections.find(section => section.id == data.sectionId);\n                if (!section) {\n                    return;\n                }\n\n                // Recalculate the status.\n                await CoreCourseHelper.calculateSectionStatus(section, this.courseId, false);\n\n                if (section.isDownloading && !CoreCourseModulePrefetchDelegate.isBeingDownloaded(downloadId)) {\n                    // All the modules are now downloading, set a download all promise.\n                    this.prefecthSection(section);\n                }\n            },\n            CoreSites.getCurrentSiteId(),\n        );\n\n        // The download status of a section might have been changed from within a module page.\n        CoreCourseHelper.calculateSectionsStatus(this.sections, this.courseId, false, false);\n\n        this.sections.forEach((section) => {\n            section.modules.forEach((module) => {\n                if (module.handlerData?.showDownloadButton) {\n\n                    module.spinner = true;\n                    // Listen for changes on this module status, even if download isn't enabled.\n                    module.prefetchHandler = CoreCourseModulePrefetchDelegate.getPrefetchHandlerFor(module.modname);\n                    this.calculateModuleStatus(module);\n                }\n            });\n        });\n\n        this.moduleStatusObserver = CoreEvents.on(CoreEvents.PACKAGE_STATUS_CHANGED, (data) => {\n            let module: AddonStorageManagerModule | undefined;\n\n            this.sections.some((section) => {\n                module = section.modules.find((module) =>\n                    module.id == data.componentId && module.prefetchHandler && data.component == module.prefetchHandler?.component);\n\n                return !!module;\n            });\n\n            if (!module) {\n                return;\n            }\n\n            // Call determineModuleStatus to get the right status to display.\n            const status = CoreCourseModulePrefetchDelegate.determineModuleStatus(module, data.status);\n\n            // Update the status.\n            this.updateModuleStatus(module, status);\n        }, CoreSites.getCurrentSiteId());\n    }\n\n    /**\n     * Init section, course and modules sizes.\n     */\n    protected async initSizes(): Promise<void> {\n        await Promise.all(this.sections.map(async (section) => {\n            await Promise.all(section.modules.map(async (module) => {\n                // Note: This function only gets the size for modules which are downloadable.\n                // For other modules it always returns 0, even if they have downloaded some files.\n                // However there is no 100% reliable way to actually track the files in this case.\n                // You can maybe guess it based on the component and componentid.\n                // But these aren't necessarily consistent, for example mod_frog vs mmaModFrog.\n                // There is nothing enforcing correct values.\n                // Most modules which have large files are downloadable, so I think this is sufficient.\n                const size = await CoreCourseModulePrefetchDelegate.getModuleStoredSize(module, this.courseId);\n\n                // There are some cases where the return from this is not a valid number.\n                if (!isNaN(size)) {\n                    module.totalSize = Number(size);\n                    section.totalSize += size;\n                    this.totalSize += size;\n                }\n\n                module.calculatingSize = false;\n            }));\n\n            section.calculatingSize = false;\n        }));\n\n        this.calculatingSize = false;\n\n        // Mark course as not downloaded if course size is 0.\n        if (this.totalSize == 0) {\n            this.markCourseAsNotDownloaded();\n        }\n    }\n\n    /**\n     * Update the sizes of some modules.\n     *\n     * @param modules Modules.\n     * @param section Section the modules belong to.\n     * @returns Promise resolved when done.\n     */\n    protected async updateModulesSizes(\n        modules: AddonStorageManagerModule[],\n        section?: AddonStorageManagerCourseSection,\n    ): Promise<void> {\n        this.calculatingSize = true;\n\n        await Promise.all(modules.map(async (module) => {\n            if (module.calculatingSize) {\n                return;\n            }\n\n            module.calculatingSize = true;\n            this.changeDetectorRef.markForCheck();\n\n            if (!section) {\n                section = this.sections.find((section) => section.modules.some((mod) => mod.id === module.id));\n                if (section) {\n                    section.calculatingSize = true;\n                    this.changeDetectorRef.markForCheck();\n                }\n            }\n\n            try {\n                const size = await CoreCourseModulePrefetchDelegate.getModuleStoredSize(module, this.courseId);\n\n                const diff = (isNaN(size) ? 0 : size) - (module.totalSize ?? 0);\n\n                module.totalSize = Number(size);\n                this.totalSize += diff;\n                if (section) {\n                    section.totalSize += diff;\n                }\n            } catch {\n                // Ignore errors, it shouldn't happen.\n            } finally {\n                module.calculatingSize = false;\n                this.changeDetectorRef.markForCheck();\n            }\n        }));\n\n        this.calculatingSize = false;\n        if (section) {\n            section.calculatingSize = false;\n        }\n        this.changeDetectorRef.markForCheck();\n    }\n\n    /**\n     * The user has requested a delete for the whole course data.\n     *\n     * (This works by deleting data for each module on the course that has data.)\n     *\n     * @param event Event object.\n     */\n    async deleteForCourse(event: Event): Promise<void> {\n        event.stopPropagation();\n        event.preventDefault();\n\n        try {\n            await CoreDomUtils.showDeleteConfirm(\n                'addon.storagemanager.confirmdeletedatafrom',\n                { name: this.title },\n            );\n        } catch (error) {\n            if (!CoreDomUtils.isCanceledError(error)) {\n                throw error;\n            }\n\n            return;\n        }\n\n        const modules: AddonStorageManagerModule[] = [];\n        this.sections.forEach((section) => {\n            section.modules.forEach((module) => {\n                if (module.totalSize && module.totalSize > 0) {\n                    modules.push(module);\n                }\n            });\n        });\n\n        this.deleteModules(modules);\n    }\n\n    /**\n     * The user has requested a delete for a section's data.\n     *\n     * (This works by deleting data for each module in the section that has data.)\n     *\n     * @param event Event object.\n     * @param section Section object with information about section and modules\n     */\n    async deleteForSection(event: Event, section: AddonStorageManagerCourseSection): Promise<void> {\n        event.stopPropagation();\n        event.preventDefault();\n\n        try {\n            await CoreDomUtils.showDeleteConfirm(\n                'addon.storagemanager.confirmdeletedatafrom',\n                { name: section.name },\n            );\n        } catch (error) {\n            if (!CoreDomUtils.isCanceledError(error)) {\n                throw error;\n            }\n\n            return;\n        }\n\n        const modules: AddonStorageManagerModule[] = [];\n        section.modules.forEach((module) => {\n            if (module.totalSize && module.totalSize > 0) {\n                modules.push(module);\n            }\n        });\n\n        this.deleteModules(modules, section);\n    }\n\n    /**\n     * The user has requested a delete for a module's data\n     *\n     * @param event Event object.\n     * @param module Module details\n     * @param section Section the module belongs to.\n     */\n    async deleteForModule(\n        event: Event,\n        module: AddonStorageManagerModule,\n        section: AddonStorageManagerCourseSection,\n    ): Promise<void> {\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (module.totalSize === 0) {\n            return;\n        }\n\n        try {\n            await CoreDomUtils.showDeleteConfirm(\n                'addon.storagemanager.confirmdeletedatafrom',\n                { name: module.name },\n            );\n        } catch (error) {\n            if (!CoreDomUtils.isCanceledError(error)) {\n                throw error;\n            }\n\n            return;\n        }\n\n        this.deleteModules([module], section);\n    }\n\n    /**\n     * Deletes the specified modules, showing the loading overlay while it happens.\n     *\n     * @param modules Modules to delete\n     * @param section Section the modules belong to.\n     * @returns Promise<void> Once deleting has finished\n     */\n    protected async deleteModules(modules: AddonStorageManagerModule[], section?: AddonStorageManagerCourseSection): Promise<void> {\n        const modal = await CoreDomUtils.showModalLoading('core.deleting', true);\n\n        const promises: Promise<void>[] = [];\n        modules.forEach((module) => {\n            // Remove the files.\n            const promise = CoreCourseHelper.removeModuleStoredData(module, this.courseId).then(() => {\n                const moduleSize = module.totalSize || 0;\n                // When the files and cache are removed, update the size.\n                if (section) {\n                    section.totalSize -= moduleSize;\n                }\n                this.totalSize -= moduleSize;\n                module.totalSize = 0;\n\n                return;\n            });\n\n            promises.push(promise);\n        });\n\n        try {\n            await Promise.all(promises);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, Translate.instant('core.errordeletefile'));\n        } finally {\n            modal.dismiss();\n\n            await this.updateModulesSizes(modules, section);\n            CoreCourseHelper.calculateSectionsStatus(this.sections, this.courseId, false, false);\n\n            // For delete all, reset all section sizes so icons are updated.\n            if (this.totalSize === 0) {\n                this.sections.map(section => section.totalSize = 0);\n            }\n            this.changeDetectorRef.markForCheck();\n        }\n    }\n\n    /**\n     * Mark course as not downloaded.\n     */\n    protected markCourseAsNotDownloaded(): void {\n        // @TODO In order to correctly check the status of the course we should check all module statuses.\n        // We are currently marking as not downloaded if size is 0 but we should take into account that\n        // resources without files can be downloaded and cached.\n\n        CoreCourse.setCourseStatus(this.courseId, CoreConstants.NOT_DOWNLOADED);\n    }\n\n    /**\n     * Calculate the status of sections.\n     *\n     * @param refresh If refresh or not.\n     */\n    protected calculateSectionsStatus(refresh?: boolean): void {\n        if (!this.sections) {\n            return;\n        }\n\n        CoreUtils.ignoreErrors(CoreCourseHelper.calculateSectionsStatus(this.sections, this.courseId, refresh));\n    }\n\n    /**\n     * Confirm and prefetch a section. If the section is \"all sections\", prefetch all the sections.\n     *\n     * @param section Section to download.\n     */\n    async prefecthSection(section: AddonStorageManagerCourseSection): Promise<void> {\n        section.isCalculating = true;\n        this.changeDetectorRef.markForCheck();\n        try {\n            await CoreCourseHelper.confirmDownloadSizeSection(this.courseId, section, this.sections);\n\n            try {\n                await CoreCourseHelper.prefetchSection(section, this.courseId, this.sections);\n\n            } catch (error) {\n                if (!this.isDestroyed) {\n                    CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingsection', true);\n                }\n            } finally {\n                await this.updateModulesSizes(section.modules, section);\n                this.changeDetectorRef.markForCheck();\n            }\n        } catch (error) {\n            // User cancelled or there was an error calculating the size.\n            if (!this.isDestroyed && error) {\n                CoreDomUtils.showErrorModal(error);\n                this.changeDetectorRef.markForCheck();\n\n                return;\n            }\n        } finally {\n            section.isCalculating = false;\n            this.changeDetectorRef.markForCheck();\n        }\n    }\n\n    /**\n     * Download the module.\n     *\n     * @param module Module to prefetch.\n     * @param refresh Whether it's refreshing.\n     * @returns Promise resolved when done.\n     */\n    async prefetchModule(\n        module: AddonStorageManagerModule,\n        refresh = false,\n    ): Promise<void> {\n        if (!module.prefetchHandler) {\n            return;\n        }\n\n        // Show spinner since this operation might take a while.\n        module.spinner = true;\n\n        try {\n            // Get download size to ask for confirm if it's high.\n\n            const size = await module.prefetchHandler.getDownloadSize(module, module.course, true);\n\n            await CoreCourseHelper.prefetchModule(module.prefetchHandler, module, size, module.course, refresh);\n\n            CoreCourseHelper.calculateSectionsStatus(this.sections, this.courseId, false, false);\n        } catch (error) {\n            if (!this.isDestroyed) {\n                CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n            }\n        } finally {\n            module.spinner = false;\n\n            await this.updateModulesSizes([module]);\n\n        }\n    }\n\n    /**\n     * Show download buttons according to module status.\n     *\n     * @param module Module to update.\n     * @param status Module status.\n     */\n    protected updateModuleStatus(module: AddonStorageManagerModule, status: string): void {\n        if (!status) {\n            return;\n        }\n\n        module.spinner = false;\n        module.downloadStatus = status;\n\n        module.handlerData?.updateStatus?.(status);\n        this.changeDetectorRef.markForCheck();\n    }\n\n    /**\n     * Calculate and show module status.\n     *\n     * @param module Module to update.\n     * @returns Promise resolved when done.\n     */\n    protected async calculateModuleStatus(module: AddonStorageManagerModule): Promise<void> {\n        if (!module) {\n            return;\n        }\n\n        const status = await CoreCourseModulePrefetchDelegate.getModuleStatus(module, this.courseId);\n\n        this.updateModuleStatus(module, status);\n    }\n\n    /**\n     * Determines the prefetch icon of the course.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async determineCoursePrefetchIcon(): Promise<void> {\n        this.prefetchCourseData = await CoreCourseHelper.getCourseStatusIconAndTitle(this.courseId);\n    }\n\n    /**\n     * Update the course status icon and title.\n     *\n     * @param status Status to show.\n     */\n    protected updateCourseStatus(status: string): void {\n        const statusData = CoreCourseHelper.getCoursePrefetchStatusInfo(status);\n\n        this.prefetchCourseData.status = statusData.status;\n        this.prefetchCourseData.icon = statusData.icon;\n        this.prefetchCourseData.statusTranslatable = statusData.statusTranslatable;\n        this.prefetchCourseData.loading = statusData.loading;\n        this.changeDetectorRef.markForCheck();\n    }\n\n    protected async getCourse(courseId: number): Promise<CoreCourseAnyCourseData | undefined> {\n        try {\n            // Check if user is enrolled. If enrolled, no guest access.\n            return await CoreCourses.getUserCourse(courseId, true);\n        } catch {\n            // Ignore errors.\n        }\n\n        try {\n            // The user is not enrolled in the course. Use getCourses to see if it's an admin/manager and can see the course.\n            return await CoreCourses.getCourse(courseId);\n        } catch {\n            // Ignore errors.\n        }\n\n        return await CoreCourses.getCourseByField('id', this.courseId);\n\n    }\n\n    /**\n     * Prefetch the whole course.\n     *\n     * @param event Event object.\n     */\n    async prefetchCourse(event: Event): Promise<void> {\n        event.stopPropagation();\n        event.preventDefault();\n\n        const course = await this.getCourse(this.courseId);\n        if (!course) {\n            CoreDomUtils.showErrorModal('core.course.errordownloadingcourse', true);\n\n            return;\n        }\n\n        try {\n            this.changeDetectorRef.markForCheck();\n            await CoreCourseHelper.confirmAndPrefetchCourse(\n                this.prefetchCourseData,\n                course,\n                {\n                    sections: this.sections,\n                    isGuest: this.isGuest,\n                },\n            );\n            await Promise.all(this.sections.map(section => this.updateModulesSizes(section.modules, section)));\n            this.changeDetectorRef.markForCheck();\n        } catch (error) {\n            if (this.isDestroyed) {\n                return;\n            }\n\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errordownloadingcourse', true);\n        }\n    }\n\n    /**\n     * Toggle expand status.\n     *\n     * @param event Event object.\n     * @param section Section to expand / collapse.\n     */\n    toggleExpand(event: Event, section: AddonStorageManagerCourseSection): void {\n        section.expanded = !section.expanded;\n        event.stopPropagation();\n        event.preventDefault();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.courseStatusObserver?.off();\n        this.sectionStatusObserver?.off();\n        this.moduleStatusObserver?.off();\n        this.siteUpdatedObserver?.off();\n\n        this.sections.forEach((section) => {\n            section.modules.forEach((module) => {\n                module.handlerData?.onDestroy?.();\n            });\n        });\n        this.isDestroyed = true;\n    }\n\n}\n\ntype AddonStorageManagerCourseSection = Omit<CoreCourseSectionWithStatus, 'modules'> & {\n    totalSize: number;\n    calculatingSize: boolean;\n    expanded: boolean;\n    modules: AddonStorageManagerModule[];\n};\n\ntype AddonStorageManagerModule = CoreCourseModuleData & {\n    totalSize?: number;\n    calculatingSize: boolean;\n    prefetchHandler?: CoreCourseModulePrefetchHandler;\n    spinner?: boolean;\n    downloadStatus?: string;\n};\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>{{ 'addon.storagemanager.coursedownloads' | translate }}</h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content class=\"limited-width\">\n    <core-loading [hideUntil]=\"loaded\">\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"downloadCourseEnabled\">\n            <ion-label>\n                <p>{{ 'addon.storagemanager.courseinfo' | translate }}</p>\n            </ion-label>\n        </ion-item>\n\n\n        <ion-card class=\"wholecourse\">\n            <ion-card-header>\n                <ion-card-title>\n                    <core-format-text [text]=\"title\" contextLevel=\"course\" [contextInstanceId]=\"courseId\" [adaptImg]=\"false\" />\n                </ion-card-title>\n                <ion-item class=\"size ion-text-wrap ion-no-padding\">\n                    <ion-label>\n                        <p class=\"item-heading ion-text-wrap\">{{ 'addon.storagemanager.totaldownloads' | translate }}</p>\n                    </ion-label>\n                    <ion-badge color=\"light\" slot=\"end\">\n                        <ng-container *ngIf=\"!calculatingSize\">{{ totalSize | coreBytesToSize }}</ng-container>\n                        <ng-container *ngIf=\"calculatingSize\">{{ 'core.calculating' | translate }}</ng-container>\n                    </ion-badge>\n                </ion-item>\n                <ion-button *ngIf=\"downloadCourseEnabled\" (click)=\"prefetchCourse($event)\" expand=\"block\" fill=\"outline\"\n                    class=\"ion-no-margin\" [disabled]=\"prefetchCourseData.loading\">\n                    <ion-icon *ngIf=\"!prefetchCourseData.loading\" [name]=\"prefetchCourseData.icon\" slot=\"start\" />\n                    <ion-spinner *ngIf=\"prefetchCourseData.loading\" slot=\"start\" />\n                    {{ prefetchCourseData.statusTranslatable | translate }}\n                </ion-button>\n                <ion-button [disabled]=\"calculatingSize || totalSize <= 0\" (click)=\"deleteForCourse($event)\" expand=\"block\" color=\"danger\"\n                    class=\"ion-no-margin ion-margin-top\">\n                    <ion-icon name=\"fas-trash\" slot=\"start\" [attr.aria-label]=\"'addon.storagemanager.deletedatafrom' | translate:\n                        { name: title }\" />\n                    {{ 'addon.storagemanager.deleteall' | translate }}\n                </ion-button>\n            </ion-card-header>\n        </ion-card>\n        <ng-container *ngFor=\"let section of sections\">\n            <ion-card class=\"section\" *ngIf=\"section.modules.length > 0\">\n                <ion-card-header>\n                    <ion-item [lines]=\"section.expanded ? 'full' : 'none'\" button [detail]=\"false\" (click)=\"toggleExpand($event, section)\"\n                        [class.core-course-storage-section-expanded]=\"section.expanded\"\n                        [attr.aria-label]=\"(section.expanded ? 'core.collapse' : 'core.expand') | translate\"\n                        [attr.aria-expanded]=\"section.expanded\" [attr.aria-controls]=\"'core-course-storage-section-' + section.id\">\n                        <ion-icon name=\"fas-chevron-right\" flip-rtl slot=\"start\" class=\"expandable-status-icon\"\n                            [class.expandable-status-icon-expanded]=\"section.expanded\" />\n                        <ion-label>\n                            <p class=\"item-heading ion-text-wrap\">\n                                <core-format-text [text]=\"section.name\" contextLevel=\"course\" [contextInstanceId]=\"section.course\"\n                                    [adaptImg]=\"false\" />\n                            </p>\n                            <ion-badge [color]=\"section.downloadStatus === statusDownloaded ? 'success' : 'light'\"\n                                *ngIf=\"!section.calculatingSize && section.totalSize > 0\">\n                                <ion-icon name=\"fam-cloud-done\" *ngIf=\"section.downloadStatus === statusDownloaded\"\n                                    [attr.aria-label]=\"'core.downloaded' | translate\" />{{ section.totalSize | coreBytesToSize }}\n                            </ion-badge>\n                            <ion-badge color=\"light\" *ngIf=\"section.calculatingSize\">\n                                {{ 'core.calculating' | translate }}\n                            </ion-badge>\n                            <!-- Download progress. -->\n                            <p *ngIf=\"downloadEnabled && section.isDownloading\">\n                                <core-progress-bar [progress]=\"section.total === 0 ? -1 : section.count / section.total\" />\n                            </p>\n                        </ion-label>\n                        <div class=\"storage-buttons\" slot=\"end\"\n                            *ngIf=\"(!section.calculatingSize && section.totalSize > 0) || downloadEnabled\">\n                            <div *ngIf=\"downloadEnabled\" slot=\"end\" class=\"core-button-spinner\">\n                                <core-download-refresh *ngIf=\"!section.isDownloading && section.downloadStatus !== statusDownloaded\"\n                                    [status]=\"section.downloadStatus\" [enabled]=\"true\" (action)=\"prefecthSection(section)\"\n                                    [loading]=\"section.isDownloading || section.isCalculating\" [canTrustDownload]=\"true\" />\n\n                                <ion-badge class=\"core-course-download-section-progress\"\n                                    *ngIf=\"section.isDownloading && section.count < section.total\" role=\"progressbar\"\n                                    [attr.aria-valuemax]=\"section.total\" [attr.aria-valuenow]=\"section.count\"\n                                    [attr.aria-valuetext]=\"'core.course.downloadsectionprogressdescription' | translate:section\">\n                                    {{section.count}} / {{section.total}}\n                                </ion-badge>\n                            </div>\n                            <ion-button (click)=\"deleteForSection($event, section)\"\n                                *ngIf=\"!section.calculatingSize && section.totalSize > 0\" color=\"danger\" fill=\"clear\">\n                                <ion-icon name=\"fas-trash\" slot=\"icon-only\"\n                                    [attr.aria-label]=\"'addon.storagemanager.deletedatafrom' | translate: { name: section.name }\" />\n                            </ion-button>\n                        </div>\n                    </ion-item>\n                </ion-card-header>\n                <ion-card-content id=\"core-course-storage-section-{{section.id}}\">\n                    <ng-container *ngIf=\"section.expanded\">\n                        <ng-container *ngFor=\"let module of section.modules\">\n                            <ion-item class=\"core-course-storage-activity\"\n                                *ngIf=\"downloadEnabled || (!module.calculatingSize && module.totalSize > 0)\">\n                                <core-mod-icon slot=\"start\" *ngIf=\"module.handlerData.icon\" [modicon]=\"module.handlerData.icon\"\n                                    [modname]=\"module.modname\" [componentId]=\"module.instance\" [fallbackTranslation]=\"module.modplural\" />\n                                <ion-label class=\"ion-text-wrap\">\n                                    <p class=\"item-heading {{module.handlerData!.class}} addon-storagemanager-module-size\">\n                                        <core-format-text [text]=\"module.handlerData.title\" [courseId]=\"module.course\" contextLevel=\"module\"\n                                            [contextInstanceId]=\"module.id\" [adaptImg]=\"false\" />\n                                    </p>\n                                    <ion-badge [color]=\"module.downloadStatus === statusDownloaded ? 'success' : 'light'\"\n                                        *ngIf=\"!module.calculatingSize && module.totalSize > 0\">\n                                        <ion-icon name=\"fam-cloud-done\" *ngIf=\"module.downloadStatus === statusDownloaded\"\n                                            [attr.aria-label]=\"'core.downloaded' | translate\" />{{ module.totalSize | coreBytesToSize }}\n                                    </ion-badge>\n                                    <ion-badge color=\"light\" *ngIf=\"module.calculatingSize\">\n                                        {{ 'core.calculating' | translate }}\n                                    </ion-badge>\n                                </ion-label>\n\n                                <div class=\"storage-buttons\" slot=\"end\">\n                                    <core-download-refresh *ngIf=\"downloadEnabled && module.handlerData?.showDownloadButton &&\n                                        module.downloadStatus !== statusDownloaded\" [status]=\"module.downloadStatus\" [enabled]=\"true\"\n                                        [canTrustDownload]=\"true\" [loading]=\"module.spinner || module.handlerData.spinner\"\n                                        (action)=\"prefetchModule(module)\" />\n                                    <ion-button fill=\"clear\" (click)=\"deleteForModule($event, module, section)\"\n                                        *ngIf=\"!module.calculatingSize && module.totalSize > 0\" color=\"danger\">\n                                        <ion-icon name=\"fas-trash\" slot=\"icon-only\"\n                                            [attr.aria-label]=\"'addon.storagemanager.deletedatafrom' | translate: { name: module.name }\" />\n                                    </ion-button>\n                                    <p *ngIf=\"!downloadEnabled || !module.handlerData?.showDownloadButton\" class=\"sr-only\">\n                                        {{ 'core.notdownloadable' | translate }}\n                                    </p>\n                                </div>\n                            </ion-item>\n                        </ng-container>\n                    </ng-container>\n                </ion-card-content>\n            </ion-card>\n        </ng-container>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}