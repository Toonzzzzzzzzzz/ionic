{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreQuestionBaseComponent } from '@features/question/classes/base-question-component';\nimport { CoreQuestionHelper } from '@features/question/services/question-helper';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreFileSession } from '@services/file-session';\nimport { CoreQuestion } from '@features/question/services/question';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../core/components/attachments/attachments\";\nimport * as i4 from \"../../../../core/components/files/files\";\nimport * as i5 from \"../../../../core/directives/format-text\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"../../../../core/features/editor/components/rich-text-editor/rich-text-editor\";\nimport * as i8 from \"@ngx-translate/core\";\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 7);\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"name\", ctx_r6.question.formatInput.name)(\"value\", ctx_r6.question.formatInput.value);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 7);\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"name\", ctx_r7.question.answerDraftIdInput.name)(\"value\", ctx_r7.question.answerDraftIdInput.value);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    \"core-monospaced\": a0\n  };\n};\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_ion_textarea_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-textarea\", 8);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(4);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(1, 4, \"core.question.answer\"));\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(6, _c0, ctx_r8.question.isMonospaced))(\"ngModel\", ctx_r8.question.textarea.text);\n    i0.ɵɵattribute(\"name\", ctx_r8.question.textarea.name);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_core_rich_text_editor_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-rich-text-editor\", 9);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(4);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(1, 6, \"core.question.answer\"));\n    i0.ɵɵproperty(\"control\", ctx_r9.formControl)(\"name\", ctx_r9.question.textarea.name)(\"component\", ctx_r9.component)(\"componentId\", ctx_r9.componentId)(\"autoSave\", false);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\", 3);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_4_Template, 1, 2, \"input\", 4);\n    i0.ɵɵtemplate(5, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_5_Template, 1, 2, \"input\", 4);\n    i0.ɵɵtemplate(6, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_ion_textarea_6_Template, 2, 8, \"ion-textarea\", 5);\n    i0.ɵɵtemplate(7, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_core_rich_text_editor_7_Template, 2, 8, \"core-rich-text-editor\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 5, \"core.question.answer\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.question.formatInput);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.question.answerDraftIdInput);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.question.isPlainText);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.question.isPlainText);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\", 10)(2, \"ion-label\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-item\", 1)(6, \"ion-label\");\n    i0.ɵɵelement(7, \"core-format-text\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 7, \"core.question.errorembeddedfilesnotsupportedinsite\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"component\", ctx_r4.component)(\"componentId\", ctx_r4.componentId)(\"text\", ctx_r4.question.textarea.text)(\"contextLevel\", ctx_r4.contextLevel)(\"contextInstanceId\", ctx_r4.contextInstanceId)(\"courseId\", ctx_r4.courseId);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_core_attachments_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-attachments\", 14);\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"files\", ctx_r10.attachments)(\"component\", ctx_r10.component)(\"componentId\", ctx_r10.componentId)(\"maxSize\", ctx_r10.question.attachmentsMaxBytes)(\"maxSubmissions\", ctx_r10.question.attachmentsMaxFiles)(\"allowOffline\", ctx_r10.offlineEnabled)(\"acceptedTypes\", ctx_r10.question.attachmentsAcceptedTypes)(\"courseId\", ctx_r10.courseId);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_input_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 7);\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"name\", ctx_r11.question.attachmentsDraftIdInput.name)(\"value\", ctx_r11.question.attachmentsDraftIdInput.value);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 10)(1, \"ion-label\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.question.errorattachmentsnotsupportedinsite\"), \" \");\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_core_attachments_1_Template, 1, 8, \"core-attachments\", 12);\n    i0.ɵɵtemplate(2, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_input_2_Template, 1, 2, \"input\", 4);\n    i0.ɵɵtemplate(3, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_ion_item_3_Template, 4, 3, \"ion-item\", 13);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.uploadFilesSupported && ctx_r5.question.attachmentsDraftIdInput);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.question.attachmentsDraftIdInput);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.uploadFilesSupported);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_Template, 8, 7, \"ion-item\", 0);\n    i0.ɵɵtemplate(2, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_2_Template, 8, 9, \"ng-container\", 0);\n    i0.ɵɵtemplate(3, AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_Template, 4, 3, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.question.textarea && (!ctx_r1.question.hasDraftFiles || ctx_r1.uploadFilesSupported));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.question.textarea && ctx_r1.question.hasDraftFiles && !ctx_r1.uploadFilesSupported);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.question.allowsAttachments);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 1)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 17);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(7, _c0, ctx_r13.question.isMonospaced))(\"component\", ctx_r13.component)(\"componentId\", ctx_r13.componentId)(\"text\", ctx_r13.question.answer)(\"contextLevel\", ctx_r13.contextLevel)(\"contextInstanceId\", ctx_r13.contextInstanceId)(\"courseId\", ctx_r13.courseId);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 1)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r14.component)(\"componentId\", ctx_r14.componentId)(\"text\", ctx_r14.question.wordCountInfo)(\"contextLevel\", ctx_r14.contextLevel)(\"contextInstanceId\", ctx_r14.contextInstanceId)(\"courseId\", ctx_r14.courseId);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 1)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r15.component)(\"componentId\", ctx_r15.componentId)(\"text\", ctx_r15.question.answerPlagiarism)(\"contextLevel\", ctx_r15.contextLevel)(\"contextInstanceId\", ctx_r15.contextInstanceId)(\"courseId\", ctx_r15.courseId);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_5_core_files_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-files\", 18);\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"files\", ctx_r16.question.attachments)(\"component\", ctx_r16.component)(\"componentId\", ctx_r16.componentId)(\"extraHtml\", ctx_r16.question.attachmentsPlagiarisms);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_1_Template, 3, 9, \"ion-item\", 15);\n    i0.ɵɵtemplate(2, AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_2_Template, 3, 6, \"ion-item\", 15);\n    i0.ɵɵtemplate(3, AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_3_Template, 3, 6, \"ion-item\", 15);\n    i0.ɵɵtemplate(4, AddonQtypeEssayComponent_ion_list_0_ng_container_5_core_files_4_Template, 1, 4, \"core-files\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.question.answer || ctx_r2.question.answer === \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.question.wordCountInfo);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.question.answerPlagiarism);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.question.attachments);\n  }\n}\nfunction AddonQtypeEssayComponent_ion_list_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item\", 1)(2, \"ion-label\");\n    i0.ɵɵelement(3, \"core-format-text\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(4, AddonQtypeEssayComponent_ion_list_0_ng_container_4_Template, 4, 3, \"ng-container\", 0);\n    i0.ɵɵtemplate(5, AddonQtypeEssayComponent_ion_list_0_ng_container_5_Template, 5, 4, \"ng-container\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"component\", ctx_r0.component)(\"componentId\", ctx_r0.componentId)(\"text\", ctx_r0.question.text)(\"contextLevel\", ctx_r0.contextLevel)(\"contextInstanceId\", ctx_r0.contextInstanceId)(\"courseId\", ctx_r0.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.review);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.review);\n  }\n}\n/**\n * Component to render an essay question.\n */\nexport class AddonQtypeEssayComponent extends CoreQuestionBaseComponent {\n  constructor(elementRef, fb) {\n    super('AddonQtypeEssayComponent', elementRef);\n    this.fb = fb;\n    this.uploadFilesSupported = false;\n  }\n  /**\n   * @inheritdoc\n   */\n  init() {\n    var _this$question, _this$question2;\n    if (!this.question) {\n      return;\n    }\n    this.uploadFilesSupported = this.question.responsefileareas !== undefined;\n    this.initEssayComponent(this.review);\n    this.formControl = this.fb.control((_this$question = this.question) === null || _this$question === void 0 || (_this$question = _this$question.textarea) === null || _this$question === void 0 ? void 0 : _this$question.text);\n    if ((_this$question2 = this.question) !== null && _this$question2 !== void 0 && _this$question2.allowsAttachments && this.uploadFilesSupported && !this.review) {\n      this.loadAttachments();\n    }\n  }\n  /**\n   * Load attachments.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadAttachments() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _this$question$localA;\n      if (!_this.question) {\n        return;\n      }\n      if (_this.offlineEnabled && (_this$question$localA = _this.question.localAnswers) !== null && _this$question$localA !== void 0 && _this$question$localA.attachments_offline) {\n        const attachmentsData = CoreTextUtils.parseJSON(_this.question.localAnswers.attachments_offline, {\n          online: [],\n          offline: 0\n        });\n        let offlineFiles = [];\n        if (attachmentsData.offline) {\n          offlineFiles = yield CoreQuestionHelper.getStoredQuestionFiles(_this.question, _this.component || '', _this.componentId || -1);\n        }\n        _this.attachments = [...attachmentsData.online, ...offlineFiles];\n      } else {\n        _this.attachments = Array.from(CoreQuestionHelper.getResponseFileAreaFiles(_this.question, 'attachments'));\n      }\n      CoreFileSession.setFiles(_this.component || '', CoreQuestion.getQuestionComponentId(_this.question, _this.componentId || -1), _this.attachments);\n    })();\n  }\n}\n_class = AddonQtypeEssayComponent;\n_class.ɵfac = function AddonQtypeEssayComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-qtype-essay\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"ion-text-wrap\"], [3, \"component\", \"componentId\", \"text\", \"contextLevel\", \"contextInstanceId\", \"courseId\"], [1, \"sr-only\"], [\"type\", \"hidden\", 3, \"name\", \"value\", 4, \"ngIf\"], [\"class\", \"core-question-textarea\", 3, \"ngClass\", \"placeholder\", \"ngModel\", 4, \"ngIf\"], [3, \"placeholder\", \"control\", \"name\", \"component\", \"componentId\", \"autoSave\", 4, \"ngIf\"], [\"type\", \"hidden\", 3, \"name\", \"value\"], [1, \"core-question-textarea\", 3, \"ngClass\", \"placeholder\", \"ngModel\"], [3, \"placeholder\", \"control\", \"name\", \"component\", \"componentId\", \"autoSave\"], [1, \"ion-text-wrap\", \"core-danger-item\"], [1, \"core-question-warning\"], [3, \"files\", \"component\", \"componentId\", \"maxSize\", \"maxSubmissions\", \"allowOffline\", \"acceptedTypes\", \"courseId\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap core-danger-item\", 4, \"ngIf\"], [3, \"files\", \"component\", \"componentId\", \"maxSize\", \"maxSubmissions\", \"allowOffline\", \"acceptedTypes\", \"courseId\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [3, \"files\", \"component\", \"componentId\", \"extraHtml\", 4, \"ngIf\"], [3, \"ngClass\", \"component\", \"componentId\", \"text\", \"contextLevel\", \"contextInstanceId\", \"courseId\"], [3, \"files\", \"component\", \"componentId\", \"extraHtml\"]],\n  template: function AddonQtypeEssayComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AddonQtypeEssayComponent_ion_list_0_Template, 6, 8, \"ion-list\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.question && (ctx.question.text || ctx.question.text === \"\"));\n    }\n  },\n  dependencies: [i2.NgClass, i2.NgIf, i3.CoreAttachmentsComponent, i4.CoreFilesComponent, i5.CoreFormatTextDirective, i1.NgControlStatus, i1.NgModel, i6.IonItem, i6.IonLabel, i6.IonList, i6.IonTextarea, i6.TextValueAccessor, i7.CoreEditorRichTextEditorComponent, i8.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreQuestionBaseComponent","CoreQuestionHelper","CoreTextUtils","CoreFileSession","CoreQuestion","i0","ɵɵelement","ɵɵproperty","ctx_r6","question","formatInput","name","value","ctx_r7","answerDraftIdInput","ɵɵpropertyInterpolate","ɵɵpipeBind1","ɵɵpureFunction1","_c0","ctx_r8","isMonospaced","textarea","text","ɵɵattribute","ctx_r9","formControl","component","componentId","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_4_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_input_5_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_ion_textarea_6_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_core_rich_text_editor_7_Template","ɵɵadvance","ɵɵtextInterpolate","ctx_r3","isPlainText","ɵɵelementContainerStart","ɵɵelementContainerEnd","ɵɵtextInterpolate1","ctx_r4","contextLevel","contextInstanceId","courseId","ctx_r10","attachments","attachmentsMaxBytes","attachmentsMaxFiles","offlineEnabled","attachmentsAcceptedTypes","ctx_r11","attachmentsDraftIdInput","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_core_attachments_1_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_input_2_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_ion_item_3_Template","ctx_r5","uploadFilesSupported","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ion_item_1_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_2_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_4_ng_container_3_Template","ctx_r1","hasDraftFiles","allowsAttachments","ctx_r13","answer","ctx_r14","wordCountInfo","ctx_r15","answerPlagiarism","ctx_r16","attachmentsPlagiarisms","AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_1_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_2_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_5_ion_item_3_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_5_core_files_4_Template","ctx_r2","AddonQtypeEssayComponent_ion_list_0_ng_container_4_Template","AddonQtypeEssayComponent_ion_list_0_ng_container_5_Template","ctx_r0","review","AddonQtypeEssayComponent","constructor","elementRef","fb","init","_this$question","_this$question2","responsefileareas","undefined","initEssayComponent","control","loadAttachments","_this","_asyncToGenerator","_this$question$localA","localAnswers","attachments_offline","attachmentsData","parseJSON","online","offline","offlineFiles","getStoredQuestionFiles","Array","from","getResponseFileAreaFiles","setFiles","getQuestionComponentId","ɵɵdirectiveInject","ElementRef","i1","FormBuilder","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddonQtypeEssayComponent_Template","rf","ctx","AddonQtypeEssayComponent_ion_list_0_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/qtype/essay/component/essay.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/qtype/essay/component/addon-qtype-essay.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, ElementRef } from '@angular/core';\nimport { FormBuilder, FormControl } from '@angular/forms';\nimport { FileEntry } from '@awesome-cordova-plugins/file/ngx';\n\nimport { CoreFileUploaderStoreFilesResult } from '@features/fileuploader/services/fileuploader';\nimport { AddonModQuizEssayQuestion, CoreQuestionBaseComponent } from '@features/question/classes/base-question-component';\nimport { CoreQuestionHelper } from '@features/question/services/question-helper';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreFileSession } from '@services/file-session';\nimport { CoreQuestion } from '@features/question/services/question';\nimport { CoreFileEntry } from '@services/file-helper';\n/**\n * Component to render an essay question.\n */\n@Component({\n    selector: 'addon-qtype-essay',\n    templateUrl: 'addon-qtype-essay.html',\n})\nexport class AddonQtypeEssayComponent extends CoreQuestionBaseComponent<AddonModQuizEssayQuestion> {\n\n    formControl?: FormControl;\n    attachments?: CoreFileEntry[];\n    uploadFilesSupported = false;\n\n    constructor(elementRef: ElementRef, protected fb: FormBuilder) {\n        super('AddonQtypeEssayComponent', elementRef);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    init(): void {\n        if (!this.question) {\n            return;\n        }\n\n        this.uploadFilesSupported = this.question.responsefileareas !== undefined;\n\n        this.initEssayComponent(this.review);\n\n        this.formControl = this.fb.control(this.question?.textarea?.text);\n\n        if (this.question?.allowsAttachments && this.uploadFilesSupported && !this.review) {\n            this.loadAttachments();\n        }\n    }\n\n    /**\n     * Load attachments.\n     *\n     * @returns Promise resolved when done.\n     */\n    async loadAttachments(): Promise<void> {\n        if (!this.question) {\n            return;\n        }\n\n        if (this.offlineEnabled && this.question.localAnswers?.attachments_offline) {\n\n            const attachmentsData: CoreFileUploaderStoreFilesResult = CoreTextUtils.parseJSON(\n                this.question.localAnswers.attachments_offline,\n                {\n                    online: [],\n                    offline: 0,\n                },\n            );\n            let offlineFiles: FileEntry[] = [];\n\n            if (attachmentsData.offline) {\n                offlineFiles = <FileEntry[]> await CoreQuestionHelper.getStoredQuestionFiles(\n                    this.question,\n                    this.component || '',\n                    this.componentId || -1,\n                );\n            }\n\n            this.attachments = [...attachmentsData.online, ...offlineFiles];\n        } else {\n            this.attachments = Array.from(CoreQuestionHelper.getResponseFileAreaFiles(this.question, 'attachments'));\n        }\n\n        CoreFileSession.setFiles(\n            this.component || '',\n            CoreQuestion.getQuestionComponentId(this.question, this.componentId || -1),\n            this.attachments,\n        );\n    }\n\n}\n","<ion-list *ngIf=\"question && (question.text || question.text === '')\">\n    <!-- Question text. -->\n    <ion-item class=\"ion-text-wrap\">\n        <ion-label>\n            <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"question.text\" [contextLevel]=\"contextLevel\"\n                [contextInstanceId]=\"contextInstanceId\" [courseId]=\"courseId\" />\n        </ion-label>\n    </ion-item>\n\n    <!-- Editing the question. -->\n    <ng-container *ngIf=\"!review\">\n        <!-- Textarea. -->\n        <ion-item *ngIf=\"question.textarea && (!question.hasDraftFiles || uploadFilesSupported)\">\n            <ion-label class=\"sr-only\">{{ 'core.question.answer' | translate }}</ion-label>\n            <!-- \"Format\" and draftid hidden inputs -->\n            <input *ngIf=\"question.formatInput\" type=\"hidden\" [name]=\"question.formatInput.name\" [value]=\"question.formatInput.value\">\n            <input *ngIf=\"question.answerDraftIdInput\" type=\"hidden\" [name]=\"question.answerDraftIdInput.name\"\n                [value]=\"question.answerDraftIdInput.value\">\n            <!-- Plain text textarea. -->\n            <ion-textarea *ngIf=\"question.isPlainText\" class=\"core-question-textarea\" [ngClass]='{\"core-monospaced\": question.isMonospaced}'\n                placeholder=\"{{ 'core.question.answer' | translate }}\" [attr.name]=\"question.textarea.name\"\n                [ngModel]=\"question.textarea.text\" />\n            <!-- Rich text editor. -->\n            <core-rich-text-editor *ngIf=\"!question.isPlainText\" placeholder=\"{{ 'core.question.answer' | translate }}\"\n                [control]=\"formControl\" [name]=\"question.textarea.name\" [component]=\"component\" [componentId]=\"componentId\"\n                [autoSave]=\"false\" />\n        </ion-item>\n\n        <!-- Draft files not supported. -->\n        <ng-container *ngIf=\"question.textarea && question.hasDraftFiles && !uploadFilesSupported\">\n            <ion-item class=\"ion-text-wrap core-danger-item\">\n                <ion-label class=\"core-question-warning\">\n                    {{ 'core.question.errorembeddedfilesnotsupportedinsite' | translate }}\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"question.textarea.text\"\n                        [contextLevel]=\"contextLevel\" [contextInstanceId]=\"contextInstanceId\" [courseId]=\"courseId\" />\n                </ion-label>\n            </ion-item>\n        </ng-container>\n\n        <!-- Attachments. -->\n        <ng-container *ngIf=\"question.allowsAttachments\">\n            <core-attachments *ngIf=\"uploadFilesSupported && question.attachmentsDraftIdInput\" [files]=\"attachments\" [component]=\"component\"\n                [componentId]=\"componentId\" [maxSize]=\"question.attachmentsMaxBytes\" [maxSubmissions]=\"question.attachmentsMaxFiles\"\n                [allowOffline]=\"offlineEnabled\" [acceptedTypes]=\"question.attachmentsAcceptedTypes\" [courseId]=\"courseId\" />\n\n            <input *ngIf=\"question.attachmentsDraftIdInput\" type=\"hidden\" [name]=\"question.attachmentsDraftIdInput.name\"\n                [value]=\"question.attachmentsDraftIdInput.value\">\n\n            <!-- Attachments not supported in this site. -->\n            <ion-item *ngIf=\"!uploadFilesSupported\" class=\"ion-text-wrap core-danger-item\">\n                <ion-label class=\"core-question-warning\">\n                    {{ 'core.question.errorattachmentsnotsupportedinsite' | translate }}\n                </ion-label>\n            </ion-item>\n        </ng-container>\n    </ng-container>\n\n    <!-- Reviewing the question. -->\n    <ng-container *ngIf=\"review\">\n        <!-- Answer to the question and attachments (reviewing). -->\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"question.answer || question.answer === ''\">\n            <ion-label>\n                <core-format-text [ngClass]='{\"core-monospaced\": question.isMonospaced}' [component]=\"component\" [componentId]=\"componentId\"\n                    [text]=\"question.answer\" [contextLevel]=\"contextLevel\" [contextInstanceId]=\"contextInstanceId\" [courseId]=\"courseId\" />\n            </ion-label>\n        </ion-item>\n\n        <!-- Word count info. -->\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"question.wordCountInfo\">\n            <ion-label>\n                <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"question.wordCountInfo\"\n                    [contextLevel]=\"contextLevel\" [contextInstanceId]=\"contextInstanceId\" [courseId]=\"courseId\" />\n            </ion-label>\n        </ion-item>\n\n        <!-- Answer plagiarism. -->\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"question.answerPlagiarism\">\n            <ion-label>\n                <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"question.answerPlagiarism\"\n                    [contextLevel]=\"contextLevel\" [contextInstanceId]=\"contextInstanceId\" [courseId]=\"courseId\" />\n            </ion-label>\n        </ion-item>\n\n        <!-- List of attachments when reviewing. -->\n        <core-files *ngIf=\"question.attachments\" [files]=\"question.attachments\" [component]=\"component\" [componentId]=\"componentId\"\n            [extraHtml]=\"question.attachmentsPlagiarisms\" />\n    </ng-container>\n</ion-list>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}