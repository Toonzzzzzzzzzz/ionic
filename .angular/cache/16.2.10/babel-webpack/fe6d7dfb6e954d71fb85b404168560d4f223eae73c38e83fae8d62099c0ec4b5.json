{"ast":null,"code":"import _objectSpread from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTag } from '@features/tag/services/tag';\nimport { CoreTagAreaDelegate } from '@features/tag/services/tag-area-delegate';\nimport { CoreScreen } from '@services/screen';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { Translate } from '@singletons';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../components/empty-box/empty-box\";\nimport * as i3 from \"../../../../components/loading/loading\";\nimport * as i4 from \"../../../../components/split-view/split-view\";\nimport * as i5 from \"../../../../directives/fa-icon\";\nimport * as i6 from \"../../../../directives/content\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"@ngx-translate/core\";\nfunction CoreTagIndexPage_ion_list_15_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 9);\n    i0.ɵɵelement(1, \"ion-icon\", 10);\n    i0.ɵɵelementStart(2, \"ion-label\", 11);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, \"core.tag.warningareasnotsupported\"));\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    count: a0\n  };\n};\nfunction CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 15)(1, \"span\", 16);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"span\", 17);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const area_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(area_r4.badge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 2, \"core.tag.tagareabadgedescription\", i0.ɵɵpureFunction1(5, _c0, area_r4.badge)));\n  }\n}\nfunction CoreTagIndexPage_ion_list_15_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 12);\n    i0.ɵɵlistener(\"click\", function CoreTagIndexPage_ion_list_15_ion_item_2_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const area_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.openArea(area_r4));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 13);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template, 6, 7, \"ion-badge\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const area_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 5, area_r4.nameKey))(\"aria-current\", area_r4.id === ctx_r3.selectedAreaId ? \"page\" : \"false\");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 7, area_r4.nameKey));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", area_r4.badge);\n  }\n}\nfunction CoreTagIndexPage_ion_list_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, CoreTagIndexPage_ion_list_15_ion_item_1_Template, 5, 3, \"ion-item\", 7);\n    i0.ɵɵtemplate(2, CoreTagIndexPage_ion_list_15_ion_item_2_Template, 7, 9, \"ion-item\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.hasUnsupportedAreas);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.areas);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction CoreTagIndexPage_core_empty_box_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 18);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind2(1, 1, \"core.tag.noresultsfor\", i0.ɵɵpureFunction1(4, _c1, ctx_r1.tagName)));\n  }\n}\n/**\n * Page that displays the tag index.\n */\nexport class CoreTagIndexPage {\n  constructor() {\n    var _this = this;\n    this.tagId = 0;\n    this.tagName = '';\n    this.collectionId = 0;\n    this.areaId = 0;\n    this.fromContextId = 0;\n    this.contextId = 0;\n    this.recursive = true;\n    this.loaded = false;\n    this.hasUnsupportedAreas = false;\n    this.areas = [];\n    this.logView = CoreTime.once( /*#__PURE__*/_asyncToGenerator(function* () {\n      const params = {\n        tc: _this.collectionId || undefined,\n        tag: _this.tagName || undefined,\n        ta: _this.areaId || undefined,\n        from: _this.fromContextId || undefined,\n        ctx: _this.contextId || undefined\n      };\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n        ws: 'core_tag_get_tagindex_per_area',\n        name: _this.tagName || Translate.instant('core.tag.tag'),\n        data: _objectSpread(_objectSpread({\n          id: _this.tagId || undefined\n        }, params), {}, {\n          category: 'tag'\n        }),\n        url: CoreUrlUtils.addParamsToUrl('/tag/index.php', params)\n      });\n    }));\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var _CoreNavigator$getRou;\n      _this2.tagId = CoreNavigator.getRouteNumberParam('tagId') || _this2.tagId;\n      _this2.tagName = CoreNavigator.getRouteParam('tagName') || _this2.tagName;\n      _this2.collectionId = CoreNavigator.getRouteNumberParam('collectionId') || _this2.collectionId;\n      _this2.areaId = CoreNavigator.getRouteNumberParam('areaId') || _this2.areaId;\n      _this2.fromContextId = CoreNavigator.getRouteNumberParam('fromContextId') || _this2.fromContextId;\n      _this2.contextId = CoreNavigator.getRouteNumberParam('contextId') || _this2.contextId;\n      _this2.recursive = (_CoreNavigator$getRou = CoreNavigator.getRouteBooleanParam('recursive')) !== null && _CoreNavigator$getRou !== void 0 ? _CoreNavigator$getRou : true;\n      try {\n        yield _this2.fetchData();\n        if (CoreScreen.isTablet && _this2.areas && _this2.areas.length > 0) {\n          const area = _this2.areas.find(area => area.id == _this2.areaId);\n          _this2.openArea(area || _this2.areas[0]);\n        }\n      } finally {\n        _this2.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Fetch first page of tag index per area.\n   *\n   * @returns Resolved when done.\n   */\n  fetchData() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const areas = yield CoreTag.getTagIndexPerArea(_this3.tagId, _this3.tagName, _this3.collectionId, _this3.areaId, _this3.fromContextId, _this3.contextId, _this3.recursive, 0);\n        _this3.areas = [];\n        _this3.hasUnsupportedAreas = false;\n        const areasDisplay = [];\n        yield Promise.all(areas.map( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* (area) {\n            const items = yield CoreTagAreaDelegate.parseContent(area.component, area.itemtype, area.content);\n            if (!items || !items.length) {\n              // Tag area not supported, skip.\n              _this3.hasUnsupportedAreas = true;\n              return;\n            }\n            areasDisplay.push({\n              id: area.ta,\n              componentName: area.component,\n              itemType: area.itemtype,\n              nameKey: CoreTagAreaDelegate.getDisplayNameKey(area.component, area.itemtype),\n              items,\n              canLoadMore: !!area.nextpageurl,\n              badge: items && items.length ? items.length + (area.nextpageurl ? '+' : '') : ''\n            });\n          });\n          return function (_x) {\n            return _ref2.apply(this, arguments);\n          };\n        }()));\n        _this3.areas = areasDisplay;\n        _this3.logView();\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading tag index');\n      }\n    })();\n  }\n  /**\n   * Refresh data.\n   *\n   * @param refresher Refresher.\n   */\n  refreshData(refresher) {\n    CoreTag.invalidateTagIndexPerArea(this.tagId, this.tagName, this.collectionId, this.areaId, this.fromContextId, this.contextId, this.recursive).finally(() => {\n      this.fetchData().finally(() => {\n        refresher === null || refresher === void 0 || refresher.complete();\n      });\n    });\n  }\n  /**\n   * Navigate to an index area.\n   *\n   * @param area Area.\n   */\n  openArea(area) {\n    if (area.id === this.selectedAreaId) {\n      // Already opened.\n      return;\n    }\n    if (CoreScreen.isTablet) {\n      this.selectedAreaId = area.id;\n    }\n    const params = {\n      tagId: this.tagId,\n      tagName: this.tagName,\n      collectionId: this.collectionId,\n      areaId: area.id,\n      fromContextId: this.fromContextId,\n      contextId: this.contextId,\n      recursive: this.recursive,\n      areaNameKey: area.nameKey,\n      componentName: area.componentName,\n      itemType: area.itemType,\n      items: area.items.slice(),\n      canLoadMore: area.canLoadMore,\n      nextPage: 1\n    };\n    const splitViewLoaded = CoreNavigator.isCurrentPathInTablet('**/tag/index/index-area');\n    const path = (splitViewLoaded ? '../' : '') + 'index-area';\n    CoreNavigator.navigate(path, {\n      params\n    });\n  }\n}\n_class = CoreTagIndexPage;\n_class.ɵfac = function CoreTagIndexPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-tag-index\"]],\n  decls: 17,\n  vars: 14,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [4, \"ngIf\"], [\"icon\", \"fas-tag\", 3, \"message\", 4, \"ngIf\"], [\"class\", \"core-warning-item\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"core-warning-item\"], [\"slot\", \"start\", \"name\", \"fas-triangle-exclamation\", \"color\", \"warning\", \"aria-hidden\", \"true\"], [1, \"ion-text-wrap\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [1, \"item-heading\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"end\"], [\"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"icon\", \"fas-tag\", 3, \"message\"]],\n  template: function CoreTagIndexPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"ion-content\")(10, \"core-split-view\")(11, \"ion-refresher\", 2);\n      i0.ɵɵlistener(\"ionRefresh\", function CoreTagIndexPage_Template_ion_refresher_ionRefresh_11_listener($event) {\n        return ctx.refreshData($event.target);\n      });\n      i0.ɵɵelement(12, \"ion-refresher-content\", 3);\n      i0.ɵɵpipe(13, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"core-loading\", 4);\n      i0.ɵɵtemplate(15, CoreTagIndexPage_ion_list_15_Template, 3, 2, \"ion-list\", 5);\n      i0.ɵɵtemplate(16, CoreTagIndexPage_core_empty_box_16_Template, 2, 6, \"core-empty-box\", 6);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 8, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(8, 10, \"core.tag.tag\"), \": \", ctx.tagName, \"\");\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"disabled\", !ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(13, 12, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.hasUnsupportedAreas || ctx.areas.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.hasUnsupportedAreas && (!ctx.areas || !ctx.areas.length));\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreEmptyBoxComponent, i3.CoreLoadingComponent, i4.CoreSplitViewComponent, i5.CoreFaIconDirective, i6.CoreContentDirective, i7.IonBadge, i7.IonButtons, i7.IonContent, i7.IonHeader, i7.IonIcon, i7.IonItem, i7.IonLabel, i7.IonList, i7.IonRefresher, i7.IonRefresherContent, i7.IonTitle, i7.IonToolbar, i7.IonBackButton, i8.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreDomUtils","CoreTag","CoreTagAreaDelegate","CoreScreen","CoreNavigator","CoreTime","CoreAnalytics","CoreAnalyticsEventType","Translate","CoreUrlUtils","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","area_r4","badge","ɵɵpipeBind2","ɵɵpureFunction1","_c0","ɵɵlistener","CoreTagIndexPage_ion_list_15_ion_item_2_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r8","$implicit","ctx_r7","ɵɵnextContext","ɵɵresetView","openArea","ɵɵtemplate","CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template","ɵɵproperty","ɵɵattribute","nameKey","id","ctx_r3","selectedAreaId","CoreTagIndexPage_ion_list_15_ion_item_1_Template","CoreTagIndexPage_ion_list_15_ion_item_2_Template","ctx_r0","hasUnsupportedAreas","areas","_c1","ctx_r1","tagName","CoreTagIndexPage","constructor","_this","tagId","collectionId","areaId","fromContextId","contextId","recursive","loaded","logView","once","_asyncToGenerator","params","tc","undefined","tag","ta","from","ctx","logEvent","type","VIEW_ITEM_LIST","ws","name","instant","data","_objectSpread","category","url","addParamsToUrl","ngOnInit","_this2","_CoreNavigator$getRou","getRouteNumberParam","getRouteParam","getRouteBooleanParam","fetchData","isTablet","length","area","find","_this3","getTagIndexPerArea","areasDisplay","Promise","all","map","_ref2","items","parseContent","component","itemtype","content","push","componentName","itemType","getDisplayNameKey","canLoadMore","nextpageurl","_x","apply","arguments","error","showErrorModalDefault","refreshData","refresher","invalidateTagIndexPerArea","finally","complete","areaNameKey","slice","nextPage","splitViewLoaded","isCurrentPathInTablet","path","navigate","selectors","decls","vars","consts","template","CoreTagIndexPage_Template","rf","CoreTagIndexPage_Template_ion_refresher_ionRefresh_11_listener","$event","target","CoreTagIndexPage_ion_list_15_Template","CoreTagIndexPage_core_empty_box_16_Template","ɵɵtextInterpolate2","ɵɵpropertyInterpolate"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/tag/pages/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/tag/pages/index/index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit } from '@angular/core';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTag } from '@features/tag/services/tag';\nimport { CoreTagAreaDelegate } from '@features/tag/services/tag-area-delegate';\nimport { CoreScreen } from '@services/screen';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { Translate } from '@singletons';\nimport { CoreUrlUtils } from '@services/utils/url';\n\n/**\n * Page that displays the tag index.\n */\n@Component({\n    selector: 'page-core-tag-index',\n    templateUrl: 'index.html',\n})\nexport class CoreTagIndexPage implements OnInit {\n\n    tagId = 0;\n    tagName = '';\n    collectionId = 0;\n    areaId = 0;\n    fromContextId = 0;\n    contextId = 0;\n    recursive = true;\n    loaded = false;\n    selectedAreaId?: number;\n    hasUnsupportedAreas = false;\n\n    areas: CoreTagAreaDisplay[] = [];\n\n    protected logView: () => void;\n\n    constructor() {\n        this.logView = CoreTime.once(async () => {\n            const params = {\n                tc: this.collectionId || undefined,\n                tag: this.tagName || undefined,\n                ta: this.areaId || undefined,\n                from: this.fromContextId || undefined,\n                ctx: this.contextId || undefined,\n            };\n\n            CoreAnalytics.logEvent({\n                type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n                ws: 'core_tag_get_tagindex_per_area',\n                name: this.tagName || Translate.instant('core.tag.tag'),\n                data: { id: this.tagId || undefined, ...params, category: 'tag' },\n                url: CoreUrlUtils.addParamsToUrl('/tag/index.php', params),\n            });\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.tagId = CoreNavigator.getRouteNumberParam('tagId') || this.tagId;\n        this.tagName = CoreNavigator.getRouteParam('tagName') || this.tagName;\n        this.collectionId = CoreNavigator.getRouteNumberParam('collectionId') || this.collectionId;\n        this.areaId = CoreNavigator.getRouteNumberParam('areaId') || this.areaId;\n        this.fromContextId = CoreNavigator.getRouteNumberParam('fromContextId') || this.fromContextId;\n        this.contextId = CoreNavigator.getRouteNumberParam('contextId') || this.contextId;\n        this.recursive = CoreNavigator.getRouteBooleanParam('recursive') ?? true;\n\n        try {\n            await this.fetchData();\n            if (CoreScreen.isTablet && this.areas && this.areas.length > 0) {\n                const area = this.areas.find((area) => area.id == this.areaId);\n                this.openArea(area || this.areas[0]);\n            }\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Fetch first page of tag index per area.\n     *\n     * @returns Resolved when done.\n     */\n    async fetchData(): Promise<void> {\n        try {\n            const areas = await CoreTag.getTagIndexPerArea(\n                this.tagId,\n                this.tagName,\n                this.collectionId,\n                this.areaId,\n                this.fromContextId,\n                this.contextId,\n                this.recursive,\n                0,\n            );\n\n            this.areas = [];\n            this.hasUnsupportedAreas = false;\n\n            const areasDisplay: CoreTagAreaDisplay[] = [];\n\n            await Promise.all(areas.map(async (area) => {\n                const items = await CoreTagAreaDelegate.parseContent(area.component, area.itemtype, area.content);\n\n                if (!items || !items.length) {\n                    // Tag area not supported, skip.\n                    this.hasUnsupportedAreas = true;\n\n                    return;\n                }\n\n                areasDisplay.push({\n                    id: area.ta,\n                    componentName: area.component,\n                    itemType: area.itemtype,\n                    nameKey: CoreTagAreaDelegate.getDisplayNameKey(area.component, area.itemtype),\n                    items,\n                    canLoadMore: !!area.nextpageurl,\n                    badge: items && items.length ? items.length + (area.nextpageurl ? '+' : '') : '',\n                });\n            }));\n\n            this.areas = areasDisplay;\n\n            this.logView();\n\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading tag index');\n        }\n    }\n\n    /**\n     * Refresh data.\n     *\n     * @param refresher Refresher.\n     */\n    refreshData(refresher?: HTMLIonRefresherElement): void {\n        CoreTag.invalidateTagIndexPerArea(\n            this.tagId,\n            this.tagName,\n            this.collectionId,\n            this.areaId,\n            this.fromContextId,\n            this.contextId,\n            this.recursive,\n        ).finally(() => {\n            this.fetchData().finally(() => {\n                refresher?.complete();\n            });\n        });\n    }\n\n    /**\n     * Navigate to an index area.\n     *\n     * @param area Area.\n     */\n    openArea(area: CoreTagAreaDisplay): void {\n        if (area.id === this.selectedAreaId) {\n            // Already opened.\n            return;\n        }\n\n        if (CoreScreen.isTablet) {\n            this.selectedAreaId = area.id;\n        }\n\n        const params = {\n            tagId: this.tagId,\n            tagName: this.tagName,\n            collectionId: this.collectionId,\n            areaId: area.id,\n            fromContextId: this.fromContextId,\n            contextId: this.contextId,\n            recursive: this.recursive,\n            areaNameKey: area.nameKey,\n            componentName: area.componentName,\n            itemType: area.itemType,\n            items: area.items.slice(),\n            canLoadMore: area.canLoadMore,\n            nextPage: 1,\n        };\n\n        const splitViewLoaded = CoreNavigator.isCurrentPathInTablet('**/tag/index/index-area');\n        const path = (splitViewLoaded ? '../' : '') + 'index-area';\n\n        CoreNavigator.navigate(path, { params });\n    }\n\n}\n\nexport type CoreTagAreaDisplay = {\n    id: number;\n    componentName: string;\n    itemType: string;\n    nameKey: string;\n    items: unknown[];\n    canLoadMore: boolean;\n    badge: string;\n};\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>{{ 'core.tag.tag' | translate }}: {{ tagName }}</h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n\n<ion-content>\n    <core-split-view>\n        <ion-refresher slot=\"fixed\" [disabled]=\"!loaded\" (ionRefresh)=\"refreshData($event.target)\">\n            <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n        </ion-refresher>\n        <core-loading [hideUntil]=\"loaded\">\n            <ion-list *ngIf=\"hasUnsupportedAreas || areas.length\">\n                <ion-item *ngIf=\"hasUnsupportedAreas\" class=\"core-warning-item\">\n                    <ion-icon slot=\"start\" name=\"fas-triangle-exclamation\" color=\"warning\" aria-hidden=\"true\" />\n                    <ion-label class=\"ion-text-wrap\">{{ 'core.tag.warningareasnotsupported' | translate }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngFor=\"let area of areas\" [attr.aria-label]=\"area.nameKey | translate\"\n                    (click)=\"openArea(area)\" [attr.aria-current]=\"area.id === selectedAreaId ? 'page' : 'false'\" button [detail]=\"true\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ area.nameKey | translate }}</p>\n                    </ion-label>\n                    <ion-badge slot=\"end\" *ngIf=\"area.badge\">\n                        <span aria-hidden=\"true\">{{ area.badge }}</span>\n                        <span class=\"sr-only\">{{ 'core.tag.tagareabadgedescription' | translate:{ count: area.badge } }}</span>\n                    </ion-badge>\n                </ion-item>\n            </ion-list>\n            <core-empty-box icon=\"fas-tag\" *ngIf=\"!hasUnsupportedAreas && (!areas || !areas.length)\"\n                [message]=\"'core.tag.noresultsfor' | translate: { $a: tagName }\" />\n        </core-loading>\n    </core-split-view>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}