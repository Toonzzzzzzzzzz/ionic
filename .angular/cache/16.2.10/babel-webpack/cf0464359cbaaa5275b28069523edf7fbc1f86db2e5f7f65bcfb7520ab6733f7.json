{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { AddonUserProfileFieldTextareaComponent } from '../../component/textarea';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { makeSingleton } from '@singletons';\nimport * as i0 from \"@angular/core\";\n/**\n * Textarea user profile field handlers.\n */\nexport class AddonUserProfileFieldTextareaHandlerService {\n  constructor() {\n    this.name = 'AddonUserProfileFieldTextarea';\n    this.type = 'textarea';\n  }\n  /**\n   * Whether or not the handler is enabled on a site level.\n   *\n   * @returns True or promise resolved with true if enabled.\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  }\n  /**\n   * Get the data to send for the field based on the input data.\n   *\n   * @param field User field to get the data for.\n   * @param signup True if user is in signup page.\n   * @param registerAuth Register auth method. E.g. 'email'.\n   * @param formValues Form Values.\n   * @returns Data to send for the field.\n   */\n  getData(field, signup, registerAuth, formValues) {\n    return _asyncToGenerator(function* () {\n      const name = 'profile_field_' + field.shortname;\n      if (formValues[name]) {\n        let text = formValues[name] || '';\n        // Add some HTML to the message in case the user edited with textarea.\n        text = CoreTextUtils.formatHtmlLines(text);\n        return {\n          type: 'textarea',\n          name: name,\n          value: JSON.stringify({\n            text: text,\n            format: 1 // Always send this format.\n          })\n        };\n      }\n    })();\n  }\n  /**\n   * Return the Component to use to display the user profile field.\n   * It's recommended to return the class of the component, but you can also return an instance of the component.\n   *\n   * @returns The component (or promise resolved with component) to use, undefined if not found.\n   */\n  getComponent() {\n    return AddonUserProfileFieldTextareaComponent;\n  }\n}\n_class = AddonUserProfileFieldTextareaHandlerService;\n_class.ɵfac = function AddonUserProfileFieldTextareaHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonUserProfileFieldTextareaHandler = makeSingleton(AddonUserProfileFieldTextareaHandlerService);","map":{"version":3,"names":["AddonUserProfileFieldTextareaComponent","CoreTextUtils","makeSingleton","AddonUserProfileFieldTextareaHandlerService","constructor","name","type","isEnabled","_asyncToGenerator","getData","field","signup","registerAuth","formValues","shortname","text","formatHtmlLines","value","JSON","stringify","format","getComponent","factory","ɵfac","providedIn","AddonUserProfileFieldTextareaHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/userprofilefield/textarea/services/handlers/textarea.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable, Type } from '@angular/core';\n\nimport { CoreUserProfileFieldHandler, CoreUserProfileFieldHandlerData } from '@features/user/services/user-profile-field-delegate';\nimport { AddonUserProfileFieldTextareaComponent } from '../../component/textarea';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { AuthEmailSignupProfileField } from '@features/login/services/login-helper';\nimport { CoreUserProfileField } from '@features/user/services/user';\nimport { makeSingleton } from '@singletons';\nimport { CoreFormFields } from '@singletons/form';\n\n/**\n * Textarea user profile field handlers.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonUserProfileFieldTextareaHandlerService implements CoreUserProfileFieldHandler {\n\n    name = 'AddonUserProfileFieldTextarea';\n    type = 'textarea';\n\n    /**\n     * Whether or not the handler is enabled on a site level.\n     *\n     * @returns True or promise resolved with true if enabled.\n     */\n    async isEnabled(): Promise<boolean> {\n        return true;\n    }\n\n    /**\n     * Get the data to send for the field based on the input data.\n     *\n     * @param field User field to get the data for.\n     * @param signup True if user is in signup page.\n     * @param registerAuth Register auth method. E.g. 'email'.\n     * @param formValues Form Values.\n     * @returns Data to send for the field.\n     */\n    async getData(\n        field: AuthEmailSignupProfileField | CoreUserProfileField,\n        signup: boolean,\n        registerAuth: string,\n        formValues: CoreFormFields,\n    ): Promise<CoreUserProfileFieldHandlerData | undefined> {\n        const name = 'profile_field_' + field.shortname;\n\n        if (formValues[name]) {\n            let text = <string> formValues[name] || '';\n            // Add some HTML to the message in case the user edited with textarea.\n            text = CoreTextUtils.formatHtmlLines(text);\n\n            return {\n                type: 'textarea',\n                name: name,\n                value: JSON.stringify({\n                    text: text,\n                    format: 1, // Always send this format.\n                }),\n            };\n        }\n    }\n\n    /**\n     * Return the Component to use to display the user profile field.\n     * It's recommended to return the class of the component, but you can also return an instance of the component.\n     *\n     * @returns The component (or promise resolved with component) to use, undefined if not found.\n     */\n    getComponent(): Type<unknown> | Promise<Type<unknown>> {\n        return AddonUserProfileFieldTextareaComponent;\n    }\n\n}\n\nexport const AddonUserProfileFieldTextareaHandler = makeSingleton(AddonUserProfileFieldTextareaHandlerService);\n"],"mappings":";;AAiBA,SAASA,sCAAsC,QAAQ,0BAA0B;AACjF,SAASC,aAAa,QAAQ,sBAAsB;AAGpD,SAASC,aAAa,QAAQ,aAAa;;AAG3C;;;AAIA,OAAM,MAAOC,2CAA2C;EADxDC,YAAA;IAGI,KAAAC,IAAI,GAAG,+BAA+B;IACtC,KAAAC,IAAI,GAAG,UAAU;;EAEjB;;;;;EAKMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAO,IAAI;IAAC;EAChB;EAEA;;;;;;;;;EASMC,OAAOA,CACTC,KAAyD,EACzDC,MAAe,EACfC,YAAoB,EACpBC,UAA0B;IAAA,OAAAL,iBAAA;MAE1B,MAAMH,IAAI,GAAG,gBAAgB,GAAGK,KAAK,CAACI,SAAS;MAE/C,IAAID,UAAU,CAACR,IAAI,CAAC,EAAE;QAClB,IAAIU,IAAI,GAAYF,UAAU,CAACR,IAAI,CAAC,IAAI,EAAE;QAC1C;QACAU,IAAI,GAAGd,aAAa,CAACe,eAAe,CAACD,IAAI,CAAC;QAE1C,OAAO;UACHT,IAAI,EAAE,UAAU;UAChBD,IAAI,EAAEA,IAAI;UACVY,KAAK,EAAEC,IAAI,CAACC,SAAS,CAAC;YAClBJ,IAAI,EAAEA,IAAI;YACVK,MAAM,EAAE,CAAC,CAAE;WACd;SACJ;;IACJ;EACL;EAEA;;;;;;EAMAC,YAAYA,CAAA;IACR,OAAOrB,sCAAsC;EACjD;;SAvDSG,2CAA2C;;mBAA3CA,MAA2C;AAAA;;SAA3CA,MAA2C;EAAAmB,OAAA,EAA3CnB,MAA2C,CAAAoB,IAAA;EAAAC,UAAA,EAD9B;AAAM;AA4DhC,OAAO,MAAMC,oCAAoC,GAAGvB,aAAa,CAACC,2CAA2C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}