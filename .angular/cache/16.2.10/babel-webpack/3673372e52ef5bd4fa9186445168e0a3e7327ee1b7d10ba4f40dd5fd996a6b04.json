{"ast":null,"code":"import _objectSpread from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreTabsOutletComponent } from '@components/tabs-outlet/tabs-outlet';\nimport { CoreCourseFormatDelegate } from '../../services/format-delegate';\nimport { CoreCourseOptionsDelegate } from '../../services/course-options-delegate';\nimport { CoreEvents } from '@singletons/events';\nimport { CoreCourse, CoreCourseModuleCompletionStatus } from '@features/course/services/course';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreNavigator } from '@services/navigator';\nimport { CONTENTS_PAGE_NAME } from '@features/course/course.module';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCoursesHelper } from '@features/courses/services/courses-helper';\nimport { CoreColors } from '@singletons/colors';\nimport { CorePath } from '@singletons/path';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nconst _c0 = [\"courseThumb\"];\nfunction CoreCourseIndexPage_ng_container_15_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13, 14);\n    i0.ɵɵelement(2, \"ion-icon\", 15);\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CoreCourseIndexPage_ng_container_15_ion_avatar_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-avatar\", 13);\n    i0.ɵɵelement(1, \"img\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r3.course.courseimage, i0.ɵɵsanitizeUrl);\n  }\n}\nfunction CoreCourseIndexPage_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseIndexPage_ng_container_15_div_1_Template, 3, 0, \"div\", 12);\n    i0.ɵɵtemplate(2, CoreCourseIndexPage_ng_container_15_ion_avatar_2_Template, 2, 1, \"ion-avatar\", 12);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.course.courseimage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.course.courseimage);\n  }\n}\nfunction CoreCourseIndexPage_div_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵelement(1, \"core-progress-bar\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"progress\", ctx_r1.progress);\n  }\n}\n/**\n * Page that displays the list of courses the user is enrolled in.\n */\nexport class CoreCourseIndexPage {\n  constructor(route) {\n    this.route = route;\n    this.title = '';\n    this.category = '';\n    this.tabs = [];\n    this.loaded = false;\n    this.fullScreenEnabled = false;\n    this.currentPagePath = '';\n    this.sections = []; // List of course sections.\n    this.isGuest = false;\n    this.openModule = true;\n    this.contentsTab = {\n      page: CONTENTS_PAGE_NAME,\n      title: 'core.course',\n      pageParams: {}\n    };\n    this.selectTabObserver = CoreEvents.on(CoreEvents.SELECT_COURSE_TAB, data => {\n      if (!data.name) {\n        var _this$tabsComponent;\n        // If needed, set sectionId and sectionNumber. They'll only be used if the content tabs hasn't been loaded yet.\n        if (data.sectionId) {\n          this.contentsTab.pageParams.sectionId = data.sectionId;\n        }\n        if (data.sectionNumber !== undefined) {\n          this.contentsTab.pageParams.sectionNumber = data.sectionNumber;\n        }\n        // Select course contents.\n        (_this$tabsComponent = this.tabsComponent) === null || _this$tabsComponent === void 0 || _this$tabsComponent.selectByIndex(0);\n      } else if (this.tabs) {\n        const index = this.tabs.findIndex(tab => tab.name == data.name);\n        if (index >= 0) {\n          var _this$tabsComponent2;\n          (_this$tabsComponent2 = this.tabsComponent) === null || _this$tabsComponent2 === void 0 || _this$tabsComponent2.selectByIndex(index);\n        }\n      }\n    });\n    // The completion of any of the modules have changed.\n    this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, data => {\n      var _this$course;\n      if (data.completion.courseId != ((_this$course = this.course) === null || _this$course === void 0 ? void 0 : _this$course.id)) {\n        return;\n      }\n      if (data.completion.valueused !== false || !this.course || !('progress' in this.course) || typeof this.course.progress != 'number') {\n        return;\n      }\n      // If the completion value is not used, the page won't be reloaded, so update the progress bar.\n      const completionModules = [].concat(...this.sections.map(section => section.modules)).map(module => module.completion && module.completion > 0 ? 1 : module.completion).reduce((accumulator, currentValue) => (accumulator || 0) + (currentValue || 0), 0);\n      const moduleProgressPercent = 100 / (completionModules || 1);\n      // Use min/max here to avoid floating point rounding errors over/under-flowing the progress bar.\n      if (data.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n        this.course.progress = Math.min(100, this.course.progress + moduleProgressPercent);\n      } else {\n        this.course.progress = Math.max(0, this.course.progress - moduleProgressPercent);\n      }\n      this.updateProgress();\n    });\n    this.fullScreenObserver = CoreEvents.on(CoreEvents.FULL_SCREEN_CHANGED, event => {\n      this.fullScreenEnabled = event.enabled;\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _CoreNavigator$getRou, _CoreNavigator$getRou2;\n      // Increase route depth.\n      const path = CoreNavigator.getRouteFullPath(_this.route.snapshot);\n      CoreNavigator.increaseRouteDepth(path.replace(/(\\/deep)+/, ''));\n      try {\n        _this.course = CoreNavigator.getRequiredRouteParam('course');\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n        CoreNavigator.back();\n        _this.loaded = true;\n        return;\n      }\n      _this.firstTabName = CoreNavigator.getRouteParam('selectedTab');\n      _this.module = CoreNavigator.getRouteParam('module');\n      _this.isGuest = (_CoreNavigator$getRou = CoreNavigator.getRouteBooleanParam('isGuest')) !== null && _CoreNavigator$getRou !== void 0 ? _CoreNavigator$getRou : !!_this.course && (yield CoreCourseHelper.courseUsesGuestAccessInfo(_this.course.id)).guestAccess;\n      _this.modNavOptions = CoreNavigator.getRouteParam('modNavOptions');\n      _this.openModule = (_CoreNavigator$getRou2 = CoreNavigator.getRouteBooleanParam('openModule')) !== null && _CoreNavigator$getRou2 !== void 0 ? _CoreNavigator$getRou2 : true; // If false, just scroll to module.\n      _this.currentPagePath = CoreNavigator.getCurrentPath();\n      _this.contentsTab.page = CorePath.concatenatePaths(_this.currentPagePath, _this.contentsTab.page);\n      _this.contentsTab.pageParams = {\n        course: _this.course,\n        sectionId: CoreNavigator.getRouteNumberParam('sectionId'),\n        sectionNumber: CoreNavigator.getRouteNumberParam('sectionNumber'),\n        blockInstanceId: CoreNavigator.getRouteNumberParam('blockInstanceId'),\n        isGuest: _this.isGuest\n      };\n      if (_this.module) {\n        _this.contentsTab.pageParams.moduleId = _this.module.id;\n        if (!_this.contentsTab.pageParams.sectionId && _this.contentsTab.pageParams.sectionNumber === undefined) {\n          // No section specified, use module section.\n          _this.contentsTab.pageParams.sectionId = _this.module.section;\n        }\n      }\n      _this.tabs.push(_this.contentsTab);\n      _this.loaded = true;\n      yield Promise.all([_this.loadCourseHandlers(), _this.loadBasinInfo()]);\n    })();\n  }\n  /**\n   * A tab was selected.\n   */\n  tabSelected() {\n    if (!this.module || !this.course || !this.openModule) {\n      return;\n    }\n    // Now that the first tab has been selected we can load the module.\n    CoreCourseHelper.openModule(this.module, this.course.id, {\n      sectionId: this.contentsTab.pageParams.sectionId,\n      modNavOptions: this.modNavOptions\n    });\n    delete this.module;\n  }\n  /**\n   * Load course option handlers.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadCourseHandlers() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.course) {\n        return;\n      }\n      // Load the course handlers.\n      const handlers = yield CoreCourseOptionsDelegate.getHandlersToDisplay(_this2.course, false, _this2.isGuest);\n      let tabToLoad;\n      // Create the full path.\n      handlers.forEach((handler, index) => {\n        handler.data.page = CorePath.concatenatePaths(_this2.currentPagePath, handler.data.page);\n        handler.data.pageParams = handler.data.pageParams || {};\n        // Check if this handler should be the first selected tab.\n        if (_this2.firstTabName && handler.name == _this2.firstTabName) {\n          tabToLoad = index + 1;\n        }\n      });\n      _this2.tabs = [..._this2.tabs, ...handlers.map(handler => _objectSpread(_objectSpread({}, handler.data), {}, {\n        name: handler.name\n      }))];\n      // Select the tab if needed.\n      _this2.firstTabName = undefined;\n      if (tabToLoad) {\n        var _this2$tabsComponent;\n        yield CoreUtils.nextTick();\n        (_this2$tabsComponent = _this2.tabsComponent) === null || _this2$tabsComponent === void 0 || _this2$tabsComponent.selectByIndex(tabToLoad);\n      }\n    })();\n  }\n  /**\n   * Load title for the page.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadBasinInfo() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.course) {\n        return;\n      }\n      // Get the title to display initially.\n      _this3.title = CoreCourseFormatDelegate.getCourseTitle(_this3.course);\n      yield _this3.setCourseColor();\n      _this3.updateProgress();\n      // Load sections.\n      _this3.sections = yield CoreUtils.ignoreErrors(CoreCourse.getSections(_this3.course.id, false, true), []);\n      if (!_this3.sections) {\n        return;\n      }\n      // Get the title again now that we have sections.\n      _this3.title = CoreCourseFormatDelegate.getCourseTitle(_this3.course, _this3.sections);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$selectTabObserv, _this$completionObser, _this$fullScreenObser;\n    const path = CoreNavigator.getRouteFullPath(this.route.snapshot);\n    CoreNavigator.decreaseRouteDepth(path.replace(/(\\/deep)+/, ''));\n    (_this$selectTabObserv = this.selectTabObserver) === null || _this$selectTabObserv === void 0 || _this$selectTabObserv.off();\n    (_this$completionObser = this.completionObserver) === null || _this$completionObser === void 0 || _this$completionObser.off();\n    (_this$fullScreenObser = this.fullScreenObserver) === null || _this$fullScreenObser === void 0 || _this$fullScreenObser.off();\n  }\n  /**\n   * User entered the page.\n   */\n  ionViewDidEnter() {\n    var _this$tabsComponent3;\n    (_this$tabsComponent3 = this.tabsComponent) === null || _this$tabsComponent3 === void 0 || _this$tabsComponent3.ionViewDidEnter();\n  }\n  /**\n   * User left the page.\n   */\n  ionViewDidLeave() {\n    var _this$tabsComponent4;\n    (_this$tabsComponent4 = this.tabsComponent) === null || _this$tabsComponent4 === void 0 || _this$tabsComponent4.ionViewDidLeave();\n  }\n  /**\n   * Open the course summary\n   */\n  openCourseSummary() {\n    if (this.course) {\n      CoreCourseHelper.openCourseSummary(this.course);\n    }\n  }\n  /**\n   * Update course progress.\n   */\n  updateProgress() {\n    if (!this.course || !('progress' in this.course) || typeof this.course.progress !== 'number' || this.course.progress < 0 || this.course.completionusertracked === false) {\n      this.progress = undefined;\n      return;\n    }\n    this.progress = this.course.progress;\n  }\n  /**\n   * Set course color.\n   */\n  setCourseColor() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this4.course) {\n        return;\n      }\n      yield CoreCoursesHelper.loadCourseColorAndImage(_this4.course);\n      if (!_this4.courseThumb) {\n        return;\n      }\n      if (_this4.course.color) {\n        _this4.courseThumb.nativeElement.style.setProperty('--course-color', _this4.course.color);\n        const tint = CoreColors.lighter(_this4.course.color, 50);\n        _this4.courseThumb.nativeElement.style.setProperty('--course-color-tint', tint);\n      } else if (_this4.course.colorNumber !== undefined) {\n        _this4.courseThumb.nativeElement.classList.add('course-color-' + _this4.course.colorNumber);\n      }\n    })();\n  }\n}\n_class = CoreCourseIndexPage;\n_class.ɵfac = function CoreCourseIndexPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-course-index\"]],\n  viewQuery: function CoreCourseIndexPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreTabsOutletComponent, 5);\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tabsComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.courseThumb = _t.first);\n    }\n  },\n  decls: 21,\n  vars: 15,\n  consts: [[3, \"collapsible\"], [\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\"], [\"name\", \"fas-circle-info\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [1, \"core-course-header\"], [\"collapsible\", \"\", 1, \"core-format-progress-list\", \"ion-text-wrap\", \"list-item-limited-width\"], [4, \"ngIf\"], [\"class\", \"core-course-progress\", 4, \"ngIf\"], [3, \"tabs\", \"hideUntil\", \"ionChange\"], [\"slot\", \"start\", \"class\", \"core-course-thumb\", 4, \"ngIf\"], [\"slot\", \"start\", 1, \"core-course-thumb\"], [\"courseThumb\", \"\"], [\"name\", \"fas-graduation-cap\", \"aria-hidden\", \"true\", 1, \"course-icon\"], [\"core-external-content\", \"\", \"alt\", \"\", 3, \"src\"], [1, \"core-course-progress\"], [\"a11yText\", \"core.course.aria:sectionprogress\", 3, \"progress\"]],\n  template: function CoreCourseIndexPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1);\n      i0.ɵɵelement(3, \"ion-back-button\", 2);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵelement(7, \"core-format-text\", 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"ion-buttons\", 4)(9, \"ion-button\", 5);\n      i0.ɵɵlistener(\"click\", function CoreCourseIndexPage_Template_ion_button_click_9_listener() {\n        return ctx.openCourseSummary();\n      });\n      i0.ɵɵpipe(10, \"translate\");\n      i0.ɵɵelement(11, \"ion-icon\", 6);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"core-context-menu\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(13, \"div\", 7)(14, \"ion-item\", 8);\n      i0.ɵɵtemplate(15, CoreCourseIndexPage_ng_container_15_Template, 3, 2, \"ng-container\", 9);\n      i0.ɵɵelementStart(16, \"ion-label\")(17, \"h1\");\n      i0.ɵɵelement(18, \"core-format-text\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, CoreCourseIndexPage_div_19_Template, 2, 1, \"div\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(20, \"core-tabs-outlet\", 11);\n      i0.ɵɵlistener(\"ionChange\", function CoreCourseIndexPage_Template_core_tabs_outlet_ionChange_20_listener() {\n        return ctx.tabSelected();\n      });\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"collapsible\", ((ctx.tabsComponent == null ? null : ctx.tabsComponent.selectedIndex) === 0 || (ctx.tabsComponent == null ? null : ctx.tabsComponent.selectedIndex) === undefined) && !ctx.fullScreenEnabled);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 11, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"text\", ctx.title)(\"contextInstanceId\", ctx.course == null ? null : ctx.course.id);\n      i0.ɵɵadvance(2);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(10, 13, \"core.course.coursesummary\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.course);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", ctx.title)(\"contextInstanceId\", ctx.course == null ? null : ctx.course.id);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.progress !== undefined);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"tabs\", ctx.tabs)(\"hideUntil\", ctx.loaded);\n    }\n  },\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%]   .core-format-progress-list[_ngcontent-%COMP%] {\\n  width: 100%;\\n}\\n[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%] {\\n  height: var(--core-courseimage-on-course-size);\\n  min-height: var(--core-courseimage-on-course-size);\\n  width: var(--core-courseimage-on-course-size);\\n  min-width: var(--core-courseimage-on-course-size);\\n  --border-radius: var(--core-courseimage-radius);\\n  -webkit-margin-start: 0px;\\n  margin-inline-start: 0px;\\n  -webkit-margin-end: 16px;\\n  margin-inline-end: 16px;\\n  margin-top: 8px;\\n  margin-bottom: 8px;\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-0[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-0);\\n  --course-color-tint: var(--core-course-color-0-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-1[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-1);\\n  --course-color-tint: var(--core-course-color-1-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-2[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-2);\\n  --course-color-tint: var(--core-course-color-2-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-3[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-3);\\n  --course-color-tint: var(--core-course-color-3-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-4[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-4);\\n  --course-color-tint: var(--core-course-color-4-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-5[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-5);\\n  --course-color-tint: var(--core-course-color-5-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-6[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-6);\\n  --course-color-tint: var(--core-course-color-6-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-7[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-7);\\n  --course-color-tint: var(--core-course-color-7-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-8[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-8);\\n  --course-color-tint: var(--core-course-color-8-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb.course-color-9[_ngcontent-%COMP%] {\\n  --course-color: var(--core-course-color-9);\\n  --course-color-tint: var(--core-course-color-9-tint);\\n}\\n[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%]   ion-icon.course-icon[_ngcontent-%COMP%] {\\n  padding: 12px;\\n  font-size: calc(var(--core-courseimage-on-course-size) - 24px);\\n  border-radius: var(--border-radius);\\n  color: var(--course-color-tint);\\n  background: var(--course-color, transparent);\\n}\\n[_nghost-%COMP%]   .core-course-thumb[_ngcontent-%COMP%]   img[src$=\\\".svg\\\"][_ngcontent-%COMP%] {\\n  min-width: 100%;\\n}\\n[_nghost-%COMP%]   h1[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n}\\n[_nghost-%COMP%]   .core-course-header[_ngcontent-%COMP%] {\\n  background: var(--ion-item-background);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvY29yZS9mZWF0dXJlcy9jb3Vyc2UvcGFnZXMvaW5kZXgvaW5kZXguc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7OztFQUFBO0FDRUE7Ozs7RUFBQTtBQTRHQTs7RUFBQTtBQzlHQTs7OztFQUFBO0FDQUE7Ozs7RUFBQTtBQStEQTs7OztFQUFBO0FDNURJO0VBQ0ksV0FBQTtBQW1EUjtBQWhESTtFQUNJLDhDQUFBO0VBQ0Esa0RBQUE7RUFDQSw2Q0FBQTtFQUNBLGlEQUFBO0VBQ0EsK0NBQUE7RUx5U0oseUJLeFNvQztFTHlTcEMsd0JLelNvQztFTDBTcEMsd0JLMVN5QjtFTDJTekIsdUJLM1N5QjtFTHlUM0IsZUt6VHNCO0VMMFR0QixrQksxVGlDO0FBdURuQztBQXBEWTtFQUNJLDBDQUFBO0VBQ0Esb0RBQUE7QUFzRGhCO0FBeERZO0VBQ0ksMENBQUE7RUFDQSxvREFBQTtBQTBEaEI7QUE1RFk7RUFDSSwwQ0FBQTtFQUNBLG9EQUFBO0FBOERoQjtBQWhFWTtFQUNJLDBDQUFBO0VBQ0Esb0RBQUE7QUFrRWhCO0FBcEVZO0VBQ0ksMENBQUE7RUFDQSxvREFBQTtBQXNFaEI7QUF4RVk7RUFDSSwwQ0FBQTtFQUNBLG9EQUFBO0FBMEVoQjtBQTVFWTtFQUNJLDBDQUFBO0VBQ0Esb0RBQUE7QUE4RWhCO0FBaEZZO0VBQ0ksMENBQUE7RUFDQSxvREFBQTtBQWtGaEI7QUFwRlk7RUFDSSwwQ0FBQTtFQUNBLG9EQUFBO0FBc0ZoQjtBQXhGWTtFQUNJLDBDQUFBO0VBQ0Esb0RBQUE7QUEwRmhCO0FBdEZRO0VBQ0ksYUFBQTtFQUNBLDhEQUFBO0VBQ0EsbUNBQUE7RUFDQSwrQkFBQTtFQUNBLDRDQUFBO0FBd0ZaO0FBcEZRO0VBQ0ksZUFBQTtBQXNGWjtBQXRFSTtFQUNJLGVBQUE7QUF3RVI7QUFyRUk7RUFDSSxzQ0FBQTtBQXVFUiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXBwIEdsb2JhbCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSB0aGUgZGlmZmVyZW50IGZpbGVzIHlvdSBzaG91bGQgaW1wb3J0IHRvIHVzZSBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiRmb250LXBhdGg6IFwiLi4vYXNzZXRzL2ZvbnRzXCI7XG4kYXNzZXRzLXBhdGg6IFwiLi4vYXNzZXRzXCI7XG5cbkBpbXBvcnQgXCIuL2hlbHBlcnMvaGVscGVycy5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLmN1c3RvbS5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLnZhcmlhYmxlcy5zY3NzXCI7XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIHN0cmluZyBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5zdHJpbmcuc2Nzc1xuICovXG5cblxuLy8gU3RyaW5nIFV0aWxpdHkgRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBTdHJpbmcgUmVwbGFjZSBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1yZXBsYWNlKCRzdHJpbmcsICRzZWFyY2gsICRyZXBsYWNlOiBcIlwiKSB7XG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZWFyY2gpO1xuXG4gIEBpZiAkaW5kZXgge1xuICAgIEByZXR1cm4gc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpICsgJHJlcGxhY2UgKyBzdHItcmVwbGFjZShzdHItc2xpY2UoJHN0cmluZywgJGluZGV4ICsgc3RyLWxlbmd0aCgkc2VhcmNoKSksICRzZWFyY2gsICRyZXBsYWNlKTtcbiAgfVxuXG4gIEByZXR1cm4gJHN0cmluZztcbn1cblxuLy8gU3RyaW5nIFNwbGl0IEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbkBmdW5jdGlvbiBzdHItc3BsaXQoJHN0cmluZywgJHNlcGFyYXRvcikge1xuICAvLyBlbXB0eSBhcnJheS9saXN0XG4gICRzcGxpdC1hcnI6ICgpO1xuICAvLyBmaXJzdCBpbmRleCBvZiBzZXBhcmF0b3IgaW4gc3RyaW5nXG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZXBhcmF0b3IpO1xuICAvLyBsb29wIHRocm91Z2ggc3RyaW5nXG4gIEB3aGlsZSAkaW5kZXggIT0gbnVsbCB7XG4gICAgLy8gZ2V0IHRoZSBzdWJzdHJpbmcgZnJvbSB0aGUgZmlyc3QgY2hhcmFjdGVyIHRvIHRoZSBzZXBhcmF0b3JcbiAgICAkaXRlbTogc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpO1xuICAgIC8vIHB1c2ggaXRlbSB0byBhcnJheVxuICAgICRzcGxpdC1hcnI6IGFwcGVuZCgkc3BsaXQtYXJyLCAkaXRlbSk7XG4gICAgLy8gcmVtb3ZlIGl0ZW0gYW5kIHNlcGFyYXRvciBmcm9tIHN0cmluZ1xuICAgICRzdHJpbmc6IHN0ci1zbGljZSgkc3RyaW5nLCAkaW5kZXggKyAxKTtcbiAgICAvLyBmaW5kIG5ldyBpbmRleCBvZiBzZXBhcmF0b3JcbiAgICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VwYXJhdG9yKTtcbiAgfVxuICAvLyBhZGQgdGhlIHJlbWFpbmluZyBzdHJpbmcgdG8gbGlzdCAodGhlIGxhc3QgaXRlbSlcbiAgJHNwbGl0LWFycjogYXBwZW5kKCRzcGxpdC1hcnIsICRzdHJpbmcpO1xuXG4gIEByZXR1cm4gJHNwbGl0LWFycjtcbn1cblxuXG4vLyBTdHJpbmcgRXh0cmFjdCBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1leHRyYWN0KCRzdHJpbmcsICRzdGFydCwgJGVuZCkge1xuICAkc3RhcnQtaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc3RhcnQpO1xuXG4gIEBpZiAkc3RhcnQtaW5kZXgge1xuICAgICRwb3N0OiBzdHItc2xpY2UoJHN0cmluZywgJHN0YXJ0LWluZGV4ICsgc3RyLWxlbmd0aCgkc3RhcnQpKTtcbiAgICAkZW5kLWluZGV4OiBzdHItaW5kZXgoJHBvc3QsICRlbmQpO1xuXG4gICAgQGlmICRlbmQtaW5kZXgge1xuICAgICAgQHJldHVybiBzdHItc2xpY2UoJHBvc3QsIDEsICRlbmQtaW5kZXggLSAxKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuIG51bGw7XG59XG5cblxuLy8gU3RyaW5nIENvbnRhaW5zIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLWNvbnRhaW5zKCRzdHJpbmcsICRuZWVkbGUpIHtcbiAgQGlmICh0eXBlLW9mKCRzdHJpbmcpID09IHN0cmluZykge1xuICAgIEByZXR1cm4gc3RyLWluZGV4KCRzdHJpbmcsICRuZWVkbGUpICE9IG51bGw7XG4gIH1cblxuICBAcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIFVSTCBFbmNvZGUgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiB1cmwtZW5jb2RlKCR2YWwpIHtcbiAgJHNwYWNlczogc3RyLXJlcGxhY2UoJHZhbCwgXCIgXCIsIFwiJTIwXCIpO1xuICAkZW5jb2RlZDogc3RyLXJlcGxhY2UoJHNwYWNlcywgXCIjXCIsIFwiJTIzXCIpO1xuICBAcmV0dXJuICRlbmNvZGVkO1xufVxuXG5cbi8vIEFkZCBSb290IFNlbGVjdG9yXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQWRkcyBhIHJvb3Qgc2VsZWN0b3IgdXNpbmcgaG9zdCBiYXNlZCBvbiB0aGUgc2VsZWN0b3IgcGFzc2VkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gYWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsICRhZGRIb3N0U2VsZWN0b3IpIHtcbiAgJHNlbGVjdG9yczogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG5cbiAgJGxpc3Q6ICgpO1xuXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkc2VsZWN0b3JzIHtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgY29udGFpbnMgOmhvc3QoIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBhIGNsYXNzIG9uIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBuZWVkIHRvIGNoYW5nZSBob3cgd2UgdGFyZ2V0IGl0OlxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgIEBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0KFwiKSB7XG4gICAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgICAkc2hhZG93LWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzZWxlY3RvciwgXCI6aG9zdChcIiwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pOmhvc3QoXCIpO1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJHNoYWRvdy1lbGVtZW50LCBjb21tYSk7XG5cbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdChcIikge1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogJGVsZW1lbnQ7XG5cbiAgICAgICAgICAvLyBSZXBsYWNlIHRoZSA6aG9zdCggYW5kICkgc28gYWxsIHdlIGhhdmUgbGVmdCBpcyB0aGUgY2xhc3NcbiAgICAgICAgICAvLyBpbnNpZGUgb2YgaXQ6XG4gICAgICAgICAgLy8gOmhvc3QoLmZpeGVkKSAtPiAuZml4ZWRcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgXCIpXCIsIFwiXCIpO1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCBcIjpob3N0KFwiLCBcIlwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgY2xhc3MgYmFjayBpbnNpZGUgb2YgaG9zdCB3aXRoIHRoZSBydGwgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gLmZpeGVkIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCAkc2NvcGVkLWVsZW1lbnQsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KSN7JHNjb3BlZC1lbGVtZW50fVwiKTtcblxuICAgICAgICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRzY29wZWQtZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9IEBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgYmFjayBhbnkgc2VsZWN0b3JzIHRoYXQgZm9sbG93ZWQgdGhlIGhvc3QgYWZ0ZXIgdHJhbnNmb3JtaW5nIHRoZVxuICAgICAgICAgIC8vIGZpcnN0IHNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0KC5maXhlZCkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRlbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJG5ldy1lbGVtZW50LCBjb21tYSk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGNvbnRhaW5zIDpob3N0IHdpdGhvdXQgYSBwYXJhbnRoZXNlc1xuICAgIC8vIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBqdXN0IHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBjYW4gY2hhbmdlIGl0IHRvIGxvb2sgZm9yIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3RcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgLy8gLS0+IDpob3N0OmRpcihydGwpXG4gICAgfSBAZWxzZSBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0XCIpIHtcbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdFwiKSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgOmhvc3Qgd2l0aCB0aGUgYWRkSG9zdFNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0IC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgICAgICAgICR1cGRhdGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRlbGVtZW50LCBcIjpob3N0XCIsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KVwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgZmluYWwgc2VsZWN0b3IgYWZ0ZXIgYWxsIHRyYW5zZm9ybWF0aW9uczpcbiAgICAgICAgICAvLyA6aG9zdCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICR1cGRhdGVkLWVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfSBAZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGJhY2sgYW55IHNlbGVjdG9ycyB0aGF0IGZvbGxvd2VkIHRoZSBob3N0IGFmdGVyIHRyYW5zZm9ybWluZyB0aGVcbiAgICAgICAgICAvLyBmaXJzdCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCA6OnNsb3R0ZWQoaW9uLWljb24pIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRuZXctZWxlbWVudCwgY29tbWEpO1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBkb2VzIG5vdCBjb250YWluIGhvc3QgYXQgYWxsIGl0IGlzIGVpdGhlciBhIHNoYWRvd1xuICAgIC8vIG9yIG5vcm1hbCBlbGVtZW50IHNvIGFwcGVuZCBib3RoIHRoZSBhZGRIb3N0U2VsZWN0b3IgYW5kIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiaW9uLWNvbXBvbmVudFwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgaW9uLWNvbXBvbmVudFxuICAgIC8vIC0tPiBbZGlyPXJ0bF0gaW9uLWNvbXBvbmVudFxuICAgIH0gQGVsc2Uge1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgXCIjeyRhZGRIb3N0U2VsZWN0b3J9ICN7JHNlbGVjdG9yfVwiLCBjb21tYSk7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSkgI3skc2VsZWN0b3J9XCIsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuICRsaXN0O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBjb2xvciBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5jb2xvci5zY3NzXG4gKi9cblxuLy8gR2V0cyB0aGUgYWN0aXZlIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gYSB2YXJpYXRpb24uIEFscGhhIGlzIG9wdGlvbmFsLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV4YW1wbGUgdXNhZ2U6XG4vLyBjdXJyZW50LWNvbG9yKGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1iYXNlKVxuLy8gY3VycmVudC1jb2xvcihjb250cmFzdCwgMC4xKSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1jb250cmFzdC1yZ2IpLCAwLjEpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGN1cnJlbnQtY29sb3IoJHZhcmlhdGlvbiwgJGFscGhhOiBudWxsKSB7XG4gIEBpZiAkYWxwaGEgPT0gbnVsbCB7XG4gICAgQHJldHVybiB2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufSk7XG4gIH0gQGVsc2Uge1xuICAgIEByZXR1cm4gcmdiYSh2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufS1yZ2IpLCAjeyRhbHBoYX0pO1xuICB9XG59XG5cbi8vIEdldHMgdGhlIHNwZWNpZmljIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gdGhlIG5hbWUgYW5kIHZhcmlhdGlvbi4gQWxwaGEvcmdiIGFyZSBvcHRpb25hbC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gaW9uLWNvbG9yKHByaW1hcnksIGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LCAjMzg4MGZmKVxuLy8gaW9uLWNvbG9yKHNlY29uZGFyeSwgY29udHJhc3QpID0+IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnktY29udHJhc3QpXG4vLyBpb24tY29sb3IocHJpbWFyeSwgYmFzZSwgMC41KSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LXJnYiwgNTYsIDEyOCwgMjU1KSwgMC41KVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBpb24tY29sb3IoJG5hbWUsICR2YXJpYXRpb24sICRhbHBoYTogbnVsbCwgJHJnYjogbnVsbCkge1xuICAkdmFsdWVzOiBtYXAtZ2V0KCRjb2xvcnMsICRuYW1lKTtcbiAgJHZhbHVlOiBtYXAtZ2V0KCR2YWx1ZXMsICR2YXJpYXRpb24pO1xuICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9LSN7JHZhcmlhdGlvbn07XG5cbiAgQGlmICgkdmFyaWF0aW9uID09IGJhc2UpIHtcbiAgICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9O1xuICB9XG5cbiAgQGlmICgkYWxwaGEpIHtcbiAgICAkdmFsdWU6IGNvbG9yLXRvLXJnYi1saXN0KCR2YWx1ZSk7XG4gICAgQHJldHVybiByZ2JhKHZhcigjeyR2YXJpYWJsZX0tcmdiLCAkdmFsdWUpLCAkYWxwaGEpO1xuICB9XG4gIEBpZiAoJHJnYikge1xuICAgICR2YWx1ZTogY29sb3ItdG8tcmdiLWxpc3QoJHZhbHVlKTtcbiAgICAkdmFyaWFibGU6ICN7JHZhcmlhYmxlfS1yZ2I7XG4gIH1cblxuICBAcmV0dXJuIHZhcigjeyR2YXJpYWJsZX0sICR2YWx1ZSk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3Itc2hhZGUoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCMwMDAsICRjb2xvciwgMTIlKTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIHdoaXRlIHRvIGNyZWF0ZSBpdHMgdGludC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXRpbnQoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCNmZmYsICRjb2xvciwgMTAlKTtcbn1cblxuLy8gQ29udmVydHMgYSBjb2xvciB0byBhIGNvbW1hIHNlcGFyYXRlZCByZ2IuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGNvbG9yLXRvLXJnYi1saXN0KCRjb2xvcikge1xuICBAcmV0dXJuICN7cmVkKCRjb2xvcil9LCN7Z3JlZW4oJGNvbG9yKX0sI3tibHVlKCRjb2xvcil9O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBtaXhpbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLm1peGlucy5zY3NzXG4gKi9cblxuQG1peGluIGlucHV0LWNvdmVyKCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbigwLCBudWxsLCBudWxsLCAwKTtcbiAgQGluY2x1ZGUgbWFyZ2luKDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIGJvcmRlcjogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICBhcHBlYXJhbmNlOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuXG4gICY6Oi1tb3otZm9jdXMtaW5uZXIge1xuICAgIGJvcmRlcjogMDtcbiAgfVxufVxuXG5AbWl4aW4gdmlzdWFsbHktaGlkZGVuKCkge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuXG4gIGJvcmRlcjogMDtcbiAgb3V0bGluZTogMDtcbiAgY2xpcDogcmVjdCgwIDAgMCAwKTtcblxuICBvcGFjaXR5OiAwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbiAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5AbWl4aW4gdGV4dC1pbmhlcml0KCkge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiBpbmhlcml0O1xuICBmb250LXN0eWxlOiBpbmhlcml0O1xuICBmb250LXdlaWdodDogaW5oZXJpdDtcbiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7XG4gIHRleHQtZGVjb3JhdGlvbjogaW5oZXJpdDtcbiAgdGV4dC1pbmRlbnQ6IGluaGVyaXQ7XG4gIHRleHQtb3ZlcmZsb3c6IGluaGVyaXQ7XG4gIHRleHQtdHJhbnNmb3JtOiBpbmhlcml0O1xuICB0ZXh0LWFsaWduOiBpbmhlcml0O1xuICB3aGl0ZS1zcGFjZTogaW5oZXJpdDtcbiAgY29sb3I6IGluaGVyaXQ7XG59XG5cbkBtaXhpbiBidXR0b24tc3RhdGUoKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uKDAsIDAsIDAsIDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICBjb250ZW50OiBcIlwiO1xuXG4gIG9wYWNpdHk6IDA7XG59XG5cbi8vIEZvbnQgc21vb3RoaW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gZm9udC1zbW9vdGhpbmcoKSB7XG4gIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xufVxuXG4vLyBHZXQgdGhlIGtleSBmcm9tIGEgbWFwIGJhc2VkIG9uIHRoZSBpbmRleFxuQGZ1bmN0aW9uIGluZGV4LXRvLWtleSgkbWFwLCAkaW5kZXgpIHtcbiAgJGtleXM6IG1hcC1rZXlzKCRtYXApO1xuXG4gIEByZXR1cm4gbnRoKCRrZXlzLCAkaW5kZXgpO1xufVxuXG5cbi8vIEJyZWFrcG9pbnQgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQnJlYWtwb2ludCB2aWV3cG9ydCBzaXplcyBhbmQgbWVkaWEgcXVlcmllcy5cbi8vXG4vLyBCcmVha3BvaW50cyBhcmUgZGVmaW5lZCBhcyBhIG1hcCBvZiAobmFtZTogbWluaW11bSB3aWR0aCksIG9yZGVyIGZyb20gc21hbGwgdG8gbGFyZ2U6XG4vL1xuLy8gICAgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KVxuLy9cbi8vIFRoZSBtYXAgZGVmaW5lZCBpbiB0aGUgYCRzY3JlZW4tYnJlYWtwb2ludHNgIGdsb2JhbCB2YXJpYWJsZSBpcyB1c2VkIGFzIHRoZSBgJGJyZWFrcG9pbnRzYCBhcmd1bWVudCBieSBkZWZhdWx0LlxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gTWluaW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbWluKHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgNTc2cHhcbkBmdW5jdGlvbiBicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbmFtZSk7XG5cbiAgQHJldHVybiBpZigkbmFtZSAhPSBpbmRleC10by1rZXkoJGJyZWFrcG9pbnRzLCAxKSwgJG1pbiwgbnVsbCk7XG59XG5cbi8vIFJldHVybnMgYSBibGFuayBzdHJpbmcgaWYgc21hbGxlc3QgYnJlYWtwb2ludCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG5hbWUgd2l0aCBhIGRhc2ggaW5mcm9udC5cbi8vIFVzZWZ1bCBmb3IgbWFraW5nIHJlc3BvbnNpdmUgdXRpbGl0aWVzLlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoeHMsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIlwiICAoUmV0dXJucyBhIGJsYW5rIHN0cmluZylcbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIi1zbVwiXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1pbmZpeCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gIEByZXR1cm4gaWYoYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50cykgPT0gbnVsbCwgXCJcIiwgXCItI3skbmFtZX1cIik7XG59XG5cbi8vIE1lZGlhIG9mIGF0IGxlYXN0IHRoZSBtaW5pbXVtIGJyZWFrcG9pbnQgd2lkdGguIE5vIHF1ZXJ5IGZvciB0aGUgc21hbGxlc3QgYnJlYWtwb2ludC5cbi8vIE1ha2VzIHRoZSBAY29udGVudCBhcHBseSB0byB0aGUgZ2l2ZW4gYnJlYWtwb2ludCBhbmQgd2lkZXIuXG5AbWl4aW4gbWVkaWEtYnJlYWtwb2ludC11cCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1pbiB7XG4gICAgQG1lZGlhIChtaW4td2lkdGg6ICRtaW4pIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuLy8gTmFtZSBvZiB0aGUgbmV4dCBicmVha3BvaW50LCBvciBudWxsIGZvciB0aGUgbGFzdCBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSlcbi8vICAgIG1kXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBtZFxuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtLCAkYnJlYWtwb2ludC1uYW1lczogKHhzIHNtIG1kIGxnIHhsKSlcbi8vICAgIG1kXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1uZXh0KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMsICRicmVha3BvaW50LW5hbWVzOiBtYXAta2V5cygkYnJlYWtwb2ludHMpKSB7XG4gICRuOiBpbmRleCgkYnJlYWtwb2ludC1uYW1lcywgJG5hbWUpO1xuICBAcmV0dXJuIGlmKCRuIDwgbGVuZ3RoKCRicmVha3BvaW50LW5hbWVzKSwgbnRoKCRicmVha3BvaW50LW5hbWVzLCAkbiArIDEpLCBudWxsKTtcbn1cblxuLy8gTWF4aW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy8gVGhlIG1heGltdW0gdmFsdWUgaXMgcmVkdWNlZCBieSAwLjAycHggdG8gd29yayBhcm91bmQgdGhlIGxpbWl0YXRpb25zIG9mXG4vLyBgbWluLWAgYW5kIGBtYXgtYCBwcmVmaXhlcyBhbmQgdmlld3BvcnRzIHdpdGggZnJhY3Rpb25hbCB3aWR0aHMuXG4vL1xuLy8gU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9tZWRpYXF1ZXJpZXMtNC8jbXEtbWluLW1heFxuLy8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlx0Ly8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlxuLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzgyNjFcdC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4MjYxXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1tYXgobWQsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICA3NjcuOThweFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1heDogbWFwLWdldCgkYnJlYWtwb2ludHMsICRuYW1lKTtcbiAgQHJldHVybiBpZigkbWF4IGFuZCAkbWF4ID4gMCwgJG1heCAtIC4wMiwgbnVsbCk7XG59XG5cbi8vIE1lZGlhIG9mIGF0IG1vc3QgdGhlIG1heGltdW0gYnJlYWtwb2ludCB3aWR0aC4gTm8gcXVlcnkgZm9yIHRoZSBsYXJnZXN0IGJyZWFrcG9pbnQuXG4vLyBNYWtlcyB0aGUgQGNvbnRlbnQgYXBwbHkgdG8gdGhlIGdpdmVuIGJyZWFrcG9pbnQgYW5kIG5hcnJvd2VyLlxuQG1peGluIG1lZGlhLWJyZWFrcG9pbnQtZG93bigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtYXg6IGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1heCB7XG4gICAgQG1lZGlhIChtYXgtd2lkdGg6ICRtYXgpIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuXG4vLyBUZXh0IERpcmVjdGlvbiAtIGx0ciAvIHJ0bFxuLy9cbi8vIENTUyBkZWZhdWx0cyB0byB1c2UgdGhlIGx0ciBjc3MsIGFuZCBhZGRzIFtkaXI9cnRsXSBzZWxlY3RvcnNcbi8vIHRvIG92ZXJyaWRlIGx0ciBkZWZhdWx0cy5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG11bHRpLWRpcigpIHtcbiAgQGNvbnRlbnQ7XG5cbiAgLy8gJHJvb3Q6ICN7Jn07XG4gIC8vIEBhdC1yb290IFtkaXJdIHtcbiAgLy8gICAjeyRyb290fSB7XG4gIC8vICAgICBAY29udGVudDtcbiAgLy8gICB9XG4gIC8vIH1cbn1cblxuQG1peGluIHJ0bCgpIHtcbiAgJHJvb3Q6ICN7Jn07XG5cbiAgJHJvb3RTcGxpdDogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG4gICRzZWxlY3RvcnM6ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiW2Rpcj1ydGxdXCIpfTtcbiAgJHNlbGVjdG9yc1NwbGl0OiBzdHItc3BsaXQoJHNlbGVjdG9ycywgXCIsXCIpO1xuXG4gICRob3N0Q29udGV4dFNlbGVjdG9yczogKCk7XG4gICRyZXN0U2VsZWN0b3JzOiAoKTtcbiAgJGRpclNlbGVjdG9yczogKCk7XG5cbiAgLy8gU2VsZWN0b3JzIG11c3QgYmUgc3BsaXQgaW50byBpbmRpdmlkdWFsIHNlbGVjdG9ycyBpbiBjYXNlIHRoZSBicm93c2VyXG4gIC8vIGRvZXNuJ3Qgc3VwcG9ydCBhIHNwZWNpZmljIHNlbGVjdG9yLlxuICAvLyBGb3IgZXhhbXBsZSwgRmlyZWZveCBhbmQgU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYC5cbiAgLy8gSWYgYW4gaW52YWxpZCBzZWxlY3RvciBpcyB1c2VkLCB0aGVuIHRoZSBlbnRpcmUgZ3JvdXAgb2Ygc2VsZWN0b3JzXG4gIC8vIHdpbGwgYmUgaWdub3JlZC5cbiAgLy8gQGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy0zLyNncm91cGluZ1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHNlbGVjdG9yc1NwbGl0IHtcbiAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgIEBpZiBzdHItaW5kZXgoJHNlbGVjdG9yLCBcIjpob3N0LWNvbnRleHRcIikge1xuICAgICAgJGhvc3RDb250ZXh0U2VsZWN0b3JzOiBhcHBlbmQoJGhvc3RDb250ZXh0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgICAkcmVzdFNlbGVjdG9yczogYXBwZW5kKCRyZXN0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgQ2hyb21lLlxuICBAaWYgbGVuZ3RoKCRob3N0Q29udGV4dFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRob3N0Q29udGV4dFNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IGFsbCBicm93c2Vycy5cbiAgQGlmIGxlbmd0aCgkcmVzdFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRyZXN0U2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBicm93c2VyIGNhbiBzdXBwb3J0IGA6ZGlyKClgLCB0aGVuIGFkZCB0aGUgYDpkaXIoKWAgc2VsZWN0b3JzLlxuICAvLyBAc3VwcG9ydHMgc2VsZWN0b3IoOmRpcihydGwpKSB7IC8vIEAgSU1QT1RBTlQgTk9URTogVGhpcyBoYXMgYmVlbiByZW1vdmVkIGJlY2F1c2Ugc2VsZWN0b3IgZnVuY3Rpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBjdXJyZW50IFNDU1NcbiAgLy8gQWRkaW5nIDpkaXIoKSBpbiBjYXNlIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCBhbmQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyBgOmhvc3QtY29udGV4dCgpYCBpcyBhZGRlZDpcbiAgLy8gLSB0aHJvdWdoIHRoZSBgYWRkLXJvb3Qtc2VsZWN0b3IoKWAgZnVuY3Rpb24uXG4gIC8vIC0gZmlyc3Qgc28gdGhhdCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYDpkaXIoKWAuXG4gIC8vIEZvciBleGFtcGxlLFxuICAvLyAtIEZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLCBidXQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyAtIFNhZmFyaSBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAsIGJ1dCBTYWZhcmkgMTYuNCsgc3VwcG9ydHMgYDpkaXIoKWBcbiAgLy8gQGxpbmsgaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvMTM5NjYvd2Via2l0LWZlYXR1cmVzLWluLXNhZmFyaS0xNi00L1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHJvb3RTcGxpdCB7XG4gICAgJGRpclNlbGVjdG9yOiBcIiN7JHNlbGVjdG9yfTpkaXIocnRsKVwiO1xuICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgJGRpclNlbGVjdG9yczogYXBwZW5kKCRkaXJTZWxlY3RvcnMsICRkaXJTZWxlY3RvciwgY29tbWEpO1xuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IEZpcmVmb3guXG4gIEBpZiBsZW5ndGgoJGRpclNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRkaXJTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuICAvL31cbn1cblxuQG1peGluIGx0cigpIHtcbiAgQGNvbnRlbnQ7XG59XG5cblxuLy8gU1ZHIEJhY2tncm91bmQgSW1hZ2UgTWl4aW5cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3ZnXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gc3ZnLWJhY2tncm91bmQtaW1hZ2UoJHN2ZywgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAkdXJsOiB1cmwtZW5jb2RlKCRzdmcpO1xuICAkdmlld0JveDogc3RyLXNwbGl0KHN0ci1leHRyYWN0KCRzdmcsIFwidmlld0JveD0nXCIsIFwiJ1wiKSwgXCIgXCIpO1xuXG4gIEBpZiAkZmxpcC1ydGwgIT0gdHJ1ZSBvciAkdmlld0JveCA9PSBudWxsIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyR1cmx9XCIpO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgJHRyYW5zZm9ybTogXCJ0cmFuc2Zvcm09J3RyYW5zbGF0ZSgje250aCgkdmlld0JveCwgMyl9LCAwKSBzY2FsZSgtMSwgMSknXCI7XG4gICAgJGZsaXBwZWQtdXJsOiAkc3ZnO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxwYXRoXCIsIFwiPHBhdGggI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8bGluZVwiLCBcIjxsaW5lICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPHBvbHlnb25cIiwgXCI8cG9seWdvbiAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogdXJsLWVuY29kZSgkZmxpcHBlZC11cmwpO1xuXG4gICAgQGluY2x1ZGUgbHRyICgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JHVybH1cIik7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JGZsaXBwZWQtdXJsfVwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHByb3BlcnR5IGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHktaG9yaXpvbnRhbCgkcHJvcCwgJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGlmICRzdGFydCA9PSAwIGFuZCAkZW5kID09IDAge1xuICAgICN7JHByb3B9LWxlZnQ6ICRzdGFydDtcbiAgICAjeyRwcm9wfS1yaWdodDogJGVuZDtcblxuICB9IEBlbHNlIHtcbiAgICAtd2Via2l0LSN7JHByb3B9LXN0YXJ0OiAkc3RhcnQ7XG4gICAgI3skcHJvcH0taW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgLXdlYmtpdC0jeyRwcm9wfS1lbmQ6ICRlbmQ7XG4gICAgI3skcHJvcH0taW5saW5lLWVuZDogJGVuZDtcbiAgfVxufVxuXG4vLyBBZGQgcHJvcGVydHkgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHByb3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7Ym9vbGVhbn0gJGNvbnRlbnQgaW5jbHVkZSBjb250ZW50IG9yIHVzZSBkZWZhdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHkoJHByb3AsICR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKCRwcm9wLCAkc3RhcnQsICRlbmQpO1xuICAjeyRwcm9wfS10b3A6ICR0b3A7XG4gICN7JHByb3B9LWJvdHRvbTogJGJvdHRvbTtcbn1cblxuLy8gQWRkIHBhZGRpbmcgaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChwYWRkaW5nLCAkc3RhcnQsICRlbmQpO1xufVxuXG4vLyBBZGQgcGFkZGluZyBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShwYWRkaW5nLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgbWFyZ2luIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChtYXJnaW4sICRzdGFydCwgJGVuZCk7XG59XG5cbi8vIEFkZCBtYXJnaW4gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShtYXJnaW4sICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBwb3NpdGlvbiBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0IC0gYW1vdW50IHRvIHBvc2l0aW9uIHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZCAtIGFtb3VudCB0byBsZWZ0OiAwOyBlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwb3NpdGlvbi1ob3Jpem9udGFsKCRzdGFydDogbnVsbCwgJGVuZDogbnVsbCkge1xuICBAaWYgJHN0YXJ0ID09ICRlbmQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGxlZnQ6ICRzdGFydDtcbiAgICAgIHJpZ2h0OiAkZW5kO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGF0LXJvb3Qge1xuICAgICAgQHN1cHBvcnRzIChpbnNldC1pbmxpbmUtc3RhcnQ6IDApIHtcbiAgICAgICAgJiB7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLWVuZDogJGVuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlctMzc2NlxuICAgIEBhdC1yb290IHtcbiAgICAgIEBzdXBwb3J0cyBub3QgKGluc2V0LWlubGluZS1zdGFydDogMCkge1xuICAgICAgICAmIHtcbiAgICAgICAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICAgICAgICBsZWZ0OiAkc3RhcnQ7XG4gICAgICAgICAgICByaWdodDogJGVuZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgICAgICAgbGVmdDogdW5zZXQ7XG4gICAgICAgICAgICByaWdodDogdW5zZXQ7XG5cbiAgICAgICAgICAgIGxlZnQ6ICRlbmQ7XG4gICAgICAgICAgICByaWdodDogJHN0YXJ0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgcG9zaXRpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcG9zaXRpb24oJHRvcDogbnVsbCwgJGVuZDogbnVsbCwgJGJvdHRvbTogbnVsbCwgJHN0YXJ0OiBudWxsKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kKTtcbiAgdG9wOiAkdG9wO1xuICBib3R0b206ICRib3R0b207XG59XG5cbi8vIEFkZCBib3JkZXIgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gYm9yZGVyKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShib3JkZXIsICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBib3JkZXIgcmFkaXVzIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Atc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wLWVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b20tZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbS1zdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIGJvcmRlci1yYWRpdXMoJHRvcC1zdGFydCwgJHRvcC1lbmQ6ICR0b3Atc3RhcnQsICRib3R0b20tZW5kOiAkdG9wLXN0YXJ0LCAkYm90dG9tLXN0YXJ0OiAkdG9wLWVuZCkge1xuICBAaWYgJHRvcC1zdGFydCA9PSAkdG9wLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLXN0YXJ0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBib3JkZXItcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAkdG9wLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICRib3R0b20tc3RhcnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1lbmQ7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLXN0YXJ0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJGJvdHRvbS1lbmQ7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBkaXJlY3Rpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRpciAtIERpcmVjdGlvbiBvbiBMVFJcbkBtaXhpbiBkaXJlY3Rpb24oJGRpcikge1xuICAkb3RoZXItZGlyOiBudWxsO1xuXG4gIEBpZiAkZGlyID09IGx0ciB7XG4gICAgJG90aGVyLWRpcjogcnRsO1xuICB9IEBlbHNlIHtcbiAgICAkb3RoZXItZGlyOiBsdHI7XG4gIH1cblxuICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgZGlyZWN0aW9uOiAkZGlyO1xuICB9XG4gIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICBkaXJlY3Rpb246ICRvdGhlci1kaXI7XG4gIH1cbn1cblxuLy8gQWRkIGZsb2F0IGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRzaWRlXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRlY29yYXRvciAtICFpbXBvcnRhbnRcbkBtaXhpbiBmbG9hdCgkc2lkZSwgJGRlY29yYXRvcjogbnVsbCkge1xuICBAaWYgJHNpZGUgPT0gc3RhcnQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiBsZWZ0ICRkZWNvcmF0b3I7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkc2lkZSA9PSBlbmQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBmbG9hdDogbGVmdCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgZmxvYXQ6ICRzaWRlICRkZWNvcmF0b3I7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBiYWNrZ3JvdW5kLXBvc2l0aW9uKCRob3Jpem9udGFsLCAkaG9yaXpvbnRhbC1hbW91bnQ6IG51bGwsICR2ZXJ0aWNhbDogbnVsbCwgJHZlcnRpY2FsLWFtb3VudDogbnVsbCkge1xuICBAaWYgJGhvcml6b250YWwgPT0gc3RhcnQgb3IgJGhvcml6b250YWwgPT0gZW5kIHtcbiAgICAkaG9yaXpvbnRhbC1sdHI6IG51bGw7XG4gICAgJGhvcml6b250YWwtcnRsOiBudWxsO1xuICAgIEBpZiAkaG9yaXpvbnRhbCA9PSBzdGFydCB7XG4gICAgICAkaG9yaXpvbnRhbC1sdHI6IGxlZnQ7XG4gICAgICAkaG9yaXpvbnRhbC1ydGw6IHJpZ2h0O1xuICAgIH0gQGVsc2Uge1xuICAgICAgJGhvcml6b250YWwtbHRyOiByaWdodDtcbiAgICAgICRob3Jpem9udGFsLXJ0bDogbGVmdDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1sdHIgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1ydGwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gdHJhbnNmb3JtLW9yaWdpbigkeC1heGlzLCAkeS1heGlzOiBudWxsKSB7XG4gIEBpZiAkeC1heGlzID09IHN0YXJ0IHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gZW5kIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gbGVmdCBvciAkeC1heGlzID09IHJpZ2h0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGNhbGMoMTAwJSAtICN7JHgtYXhpc30pICR5LWF4aXM7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCB0cmFuc2Zvcm0gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRyYW5zZm9ybXMgLSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiB0cmFuc2Zvcm1zXG5AbWl4aW4gdHJhbnNmb3JtKCR0cmFuc2Zvcm1zLi4uKSB7XG4gICRleHRyYTogbnVsbDtcblxuICAkeDogbnVsbDtcbiAgJGx0ci10cmFuc2xhdGU6IG51bGw7XG4gICRydGwtdHJhbnNsYXRlOiBudWxsO1xuXG4gIEBlYWNoICR0cmFuc2Zvcm0gaW4gJHRyYW5zZm9ybXMge1xuICAgIEBpZiAoc3RyLWluZGV4KCR0cmFuc2Zvcm0sIHRyYW5zbGF0ZTNkKSkge1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJ3RyYW5zbGF0ZTNkKCcpO1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJyknKTtcblxuICAgICAgJGNvb3JkaW5hdGVzOiBzdHItc3BsaXQoJHRyYW5zZm9ybSwgJywnKTtcblxuICAgICAgJHg6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAgICAgJHk6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgJHo6IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuXG4gICAgICAkbHRyLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoJHgsICR5LCAkeik7XG4gICAgICAkcnRsLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoY2FsYygtMSAqICN7JHh9KSwgJHksICR6KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIEBpZiAkZXh0cmEgPT0gbnVsbCB7XG4gICAgICAgICRleHRyYTogJHRyYW5zZm9ybTtcbiAgICAgIH0gQGVsc2Uge1xuICAgICAgICAkZXh0cmE6ICRleHRyYSAkdHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBpZiAkeCA9PSAnMCcgb3IgJHggPT0gbnVsbCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgdHJhbnNmb3JtOiAkbHRyLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRsdHItdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRydGwtdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgbWl4aW5zIGZvciBTQ1NTIGZyb20gZGlmZmVyZW50IGNvbXBvbmVudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvY29tcG9uZW50cy9ncmlkL2dyaWQubWl4aW5zLnNjc3NcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy9jb21wb25lbnRzL2l0ZW0vaXRlbS5taXhpbnMuc2Nzc1xuICovXG5cbi8vIFJlc3BvbnNpdmUgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbi8vIENyZWF0ZXMgYSBmaXhlZCB3aWR0aCBmb3IgdGhlIGdyaWQgYmFzZWQgb24gdGhlIHNjcmVlbiBzaXplXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG1ha2UtZ3JpZC13aWR0aHMoJHdpZHRoczogJGdyaWQtd2lkdGhzLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQsICR3aWR0aCBpbiAkd2lkdGhzIHtcbiAgICBAaW5jbHVkZSBtZWRpYS1icmVha3BvaW50LXVwKCRicmVha3BvaW50LCAkYnJlYWtwb2ludHMpIHtcbiAgICAgIHdpZHRoOiAkd2lkdGg7XG4gICAgfVxuICB9XG5cbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG5cbi8vIEFkZHMgcGFkZGluZyB0byB0aGUgZWxlbWVudCBiYXNlZCBvbiBicmVha3BvaW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtYWtlLWJyZWFrcG9pbnQtcGFkZGluZygkcGFkZGluZ3MpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQgaW4gbWFwLWtleXMoJHBhZGRpbmdzKSB7XG4gICAgQGluY2x1ZGUgbWVkaWEtYnJlYWtwb2ludC11cCgkYnJlYWtwb2ludCkge1xuICAgICAgJHBhZGRpbmc6IG1hcC1nZXQoJHBhZGRpbmdzLCAkYnJlYWtwb2ludCk7XG5cbiAgICAgIEBpbmNsdWRlIHBhZGRpbmcoJHBhZGRpbmcpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIEl0ZW0gTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gaXRlbS1wdXNoLXN2Zy11cmwoJGZpbGwpIHtcbiAgJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnOiBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMjAnPjxwYXRoIGQ9J00yLDIwbC0yLTJsOC04TDAsMmwyLTJsMTAsMTBMMiwyMHonIGZpbGw9JyN7JGZpbGx9Jy8+PC9zdmc+XCI7XG5cbiAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCB0cnVlKTtcbn1cbiIsIkB1c2UgXCJzYXNzOm1hdGhcIiBhcyBtYXRoO1xuXG4vKipcbiAqIEFwcCBjdXN0b20gbWl4aW5zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIG91ciBjdXN0b20gbWl4aW5zLlxuICovXG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gRGVmYXVsdCB0byBib290c3RyYXAgbGV2ZWwgNi5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXNoYWRlLXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogNDglKSB7XG4gICAgQHJldHVybiBtaXgoIzAwMCwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCB3aGl0ZSB0byBjcmVhdGUgaXRzIHRpbnQuXG4vLyBEZWZhdWx0IHRvIGJvb3RzdHJhcCBsZXZlbCAtMTAuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci10aW50LXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogODAlKSB7XG4gICAgQHJldHVybiBtaXgoI2ZmZiwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIElvbmljIENvbG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEdlbmVyYXRlcyB0aGUgY29sb3IgY2xhc3NlcyBhbmQgdmFyaWFibGVzIGJhc2VkIG9uIHRoZVxuLy8gY29sb3JzIG1hcFxuXG5AbWl4aW4gZ2VuZXJhdGUtY29sb3IoJGNvbG9yLW5hbWUsICRjb2xvcnMsICR0aGVtZSkge1xuICAgICRjb2xvci10aGVtZXM6IG1hcC1nZXQoJGNvbG9ycywgJGNvbG9yLW5hbWUpO1xuICAgICRiYXNlOiBtYXAtZ2V0KCRjb2xvci10aGVtZXMsICR0aGVtZSk7XG5cbiAgICBAaWYgJHRoZW1lID09ICdkYXJrJyB7XG4gICAgICAgICRiYXNlOiBtaXgobWFwLWdldCgkY29sb3ItdGhlbWVzLCAnbGlnaHQnKSwgd2hpdGUsIDgwJSkgIWRlZmF1bHQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgZ2VuZXJhdGUtY29sb3ItdmFyaWFudHMoJGNvbG9yLW5hbWUsICRiYXNlKTtcbn1cblxuQG1peGluIGdlbmVyYXRlLWNvbG9yLXZhcmlhbnRzKCRjb2xvci1uYW1lLCAkYmFzZSkge1xuICAgICRjb250cmFzdDogZ2V0X2NvbnRyYXN0X2NvbG9yKCRiYXNlKTtcbiAgICAkc2hhZGU6IGdldC1jb2xvci1zaGFkZS1wZXJjZW50KCRiYXNlKTtcbiAgICAkdGludDogZ2V0LWNvbG9yLXRpbnQtcGVyY2VudCgkYmFzZSk7XG5cbiAgICAtLSN7JGNvbG9yLW5hbWV9OiAjeyRiYXNlfTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LXNoYWRlOiAjeyRzaGFkZX07XG4gICAgLS0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0OiAjeyRjb250cmFzdH07XG5cbiAgICAvLyBJbnRlcm5hbCBpb25pYyB1c2Ugb25seS5cbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfTogdmFyKC0tI3skY29sb3ItbmFtZX0pO1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2U6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSk7XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tcmdiOiAje2NvbG9yLXRvLXJnYi1saXN0KCRiYXNlKX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3Q6ICN7JGNvbnRyYXN0fTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdC1yZ2I6ICN7Y29sb3ItdG8tcmdiLWxpc3QoJGNvbnRyYXN0KX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tc2hhZGU6ICN7JHNoYWRlfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcblxuICAgIC5pb24tY29sb3ItI3skY29sb3ItbmFtZX0ge1xuICAgICAgICAtLWlvbi1jb2xvcjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAgICAgLS1pb24tY29sb3ItYmFzZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2UpO1xuICAgICAgICAtLWlvbi1jb2xvci1yZ2I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1yZ2IpO1xuICAgICAgICAtLWlvbi1jb2xvci1jb250cmFzdDogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0KTtcbiAgICAgICAgLS1pb24tY29sb3ItY29udHJhc3QtcmdiOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QtcmdiKTtcbiAgICAgICAgLS1pb24tY29sb3Itc2hhZGU6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1zaGFkZSk7XG4gICAgICAgIC0taW9uLWNvbG9yLXRpbnQ6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50KTtcbiAgICB9XG59XG5cbkBtaXhpbiBjb3JlLWZvY3VzKCkge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICY6OmFmdGVyIHtcbiAgICAgICAgQGluY2x1ZGUgcG9zaXRpb24oMCwgMCwgMCwgMCk7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgQGluY2x1ZGUgY29yZS1mb2N1cy1zdHlsZSgpO1xuICAgIH1cbn1cblxuQG1peGluIGNvcmUtZm9jdXMtc3R5bGUoKSB7XG4gICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIHZhcigtLWExMXktZm9jdXMtd2lkdGgpIDFweCB2YXIoLS1hMTF5LWZvY3VzLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcbiAgICAvLyBUaGlja2VyIG9wdGlvbjpcbiAgICAvLyBib3JkZXI6IHZhcigtLWExMXktZm9jdXMtd2lkdGgpIHNvbGlkIHZhcigtLWExMXktZm9jdXMtY29sb3IpO1xufVxuXG5AbWl4aW4gY29yZS10cmFuc2l0aW9uKCRwcm9wZXJ0aWVzOiBhbGwsICRkdXJhdGlvbjogNTAwbXMsICR0aW1pbmctZnVuY3Rpb246IGVhc2UtaW4tb3V0KSB7XG4gICAgJHRyYW5zaXRpb25zOiAoKTtcbiAgICBAZWFjaCAkcHJvcGVydHkgaW4gJHByb3BlcnRpZXMge1xuICAgICAgJHRyYW5zaXRpb25zOiBhcHBlbmQoJHRyYW5zaXRpb25zLCAkcHJvcGVydHkgJGR1cmF0aW9uICR0aW1pbmctZnVuY3Rpb24sIGNvbW1hKTtcbiAgICB9XG5cbiAgICAtd2Via2l0LXRyYW5zaXRpb246ICR0cmFuc2l0aW9ucztcbiAgICB0cmFuc2l0aW9uOiAkdHJhbnNpdGlvbnM7XG59XG5cbkBtaXhpbiBzci1vbmx5KCkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMXB4O1xuICAgIGhlaWdodDogMXB4O1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAtMXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgY2xpcDogcmVjdCgwLCAwLCAwLCAwKTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGJvcmRlcjogMDtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGl0ZW0tcHVzaC1zdmctdXJsIGJ1dCBhZG1pdHMgZmxpcC1ydGxcbiAqL1xuQG1peGluIHB1c2gtYXJyb3ctY29sb3IoJGZpbGw6IDYyNjI2MiwgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAgICRpdGVtLWRldGFpbC1wdXNoLXN2ZzogXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyIDIwJz48cGF0aCBkPSdNMiwyMGwtMi0ybDgtOEwwLDJsMi0ybDEwLDEwTDIsMjB6JyBmaWxsPScjeyRmaWxsfScvPjwvc3ZnPlwiO1xuXG4gICAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCAkZmxpcC1ydGwpO1xufVxuXG5AbWl4aW4gYm9yZGVyLXN0YXJ0KCRweCwgJHR5cGU6IG51bGwsICRjb2xvcjogbnVsbCkge1xuICAgIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoYm9yZGVyLCAkcHggJHR5cGUgJGNvbG9yLCBudWxsKTtcbn1cblxuQG1peGluIGJvcmRlci1lbmQoJHB4LCAkdHlwZTogbnVsbCwgJGNvbG9yOiBudWxsKSB7XG4gICAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChib3JkZXIsIG51bGwsICRweCAkdHlwZSAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1zdGFydCgkcHgsICR0eXBlLCAkY29sb3IpIHtcbiAgICAkc2FmZS1hcmVhLXBvc2l0aW9uOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRweH0pO1xuXG4gICAgQGluY2x1ZGUgYm9yZGVyLXN0YXJ0KCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1lbmQoJHB4LCAkdHlwZSwgJGNvbG9yKSB7XG4gICAgJHNhZmUtYXJlYS1wb3NpdGlvbjogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JHB4fSk7XG5cbiAgICBAaW5jbHVkZSBib3JkZXItZW5kKCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IG51bGw7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogbnVsbDtcblxuICAgIEBpZiAoJGVuZCkge1xuICAgICAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuICAgIH1cbiAgICBAaWYgKCRzdGFydCkge1xuICAgICAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4tc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRlbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1lbmQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBudWxsO1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IG51bGw7XG5cbiAgICBAaWYgKCRlbmQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcbiAgICB9XG4gICAgQGlmICgkc3RhcnQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLWVuZCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBvc2l0aW9uKCR0b3A6IG51bGwsICRlbmQ6IG51bGwsICRib3R0b206IG51bGwsICRzdGFydDogbnVsbCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIHBvc2l0aW9uKCR0b3AsICRzYWZlLWFyZWEtZW5kLCAkYm90dG9tLCAkc2FmZS1hcmVhLXN0YXJ0KTtcbn1cblxuQG1peGluIGNvcmUtaGVhZGluZ3MoKSB7XG4gICAgaDEge1xuICAgICAgICBmb250LXNpemU6IDI2cHg7XG4gICAgfVxuICAgIGgyLCAuaXRlbS1oZWFkaW5nIHtcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgIH1cbiAgICBoMyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICB9XG4gICAgaDQge1xuICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgfVxuICAgIGg1IHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgIH1cbiAgICBoNiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG59XG5cbkBtaXhpbiBkYXJrbW9kZSgpIHtcbiAgICAkcm9vdDogI3smfTtcblxuICAgIEBhdC1yb290ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiaHRtbC5kYXJrXCIpfSB7XG4gICAgICAgIEBjb250ZW50O1xuICAgIH1cbn1cblxuQG1peGluIGhvcml6b250YWxfc2Nyb2xsX2l0ZW0oJHdpZHRoLCAkbWluLXdpZHRoLCAkbWF4LXdpZHRoKSB7XG4gICAgZmxleDogMCAwICR3aWR0aDtcbiAgICBtaW4td2lkdGg6ICRtaW4td2lkdGg7XG4gICAgbWF4LXdpZHRoOiAkbWF4LXdpZHRoO1xuICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gICAgZGlzcGxheTogYmxvY2s7XG5cbiAgICBpb24tY2FyZCB7XG4gICAgICAgIC0tdmVydGljYWwtbWFyZ2luOiAxMHB4O1xuICAgICAgICAtLWhvcml6b250YWwtbWFyZ2luOiAxMHB4O1xuXG4gICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikpO1xuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIHZhcigtLXZlcnRpY2FsLW1hcmdpbikgLSB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pKTtcbiAgICAgICAgbWFyZ2luOiB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pIHZhcigtLWhvcml6b250YWwtbWFyZ2luKTtcblxuICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogMzYwcHgpIHtcbiAgICAgICAgICAgIC0taG9yaXpvbnRhbC1tYXJnaW46IDZweDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gQ29sb3IgbWl4aW5zLlxuQGZ1bmN0aW9uIGdldF9icmlnaHRuZXNzKCRjb2xvcikge1xuICAgIEByZXR1cm4gbWF0aC5kaXYocmVkKCRjb2xvcikgKyBncmVlbigkY29sb3IpICsgYmx1ZSgkY29sb3IpLCAzKTtcbn1cblxuLy8gR2V0IHRoZSBiZXR0ZXIgY29sb3IgY29udHJhc3QgdXNpbmcgV0NBRyBhbGdvcnl0aG0uXG5AZnVuY3Rpb24gZ2V0X2NvbnRyYXN0X2NvbG9yKCRjb2xvcikge1xuICAgICRsdW1pYW5jZTogbHVtaW5hbmNlKCRjb2xvcik7XG5cbiAgICAvLyBXaGl0ZSBsdW1pYW5jZSBpcyAxLlxuICAgICR3aGl0ZUNvbnRyYXN0OiBtYXRoLmRpdigkbHVtaWFuY2UgKyAwLjA1LCAxICsgMC4wNSk7XG4gICAgLy8gV2hpdGUgbHVtaWFuY2UgaXMgMC5cbiAgICAkYmxhY2tDb250cmFzdDogbWF0aC5kaXYoMC4wNSwgJGx1bWlhbmNlICsgMC4wNSk7XG5cbiAgICBAcmV0dXJuIGlmKCR3aGl0ZUNvbnRyYXN0IDwgJGJsYWNrQ29udHJhc3QsIHdoaXRlLCBibGFjayk7XG59XG5cbi8vIENvbG9yIGNvbnRyYXN0IHVzaW5nIHlpcSBhcHJveGltYXRpb24gd2l0aCAxNTAgdGhyZXNob2xkLlxuQGZ1bmN0aW9uIGdldF9jb250cmFzdF9jb2xvcl95aXEoJGNvbG9yLCAkZGFyazogYmxhY2ssICRsaWdodDogd2hpdGUpIHtcbiAgICAkcjogcmVkKCRjb2xvcik7XG4gICAgJGc6IGdyZWVuKCRjb2xvcik7XG4gICAgJGI6IGJsdWUoJGNvbG9yKTtcblxuICAgICR5aXE6IG1hdGguZGl2KCgkciAqIDI5OSkgKyAoJGcgKiA1ODcpICsgKCRiICogMTE0KSwgMTAwMCk7XG5cbiAgICBAcmV0dXJuIGlmKCR5aXEgPj0gMTI4LCAkZGFyaywgJGxpZ2h0KTtcbn1cblxuLy8gV0NBRyBjb250cmFzdCBhbGdvcml0aG1cbkBmdW5jdGlvbiBjaGVjay1jb250cmFzdCgkZm9yZWdyb3VuZCwgJGJhY2tncm91bmQpIHtcbiAgICAkZm9yZWdyb3VuZEx1bWlhbmNlOiBsdW1pbmFuY2UoJGZvcmVncm91bmQpO1xuICAgICRiYWNrZ3JvdW5kTHVtaW5hbmNlOiBsdW1pbmFuY2UoJGJhY2tncm91bmQpO1xuXG4gICAgQGlmICgkYmFja2dyb3VuZEx1bWluYW5jZSA8ICRmb3JlZ3JvdW5kTHVtaWFuY2UpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkYmFja2dyb3VuZEx1bWluYW5jZSArIDAuMDUsICRmb3JlZ3JvdW5kTHVtaWFuY2UgKyAwLjA1KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkZm9yZWdyb3VuZEx1bWlhbmNlICsgMC4wNSwgJGJhY2tncm91bmRMdW1pbmFuY2UgKyAwLjA1KTtcbiAgICB9XG59XG5cbkBmdW5jdGlvbiBsdW1pbmFuY2UoJGNvbG9yKSB7XG4gICAgJHI6IHJlZCgkY29sb3IpO1xuICAgICRnOiBncmVlbigkY29sb3IpO1xuICAgICRiOiBibHVlKCRjb2xvcik7XG5cbiAgICAkcjogY29tcG9uZW50LWx1bWluYW5jZSgkcik7XG4gICAgJGc6IGNvbXBvbmVudC1sdW1pbmFuY2UoJGcpO1xuICAgICRiOiBjb21wb25lbnQtbHVtaW5hbmNlKCRiKTtcblxuICAgIEByZXR1cm4gJHIgKiAwLjIxMjYgKyAkZyAqIDAuNzE1MiArICRiICogMC4wNzIyO1xufVxuXG5AZnVuY3Rpb24gY29tcG9uZW50LWx1bWluYW5jZSgkdmFsdWUpIHtcbiAgICAkdmFsdWU6IG1hdGguZGl2KCR2YWx1ZSwgMjU1KTtcblxuICAgIEBpZiAoJHZhbHVlIDw9IDAuMDM5MjgpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkdmFsdWUsIDEyLjkyKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLnBvdyhtYXRoLmRpdigkdmFsdWUgKyAwLjA1NSwgMS4wNTUpLCAyLjQpO1xuICAgIH1cbn1cbiIsIi8qXG4gKiBBcHAgQ3VzdG9tIEFwcCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBhbGwgY3VzdG9tIGFwcCB2YXJpYWJsZXMuXG4gKi9cbiIsIi8qXG4gKiBBcHAgR2xvYmFsIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIGFsbCBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiR3aGl0ZTogICAgICAgI2ZmZmZmZiAhZGVmYXVsdDtcbiRncmF5LTEwMDogICAgI2Y4ZjlmYSAhZGVmYXVsdDtcbiRncmF5LTIwMDogICAgI2U5ZWNlZiAhZGVmYXVsdDtcbiRncmF5LTMwMDogICAgI2RlZTJlNiAhZGVmYXVsdDsgLy8gU3Ryb2tlXG4kZ3JheS00MDA6ICAgICNjZWQ0ZGEgIWRlZmF1bHQ7XG4kZ3JheS01MDA6ICAgICM4Zjk1OWUgIWRlZmF1bHQ7IC8vIFN0cm9rZSBvbiBpbnB1dHNcbiRncmF5LTYwMDogICAgIzZhNzM3YiAhZGVmYXVsdDtcbiRncmF5LTcwMDogICAgIzQ5NTA1NyAhZGVmYXVsdDtcbiRncmF5LTgwMDogICAgIzM0M2E0MCAhZGVmYXVsdDtcbiRncmF5LTkwMDogICAgIzI4MjgyOCAhZGVmYXVsdDsgLy8gQ29weSB0ZXh0XG4kYmxhY2s6ICAgICAgICMwMDAwMDAgIWRlZmF1bHQ7IC8vIEF2b2lkIHVzYWdlXG5cbiRibHVlOiAgICAgICAgIzBmNmNiZiAhZGVmYXVsdDtcbiRjeWFuOiAgICAgICAgIzAwODE5NiAhZGVmYXVsdDsgLy8gTm90IHVzZWQuXG4kZ3JlZW46ICAgICAgICMzNTdhMzIgIWRlZmF1bHQ7XG4kcmVkOiAgICAgICAgICNjYTMxMjAgIWRlZmF1bHQ7XG4keWVsbG93OiAgICAgICNmMGFkNGUgIWRlZmF1bHQ7XG5cbiRicmFuZC1jb2xvcjogI2Y5ODAxMiAhZGVmYXVsdDtcblxuJHRleHQtY29sb3I6ICAgICAgICAgICAgICAgJGdyYXktOTAwICFkZWZhdWx0O1xuJHRleHQtY29sb3ItcmdiOiAgICAgICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3IpICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyazogICAgICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyay1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3ItZGFyaykgIWRlZmF1bHQ7XG5cbiRiYWNrZ3JvdW5kLWNvbG9yOiAgICAgICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kYmFja2dyb3VuZC1jb2xvci1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJGJhY2tncm91bmQtY29sb3IpICFkZWZhdWx0O1xuJGJhY2tncm91bmQtY29sb3ItZGFyazogICAgICRncmF5LTkwMCAhZGVmYXVsdDsgLy8gIzFhMWExYVxuJGJhY2tncm91bmQtY29sb3ItZGFyay1yZ2I6IGNvbG9yLXRvLXJnYi1saXN0KCRiYWNrZ3JvdW5kLWNvbG9yLWRhcmspICFkZWZhdWx0O1xuXG4kaW9uLWl0ZW0tYmFja2dyb3VuZDogICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1yZ2I6ICBjb2xvci10by1yZ2ItbGlzdCgkaW9uLWl0ZW0tYmFja2dyb3VuZCkgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrOiAkZ3JheS05MDAgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrLXJnYjogY29sb3ItdG8tcmdiLWxpc3QoJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyaykgIWRlZmF1bHQ7XG5cbiRwcmltYXJ5OiAgICAkYnJhbmQtY29sb3IgIWRlZmF1bHQ7XG4kc2Vjb25kYXJ5OiAgJGdyYXktMzAwICFkZWZhdWx0O1xuJGRhbmdlcjogICAgICRyZWQgIWRlZmF1bHQ7XG4kd2FybmluZzogICAgJHllbGxvdyAhZGVmYXVsdDtcbiRzdWNjZXNzOiAgICAkZ3JlZW4gIWRlZmF1bHQ7XG4kaW5mbzogICAgICAgJGJsdWUgIWRlZmF1bHQ7XG4kbGlnaHQ6ICAgICAgJGdyYXktMTAwICFkZWZhdWx0O1xuJG1lZGl1bTogICAgICRncmF5LTcwMCAhZGVmYXVsdDtcbiRkYXJrOiAgICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7XG5cbiRjb2xvcnM6ICAoXG4gICAgcHJpbWFyeTogKGxpZ2h0OiAkcHJpbWFyeSwgZGFyazogJHByaW1hcnkpLFxuICAgIHNlY29uZGFyeTogKGxpZ2h0OiAkc2Vjb25kYXJ5LCBkYXJrOiAkZ3JheS03MDApLFxuICAgIHN1Y2Nlc3M6IChsaWdodDogJHN1Y2Nlc3MpLFxuICAgIHdhcm5pbmc6IChsaWdodDogJHdhcm5pbmcpLFxuICAgIGRhbmdlcjogIChsaWdodDogJGRhbmdlciksXG4gICAgaW5mbzogKGxpZ2h0OiAkaW5mbyksXG4gICAgbGlnaHQ6IChsaWdodDogJGxpZ2h0LCBkYXJrOiAkZGFyayksXG4gICAgbWVkaXVtOiAobGlnaHQ6ICRtZWRpdW0sIGRhcms6ICRncmF5LTIwMCksXG4gICAgZGFyazogKGxpZ2h0OiAkZGFyaywgZGFyazogJGxpZ2h0KSxcbikgIWRlZmF1bHQ7XG5cbi8qKlxuICogTGF5b3V0IEJyZWFrcG9pbnRzXG4gKlxuICogaHR0cHM6Ly9pb25pY2ZyYW1ld29yay5jb20vZG9jcy9sYXlvdXQvZ3JpZCNkZWZhdWx0LWJyZWFrcG9pbnRzXG4gKi9cblxuLy8gVGhlIG1pbmltdW0gZGltZW5zaW9ucyBhdCB3aGljaCB5b3VyIGxheW91dCB3aWxsIGNoYW5nZSxcbi8vIGFkYXB0aW5nIHRvIGRpZmZlcmVudCBzY3JlZW4gc2l6ZXMsIGZvciB1c2UgaW4gbWVkaWEgcXVlcmllc1xuJHNjcmVlbi1icmVha3BvaW50czogKFxuICAgIHhzOiAwcHgsXG4gICAgc206IDU3NnB4LFxuICAgIG1kOiA3NjhweCxcbiAgICBsZzogOTkycHgsXG4gICAgdGFibGV0OiA5OTJweCxcbiAgICB4bDogMTIwMHB4XG4pICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaW1hZ2UtYmFja2dyb3VuZDogIzgxZWNlYywgIzc0YjlmZiwgI2EyOWJmZSwgI2RmZTZlOSwgIzAwYjg5NCwgIzA5ODRlMywgI2IyYmVjMywgI2ZkY2I2ZSwgI2ZkNzlhOCwgIzZjNWNlNyAhZGVmYXVsdDtcbiRjb3JlLWRkLXF1ZXN0aW9uLWNvbG9yczogI0ZGRkZGRiwgI0IwQzRERSwgI0RDRENEQywgI0Q4QkZEOCwgIzg3Q0VGQSwgI0RBQTUyMCwgI0ZGRDcwMCwgI0YwRTY4QyAhZGVmYXVsdDtcbiRjb3JlLXRleHQtaGlnaHRsaWdodC1iYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGVuKCRibHVlLCA0MCUpICFkZWZhdWx0O1xuXG4kY29yZS1maXhlZC11cmw6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtZGFzaGJvYXJkLWxvZ286IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtYWx3YXlzLXNob3ctbWFpbi1tZW51OiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWZvcm1hdC10ZXh0LW5ldmVyLXNob3J0ZW46IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1oaWRlLWNvdXJzZWltYWdlLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLXNlY3Rpb24tc2VsZWN0b3I6IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaGlkZS10aHVtYi1vbi1jYXJkczogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1jb3Vyc2UtdGh1bWItb24tY2FyZHMtYmFja2dyb3VuZDogbnVsbCAhZGVmYXVsdDtcbiRjb3JlLWNvdXJzZS1oaWRlLXByb2dyZXNzLW9uLWNhcmRzOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBsb2dpbiBwYWdlLlxuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUtZGFyazogJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3ItZGFyazogJHRleHQtY29sb3ItZGFyayAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtZm9yZ290LXBhc3N3b3JkOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtbmVlZC1oZWxwOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtcXJjb2RlOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBtb3JlIHBhZ2UuIChkZXByZWNhdGVkIG9uIDQuMClcbiRjb3JlLW1vcmUtaGlkZS1zaXRlaW5mbzogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmw6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHVzZXIgcGFnZS5cbiRjb3JlLXVzZXItaGlkZS1zaXRlaW5mbzogJGNvcmUtbW9yZS1oaWRlLXNpdGVpbmZvICFkZWZhdWx0O1xuJGNvcmUtdXNlci1oaWRlLXNpdGVuYW1lOiAkY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWUgIWRlZmF1bHQ7XG4kY29yZS11c2VyLWhpZGUtc2l0ZXVybDogJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmwgIWRlZmF1bHQ7XG5cbi8vIEFjdGl2aXR5IGljb24gYmFja2dyb3VuZCBjb2xvcnMuXG4kYWN0aXZpdHktaWNvbi1jb2xvcnM6IChcbiAgICBhZG1pbmlzdHJhdGlvbjogIzVkNjNmNixcbiAgICBhc3Nlc3NtZW50OiAjZWI2NmEyLFxuICAgIGNvbGxhYm9yYXRpb246ICNmNzYzNGQsXG4gICAgY29tbXVuaWNhdGlvbjogIzExYTY3NixcbiAgICBjb250ZW50OiAjMzk5YmUyLFxuICAgIGludGVyZmFjZTogI2EzNzhmZlxuKSAhZGVmYXVsdDtcblxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNhdGVnb3J5OiAjOGUyNGFhICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvdXJzZTogJHJlZCAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1ncm91cDogJHllbGxvdyAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS11c2VyOiAkYmx1ZSAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1zaXRlOiAkZ3JlZW4gIWRlZmF1bHQ7XG5cbi8vIENhbGVuZGFyIGV2ZW50IGNhdGVnb3J5IGJhY2tncm91bmQgY29sb3JzLlxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvbG9yczogKFxuICAgIGNhdGVnb3J5OiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY2F0ZWdvcnksXG4gICAgY291cnNlOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY291cnNlLFxuICAgIGdyb3VwOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktZ3JvdXAsXG4gICAgdXNlcjogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXVzZXIsXG4gICAgc2l0ZTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXNpdGUsXG4pICFkZWZhdWx0O1xuIiwiQHVzZSBcInRoZW1lL2dsb2JhbHNcIiBhcyAqO1xuXG46aG9zdCB7XG4gICAgLmNvcmUtZm9ybWF0LXByb2dyZXNzLWxpc3Qge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICB9XG5cbiAgICAuY29yZS1jb3Vyc2UtdGh1bWIge1xuICAgICAgICBoZWlnaHQ6IHZhcigtLWNvcmUtY291cnNlaW1hZ2Utb24tY291cnNlLXNpemUpO1xuICAgICAgICBtaW4taGVpZ2h0OiB2YXIoLS1jb3JlLWNvdXJzZWltYWdlLW9uLWNvdXJzZS1zaXplKTtcbiAgICAgICAgd2lkdGg6IHZhcigtLWNvcmUtY291cnNlaW1hZ2Utb24tY291cnNlLXNpemUpO1xuICAgICAgICBtaW4td2lkdGg6IHZhcigtLWNvcmUtY291cnNlaW1hZ2Utb24tY291cnNlLXNpemUpO1xuICAgICAgICAtLWJvcmRlci1yYWRpdXM6IHZhcigtLWNvcmUtY291cnNlaW1hZ2UtcmFkaXVzKTtcbiAgICAgICAgQGluY2x1ZGUgbWFyZ2luKDhweCwgMTZweCwgOHB4LCAwcHgpO1xuXG4gICAgICAgIEBmb3IgJGkgZnJvbSAwIHRvIGxlbmd0aCgkY29yZS1jb3Vyc2UtaW1hZ2UtYmFja2dyb3VuZCkge1xuICAgICAgICAgICAgJi5jb3Vyc2UtY29sb3ItI3skaX0ge1xuICAgICAgICAgICAgICAgIC0tY291cnNlLWNvbG9yOiB2YXIoLS1jb3JlLWNvdXJzZS1jb2xvci0jeyRpfSk7XG4gICAgICAgICAgICAgICAgLS1jb3Vyc2UtY29sb3ItdGludDogdmFyKC0tY29yZS1jb3Vyc2UtY29sb3ItI3skaX0tdGludCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpb24taWNvbi5jb3Vyc2UtaWNvbiB7XG4gICAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgICAgZm9udC1zaXplOiBjYWxjKHZhcigtLWNvcmUtY291cnNlaW1hZ2Utb24tY291cnNlLXNpemUpIC0gMjRweCk7XG4gICAgICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcbiAgICAgICAgICAgIGNvbG9yOiB2YXIoLS1jb3Vyc2UtY29sb3ItdGludCk7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1jb3Vyc2UtY29sb3IsIHRyYW5zcGFyZW50KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEZpbGwgZ2VvcGF0ZXJuc1xuICAgICAgICBpbWdbc3JjJD1cIi5zdmdcIl0ge1xuICAgICAgICAgICAgbWluLXdpZHRoOiAxMDAlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGlmICgkY29yZS1oaWRlLWNvdXJzZWltYWdlLW9uLWNvdXJzZSkge1xuICAgICAgICAuY29yZS1jb3Vyc2UtdGh1bWIge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBpZiAoJGNvcmUtaGlkZS1wcm9ncmVzcy1vbi1jb3Vyc2UpIHtcbiAgICAgICAgLmNvcmUtY291cnNlLXByb2dyZXNzIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBoMSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICB9XG5cbiAgICAuY29yZS1jb3Vyc2UtaGVhZGVyIHtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW9uLWl0ZW0tYmFja2dyb3VuZCk7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["CoreTabsOutletComponent","CoreCourseFormatDelegate","CoreCourseOptionsDelegate","CoreEvents","CoreCourse","CoreCourseModuleCompletionStatus","CoreCourseHelper","CoreUtils","CoreNavigator","CONTENTS_PAGE_NAME","CoreDomUtils","CoreCoursesHelper","CoreColors","CorePath","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r3","course","courseimage","ɵɵsanitizeUrl","ɵɵelementContainerStart","ɵɵtemplate","CoreCourseIndexPage_ng_container_15_div_1_Template","CoreCourseIndexPage_ng_container_15_ion_avatar_2_Template","ɵɵelementContainerEnd","ctx_r0","ctx_r1","progress","CoreCourseIndexPage","constructor","route","title","category","tabs","loaded","fullScreenEnabled","currentPagePath","sections","isGuest","openModule","contentsTab","page","pageParams","selectTabObserver","on","SELECT_COURSE_TAB","data","name","_this$tabsComponent","sectionId","sectionNumber","undefined","tabsComponent","selectByIndex","index","findIndex","tab","_this$tabsComponent2","completionObserver","MANUAL_COMPLETION_CHANGED","_this$course","completion","courseId","id","valueused","completionModules","concat","map","section","modules","module","reduce","accumulator","currentValue","moduleProgressPercent","state","COMPLETION_COMPLETE","Math","min","max","updateProgress","fullScreenObserver","FULL_SCREEN_CHANGED","event","enabled","ngOnInit","_this","_asyncToGenerator","_CoreNavigator$getRou","_CoreNavigator$getRou2","path","getRouteFullPath","snapshot","increaseRouteDepth","replace","getRequiredRouteParam","error","showErrorModal","back","firstTabName","getRouteParam","getRouteBooleanParam","courseUsesGuestAccessInfo","guestAccess","modNavOptions","getCurrentPath","concatenatePaths","getRouteNumberParam","blockInstanceId","moduleId","push","Promise","all","loadCourseHandlers","loadBasinInfo","tabSelected","_this2","handlers","getHandlersToDisplay","tabToLoad","forEach","handler","_objectSpread","_this2$tabsComponent","nextTick","_this3","getCourseTitle","setCourseColor","ignoreErrors","getSections","ngOnDestroy","_this$selectTabObserv","_this$completionObser","_this$fullScreenObser","decreaseRouteDepth","off","ionViewDidEnter","_this$tabsComponent3","ionViewDidLeave","_this$tabsComponent4","openCourseSummary","completionusertracked","_this4","loadCourseColorAndImage","courseThumb","color","nativeElement","style","setProperty","tint","lighter","colorNumber","classList","add","ɵɵdirectiveInject","i1","ActivatedRoute","selectors","viewQuery","CoreCourseIndexPage_Query","rf","ctx","ɵɵlistener","CoreCourseIndexPage_Template_ion_button_click_9_listener","CoreCourseIndexPage_ng_container_15_Template","CoreCourseIndexPage_div_19_Template","CoreCourseIndexPage_Template_core_tabs_outlet_ionChange_20_listener","selectedIndex","ɵɵpipeBind1","ɵɵattribute"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/pages/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/pages/index/index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, ViewChild, OnDestroy, OnInit, ElementRef } from '@angular/core';\nimport { ActivatedRoute, Params } from '@angular/router';\n\nimport { CoreTabsOutletTab, CoreTabsOutletComponent } from '@components/tabs-outlet/tabs-outlet';\nimport { CoreCourseFormatDelegate } from '../../services/format-delegate';\nimport { CoreCourseOptionsDelegate } from '../../services/course-options-delegate';\nimport { CoreCourseAnyCourseData } from '@features/courses/services/courses';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreCourse, CoreCourseModuleCompletionStatus, CoreCourseWSSection } from '@features/course/services/course';\nimport { CoreCourseHelper, CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreNavigationOptions, CoreNavigator } from '@services/navigator';\nimport { CONTENTS_PAGE_NAME } from '@features/course/course.module';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCoursesHelper, CoreCourseWithImageAndColor } from '@features/courses/services/courses-helper';\nimport { CoreColors } from '@singletons/colors';\nimport { CorePath } from '@singletons/path';\n\n/**\n * Page that displays the list of courses the user is enrolled in.\n */\n@Component({\n    selector: 'page-core-course-index',\n    templateUrl: 'index.html',\n    styleUrls: ['index.scss'],\n})\nexport class CoreCourseIndexPage implements OnInit, OnDestroy {\n\n    @ViewChild(CoreTabsOutletComponent) tabsComponent?: CoreTabsOutletComponent;\n    @ViewChild('courseThumb') courseThumb?: ElementRef;\n\n    title = '';\n    category = '';\n    course?: CoreCourseWithImageAndColor & CoreCourseAnyCourseData;\n    tabs: CourseTab[] = [];\n    loaded = false;\n    progress?: number;\n    fullScreenEnabled = false;\n\n    protected currentPagePath = '';\n    protected fullScreenObserver: CoreEventObserver;\n    protected selectTabObserver: CoreEventObserver;\n    protected completionObserver: CoreEventObserver;\n    protected sections: CoreCourseWSSection[] = []; // List of course sections.\n    protected firstTabName?: string;\n    protected module?: CoreCourseModuleData;\n    protected modNavOptions?: CoreNavigationOptions;\n    protected isGuest = false;\n    protected openModule = true;\n    protected contentsTab: CoreTabsOutletTab & { pageParams: Params } = {\n        page: CONTENTS_PAGE_NAME,\n        title: 'core.course',\n        pageParams: {},\n    };\n\n    constructor(private route: ActivatedRoute) {\n        this.selectTabObserver = CoreEvents.on(CoreEvents.SELECT_COURSE_TAB, (data) => {\n            if (!data.name) {\n                // If needed, set sectionId and sectionNumber. They'll only be used if the content tabs hasn't been loaded yet.\n                if (data.sectionId) {\n                    this.contentsTab.pageParams.sectionId = data.sectionId;\n                }\n                if (data.sectionNumber !== undefined) {\n                    this.contentsTab.pageParams.sectionNumber = data.sectionNumber;\n                }\n\n                // Select course contents.\n                this.tabsComponent?.selectByIndex(0);\n            } else if (this.tabs) {\n                const index = this.tabs.findIndex((tab) => tab.name == data.name);\n\n                if (index >= 0) {\n                    this.tabsComponent?.selectByIndex(index);\n                }\n            }\n        });\n\n        // The completion of any of the modules have changed.\n        this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, (data) => {\n            if (data.completion.courseId != this.course?.id) {\n                return;\n            }\n\n            if (data.completion.valueused !== false || !this.course || !('progress' in this.course) ||\n                    typeof this.course.progress != 'number') {\n                return;\n            }\n\n            // If the completion value is not used, the page won't be reloaded, so update the progress bar.\n            const completionModules = (<CoreCourseModuleData[]> [])\n                .concat(...this.sections.map((section) => section.modules))\n                .map((module) => module.completion && module.completion > 0 ? 1 : module.completion)\n                .reduce((accumulator, currentValue) => (accumulator || 0) + (currentValue || 0), 0);\n\n            const moduleProgressPercent = 100 / (completionModules || 1);\n            // Use min/max here to avoid floating point rounding errors over/under-flowing the progress bar.\n            if (data.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n                this.course.progress = Math.min(100, this.course.progress + moduleProgressPercent);\n            } else {\n                this.course.progress = Math.max(0, this.course.progress - moduleProgressPercent);\n            }\n\n            this.updateProgress();\n        });\n\n        this.fullScreenObserver = CoreEvents.on(CoreEvents.FULL_SCREEN_CHANGED, (event: { enabled: boolean }) => {\n            this.fullScreenEnabled = event.enabled;\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        // Increase route depth.\n        const path = CoreNavigator.getRouteFullPath(this.route.snapshot);\n\n        CoreNavigator.increaseRouteDepth(path.replace(/(\\/deep)+/, ''));\n\n        try {\n            this.course = CoreNavigator.getRequiredRouteParam('course');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n            CoreNavigator.back();\n            this.loaded = true;\n\n            return;\n        }\n\n        this.firstTabName = CoreNavigator.getRouteParam('selectedTab');\n        this.module = CoreNavigator.getRouteParam<CoreCourseModuleData>('module');\n        this.isGuest = CoreNavigator.getRouteBooleanParam('isGuest') ??\n            (!!this.course && (await CoreCourseHelper.courseUsesGuestAccessInfo(this.course.id)).guestAccess);\n\n        this.modNavOptions = CoreNavigator.getRouteParam<CoreNavigationOptions>('modNavOptions');\n        this.openModule = CoreNavigator.getRouteBooleanParam('openModule') ?? true; // If false, just scroll to module.\n        this.currentPagePath = CoreNavigator.getCurrentPath();\n        this.contentsTab.page = CorePath.concatenatePaths(this.currentPagePath, this.contentsTab.page);\n        this.contentsTab.pageParams = {\n            course: this.course,\n            sectionId: CoreNavigator.getRouteNumberParam('sectionId'),\n            sectionNumber: CoreNavigator.getRouteNumberParam('sectionNumber'),\n            blockInstanceId: CoreNavigator.getRouteNumberParam('blockInstanceId'),\n            isGuest: this.isGuest,\n        };\n\n        if (this.module) {\n            this.contentsTab.pageParams.moduleId = this.module.id;\n            if (!this.contentsTab.pageParams.sectionId && this.contentsTab.pageParams.sectionNumber === undefined) {\n                // No section specified, use module section.\n                this.contentsTab.pageParams.sectionId = this.module.section;\n            }\n        }\n\n        this.tabs.push(this.contentsTab);\n        this.loaded = true;\n\n        await Promise.all([\n            this.loadCourseHandlers(),\n            this.loadBasinInfo(),\n        ]);\n    }\n\n    /**\n     * A tab was selected.\n     */\n    tabSelected(): void {\n        if (!this.module || !this.course || !this.openModule) {\n            return;\n        }\n        // Now that the first tab has been selected we can load the module.\n        CoreCourseHelper.openModule(this.module, this.course.id, {\n            sectionId: this.contentsTab.pageParams.sectionId,\n            modNavOptions: this.modNavOptions,\n        });\n\n        delete this.module;\n    }\n\n    /**\n     * Load course option handlers.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadCourseHandlers(): Promise<void> {\n        if (!this.course) {\n            return;\n        }\n\n        // Load the course handlers.\n        const handlers = await CoreCourseOptionsDelegate.getHandlersToDisplay(this.course, false, this.isGuest);\n\n        let tabToLoad: number | undefined;\n\n        // Create the full path.\n        handlers.forEach((handler, index) => {\n            handler.data.page = CorePath.concatenatePaths(this.currentPagePath, handler.data.page);\n            handler.data.pageParams = handler.data.pageParams || {};\n\n            // Check if this handler should be the first selected tab.\n            if (this.firstTabName && handler.name == this.firstTabName) {\n                tabToLoad = index + 1;\n            }\n        });\n\n        this.tabs = [...this.tabs, ...handlers.map(handler => ({\n            ...handler.data,\n            name: handler.name,\n        }))];\n\n        // Select the tab if needed.\n        this.firstTabName = undefined;\n        if (tabToLoad) {\n            await CoreUtils.nextTick();\n\n            this.tabsComponent?.selectByIndex(tabToLoad);\n        }\n    }\n\n    /**\n     * Load title for the page.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadBasinInfo(): Promise<void> {\n        if (!this.course) {\n            return;\n        }\n\n        // Get the title to display initially.\n        this.title = CoreCourseFormatDelegate.getCourseTitle(this.course);\n\n        await this.setCourseColor();\n\n        this.updateProgress();\n\n        // Load sections.\n        this.sections = await CoreUtils.ignoreErrors(CoreCourse.getSections(this.course.id, false, true), []);\n\n        if (!this.sections) {\n            return;\n        }\n\n        // Get the title again now that we have sections.\n        this.title = CoreCourseFormatDelegate.getCourseTitle(this.course, this.sections);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        const path = CoreNavigator.getRouteFullPath(this.route.snapshot);\n\n        CoreNavigator.decreaseRouteDepth(path.replace(/(\\/deep)+/, ''));\n        this.selectTabObserver?.off();\n        this.completionObserver?.off();\n        this.fullScreenObserver?.off();\n    }\n\n    /**\n     * User entered the page.\n     */\n    ionViewDidEnter(): void {\n        this.tabsComponent?.ionViewDidEnter();\n    }\n\n    /**\n     * User left the page.\n     */\n    ionViewDidLeave(): void {\n        this.tabsComponent?.ionViewDidLeave();\n    }\n\n    /**\n     * Open the course summary\n     */\n    openCourseSummary(): void {\n        if (this.course) {\n            CoreCourseHelper.openCourseSummary(this.course);\n        }\n    }\n\n    /**\n     * Update course progress.\n     */\n    protected updateProgress(): void {\n        if (\n            !this.course ||\n                !('progress' in this.course) ||\n                typeof this.course.progress !== 'number' ||\n                this.course.progress < 0 ||\n                this.course.completionusertracked === false\n        ) {\n            this.progress = undefined;\n\n            return;\n        }\n\n        this.progress = this.course.progress;\n    }\n\n    /**\n     * Set course color.\n     */\n    protected async setCourseColor(): Promise<void> {\n        if (!this.course) {\n            return;\n        }\n\n        await CoreCoursesHelper.loadCourseColorAndImage(this.course);\n\n        if (!this.courseThumb) {\n            return;\n        }\n\n        if (this.course.color) {\n            this.courseThumb.nativeElement.style.setProperty('--course-color', this.course.color);\n\n            const tint = CoreColors.lighter(this.course.color, 50);\n            this.courseThumb.nativeElement.style.setProperty('--course-color-tint', tint);\n        } else if(this.course.colorNumber !== undefined) {\n            this.courseThumb.nativeElement.classList.add('course-color-' + this.course.colorNumber);\n        }\n    }\n\n}\n\ntype CourseTab = CoreTabsOutletTab & {\n    name?: string;\n};\n","<ion-header [collapsible]=\"(tabsComponent?.selectedIndex === 0 || tabsComponent?.selectedIndex === undefined) && !fullScreenEnabled\">\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>\n                <core-format-text [text]=\"title\" contextLevel=\"course\" [contextInstanceId]=\"course?.id\" />\n            </h1>\n        </ion-title>\n\n        <ion-buttons slot=\"end\">\n            <ion-button fill=\"clear\" (click)=\"openCourseSummary()\" [attr.aria-label]=\"'core.course.coursesummary' | translate\">\n                <ion-icon name=\"fas-circle-info\" slot=\"icon-only\" aria-hidden=\"true\" />\n            </ion-button>\n            <!-- Add an empty context menu so tab pages can add items, otherwise the menu disappears in some cases. -->\n            <core-context-menu />\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<div class=\"core-course-header\">\n    <ion-item class=\"core-format-progress-list ion-text-wrap list-item-limited-width\" collapsible>\n        <ng-container *ngIf=\"course\">\n            <div *ngIf=\"!course.courseimage\" #courseThumb slot=\"start\" class=\"core-course-thumb\">\n                <ion-icon name=\"fas-graduation-cap\" class=\"course-icon\" aria-hidden=\"true\" />\n            </div>\n            <ion-avatar *ngIf=\"course.courseimage\" slot=\"start\" class=\"core-course-thumb\">\n                <img [src]=\"course.courseimage\" core-external-content alt=\"\" />\n            </ion-avatar>\n        </ng-container>\n\n        <ion-label>\n            <h1>\n                <core-format-text [text]=\"title\" contextLevel=\"course\" [contextInstanceId]=\"course?.id\" />\n            </h1>\n            <div class=\"core-course-progress\" *ngIf=\"progress !== undefined\">\n                <core-progress-bar [progress]=\"progress\" a11yText=\"core.course.aria:sectionprogress\" />\n            </div>\n        </ion-label>\n    </ion-item>\n</div>\n<core-tabs-outlet [tabs]=\"tabs\" [hideUntil]=\"loaded\" (ionChange)=\"tabSelected()\" />\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}