{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreError } from '@classes/errors/error';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CorePlatform } from '@services/platform';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModWorkshopProvider, AddonModWorkshopPhase, AddonModWorkshop } from '../../services/workshop';\nimport { AddonModWorkshopHelper } from '../../services/workshop-helper';\nimport { AddonModWorkshopOffline } from '../../services/workshop-offline';\nimport { AddonModWorkshopSyncProvider, AddonModWorkshopSync } from '../../services/workshop-sync';\nimport { AddonModWorkshopPhaseInfoComponent } from '../phase/phase';\nimport { ADDON_MOD_WORKSHOP_COMPONENT, ADDON_MOD_WORKSHOP_PAGE_NAME } from '@addons/mod/workshop/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@features/course/pages/contents/contents\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../../../../../core/components/group-selector/group-selector\";\nimport * as i5 from \"../../../../../core/components/loading/loading\";\nimport * as i6 from \"../../../../../core/components/navbar-buttons/navbar-buttons\";\nimport * as i7 from \"../../../../../core/directives/fa-icon\";\nimport * as i8 from \"../../../../../core/directives/format-text\";\nimport * as i9 from \"../../../../../core/directives/collapsible-item\";\nimport * as i10 from \"../../../../../core/directives/collapsible-footer\";\nimport * as i11 from \"../../../../../core/directives/update-non-reactive-attributes\";\nimport * as i12 from \"../../../../../core/features/course/components/module-info/module-info\";\nimport * as i13 from \"../../../../../core/features/course/components/module-navigation/module-navigation\";\nimport * as i14 from \"../submission/submission\";\nimport * as i15 from \"@ngx-translate/core\";\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 18);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_workshop.tasktodo\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 19);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_workshop.taskfail\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 20);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_workshop.taskinfo\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 21);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_workshop.taskdone\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p\", 22);\n  }\n  if (rf & 2) {\n    const task_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"innerHTML\", task_r6.details, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 23);\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 10);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const task_r6 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r14.runTask(task_r6));\n    });\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_1_Template, 2, 3, \"ion-icon\", 11);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_2_Template, 2, 3, \"ion-icon\", 12);\n    i0.ɵɵtemplate(3, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_3_Template, 2, 3, \"ion-icon\", 13);\n    i0.ɵɵtemplate(4, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_4_Template, 2, 3, \"ion-icon\", 14);\n    i0.ɵɵelementStart(5, \"ion-label\")(6, \"p\", 15);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_p_8_Template, 1, 1, \"p\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_9_Template, 1, 0, \"ion-icon\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const task_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(3);\n    i0.ɵɵclassProp(\"item-dimmed\", task_r6.code === \"submit\" && !ctx_r5.showSubmit);\n    i0.ɵɵproperty(\"detail\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.completed === null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.completed === \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.completed === \"info\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.completed === \"1\");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(task_r6.title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.details);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", task_r6.link && task_r6.code !== \"submit\");\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_Template, 10, 10, \"ion-item\", 9);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.phases[ctx_r4.workshop.phase].tasks);\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r17 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_ion_card_6_Template_ion_item_click_1_listener() {\n      i0.ɵɵrestoreView(_r17);\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.viewPhaseInfo());\n    });\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"h2\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(5, AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.phases[ctx_r0.workshop.phase].title);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.phases && ctx_r0.phases[ctx_r0.workshop.phase] && ctx_r0.phases[ctx_r0.workshop.phase].tasks && ctx_r0.phases[ctx_r0.workshop.phase].tasks.length);\n  }\n}\nfunction AddonModWorkshopIndexComponent_ion_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"core-format-text\", 24);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, \"core.description\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r1.description)(\"component\", ctx_r1.component)(\"componentId\", ctx_r1.componentId)(\"contextInstanceId\", ctx_r1.module.id)(\"courseId\", ctx_r1.courseId);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"core-format-text\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, \"addon.mod_workshop.conclusion\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r24.component)(\"componentId\", ctx_r24.module.id)(\"text\", ctx_r24.workshop.conclusion)(\"contextInstanceId\", ctx_r24.module.id)(\"courseId\", ctx_r24.courseId);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_workshop.submissiongrade\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r26.userGrades.submissionlongstrgrade);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 15);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_workshop.gradinggrade\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r27.userGrades.assessmentlongstrgrade);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_6_Template, 7, 4, \"ion-item\", 26);\n    i0.ɵɵtemplate(7, AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_7_Template, 7, 4, \"ion-item\", 26);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 3, \"addon.mod_workshop.yourgrades\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r25.userGrades.submissionlongstrgrade);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r25.userGrades.assessmentlongstrgrade);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_1_Template, 7, 8, \"ion-card\", 5);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_Template, 8, 5, \"ion-card\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.workshop.conclusion);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r18.userGrades);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"core-format-text\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, \"addon.mod_workshop.areainstructauthors\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r19.component)(\"componentId\", ctx_r19.module.id)(\"text\", ctx_r19.workshop.instructauthors)(\"contextInstanceId\", ctx_r19.module.id)(\"courseId\", ctx_r19.courseId);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_workshop.yoursubmission\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_workshop.yoursubmissionwithassessments\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_workshop.noyoursubmission\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\");\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_p_2_Template, 3, 3, \"p\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r30.submission);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_addon_mod_workshop_submission_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"addon-mod-workshop-submission\", 29);\n  }\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"submission\", ctx_r31.submission)(\"courseId\", ctx_r31.workshop.course)(\"module\", ctx_r31.module)(\"workshop\", ctx_r31.workshop)(\"access\", ctx_r31.access);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\", 8)(2, \"ion-label\");\n    i0.ɵɵtemplate(3, AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_3_Template, 3, 3, \"h3\", 27);\n    i0.ɵɵtemplate(4, AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_4_Template, 3, 3, \"h3\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_Template, 3, 1, \"ion-item\", 26);\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ion_card_3_addon_mod_workshop_submission_6_Template, 1, 5, \"addon-mod-workshop-submission\", 28);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.workshop.phase !== ctx_r20.PHASE_CLOSED || !ctx_r20.submission);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.workshop.phase === ctx_r20.PHASE_CLOSED && ctx_r20.submission);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r20.submission);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.submission);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"addon-mod-workshop-submission\", 31);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const submission_r35 = ctx.$implicit;\n    const ctx_r34 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"submission\", submission_r35)(\"courseId\", ctx_r34.workshop.course)(\"module\", ctx_r34.module)(\"workshop\", ctx_r34.workshop)(\"access\", ctx_r34.access);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_ng_container_6_Template, 2, 5, \"ng-container\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 2, \"addon.mod_workshop.publishedsubmissions\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r33.publishedSubmissions);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_Template, 7, 4, \"ion-card\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r21.publishedSubmissions && ctx_r21.publishedSubmissions.length);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"core-format-text\", 25);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r36 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 6, \"addon.mod_workshop.areainstructreviewers\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r36.component)(\"componentId\", ctx_r36.module.id)(\"text\", ctx_r36.workshop.instructreviewers)(\"contextInstanceId\", ctx_r36.module.id)(\"courseId\", ctx_r36.courseId);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, \"addon.mod_workshop.assignedassessmentsnone\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"addon-mod-workshop-submission\", 32);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const assessment_r40 = ctx.$implicit;\n    const ctx_r39 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"submission\", assessment_r40.submission)(\"assessment\", assessment_r40)(\"courseId\", ctx_r39.workshop.course)(\"module\", ctx_r39.module)(\"workshop\", ctx_r39.workshop)(\"access\", ctx_r39.access);\n  }\n}\nconst _c0 = function () {\n  return [];\n};\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\", 8)(2, \"ion-label\")(3, \"h3\", 15);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ion_item_6_Template, 5, 3, \"ion-item\", 26);\n    i0.ɵɵtemplate(7, AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ng_container_7_Template, 2, 6, \"ng-container\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r37 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 3, \"addon.mod_workshop.assignedassessments\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r37.assessments || !ctx_r37.assessments.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r37.assessments || i0.ɵɵpureFunction0(5, _c0));\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_1_Template, 7, 8, \"ion-card\", 5);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_Template, 8, 6, \"ion-card\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.workshop.phase === ctx_r22.PHASE_ASSESSMENT && ctx_r22.workshop.instructreviewers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r22.canAssess);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_workshop.submissionsreport\"));\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h3\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, \"addon.mod_workshop.gradesreport\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"addon-mod-workshop-submission\", 31);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const submission_r45 = ctx.$implicit;\n    const ctx_r43 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"submission\", submission_r45)(\"courseId\", ctx_r43.workshop.course)(\"module\", ctx_r43.module)(\"workshop\", ctx_r43.workshop)(\"access\", ctx_r43.access);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r49 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\")(1, \"ion-button\", 35);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_2_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r49);\n      const ctx_r48 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r48.gotoSubmissionsPage(ctx_r48.page - 1));\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 36);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.previous\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r51 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\")(1, \"ion-button\", 37);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_3_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r51);\n      const ctx_r50 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r50.gotoSubmissionsPage(ctx_r50.page + 1));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelement(4, \"ion-icon\", 38);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.next\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\")(1, \"ion-row\", 34);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_2_Template, 5, 3, \"ion-col\", 5);\n    i0.ɵɵtemplate(3, AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_3_Template, 5, 3, \"ion-col\", 5);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r44 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r44.page > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r44.hasNextPage);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_ion_card_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r53 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\", 8)(2, \"ion-label\");\n    i0.ɵɵtemplate(3, AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_3_Template, 3, 3, \"h3\", 27);\n    i0.ɵɵtemplate(4, AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_4_Template, 3, 3, \"h3\", 27);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"core-group-selector\", 33);\n    i0.ɵɵlistener(\"selectedChange\", function AddonModWorkshopIndexComponent_div_8_ion_card_6_Template_core_group_selector_selectedChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r52 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r52.group = $event);\n    })(\"selectedChange\", function AddonModWorkshopIndexComponent_div_8_ion_card_6_Template_core_group_selector_selectedChange_5_listener() {\n      i0.ɵɵrestoreView(_r53);\n      const ctx_r54 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r54.setGroup(ctx_r54.group));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ion_card_6_ng_container_6_Template, 2, 5, \"ng-container\", 30);\n    i0.ɵɵtemplate(7, AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_Template, 4, 2, \"ion-grid\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r23.workshop.phase === ctx_r23.PHASE_SUBMISSION);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r23.workshop.phase > ctx_r23.PHASE_SUBMISSION);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"groupInfo\", ctx_r23.groupInfo)(\"selected\", ctx_r23.group)(\"courseId\", ctx_r23.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r23.grades);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r23.page > 0 || ctx_r23.hasNextPage);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_8_ng_container_1_Template, 3, 2, \"ng-container\", 5);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_8_ion_card_2_Template, 7, 8, \"ion-card\", 5);\n    i0.ɵɵtemplate(3, AddonModWorkshopIndexComponent_div_8_ion_card_3_Template, 7, 4, \"ion-card\", 5);\n    i0.ɵɵtemplate(4, AddonModWorkshopIndexComponent_div_8_ng_container_4_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵtemplate(5, AddonModWorkshopIndexComponent_div_8_ng_container_5_Template, 3, 2, \"ng-container\", 5);\n    i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_div_8_ion_card_6_Template, 8, 7, \"ion-card\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.workshop.phase >= ctx_r2.PHASE_CLOSED);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.workshop.phase === ctx_r2.PHASE_SUBMISSION && ctx_r2.workshop.instructauthors);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.canSubmit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.workshop.phase >= ctx_r2.PHASE_CLOSED);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.workshop.phase >= ctx_r2.PHASE_ASSESSMENT);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.access.canviewallsubmissions && ctx_r2.workshop.phase >= ctx_r2.PHASE_SUBMISSION && (ctx_r2.grades && ctx_r2.grades.length || ctx_r2.groupInfo && (ctx_r2.groupInfo.separateGroups || ctx_r2.groupInfo.visibleGroups)));\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_9_div_1_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r59 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 44);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_div_9_div_1_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r59);\n      const ctx_r58 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r58.gotoSubmit());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 45);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"addon.mod_workshop.createsubmission\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_9_div_1_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r61 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 44);\n    i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_div_9_div_1_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r61);\n      const ctx_r60 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r60.gotoSubmit());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 46);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"addon.mod_workshop.editsubmission\"), \" \");\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_9_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 42);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_9_div_1_ion_button_1_Template, 4, 3, \"ion-button\", 43);\n    i0.ɵɵtemplate(2, AddonModWorkshopIndexComponent_div_9_div_1_ion_button_2_Template, 4, 3, \"ion-button\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r55 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r55.access.creatingsubmissionallowed && !ctx_r55.submission);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r55.access.modifyingsubmissionallowed && ctx_r55.submission);\n  }\n}\nfunction AddonModWorkshopIndexComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39);\n    i0.ɵɵtemplate(1, AddonModWorkshopIndexComponent_div_9_div_1_Template, 3, 2, \"div\", 40);\n    i0.ɵɵelement(2, \"core-course-module-navigation\", 41);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.access && (ctx_r3.workshop == null ? null : ctx_r3.workshop.phase) >= ctx_r3.PHASE_SUBMISSION && ctx_r3.canSubmit && ctx_r3.showSubmit && (ctx_r3.access.creatingsubmissionallowed && !ctx_r3.submission || ctx_r3.access.modifyingsubmissionallowed && ctx_r3.submission));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"courseId\", ctx_r3.courseId)(\"currentModuleId\", ctx_r3.module.id);\n  }\n}\n/**\n * Component that displays a workshop index page.\n */\nexport class AddonModWorkshopIndexComponent extends CoreCourseModuleMainActivityComponent {\n  constructor(content, courseContentsPage) {\n    super('AddonModWorkshopIndexComponent', content, courseContentsPage);\n    this.group = 0;\n    this.component = ADDON_MOD_WORKSHOP_COMPONENT;\n    this.pluginName = 'workshop';\n    this.page = 0;\n    this.grades = [];\n    this.assessments = [];\n    this.publishedSubmissions = [];\n    this.groupInfo = {\n      groups: [],\n      separateGroups: false,\n      visibleGroups: false,\n      defaultGroupId: 0,\n      canAccessAllGroups: false\n    };\n    this.canSubmit = false;\n    this.showSubmit = false;\n    this.canAssess = false;\n    this.hasNextPage = false;\n    this.PHASE_SETUP = AddonModWorkshopPhase.PHASE_SETUP;\n    this.PHASE_SUBMISSION = AddonModWorkshopPhase.PHASE_SUBMISSION;\n    this.PHASE_ASSESSMENT = AddonModWorkshopPhase.PHASE_ASSESSMENT;\n    this.PHASE_EVALUATION = AddonModWorkshopPhase.PHASE_EVALUATION;\n    this.PHASE_CLOSED = AddonModWorkshopPhase.PHASE_CLOSED;\n    this.offlineSubmissions = [];\n    this.syncEventName = AddonModWorkshopSyncProvider.AUTO_SYNCED;\n    // Listen to submission and assessment changes.\n    this.obsSubmissionChanged = CoreEvents.on(AddonModWorkshopProvider.SUBMISSION_CHANGED, data => {\n      this.eventReceived(data);\n    }, this.siteId);\n    // Listen to submission and assessment changes.\n    this.obsAssessmentSaved = CoreEvents.on(AddonModWorkshopProvider.ASSESSMENT_SAVED, data => {\n      this.eventReceived(data);\n    }, this.siteId);\n    // Since most actions will take the user out of the app, we should refresh the view when the app is resumed.\n    this.appResumeSubscription = CorePlatform.resume.subscribe(() => {\n      this.showLoadingAndRefresh(true);\n    });\n    // Refresh workshop on sync.\n    this.syncObserver = CoreEvents.on(AddonModWorkshopSyncProvider.AUTO_SYNCED, data => {\n      // Update just when all database is synced.\n      this.eventReceived(data);\n    }, this.siteId);\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      _superprop_getNgOnInit().call(_this);\n      yield _this.loadContent(false, true);\n    })();\n  }\n  /**\n   * Function called when we receive an event of submission changes.\n   *\n   * @param data Data received by the event.\n   */\n  eventReceived(data) {\n    var _this$workshop;\n    if (((_this$workshop = this.workshop) === null || _this$workshop === void 0 ? void 0 : _this$workshop.id) === data.workshopId) {\n      this.showLoadingAndRefresh(true);\n      // Check completion since it could be configured to complete once the user adds a new discussion or replies.\n      this.checkCompletion();\n    }\n  }\n  /**\n   * Perform the invalidate content function.\n   *\n   * @returns Resolved when done.\n   */\n  invalidateContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      promises.push(AddonModWorkshop.invalidateWorkshopData(_this2.courseId));\n      if (_this2.workshop) {\n        var _this2$access;\n        promises.push(AddonModWorkshop.invalidateWorkshopAccessInformationData(_this2.workshop.id));\n        promises.push(AddonModWorkshop.invalidateUserPlanPhasesData(_this2.workshop.id));\n        if (_this2.canSubmit) {\n          promises.push(AddonModWorkshop.invalidateSubmissionsData(_this2.workshop.id));\n        }\n        if ((_this2$access = _this2.access) !== null && _this2$access !== void 0 && _this2$access.canviewallsubmissions) {\n          promises.push(AddonModWorkshop.invalidateGradeReportData(_this2.workshop.id));\n          promises.push(CoreGroups.invalidateActivityAllowedGroups(_this2.workshop.coursemodule));\n          promises.push(CoreGroups.invalidateActivityGroupMode(_this2.workshop.coursemodule));\n        }\n        if (_this2.canAssess) {\n          promises.push(AddonModWorkshop.invalidateReviewerAssesmentsData(_this2.workshop.id));\n        }\n        promises.push(AddonModWorkshop.invalidateGradesData(_this2.workshop.id));\n        promises.push(AddonModWorkshop.invalidateWorkshopWSData(_this2.workshop.id));\n      }\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * Compares sync event data with current data to check if refresh content is needed.\n   *\n   * @param syncEventData Data receiven on sync observer.\n   * @returns True if refresh is needed, false otherwise.\n   */\n  isRefreshSyncNeeded(syncEventData) {\n    if (this.workshop && syncEventData.workshopId == this.workshop.id) {\n      var _this$content;\n      // Refresh the data.\n      (_this$content = this.content) === null || _this$content === void 0 || _this$content.scrollToTop();\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @inheritdoc\n   */\n  fetchContent(refresh, sync = false, showErrors = false) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.workshop = yield AddonModWorkshop.getWorkshop(_this3.courseId, _this3.module.id);\n      _this3.description = _this3.workshop.intro;\n      _this3.dataRetrieved.emit(_this3.workshop);\n      if (sync) {\n        // Try to synchronize the feedback.\n        yield _this3.syncActivity(showErrors);\n      }\n      // Check if there are answers stored in offline.\n      _this3.access = yield AddonModWorkshop.getWorkshopAccessInformation(_this3.workshop.id, {\n        cmId: _this3.module.id\n      });\n      if (_this3.access.canviewallsubmissions) {\n        _this3.groupInfo = yield CoreGroups.getActivityGroupInfo(_this3.workshop.coursemodule);\n        _this3.group = CoreGroups.validateGroupId(_this3.group, _this3.groupInfo);\n      }\n      _this3.phases = yield AddonModWorkshop.getUserPlanPhases(_this3.workshop.id, {\n        cmId: _this3.module.id\n      });\n      _this3.phases[_this3.workshop.phase].tasks.forEach(task => {\n        if (!task.link && (task.code == 'examples' || task.code == 'prepareexamples')) {\n          // Add links to manage examples.\n          task.link = _this3.module.url || '';\n        }\n      });\n      // Check if there are info stored in offline.\n      _this3.hasOffline = yield AddonModWorkshopOffline.hasWorkshopOfflineData(_this3.workshop.id);\n      if (_this3.hasOffline) {\n        _this3.offlineSubmissions = yield AddonModWorkshopOffline.getSubmissions(_this3.workshop.id);\n      } else {\n        _this3.offlineSubmissions = [];\n      }\n      yield _this3.setPhaseInfo();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  logActivity() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this4.workshop) {\n        return; // Shouldn't happen.\n      }\n\n      yield CoreUtils.ignoreErrors(AddonModWorkshop.logView(_this4.workshop.id));\n      _this4.analyticsLogEvent('mod_workshop_view_workshop');\n    })();\n  }\n  /**\n   * Retrieves and shows submissions grade page.\n   *\n   * @param page Page number to be retrieved.\n   * @returns Resolved when done.\n   */\n  gotoSubmissionsPage(page) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this5.workshop) {\n        return;\n      }\n      const workshop = _this5.workshop;\n      const report = yield AddonModWorkshop.getGradesReport(workshop.id, {\n        groupId: _this5.group,\n        page,\n        cmId: _this5.module.id\n      });\n      const numEntries = report && report.grades && report.grades.length || 0;\n      _this5.page = page;\n      _this5.hasNextPage = numEntries >= AddonModWorkshopProvider.PER_PAGE && (_this5.page + 1) * AddonModWorkshopProvider.PER_PAGE < report.totalcount;\n      const grades = report.grades || [];\n      _this5.grades = [];\n      yield Promise.all(grades.map( /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (grade) {\n          const submission = {\n            id: grade.submissionid || 0,\n            workshopid: workshop.id,\n            example: false,\n            authorid: grade.userid,\n            timecreated: grade.submissionmodified || 0,\n            timemodified: grade.submissionmodified || 0,\n            title: grade.submissiontitle || '',\n            content: '',\n            contenttrust: 0,\n            attachment: 0,\n            grade: grade.submissiongrade,\n            gradeover: grade.submissiongradeover,\n            gradeoverby: grade.submissiongradeoverby,\n            published: !!grade.submissionpublished,\n            gradinggrade: grade.gradinggrade,\n            late: 0,\n            reviewedby: _this5.parseReviewer(grade.reviewedby),\n            reviewerof: _this5.parseReviewer(grade.reviewerof)\n          };\n          if (workshop.phase == AddonModWorkshopPhase.PHASE_ASSESSMENT) {\n            var _grade$reviewedby, _grade$reviewerof, _grade$reviewedby2, _grade$reviewerof2;\n            submission.reviewedbydone = ((_grade$reviewedby = grade.reviewedby) === null || _grade$reviewedby === void 0 ? void 0 : _grade$reviewedby.reduce((a, b) => a + (b.grade ? 1 : 0), 0)) || 0;\n            submission.reviewerofdone = ((_grade$reviewerof = grade.reviewerof) === null || _grade$reviewerof === void 0 ? void 0 : _grade$reviewerof.reduce((a, b) => a + (b.grade ? 1 : 0), 0)) || 0;\n            submission.reviewedbycount = ((_grade$reviewedby2 = grade.reviewedby) === null || _grade$reviewedby2 === void 0 ? void 0 : _grade$reviewedby2.length) || 0;\n            submission.reviewerofcount = ((_grade$reviewerof2 = grade.reviewerof) === null || _grade$reviewerof2 === void 0 ? void 0 : _grade$reviewerof2.length) || 0;\n          }\n          const offlineData = yield AddonModWorkshopHelper.applyOfflineData(submission, _this5.offlineSubmissions);\n          if (offlineData !== undefined) {\n            _this5.grades.push(offlineData);\n          }\n        });\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()));\n    })();\n  }\n  parseReviewer(reviewers = []) {\n    return reviewers.map(reviewer => {\n      const parsed = {\n        grade: reviewer.grade,\n        gradinggrade: reviewer.gradinggrade,\n        gradinggradeover: reviewer.gradinggradeover,\n        id: reviewer.assessmentid,\n        reviewerid: reviewer.userid,\n        submissionid: reviewer.submissionid,\n        weight: reviewer.weight,\n        timecreated: 0,\n        timemodified: 0,\n        feedbackauthor: '',\n        gradinggradeoverby: 0,\n        feedbackattachmentfiles: [],\n        feedbackcontentfiles: [],\n        feedbackauthorattachment: 0\n      };\n      return parsed;\n    });\n  }\n  /**\n   * Open task.\n   *\n   * @param task Task to be done.\n   */\n  runTask(task) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (task.code == 'submit') {\n        _this6.gotoSubmit();\n      } else if (task.link) {\n        CoreUtils.openInBrowser(task.link);\n      }\n    })();\n  }\n  /**\n   * Go to submit page.\n   */\n  gotoSubmit() {\n    if (!this.canSubmit || !this.access) {\n      return;\n    }\n    if (this.access.creatingsubmissionallowed && !this.submission || this.access.modifyingsubmissionallowed && this.submission) {\n      var _this$submission;\n      const params = {\n        module: this.module,\n        access: this.access\n      };\n      const submissionId = ((_this$submission = this.submission) === null || _this$submission === void 0 ? void 0 : _this$submission.id) || 0;\n      CoreNavigator.navigateToSitePath(`${ADDON_MOD_WORKSHOP_PAGE_NAME}/${this.courseId}/${this.module.id}/${submissionId}/edit`, {\n        params\n      });\n    }\n  }\n  /**\n   * View Phase info.\n   */\n  viewPhaseInfo() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this7.phases || !_this7.workshop) {\n        return;\n      }\n      const modalData = yield CoreDomUtils.openModal({\n        component: AddonModWorkshopPhaseInfoComponent,\n        componentProps: {\n          phases: CoreUtils.objectToArray(_this7.phases),\n          workshopPhase: _this7.workshop.phase,\n          externalUrl: _this7.module.url,\n          showSubmit: _this7.showSubmit\n        }\n      });\n      if (modalData === true) {\n        _this7.gotoSubmit();\n      }\n    })();\n  }\n  /**\n   * Set group to see the workshop.\n   *\n   * @param groupId Group Id.\n   * @returns Promise resolved when done.\n   */\n  setGroup(groupId) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      _this8.group = groupId;\n      yield _this8.gotoSubmissionsPage(0);\n    })();\n  }\n  /**\n   * Convenience function to set current phase information.\n   *\n   * @returns Promise resolved when done.\n   */\n  setPhaseInfo() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this9.phases || !_this9.workshop || !_this9.access) {\n        return;\n      }\n      _this9.submission = undefined;\n      _this9.canAssess = false;\n      _this9.assessments = [];\n      _this9.userGrades = undefined;\n      _this9.publishedSubmissions = [];\n      const workshop = _this9.workshop;\n      _this9.canSubmit = AddonModWorkshopHelper.canSubmit(_this9.workshop, _this9.access, _this9.phases[AddonModWorkshopPhase.PHASE_SUBMISSION].tasks);\n      _this9.showSubmit = _this9.canSubmit && (_this9.access.creatingsubmissionallowed && !_this9.submission || _this9.access.modifyingsubmissionallowed && !!_this9.submission);\n      const promises = [];\n      if (_this9.canSubmit) {\n        promises.push(AddonModWorkshopHelper.getUserSubmission(_this9.workshop.id, {\n          cmId: _this9.module.id\n        }).then( /*#__PURE__*/function () {\n          var _ref2 = _asyncToGenerator(function* (submission) {\n            _this9.submission = yield AddonModWorkshopHelper.applyOfflineData(submission, _this9.offlineSubmissions);\n            return;\n          });\n          return function (_x2) {\n            return _ref2.apply(this, arguments);\n          };\n        }()));\n      }\n      if (_this9.access.canviewallsubmissions && _this9.workshop.phase >= AddonModWorkshopPhase.PHASE_SUBMISSION) {\n        promises.push(_this9.gotoSubmissionsPage(_this9.page));\n      }\n      let assessPromise = Promise.resolve();\n      if (_this9.workshop.phase >= AddonModWorkshopPhase.PHASE_ASSESSMENT) {\n        _this9.canAssess = AddonModWorkshopHelper.canAssess(_this9.workshop, _this9.access);\n        if (_this9.canAssess) {\n          assessPromise = AddonModWorkshopHelper.getReviewerAssessments(_this9.workshop.id, {\n            cmId: _this9.module.id\n          }).then( /*#__PURE__*/function () {\n            var _ref3 = _asyncToGenerator(function* (assessments) {\n              yield Promise.all(assessments.map( /*#__PURE__*/function () {\n                var _ref4 = _asyncToGenerator(function* (assessment) {\n                  assessment.strategy = workshop.strategy;\n                  if (!_this9.hasOffline) {\n                    return;\n                  }\n                  try {\n                    const offlineAssessment = yield AddonModWorkshopOffline.getAssessment(workshop.id, assessment.id);\n                    assessment.offline = true;\n                    assessment.timemodified = Math.floor(offlineAssessment.timemodified / 1000);\n                  } catch (_unused) {\n                    // Ignore errors.\n                  }\n                });\n                return function (_x4) {\n                  return _ref4.apply(this, arguments);\n                };\n              }()));\n              _this9.assessments = assessments;\n              return;\n            });\n            return function (_x3) {\n              return _ref3.apply(this, arguments);\n            };\n          }());\n        }\n      }\n      if (_this9.workshop.phase === AddonModWorkshopPhase.PHASE_CLOSED) {\n        promises.push(AddonModWorkshop.getGrades(_this9.workshop.id, {\n          cmId: _this9.module.id\n        }).then(grades => {\n          _this9.userGrades = grades.submissionlongstrgrade || grades.assessmentlongstrgrade ? grades : undefined;\n          return;\n        }));\n        if (_this9.access.canviewpublishedsubmissions) {\n          promises.push(assessPromise.then( /*#__PURE__*/_asyncToGenerator(function* () {\n            const submissions = yield AddonModWorkshop.getSubmissions(workshop.id, {\n              cmId: _this9.module.id\n            });\n            _this9.publishedSubmissions = submissions.filter(submission => {\n              if (submission.published) {\n                submission.reviewedby = _this9.assessments.filter(assessment => assessment.submissionid === submission.id).map(assessment => AddonModWorkshopHelper.realGradeValue(workshop, assessment));\n                return true;\n              }\n              return false;\n            });\n            return;\n          })));\n        }\n      }\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  sync() {\n    if (!this.workshop) {\n      throw new CoreError('Cannot sync without a workshop.');\n    }\n    return AddonModWorkshopSync.syncWorkshop(this.workshop.id);\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$obsSubmissionCh, _this$obsAssessmentSa, _this$appResumeSubscr;\n    super.ngOnDestroy();\n    (_this$obsSubmissionCh = this.obsSubmissionChanged) === null || _this$obsSubmissionCh === void 0 || _this$obsSubmissionCh.off();\n    (_this$obsAssessmentSa = this.obsAssessmentSaved) === null || _this$obsAssessmentSa === void 0 || _this$obsAssessmentSa.off();\n    (_this$appResumeSubscr = this.appResumeSubscription) === null || _this$appResumeSubscr === void 0 || _this$appResumeSubscr.unsubscribe();\n  }\n}\n_class = AddonModWorkshopIndexComponent;\n_class.ɵfac = function AddonModWorkshopIndexComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.IonContent, 8), i0.ɵɵdirectiveInject(i2.CoreCourseContentsPage, 8));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-workshop-index\"]],\n  inputs: {\n    group: \"group\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 10,\n  vars: 13,\n  consts: [[\"slot\", \"end\"], [\"fill\", \"clear\", \"aria-haspopup\", \"true\", 3, \"click\"], [\"name\", \"fas-circle-info\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [3, \"module\", \"component\", \"componentId\", \"courseId\", \"hasDataToSync\", \"completionChanged\"], [4, \"ngIf\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"button\", \"\", 3, \"detail\", \"click\"], [1, \"ion-text-wrap\"], [\"button\", \"\", \"class\", \"ion-text-wrap\", 3, \"item-dimmed\", \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"start\", \"name\", \"far-circle\", 4, \"ngIf\"], [\"slot\", \"start\", \"name\", \"fas-circle-xmark\", \"color\", \"danger\", 4, \"ngIf\"], [\"slot\", \"start\", \"name\", \"fas-circle-info\", \"color\", \"info\", 4, \"ngIf\"], [\"slot\", \"start\", \"name\", \"fas-circle-check\", \"color\", \"success\", 4, \"ngIf\"], [1, \"item-heading\"], [3, \"innerHTML\", 4, \"ngIf\"], [\"slot\", \"end\", \"name\", \"fas-up-right-from-square\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"slot\", \"start\", \"name\", \"far-circle\"], [\"slot\", \"start\", \"name\", \"fas-circle-xmark\", \"color\", \"danger\"], [\"slot\", \"start\", \"name\", \"fas-circle-info\", \"color\", \"info\"], [\"slot\", \"start\", \"name\", \"fas-circle-check\", \"color\", \"success\"], [3, \"innerHTML\"], [\"slot\", \"end\", \"name\", \"fas-up-right-from-square\", \"aria-hidden\", \"true\"], [\"contextLevel\", \"module\", 3, \"text\", \"component\", \"componentId\", \"contextInstanceId\", \"courseId\"], [\"collapsible-item\", \"\", \"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"courseId\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"class\", \"item-heading\", 4, \"ngIf\"], [3, \"submission\", \"courseId\", \"module\", \"workshop\", \"access\", 4, \"ngIf\"], [3, \"submission\", \"courseId\", \"module\", \"workshop\", \"access\"], [4, \"ngFor\", \"ngForOf\"], [\"summary\", \"true\", 1, \"core-as-item\", 3, \"submission\", \"courseId\", \"module\", \"workshop\", \"access\"], [\"summary\", \"true\", 1, \"core-as-item\", 3, \"submission\", \"assessment\", \"courseId\", \"module\", \"workshop\", \"access\"], [3, \"groupInfo\", \"selected\", \"courseId\", \"selectedChange\"], [1, \"ion-align-items-center\"], [\"expand\", \"block\", \"fill\", \"outline\", 3, \"click\"], [\"name\", \"fas-chevron-left\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 3, \"click\"], [\"name\", \"fas-chevron-right\", \"slot\", \"end\", \"aria-hidden\", \"true\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\"], [\"class\", \"list-item-limited-width\", 4, \"ngIf\"], [3, \"courseId\", \"currentModuleId\"], [1, \"list-item-limited-width\"], [\"expand\", \"block\", \"class\", \"ion-text-wrap ion-margin\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"slot\", \"start\", \"name\", \"fas-plus\", \"aria-hidden\", \"true\"], [\"slot\", \"start\", \"name\", \"fas-pen\", \"aria-hidden\", \"true\"]],\n  template: function AddonModWorkshopIndexComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"core-navbar-buttons\", 0)(1, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function AddonModWorkshopIndexComponent_Template_ion_button_click_1_listener() {\n        return ctx.openModuleSummary();\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelement(3, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"core-loading\", 3)(5, \"core-course-module-info\", 4);\n      i0.ɵɵlistener(\"completionChanged\", function AddonModWorkshopIndexComponent_Template_core_course_module_info_completionChanged_5_listener() {\n        return ctx.onCompletionChange();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, AddonModWorkshopIndexComponent_ion_card_6_Template, 6, 3, \"ion-card\", 5);\n      i0.ɵɵtemplate(7, AddonModWorkshopIndexComponent_ion_card_7_Template, 7, 8, \"ion-card\", 5);\n      i0.ɵɵtemplate(8, AddonModWorkshopIndexComponent_div_8_Template, 7, 6, \"div\", 5);\n      i0.ɵɵtemplate(9, AddonModWorkshopIndexComponent_div_9_Template, 3, 3, \"div\", 6);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 11, \"core.info\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.showLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"module\", ctx.module)(\"component\", ctx.component)(\"componentId\", ctx.componentId)(\"courseId\", ctx.courseId)(\"hasDataToSync\", ctx.hasOffline);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.phases && ctx.workshop);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.description && ctx.workshop && ctx.workshop.phase === ctx.PHASE_SETUP);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.access && ctx.workshop && ctx.workshop.phase >= ctx.PHASE_SUBMISSION);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showLoading);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.CoreGroupSelectorComponent, i5.CoreLoadingComponent, i6.CoreNavBarButtonsComponent, i7.CoreFaIconDirective, i8.CoreFormatTextDirective, i9.CoreCollapsibleItemDirective, i10.CoreCollapsibleFooterDirective, i11.CoreUpdateNonReactiveAttributesDirective, i1.IonButton, i1.IonCard, i1.IonCol, i1.IonGrid, i1.IonIcon, i1.IonItem, i1.IonItemDivider, i1.IonLabel, i1.IonRow, i12.CoreCourseModuleInfoComponent, i13.CoreCourseModuleNavigationComponent, i14.AddonModWorkshopSubmissionComponent, i15.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreError","CoreCourseModuleMainActivityComponent","CoreGroups","CoreNavigator","CorePlatform","CoreDomUtils","CoreUtils","CoreEvents","AddonModWorkshopProvider","AddonModWorkshopPhase","AddonModWorkshop","AddonModWorkshopHelper","AddonModWorkshopOffline","AddonModWorkshopSyncProvider","AddonModWorkshopSync","AddonModWorkshopPhaseInfoComponent","ADDON_MOD_WORKSHOP_COMPONENT","ADDON_MOD_WORKSHOP_PAGE_NAME","i0","ɵɵelement","ɵɵattribute","ɵɵpipeBind1","ɵɵproperty","task_r6","details","ɵɵsanitizeHtml","ɵɵelementStart","ɵɵlistener","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r15","$implicit","ctx_r14","ɵɵnextContext","ɵɵresetView","runTask","ɵɵtemplate","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_1_Template","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_2_Template","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_3_Template","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_4_Template","ɵɵtext","ɵɵelementEnd","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_p_8_Template","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_ion_icon_9_Template","ɵɵclassProp","code","ctx_r5","showSubmit","ɵɵadvance","completed","ɵɵtextInterpolate","title","link","ɵɵelementContainerStart","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_ion_item_1_Template","ɵɵelementContainerEnd","ctx_r4","phases","workshop","phase","tasks","AddonModWorkshopIndexComponent_ion_card_6_Template_ion_item_click_1_listener","_r17","ctx_r16","viewPhaseInfo","AddonModWorkshopIndexComponent_ion_card_6_ng_container_5_Template","ctx_r0","length","ctx_r1","description","component","componentId","module","id","courseId","ctx_r24","conclusion","ctx_r26","userGrades","submissionlongstrgrade","ctx_r27","assessmentlongstrgrade","AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_6_Template","AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_ion_item_7_Template","ctx_r25","AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_1_Template","AddonModWorkshopIndexComponent_div_8_ng_container_1_ion_card_2_Template","ctx_r18","ctx_r19","instructauthors","ɵɵtextInterpolate1","AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_p_2_Template","ctx_r30","submission","ctx_r31","course","access","AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_3_Template","AddonModWorkshopIndexComponent_div_8_ion_card_3_h3_4_Template","AddonModWorkshopIndexComponent_div_8_ion_card_3_ion_item_5_Template","AddonModWorkshopIndexComponent_div_8_ion_card_3_addon_mod_workshop_submission_6_Template","ctx_r20","PHASE_CLOSED","submission_r35","ctx_r34","AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_ng_container_6_Template","ctx_r33","publishedSubmissions","AddonModWorkshopIndexComponent_div_8_ng_container_4_ion_card_1_Template","ctx_r21","ctx_r36","instructreviewers","assessment_r40","ctx_r39","AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ion_item_6_Template","AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_ng_container_7_Template","ctx_r37","assessments","ɵɵpureFunction0","_c0","AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_1_Template","AddonModWorkshopIndexComponent_div_8_ng_container_5_ion_card_2_Template","ctx_r22","PHASE_ASSESSMENT","canAssess","submission_r45","ctx_r43","AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_2_Template_ion_button_click_1_listener","_r49","ctx_r48","gotoSubmissionsPage","page","AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_3_Template_ion_button_click_1_listener","_r51","ctx_r50","AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_2_Template","AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_ion_col_3_Template","ctx_r44","hasNextPage","AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_3_Template","AddonModWorkshopIndexComponent_div_8_ion_card_6_h3_4_Template","AddonModWorkshopIndexComponent_div_8_ion_card_6_Template_core_group_selector_selectedChange_5_listener","$event","_r53","ctx_r52","group","ctx_r54","setGroup","AddonModWorkshopIndexComponent_div_8_ion_card_6_ng_container_6_Template","AddonModWorkshopIndexComponent_div_8_ion_card_6_ion_grid_7_Template","ctx_r23","PHASE_SUBMISSION","groupInfo","grades","AddonModWorkshopIndexComponent_div_8_ng_container_1_Template","AddonModWorkshopIndexComponent_div_8_ion_card_2_Template","AddonModWorkshopIndexComponent_div_8_ion_card_3_Template","AddonModWorkshopIndexComponent_div_8_ng_container_4_Template","AddonModWorkshopIndexComponent_div_8_ng_container_5_Template","AddonModWorkshopIndexComponent_div_8_ion_card_6_Template","ctx_r2","canSubmit","canviewallsubmissions","separateGroups","visibleGroups","AddonModWorkshopIndexComponent_div_9_div_1_ion_button_1_Template_ion_button_click_0_listener","_r59","ctx_r58","gotoSubmit","AddonModWorkshopIndexComponent_div_9_div_1_ion_button_2_Template_ion_button_click_0_listener","_r61","ctx_r60","AddonModWorkshopIndexComponent_div_9_div_1_ion_button_1_Template","AddonModWorkshopIndexComponent_div_9_div_1_ion_button_2_Template","ctx_r55","creatingsubmissionallowed","modifyingsubmissionallowed","AddonModWorkshopIndexComponent_div_9_div_1_Template","ctx_r3","AddonModWorkshopIndexComponent","constructor","content","courseContentsPage","pluginName","groups","defaultGroupId","canAccessAllGroups","PHASE_SETUP","PHASE_EVALUATION","offlineSubmissions","syncEventName","AUTO_SYNCED","obsSubmissionChanged","on","SUBMISSION_CHANGED","data","eventReceived","siteId","obsAssessmentSaved","ASSESSMENT_SAVED","appResumeSubscription","resume","subscribe","showLoadingAndRefresh","syncObserver","ngOnInit","_superprop_getNgOnInit","_this","_asyncToGenerator","call","loadContent","_this$workshop","workshopId","checkCompletion","invalidateContent","_this2","promises","push","invalidateWorkshopData","_this2$access","invalidateWorkshopAccessInformationData","invalidateUserPlanPhasesData","invalidateSubmissionsData","invalidateGradeReportData","invalidateActivityAllowedGroups","coursemodule","invalidateActivityGroupMode","invalidateReviewerAssesmentsData","invalidateGradesData","invalidateWorkshopWSData","Promise","all","isRefreshSyncNeeded","syncEventData","_this$content","scrollToTop","fetchContent","refresh","sync","showErrors","_this3","getWorkshop","intro","dataRetrieved","emit","syncActivity","getWorkshopAccessInformation","cmId","getActivityGroupInfo","validateGroupId","getUserPlanPhases","forEach","task","url","hasOffline","hasWorkshopOfflineData","getSubmissions","setPhaseInfo","logActivity","_this4","ignoreErrors","logView","analyticsLogEvent","_this5","report","getGradesReport","groupId","numEntries","PER_PAGE","totalcount","map","_ref","grade","submissionid","workshopid","example","authorid","userid","timecreated","submissionmodified","timemodified","submissiontitle","contenttrust","attachment","submissiongrade","gradeover","submissiongradeover","gradeoverby","submissiongradeoverby","published","submissionpublished","gradinggrade","late","reviewedby","parseReviewer","reviewerof","_grade$reviewedby","_grade$reviewerof","_grade$reviewedby2","_grade$reviewerof2","reviewedbydone","reduce","a","b","reviewerofdone","reviewedbycount","reviewerofcount","offlineData","applyOfflineData","undefined","_x","apply","arguments","reviewers","reviewer","parsed","gradinggradeover","assessmentid","reviewerid","weight","feedbackauthor","gradinggradeoverby","feedbackattachmentfiles","feedbackcontentfiles","feedbackauthorattachment","_this6","openInBrowser","_this$submission","params","submissionId","navigateToSitePath","_this7","modalData","openModal","componentProps","objectToArray","workshopPhase","externalUrl","_this8","_this9","getUserSubmission","then","_ref2","_x2","assessPromise","resolve","getReviewerAssessments","_ref3","_ref4","assessment","strategy","offlineAssessment","getAssessment","offline","Math","floor","_unused","_x4","_x3","getGrades","canviewpublishedsubmissions","submissions","filter","realGradeValue","syncWorkshop","ngOnDestroy","_this$obsSubmissionCh","_this$obsAssessmentSa","_this$appResumeSubscr","off","unsubscribe","ɵɵdirectiveInject","i1","IonContent","i2","CoreCourseContentsPage","selectors","inputs","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddonModWorkshopIndexComponent_Template","rf","ctx","AddonModWorkshopIndexComponent_Template_ion_button_click_1_listener","openModuleSummary","AddonModWorkshopIndexComponent_Template_core_course_module_info_completionChanged_5_listener","onCompletionChange","AddonModWorkshopIndexComponent_ion_card_6_Template","AddonModWorkshopIndexComponent_ion_card_7_Template","AddonModWorkshopIndexComponent_div_8_Template","AddonModWorkshopIndexComponent_div_9_Template","showLoading"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/workshop/components/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/workshop/components/index/addon-mod-workshop-index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Input, OnDestroy, OnInit, Optional } from '@angular/core';\nimport { Params } from '@angular/router';\nimport { CoreError } from '@classes/errors/error';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreCourseContentsPage } from '@features/course/pages/contents/contents';\nimport { IonContent } from '@ionic/angular';\nimport { CoreGroupInfo, CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CorePlatform } from '@services/platform';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { Subscription } from 'rxjs';\nimport {\n    AddonModWorkshopProvider,\n    AddonModWorkshopPhase,\n    AddonModWorkshop,\n    AddonModWorkshopData,\n    AddonModWorkshopGetWorkshopAccessInformationWSResponse,\n    AddonModWorkshopPhaseData,\n    AddonModWorkshopGetGradesWSResponse,\n    AddonModWorkshopAssessmentSavedChangedEventData,\n    AddonModWorkshopSubmissionChangedEventData,\n    AddonModWorkshopGradesData,\n    AddonModWorkshopPhaseTaskData,\n    AddonModWorkshopReviewer,\n} from '../../services/workshop';\nimport {\n    AddonModWorkshopHelper,\n    AddonModWorkshopSubmissionAssessmentWithFormData,\n    AddonModWorkshopSubmissionDataWithOfflineData,\n} from '../../services/workshop-helper';\nimport { AddonModWorkshopOffline, AddonModWorkshopOfflineSubmission } from '../../services/workshop-offline';\nimport {\n    AddonModWorkshopSyncProvider,\n    AddonModWorkshopSync,\n    AddonModWorkshopAutoSyncData,\n    AddonModWorkshopSyncResult,\n} from '../../services/workshop-sync';\nimport { AddonModWorkshopPhaseInfoComponent } from '../phase/phase';\nimport { ADDON_MOD_WORKSHOP_COMPONENT, ADDON_MOD_WORKSHOP_PAGE_NAME } from '@addons/mod/workshop/constants';\n\n/**\n * Component that displays a workshop index page.\n */\n@Component({\n    selector: 'addon-mod-workshop-index',\n    templateUrl: 'addon-mod-workshop-index.html',\n})\nexport class AddonModWorkshopIndexComponent extends CoreCourseModuleMainActivityComponent implements OnInit, OnDestroy {\n\n    @Input() group = 0;\n\n    component = ADDON_MOD_WORKSHOP_COMPONENT;\n    pluginName = 'workshop';\n\n    workshop?: AddonModWorkshopData;\n    page = 0;\n    access?: AddonModWorkshopGetWorkshopAccessInformationWSResponse;\n    phases?: Record<string, AddonModWorkshopPhaseData>;\n    grades: AddonModWorkshopSubmissionDataWithOfflineData[] = [];\n    assessments: AddonModWorkshopSubmissionAssessmentWithFormData[] = [];\n    userGrades?: AddonModWorkshopGetGradesWSResponse;\n    publishedSubmissions: AddonModWorkshopSubmissionDataWithOfflineData[] = [];\n    submission?: AddonModWorkshopSubmissionDataWithOfflineData;\n    groupInfo: CoreGroupInfo = {\n        groups: [],\n        separateGroups: false,\n        visibleGroups: false,\n        defaultGroupId: 0,\n        canAccessAllGroups: false,\n    };\n\n    canSubmit = false;\n    showSubmit = false;\n    canAssess = false;\n    hasNextPage = false;\n\n    readonly PHASE_SETUP = AddonModWorkshopPhase.PHASE_SETUP;\n    readonly PHASE_SUBMISSION = AddonModWorkshopPhase.PHASE_SUBMISSION;\n    readonly PHASE_ASSESSMENT = AddonModWorkshopPhase.PHASE_ASSESSMENT;\n    readonly PHASE_EVALUATION = AddonModWorkshopPhase.PHASE_EVALUATION;\n    readonly PHASE_CLOSED = AddonModWorkshopPhase.PHASE_CLOSED;\n\n    protected offlineSubmissions: AddonModWorkshopOfflineSubmission[] = [];\n    protected obsSubmissionChanged: CoreEventObserver;\n    protected obsAssessmentSaved: CoreEventObserver;\n    protected appResumeSubscription: Subscription;\n    protected syncObserver?: CoreEventObserver;\n    protected syncEventName = AddonModWorkshopSyncProvider.AUTO_SYNCED;\n\n    constructor (\n    @Optional() content: IonContent,\n        @Optional() courseContentsPage?: CoreCourseContentsPage,\n    ) {\n        super('AddonModWorkshopIndexComponent', content, courseContentsPage);\n\n        // Listen to submission and assessment changes.\n        this.obsSubmissionChanged = CoreEvents.on(AddonModWorkshopProvider.SUBMISSION_CHANGED, (data) => {\n            this.eventReceived(data);\n        }, this.siteId);\n\n        // Listen to submission and assessment changes.\n        this.obsAssessmentSaved = CoreEvents.on(AddonModWorkshopProvider.ASSESSMENT_SAVED, (data) => {\n            this.eventReceived(data);\n        }, this.siteId);\n\n        // Since most actions will take the user out of the app, we should refresh the view when the app is resumed.\n        this.appResumeSubscription = CorePlatform.resume.subscribe(() => {\n            this.showLoadingAndRefresh(true);\n        });\n\n        // Refresh workshop on sync.\n        this.syncObserver = CoreEvents.on(AddonModWorkshopSyncProvider.AUTO_SYNCED, (data) => {\n            // Update just when all database is synced.\n            this.eventReceived(data);\n        }, this.siteId);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        super.ngOnInit();\n\n        await this.loadContent(false, true);\n    }\n\n    /**\n     * Function called when we receive an event of submission changes.\n     *\n     * @param data Data received by the event.\n     */\n    protected eventReceived(\n        data: AddonModWorkshopAutoSyncData |\n        AddonModWorkshopSubmissionChangedEventData |\n        AddonModWorkshopAssessmentSavedChangedEventData,\n    ): void {\n        if (this.workshop?.id === data.workshopId) {\n            this.showLoadingAndRefresh(true);\n\n            // Check completion since it could be configured to complete once the user adds a new discussion or replies.\n            this.checkCompletion();\n        }\n    }\n\n    /**\n     * Perform the invalidate content function.\n     *\n     * @returns Resolved when done.\n     */\n    protected async invalidateContent(): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        promises.push(AddonModWorkshop.invalidateWorkshopData(this.courseId));\n        if (this.workshop) {\n            promises.push(AddonModWorkshop.invalidateWorkshopAccessInformationData(this.workshop.id));\n            promises.push(AddonModWorkshop.invalidateUserPlanPhasesData(this.workshop.id));\n            if (this.canSubmit) {\n                promises.push(AddonModWorkshop.invalidateSubmissionsData(this.workshop.id));\n            }\n            if (this.access?.canviewallsubmissions) {\n                promises.push(AddonModWorkshop.invalidateGradeReportData(this.workshop.id));\n                promises.push(CoreGroups.invalidateActivityAllowedGroups(this.workshop.coursemodule));\n                promises.push(CoreGroups.invalidateActivityGroupMode(this.workshop.coursemodule));\n            }\n            if (this.canAssess) {\n                promises.push(AddonModWorkshop.invalidateReviewerAssesmentsData(this.workshop.id));\n            }\n            promises.push(AddonModWorkshop.invalidateGradesData(this.workshop.id));\n            promises.push(AddonModWorkshop.invalidateWorkshopWSData(this.workshop.id));\n        }\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Compares sync event data with current data to check if refresh content is needed.\n     *\n     * @param syncEventData Data receiven on sync observer.\n     * @returns True if refresh is needed, false otherwise.\n     */\n    protected isRefreshSyncNeeded(syncEventData: AddonModWorkshopAutoSyncData): boolean {\n        if (this.workshop && syncEventData.workshopId == this.workshop.id) {\n            // Refresh the data.\n            this.content?.scrollToTop();\n\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async fetchContent(refresh?: boolean, sync = false, showErrors = false): Promise<void> {\n        this.workshop = await AddonModWorkshop.getWorkshop(this.courseId, this.module.id);\n\n        this.description = this.workshop.intro;\n        this.dataRetrieved.emit(this.workshop);\n\n        if (sync) {\n            // Try to synchronize the feedback.\n            await this.syncActivity(showErrors);\n        }\n\n        // Check if there are answers stored in offline.\n        this.access = await AddonModWorkshop.getWorkshopAccessInformation(this.workshop.id, { cmId: this.module.id });\n\n        if (this.access.canviewallsubmissions) {\n            this.groupInfo = await CoreGroups.getActivityGroupInfo(this.workshop.coursemodule);\n            this.group = CoreGroups.validateGroupId(this.group, this.groupInfo);\n        }\n\n        this.phases = await AddonModWorkshop.getUserPlanPhases(this.workshop.id, { cmId: this.module.id });\n\n        this.phases[this.workshop.phase].tasks.forEach((task) => {\n            if (!task.link && (task.code == 'examples' || task.code == 'prepareexamples')) {\n                // Add links to manage examples.\n                task.link = this.module.url || '';\n            }\n        });\n\n        // Check if there are info stored in offline.\n        this.hasOffline = await AddonModWorkshopOffline.hasWorkshopOfflineData(this.workshop.id);\n        if (this.hasOffline) {\n            this.offlineSubmissions = await AddonModWorkshopOffline.getSubmissions(this.workshop.id);\n        } else {\n            this.offlineSubmissions = [];\n        }\n\n        await this.setPhaseInfo();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async logActivity(): Promise<void> {\n        if (!this.workshop) {\n            return; // Shouldn't happen.\n        }\n\n        await CoreUtils.ignoreErrors(AddonModWorkshop.logView(this.workshop.id));\n\n        this.analyticsLogEvent('mod_workshop_view_workshop');\n    }\n\n    /**\n     * Retrieves and shows submissions grade page.\n     *\n     * @param page Page number to be retrieved.\n     * @returns Resolved when done.\n     */\n    async gotoSubmissionsPage(page: number): Promise<void> {\n        if (!this.workshop) {\n            return;\n        }\n        const workshop = this.workshop;\n\n        const report = await AddonModWorkshop.getGradesReport(workshop.id, {\n            groupId: this.group,\n            page,\n            cmId: this.module.id,\n        });\n\n        const numEntries = (report && report.grades && report.grades.length) || 0;\n\n        this.page = page;\n\n        this.hasNextPage = numEntries >= AddonModWorkshopProvider.PER_PAGE && ((this.page + 1) *\n            AddonModWorkshopProvider.PER_PAGE) < report.totalcount;\n\n        const grades: AddonModWorkshopGradesData[] = report.grades || [];\n\n        this.grades = [];\n\n        await Promise.all(grades.map(async (grade) => {\n            const submission: AddonModWorkshopSubmissionDataWithOfflineData = {\n                id: grade.submissionid || 0,\n                workshopid: workshop.id,\n                example: false,\n                authorid: grade.userid,\n                timecreated: grade.submissionmodified || 0,\n                timemodified: grade.submissionmodified || 0,\n                title: grade.submissiontitle || '',\n                content: '',\n                contenttrust: 0,\n                attachment: 0,\n                grade: grade.submissiongrade,\n                gradeover: grade.submissiongradeover,\n                gradeoverby: grade.submissiongradeoverby,\n                published: !!grade.submissionpublished,\n                gradinggrade: grade.gradinggrade,\n                late: 0,\n                reviewedby: this.parseReviewer(grade.reviewedby),\n                reviewerof: this.parseReviewer(grade.reviewerof),\n            };\n\n            if (workshop.phase == AddonModWorkshopPhase.PHASE_ASSESSMENT) {\n                submission.reviewedbydone = grade.reviewedby?.reduce((a, b) => a + (b.grade ? 1 : 0), 0) || 0;\n                submission.reviewerofdone = grade.reviewerof?.reduce((a, b) => a + (b.grade ? 1 : 0), 0) || 0;\n                submission.reviewedbycount = grade.reviewedby?.length || 0;\n                submission.reviewerofcount = grade.reviewerof?.length || 0;\n            }\n\n            const offlineData = await AddonModWorkshopHelper.applyOfflineData(submission, this.offlineSubmissions);\n\n            if (offlineData !== undefined) {\n                this.grades.push(offlineData);\n            }\n        }));\n    }\n\n    protected parseReviewer(reviewers: AddonModWorkshopReviewer[] = []): AddonModWorkshopSubmissionAssessmentWithFormData[] {\n        return reviewers.map((reviewer: AddonModWorkshopReviewer) => {\n            const parsed: AddonModWorkshopSubmissionAssessmentWithFormData = {\n                grade: reviewer.grade,\n                gradinggrade: reviewer.gradinggrade,\n                gradinggradeover: reviewer.gradinggradeover,\n                id: reviewer.assessmentid,\n                reviewerid: reviewer.userid,\n                submissionid: reviewer.submissionid,\n                weight: reviewer.weight,\n                timecreated: 0,\n                timemodified: 0,\n                feedbackauthor: '',\n                gradinggradeoverby: 0,\n                feedbackattachmentfiles: [],\n                feedbackcontentfiles: [],\n                feedbackauthorattachment: 0,\n            };\n\n            return parsed;\n        });\n    }\n\n    /**\n     * Open task.\n     *\n     * @param task Task to be done.\n     */\n    async runTask(task: AddonModWorkshopPhaseTaskData): Promise<void> {\n        if (task.code == 'submit') {\n            this.gotoSubmit();\n        } else if (task.link) {\n            CoreUtils.openInBrowser(task.link);\n        }\n    }\n\n    /**\n     * Go to submit page.\n     */\n    gotoSubmit(): void {\n        if (!this.canSubmit || !this.access) {\n            return;\n        }\n\n        if ((this.access.creatingsubmissionallowed && !this.submission) ||\n            (this.access.modifyingsubmissionallowed && this.submission)) {\n            const params: Params = {\n                module: this.module,\n                access: this.access,\n            };\n\n            const submissionId = this.submission?.id || 0;\n            CoreNavigator.navigateToSitePath(\n                `${ADDON_MOD_WORKSHOP_PAGE_NAME}/${this.courseId}/${this.module.id}/${submissionId}/edit`,\n                { params },\n            );\n\n        }\n    }\n\n    /**\n     * View Phase info.\n     */\n    async viewPhaseInfo(): Promise<void> {\n        if (!this.phases || !this.workshop) {\n            return;\n        }\n\n        const modalData = await CoreDomUtils.openModal<boolean>({\n            component: AddonModWorkshopPhaseInfoComponent,\n            componentProps: {\n                phases: CoreUtils.objectToArray(this.phases),\n                workshopPhase: this.workshop.phase,\n                externalUrl: this.module.url,\n                showSubmit: this.showSubmit,\n            },\n        });\n\n        if (modalData === true) {\n            this.gotoSubmit();\n        }\n    }\n\n    /**\n     * Set group to see the workshop.\n     *\n     * @param groupId Group Id.\n     * @returns Promise resolved when done.\n     */\n    async setGroup(groupId: number): Promise<void> {\n        this.group = groupId;\n\n        await this.gotoSubmissionsPage(0);\n    }\n\n    /**\n     * Convenience function to set current phase information.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async setPhaseInfo(): Promise<void> {\n        if (!this.phases || !this.workshop || !this.access) {\n            return;\n        }\n\n        this.submission = undefined;\n        this.canAssess = false;\n        this.assessments = [];\n        this.userGrades = undefined;\n        this.publishedSubmissions = [];\n\n        const workshop = this.workshop;\n\n        this.canSubmit = AddonModWorkshopHelper.canSubmit(\n            this.workshop,\n            this.access,\n            this.phases[AddonModWorkshopPhase.PHASE_SUBMISSION].tasks,\n        );\n\n        this.showSubmit = this.canSubmit &&\n            ((this.access.creatingsubmissionallowed && !this.submission) ||\n                (this.access.modifyingsubmissionallowed && !!this.submission));\n\n        const promises: Promise<void>[] = [];\n\n        if (this.canSubmit) {\n            promises.push(AddonModWorkshopHelper.getUserSubmission(this.workshop.id, { cmId: this.module.id })\n                .then(async (submission) => {\n                    this.submission = await AddonModWorkshopHelper.applyOfflineData(submission, this.offlineSubmissions);\n\n                    return;\n                }));\n        }\n\n        if (this.access.canviewallsubmissions && this.workshop.phase >= AddonModWorkshopPhase.PHASE_SUBMISSION) {\n            promises.push(this.gotoSubmissionsPage(this.page));\n        }\n\n        let assessPromise = Promise.resolve();\n\n        if (this.workshop.phase >= AddonModWorkshopPhase.PHASE_ASSESSMENT) {\n            this.canAssess = AddonModWorkshopHelper.canAssess(this.workshop, this.access);\n\n            if (this.canAssess) {\n                assessPromise = AddonModWorkshopHelper.getReviewerAssessments(this.workshop.id, {\n                    cmId: this.module.id,\n                }).then(async (assessments) => {\n                    await Promise.all(assessments.map(async (assessment) => {\n                        assessment.strategy = workshop.strategy;\n                        if (!this.hasOffline) {\n                            return;\n                        }\n\n                        try {\n                            const offlineAssessment = await AddonModWorkshopOffline.getAssessment(workshop.id, assessment.id);\n\n                            assessment.offline = true;\n                            assessment.timemodified = Math.floor(offlineAssessment.timemodified / 1000);\n                        } catch {\n                            // Ignore errors.\n                        }\n                    }));\n\n                    this.assessments = assessments;\n\n                    return;\n                });\n\n            }\n        }\n\n        if (this.workshop.phase === AddonModWorkshopPhase.PHASE_CLOSED) {\n            promises.push(AddonModWorkshop.getGrades(this.workshop.id, { cmId: this.module.id }).then((grades) => {\n                this.userGrades = grades.submissionlongstrgrade || grades.assessmentlongstrgrade ? grades : undefined;\n\n                return;\n            }));\n\n            if (this.access.canviewpublishedsubmissions) {\n                promises.push(assessPromise.then(async () => {\n                    const submissions: AddonModWorkshopSubmissionDataWithOfflineData[] =\n                        await AddonModWorkshop.getSubmissions(workshop.id, { cmId: this.module.id });\n\n                    this.publishedSubmissions = submissions.filter((submission) => {\n                        if (submission.published) {\n                            submission.reviewedby =\n                                this.assessments.filter((assessment) => assessment.submissionid === submission.id)\n                                    .map((assessment => AddonModWorkshopHelper.realGradeValue(workshop, assessment)));\n\n                            return true;\n                        }\n\n                        return false;\n                    });\n\n                    return;\n                }));\n            }\n        }\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected sync(): Promise<AddonModWorkshopSyncResult> {\n        if (!this.workshop) {\n            throw new CoreError('Cannot sync without a workshop.');\n        }\n\n        return AddonModWorkshopSync.syncWorkshop(this.workshop.id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        super.ngOnDestroy();\n        this.obsSubmissionChanged?.off();\n        this.obsAssessmentSaved?.off();\n        this.appResumeSubscription?.unsubscribe();\n    }\n\n}\n","<!-- Buttons to add to the header. -->\n<core-navbar-buttons slot=\"end\">\n    <ion-button fill=\"clear\" (click)=\"openModuleSummary()\" aria-haspopup=\"true\" [attr.aria-label]=\"'core.info' | translate\">\n        <ion-icon name=\"fas-circle-info\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n</core-navbar-buttons>\n\n<!-- Content. -->\n<core-loading [hideUntil]=\"!showLoading\">\n\n    <!-- Activity info. -->\n    <core-course-module-info [module]=\"module\" [component]=\"component\" [componentId]=\"componentId\" [courseId]=\"courseId\"\n        [hasDataToSync]=\"hasOffline\" (completionChanged)=\"onCompletionChange()\" />\n\n    <ion-card *ngIf=\"phases && workshop\">\n        <ion-item button (click)=\"viewPhaseInfo()\" [detail]=\"true\">\n            <ion-label>\n                <h2 class=\"ion-text-wrap\">{{ phases[workshop.phase].title }}</h2>\n            </ion-label>\n        </ion-item>\n        <ng-container *ngIf=\"phases && phases[workshop.phase] && phases[workshop.phase].tasks &&\n            phases[workshop.phase].tasks.length\">\n            <ion-item button class=\"ion-text-wrap\" *ngFor=\"let task of phases[workshop.phase].tasks\"\n                [class.item-dimmed]=\"task.code === 'submit' && !showSubmit\" (click)=\"runTask(task)\" [detail]=\"false\">\n                <ion-icon slot=\"start\" name=\"far-circle\" *ngIf=\"task.completed === null\"\n                    [attr.aria-label]=\"'addon.mod_workshop.tasktodo' | translate\" />\n                <ion-icon slot=\"start\" name=\"fas-circle-xmark\" color=\"danger\" *ngIf=\"task.completed === ''\"\n                    [attr.aria-label]=\"'addon.mod_workshop.taskfail' | translate\" />\n                <ion-icon slot=\"start\" name=\"fas-circle-info\" color=\"info\" *ngIf=\"task.completed === 'info'\"\n                    [attr.aria-label]=\"'addon.mod_workshop.taskinfo' | translate\" />\n                <ion-icon slot=\"start\" name=\"fas-circle-check\" color=\"success\" *ngIf=\"task.completed === '1'\"\n                    [attr.aria-label]=\"'addon.mod_workshop.taskdone' | translate\" />\n                <ion-label>\n                    <p class=\"item-heading\">{{task.title}}</p>\n                    <p *ngIf=\"task.details\" [innerHTML]=\"task.details\"></p>\n                </ion-label>\n                <ion-icon slot=\"end\" *ngIf=\"task.link && task.code !== 'submit'\" name=\"fas-up-right-from-square\" aria-hidden=\"true\" />\n            </ion-item>\n        </ng-container>\n    </ion-card>\n\n    <!-- Description (setup phase only) -->\n    <ion-card *ngIf=\"description && workshop && workshop.phase === PHASE_SETUP\">\n        <ion-item class=\"ion-text-wrap\">\n            <ion-label>\n                <h3 class=\"item-heading\">{{ 'core.description' | translate }}</h3>\n                <core-format-text [text]=\"description\" [component]=\"component\" [componentId]=\"componentId\" contextLevel=\"module\"\n                    [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n            </ion-label>\n        </ion-item>\n    </ion-card>\n\n    <div *ngIf=\"access && workshop && workshop.phase >= PHASE_SUBMISSION\">\n        <!-- CLOSED PHASE -->\n        <ng-container *ngIf=\"workshop.phase >= PHASE_CLOSED\">\n            <ion-card *ngIf=\"workshop.conclusion\">\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <h3 class=\"item-heading\">{{ 'addon.mod_workshop.conclusion' | translate }}</h3>\n                        <core-format-text collapsible-item [component]=\"component\" [componentId]=\"module.id\" [text]=\"workshop.conclusion\"\n                            contextLevel=\"module\" [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n\n            <ion-card *ngIf=\"userGrades\">\n                <ion-item-divider class=\"ion-text-wrap\">\n                    <ion-label>\n                        <h3 class=\"item-heading\">{{ 'addon.mod_workshop.yourgrades' | translate }}</h3>\n                    </ion-label>\n                </ion-item-divider>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"userGrades.submissionlongstrgrade\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.mod_workshop.submissiongrade' | translate }}</p>\n                        <p>{{ userGrades.submissionlongstrgrade }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"userGrades.assessmentlongstrgrade\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.mod_workshop.gradinggrade' | translate }}</p>\n                        <p>{{ userGrades.assessmentlongstrgrade }}</p>\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n        </ng-container>\n\n        <!-- SUBMISSION PHASE -->\n        <ion-card *ngIf=\"workshop.phase === PHASE_SUBMISSION && workshop.instructauthors\">\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <h3 class=\"item-heading\">{{ 'addon.mod_workshop.areainstructauthors' | translate }}</h3>\n                    <core-format-text collapsible-item [component]=\"component\" [componentId]=\"module.id\" [text]=\"workshop.instructauthors\"\n                        contextLevel=\"module\" [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                </ion-label>\n            </ion-item>\n        </ion-card>\n\n        <ion-card *ngIf=\"canSubmit\">\n            <ion-item-divider class=\"ion-text-wrap\">\n                <ion-label>\n                    <h3 class=\"item-heading\" *ngIf=\"workshop.phase !== PHASE_CLOSED || !submission\">\n                        {{ 'addon.mod_workshop.yoursubmission' | translate }}\n                    </h3>\n                    <h3 class=\"item-heading\" *ngIf=\"workshop.phase === PHASE_CLOSED && submission\">\n                        {{ 'addon.mod_workshop.yoursubmissionwithassessments' | translate }}\n                    </h3>\n                </ion-label>\n            </ion-item-divider>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"!submission\">\n                <ion-label>\n                    <p *ngIf=\"!submission\">{{ 'addon.mod_workshop.noyoursubmission' | translate }}</p>\n                </ion-label>\n            </ion-item>\n            <addon-mod-workshop-submission *ngIf=\"submission\" [submission]=\"submission\" [courseId]=\"workshop.course\" [module]=\"module\"\n                [workshop]=\"workshop\" [access]=\"access\" />\n        </ion-card>\n\n\n        <ng-container *ngIf=\"workshop.phase >= PHASE_CLOSED\">\n            <ion-card *ngIf=\"publishedSubmissions && publishedSubmissions.length\">\n                <ion-item-divider class=\"ion-text-wrap\">\n                    <ion-label>\n                        <h3 class=\"item-heading\">{{ 'addon.mod_workshop.publishedsubmissions' | translate }}</h3>\n                    </ion-label>\n                </ion-item-divider>\n                <ng-container *ngFor=\"let submission of publishedSubmissions\">\n                    <addon-mod-workshop-submission [submission]=\"submission\" [courseId]=\"workshop.course\" [module]=\"module\"\n                        [workshop]=\"workshop\" [access]=\"access\" summary=\"true\" class=\"core-as-item\" />\n                </ng-container>\n            </ion-card>\n        </ng-container>\n\n        <!-- ASSESSMENT PHASE -->\n        <ng-container *ngIf=\"workshop.phase >= PHASE_ASSESSMENT\">\n            <ion-card *ngIf=\"workshop.phase === PHASE_ASSESSMENT && workshop.instructreviewers\">\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <h3 class=\"item-heading\">{{ 'addon.mod_workshop.areainstructreviewers' | translate }}</h3>\n                        <core-format-text collapsible-item [component]=\"component\" [componentId]=\"module.id\"\n                            [text]=\"workshop.instructreviewers\" contextLevel=\"module\" [contextInstanceId]=\"module.id\"\n                            [courseId]=\"courseId\" />\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n\n            <ion-card *ngIf=\"canAssess\">\n                <ion-item-divider class=\"ion-text-wrap\">\n                    <ion-label>\n                        <h3 class=\"item-heading\">{{ 'addon.mod_workshop.assignedassessments' | translate }}</h3>\n                    </ion-label>\n                </ion-item-divider>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"!assessments || !assessments.length\">\n                    <ion-label>\n                        <p>{{ 'addon.mod_workshop.assignedassessmentsnone' | translate }}</p>\n                    </ion-label>\n                </ion-item>\n                <ng-container *ngFor=\"let assessment of (assessments || [])\">\n                    <addon-mod-workshop-submission [submission]=\"assessment.submission\" [assessment]=\"assessment\"\n                        [courseId]=\"workshop.course\" [module]=\"module\" [workshop]=\"workshop\" [access]=\"access\" summary=\"true\"\n                        class=\"core-as-item\" />\n                </ng-container>\n            </ion-card>\n        </ng-container>\n\n        <!-- MULTIPLE PHASES SUBMISSION OR GREATER only teachers -->\n        <ion-card *ngIf=\"access.canviewallsubmissions && workshop.phase >= PHASE_SUBMISSION &&\n            ((grades && grades.length) || (groupInfo && (groupInfo.separateGroups || groupInfo.visibleGroups)))\">\n            <ion-item-divider class=\"ion-text-wrap\">\n                <ion-label>\n                    <h3 class=\"item-heading\" *ngIf=\"workshop.phase === PHASE_SUBMISSION\">{{ 'addon.mod_workshop.submissionsreport' |\n                        translate }}</h3>\n                    <h3 class=\"item-heading\" *ngIf=\"workshop.phase > PHASE_SUBMISSION\">{{ 'addon.mod_workshop.gradesreport' | translate }}\n                    </h3>\n                </ion-label>\n            </ion-item-divider>\n            <core-group-selector [groupInfo]=\"groupInfo\" [(selected)]=\"group\" (selectedChange)=\"setGroup(group)\" [courseId]=\"courseId\" />\n\n            <ng-container *ngFor=\"let submission of grades\">\n                <addon-mod-workshop-submission [submission]=\"submission\" [courseId]=\"workshop.course\" [module]=\"module\"\n                    [workshop]=\"workshop\" [access]=\"access\" summary=\"true\" class=\"core-as-item\" />\n            </ng-container>\n\n            <ion-grid *ngIf=\"page > 0 || hasNextPage\">\n                <ion-row class=\"ion-align-items-center\">\n                    <ion-col *ngIf=\"page > 0\">\n                        <ion-button expand=\"block\" fill=\"outline\" (click)=\"gotoSubmissionsPage(page -1)\">\n                            <ion-icon name=\"fas-chevron-left\" slot=\"start\" aria-hidden=\"true\" />\n                            {{ 'core.previous' | translate }}\n                        </ion-button>\n                    </ion-col>\n                    <ion-col *ngIf=\"hasNextPage\">\n                        <ion-button expand=\"block\" (click)=\"gotoSubmissionsPage(page + 1)\">\n                            {{ 'core.next' | translate }}\n                            <ion-icon name=\"fas-chevron-right\" slot=\"end\" aria-hidden=\"true\" />\n                        </ion-button>\n                    </ion-col>\n                </ion-row>\n            </ion-grid>\n        </ion-card>\n    </div>\n\n\n    <div collapsible-footer *ngIf=\"!showLoading\" slot=\"fixed\">\n        <div class=\"list-item-limited-width\" *ngIf=\"access && workshop?.phase >= PHASE_SUBMISSION && canSubmit && showSubmit &&\n                ((access.creatingsubmissionallowed && !submission) || (access.modifyingsubmissionallowed && submission))\">\n            <!-- Show only on current phase -->\n            <ion-button expand=\"block\" *ngIf=\"access.creatingsubmissionallowed && !submission\" (click)=\"gotoSubmit()\"\n                class=\"ion-text-wrap ion-margin\">\n                <ion-icon slot=\"start\" name=\"fas-plus\" aria-hidden=\"true\" />\n                {{ 'addon.mod_workshop.createsubmission' | translate }}\n            </ion-button>\n            <ion-button expand=\"block\" *ngIf=\"access.modifyingsubmissionallowed && submission\" (click)=\"gotoSubmit()\"\n                class=\"ion-text-wrap ion-margin\">\n                <ion-icon slot=\"start\" name=\"fas-pen\" aria-hidden=\"true\" />\n                {{ 'addon.mod_workshop.editsubmission' | translate }}\n            </ion-button>\n        </div>\n\n        <core-course-module-navigation [courseId]=\"courseId\" [currentModuleId]=\"module.id\" />\n    </div>\n</core-loading>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}