{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreConstants } from '@/core/constants';\nimport { CoreTabsComponent } from '@components/tabs/tabs';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreForms } from '@singletons/form';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModLessonPrefetchHandler } from '../../services/handlers/prefetch';\nimport { AddonModLesson, AddonModLessonProvider } from '../../services/lesson';\nimport { AddonModLessonOffline } from '../../services/lesson-offline';\nimport { AddonModLessonSync, AddonModLessonSyncProvider } from '../../services/lesson-sync';\nimport { AddonModLessonModuleHandlerService } from '../../services/handlers/module';\nimport { CoreTime } from '@singletons/time';\nimport { CoreError } from '@classes/errors/error';\nimport { Translate } from '@singletons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@features/course/pages/contents/contents\";\nconst _c0 = [\"passwordForm\"];\nfunction AddonModLessonIndexComponent_ng_template_9_ion_card_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 13)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 14)(3, \"ion-label\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r5.preventReasons[0].message, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_9_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"form\", 16, 17);\n    i0.ɵɵlistener(\"ngSubmit\", function AddonModLessonIndexComponent_ng_template_9_ion_card_1_Template_form_ngSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const _r9 = i0.ɵɵreference(9);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.submitPassword($event, _r9));\n    });\n    i0.ɵɵelementStart(3, \"ion-item\", 18)(4, \"ion-label\", 19);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"core-show-password\", 20);\n    i0.ɵɵelement(8, \"ion-input\", 21, 22);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"ion-button\", 23);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(14, \"input\", 24);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 4, \"addon.mod_lesson.enterpassword\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(10, 6, \"core.login.password\"));\n    i0.ɵɵproperty(\"clearOnEdit\", false);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(13, 8, \"addon.mod_lesson.continue\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(3);\n    const _r3 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_9_core_loading_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"core-loading\", 3);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_Template, 2, 1, \"ion-list\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hideUntil\", !ctx_r7.showSpinner);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.lesson && !ctx_r7.preventReasons.length || ctx_r7.retakeToReview);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModLessonIndexComponent_ng_template_9_ion_card_0_Template, 4, 1, \"ion-card\", 10);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_9_ion_card_1_Template, 15, 10, \"ion-card\", 11);\n    i0.ɵɵtemplate(2, AddonModLessonIndexComponent_ng_template_9_core_loading_2_Template, 2, 2, \"core-loading\", 12);\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.lesson && ctx_r0.preventReasons.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.askPassword);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.canViewReports);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"core-empty-box\", 30);\n    i0.ɵɵelement(1, \"core-format-text\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r15.selectedGroupEmptyMessage)(\"contextInstanceId\", ctx_r15.courseId)(\"wsNotFiltered\", true);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 32);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_lesson.nolessonattempts\"));\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r35 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r35.overview.avescore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r37 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r37.overview.highscore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r39 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r39.overview.lowscore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\", 35)(2, \"p\", 36);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_5_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(6, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_6_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-col\", 35)(8, \"p\", 36);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(11, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_11_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(12, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_12_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ion-col\", 35)(14, \"p\", 36);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_17_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(18, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_18_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 9, \"addon.mod_lesson.averagescore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.numofattempts > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.numofattempts <= 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 11, \"addon.mod_lesson.highscore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.highscore !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.highscore === null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 13, \"addon.mod_lesson.lowscore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.lowscore !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.overview.lowscore === null);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r20.avetimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r22.hightimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r24.lowtimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r41 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r41.overview.avescore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 35)(1, \"p\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_4_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_5_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"addon.mod_lesson.averagescore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r26.overview.numofattempts > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r26.overview.numofattempts <= 0);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_33_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r27 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r27.avetimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r43 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r43.overview.highscore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 35)(1, \"p\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_4_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_5_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r29 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"addon.mod_lesson.highscore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r29.overview.highscore !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r29.overview.highscore === null);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_41_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r30.hightimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_42_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r45 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, \"core.percentagenumber\", i0.ɵɵpureFunction1(4, _c1, ctx_r45.overview.lowscore)), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\", 35)(1, \"p\", 36);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_4_Template, 3, 6, \"p\", 11);\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_5_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"addon.mod_lesson.lowscore\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r32.overview.lowscore !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r32.overview.lowscore === null);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_49_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r33.lowtimeReadable);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_50_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.notcompleted\"));\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    \"ion-text-center\": a0\n  };\n};\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 33)(1, \"ion-card-header\", 18)(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-grid\", 34);\n    i0.ɵɵtemplate(6, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_Template, 19, 15, \"ion-row\", 11);\n    i0.ɵɵelementStart(7, \"ion-row\")(8, \"ion-col\", 35)(9, \"p\", 36);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_12_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(13, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_13_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"ion-col\", 35)(15, \"p\", 36);\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_18_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(19, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_19_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-col\", 35)(21, \"p\", 36);\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_24_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(25, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_25_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(26, \"ion-grid\", 37)(27, \"ion-row\");\n    i0.ɵɵtemplate(28, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_Template, 6, 5, \"ion-col\", 38);\n    i0.ɵɵelementStart(29, \"ion-col\", 39)(30, \"p\", 36);\n    i0.ɵɵtext(31);\n    i0.ɵɵpipe(32, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(33, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_33_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(34, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_34_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(35, \"ion-row\");\n    i0.ɵɵtemplate(36, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_Template, 6, 5, \"ion-col\", 38);\n    i0.ɵɵelementStart(37, \"ion-col\", 39)(38, \"p\", 36);\n    i0.ɵɵtext(39);\n    i0.ɵɵpipe(40, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(41, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_41_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(42, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_42_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(43, \"ion-row\");\n    i0.ɵɵtemplate(44, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_Template, 6, 5, \"ion-col\", 38);\n    i0.ɵɵelementStart(45, \"ion-col\", 39)(46, \"p\", 36);\n    i0.ɵɵtext(47);\n    i0.ɵɵpipe(48, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(49, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_49_Template, 2, 1, \"p\", 11);\n    i0.ɵɵtemplate(50, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_50_Template, 3, 3, \"p\", 11);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 26, \"addon.mod_lesson.lessonstats\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lessonscored);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 28, \"addon.mod_lesson.averagetime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.avetime !== null && ctx_r17.overview.numofattempts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.avetime === null || !ctx_r17.overview.numofattempts);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 30, \"addon.mod_lesson.hightime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.hightime !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.hightime === null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 32, \"addon.mod_lesson.lowtime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lowtime !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lowtime === null);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lessonscored);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(40, _c2, ctx_r17.overview.lessonscored));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(32, 34, \"addon.mod_lesson.averagetime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.avetime !== null && ctx_r17.overview.numofattempts);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.avetime === null || !ctx_r17.overview.numofattempts);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lessonscored);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(42, _c2, ctx_r17.overview.lessonscored));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(40, 36, \"addon.mod_lesson.hightime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.hightime !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.hightime === null);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lessonscored);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(44, _c2, ctx_r17.overview.lessonscored));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(48, 38, \"addon.mod_lesson.lowtime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lowtime !== null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r17.overview.lowtime === null);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_ion_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 41);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_ion_item_5_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r50);\n      const student_r48 = restoredCtx.$implicit;\n      const ctx_r49 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r49.openRetake(student_r48.id));\n    });\n    i0.ɵɵelement(1, \"core-user-avatar\", 42);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 36);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"core-progress-bar\", 43);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const student_r48 = ctx.$implicit;\n    const ctx_r47 = i0.ɵɵnextContext(4);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", student_r48)(\"userId\", student_r48.id)(\"courseId\", ctx_r47.courseId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(student_r48.fullname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"progress\", student_r48.bestgrade);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\", 18)(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_ion_item_5_Template, 6, 6, \"ion-item\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_lesson.overview\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r18.overview.students);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r52 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-loading\", 3)(1, \"core-group-selector\", 26);\n    i0.ɵɵlistener(\"selectedChange\", function AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template_core_group_selector_selectedChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r52);\n      const ctx_r51 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r51.group = $event);\n    })(\"selectedChange\", function AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template_core_group_selector_selectedChange_1_listener() {\n      i0.ɵɵrestoreView(_r52);\n      const ctx_r53 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r53.setGroup(ctx_r53.group));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_2_Template, 2, 3, \"core-empty-box\", 27);\n    i0.ɵɵtemplate(3, AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_3_Template, 2, 3, \"core-empty-box\", 28);\n    i0.ɵɵtemplate(4, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_Template, 51, 46, \"ion-card\", 29);\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_Template, 6, 4, \"ion-card\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"hideUntil\", ctx_r14.reportLoaded);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"groupInfo\", ctx_r14.groupInfo)(\"selected\", ctx_r14.group)(\"courseId\", ctx_r14.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.lesson && !ctx_r14.overview && ctx_r14.selectedGroupEmptyMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r14.overview && !ctx_r14.selectedGroupEmptyMessage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.overview);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r14.overview);\n  }\n}\nfunction AddonModLessonIndexComponent_core_tab_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r55 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-tab\", 6);\n    i0.ɵɵlistener(\"ionSelect\", function AddonModLessonIndexComponent_core_tab_10_Template_core_tab_ionSelect_0_listener() {\n      i0.ɵɵrestoreView(_r55);\n      const ctx_r54 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r54.reportsSelected());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵtemplate(2, AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template, 6, 8, \"ng-template\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_lesson.reports\"));\n  }\n}\nfunction AddonModLessonIndexComponent_div_11_div_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModLessonIndexComponent_div_11_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 47);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_div_11_div_1_ng_container_1_Template, 1, 0, \"ng-container\", 25);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n    const _r3 = i0.ɵɵreference(13);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r3);\n  }\n}\nfunction AddonModLessonIndexComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 44);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_div_11_div_1_Template, 2, 1, \"div\", 45);\n    i0.ɵɵelement(2, \"core-course-module-navigation\", 46);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.canViewReports && (ctx_r2.lesson && !ctx_r2.preventReasons.length || ctx_r2.retakeToReview));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"courseId\", ctx_r2.courseId)(\"currentModuleId\", ctx_r2.module.id);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r61 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\", 18)(2, \"ion-label\", 48);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-button\", 49);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_0_Template_ion_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r61);\n      const ctx_r60 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r60.review());\n    });\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 2, \"addon.mod_lesson.retakefinishedinsync\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 4, \"addon.mod_lesson.review\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r68 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 18)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"p\", 15);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementStart(4, \"ion-row\")(5, \"ion-col\")(6, \"ion-button\", 52);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template_ion_button_click_6_listener() {\n      i0.ɵɵrestoreView(_r68);\n      const ctx_r67 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r67.start(false));\n    });\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"ion-col\")(10, \"ion-button\", 53);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template_ion_button_click_10_listener() {\n      i0.ɵɵrestoreView(_r68);\n      const ctx_r69 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r69.start(true));\n    });\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(3, 3, \"addon.mod_lesson.youhaveseen\"), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(8, 5, \"core.no\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(12, 7, \"core.yes\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r71 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\", 18);\n    i0.ɵɵelement(2, \"ion-label\", 15);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-button\", 49);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_2_Template_ion_button_click_4_listener() {\n      i0.ɵɵrestoreView(_r71);\n      const ctx_r70 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r70.start(false));\n    });\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(3, 2, \"addon.mod_lesson.leftduringtimed\"), i0.ɵɵsanitizeHtml);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 4, \"addon.mod_lesson.continue\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 18);\n    i0.ɵɵelement(1, \"ion-label\", 15);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.leftduringtimednoretake\"), i0.ɵɵsanitizeHtml);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r75 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 49);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r75);\n      const ctx_r74 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r74.start(false));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.start\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r77 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 55);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r77);\n      const ctx_r76 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r76.start(false));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 56);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"addon.mod_lesson.preview\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_1_Template, 3, 3, \"ion-button\", 51);\n    i0.ɵɵtemplate(2, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_2_Template, 4, 3, \"ion-button\", 54);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r65 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r65.canManage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r65.canManage);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r79 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 49);\n    i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_button_5_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r79);\n      const ctx_r78 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r78.start(true));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.continue\"), \" \");\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template, 13, 9, \"ion-item\", 50);\n    i0.ɵɵtemplate(2, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_2_Template, 7, 6, \"ng-container\", 11);\n    i0.ɵɵtemplate(3, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_3_Template, 3, 3, \"ion-item\", 50);\n    i0.ɵɵtemplate(4, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_Template, 3, 2, \"ng-container\", 11);\n    i0.ɵɵtemplate(5, AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_button_5_Template, 3, 3, \"ion-button\", 51);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r59 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r59.leftDuringTimed && !ctx_r59.lesson.timelimit && !ctx_r59.finishedOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r59.leftDuringTimed && ctx_r59.lesson.timelimit && ctx_r59.lesson.retake && !ctx_r59.finishedOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r59.leftDuringTimed && ctx_r59.lesson.timelimit && !ctx_r59.lesson.retake);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r59.leftDuringTimed && !ctx_r59.finishedOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r59.finishedOffline);\n  }\n}\nfunction AddonModLessonIndexComponent_ng_template_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModLessonIndexComponent_ng_template_12_ng_container_0_Template, 8, 6, \"ng-container\", 11);\n    i0.ɵɵtemplate(1, AddonModLessonIndexComponent_ng_template_12_ng_container_1_Template, 6, 5, \"ng-container\", 11);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.retakeToReview);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.lesson && !ctx_r4.preventReasons.length);\n  }\n}\n/**\n * Component that displays a lesson entry page.\n */\nexport class AddonModLessonIndexComponent extends CoreCourseModuleMainActivityComponent {\n  constructor(content, courseContentsPage) {\n    super('AddonModLessonIndexComponent', content, courseContentsPage);\n    this.content = content;\n    this.group = 0; // The group to display.\n    this.component = AddonModLessonProvider.COMPONENT;\n    this.pluginName = 'lesson';\n    this.preventReasons = []; // List of reasons that prevent the lesson from being seen.\n    this.syncEventName = AddonModLessonSyncProvider.AUTO_SYNCED;\n    this.hasPlayed = false; // Whether the user has gone to the lesson player (attempted).\n    this.dataSent = false; // Whether some data was sent to server while playing the lesson.\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      _superprop_getNgOnInit().call(_this);\n      _this.selectedTab = _this.action == 'report' ? 1 : 0;\n      yield _this.loadContent(false, true);\n    })();\n  }\n  /**\n   * Change the group displayed.\n   *\n   * @param groupId Group ID to display.\n   * @returns Promise resolved when done.\n   */\n  changeGroup(groupId) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.reportLoaded = false;\n      try {\n        yield _this2.setGroup(groupId);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error getting report.');\n      } finally {\n        _this2.reportLoaded = true;\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  fetchContent(refresh, sync = false, showErrors = false) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      let lessonReady = true;\n      _this3.askPassword = false;\n      _this3.lesson = yield AddonModLesson.getLesson(_this3.courseId, _this3.module.id);\n      _this3.dataRetrieved.emit(_this3.lesson);\n      _this3.description = _this3.lesson.intro; // Show description only if intro is present.\n      if (sync) {\n        // Try to synchronize the lesson.\n        yield _this3.syncActivity(showErrors);\n      }\n      _this3.accessInfo = yield AddonModLesson.getAccessInformation(_this3.lesson.id, {\n        cmId: _this3.module.id\n      });\n      _this3.canManage = _this3.accessInfo.canmanage;\n      _this3.canViewReports = _this3.accessInfo.canviewreports;\n      _this3.preventReasons = [];\n      const promises = [];\n      if (AddonModLesson.isLessonOffline(_this3.lesson)) {\n        // Handle status.\n        _this3.setStatusListener();\n        promises.push(_this3.loadOfflineData());\n      }\n      if (_this3.accessInfo.preventaccessreasons.length) {\n        var _preventReason;\n        let preventReason = AddonModLesson.getPreventAccessReason(_this3.accessInfo, false);\n        const askPassword = ((_preventReason = preventReason) === null || _preventReason === void 0 ? void 0 : _preventReason.reason) == 'passwordprotectedlesson';\n        if (askPassword) {\n          try {\n            // The lesson requires a password. Check if there is one in memory or DB.\n            const password = _this3.password ? _this3.password : yield AddonModLesson.getStoredPassword(_this3.lesson.id);\n            yield _this3.validatePassword(password);\n            // Now that we have the password, get the access reason again ignoring the password.\n            preventReason = AddonModLesson.getPreventAccessReason(_this3.accessInfo, true);\n            if (preventReason) {\n              _this3.preventReasons = [preventReason];\n            }\n          } catch (_unused) {\n            // No password or the validation failed. Show password form.\n            _this3.askPassword = true;\n            _this3.preventReasons = [preventReason];\n            lessonReady = false;\n          }\n        } else {\n          // Lesson cannot be started.\n          _this3.preventReasons = [preventReason];\n          lessonReady = false;\n        }\n      }\n      if (_this3.selectedTab == 1 && _this3.canViewReports) {\n        // Only fetch the report data if the tab is selected.\n        promises.push(_this3.fetchReportData());\n      }\n      yield Promise.all(promises);\n      if (lessonReady) {\n        // Lesson can be started, don't ask the password and don't show prevent messages.\n        _this3.lessonReady();\n      }\n    })();\n  }\n  /**\n   * Load offline data for the lesson.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadOfflineData() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this4.lesson || !_this4.accessInfo) {\n        return;\n      }\n      const promises = [];\n      const options = {\n        cmId: _this4.module.id\n      };\n      // Check if there is offline data.\n      promises.push(AddonModLessonSync.hasDataToSync(_this4.lesson.id, _this4.accessInfo.attemptscount).then(hasData => {\n        _this4.hasOffline = hasData;\n        return;\n      }));\n      // Check if there is a retake finished in a synchronization.\n      promises.push(AddonModLessonSync.getRetakeFinishedInSync(_this4.lesson.id).then(retake => {\n        if (retake && retake.retake == _this4.accessInfo.attemptscount - 1) {\n          // The retake finished is still the last retake. Allow reviewing it.\n          _this4.retakeToReview = retake;\n        } else {\n          _this4.retakeToReview = undefined;\n          if (retake) {\n            AddonModLessonSync.deleteRetakeFinishedInSync(_this4.lesson.id);\n          }\n        }\n        return;\n      }));\n      // Check if the ser has a finished retake in offline.\n      promises.push(AddonModLessonOffline.hasFinishedRetake(_this4.lesson.id).then(finished => {\n        _this4.finishedOffline = finished;\n        return;\n      }));\n      // Update the list of content pages viewed and question attempts.\n      promises.push(AddonModLesson.getContentPagesViewedOnline(_this4.lesson.id, _this4.accessInfo.attemptscount, options));\n      promises.push(AddonModLesson.getQuestionsAttemptsOnline(_this4.lesson.id, _this4.accessInfo.attemptscount, options));\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * Fetch the reports data.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchReportData() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this5.module) {\n        return;\n      }\n      try {\n        _this5.groupInfo = yield CoreGroups.getActivityGroupInfo(_this5.module.id);\n        yield _this5.setGroup(CoreGroups.validateGroupId(_this5.group, _this5.groupInfo));\n      } finally {\n        _this5.reportLoaded = true;\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  hasSyncSucceed(result) {\n    if (result.updated || this.dataSent) {\n      // Check completion status if something was sent.\n      this.checkCompletion();\n    }\n    this.dataSent = false;\n    return result.updated;\n  }\n  /**\n   * User entered the page that contains the component.\n   */\n  ionViewDidEnter() {\n    var _this$tabsComponent, _this$dataSentObserve;\n    super.ionViewDidEnter();\n    (_this$tabsComponent = this.tabsComponent) === null || _this$tabsComponent === void 0 || _this$tabsComponent.ionViewDidEnter();\n    if (!this.hasPlayed) {\n      return;\n    }\n    // Update data when we come back from the player since the status could have changed.\n    this.hasPlayed = false;\n    (_this$dataSentObserve = this.dataSentObserver) === null || _this$dataSentObserve === void 0 || _this$dataSentObserve.off(); // Stop listening for changes.\n    this.dataSentObserver = undefined;\n    // Refresh data.\n    this.showLoadingAndRefresh(true, false);\n  }\n  /**\n   * User left the page that contains the component.\n   */\n  ionViewDidLeave() {\n    var _this$tabsComponent2;\n    super.ionViewDidLeave();\n    (_this$tabsComponent2 = this.tabsComponent) === null || _this$tabsComponent2 === void 0 || _this$tabsComponent2.ionViewDidLeave();\n  }\n  /**\n   * Perform the invalidate content function.\n   *\n   * @returns Promise resolved when done.\n   */\n  invalidateContent() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      promises.push(AddonModLesson.invalidateLessonData(_this6.courseId));\n      if (_this6.lesson) {\n        promises.push(AddonModLesson.invalidateAccessInformation(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidatePages(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidateLessonWithPassword(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidateTimers(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidateContentPagesViewed(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidateQuestionsAttempts(_this6.lesson.id));\n        promises.push(AddonModLesson.invalidateRetakesOverview(_this6.lesson.id));\n        if (_this6.module) {\n          promises.push(CoreGroups.invalidateActivityGroupInfo(_this6.module.id));\n        }\n      }\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * Compares sync event data with current data to check if refresh content is needed.\n   *\n   * @param syncEventData Data receiven on sync observer.\n   * @returns True if refresh is needed, false otherwise.\n   */\n  isRefreshSyncNeeded(syncEventData) {\n    return !!(this.lesson && syncEventData.lessonId == this.lesson.id);\n  }\n  /**\n   * Function called when the lesson is ready to be seen (no pending prevent access reasons).\n   */\n  lessonReady() {\n    this.askPassword = false;\n    this.leftDuringTimed = this.hasOffline || AddonModLesson.leftDuringTimed(this.accessInfo);\n    if (this.password) {\n      // Store the password in DB.\n      AddonModLesson.storePassword(this.lesson.id, this.password);\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  logActivity() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this7.lesson || _this7.preventReasons.length) {\n        return;\n      }\n      yield CoreUtils.ignoreErrors(AddonModLesson.logViewLesson(_this7.lesson.id, _this7.password));\n    })();\n  }\n  /**\n   * Call analytics.\n   */\n  callAnalyticsLogEvent() {\n    this.analyticsLogEvent('mod_lesson_view_lesson', {\n      url: this.selectedTab === 1 ? `/mod/lesson/report.php?id=${this.module.id}&action=reportoverview` : undefined\n    });\n  }\n  /**\n   * Open the lesson player.\n   *\n   * @param continueLast Whether to continue the last retake.\n   * @returns Promise resolved when done.\n   */\n  playLesson(continueLast) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      var _this8$dataSentObserv;\n      if (!_this8.lesson || !_this8.accessInfo) {\n        return;\n      }\n      // Calculate the pageId to load. If there is timelimit, lesson is always restarted from the start.\n      let pageId;\n      if (_this8.hasOffline) {\n        if (continueLast) {\n          pageId = yield AddonModLesson.getLastPageSeen(_this8.lesson.id, _this8.accessInfo.attemptscount, {\n            cmId: _this8.module.id\n          });\n        } else {\n          pageId = _this8.accessInfo.firstpageid;\n        }\n      } else if (_this8.leftDuringTimed && !_this8.lesson.timelimit) {\n        pageId = continueLast ? _this8.accessInfo.lastpageseen : _this8.accessInfo.firstpageid;\n      }\n      yield CoreNavigator.navigateToSitePath(`${AddonModLessonModuleHandlerService.PAGE_NAME}/${_this8.courseId}/${_this8.module.id}/player`, {\n        params: {\n          pageId: pageId,\n          password: _this8.password\n        }\n      });\n      // Detect if anything was sent to server.\n      _this8.hasPlayed = true;\n      (_this8$dataSentObserv = _this8.dataSentObserver) === null || _this8$dataSentObserv === void 0 || _this8$dataSentObserv.off();\n      _this8.dataSentObserver = CoreEvents.on(AddonModLessonProvider.DATA_SENT_EVENT, data => {\n        var _this8$lesson;\n        if (data.lessonId !== ((_this8$lesson = _this8.lesson) === null || _this8$lesson === void 0 ? void 0 : _this8$lesson.id) || data.type === 'launch') {\n          // Ignore launch sending because it only affects timers.\n          return;\n        }\n        if (data.type === 'finish') {\n          // Lesson finished, check completion now.\n          _this8.dataSent = false;\n          _this8.checkCompletion();\n        } else {\n          _this8.dataSent = true;\n        }\n      }, _this8.siteId);\n    })();\n  }\n  /**\n   * First tab selected.\n   */\n  indexSelected() {\n    const tabHasChanged = this.selectedTab !== 0;\n    this.selectedTab = 0;\n    if (tabHasChanged) {\n      this.callAnalyticsLogEvent();\n    }\n  }\n  /**\n   * Reports tab selected.\n   */\n  reportsSelected() {\n    const tabHasChanged = this.selectedTab !== 1;\n    this.selectedTab = 1;\n    if (!this.groupInfo) {\n      this.fetchReportData().catch(error => {\n        CoreDomUtils.showErrorModalDefault(error, 'Error getting report.');\n      });\n    }\n    if (tabHasChanged) {\n      this.callAnalyticsLogEvent();\n    }\n  }\n  /**\n   * Review the lesson.\n   */\n  review() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this9.retakeToReview || !_this9.lesson) {\n        // No retake to review, stop.\n        return;\n      }\n      yield CoreNavigator.navigateToSitePath(`${AddonModLessonModuleHandlerService.PAGE_NAME}/${_this9.courseId}/${_this9.module.id}/player`, {\n        params: {\n          pageId: _this9.retakeToReview.pageid,\n          password: _this9.password,\n          review: true,\n          retake: _this9.retakeToReview.retake\n        }\n      });\n      _this9.retakeToReview = undefined;\n    })();\n  }\n  /**\n   * Set a group to view the reports.\n   *\n   * @param groupId Group ID.\n   * @returns Promise resolved when done.\n   */\n  setGroup(groupId) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this10.lesson) {\n        return;\n      }\n      _this10.group = groupId;\n      _this10.selectedGroupEmptyMessage = '';\n      // Search the name of the group if it isn't all participants.\n      if (groupId && _this10.groupInfo && _this10.groupInfo.groups) {\n        const group = _this10.groupInfo.groups.find(group => groupId == group.id);\n        _this10.selectedGroupEmptyMessage = group ? Translate.instant('addon.mod_lesson.nolessonattemptsgroup', {\n          $a: group.name\n        }) : '';\n      }\n      // Get the overview of retakes for the group.\n      const data = yield AddonModLesson.getRetakesOverview(_this10.lesson.id, {\n        groupId,\n        cmId: _this10.lesson.coursemodule\n      });\n      if (!data) {\n        _this10.overview = data;\n        return;\n      }\n      const formattedData = data;\n      // Format times and grades.\n      if (formattedData.avetime != null && formattedData.numofattempts) {\n        formattedData.avetime = Math.floor(formattedData.avetime / formattedData.numofattempts);\n        _this10.avetimeReadable = CoreTime.formatTime(formattedData.avetime);\n      }\n      if (formattedData.hightime != null) {\n        _this10.hightimeReadable = CoreTime.formatTime(formattedData.hightime);\n      }\n      if (formattedData.lowtime != null) {\n        _this10.lowtimeReadable = CoreTime.formatTime(formattedData.lowtime);\n      }\n      if (formattedData.lessonscored) {\n        if (formattedData.numofattempts && formattedData.avescore != null) {\n          formattedData.avescore = CoreTextUtils.roundToDecimals(formattedData.avescore, 2);\n        }\n        if (formattedData.highscore != null) {\n          formattedData.highscore = CoreTextUtils.roundToDecimals(formattedData.highscore, 2);\n        }\n        if (formattedData.lowscore != null) {\n          formattedData.lowscore = CoreTextUtils.roundToDecimals(formattedData.lowscore, 2);\n        }\n      }\n      if (formattedData.students) {\n        // Get the user data for each student returned.\n        yield CoreUtils.allPromises(formattedData.students.map( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (student) {\n            student.bestgrade = CoreTextUtils.roundToDecimals(student.bestgrade, 2);\n            const user = yield CoreUtils.ignoreErrors(CoreUser.getProfile(student.id, _this10.courseId, true));\n            if (user) {\n              student.profileimageurl = user.profileimageurl;\n            }\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()));\n      }\n      _this10.overview = formattedData;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  showStatus(status) {\n    this.showSpinner = status == CoreConstants.DOWNLOADING;\n  }\n  /**\n   * Start the lesson.\n   *\n   * @param continueLast Whether to continue the last attempt.\n   */\n  start(continueLast) {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (_this11.showSpinner || !_this11.lesson) {\n        // Lesson is being downloaded or not retrieved, abort.\n        return;\n      }\n      if (!AddonModLesson.isLessonOffline(_this11.lesson) || _this11.currentStatus == CoreConstants.DOWNLOADED) {\n        // Not downloadable or already downloaded, open it.\n        _this11.playLesson(continueLast);\n        return;\n      }\n      // Lesson supports offline and isn't downloaded, download it.\n      _this11.showSpinner = true;\n      try {\n        yield AddonModLessonPrefetchHandler.prefetch(_this11.module, _this11.courseId, true);\n        // Success downloading, open lesson.\n        _this11.playLesson(continueLast);\n      } catch (error) {\n        if (_this11.hasOffline) {\n          // Error downloading but there is something offline, allow continuing it.\n          _this11.playLesson(continueLast);\n        } else {\n          CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n        }\n      } finally {\n        _this11.showSpinner = false;\n      }\n    })();\n  }\n  /**\n   * Submit password for password protected lessons.\n   *\n   * @param e Event.\n   * @param passwordEl The password input.\n   */\n  submitPassword(e, passwordEl) {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      const password = passwordEl === null || passwordEl === void 0 ? void 0 : passwordEl.value;\n      if (!password) {\n        CoreDomUtils.showErrorModal('addon.mod_lesson.emptypassword', true);\n        return;\n      }\n      _this12.showLoading = true;\n      try {\n        yield _this12.validatePassword(password);\n        // Password validated.\n        _this12.lessonReady();\n        // Now that we have the password, get the access reason again ignoring the password.\n        const preventReason = AddonModLesson.getPreventAccessReason(_this12.accessInfo, true);\n        _this12.preventReasons = preventReason ? [preventReason] : [];\n        // Log view now that we have the password.\n        _this12.logActivity();\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n      } finally {\n        _this12.showLoading = false;\n        CoreForms.triggerFormSubmittedEvent(_this12.formElement, true, _this12.siteId);\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  sync() {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this13.lesson) {\n        throw new CoreError('Cannot sync without a lesson.');\n      }\n      const result = yield AddonModLessonSync.syncLesson(_this13.lesson.id, true);\n      if (!result.updated && _this13.dataSent && _this13.isPrefetched()) {\n        // The user sent data to server, but not in the sync process. Check if we need to fetch data.\n        yield CoreUtils.ignoreErrors(AddonModLessonSync.prefetchAfterUpdate(AddonModLessonPrefetchHandler.instance, _this13.module, _this13.courseId));\n      }\n      return result;\n    })();\n  }\n  /**\n   * Validate a password and retrieve extra data.\n   *\n   * @param password The password to validate.\n   * @returns Promise resolved when done.\n   */\n  validatePassword(password) {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this14.lesson = yield AddonModLesson.getLessonWithPassword(_this14.lesson.id, {\n          password,\n          cmId: _this14.module.id\n        });\n        _this14.password = password;\n      } catch (error) {\n        _this14.password = '';\n        throw error;\n      }\n    })();\n  }\n  /**\n   * Open a certain user retake.\n   *\n   * @param userId User ID to view.\n   * @returns Promise resolved when done.\n   */\n  openRetake(userId) {\n    var _this15 = this;\n    return _asyncToGenerator(function* () {\n      CoreNavigator.navigateToSitePath(`${AddonModLessonModuleHandlerService.PAGE_NAME}/${_this15.courseId}/${_this15.module.id}/user-retake/${userId}`);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$dataSentObserve2;\n    super.ngOnDestroy();\n    (_this$dataSentObserve2 = this.dataSentObserver) === null || _this$dataSentObserve2 === void 0 || _this$dataSentObserve2.off();\n  }\n}\n_class = AddonModLessonIndexComponent;\n_class.ɵfac = function AddonModLessonIndexComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.IonContent), i0.ɵɵdirectiveInject(i2.CoreCourseContentsPage, 8));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-lesson-index\"]],\n  viewQuery: function AddonModLessonIndexComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreTabsComponent, 5);\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tabsComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formElement = _t.first);\n    }\n  },\n  inputs: {\n    group: \"group\",\n    action: \"action\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 14,\n  vars: 17,\n  consts: [[\"slot\", \"end\"], [\"fill\", \"clear\", \"aria-haspopup\", \"true\", 3, \"click\"], [\"name\", \"fas-circle-info\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [3, \"module\", \"description\", \"component\", \"componentId\", \"courseId\", \"hasDataToSync\", \"completionChanged\"], [3, \"hideUntil\", \"selectedIndex\"], [3, \"title\", \"ionSelect\"], [3, \"title\", \"ionSelect\", 4, \"ngIf\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"buttons\", \"\"], [\"class\", \"core-info-card\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"hideUntil\", 4, \"ngIf\"], [1, \"core-info-card\"], [\"name\", \"fas-circle-info\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [3, \"innerHTML\"], [3, \"ngSubmit\"], [\"passwordForm\", \"\"], [1, \"ion-text-wrap\"], [\"position\", \"stacked\"], [\"name\", \"password\"], [\"name\", \"password\", \"type\", \"password\", \"core-auto-focus\", \"\", 3, \"placeholder\", \"clearOnEdit\"], [\"passwordinput\", \"\"], [\"expand\", \"block\", \"type\", \"submit\"], [\"type\", \"submit\", 1, \"core-submit-hidden-enter\"], [4, \"ngTemplateOutlet\"], [3, \"groupInfo\", \"selected\", \"courseId\", \"selectedChange\"], [\"icon\", \"fas-chart-bar\", 4, \"ngIf\"], [\"icon\", \"fas-chart-bar\", 3, \"message\", 4, \"ngIf\"], [\"class\", \"addon-mod_lesson-lessonstats\", 4, \"ngIf\"], [\"icon\", \"fas-chart-bar\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\", \"wsNotFiltered\"], [\"icon\", \"fas-chart-bar\", 3, \"message\"], [1, \"addon-mod_lesson-lessonstats\"], [1, \"ion-text-wrap\", \"ion-hide-md-down\"], [1, \"ion-text-center\"], [1, \"item-heading\"], [1, \"ion-text-wrap\", \"ion-hide-md-up\"], [\"class\", \"ion-text-center\", 4, \"ngIf\"], [3, \"ngClass\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"start\", 3, \"user\", \"userId\", \"courseId\"], [\"a11yText\", \"addon.mod_lesson.grade\", 3, \"progress\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\"], [\"class\", \"list-item-limited-width\", 4, \"ngIf\"], [3, \"courseId\", \"currentModuleId\"], [1, \"list-item-limited-width\"], [1, \"ion-padding-bottom\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap ion-margin\", \"expand\", \"block\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", 3, \"click\"], [\"expand\", \"block\", 3, \"click\"], [\"class\", \"ion-text-wrap ion-margin\", \"expand\", \"block\", \"fill\", \"outline\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"name\", \"fas-magnifying-glass\", \"slot\", \"start\", \"aria-hidden\", \"true\"]],\n  template: function AddonModLessonIndexComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"core-navbar-buttons\", 0)(1, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function AddonModLessonIndexComponent_Template_ion_button_click_1_listener() {\n        return ctx.openModuleSummary();\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelement(3, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"core-loading\", 3)(5, \"core-course-module-info\", 4);\n      i0.ɵɵlistener(\"completionChanged\", function AddonModLessonIndexComponent_Template_core_course_module_info_completionChanged_5_listener() {\n        return ctx.onCompletionChange();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"core-tabs\", 5)(7, \"core-tab\", 6);\n      i0.ɵɵlistener(\"ionSelect\", function AddonModLessonIndexComponent_Template_core_tab_ionSelect_7_listener() {\n        return ctx.indexSelected();\n      });\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵtemplate(9, AddonModLessonIndexComponent_ng_template_9_Template, 3, 3, \"ng-template\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, AddonModLessonIndexComponent_core_tab_10_Template, 3, 3, \"core-tab\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(11, AddonModLessonIndexComponent_div_11_Template, 3, 3, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, AddonModLessonIndexComponent_ng_template_12_Template, 2, 2, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 13, \"core.info\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.showLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"module\", ctx.module)(\"description\", ctx.description)(\"component\", ctx.component)(\"componentId\", ctx.componentId)(\"courseId\", ctx.courseId)(\"hasDataToSync\", ctx.hasOffline);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.showLoading)(\"selectedIndex\", ctx.selectedTab);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(8, 15, \"addon.mod_lesson.preview\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.canViewReports);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showLoading);\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreConstants","CoreTabsComponent","CoreCourseModuleMainActivityComponent","CoreUser","CoreGroups","CoreNavigator","CoreDomUtils","CoreForms","CoreTextUtils","CoreUtils","CoreEvents","AddonModLessonPrefetchHandler","AddonModLesson","AddonModLessonProvider","AddonModLessonOffline","AddonModLessonSync","AddonModLessonSyncProvider","AddonModLessonModuleHandlerService","CoreTime","CoreError","Translate","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r5","preventReasons","message","ɵɵsanitizeHtml","ɵɵlistener","AddonModLessonIndexComponent_ng_template_9_ion_card_1_Template_form_ngSubmit_1_listener","$event","ɵɵrestoreView","_r11","_r9","ɵɵreference","ctx_r10","ɵɵnextContext","ɵɵresetView","submitPassword","ɵɵtext","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵpropertyInterpolate","ɵɵtextInterpolate1","ɵɵelementContainer","ɵɵtemplate","AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_ng_container_1_Template","_r3","AddonModLessonIndexComponent_ng_template_9_core_loading_2_ion_list_1_Template","ctx_r7","showSpinner","lesson","length","retakeToReview","AddonModLessonIndexComponent_ng_template_9_ion_card_0_Template","AddonModLessonIndexComponent_ng_template_9_ion_card_1_Template","AddonModLessonIndexComponent_ng_template_9_core_loading_2_Template","ctx_r0","askPassword","canViewReports","ctx_r15","selectedGroupEmptyMessage","courseId","ɵɵpipeBind2","ɵɵpureFunction1","_c1","ctx_r35","overview","avescore","ctx_r37","highscore","ctx_r39","lowscore","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_5_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_6_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_11_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_12_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_17_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_p_18_Template","ctx_r19","numofattempts","ctx_r20","avetimeReadable","ctx_r22","hightimeReadable","ctx_r24","lowtimeReadable","ctx_r41","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_4_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_p_5_Template","ctx_r26","ctx_r27","ctx_r43","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_4_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_p_5_Template","ctx_r29","ctx_r30","ctx_r45","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_4_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_p_5_Template","ctx_r32","ctx_r33","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_row_6_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_12_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_13_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_18_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_19_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_24_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_25_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_28_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_33_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_34_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_36_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_41_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_42_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_ion_col_44_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_49_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_p_50_Template","ctx_r17","lessonscored","avetime","hightime","lowtime","_c2","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_ion_item_5_Template_ion_item_click_0_listener","restoredCtx","_r50","student_r48","$implicit","ctx_r49","openRetake","id","ctx_r47","fullname","bestgrade","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_ion_item_5_Template","ctx_r18","students","AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template_core_group_selector_selectedChange_1_listener","_r52","ctx_r51","group","ctx_r53","setGroup","AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_2_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_core_empty_box_3_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_4_Template","AddonModLessonIndexComponent_core_tab_10_ng_template_2_ion_card_5_Template","ctx_r14","reportLoaded","groupInfo","AddonModLessonIndexComponent_core_tab_10_Template_core_tab_ionSelect_0_listener","_r55","ctx_r54","reportsSelected","AddonModLessonIndexComponent_core_tab_10_ng_template_2_Template","AddonModLessonIndexComponent_div_11_div_1_ng_container_1_Template","AddonModLessonIndexComponent_div_11_div_1_Template","ctx_r2","module","ɵɵelementContainerStart","AddonModLessonIndexComponent_ng_template_12_ng_container_0_Template_ion_button_click_5_listener","_r61","ctx_r60","review","ɵɵelementContainerEnd","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template_ion_button_click_6_listener","_r68","ctx_r67","start","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template_ion_button_click_10_listener","ctx_r69","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_2_Template_ion_button_click_4_listener","_r71","ctx_r70","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_1_Template_ion_button_click_0_listener","_r75","ctx_r74","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_2_Template_ion_button_click_0_listener","_r77","ctx_r76","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_1_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_ion_button_2_Template","ctx_r65","canManage","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_button_5_Template_ion_button_click_0_listener","_r79","ctx_r78","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_1_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_2_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_item_3_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ng_container_4_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_ion_button_5_Template","ctx_r59","leftDuringTimed","timelimit","finishedOffline","retake","AddonModLessonIndexComponent_ng_template_12_ng_container_0_Template","AddonModLessonIndexComponent_ng_template_12_ng_container_1_Template","ctx_r4","AddonModLessonIndexComponent","constructor","content","courseContentsPage","component","COMPONENT","pluginName","syncEventName","AUTO_SYNCED","hasPlayed","dataSent","ngOnInit","_superprop_getNgOnInit","_this","_asyncToGenerator","call","selectedTab","action","loadContent","changeGroup","groupId","_this2","error","showErrorModalDefault","fetchContent","refresh","sync","showErrors","_this3","lessonReady","getLesson","dataRetrieved","emit","description","intro","syncActivity","accessInfo","getAccessInformation","cmId","canmanage","canviewreports","promises","isLessonOffline","setStatusListener","push","loadOfflineData","preventaccessreasons","_preventReason","preventReason","getPreventAccessReason","reason","password","getStoredPassword","validatePassword","_unused","fetchReportData","Promise","all","_this4","options","hasDataToSync","attemptscount","then","hasData","hasOffline","getRetakeFinishedInSync","undefined","deleteRetakeFinishedInSync","hasFinishedRetake","finished","getContentPagesViewedOnline","getQuestionsAttemptsOnline","_this5","getActivityGroupInfo","validateGroupId","hasSyncSucceed","result","updated","checkCompletion","ionViewDidEnter","_this$tabsComponent","_this$dataSentObserve","tabsComponent","dataSentObserver","off","showLoadingAndRefresh","ionViewDidLeave","_this$tabsComponent2","invalidateContent","_this6","invalidateLessonData","invalidateAccessInformation","invalidatePages","invalidateLessonWithPassword","invalidateTimers","invalidateContentPagesViewed","invalidateQuestionsAttempts","invalidateRetakesOverview","invalidateActivityGroupInfo","isRefreshSyncNeeded","syncEventData","lessonId","storePassword","logActivity","_this7","ignoreErrors","logViewLesson","callAnalyticsLogEvent","analyticsLogEvent","url","playLesson","continueLast","_this8","_this8$dataSentObserv","pageId","getLastPageSeen","firstpageid","lastpageseen","navigateToSitePath","PAGE_NAME","params","on","DATA_SENT_EVENT","data","_this8$lesson","type","siteId","indexSelected","tabHasChanged","catch","_this9","pageid","_this10","groups","find","instant","$a","name","getRetakesOverview","coursemodule","formattedData","Math","floor","formatTime","roundToDecimals","allPromises","map","_ref","student","user","getProfile","profileimageurl","_x","apply","arguments","showStatus","status","DOWNLOADING","_this11","currentStatus","DOWNLOADED","prefetch","e","passwordEl","_this12","preventDefault","stopPropagation","value","showErrorModal","showLoading","triggerFormSubmittedEvent","formElement","_this13","syncLesson","isPrefetched","prefetchAfterUpdate","instance","_this14","getLessonWithPassword","userId","_this15","ngOnDestroy","_this$dataSentObserve2","ɵɵdirectiveInject","i1","IonContent","i2","CoreCourseContentsPage","selectors","viewQuery","AddonModLessonIndexComponent_Query","rf","ctx","AddonModLessonIndexComponent_Template_ion_button_click_1_listener","openModuleSummary","AddonModLessonIndexComponent_Template_core_course_module_info_completionChanged_5_listener","onCompletionChange","AddonModLessonIndexComponent_Template_core_tab_ionSelect_7_listener","AddonModLessonIndexComponent_ng_template_9_Template","AddonModLessonIndexComponent_core_tab_10_Template","AddonModLessonIndexComponent_div_11_Template","AddonModLessonIndexComponent_ng_template_12_Template","ɵɵtemplateRefExtractor","ɵɵattribute","componentId"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lesson/components/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lesson/components/index/addon-mod-lesson-index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreConstants } from '@/core/constants';\nimport { Component, Input, ViewChild, ElementRef, OnInit, OnDestroy, Optional } from '@angular/core';\n\nimport { CoreTabsComponent } from '@components/tabs/tabs';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreCourseContentsPage } from '@features/course/pages/contents/contents';\nimport { CoreUser } from '@features/user/services/user';\nimport { IonContent, IonInput } from '@ionic/angular';\nimport { CoreGroupInfo, CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreForms } from '@singletons/form';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { AddonModLessonRetakeFinishedInSyncDBRecord } from '../../services/database/lesson';\nimport { AddonModLessonPrefetchHandler } from '../../services/handlers/prefetch';\nimport {\n    AddonModLesson,\n    AddonModLessonAttemptsOverviewsStudentWSData,\n    AddonModLessonAttemptsOverviewWSData,\n    AddonModLessonGetAccessInformationWSResponse,\n    AddonModLessonLessonWSData,\n    AddonModLessonPreventAccessReason,\n    AddonModLessonProvider,\n} from '../../services/lesson';\nimport { AddonModLessonOffline } from '../../services/lesson-offline';\nimport {\n    AddonModLessonAutoSyncData,\n    AddonModLessonSync,\n    AddonModLessonSyncProvider,\n    AddonModLessonSyncResult,\n} from '../../services/lesson-sync';\nimport { AddonModLessonModuleHandlerService } from '../../services/handlers/module';\nimport { CoreTime } from '@singletons/time';\nimport { CoreError } from '@classes/errors/error';\nimport { Translate } from '@singletons';\n\n/**\n * Component that displays a lesson entry page.\n */\n@Component({\n    selector: 'addon-mod-lesson-index',\n    templateUrl: 'addon-mod-lesson-index.html',\n})\nexport class AddonModLessonIndexComponent extends CoreCourseModuleMainActivityComponent implements OnInit, OnDestroy {\n\n    @ViewChild(CoreTabsComponent) tabsComponent?: CoreTabsComponent;\n    @ViewChild('passwordForm') formElement?: ElementRef;\n\n    @Input() group = 0; // The group to display.\n    @Input() action?: string; // The \"action\" to display first.\n\n    component = AddonModLessonProvider.COMPONENT;\n    pluginName = 'lesson';\n\n    lesson?: AddonModLessonLessonWSData; // The lesson.\n    selectedTab?: number; // The initial selected tab.\n    askPassword?: boolean; // Whether to ask the password.\n    canManage?: boolean; // Whether the user can manage the lesson.\n    canViewReports?: boolean; // Whether the user can view the lesson reports.\n    showSpinner?: boolean; // Whether to display a spinner.\n    retakeToReview?: AddonModLessonRetakeFinishedInSyncDBRecord; // A retake to review.\n    preventReasons: AddonModLessonPreventAccessReason[] = []; // List of reasons that prevent the lesson from being seen.\n    leftDuringTimed?: boolean; // Whether the user has started and left a retake.\n    groupInfo?: CoreGroupInfo; // The group info.\n    reportLoaded?: boolean; // Whether the report data has been loaded.\n    selectedGroupEmptyMessage?: string; // The message to show if the selected group is empty.\n    overview?: AttemptsOverview; // Reports overview data.\n    finishedOffline?: boolean; // Whether a retake was finished in offline.\n    avetimeReadable?: string; // Average time in a readable format.\n    hightimeReadable?: string; // High time in a readable format.\n    lowtimeReadable?: string; // Low time in a readable format.\n\n    protected syncEventName = AddonModLessonSyncProvider.AUTO_SYNCED;\n    protected accessInfo?: AddonModLessonGetAccessInformationWSResponse; // Lesson access info.\n    protected password?: string; // The password for the lesson.\n    protected hasPlayed = false; // Whether the user has gone to the lesson player (attempted).\n    protected dataSentObserver?: CoreEventObserver; // To detect data sent to server.\n    protected dataSent = false; // Whether some data was sent to server while playing the lesson.\n\n    constructor(\n        protected content?: IonContent,\n        @Optional() courseContentsPage?: CoreCourseContentsPage,\n    ) {\n        super('AddonModLessonIndexComponent', content, courseContentsPage);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        super.ngOnInit();\n\n        this.selectedTab = this.action == 'report' ? 1 : 0;\n\n        await this.loadContent(false, true);\n    }\n\n    /**\n     * Change the group displayed.\n     *\n     * @param groupId Group ID to display.\n     * @returns Promise resolved when done.\n     */\n    async changeGroup(groupId: number): Promise<void> {\n        this.reportLoaded = false;\n\n        try {\n            await this.setGroup(groupId);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error getting report.');\n        } finally {\n            this.reportLoaded = true;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async fetchContent(refresh?: boolean, sync = false, showErrors = false): Promise<void> {\n        let lessonReady = true;\n        this.askPassword = false;\n\n        this.lesson = await AddonModLesson.getLesson(this.courseId, this.module.id);\n\n        this.dataRetrieved.emit(this.lesson);\n        this.description = this.lesson.intro; // Show description only if intro is present.\n\n        if (sync) {\n            // Try to synchronize the lesson.\n            await this.syncActivity(showErrors);\n        }\n\n        this.accessInfo = await AddonModLesson.getAccessInformation(this.lesson.id, { cmId: this.module.id });\n        this.canManage = this.accessInfo.canmanage;\n        this.canViewReports = this.accessInfo.canviewreports;\n        this.preventReasons = [];\n        const promises: Promise<void>[] = [];\n\n        if (AddonModLesson.isLessonOffline(this.lesson)) {\n            // Handle status.\n            this.setStatusListener();\n\n            promises.push(this.loadOfflineData());\n        }\n\n        if (this.accessInfo.preventaccessreasons.length) {\n            let preventReason = AddonModLesson.getPreventAccessReason(this.accessInfo, false);\n            const askPassword = preventReason?.reason == 'passwordprotectedlesson';\n\n            if (askPassword) {\n                try {\n                    // The lesson requires a password. Check if there is one in memory or DB.\n                    const password = this.password ?\n                        this.password :\n                        await AddonModLesson.getStoredPassword(this.lesson.id);\n\n                    await this.validatePassword(password);\n\n                    // Now that we have the password, get the access reason again ignoring the password.\n                    preventReason = AddonModLesson.getPreventAccessReason(this.accessInfo, true);\n                    if (preventReason) {\n                        this.preventReasons = [preventReason];\n                    }\n                } catch {\n                    // No password or the validation failed. Show password form.\n                    this.askPassword = true;\n                    this.preventReasons = [preventReason!];\n                    lessonReady = false;\n                }\n            } else {\n                // Lesson cannot be started.\n                this.preventReasons = [preventReason!];\n                lessonReady = false;\n            }\n        }\n\n        if (this.selectedTab == 1 && this.canViewReports) {\n            // Only fetch the report data if the tab is selected.\n            promises.push(this.fetchReportData());\n        }\n\n        await Promise.all(promises);\n\n        if (lessonReady) {\n            // Lesson can be started, don't ask the password and don't show prevent messages.\n            this.lessonReady();\n        }\n    }\n\n    /**\n     * Load offline data for the lesson.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadOfflineData(): Promise<void> {\n        if (!this.lesson || !this.accessInfo) {\n            return;\n        }\n\n        const promises: Promise<unknown>[] = [];\n        const options = { cmId: this.module.id };\n\n        // Check if there is offline data.\n        promises.push(AddonModLessonSync.hasDataToSync(this.lesson.id, this.accessInfo.attemptscount).then((hasData) => {\n            this.hasOffline = hasData;\n\n            return;\n        }));\n\n        // Check if there is a retake finished in a synchronization.\n        promises.push(AddonModLessonSync.getRetakeFinishedInSync(this.lesson.id).then((retake) => {\n            if (retake && retake.retake == this.accessInfo!.attemptscount - 1) {\n                // The retake finished is still the last retake. Allow reviewing it.\n                this.retakeToReview = retake;\n            } else {\n                this.retakeToReview = undefined;\n                if (retake) {\n                    AddonModLessonSync.deleteRetakeFinishedInSync(this.lesson!.id);\n                }\n            }\n\n            return;\n        }));\n\n        // Check if the ser has a finished retake in offline.\n        promises.push(AddonModLessonOffline.hasFinishedRetake(this.lesson.id).then((finished) => {\n            this.finishedOffline = finished;\n\n            return;\n        }));\n\n        // Update the list of content pages viewed and question attempts.\n        promises.push(AddonModLesson.getContentPagesViewedOnline(this.lesson.id, this.accessInfo.attemptscount, options));\n        promises.push(AddonModLesson.getQuestionsAttemptsOnline(this.lesson.id, this.accessInfo.attemptscount, options));\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Fetch the reports data.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchReportData(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        try {\n            this.groupInfo = await CoreGroups.getActivityGroupInfo(this.module.id);\n\n            await this.setGroup(CoreGroups.validateGroupId(this.group, this.groupInfo));\n        } finally {\n            this.reportLoaded = true;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected hasSyncSucceed(result: AddonModLessonSyncResult): boolean {\n        if (result.updated || this.dataSent) {\n            // Check completion status if something was sent.\n            this.checkCompletion();\n        }\n\n        this.dataSent = false;\n\n        return result.updated;\n    }\n\n    /**\n     * User entered the page that contains the component.\n     */\n    ionViewDidEnter(): void {\n        super.ionViewDidEnter();\n\n        this.tabsComponent?.ionViewDidEnter();\n\n        if (!this.hasPlayed) {\n            return;\n        }\n\n        // Update data when we come back from the player since the status could have changed.\n        this.hasPlayed = false;\n        this.dataSentObserver?.off(); // Stop listening for changes.\n        this.dataSentObserver = undefined;\n\n        // Refresh data.\n        this.showLoadingAndRefresh(true, false);\n    }\n\n    /**\n     * User left the page that contains the component.\n     */\n    ionViewDidLeave(): void {\n        super.ionViewDidLeave();\n\n        this.tabsComponent?.ionViewDidLeave();\n    }\n\n    /**\n     * Perform the invalidate content function.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async invalidateContent(): Promise<void> {\n        const promises: Promise<unknown>[] = [];\n\n        promises.push(AddonModLesson.invalidateLessonData(this.courseId));\n\n        if (this.lesson) {\n            promises.push(AddonModLesson.invalidateAccessInformation(this.lesson.id));\n            promises.push(AddonModLesson.invalidatePages(this.lesson.id));\n            promises.push(AddonModLesson.invalidateLessonWithPassword(this.lesson.id));\n            promises.push(AddonModLesson.invalidateTimers(this.lesson.id));\n            promises.push(AddonModLesson.invalidateContentPagesViewed(this.lesson.id));\n            promises.push(AddonModLesson.invalidateQuestionsAttempts(this.lesson.id));\n            promises.push(AddonModLesson.invalidateRetakesOverview(this.lesson.id));\n            if (this.module) {\n                promises.push(CoreGroups.invalidateActivityGroupInfo(this.module.id));\n            }\n        }\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Compares sync event data with current data to check if refresh content is needed.\n     *\n     * @param syncEventData Data receiven on sync observer.\n     * @returns True if refresh is needed, false otherwise.\n     */\n    protected isRefreshSyncNeeded(syncEventData: AddonModLessonAutoSyncData): boolean {\n        return !!(this.lesson && syncEventData.lessonId == this.lesson.id);\n    }\n\n    /**\n     * Function called when the lesson is ready to be seen (no pending prevent access reasons).\n     */\n    protected lessonReady(): void {\n        this.askPassword = false;\n        this.leftDuringTimed = this.hasOffline || AddonModLesson.leftDuringTimed(this.accessInfo);\n\n        if (this.password) {\n            // Store the password in DB.\n            AddonModLesson.storePassword(this.lesson!.id, this.password);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async logActivity(): Promise<void> {\n        if (!this.lesson || this.preventReasons.length) {\n            return;\n        }\n\n        await CoreUtils.ignoreErrors(AddonModLesson.logViewLesson(this.lesson.id, this.password));\n    }\n\n    /**\n     * Call analytics.\n     */\n    protected callAnalyticsLogEvent(): void {\n        this.analyticsLogEvent('mod_lesson_view_lesson', {\n            url: this.selectedTab === 1 ? `/mod/lesson/report.php?id=${this.module.id}&action=reportoverview` : undefined,\n        });\n    }\n\n    /**\n     * Open the lesson player.\n     *\n     * @param continueLast Whether to continue the last retake.\n     * @returns Promise resolved when done.\n     */\n    protected async playLesson(continueLast?: boolean): Promise<void> {\n        if (!this.lesson || !this.accessInfo) {\n            return;\n        }\n\n        // Calculate the pageId to load. If there is timelimit, lesson is always restarted from the start.\n        let pageId: number | undefined;\n\n        if (this.hasOffline) {\n            if (continueLast) {\n                pageId = await AddonModLesson.getLastPageSeen(this.lesson.id, this.accessInfo.attemptscount, {\n                    cmId: this.module.id,\n                });\n            } else {\n                pageId = this.accessInfo.firstpageid;\n            }\n        } else if (this.leftDuringTimed && !this.lesson.timelimit) {\n            pageId = continueLast ? this.accessInfo.lastpageseen : this.accessInfo.firstpageid;\n        }\n\n        await CoreNavigator.navigateToSitePath(\n            `${AddonModLessonModuleHandlerService.PAGE_NAME}/${this.courseId}/${this.module.id}/player`,\n            {\n                params: {\n                    pageId: pageId,\n                    password: this.password,\n                },\n            },\n        );\n\n        // Detect if anything was sent to server.\n        this.hasPlayed = true;\n        this.dataSentObserver?.off();\n\n        this.dataSentObserver = CoreEvents.on(AddonModLessonProvider.DATA_SENT_EVENT, (data) => {\n            if (data.lessonId !== this.lesson?.id || data.type === 'launch') {\n                // Ignore launch sending because it only affects timers.\n                return;\n            }\n\n            if (data.type === 'finish') {\n                // Lesson finished, check completion now.\n                this.dataSent = false;\n                this.checkCompletion();\n            } else {\n                this.dataSent = true;\n            }\n        }, this.siteId);\n    }\n\n    /**\n     * First tab selected.\n     */\n    indexSelected(): void {\n        const tabHasChanged = this.selectedTab !== 0;\n        this.selectedTab = 0;\n\n        if (tabHasChanged) {\n            this.callAnalyticsLogEvent();\n        }\n    }\n\n    /**\n     * Reports tab selected.\n     */\n    reportsSelected(): void {\n        const tabHasChanged = this.selectedTab !== 1;\n        this.selectedTab = 1;\n\n        if (!this.groupInfo) {\n            this.fetchReportData().catch((error) => {\n                CoreDomUtils.showErrorModalDefault(error, 'Error getting report.');\n            });\n        }\n\n        if (tabHasChanged) {\n            this.callAnalyticsLogEvent();\n        }\n    }\n\n    /**\n     * Review the lesson.\n     */\n    async review(): Promise<void> {\n        if (!this.retakeToReview || !this.lesson) {\n            // No retake to review, stop.\n            return;\n        }\n\n        await CoreNavigator.navigateToSitePath(\n            `${AddonModLessonModuleHandlerService.PAGE_NAME}/${this.courseId}/${this.module.id}/player`,\n            {\n                params: {\n                    pageId: this.retakeToReview.pageid,\n                    password: this.password,\n                    review: true,\n                    retake: this.retakeToReview.retake,\n                },\n            },\n        );\n\n        this.retakeToReview = undefined;\n    }\n\n    /**\n     * Set a group to view the reports.\n     *\n     * @param groupId Group ID.\n     * @returns Promise resolved when done.\n     */\n    async setGroup(groupId: number): Promise<void> {\n        if (!this.lesson) {\n            return;\n        }\n\n        this.group = groupId;\n        this.selectedGroupEmptyMessage = '';\n\n        // Search the name of the group if it isn't all participants.\n        if (groupId && this.groupInfo && this.groupInfo.groups) {\n            const group = this.groupInfo.groups.find(group => groupId == group.id);\n\n            this.selectedGroupEmptyMessage = group\n                ? Translate.instant('addon.mod_lesson.nolessonattemptsgroup', { $a: group.name })\n                : '';\n        }\n\n        // Get the overview of retakes for the group.\n        const data = await AddonModLesson.getRetakesOverview(this.lesson.id, {\n            groupId,\n            cmId: this.lesson.coursemodule,\n        });\n\n        if (!data) {\n            this.overview = data;\n\n            return;\n        }\n\n        const formattedData = <AttemptsOverview> data;\n\n        // Format times and grades.\n        if (formattedData.avetime != null && formattedData.numofattempts) {\n            formattedData.avetime = Math.floor(formattedData.avetime / formattedData.numofattempts);\n            this.avetimeReadable = CoreTime.formatTime(formattedData.avetime);\n        }\n\n        if (formattedData.hightime != null) {\n            this.hightimeReadable = CoreTime.formatTime(formattedData.hightime);\n        }\n\n        if (formattedData.lowtime != null) {\n            this.lowtimeReadable = CoreTime.formatTime(formattedData.lowtime);\n        }\n\n        if (formattedData.lessonscored) {\n            if (formattedData.numofattempts && formattedData.avescore != null) {\n                formattedData.avescore = CoreTextUtils.roundToDecimals(formattedData.avescore, 2);\n            }\n            if (formattedData.highscore != null) {\n                formattedData.highscore = CoreTextUtils.roundToDecimals(formattedData.highscore, 2);\n            }\n            if (formattedData.lowscore != null) {\n                formattedData.lowscore = CoreTextUtils.roundToDecimals(formattedData.lowscore, 2);\n            }\n        }\n\n        if (formattedData.students) {\n            // Get the user data for each student returned.\n            await CoreUtils.allPromises(formattedData.students.map(async (student) => {\n                student.bestgrade = CoreTextUtils.roundToDecimals(student.bestgrade, 2);\n\n                const user = await CoreUtils.ignoreErrors(CoreUser.getProfile(student.id, this.courseId, true));\n                if (user) {\n                    student.profileimageurl = user.profileimageurl;\n                }\n            }));\n        }\n\n        this.overview = formattedData;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected showStatus(status: string): void {\n        this.showSpinner = status == CoreConstants.DOWNLOADING;\n    }\n\n    /**\n     * Start the lesson.\n     *\n     * @param continueLast Whether to continue the last attempt.\n     */\n    async start(continueLast?: boolean): Promise<void> {\n        if (this.showSpinner || !this.lesson) {\n            // Lesson is being downloaded or not retrieved, abort.\n            return;\n        }\n\n        if (!AddonModLesson.isLessonOffline(this.lesson) || this.currentStatus == CoreConstants.DOWNLOADED) {\n            // Not downloadable or already downloaded, open it.\n            this.playLesson(continueLast);\n\n            return;\n        }\n\n        // Lesson supports offline and isn't downloaded, download it.\n        this.showSpinner = true;\n\n        try {\n            await AddonModLessonPrefetchHandler.prefetch(this.module, this.courseId, true);\n\n            // Success downloading, open lesson.\n            this.playLesson(continueLast);\n        } catch (error) {\n            if (this.hasOffline) {\n                // Error downloading but there is something offline, allow continuing it.\n                this.playLesson(continueLast);\n            } else {\n                CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n            }\n        } finally {\n            this.showSpinner = false;\n        }\n    }\n\n    /**\n     * Submit password for password protected lessons.\n     *\n     * @param e Event.\n     * @param passwordEl The password input.\n     */\n    async submitPassword(e: Event, passwordEl: IonInput): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        const password = passwordEl?.value;\n        if (!password) {\n            CoreDomUtils.showErrorModal('addon.mod_lesson.emptypassword', true);\n\n            return;\n        }\n\n        this.showLoading = true;\n\n        try {\n            await this.validatePassword(<string> password);\n\n            // Password validated.\n            this.lessonReady();\n\n            // Now that we have the password, get the access reason again ignoring the password.\n            const preventReason = AddonModLesson.getPreventAccessReason(this.accessInfo!, true);\n            this.preventReasons = preventReason ? [preventReason] : [];\n\n            // Log view now that we have the password.\n            this.logActivity();\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            this.showLoading = false;\n\n            CoreForms.triggerFormSubmittedEvent(this.formElement, true, this.siteId);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async sync(): Promise<AddonModLessonSyncResult> {\n        if (!this.lesson) {\n            throw new CoreError('Cannot sync without a lesson.');\n        }\n\n        const result = await AddonModLessonSync.syncLesson(this.lesson.id, true);\n\n        if (!result.updated && this.dataSent && this.isPrefetched()) {\n            // The user sent data to server, but not in the sync process. Check if we need to fetch data.\n            await CoreUtils.ignoreErrors(AddonModLessonSync.prefetchAfterUpdate(\n                AddonModLessonPrefetchHandler.instance,\n                this.module,\n                this.courseId,\n            ));\n        }\n\n        return result;\n    }\n\n    /**\n     * Validate a password and retrieve extra data.\n     *\n     * @param password The password to validate.\n     * @returns Promise resolved when done.\n     */\n    protected async validatePassword(password: string): Promise<void> {\n        try {\n            this.lesson = await AddonModLesson.getLessonWithPassword(this.lesson!.id, { password, cmId: this.module.id });\n\n            this.password = password;\n        } catch (error) {\n            this.password = '';\n\n            throw error;\n        }\n    }\n\n    /**\n     * Open a certain user retake.\n     *\n     * @param userId User ID to view.\n     * @returns Promise resolved when done.\n     */\n    async openRetake(userId: number): Promise<void> {\n        CoreNavigator.navigateToSitePath(\n            `${AddonModLessonModuleHandlerService.PAGE_NAME}/${this.courseId}/${this.module.id}/user-retake/${userId}`,\n        );\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        super.ngOnDestroy();\n\n        this.dataSentObserver?.off();\n    }\n\n}\n\n/**\n * Overview data including user avatars, calculated in this component.\n */\ntype AttemptsOverview = Omit<AddonModLessonAttemptsOverviewWSData, 'students'> & {\n    students?: StudentWithImage[];\n};\n\n/**\n * Overview student data with the avatar, calculated in this component.\n */\ntype StudentWithImage = AddonModLessonAttemptsOverviewsStudentWSData & {\n    profileimageurl?: string;\n};\n","<!-- Buttons to add to the header. -->\n<core-navbar-buttons slot=\"end\">\n    <ion-button fill=\"clear\" (click)=\"openModuleSummary()\" aria-haspopup=\"true\" [attr.aria-label]=\"'core.info' | translate\">\n        <ion-icon name=\"fas-circle-info\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n</core-navbar-buttons>\n\n<!-- Content. -->\n<core-loading [hideUntil]=\"!showLoading\">\n\n    <!-- Activity info. -->\n    <core-course-module-info [module]=\"module\" [description]=\"description\" [component]=\"component\" [componentId]=\"componentId\"\n        [courseId]=\"courseId\" [hasDataToSync]=\"hasOffline\" (completionChanged)=\"onCompletionChange()\" />\n\n    <core-tabs [hideUntil]=\"!showLoading\" [selectedIndex]=\"selectedTab\">\n        <!-- Index/Preview tab. -->\n        <core-tab [title]=\"'addon.mod_lesson.preview' | translate\" (ionSelect)=\"indexSelected()\">\n            <ng-template>\n                <!-- Prevent access messages. Only show the first one. -->\n                <ion-card class=\"core-info-card\" *ngIf=\"lesson && preventReasons.length\">\n                    <ion-item>\n                        <ion-icon name=\"fas-circle-info\" slot=\"start\" aria-hidden=\"true\" />\n                        <ion-label [innerHTML]=\"preventReasons[0].message\" />\n                    </ion-item>\n                </ion-card>\n\n                <!-- Input password for protected lessons. -->\n                <ion-card *ngIf=\"askPassword\">\n                    <form (ngSubmit)=\"submitPassword($event, passwordinput)\" #passwordForm>\n                        <ion-item class=\"ion-text-wrap\">\n                            <ion-label position=\"stacked\">{{ 'addon.mod_lesson.enterpassword' | translate }}</ion-label>\n                            <core-show-password name=\"password\">\n                                <ion-input name=\"password\" type=\"password\" placeholder=\"{{ 'core.login.password' | translate }}\"\n                                    core-auto-focus #passwordinput [clearOnEdit]=\"false\" />\n                            </core-show-password>\n                        </ion-item>\n                        <ion-button expand=\"block\" type=\"submit\">\n                            {{ 'addon.mod_lesson.continue' | translate }}\n                        </ion-button>\n                        <!-- Remove this once Ionic fixes this bug: https://github.com/ionic-team/ionic-framework/issues/19368 -->\n                        <input type=\"submit\" class=\"core-submit-hidden-enter\" />\n                    </form>\n                </ion-card>\n\n                <core-loading [hideUntil]=\"!showSpinner\" *ngIf=\"canViewReports\">\n                    <ion-list *ngIf=\"(lesson && !preventReasons.length) || retakeToReview\">\n                        <ng-container *ngTemplateOutlet=\"buttons\" />\n                    </ion-list>\n                </core-loading>\n            </ng-template>\n        </core-tab>\n\n        <!-- Reports tab. -->\n        <core-tab *ngIf=\"canViewReports\" [title]=\"'addon.mod_lesson.reports' | translate\" (ionSelect)=\"reportsSelected()\">\n            <ng-template>\n                <core-loading [hideUntil]=\"reportLoaded\">\n                    <core-group-selector [groupInfo]=\"groupInfo\" [(selected)]=\"group\" (selectedChange)=\"setGroup(group)\"\n                        [courseId]=\"courseId\" />\n\n                    <!-- No lesson retakes. -->\n                    <core-empty-box *ngIf=\"lesson && !overview && selectedGroupEmptyMessage\" icon=\"fas-chart-bar\">\n                        <core-format-text [text]=\"selectedGroupEmptyMessage\" contextLevel=\"course\" [contextInstanceId]=\"courseId\"\n                            [wsNotFiltered]=\"true\" />\n                    </core-empty-box>\n                    <core-empty-box *ngIf=\"!overview && !selectedGroupEmptyMessage\" icon=\"fas-chart-bar\"\n                        [message]=\"'addon.mod_lesson.nolessonattempts' | translate\" />\n\n                    <!-- General statistics for the current group. -->\n                    <ion-card class=\"addon-mod_lesson-lessonstats\" *ngIf=\"overview\">\n                        <ion-card-header class=\"ion-text-wrap\">\n                            <ion-card-title>{{ 'addon.mod_lesson.lessonstats' | translate }}</ion-card-title>\n                        </ion-card-header>\n\n                        <!-- In tablet, max 2 rows with 3 columns. -->\n                        <ion-grid class=\"ion-text-wrap ion-hide-md-down\">\n                            <ion-row *ngIf=\"overview.lessonscored\">\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.averagescore' | translate }}</p>\n                                    <p *ngIf=\"overview.numofattempts > 0\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.avescore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.numofattempts <= 0\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.highscore' | translate }}</p>\n                                    <p *ngIf=\"overview.highscore !== null\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.highscore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.highscore === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.lowscore' | translate }}</p>\n                                    <p *ngIf=\"overview.lowscore !== null\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.lowscore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.lowscore === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n                            </ion-row>\n                            <ion-row>\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.averagetime' | translate }}</p>\n                                    <p *ngIf=\"overview.avetime !== null && overview.numofattempts\">{{ avetimeReadable }}</p>\n                                    <p *ngIf=\"overview.avetime === null || !overview.numofattempts\">\n                                        {{ 'addon.mod_lesson.notcompleted' | translate }}\n                                    </p>\n                                </ion-col>\n\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.hightime' | translate }}</p>\n                                    <p *ngIf=\"overview.hightime !== null\">{{ hightimeReadable }}</p>\n                                    <p *ngIf=\"overview.hightime === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col class=\"ion-text-center\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.lowtime' | translate }}</p>\n                                    <p *ngIf=\"overview.lowtime !== null\">{{ lowtimeReadable }}</p>\n                                    <p *ngIf=\"overview.lowtime === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n                            </ion-row>\n                        </ion-grid>\n\n                        <!-- In phone, 3 rows with 1 or 2 columns. -->\n                        <ion-grid class=\"ion-text-wrap ion-hide-md-up\">\n                            <ion-row>\n                                <ion-col class=\"ion-text-center\" *ngIf=\"overview.lessonscored\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.averagescore' | translate }}</p>\n                                    <p *ngIf=\"overview.numofattempts > 0\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.avescore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.numofattempts <= 0\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col [ngClass]=\"{'ion-text-center': overview.lessonscored}\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.averagetime' | translate }}</p>\n                                    <p *ngIf=\"overview.avetime !== null && overview.numofattempts\">{{ avetimeReadable }}</p>\n                                    <p *ngIf=\"overview.avetime === null || !overview.numofattempts\">\n                                        {{ 'addon.mod_lesson.notcompleted' | translate }}\n                                    </p>\n                                </ion-col>\n                            </ion-row>\n                            <ion-row>\n                                <ion-col class=\"ion-text-center\" *ngIf=\"overview.lessonscored\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.highscore' | translate }}</p>\n                                    <p *ngIf=\"overview.highscore !== null\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.highscore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.highscore === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col [ngClass]=\"{'ion-text-center': overview.lessonscored}\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.hightime' | translate }}</p>\n                                    <p *ngIf=\"overview.hightime !== null\">{{ hightimeReadable }}</p>\n                                    <p *ngIf=\"overview.hightime === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n                            </ion-row>\n                            <ion-row>\n                                <ion-col class=\"ion-text-center\" *ngIf=\"overview.lessonscored\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.lowscore' | translate }}</p>\n                                    <p *ngIf=\"overview.lowscore !== null\">\n                                        {{ 'core.percentagenumber' | translate:{$a: overview.lowscore} }}\n                                    </p>\n                                    <p *ngIf=\"overview.lowscore === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n\n                                <ion-col [ngClass]=\"{'ion-text-center': overview.lessonscored}\">\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.lowtime' | translate }}</p>\n                                    <p *ngIf=\"overview.lowtime !== null\">{{ lowtimeReadable }}</p>\n                                    <p *ngIf=\"overview.lowtime === null\">{{ 'addon.mod_lesson.notcompleted' | translate }}</p>\n                                </ion-col>\n                            </ion-row>\n                        </ion-grid>\n                    </ion-card>\n\n                    <!-- List of students that have retakes. -->\n                    <ion-card *ngIf=\"overview\">\n                        <ion-card-header class=\"ion-text-wrap\">\n                            <ion-card-title>{{ 'addon.mod_lesson.overview' | translate }}</ion-card-title>\n                        </ion-card-header>\n\n                        <ion-item class=\"ion-text-wrap\" *ngFor=\"let student of overview.students\" button (click)=\"openRetake(student.id)\"\n                            [detail]=\"true\">\n                            <core-user-avatar [user]=\"student\" slot=\"start\" [userId]=\"student.id\" [courseId]=\"courseId\" />\n                            <ion-label>\n                                <p class=\"item-heading\">{{ student.fullname }}</p>\n                                <core-progress-bar [progress]=\"student.bestgrade\" a11yText=\"addon.mod_lesson.grade\" />\n                            </ion-label>\n                        </ion-item>\n                    </ion-card>\n                </core-loading>\n            </ng-template>\n        </core-tab>\n    </core-tabs>\n\n    <div collapsible-footer *ngIf=\"!showLoading\" slot=\"fixed\">\n        <div class=\"list-item-limited-width\" *ngIf=\"!canViewReports && ((lesson && !preventReasons.length) || retakeToReview)\">\n            <ng-container *ngTemplateOutlet=\"buttons\" />\n        </div>\n\n        <core-course-module-navigation [courseId]=\"courseId\" [currentModuleId]=\"module.id\" />\n    </div>\n</core-loading>\n\n\n<ng-template #buttons>\n    <ng-container *ngIf=\"retakeToReview\">\n        <!-- A retake was finished in a synchronization, allow reviewing it. -->\n        <ion-item class=\"ion-text-wrap\">\n            <ion-label class=\"ion-padding-bottom\">\n                {{ 'addon.mod_lesson.retakefinishedinsync' | translate }}\n            </ion-label>\n        </ion-item>\n        <ion-button class=\"ion-text-wrap ion-margin\" expand=\"block\" (click)=\"review()\">\n            {{ 'addon.mod_lesson.review' | translate }}\n        </ion-button>\n    </ng-container>\n\n    <ng-container *ngIf=\"lesson && !preventReasons.length\">\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"leftDuringTimed && !lesson.timelimit && !finishedOffline\">\n            <!-- User left during the session and there is no time limit, ask to continue. -->\n            <ion-label>\n                <p [innerHTML]=\"'addon.mod_lesson.youhaveseen' | translate\"></p>\n                <ion-row>\n                    <ion-col>\n                        <ion-button expand=\"block\" fill=\"outline\" (click)=\"start(false)\">\n                            {{ 'core.no' | translate }}\n                        </ion-button>\n                    </ion-col>\n                    <ion-col>\n                        <ion-button expand=\"block\" (click)=\"start(true)\">\n                            {{ 'core.yes' | translate }}\n                        </ion-button>\n                    </ion-col>\n                </ion-row>\n            </ion-label>\n        </ion-item>\n\n        <ng-container *ngIf=\"leftDuringTimed && lesson.timelimit && lesson.retake && !finishedOffline\">\n            <ion-item class=\"ion-text-wrap\">\n                <!-- User left during the session with time limit and retakes allowed, ask to continue. -->\n                <ion-label [innerHTML]=\"'addon.mod_lesson.leftduringtimed' | translate\" />\n            </ion-item>\n            <ion-button class=\"ion-text-wrap ion-margin\" expand=\"block\" (click)=\"start(false)\">\n                {{ 'addon.mod_lesson.continue' | translate }}\n            </ion-button>\n        </ng-container>\n\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"leftDuringTimed && lesson.timelimit && !lesson.retake\">\n            <!-- User left during the session with time limit and retakes not allowed.\n                This should be handled by preventMessages. -->\n            <ion-label [innerHTML]=\"'addon.mod_lesson.leftduringtimednoretake' | translate\" />\n        </ion-item>\n\n        <ng-container *ngIf=\"!leftDuringTimed && !finishedOffline\">\n            <!-- User hasn't left during the session, show a start button. -->\n            <ion-button class=\"ion-text-wrap ion-margin\" expand=\"block\" *ngIf=\"!canManage\" (click)=\"start(false)\">\n                {{ 'core.start' | translate }}\n            </ion-button>\n            <ion-button class=\"ion-text-wrap ion-margin\" expand=\"block\" fill=\"outline\" *ngIf=\"canManage\" (click)=\"start(false)\">\n                <ion-icon name=\"fas-magnifying-glass\" slot=\"start\" aria-hidden=\"true\" />\n                {{ 'addon.mod_lesson.preview' | translate }}\n            </ion-button>\n        </ng-container>\n\n        <ion-button class=\"ion-text-wrap ion-margin\" *ngIf=\"finishedOffline\" expand=\"block\" (click)=\"start(true)\">\n            <!-- There's an attempt finished in offline. Let the user continue, showing the end of lesson. -->\n            {{ 'addon.mod_lesson.continue' | translate }}\n        </ion-button>\n    </ng-container>\n</ng-template>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}