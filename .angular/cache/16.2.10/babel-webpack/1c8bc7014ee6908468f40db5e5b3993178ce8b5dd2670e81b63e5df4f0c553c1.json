{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { makeSingleton } from '@singletons';\nimport { AddonModAssign } from '../assign';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler for assign push notifications clicks.\n */\nexport class AddonModAssignPushClickHandlerService {\n  constructor() {\n    this.name = 'AddonModAssignPushClickHandler';\n    this.priority = 200;\n    this.featureName = 'CoreCourseModuleDelegate_AddonModAssign';\n  }\n  /**\n   * Check if a notification click is handled by this handler.\n   *\n   * @param notification The notification to check.\n   * @returns Whether the notification click is handled by this handler\n   */\n  handles(notification) {\n    return _asyncToGenerator(function* () {\n      return CoreUtils.isTrueOrOne(notification.notif) && notification.moodlecomponent == 'mod_assign' && notification.name == 'assign_notification';\n    })();\n  }\n  /**\n   * Handle the notification click.\n   *\n   * @param notification The notification to check.\n   * @returns Promise resolved when done.\n   */\n  handleClick(notification) {\n    return _asyncToGenerator(function* () {\n      const contextUrlParams = CoreUrlUtils.extractUrlParams(notification.contexturl);\n      const courseId = Number(notification.courseid);\n      const moduleId = Number(contextUrlParams.id);\n      yield CoreUtils.ignoreErrors(AddonModAssign.invalidateContent(moduleId, courseId, notification.site));\n      yield CoreCourseHelper.navigateToModule(moduleId, {\n        courseId,\n        siteId: notification.site\n      });\n    })();\n  }\n}\n_class = AddonModAssignPushClickHandlerService;\n_class.ɵfac = function AddonModAssignPushClickHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonModAssignPushClickHandler = makeSingleton(AddonModAssignPushClickHandlerService);","map":{"version":3,"names":["CoreCourseHelper","CoreUrlUtils","CoreUtils","makeSingleton","AddonModAssign","AddonModAssignPushClickHandlerService","constructor","name","priority","featureName","handles","notification","_asyncToGenerator","isTrueOrOne","notif","moodlecomponent","handleClick","contextUrlParams","extractUrlParams","contexturl","courseId","Number","courseid","moduleId","id","ignoreErrors","invalidateContent","site","navigateToModule","siteId","factory","ɵfac","providedIn","AddonModAssignPushClickHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/assign/services/handlers/push-click.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CorePushNotificationsClickHandler } from '@features/pushnotifications/services/push-delegate';\nimport { CorePushNotificationsNotificationBasicData } from '@features/pushnotifications/services/pushnotifications';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { makeSingleton } from '@singletons';\nimport { AddonModAssign } from '../assign';\n\n/**\n * Handler for assign push notifications clicks.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonModAssignPushClickHandlerService implements CorePushNotificationsClickHandler {\n\n    name = 'AddonModAssignPushClickHandler';\n    priority = 200;\n    featureName = 'CoreCourseModuleDelegate_AddonModAssign';\n\n    /**\n     * Check if a notification click is handled by this handler.\n     *\n     * @param notification The notification to check.\n     * @returns Whether the notification click is handled by this handler\n     */\n    async handles(notification: NotificationData): Promise<boolean> {\n        return CoreUtils.isTrueOrOne(notification.notif) && notification.moodlecomponent == 'mod_assign' &&\n                notification.name == 'assign_notification';\n    }\n\n    /**\n     * Handle the notification click.\n     *\n     * @param notification The notification to check.\n     * @returns Promise resolved when done.\n     */\n    async handleClick(notification: NotificationData): Promise<void> {\n        const contextUrlParams = CoreUrlUtils.extractUrlParams(notification.contexturl);\n        const courseId = Number(notification.courseid);\n        const moduleId = Number(contextUrlParams.id);\n\n        await CoreUtils.ignoreErrors(AddonModAssign.invalidateContent(moduleId, courseId, notification.site));\n        await CoreCourseHelper.navigateToModule(moduleId, {\n            courseId,\n            siteId: notification.site,\n        });\n    }\n\n}\nexport const AddonModAssignPushClickHandler = makeSingleton(AddonModAssignPushClickHandlerService);\n\ntype NotificationData = CorePushNotificationsNotificationBasicData & {\n    courseid: number;\n    contexturl: string;\n};\n"],"mappings":";;AAeA,SAASA,gBAAgB,QAAQ,yCAAyC;AAG1E,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,cAAc,QAAQ,WAAW;;AAE1C;;;AAIA,OAAM,MAAOC,qCAAqC;EADlDC,YAAA;IAGI,KAAAC,IAAI,GAAG,gCAAgC;IACvC,KAAAC,QAAQ,GAAG,GAAG;IACd,KAAAC,WAAW,GAAG,yCAAyC;;EAEvD;;;;;;EAMMC,OAAOA,CAACC,YAA8B;IAAA,OAAAC,iBAAA;MACxC,OAAOV,SAAS,CAACW,WAAW,CAACF,YAAY,CAACG,KAAK,CAAC,IAAIH,YAAY,CAACI,eAAe,IAAI,YAAY,IACxFJ,YAAY,CAACJ,IAAI,IAAI,qBAAqB;IAAC;EACvD;EAEA;;;;;;EAMMS,WAAWA,CAACL,YAA8B;IAAA,OAAAC,iBAAA;MAC5C,MAAMK,gBAAgB,GAAGhB,YAAY,CAACiB,gBAAgB,CAACP,YAAY,CAACQ,UAAU,CAAC;MAC/E,MAAMC,QAAQ,GAAGC,MAAM,CAACV,YAAY,CAACW,QAAQ,CAAC;MAC9C,MAAMC,QAAQ,GAAGF,MAAM,CAACJ,gBAAgB,CAACO,EAAE,CAAC;MAE5C,MAAMtB,SAAS,CAACuB,YAAY,CAACrB,cAAc,CAACsB,iBAAiB,CAACH,QAAQ,EAAEH,QAAQ,EAAET,YAAY,CAACgB,IAAI,CAAC,CAAC;MACrG,MAAM3B,gBAAgB,CAAC4B,gBAAgB,CAACL,QAAQ,EAAE;QAC9CH,QAAQ;QACRS,MAAM,EAAElB,YAAY,CAACgB;OACxB,CAAC;IAAC;EACP;;SAjCStB,qCAAqC;;mBAArCA,MAAqC;AAAA;;SAArCA,MAAqC;EAAAyB,OAAA,EAArCzB,MAAqC,CAAA0B,IAAA;EAAAC,UAAA,EADxB;AAAM;AAqChC,OAAO,MAAMC,8BAA8B,GAAG9B,aAAa,CAACE,qCAAqC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}