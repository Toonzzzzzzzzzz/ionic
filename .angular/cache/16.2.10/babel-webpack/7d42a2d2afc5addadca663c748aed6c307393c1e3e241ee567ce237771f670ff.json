{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport { AddonMessagesProvider, AddonMessages } from '../../services/messages';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreApp } from '@services/app';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreScreen } from '@services/screen';\nimport { CoreSplitViewComponent } from '@components/split-view/split-view';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/context-menu/context-menu\";\nimport * as i3 from \"../../../../core/components/empty-box/empty-box\";\nimport * as i4 from \"../../../../core/components/infinite-loading/infinite-loading\";\nimport * as i5 from \"../../../../core/components/loading/loading\";\nimport * as i6 from \"../../../../core/components/split-view/split-view\";\nimport * as i7 from \"../../../../core/components/user-avatar/user-avatar\";\nimport * as i8 from \"../../../../core/directives/fa-icon\";\nimport * as i9 from \"../../../../core/directives/format-text\";\nimport * as i10 from \"../../../../core/directives/content\";\nimport * as i11 from \"../../../../core/directives/update-non-reactive-attributes\";\nimport * as i12 from \"@ionic/angular\";\nimport * as i13 from \"../../../../core/features/search/components/search-box/search-box\";\nimport * as i14 from \"../../../../core/pipes/date-day-or-time\";\nimport * as i15 from \"@ngx-translate/core\";\nfunction AddonMessagesSearchPage_ion_list_16_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonMessagesSearchPage_ion_list_16_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonMessagesSearchPage_ion_list_16_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    item: a0\n  };\n};\nfunction AddonMessagesSearchPage_ion_list_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonMessagesSearchPage_ion_list_16_ng_container_1_Template, 1, 0, \"ng-container\", 8);\n    i0.ɵɵtemplate(2, AddonMessagesSearchPage_ion_list_16_ng_container_2_Template, 1, 0, \"ng-container\", 8);\n    i0.ɵɵtemplate(3, AddonMessagesSearchPage_ion_list_16_ng_container_3_Template, 1, 0, \"ng-container\", 8);\n    i0.ɵɵelementStart(4, \"core-infinite-loading\", 9);\n    i0.ɵɵlistener(\"action\", function AddonMessagesSearchPage_ion_list_16_Template_core_infinite_loading_action_4_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.search(ctx_r7.query, \"messages\", $event));\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    const _r2 = i0.ɵɵreference(19);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(8, _c0, ctx_r0.contacts));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(10, _c0, ctx_r0.nonContacts));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", i0.ɵɵpureFunction1(12, _c0, ctx_r0.messages));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"enabled\", ctx_r0.messages.canLoadMore)(\"error\", ctx_r0.messages.loadMoreError);\n  }\n}\nfunction AddonMessagesSearchPage_core_empty_box_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 10);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"core.noresults\"));\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_icon_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 21);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.messages.contactblocked\"));\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_note_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-note\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreDateDayOrTime\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const result_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, result_r13.lastmessagedate), \" \");\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 22);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.messages.you\"), \" \");\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 13);\n    i0.ɵɵlistener(\"click\", function AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r19);\n      const result_r13 = restoredCtx.$implicit;\n      const ctx_r18 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r18.openConversation(result_r13));\n    });\n    i0.ɵɵelement(1, \"core-user-avatar\", 14);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 15);\n    i0.ɵɵelement(4, \"core-format-text\", 16);\n    i0.ɵɵtemplate(5, AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_icon_5_Template, 2, 3, \"ion-icon\", 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_note_6_Template, 3, 3, \"ion-note\", 5);\n    i0.ɵɵelementStart(7, \"p\", 18);\n    i0.ɵɵtemplate(8, AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_span_8_Template, 3, 3, \"span\", 19);\n    i0.ɵɵelement(9, \"core-format-text\", 20);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const result_r13 = ctx.$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵattribute(\"aria-label\", result_r13.fullname)(\"aria-current\", result_r13 === ctx_r11.selectedResult ? \"page\" : \"false\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", result_r13)(\"checkOnline\", true)(\"linkProfile\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", result_r13.fullname)(\"highlight\", result_r13.highlightName)(\"filter\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", result_r13.isblocked);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", result_r13.lastmessagedate > 0);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", result_r13.sentfromcurrentuser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", result_r13.lastmessage)(\"highlight\", result_r13.highlightMessage)(\"contextInstanceId\", 0);\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 25)(1, \"ion-button\", 26);\n    i0.ɵɵlistener(\"click\", function AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_1_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const item_r9 = i0.ɵɵnextContext(3).item;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.search(ctx_r22.query, item_r9.type));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.loadmore\"), \" \");\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 27);\n    i0.ɵɵelement(1, \"ion-spinner\");\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 1, \"core.loading\"));\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_1_Template, 4, 3, \"div\", 23);\n    i0.ɵɵtemplate(2, AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_2_Template, 3, 3, \"div\", 24);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r9 = i0.ɵɵnextContext(2).item;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r9.canLoadMore && !item_r9.loadingMore);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r9.loadingMore);\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item-divider\", 11)(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_Template, 10, 15, \"ion-item\", 12);\n    i0.ɵɵtemplate(7, AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_Template, 3, 2, \"ng-container\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r9 = i0.ɵɵnextContext().item;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 3, item_r9.titleString));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r9.results);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r9.type !== \"messages\");\n  }\n}\nfunction AddonMessagesSearchPage_ng_template_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonMessagesSearchPage_ng_template_18_ng_container_0_Template, 8, 5, \"ng-container\", 5);\n  }\n  if (rf & 2) {\n    const item_r9 = ctx.item;\n    i0.ɵɵproperty(\"ngIf\", item_r9.results.length > 0);\n  }\n}\n/**\n * Page for searching users.\n */\nexport class AddonMessagesSearchPage {\n  constructor() {\n    this.disableSearch = false;\n    this.displaySearching = false;\n    this.displayResults = false;\n    this.query = '';\n    this.contacts = {\n      type: 'contacts',\n      titleString: 'addon.messages.contacts',\n      results: [],\n      canLoadMore: false,\n      loadingMore: false\n    };\n    this.nonContacts = {\n      type: 'noncontacts',\n      titleString: 'addon.messages.noncontacts',\n      results: [],\n      canLoadMore: false,\n      loadingMore: false\n    };\n    this.messages = {\n      type: 'messages',\n      titleString: 'addon.messages.messages',\n      results: [],\n      canLoadMore: false,\n      loadingMore: false,\n      loadMoreError: false\n    };\n    // Update block status of a user.\n    this.memberInfoObserver = CoreEvents.on(AddonMessagesProvider.MEMBER_INFO_CHANGED_EVENT, data => {\n      if (!data.userBlocked && !data.userUnblocked) {\n        // The block status has not changed, ignore.\n        return;\n      }\n      const contact = this.contacts.results.find(user => user.id == data.userId);\n      if (contact) {\n        contact.isblocked = !!data.userBlocked;\n      } else {\n        const nonContact = this.nonContacts.results.find(user => user.id == data.userId);\n        if (nonContact) {\n          nonContact.isblocked = !!data.userBlocked;\n        }\n      }\n      this.messages.results.forEach(message => {\n        if (message.userid == data.userId) {\n          message.isblocked = !!data.userBlocked;\n        }\n      });\n    }, CoreSites.getCurrentSiteId());\n  }\n  /**\n   * Clear search.\n   */\n  clearSearch() {\n    this.query = '';\n    this.displayResults = false;\n    // Empty details.\n    const path = CoreNavigator.getRelativePathToParent('/messages/search');\n    if (path) {\n      CoreNavigator.navigate(path);\n    }\n  }\n  /**\n   * Start a new search or load more results.\n   *\n   * @param query Text to search for.\n   * @param loadMore Load more contacts, noncontacts or messages. If undefined, start a new search.\n   * @param infiniteComplete Infinite scroll complete function. Only used from core-infinite-loading.\n   * @returns Resolved when done.\n   */\n  search(query, loadMore, infiniteComplete) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      CoreApp.closeKeyboard();\n      _this.query = query;\n      _this.disableSearch = true;\n      _this.displaySearching = !loadMore;\n      const promises = [];\n      let newContacts = [];\n      let newNonContacts = [];\n      let newMessages = [];\n      let canLoadMoreContacts = false;\n      let canLoadMoreNonContacts = false;\n      let canLoadMoreMessages = false;\n      if (!loadMore || loadMore == 'contacts' || loadMore == 'noncontacts') {\n        const limitNum = loadMore ? AddonMessagesProvider.LIMIT_SEARCH : AddonMessagesProvider.LIMIT_INITIAL_USER_SEARCH;\n        let limitFrom = 0;\n        if (loadMore == 'contacts') {\n          limitFrom = _this.contacts.results.length;\n          _this.contacts.loadingMore = true;\n        } else if (loadMore == 'noncontacts') {\n          limitFrom = _this.nonContacts.results.length;\n          _this.nonContacts.loadingMore = true;\n        }\n        promises.push(AddonMessages.searchUsers(query, limitFrom, limitNum).then(result => {\n          if (!loadMore || loadMore == 'contacts') {\n            newContacts = result.contacts;\n            canLoadMoreContacts = result.canLoadMoreContacts;\n          }\n          if (!loadMore || loadMore == 'noncontacts') {\n            newNonContacts = result.nonContacts;\n            canLoadMoreNonContacts = result.canLoadMoreNonContacts;\n          }\n          return;\n        }));\n      }\n      if (!loadMore || loadMore == 'messages') {\n        let limitFrom = 0;\n        if (loadMore == 'messages') {\n          limitFrom = _this.messages.results.length;\n          _this.messages.loadingMore = true;\n        }\n        promises.push(AddonMessages.searchMessages(query, undefined, limitFrom).then(result => {\n          newMessages = result.messages;\n          canLoadMoreMessages = result.canLoadMore;\n          return;\n        }));\n      }\n      try {\n        yield Promise.all(promises);\n        if (!loadMore) {\n          _this.contacts.results = [];\n          _this.nonContacts.results = [];\n          _this.messages.results = [];\n        }\n        _this.displayResults = true;\n        if (!loadMore || loadMore == 'contacts') {\n          _this.contacts.results.push(...newContacts);\n          _this.contacts.canLoadMore = canLoadMoreContacts;\n          _this.setHighlight(newContacts, true);\n        }\n        if (!loadMore || loadMore == 'noncontacts') {\n          _this.nonContacts.results.push(...newNonContacts);\n          _this.nonContacts.canLoadMore = canLoadMoreNonContacts;\n          _this.setHighlight(newNonContacts, true);\n        }\n        if (!loadMore || loadMore == 'messages') {\n          _this.messages.results.push(...newMessages);\n          _this.messages.canLoadMore = canLoadMoreMessages;\n          _this.messages.loadMoreError = false;\n          _this.setHighlight(newMessages, false);\n        }\n        if (!loadMore) {\n          if (_this.contacts.results.length > 0) {\n            _this.openConversation(_this.contacts.results[0], true);\n          } else if (_this.nonContacts.results.length > 0) {\n            _this.openConversation(_this.nonContacts.results[0], true);\n          } else if (_this.messages.results.length > 0) {\n            _this.openConversation(_this.messages.results[0], true);\n          }\n        }\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'addon.messages.errorwhileretrievingusers', true);\n        if (loadMore == 'messages') {\n          _this.messages.loadMoreError = true;\n        }\n      } finally {\n        _this.disableSearch = false;\n        _this.displaySearching = false;\n        if (loadMore == 'contacts') {\n          _this.contacts.loadingMore = false;\n        } else if (loadMore == 'noncontacts') {\n          _this.nonContacts.loadingMore = false;\n        } else if (loadMore == 'messages') {\n          _this.messages.loadingMore = false;\n        }\n        infiniteComplete && infiniteComplete();\n      }\n    })();\n  }\n  /**\n   * Open a conversation in the split view.\n   *\n   * @param result User or message.\n   * @param onInit Whether the tser was selected on initial load.\n   */\n  openConversation(result, onInit = false) {\n    if (!onInit || CoreScreen.isTablet) {\n      this.selectedResult = result;\n      let conversationId;\n      let userId;\n      if ('conversationid' in result) {\n        conversationId = result.conversationid;\n      } else {\n        userId = result.id;\n      }\n      const path = CoreNavigator.getRelativePathToParent('/messages/search') + 'discussion/' + (conversationId ? conversationId : `user/${userId}`);\n      CoreNavigator.navigate(path, {\n        reset: CoreScreen.isTablet && !!this.splitView && !this.splitView.isNested\n      });\n    }\n  }\n  /**\n   * Set the highlight values for each entry.\n   *\n   * @param results Results to highlight.\n   * @param isUser Whether the results are from a user search or from a message search.\n   */\n  setHighlight(results, isUser = false) {\n    results.forEach(result => {\n      result.highlightName = isUser ? this.query : undefined;\n      result.highlightMessage = !isUser ? this.query : undefined;\n    });\n  }\n  /**\n   * Component destroyed.\n   */\n  ngOnDestroy() {\n    var _this$memberInfoObser;\n    (_this$memberInfoObser = this.memberInfoObserver) === null || _this$memberInfoObser === void 0 || _this$memberInfoObser.off();\n  }\n}\n_class = AddonMessagesSearchPage;\n_class.ɵfac = function AddonMessagesSearchPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-messages-search\"]],\n  viewQuery: function AddonMessagesSearchPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreSplitViewComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.splitView = _t.first);\n    }\n  },\n  decls: 20,\n  vars: 16,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"autocorrect\", \"off\", \"searchArea\", \"AddonMessagesSearch\", 3, \"disabled\", \"spellcheck\", \"autoFocus\", \"lengthCheck\", \"onSubmit\", \"onClear\"], [3, \"hideUntil\", \"message\"], [4, \"ngIf\"], [\"icon\", \"fas-magnifying-glass\", 3, \"message\", 4, \"ngIf\"], [\"resultsTemplate\", \"\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"enabled\", \"error\", \"action\"], [\"icon\", \"fas-magnifying-glass\", 3, \"message\"], [1, \"ion-text-wrap\"], [\"class\", \"addon-message-discussion ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"addon-message-discussion\", \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"start\", 3, \"user\", \"checkOnline\", \"linkProfile\"], [1, \"item-heading\"], [3, \"text\", \"highlight\", \"filter\"], [\"name\", \"fas-ban\", 4, \"ngIf\"], [1, \"addon-message-last-message\"], [\"class\", \"addon-message-last-message-user\", 4, \"ngIf\"], [\"clean\", \"true\", \"singleLine\", \"true\", \"contextLevel\", \"system\", 1, \"addon-message-last-message-text\", 3, \"text\", \"highlight\", \"contextInstanceId\"], [\"name\", \"fas-ban\"], [1, \"addon-message-last-message-user\"], [\"class\", \"ion-padding-horizontal\", 4, \"ngIf\"], [\"class\", \"ion-padding ion-text-center\", 4, \"ngIf\"], [1, \"ion-padding-horizontal\"], [\"expand\", \"block\", \"fill\", \"outline\", 3, \"click\"], [1, \"ion-padding\", \"ion-text-center\"]],\n  template: function AddonMessagesSearchPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"ion-buttons\", 2);\n      i0.ɵɵelement(10, \"core-context-menu\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"ion-content\")(12, \"core-split-view\")(13, \"core-search-box\", 3);\n      i0.ɵɵlistener(\"onSubmit\", function AddonMessagesSearchPage_Template_core_search_box_onSubmit_13_listener($event) {\n        return ctx.search($event);\n      })(\"onClear\", function AddonMessagesSearchPage_Template_core_search_box_onClear_13_listener() {\n        return ctx.clearSearch();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"core-loading\", 4);\n      i0.ɵɵpipe(15, \"translate\");\n      i0.ɵɵtemplate(16, AddonMessagesSearchPage_ion_list_16_Template, 5, 14, \"ion-list\", 5);\n      i0.ɵɵtemplate(17, AddonMessagesSearchPage_core_empty_box_17_Template, 2, 3, \"core-empty-box\", 6);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(18, AddonMessagesSearchPage_ng_template_18_Template, 1, 1, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 10, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 12, \"addon.messages.searchcombined\"));\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"disabled\", ctx.disableSearch)(\"spellcheck\", false)(\"autoFocus\", true)(\"lengthCheck\", 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.displaySearching)(\"message\", i0.ɵɵpipeBind1(15, 14, \"core.searching\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayResults);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayResults && !ctx.contacts.results.length && !ctx.nonContacts.results.length && !ctx.messages.results.length);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i1.NgTemplateOutlet, i2.CoreContextMenuComponent, i3.CoreEmptyBoxComponent, i4.CoreInfiniteLoadingComponent, i5.CoreLoadingComponent, i6.CoreSplitViewComponent, i7.CoreUserAvatarComponent, i8.CoreFaIconDirective, i9.CoreFormatTextDirective, i10.CoreContentDirective, i11.CoreUpdateNonReactiveAttributesDirective, i12.IonButton, i12.IonButtons, i12.IonContent, i12.IonHeader, i12.IonIcon, i12.IonItem, i12.IonItemDivider, i12.IonLabel, i12.IonList, i12.IonNote, i12.IonSpinner, i12.IonTitle, i12.IonToolbar, i12.IonBackButton, i13.CoreSearchBoxComponent, i14.CoreDateDayOrTimePipe, i15.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreEvents","CoreSites","AddonMessagesProvider","AddonMessages","CoreDomUtils","CoreApp","CoreNavigator","CoreScreen","CoreSplitViewComponent","i0","ɵɵelementContainer","ɵɵelementStart","ɵɵtemplate","AddonMessagesSearchPage_ion_list_16_ng_container_1_Template","AddonMessagesSearchPage_ion_list_16_ng_container_2_Template","AddonMessagesSearchPage_ion_list_16_ng_container_3_Template","ɵɵlistener","AddonMessagesSearchPage_ion_list_16_Template_core_infinite_loading_action_4_listener","$event","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","search","query","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","_r2","ɵɵpureFunction1","_c0","ctx_r0","contacts","nonContacts","messages","canLoadMore","loadMoreError","ɵɵelement","ɵɵpipeBind1","ɵɵattribute","ɵɵtext","ɵɵtextInterpolate1","result_r13","lastmessagedate","AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_Template_ion_item_click_0_listener","restoredCtx","_r19","$implicit","ctx_r18","openConversation","AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_icon_5_Template","AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_ion_note_6_Template","AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_span_8_Template","fullname","ctx_r11","selectedResult","highlightName","isblocked","sentfromcurrentuser","lastmessage","highlightMessage","AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_1_Template_ion_button_click_1_listener","_r23","item_r9","item","ctx_r22","type","ɵɵelementContainerStart","AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_1_Template","AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_div_2_Template","ɵɵelementContainerEnd","loadingMore","AddonMessagesSearchPage_ng_template_18_ng_container_0_ion_item_6_Template","AddonMessagesSearchPage_ng_template_18_ng_container_0_ng_container_7_Template","ɵɵtextInterpolate","titleString","results","AddonMessagesSearchPage_ng_template_18_ng_container_0_Template","length","AddonMessagesSearchPage","constructor","disableSearch","displaySearching","displayResults","memberInfoObserver","on","MEMBER_INFO_CHANGED_EVENT","data","userBlocked","userUnblocked","contact","find","user","id","userId","nonContact","forEach","message","userid","getCurrentSiteId","clearSearch","path","getRelativePathToParent","navigate","loadMore","infiniteComplete","_this","_asyncToGenerator","closeKeyboard","promises","newContacts","newNonContacts","newMessages","canLoadMoreContacts","canLoadMoreNonContacts","canLoadMoreMessages","limitNum","LIMIT_SEARCH","LIMIT_INITIAL_USER_SEARCH","limitFrom","push","searchUsers","then","result","searchMessages","undefined","Promise","all","setHighlight","error","showErrorModalDefault","onInit","isTablet","conversationId","conversationid","reset","splitView","isNested","isUser","ngOnDestroy","_this$memberInfoObser","off","selectors","viewQuery","AddonMessagesSearchPage_Query","rf","ctx","AddonMessagesSearchPage_Template_core_search_box_onSubmit_13_listener","AddonMessagesSearchPage_Template_core_search_box_onClear_13_listener","AddonMessagesSearchPage_ion_list_16_Template","AddonMessagesSearchPage_core_empty_box_17_Template","AddonMessagesSearchPage_ng_template_18_Template","ɵɵtemplateRefExtractor"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/messages/pages/search/search.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/messages/pages/search/search.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, ViewChild } from '@angular/core';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport {\n    AddonMessagesProvider,\n    AddonMessagesConversationMember,\n    AddonMessagesMessageAreaContact,\n    AddonMessages,\n} from '../../services/messages';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreApp } from '@services/app';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreScreen } from '@services/screen';\nimport { CoreSplitViewComponent } from '@components/split-view/split-view';\n\n/**\n * Page for searching users.\n */\n@Component({\n    selector: 'page-addon-messages-search',\n    templateUrl: 'search.html',\n})\nexport class AddonMessagesSearchPage implements OnDestroy {\n\n    @ViewChild(CoreSplitViewComponent) splitView!: CoreSplitViewComponent;\n\n    disableSearch = false;\n    displaySearching = false;\n    displayResults = false;\n    query = '';\n    contacts: AddonMessagesSearchResults = {\n        type: 'contacts',\n        titleString: 'addon.messages.contacts',\n        results: [],\n        canLoadMore: false,\n        loadingMore: false,\n    };\n\n    nonContacts: AddonMessagesSearchResults = {\n        type: 'noncontacts',\n        titleString: 'addon.messages.noncontacts',\n        results: [],\n        canLoadMore: false,\n        loadingMore: false,\n    };\n\n    messages: AddonMessagesSearchMessageResults = {\n        type: 'messages',\n        titleString: 'addon.messages.messages',\n        results: [],\n        canLoadMore: false,\n        loadingMore: false,\n        loadMoreError: false,\n    };\n\n    selectedResult?: AddonMessagesConversationMember | AddonMessagesMessageAreaContact;\n\n    protected memberInfoObserver: CoreEventObserver;\n\n    constructor() {\n        // Update block status of a user.\n        this.memberInfoObserver = CoreEvents.on(\n            AddonMessagesProvider.MEMBER_INFO_CHANGED_EVENT,\n            (data) => {\n                if (!data.userBlocked && !data.userUnblocked) {\n                    // The block status has not changed, ignore.\n                    return;\n                }\n\n                const contact = this.contacts.results.find((user) => user.id == data.userId);\n                if (contact) {\n                    contact.isblocked = !!data.userBlocked;\n                } else {\n                    const nonContact = this.nonContacts.results.find((user) => user.id == data.userId);\n                    if (nonContact) {\n                        nonContact.isblocked = !!data.userBlocked;\n                    }\n                }\n\n                this.messages.results.forEach((message: AddonMessagesMessageAreaContact): void => {\n                    if (message.userid == data.userId) {\n                        message.isblocked = !!data.userBlocked;\n                    }\n                });\n            },\n            CoreSites.getCurrentSiteId(),\n        );\n    }\n\n    /**\n     * Clear search.\n     */\n    clearSearch(): void {\n        this.query = '';\n        this.displayResults = false;\n\n        // Empty details.\n        const path = CoreNavigator.getRelativePathToParent('/messages/search');\n        if (path) {\n            CoreNavigator.navigate(path);\n        }\n    }\n\n    /**\n     * Start a new search or load more results.\n     *\n     * @param query Text to search for.\n     * @param loadMore Load more contacts, noncontacts or messages. If undefined, start a new search.\n     * @param infiniteComplete Infinite scroll complete function. Only used from core-infinite-loading.\n     * @returns Resolved when done.\n     */\n    async search(query: string, loadMore?: 'contacts' | 'noncontacts' | 'messages', infiniteComplete?: () => void): Promise<void> {\n        CoreApp.closeKeyboard();\n\n        this.query = query;\n        this.disableSearch = true;\n        this.displaySearching = !loadMore;\n\n        const promises: Promise<void>[] = [];\n        let newContacts: AddonMessagesConversationMember[] = [];\n        let newNonContacts: AddonMessagesConversationMember[] = [];\n        let newMessages: AddonMessagesMessageAreaContact[] = [];\n        let canLoadMoreContacts = false;\n        let canLoadMoreNonContacts = false;\n        let canLoadMoreMessages = false;\n\n        if (!loadMore || loadMore == 'contacts' || loadMore == 'noncontacts') {\n            const limitNum = loadMore ? AddonMessagesProvider.LIMIT_SEARCH : AddonMessagesProvider.LIMIT_INITIAL_USER_SEARCH;\n            let limitFrom = 0;\n            if (loadMore == 'contacts') {\n                limitFrom = this.contacts.results.length;\n                this.contacts.loadingMore = true;\n            } else if (loadMore == 'noncontacts') {\n                limitFrom = this.nonContacts.results.length;\n                this.nonContacts.loadingMore = true;\n            }\n\n            promises.push(\n                AddonMessages.searchUsers(query, limitFrom, limitNum).then((result) => {\n                    if (!loadMore || loadMore == 'contacts') {\n                        newContacts = result.contacts;\n                        canLoadMoreContacts = result.canLoadMoreContacts;\n                    }\n                    if (!loadMore || loadMore == 'noncontacts') {\n                        newNonContacts = result.nonContacts;\n                        canLoadMoreNonContacts = result.canLoadMoreNonContacts;\n                    }\n\n                    return;\n                }),\n            );\n        }\n\n        if (!loadMore || loadMore == 'messages') {\n            let limitFrom = 0;\n            if (loadMore == 'messages') {\n                limitFrom = this.messages.results.length;\n                this.messages.loadingMore = true;\n            }\n\n            promises.push(\n                AddonMessages.searchMessages(query, undefined, limitFrom).then((result) => {\n                    newMessages = result.messages;\n                    canLoadMoreMessages = result.canLoadMore;\n\n                    return;\n                }),\n            );\n        }\n\n        try {\n            await Promise.all(promises);\n            if (!loadMore) {\n                this.contacts.results = [];\n                this.nonContacts.results = [];\n                this.messages.results = [];\n            }\n\n            this.displayResults = true;\n\n            if (!loadMore || loadMore == 'contacts') {\n                this.contacts.results.push(...newContacts);\n                this.contacts.canLoadMore = canLoadMoreContacts;\n                this.setHighlight(newContacts, true);\n            }\n\n            if (!loadMore || loadMore == 'noncontacts') {\n                this.nonContacts.results.push(...newNonContacts);\n                this.nonContacts.canLoadMore = canLoadMoreNonContacts;\n                this.setHighlight(newNonContacts, true);\n            }\n\n            if (!loadMore || loadMore == 'messages') {\n                this.messages.results.push(...newMessages);\n                this.messages.canLoadMore = canLoadMoreMessages;\n                this.messages.loadMoreError = false;\n                this.setHighlight(newMessages, false);\n            }\n\n            if (!loadMore) {\n                if (this.contacts.results.length > 0) {\n                    this.openConversation(this.contacts.results[0], true);\n                } else if (this.nonContacts.results.length > 0) {\n                    this.openConversation(this.nonContacts.results[0], true);\n                } else if (this.messages.results.length > 0) {\n                    this.openConversation(this.messages.results[0], true);\n                }\n            }\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'addon.messages.errorwhileretrievingusers', true);\n\n            if (loadMore == 'messages') {\n                this.messages.loadMoreError = true;\n            }\n        } finally {\n            this.disableSearch = false;\n            this.displaySearching = false;\n\n            if (loadMore == 'contacts') {\n                this.contacts.loadingMore = false;\n            } else if (loadMore == 'noncontacts') {\n                this.nonContacts.loadingMore = false;\n            } else if (loadMore == 'messages') {\n                this.messages.loadingMore = false;\n            }\n\n            infiniteComplete && infiniteComplete();\n        }\n    }\n\n    /**\n     * Open a conversation in the split view.\n     *\n     * @param result User or message.\n     * @param onInit Whether the tser was selected on initial load.\n     */\n    openConversation(result: AddonMessagesConversationMember | AddonMessagesMessageAreaContact, onInit: boolean = false): void {\n        if (!onInit || CoreScreen.isTablet) {\n            this.selectedResult = result;\n\n            let conversationId: number | undefined;\n            let userId: number | undefined;\n            if ('conversationid' in result) {\n                conversationId = result.conversationid;\n            } else {\n                userId = result.id;\n            }\n\n            const path = CoreNavigator.getRelativePathToParent('/messages/search') + 'discussion/' +\n                (conversationId ? conversationId : `user/${userId}`);\n\n            CoreNavigator.navigate(path, {\n                reset: CoreScreen.isTablet && !!this.splitView && !this.splitView.isNested,\n            });\n        }\n    }\n\n    /**\n     * Set the highlight values for each entry.\n     *\n     * @param results Results to highlight.\n     * @param isUser Whether the results are from a user search or from a message search.\n     */\n    setHighlight(\n        results: (AddonMessagesConversationMemberWithHighlight | AddonMessagesMessageAreaContactWithHighlight)[],\n        isUser = false,\n    ): void {\n        results.forEach((result) => {\n            result.highlightName = isUser ? this.query : undefined;\n            result.highlightMessage = !isUser ? this.query : undefined;\n        });\n    }\n\n    /**\n     * Component destroyed.\n     */\n    ngOnDestroy(): void {\n        this.memberInfoObserver?.off();\n    }\n\n}\n\ntype AddonMessagesSearchResults = {\n    type: string;\n    titleString: string;\n    results: AddonMessagesConversationMemberWithHighlight[];\n    canLoadMore: boolean;\n    loadingMore: boolean;\n};\n\ntype AddonMessagesSearchMessageResults = {\n    type: string;\n    titleString: string;\n    results: AddonMessagesMessageAreaContactWithHighlight[];\n    canLoadMore: boolean;\n    loadingMore: boolean;\n    loadMoreError: boolean;\n};\n\ntype AddonMessagesSearchResultHighlight = {\n    highlightName?: string;\n    highlightMessage?: string;\n};\n\ntype AddonMessagesConversationMemberWithHighlight = AddonMessagesConversationMember & AddonMessagesSearchResultHighlight;\ntype AddonMessagesMessageAreaContactWithHighlight = AddonMessagesMessageAreaContact & AddonMessagesSearchResultHighlight;\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>{{ 'addon.messages.searchcombined' | translate }}</h1>\n        </ion-title>\n        <ion-buttons slot=\"end\">\n            <!-- Add an empty context menu so split view pages can add items, otherwise the menu disappears in some cases. -->\n            <core-context-menu />\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <core-split-view>\n        <core-search-box (onSubmit)=\"search($event)\" (onClear)=\"clearSearch()\" [disabled]=\"disableSearch\" autocorrect=\"off\"\n            [spellcheck]=\"false\" [autoFocus]=\"true\" [lengthCheck]=\"1\" searchArea=\"AddonMessagesSearch\" />\n\n        <core-loading [hideUntil]=\"!displaySearching\" [message]=\"'core.searching' | translate\">\n            <ion-list *ngIf=\"displayResults\">\n                <ng-container *ngTemplateOutlet=\"resultsTemplate; context: {item: contacts}\" />\n                <ng-container *ngTemplateOutlet=\"resultsTemplate; context: {item: nonContacts}\" />\n                <ng-container *ngTemplateOutlet=\"resultsTemplate; context: {item: messages}\" />\n                <!-- The infinite loading cannot be inside the ng-template, it fails because it doesn't find ion-content. -->\n                <core-infinite-loading [enabled]=\"messages.canLoadMore\" (action)=\"search(query, 'messages', $event)\"\n                    [error]=\"messages.loadMoreError\" />\n            </ion-list>\n\n            <core-empty-box *ngIf=\"displayResults && !contacts.results.length && !nonContacts.results.length && !messages.results.length\"\n                icon=\"fas-magnifying-glass\" [message]=\"'core.noresults' | translate\" />\n        </core-loading>\n    </core-split-view>\n</ion-content>\n\n<!-- Template to render a list of results -->\n<ng-template #resultsTemplate let-item=\"item\">\n    <ng-container *ngIf=\"item.results.length > 0\">\n        <ion-item-divider class=\"ion-text-wrap\">\n            <ion-label>\n                <h2>{{ item.titleString | translate }}</h2>\n            </ion-label>\n        </ion-item-divider>\n\n        <!-- List of results -->\n        <ion-item class=\"addon-message-discussion ion-text-wrap\" *ngFor=\"let result of item.results\" [attr.aria-label]=\"result.fullname\"\n            (click)=\"openConversation(result)\" [attr.aria-current]=\"result === selectedResult ? 'page' : 'false'\" [detail]=\"true\" button>\n            <core-user-avatar slot=\"start\" [user]=\"result\" [checkOnline]=\"true\" [linkProfile]=\"false\" />\n            <ion-label>\n                <p class=\"item-heading\">\n                    <core-format-text [text]=\"result.fullname\" [highlight]=\"result.highlightName\" [filter]=\"false\" />\n                    <ion-icon name=\"fas-ban\" *ngIf=\"result.isblocked\" [attr.aria-label]=\"'addon.messages.contactblocked' | translate\" />\n                </p>\n                <ion-note *ngIf=\"result.lastmessagedate > 0\">\n                    {{result.lastmessagedate | coreDateDayOrTime}}\n                </ion-note>\n                <p class=\"addon-message-last-message\">\n                    <span *ngIf=\"result.sentfromcurrentuser\" class=\"addon-message-last-message-user\">\n                        {{ 'addon.messages.you' | translate }}\n                    </span>\n                    <core-format-text clean=\"true\" singleLine=\"true\" [text]=\"result.lastmessage\" [highlight]=\"result.highlightMessage\"\n                        contextLevel=\"system\" [contextInstanceId]=\"0\" class=\"addon-message-last-message-text\" />\n                </p>\n            </ion-label>\n        </ion-item>\n\n        <!-- Load more button for contacts and non-contacts -->\n        <ng-container *ngIf=\"item.type !== 'messages'\">\n            <div class=\"ion-padding-horizontal\" *ngIf=\"item.canLoadMore && !item.loadingMore\">\n                <ion-button expand=\"block\" fill=\"outline\" (click)=\"search(query, item.type)\">\n                    {{ 'core.loadmore' | translate }}\n                </ion-button>\n            </div>\n            <div *ngIf=\"item.loadingMore\" class=\"ion-padding ion-text-center\">\n                <ion-spinner [attr.aria-label]=\"'core.loading' | translate\" />\n            </div>\n        </ng-container>\n    </ng-container>\n</ng-template>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}