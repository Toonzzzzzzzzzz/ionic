{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { AddonCourseCompletion } from '@addons/coursecompletion/services/coursecompletion';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { Translate } from '@singletons';\nimport { CoreTime } from '@singletons/time';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/loading/loading\";\nimport * as i3 from \"../../../../core/components/user-avatar/user-avatar\";\nimport * as i4 from \"../../../../core/directives/fa-icon\";\nimport * as i5 from \"../../../../core/directives/format-text\";\nimport * as i6 from \"../../../../core/directives/content\";\nimport * as i7 from \"../../../../core/directives/update-non-reactive-attributes\";\nimport * as i8 from \"@ionic/angular\";\nimport * as i9 from \"../../../../core/pipes/format-date\";\nimport * as i10 from \"@ngx-translate/core\";\nfunction AddonCourseCompletionReportPage_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8);\n    i0.ɵɵelement(1, \"core-user-avatar\", 9);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", ctx_r0.user)(\"courseId\", ctx_r0.courseId)(\"linkProfile\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.user.fullname);\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_15_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.coursecompletion.criteriarequiredall\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_15_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.coursecompletion.criteriarequiredany\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\")(3, \"p\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(9, \"ion-item\", 8)(10, \"ion-label\")(11, \"p\", 10);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(14, AddonCourseCompletionReportPage_ion_card_15_p_14_Template, 3, 3, \"p\", 6);\n    i0.ɵɵtemplate(15, AddonCourseCompletionReportPage_ion_card_15_p_15_Template, 3, 3, \"p\", 6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, \"addon.coursecompletion.status\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 7, ctx_r1.statusText));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 9, \"addon.coursecompletion.required\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.completion.aggregation === 1);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.completion.aggregation === 2);\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.yes\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.no\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 14)(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵelement(3, \"core-format-text\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵelement(5, \"core-format-text\", 15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(6, AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_6_Template, 3, 3, \"strong\", 16);\n    i0.ɵɵtemplate(7, AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_7_Template, 3, 3, \"strong\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const criteria_r9 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", criteria_r9.details.criteria)(\"filter\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", criteria_r9.details.requirement)(\"filter\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", criteria_r9.complete);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !criteria_r9.complete);\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.yes\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.no\"));\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-col\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreFormatDate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const criteria_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, criteria_r12.timecompleted * 1000, \"strftimedatetimeshort\"), \" \");\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-col\");\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_ion_row_34_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\")(1, \"ion-col\");\n    i0.ɵɵelement(2, \"core-format-text\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-col\");\n    i0.ɵɵelement(4, \"core-format-text\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-col\");\n    i0.ɵɵelement(6, \"core-format-text\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"ion-col\");\n    i0.ɵɵelement(8, \"core-format-text\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_9_Template, 3, 3, \"ion-col\", 6);\n    i0.ɵɵtemplate(10, AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_10_Template, 3, 3, \"ion-col\", 6);\n    i0.ɵɵtemplate(11, AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_11_Template, 3, 4, \"ion-col\", 6);\n    i0.ɵɵtemplate(12, AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_12_Template, 1, 0, \"ion-col\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const criteria_r12 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", criteria_r12.details.type)(\"filter\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", criteria_r12.details.criteria)(\"filter\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", criteria_r12.details.requirement)(\"filter\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", criteria_r12.details.status)(\"filter\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", criteria_r12.complete);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !criteria_r12.complete);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", criteria_r12.timecompleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !criteria_r12.timecompleted);\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\")(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonCourseCompletionReportPage_ion_card_16_ion_item_6_Template, 8, 6, \"ion-item\", 11);\n    i0.ɵɵelementStart(7, \"ion-item\", 12)(8, \"ion-label\")(9, \"ion-row\")(10, \"ion-col\")(11, \"strong\");\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"ion-col\")(15, \"strong\");\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"ion-col\")(19, \"strong\");\n    i0.ɵɵtext(20);\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(22, \"ion-col\")(23, \"strong\");\n    i0.ɵɵtext(24);\n    i0.ɵɵpipe(25, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"ion-col\")(27, \"strong\");\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"ion-col\")(31, \"strong\");\n    i0.ɵɵtext(32);\n    i0.ɵɵpipe(33, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(34, AddonCourseCompletionReportPage_ion_card_16_ion_row_34_Template, 13, 12, \"ion-row\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 9, \"addon.coursecompletion.requiredcriteria\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.completion.completions);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 11, \"addon.coursecompletion.criteriagroup\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 13, \"addon.coursecompletion.criteria\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(21, 15, \"addon.coursecompletion.requirement\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 17, \"addon.coursecompletion.status\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(29, 19, \"addon.coursecompletion.complete\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(33, 21, \"addon.coursecompletion.completiondate\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.completion.completions);\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_17_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item-divider\")(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"ion-item\")(7, \"ion-label\")(8, \"ion-button\", 19);\n    i0.ɵɵlistener(\"click\", function AddonCourseCompletionReportPage_ion_card_17_Template_ion_button_click_8_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r18.completeCourse());\n    });\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 2, \"addon.coursecompletion.manualselfcompletion\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 4, \"addon.coursecompletion.completecourse\"), \" \");\n  }\n}\nfunction AddonCourseCompletionReportPage_ion_card_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 20)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 21);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.coursecompletion.nottracked\"));\n  }\n}\n/**\n * Page that displays the course completion report.\n */\nexport class AddonCourseCompletionReportPage {\n  constructor() {\n    this.completionLoaded = false;\n    this.showSelfComplete = false;\n    this.tracked = true; // Whether completion is tracked.\n    this.logView = CoreTime.once(() => {\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'core_completion_get_course_completion_status',\n        name: Translate.instant('addon.coursecompletion.coursecompletion'),\n        data: {\n          course: this.courseId,\n          user: this.userId\n        },\n        url: `/blocks/completionstatus/details.php?course=${this.courseId}&user=${this.userId}`\n      });\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    try {\n      this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n      this.userId = CoreNavigator.getRouteNumberParam('userId') || CoreSites.getCurrentSiteUserId();\n    } catch (error) {\n      CoreDomUtils.showErrorModal(error);\n      CoreNavigator.back();\n      return;\n    }\n    this.fetchCompletion().finally(() => {\n      this.completionLoaded = true;\n    });\n  }\n  /**\n   * Fetch compleiton data.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchCompletion() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.user = yield CoreUser.getProfile(_this.userId, _this.courseId, true);\n        _this.completion = yield AddonCourseCompletion.getCompletion(_this.courseId, _this.userId);\n        _this.statusText = AddonCourseCompletion.getCompletedStatusText(_this.completion);\n        _this.showSelfComplete = AddonCourseCompletion.canMarkSelfCompleted(_this.userId, _this.completion);\n        _this.tracked = true;\n        _this.logView();\n      } catch (error) {\n        if (error && error.errorcode == 'notenroled') {\n          // Not enrolled error, probably a teacher.\n          _this.tracked = false;\n        } else {\n          CoreDomUtils.showErrorModalDefault(error, 'addon.coursecompletion.couldnotloadreport', true);\n        }\n      }\n    })();\n  }\n  /**\n   * Refresh completion data on PTR.\n   *\n   * @param refresher Refresher instance.\n   */\n  refreshCompletion(refresher) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield AddonCourseCompletion.invalidateCourseCompletion(_this2.courseId, _this2.userId).finally(() => {\n        _this2.fetchCompletion().finally(() => {\n          refresher === null || refresher === void 0 || refresher.complete();\n        });\n      });\n    })();\n  }\n  /**\n   * Mark course as completed.\n   */\n  completeCourse() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const modal = yield CoreDomUtils.showModalLoading('core.sending', true);\n      try {\n        yield AddonCourseCompletion.markCourseAsSelfCompleted(_this3.courseId);\n        yield _this3.refreshCompletion();\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n      } finally {\n        modal.dismiss();\n      }\n    })();\n  }\n}\n_class = AddonCourseCompletionReportPage;\n_class.ɵfac = function AddonCourseCompletionReportPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-course-completion-report\"]],\n  decls: 19,\n  vars: 16,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [1, \"ion-text-wrap\"], [\"slot\", \"start\", 3, \"user\", \"courseId\", \"linkProfile\"], [1, \"item-heading\"], [\"class\", \"ion-hide-md-up ion-text-wrap\", 4, \"ngFor\", \"ngForOf\"], [1, \"ion-hide-md-down\", \"ion-text-wrap\"], [4, \"ngFor\", \"ngForOf\"], [1, \"ion-hide-md-up\", \"ion-text-wrap\"], [\"clean\", \"true\", 3, \"text\", \"filter\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"end\"], [3, \"text\", \"filter\"], [\"expand\", \"block\", 3, \"click\"], [1, \"core-warning-card\"], [\"name\", \"fas-triangle-exclamation\", \"slot\", \"start\", \"aria-hidden\", \"true\"]],\n  template: function AddonCourseCompletionReportPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"ion-content\")(10, \"ion-refresher\", 2);\n      i0.ɵɵlistener(\"ionRefresh\", function AddonCourseCompletionReportPage_Template_ion_refresher_ionRefresh_10_listener($event) {\n        return ctx.refreshCompletion($event.target);\n      });\n      i0.ɵɵelement(11, \"ion-refresher-content\", 3);\n      i0.ɵɵpipe(12, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"core-loading\", 4);\n      i0.ɵɵtemplate(14, AddonCourseCompletionReportPage_ion_item_14_Template, 5, 4, \"ion-item\", 5);\n      i0.ɵɵtemplate(15, AddonCourseCompletionReportPage_ion_card_15_Template, 16, 11, \"ion-card\", 6);\n      i0.ɵɵtemplate(16, AddonCourseCompletionReportPage_ion_card_16_Template, 35, 23, \"ion-card\", 6);\n      i0.ɵɵtemplate(17, AddonCourseCompletionReportPage_ion_card_17_Template, 11, 6, \"ion-card\", 6);\n      i0.ɵɵtemplate(18, AddonCourseCompletionReportPage_ion_card_18_Template, 6, 3, \"ion-card\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 10, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 12, \"addon.coursecompletion.coursecompletion\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.completionLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(12, 14, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.completionLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.completion && ctx.tracked);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.completion && ctx.tracked);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showSelfComplete && ctx.tracked);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.tracked);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreLoadingComponent, i3.CoreUserAvatarComponent, i4.CoreFaIconDirective, i5.CoreFormatTextDirective, i6.CoreContentDirective, i7.CoreUpdateNonReactiveAttributesDirective, i8.IonButton, i8.IonButtons, i8.IonCard, i8.IonCol, i8.IonContent, i8.IonHeader, i8.IonIcon, i8.IonItem, i8.IonItemDivider, i8.IonLabel, i8.IonRefresher, i8.IonRefresherContent, i8.IonRow, i8.IonTitle, i8.IonToolbar, i8.IonBackButton, i9.CoreFormatDatePipe, i10.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["AddonCourseCompletion","CoreUser","CoreAnalytics","CoreAnalyticsEventType","CoreNavigator","CoreSites","CoreDomUtils","Translate","CoreTime","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","user","courseId","ɵɵtextInterpolate","fullname","ɵɵpipeBind1","ɵɵtemplate","AddonCourseCompletionReportPage_ion_card_15_p_14_Template","AddonCourseCompletionReportPage_ion_card_15_p_15_Template","ctx_r1","statusText","completion","aggregation","AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_6_Template","AddonCourseCompletionReportPage_ion_card_16_ion_item_6_strong_7_Template","criteria_r9","details","criteria","requirement","complete","ɵɵtextInterpolate1","ɵɵpipeBind2","criteria_r12","timecompleted","AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_9_Template","AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_10_Template","AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_11_Template","AddonCourseCompletionReportPage_ion_card_16_ion_row_34_ion_col_12_Template","type","status","AddonCourseCompletionReportPage_ion_card_16_ion_item_6_Template","AddonCourseCompletionReportPage_ion_card_16_ion_row_34_Template","ctx_r2","completions","ɵɵlistener","AddonCourseCompletionReportPage_ion_card_17_Template_ion_button_click_8_listener","ɵɵrestoreView","_r19","ctx_r18","ɵɵnextContext","ɵɵresetView","completeCourse","AddonCourseCompletionReportPage","constructor","completionLoaded","showSelfComplete","tracked","logView","once","logEvent","VIEW_ITEM","ws","name","instant","data","course","userId","url","ngOnInit","getRequiredRouteNumberParam","getRouteNumberParam","getCurrentSiteUserId","error","showErrorModal","back","fetchCompletion","finally","_this","_asyncToGenerator","getProfile","getCompletion","getCompletedStatusText","canMarkSelfCompleted","errorcode","showErrorModalDefault","refreshCompletion","refresher","_this2","invalidateCourseCompletion","_this3","modal","showModalLoading","markCourseAsSelfCompleted","dismiss","selectors","decls","vars","consts","template","AddonCourseCompletionReportPage_Template","rf","ctx","AddonCourseCompletionReportPage_Template_ion_refresher_ionRefresh_10_listener","$event","target","AddonCourseCompletionReportPage_ion_item_14_Template","AddonCourseCompletionReportPage_ion_card_15_Template","AddonCourseCompletionReportPage_ion_card_16_Template","AddonCourseCompletionReportPage_ion_card_17_Template","AddonCourseCompletionReportPage_ion_card_18_Template","ɵɵpropertyInterpolate"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/coursecompletion/pages/report/report.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/coursecompletion/pages/report/report.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n    AddonCourseCompletion,\n    AddonCourseCompletionCourseCompletionStatus,\n} from '@addons/coursecompletion/services/coursecompletion';\nimport { Component, OnInit } from '@angular/core';\nimport { CoreUser, CoreUserProfile } from '@features/user/services/user';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { Translate } from '@singletons';\nimport { CoreTime } from '@singletons/time';\n\n/**\n * Page that displays the course completion report.\n */\n@Component({\n    selector: 'page-addon-course-completion-report',\n    templateUrl: 'report.html',\n})\nexport class AddonCourseCompletionReportPage implements OnInit {\n\n    protected userId!: number;\n    protected logView: () => void;\n\n    courseId!: number;\n    completionLoaded = false;\n    completion?: AddonCourseCompletionCourseCompletionStatus;\n    showSelfComplete = false;\n    tracked = true; // Whether completion is tracked.\n    statusText?: string;\n    user?: CoreUserProfile;\n\n    constructor() {\n        this.logView = CoreTime.once(() => {\n            CoreAnalytics.logEvent({\n                type: CoreAnalyticsEventType.VIEW_ITEM,\n                ws: 'core_completion_get_course_completion_status',\n                name: Translate.instant('addon.coursecompletion.coursecompletion'),\n                data: {\n                    course: this.courseId,\n                    user: this.userId,\n                },\n                url: `/blocks/completionstatus/details.php?course=${this.courseId}&user=${this.userId}`,\n            });\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnInit(): void {\n        try {\n            this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n            this.userId = CoreNavigator.getRouteNumberParam('userId') || CoreSites.getCurrentSiteUserId();\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        this.fetchCompletion().finally(() => {\n            this.completionLoaded = true;\n        });\n    }\n\n    /**\n     * Fetch compleiton data.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchCompletion(): Promise<void> {\n        try {\n            this.user = await CoreUser.getProfile(this.userId, this.courseId, true);\n\n            this.completion = await AddonCourseCompletion.getCompletion(this.courseId, this.userId);\n\n            this.statusText = AddonCourseCompletion.getCompletedStatusText(this.completion);\n            this.showSelfComplete = AddonCourseCompletion.canMarkSelfCompleted(this.userId, this.completion);\n\n            this.tracked = true;\n            this.logView();\n        } catch (error) {\n            if (error && error.errorcode == 'notenroled') {\n                // Not enrolled error, probably a teacher.\n                this.tracked = false;\n            } else {\n                CoreDomUtils.showErrorModalDefault(error, 'addon.coursecompletion.couldnotloadreport', true);\n            }\n        }\n    }\n\n    /**\n     * Refresh completion data on PTR.\n     *\n     * @param refresher Refresher instance.\n     */\n    async refreshCompletion(refresher?: HTMLIonRefresherElement): Promise<void> {\n        await AddonCourseCompletion.invalidateCourseCompletion(this.courseId, this.userId).finally(() => {\n            this.fetchCompletion().finally(() => {\n                refresher?.complete();\n            });\n        });\n    }\n\n    /**\n     * Mark course as completed.\n     */\n    async completeCourse(): Promise<void> {\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        try {\n            await AddonCourseCompletion.markCourseAsSelfCompleted(this.courseId);\n\n            await this.refreshCompletion();\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>{{ 'addon.coursecompletion.coursecompletion' | translate }}</h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <ion-refresher slot=\"fixed\" [disabled]=\"!completionLoaded\" (ionRefresh)=\"refreshCompletion($event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n    <core-loading [hideUntil]=\"completionLoaded\">\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"user\">\n            <core-user-avatar [user]=\"user\" [courseId]=\"courseId\" slot=\"start\" [linkProfile]=\"false\" />\n            <ion-label>\n                <p class=\"item-heading\">{{user.fullname}}</p>\n            </ion-label>\n        </ion-item>\n\n        <ion-card *ngIf=\"completion && tracked\">\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.coursecompletion.status' | translate }}</p>\n                    <p>{{ statusText! | translate }}</p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.coursecompletion.required' | translate }}</p>\n                    <p *ngIf=\"completion.aggregation === 1\">{{ 'addon.coursecompletion.criteriarequiredall' | translate }}</p>\n                    <p *ngIf=\"completion.aggregation === 2\">{{ 'addon.coursecompletion.criteriarequiredany' | translate }}</p>\n                </ion-label>\n            </ion-item>\n        </ion-card>\n        <ion-card *ngIf=\"completion && tracked\">\n            <ion-item-divider>\n                <ion-label>\n                    <h2>{{ 'addon.coursecompletion.requiredcriteria' | translate }}</h2>\n                </ion-label>\n            </ion-item-divider>\n            <ion-item class=\"ion-hide-md-up ion-text-wrap\" *ngFor=\"let criteria of completion.completions\">\n                <ion-label>\n                    <p class=\"item-heading\">\n                        <core-format-text clean=\"true\" [text]=\"criteria.details.criteria\" [filter]=\"false\" />\n                    </p>\n                    <p>\n                        <core-format-text clean=\"true\" [text]=\"criteria.details.requirement\" [filter]=\"false\" />\n                    </p>\n                </ion-label>\n                <strong slot=\"end\" *ngIf=\"criteria.complete\">{{ 'core.yes' | translate }}</strong>\n                <strong slot=\"end\" *ngIf=\"!criteria.complete\">{{ 'core.no' | translate }}</strong>\n            </ion-item>\n            <ion-item class=\"ion-hide-md-down ion-text-wrap\">\n                <ion-label>\n                    <ion-row>\n                        <ion-col><strong>{{ 'addon.coursecompletion.criteriagroup' | translate }}</strong></ion-col>\n                        <ion-col><strong>{{ 'addon.coursecompletion.criteria' | translate }}</strong></ion-col>\n                        <ion-col><strong>{{ 'addon.coursecompletion.requirement' | translate }}</strong></ion-col>\n                        <ion-col><strong>{{ 'addon.coursecompletion.status' | translate }}</strong></ion-col>\n                        <ion-col><strong>{{ 'addon.coursecompletion.complete' | translate }}</strong></ion-col>\n                        <ion-col><strong>{{ 'addon.coursecompletion.completiondate' | translate }}</strong></ion-col>\n                    </ion-row>\n                    <ion-row *ngFor=\"let criteria of completion.completions\">\n                        <ion-col>\n                            <core-format-text clean=\"true\" [text]=\"criteria.details.type\" [filter]=\"false\" />\n                        </ion-col>\n                        <ion-col>\n                            <core-format-text clean=\"true\" [text]=\"criteria.details.criteria\" [filter]=\"false\" />\n                        </ion-col>\n                        <ion-col>\n                            <core-format-text clean=\"true\" [text]=\"criteria.details.requirement\" [filter]=\"false\" />\n                        </ion-col>\n                        <ion-col>\n                            <core-format-text [text]=\"criteria.details.status\" [filter]=\"false\" />\n                        </ion-col>\n                        <ion-col *ngIf=\"criteria.complete\">{{ 'core.yes' | translate }}</ion-col>\n                        <ion-col *ngIf=\"!criteria.complete\">{{ 'core.no' | translate }}</ion-col>\n                        <ion-col *ngIf=\"criteria.timecompleted\">\n                            {{ criteria.timecompleted * 1000 | coreFormatDate :'strftimedatetimeshort' }}\n                        </ion-col>\n                        <ion-col *ngIf=\"!criteria.timecompleted\" />\n                    </ion-row>\n                </ion-label>\n            </ion-item>\n        </ion-card>\n        <ion-card *ngIf=\"showSelfComplete && tracked\">\n            <ion-item-divider>\n                <ion-label>\n                    <h2>{{ 'addon.coursecompletion.manualselfcompletion' | translate }}</h2>\n                </ion-label>\n            </ion-item-divider>\n            <ion-item>\n                <ion-label>\n                    <ion-button expand=\"block\" (click)=\"completeCourse()\">\n                        {{ 'addon.coursecompletion.completecourse' | translate }}\n                    </ion-button>\n                </ion-label>\n            </ion-item>\n        </ion-card>\n\n        <ion-card class=\"core-warning-card\" *ngIf=\"!tracked\">\n            <ion-item>\n                <ion-icon name=\"fas-triangle-exclamation\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>{{ 'addon.coursecompletion.nottracked' | translate }}</ion-label>\n            </ion-item>\n        </ion-card>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}