{"ast":null,"code":"// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nexport class CoreAriaRoleTab {\n  constructor(componentInstance) {\n    this.componentInstance = componentInstance;\n  }\n  /**\n   * A11y key functionality that prevents keyDown events.\n   *\n   * @param tabFindIndex Tab findable index.\n   * @param e Event.\n   */\n  keyDown(tabFindIndex, e) {\n    if (e.key === ' ' || e.key === 'Enter' || e.key === 'Home' || e.key === 'End' || this.isHorizontal() && (e.key === 'ArrowRight' || e.key === 'ArrowLeft') || !this.isHorizontal() && (e.key === 'ArrowUp' || e.key === 'ArrowDown')) {\n      e.preventDefault();\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n    }\n    if (e.key === ' ' || e.key === 'Enter') {\n      this.selectTabCandidate = tabFindIndex;\n    }\n  }\n  /**\n   * A11y key functionality.\n   *\n   * Enter or Space: When a tab has focus, activates the tab, causing its associated panel to be displayed.\n   * Right Arrow: When a tab has focus: Moves focus to the next tab. If focus is on the last tab, moves focus to the first tab.\n   * Left Arrow: When a tab has focus: Moves focus to the previous tab. If focus is on the first tab, moves focus to the last tab.\n   * Home: When a tab has focus, moves focus to the first tab.\n   * End: When a tab has focus, moves focus to the last tab.\n   * https://www.w3.org/TR/wai-aria-practices-1.1/examples/tabs/tabs-2/tabs.html\n   *\n   * @param tabFindIndex Tab findable index.\n   * @param e Event.\n   */\n  keyUp(tabFindIndex, e) {\n    e.preventDefault();\n    e.stopPropagation();\n    e.stopImmediatePropagation();\n    if (e.key === ' ' || e.key === 'Enter') {\n      if (this.selectTabCandidate === tabFindIndex) {\n        this.selectTab(tabFindIndex, e);\n      }\n      this.selectTabCandidate = undefined;\n      return;\n    }\n    const tabs = this.getSelectableTabs();\n    let index = tabs.findIndex(tab => tabFindIndex == tab.findIndex);\n    const previousKey = this.isHorizontal() ? 'ArrowLeft' : 'ArrowUp';\n    const nextKey = this.isHorizontal() ? 'ArrowRight' : 'ArrowDown';\n    switch (e.key) {\n      case nextKey:\n        index++;\n        if (index >= tabs.length) {\n          index = 0;\n        }\n        break;\n      case 'Home':\n        index = 0;\n        break;\n      case previousKey:\n        index--;\n        if (index < 0) {\n          index = tabs.length - 1;\n        }\n        break;\n      case 'End':\n        index = tabs.length - 1;\n        break;\n      default:\n        return;\n    }\n    const tabId = tabs[index].id;\n    // @todo Pages should match aria-controls id.\n    const tabElement = document.querySelector(`ion-tab-button[aria-controls=${tabId}]`);\n    tabElement === null || tabElement === void 0 || tabElement.focus();\n  }\n  /**\n   * Selects the tab.\n   *\n   * @param tabId Tab identifier.\n   * @param e Event.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  selectTab(tabId, e) {\n    //\n  }\n  /**\n   * Return all the selectable tabs.\n   *\n   * @returns all the selectable tabs.\n   */\n  getSelectableTabs() {\n    return [];\n  }\n  /**\n   * Returns if tabs are displayed horizontal or not.\n   *\n   * @returns Where the tabs are displayed horizontal.\n   */\n  isHorizontal() {\n    return true;\n  }\n}","map":{"version":3,"names":["CoreAriaRoleTab","constructor","componentInstance","keyDown","tabFindIndex","e","key","isHorizontal","preventDefault","stopPropagation","stopImmediatePropagation","selectTabCandidate","keyUp","selectTab","undefined","tabs","getSelectableTabs","index","findIndex","tab","previousKey","nextKey","length","tabId","id","tabElement","document","querySelector","focus"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/classes/aria-role-tab.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nexport class CoreAriaRoleTab<T = unknown> {\n\n    componentInstance: T;\n\n    protected selectTabCandidate?: string;\n\n    constructor(componentInstance: T) {\n        this.componentInstance = componentInstance;\n    }\n\n    /**\n     * A11y key functionality that prevents keyDown events.\n     *\n     * @param tabFindIndex Tab findable index.\n     * @param e Event.\n     */\n    keyDown(tabFindIndex: string, e: KeyboardEvent): void {\n        if (e.key === ' ' ||\n            e.key === 'Enter' ||\n            e.key === 'Home' ||\n            e.key === 'End' ||\n            (this.isHorizontal() && (e.key === 'ArrowRight' || e.key === 'ArrowLeft')) ||\n            (!this.isHorizontal() && (e.key === 'ArrowUp' ||e.key === 'ArrowDown'))\n        ) {\n            e.preventDefault();\n            e.stopPropagation();\n            e.stopImmediatePropagation();\n        }\n\n        if (e.key === ' ' || e.key === 'Enter') {\n            this.selectTabCandidate = tabFindIndex;\n        }\n    }\n\n    /**\n     * A11y key functionality.\n     *\n     * Enter or Space: When a tab has focus, activates the tab, causing its associated panel to be displayed.\n     * Right Arrow: When a tab has focus: Moves focus to the next tab. If focus is on the last tab, moves focus to the first tab.\n     * Left Arrow: When a tab has focus: Moves focus to the previous tab. If focus is on the first tab, moves focus to the last tab.\n     * Home: When a tab has focus, moves focus to the first tab.\n     * End: When a tab has focus, moves focus to the last tab.\n     * https://www.w3.org/TR/wai-aria-practices-1.1/examples/tabs/tabs-2/tabs.html\n     *\n     * @param tabFindIndex Tab findable index.\n     * @param e Event.\n     */\n    keyUp(tabFindIndex: string, e: KeyboardEvent): void {\n        e.preventDefault();\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n\n        if (e.key === ' ' || e.key === 'Enter') {\n            if (this.selectTabCandidate === tabFindIndex) {\n                this.selectTab(tabFindIndex, e);\n            }\n\n            this.selectTabCandidate = undefined;\n\n            return;\n        }\n\n        const tabs = this.getSelectableTabs();\n\n        let index = tabs.findIndex((tab) => tabFindIndex == tab.findIndex);\n\n        const previousKey = this.isHorizontal() ? 'ArrowLeft' : 'ArrowUp';\n        const nextKey = this.isHorizontal() ? 'ArrowRight' : 'ArrowDown';\n\n        switch (e.key) {\n            case nextKey:\n                index++;\n                if (index >= tabs.length) {\n                    index = 0;\n                }\n                break;\n            case 'Home':\n                index = 0;\n                break;\n            case previousKey:\n                index--;\n                if (index < 0) {\n                    index = tabs.length - 1;\n                }\n                break;\n            case 'End':\n                index = tabs.length - 1;\n                break;\n            default:\n                return;\n        }\n\n        const tabId = tabs[index].id;\n\n        // @todo Pages should match aria-controls id.\n        const tabElement = document.querySelector<HTMLIonTabButtonElement>(`ion-tab-button[aria-controls=${tabId}]`);\n\n        tabElement?.focus();\n    }\n\n    /**\n     * Selects the tab.\n     *\n     * @param tabId Tab identifier.\n     * @param e Event.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    selectTab(tabId: string, e: Event): void {\n        //\n    }\n\n    /**\n     * Return all the selectable tabs.\n     *\n     * @returns all the selectable tabs.\n     */\n    getSelectableTabs(): CoreAriaRoleTabFindable[] {\n        return [];\n    }\n\n    /**\n     * Returns if tabs are displayed horizontal or not.\n     *\n     * @returns Where the tabs are displayed horizontal.\n     */\n    isHorizontal(): boolean {\n        return true;\n    }\n\n}\n\nexport type CoreAriaRoleTabFindable = {\n    id: string;\n    findIndex: string;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}