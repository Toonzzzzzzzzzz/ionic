{"ast":null,"code":"/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n  if (!condition) {\n    throw new TypeError(format(message, args));\n  }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n  let i = 0;\n  return message.replace(/%[os]/g, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n  if (typeof x !== \"object\" || x === null) {\n    return String(x);\n  }\n  return Object.prototype.toString.call(x);\n}\nlet currentErrorHandler;\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n  try {\n    const error = maybeError instanceof Error ? maybeError : new Error(anyToString(maybeError));\n    // Call the user-defined error handler if exists.\n    if (currentErrorHandler) ;\n    // Dispatch an `error` event if this is on a browser.\n    if (typeof dispatchEvent === \"function\" && typeof ErrorEvent === \"function\") {\n      dispatchEvent(new ErrorEvent(\"error\", {\n        error,\n        message: error.message\n      }));\n    }\n    // Emit an `uncaughtException` event if this is on Node.js.\n    //istanbul ignore else\n    else if (typeof process !== \"undefined\" && typeof process.emit === \"function\") {\n      process.emit(\"uncaughtException\", error);\n      return;\n    }\n    // Otherwise, print the error.\n    console.error(error);\n  } catch (_a) {\n    // ignore.\n  }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\" ? window : typeof self !== \"undefined\" ? self : typeof global !== \"undefined\" ? global : typeof globalThis !== \"undefined\" ? globalThis : undefined;\nlet currentWarnHandler;\n/**\n * The warning information.\n */\nclass Warning {\n  constructor(code, message) {\n    this.code = code;\n    this.message = message;\n  }\n  /**\n   * Report this warning.\n   * @param args The arguments of the warning.\n   */\n  warn(...args) {\n    var _a;\n    try {\n      // Call the user-defined warning handler if exists.\n      if (currentWarnHandler) ;\n      // Otherwise, print the warning.\n      const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:(?:[\\0-\\t\\x0B\\f\\x0E-\\u2027\\u202A-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+?\\n){2}/g, \"\\n\");\n      console.warn(this.message, ...args, stack);\n    } catch (_b) {\n      // Ignore.\n    }\n  }\n}\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event$1 {\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-none\n   */\n  static get NONE() {\n    return NONE;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n   */\n  static get CAPTURING_PHASE() {\n    return CAPTURING_PHASE;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-at_target\n   */\n  static get AT_TARGET() {\n    return AT_TARGET;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n   */\n  static get BUBBLING_PHASE() {\n    return BUBBLING_PHASE;\n  }\n  /**\n   * Initialize this event instance.\n   * @param type The type of this event.\n   * @param eventInitDict Options to initialize.\n   * @see https://dom.spec.whatwg.org/#dom-event-event\n   */\n  constructor(type, eventInitDict) {\n    Object.defineProperty(this, \"isTrusted\", {\n      value: false,\n      enumerable: true\n    });\n    const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n    internalDataMap.set(this, {\n      type: String(type),\n      bubbles: Boolean(opts.bubbles),\n      cancelable: Boolean(opts.cancelable),\n      composed: Boolean(opts.composed),\n      target: null,\n      currentTarget: null,\n      stopPropagationFlag: false,\n      stopImmediatePropagationFlag: false,\n      canceledFlag: false,\n      inPassiveListenerFlag: false,\n      dispatchFlag: false,\n      timeStamp: Date.now()\n    });\n  }\n  /**\n   * The type of this event.\n   * @see https://dom.spec.whatwg.org/#dom-event-type\n   */\n  get type() {\n    return $(this).type;\n  }\n  /**\n   * The event target of the current dispatching.\n   * @see https://dom.spec.whatwg.org/#dom-event-target\n   */\n  get target() {\n    return $(this).target;\n  }\n  /**\n   * The event target of the current dispatching.\n   * @deprecated Use the `target` property instead.\n   * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n   */\n  get srcElement() {\n    return $(this).target;\n  }\n  /**\n   * The event target of the current dispatching.\n   * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n   */\n  get currentTarget() {\n    return $(this).currentTarget;\n  }\n  /**\n   * The event target of the current dispatching.\n   * This doesn't support node tree.\n   * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n   */\n  composedPath() {\n    const currentTarget = $(this).currentTarget;\n    if (currentTarget) {\n      return [currentTarget];\n    }\n    return [];\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-none\n   */\n  get NONE() {\n    return NONE;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n   */\n  get CAPTURING_PHASE() {\n    return CAPTURING_PHASE;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-at_target\n   */\n  get AT_TARGET() {\n    return AT_TARGET;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n   */\n  get BUBBLING_PHASE() {\n    return BUBBLING_PHASE;\n  }\n  /**\n   * The current event phase.\n   * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n   */\n  get eventPhase() {\n    return $(this).dispatchFlag ? 2 : 0;\n  }\n  /**\n   * Stop event bubbling.\n   * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n   * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n   */\n  stopPropagation() {\n    $(this).stopPropagationFlag = true;\n  }\n  /**\n   * `true` if event bubbling was stopped.\n   * @deprecated\n   * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n   */\n  get cancelBubble() {\n    return $(this).stopPropagationFlag;\n  }\n  /**\n   * Stop event bubbling if `true` is set.\n   * @deprecated Use the `stopPropagation()` method instead.\n   * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n   */\n  set cancelBubble(value) {\n    if (value) {\n      $(this).stopPropagationFlag = true;\n    } else {\n      FalsyWasAssignedToCancelBubble.warn();\n    }\n  }\n  /**\n   * Stop event bubbling and subsequent event listener callings.\n   * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n   */\n  stopImmediatePropagation() {\n    const data = $(this);\n    data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n  }\n  /**\n   * `true` if this event will bubble.\n   * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n   */\n  get bubbles() {\n    return $(this).bubbles;\n  }\n  /**\n   * `true` if this event can be canceled by the `preventDefault()` method.\n   * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n   */\n  get cancelable() {\n    return $(this).cancelable;\n  }\n  /**\n   * `true` if the default behavior will act.\n   * @deprecated Use the `defaultPrevented` proeprty instead.\n   * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n   */\n  get returnValue() {\n    return !$(this).canceledFlag;\n  }\n  /**\n   * Cancel the default behavior if `false` is set.\n   * @deprecated Use the `preventDefault()` method instead.\n   * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n   */\n  set returnValue(value) {\n    if (!value) {\n      setCancelFlag($(this));\n    } else {\n      TruthyWasAssignedToReturnValue.warn();\n    }\n  }\n  /**\n   * Cancel the default behavior.\n   * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n   */\n  preventDefault() {\n    setCancelFlag($(this));\n  }\n  /**\n   * `true` if the default behavior was canceled.\n   * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n   */\n  get defaultPrevented() {\n    return $(this).canceledFlag;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-composed\n   */\n  get composed() {\n    return $(this).composed;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n   */\n  //istanbul ignore next\n  get isTrusted() {\n    return false;\n  }\n  /**\n   * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n   */\n  get timeStamp() {\n    return $(this).timeStamp;\n  }\n  /**\n   * @deprecated Don't use this method. The constructor did initialization.\n   */\n  initEvent(type, bubbles = false, cancelable = false) {\n    const data = $(this);\n    if (data.dispatchFlag) {\n      InitEventWasCalledWhileDispatching.warn();\n      return;\n    }\n    internalDataMap.set(this, Object.assign({}, data, {\n      type: String(type),\n      bubbles: Boolean(bubbles),\n      cancelable: Boolean(cancelable),\n      target: null,\n      currentTarget: null,\n      stopPropagationFlag: false,\n      stopImmediatePropagationFlag: false,\n      canceledFlag: false\n    }));\n  }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n  const retv = internalDataMap.get(event);\n  assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n  return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n  if (data.inPassiveListenerFlag) {\n    CanceledInPassiveListener.warn();\n    return;\n  }\n  if (!data.cancelable) {\n    NonCancelableEventWasCanceled.warn();\n    return;\n  }\n  data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event$1, \"NONE\", {\n  enumerable: true\n});\nObject.defineProperty(Event$1, \"CAPTURING_PHASE\", {\n  enumerable: true\n});\nObject.defineProperty(Event$1, \"AT_TARGET\", {\n  enumerable: true\n});\nObject.defineProperty(Event$1, \"BUBBLING_PHASE\", {\n  enumerable: true\n});\nconst keys = Object.getOwnPropertyNames(Event$1.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n  if (keys[i] === \"constructor\") {\n    continue;\n  }\n  Object.defineProperty(Event$1.prototype, keys[i], {\n    enumerable: true\n  });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n  Object.setPrototypeOf(Event$1.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n  if (Global.DOMException) {\n    return new Global.DOMException(message, \"InvalidStateError\");\n  }\n  if (DOMException == null) {\n    DOMException = class DOMException extends Error {\n      constructor(msg) {\n        super(msg);\n        if (Error.captureStackTrace) {\n          Error.captureStackTrace(this, DOMException);\n        }\n      }\n      // eslint-disable-next-line class-methods-use-this\n      get code() {\n        return 11;\n      }\n      // eslint-disable-next-line class-methods-use-this\n      get name() {\n        return \"InvalidStateError\";\n      }\n    };\n    Object.defineProperties(DOMException.prototype, {\n      code: {\n        enumerable: true\n      },\n      name: {\n        enumerable: true\n      }\n    });\n    defineErrorCodeProperties(DOMException);\n    defineErrorCodeProperties(DOMException.prototype);\n  }\n  return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n  INDEX_SIZE_ERR: 1,\n  DOMSTRING_SIZE_ERR: 2,\n  HIERARCHY_REQUEST_ERR: 3,\n  WRONG_DOCUMENT_ERR: 4,\n  INVALID_CHARACTER_ERR: 5,\n  NO_DATA_ALLOWED_ERR: 6,\n  NO_MODIFICATION_ALLOWED_ERR: 7,\n  NOT_FOUND_ERR: 8,\n  NOT_SUPPORTED_ERR: 9,\n  INUSE_ATTRIBUTE_ERR: 10,\n  INVALID_STATE_ERR: 11,\n  SYNTAX_ERR: 12,\n  INVALID_MODIFICATION_ERR: 13,\n  NAMESPACE_ERR: 14,\n  INVALID_ACCESS_ERR: 15,\n  VALIDATION_ERR: 16,\n  TYPE_MISMATCH_ERR: 17,\n  SECURITY_ERR: 18,\n  NETWORK_ERR: 19,\n  ABORT_ERR: 20,\n  URL_MISMATCH_ERR: 21,\n  QUOTA_EXCEEDED_ERR: 22,\n  TIMEOUT_ERR: 23,\n  INVALID_NODE_TYPE_ERR: 24,\n  DATA_CLONE_ERR: 25\n};\nfunction defineErrorCodeProperties(obj) {\n  const keys = Object.keys(ErrorCodeMap);\n  for (let i = 0; i < keys.length; ++i) {\n    const key = keys[i];\n    const value = ErrorCodeMap[key];\n    Object.defineProperty(obj, key, {\n      get() {\n        return value;\n      },\n      configurable: true,\n      enumerable: true\n    });\n  }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event$1 {\n  /**\n   * Wrap a given event object to control states.\n   * @param event The event-like object to wrap.\n   */\n  static wrap(event) {\n    return new (getWrapperClassOf(event))(event);\n  }\n  constructor(event) {\n    super(event.type, {\n      bubbles: event.bubbles,\n      cancelable: event.cancelable,\n      composed: event.composed\n    });\n    if (event.cancelBubble) {\n      super.stopPropagation();\n    }\n    if (event.defaultPrevented) {\n      super.preventDefault();\n    }\n    internalDataMap$1.set(this, {\n      original: event\n    });\n    // Define accessors\n    const keys = Object.keys(event);\n    for (let i = 0; i < keys.length; ++i) {\n      const key = keys[i];\n      if (!(key in this)) {\n        Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n      }\n    }\n  }\n  stopPropagation() {\n    super.stopPropagation();\n    const {\n      original\n    } = $$1(this);\n    if (\"stopPropagation\" in original) {\n      original.stopPropagation();\n    }\n  }\n  get cancelBubble() {\n    return super.cancelBubble;\n  }\n  set cancelBubble(value) {\n    super.cancelBubble = value;\n    const {\n      original\n    } = $$1(this);\n    if (\"cancelBubble\" in original) {\n      original.cancelBubble = value;\n    }\n  }\n  stopImmediatePropagation() {\n    super.stopImmediatePropagation();\n    const {\n      original\n    } = $$1(this);\n    if (\"stopImmediatePropagation\" in original) {\n      original.stopImmediatePropagation();\n    }\n  }\n  get returnValue() {\n    return super.returnValue;\n  }\n  set returnValue(value) {\n    super.returnValue = value;\n    const {\n      original\n    } = $$1(this);\n    if (\"returnValue\" in original) {\n      original.returnValue = value;\n    }\n  }\n  preventDefault() {\n    super.preventDefault();\n    const {\n      original\n    } = $$1(this);\n    if (\"preventDefault\" in original) {\n      original.preventDefault();\n    }\n  }\n  get timeStamp() {\n    const {\n      original\n    } = $$1(this);\n    if (\"timeStamp\" in original) {\n      return original.timeStamp;\n    }\n    return super.timeStamp;\n  }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n  const retv = internalDataMap$1.get(event);\n  assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n  return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n  wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n  const prototype = Object.getPrototypeOf(originalEvent);\n  if (prototype == null) {\n    return EventWrapper;\n  }\n  let wrapper = wrapperClassCache.get(prototype);\n  if (wrapper == null) {\n    wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n    wrapperClassCache.set(prototype, wrapper);\n  }\n  return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n  class CustomEventWrapper extends BaseEventWrapper {}\n  const keys = Object.keys(originalPrototype);\n  for (let i = 0; i < keys.length; ++i) {\n    Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n  }\n  return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n  const d = Object.getOwnPropertyDescriptor(obj, key);\n  return {\n    get() {\n      const original = $$1(this).original;\n      const value = original[key];\n      if (typeof value === \"function\") {\n        return value.bind(original);\n      }\n      return value;\n    },\n    set(value) {\n      const original = $$1(this).original;\n      original[key] = value;\n    },\n    configurable: d.configurable,\n    enumerable: d.enumerable\n  };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n  return {\n    callback,\n    flags: (capture ? 1 /* Capture */ : 0) | (passive ? 2 /* Passive */ : 0) | (once ? 4 /* Once */ : 0),\n    signal,\n    signalListener\n  };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n  listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n  return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n  return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n  return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n  return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({\n  callback\n}, target, event) {\n  try {\n    if (typeof callback === \"function\") {\n      callback.call(target, event);\n    } else if (typeof callback.handleEvent === \"function\") {\n      callback.handleEvent(event);\n    }\n  } catch (thrownError) {\n    reportError(thrownError);\n  }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({\n  listeners\n}, callback, capture) {\n  for (let i = 0; i < listeners.length; ++i) {\n    if (listeners[i].callback === callback && isCapture(listeners[i]) === capture) {\n      return i;\n    }\n  }\n  return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n  let signalListener;\n  if (signal) {\n    signalListener = removeListener.bind(null, list, callback, capture);\n    signal.addEventListener(\"abort\", signalListener);\n  }\n  const listener = createListener(callback, capture, passive, once, signal, signalListener);\n  if (list.cow) {\n    list.cow = false;\n    list.listeners = [...list.listeners, listener];\n  } else {\n    list.listeners.push(listener);\n  }\n  return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n  const index = findIndexOfListener(list, callback, capture);\n  if (index !== -1) {\n    return removeListenerAt(list, index);\n  }\n  return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n  const listener = list.listeners[index];\n  // Set the removed flag.\n  setRemoved(listener);\n  // Dispose the abort signal listener if exists.\n  if (listener.signal) {\n    listener.signal.removeEventListener(\"abort\", listener.signalListener);\n  }\n  // Remove it from the array.\n  if (list.cow && !disableCow) {\n    list.cow = false;\n    list.listeners = list.listeners.filter((_, i) => i !== index);\n    return false;\n  }\n  list.listeners.splice(index, 1);\n  return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n  return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n  var _a;\n  return (_a = listenerMap[type]) !== null && _a !== void 0 ? _a : listenerMap[type] = {\n    attrCallback: undefined,\n    attrListener: undefined,\n    cow: false,\n    listeners: []\n  };\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n  /**\n   * Initialize this instance.\n   */\n  constructor() {\n    internalDataMap$2.set(this, createListenerListMap());\n  }\n  // Implementation\n  addEventListener(type0, callback0, options0) {\n    const listenerMap = $$2(this);\n    const {\n      callback,\n      capture,\n      once,\n      passive,\n      signal,\n      type\n    } = normalizeAddOptions(type0, callback0, options0);\n    if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n      return;\n    }\n    const list = ensureListenerList(listenerMap, type);\n    // Find existing listener.\n    const i = findIndexOfListener(list, callback, capture);\n    if (i !== -1) {\n      warnDuplicate(list.listeners[i], passive, once, signal);\n      return;\n    }\n    // Add the new listener.\n    addListener(list, callback, capture, passive, once, signal);\n  }\n  // Implementation\n  removeEventListener(type0, callback0, options0) {\n    const listenerMap = $$2(this);\n    const {\n      callback,\n      capture,\n      type\n    } = normalizeOptions(type0, callback0, options0);\n    const list = listenerMap[type];\n    if (callback != null && list) {\n      removeListener(list, callback, capture);\n    }\n  }\n  // Implementation\n  dispatchEvent(e) {\n    const list = $$2(this)[String(e.type)];\n    if (list == null) {\n      return true;\n    }\n    const event = e instanceof Event$1 ? e : EventWrapper.wrap(e);\n    const eventData = $(event, \"event\");\n    if (eventData.dispatchFlag) {\n      throw createInvalidStateError(\"This event has been in dispatching.\");\n    }\n    eventData.dispatchFlag = true;\n    eventData.target = eventData.currentTarget = this;\n    if (!eventData.stopPropagationFlag) {\n      const {\n        cow,\n        listeners\n      } = list;\n      // Set copy-on-write flag.\n      list.cow = true;\n      // Call listeners.\n      for (let i = 0; i < listeners.length; ++i) {\n        const listener = listeners[i];\n        // Skip if removed.\n        if (isRemoved(listener)) {\n          continue;\n        }\n        // Remove this listener if has the `once` flag.\n        if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n          // Because this listener was removed, the next index is the\n          // same as the current value.\n          i -= 1;\n        }\n        // Call this listener with the `passive` flag.\n        eventData.inPassiveListenerFlag = isPassive(listener);\n        invokeCallback(listener, this, event);\n        eventData.inPassiveListenerFlag = false;\n        // Stop if the `event.stopImmediatePropagation()` method was called.\n        if (eventData.stopImmediatePropagationFlag) {\n          break;\n        }\n      }\n      // Restore copy-on-write flag.\n      if (!cow) {\n        list.cow = false;\n      }\n    }\n    eventData.target = null;\n    eventData.currentTarget = null;\n    eventData.stopImmediatePropagationFlag = false;\n    eventData.stopPropagationFlag = false;\n    eventData.dispatchFlag = false;\n    return !eventData.canceledFlag;\n  }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n  const retv = internalDataMap$2.get(target);\n  assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n  return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n  var _a;\n  assertCallback(callback);\n  if (typeof options === \"object\" && options !== null) {\n    return {\n      type: String(type),\n      callback: callback !== null && callback !== void 0 ? callback : undefined,\n      capture: Boolean(options.capture),\n      passive: Boolean(options.passive),\n      once: Boolean(options.once),\n      signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined\n    };\n  }\n  return {\n    type: String(type),\n    callback: callback !== null && callback !== void 0 ? callback : undefined,\n    capture: Boolean(options),\n    passive: false,\n    once: false,\n    signal: undefined\n  };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n  assertCallback(callback);\n  if (typeof options === \"object\" && options !== null) {\n    return {\n      type: String(type),\n      callback: callback !== null && callback !== void 0 ? callback : undefined,\n      capture: Boolean(options.capture)\n    };\n  }\n  return {\n    type: String(type),\n    callback: callback !== null && callback !== void 0 ? callback : undefined,\n    capture: Boolean(options)\n  };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n  if (typeof callback === \"function\" || typeof callback === \"object\" && callback !== null && typeof callback.handleEvent === \"function\") {\n    return;\n  }\n  if (callback == null || typeof callback === \"object\") {\n    InvalidEventListener.warn(callback);\n    return;\n  }\n  throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n  EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n  if (isPassive(listener) !== passive) {\n    OptionWasIgnored.warn(\"passive\");\n  }\n  if (isOnce(listener) !== once) {\n    OptionWasIgnored.warn(\"once\");\n  }\n  if (listener.signal !== signal) {\n    OptionWasIgnored.warn(\"signal\");\n  }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n  if (keys$1[i] === \"constructor\") {\n    continue;\n  }\n  Object.defineProperty(EventTarget.prototype, keys$1[i], {\n    enumerable: true\n  });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.EventTarget !== \"undefined\") {\n  Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n  var _a, _b;\n  const listMap = $$2(target, \"target\");\n  return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n  if (callback != null && typeof callback !== \"function\") {\n    InvalidAttributeHandler.warn(callback);\n  }\n  if (typeof callback === \"function\" || typeof callback === \"object\" && callback !== null) {\n    upsertEventAttributeListener(target, type, callback);\n  } else {\n    removeEventAttributeListener(target, type);\n  }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n  const list = ensureListenerList($$2(target, \"target\"), String(type));\n  list.attrCallback = callback;\n  if (list.attrListener == null) {\n    list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n  }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n  const listMap = $$2(target, \"target\");\n  const list = listMap[String(type)];\n  if (list && list.attrListener) {\n    removeListener(list, list.attrListener.callback, false);\n    list.attrCallback = list.attrListener = undefined;\n  }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n  return function (event) {\n    const callback = list.attrCallback;\n    if (typeof callback === \"function\") {\n      callback.call(this, event);\n    }\n  };\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n  Object.defineProperty(target, `on${type}`, {\n    get() {\n      return getEventAttributeValue(this, type);\n    },\n    set(value) {\n      setEventAttributeValue(this, type, value);\n    },\n    configurable: true,\n    enumerable: true\n  });\n}\nvar PostMessageType;\n(function (PostMessageType) {\n  PostMessageType[\"DATA_AVAILABLE\"] = \"DATA_AVAILABLE\";\n  PostMessageType[\"START_RECORDING\"] = \"START_RECORDING\";\n  PostMessageType[\"STOP_RECORDING\"] = \"STOP_RECORDING\";\n  PostMessageType[\"ERROR\"] = \"ERROR\";\n  PostMessageType[\"BLOB_READY\"] = \"BLOB_READY\";\n  PostMessageType[\"WORKER_RECORDING\"] = \"WORKER_RECORDING\";\n})(PostMessageType || (PostMessageType = {}));\nconst startRecordingMessage = config => ({\n  type: PostMessageType.START_RECORDING,\n  config\n});\nconst dataAvailableMessage = data => ({\n  type: PostMessageType.DATA_AVAILABLE,\n  data\n});\nconst stopRecordingMessage = () => ({\n  type: PostMessageType.STOP_RECORDING\n});\nconst MP3_MIME_TYPE = 'audio/mpeg';\nconst SafeAudioContext = window.AudioContext || window.webkitAudioContext;\nconst createGain = ctx => (ctx.createGain || ctx.createGainNode).call(ctx);\nconst createScriptProcessor = ctx => (ctx.createScriptProcessor || ctx.createJavaScriptNode).call(ctx, 4096, 1, 1);\nclass Mp3MediaRecorder extends EventTarget {\n  constructor(stream, {\n    audioContext,\n    worker\n  }) {\n    super();\n    this.mimeType = MP3_MIME_TYPE;\n    this.state = 'inactive';\n    this.audioBitsPerSecond = 0;\n    this.videoBitsPerSecond = 0;\n    this.isInternalAudioContext = false;\n    this.onWorkerMessage = event => {\n      const message = event.data;\n      switch (message.type) {\n        case PostMessageType.WORKER_RECORDING:\n          {\n            const event = new Event('start');\n            this.dispatchEvent(event);\n            this.state = 'recording';\n            break;\n          }\n        case PostMessageType.ERROR:\n          {\n            const error = new Error(message.error);\n            const errEvent = new Event('error');\n            errEvent.error = error;\n            this.dispatchEvent(errEvent);\n            this.state = 'inactive';\n            break;\n          }\n        case PostMessageType.BLOB_READY:\n          {\n            const stopEvent = new Event('stop');\n            const fallbackDataEvent = new Event('dataavailable');\n            fallbackDataEvent.data = message.blob;\n            fallbackDataEvent.timecode = Date.now();\n            const dataEvent = window.BlobEvent ? new BlobEvent('dataavailable', {\n              data: message.blob,\n              timecode: Date.now()\n            }) : fallbackDataEvent;\n            this.dispatchEvent(dataEvent);\n            this.dispatchEvent(stopEvent);\n            this.state = 'inactive';\n            break;\n          }\n        case PostMessageType.ERROR:\n          {\n            throw new Error(message.error);\n          }\n      }\n    };\n    if (!worker) {\n      throw new Error('No worker provided in Mp3MediaRecorder constructor.');\n    }\n    this.stream = stream;\n    this.isInternalAudioContext = !audioContext;\n    this.audioContext = audioContext || new SafeAudioContext();\n    this.worker = worker;\n    this.sourceNode = this.audioContext.createMediaStreamSource(stream);\n    this.gainNode = createGain(this.audioContext);\n    this.gainNode.gain.value = 1;\n    this.processorNode = createScriptProcessor(this.audioContext);\n    this.sourceNode.connect(this.gainNode);\n    this.gainNode.connect(this.processorNode);\n    this.worker.onmessage = this.onWorkerMessage;\n  }\n  start() {\n    if (this.state !== 'inactive') {\n      throw this.getStateError('start');\n    }\n    this.processorNode.onaudioprocess = event => {\n      this.worker.postMessage(dataAvailableMessage(event.inputBuffer.getChannelData(0)));\n    };\n    this.processorNode.connect(this.audioContext.destination);\n    if (this.audioContext.state === 'closed') {\n      this.audioContext = new AudioContext();\n    } else if (this.audioContext.state === 'suspended') {\n      this.audioContext.resume();\n    }\n    this.worker.postMessage(startRecordingMessage({\n      sampleRate: this.audioContext.sampleRate\n    }));\n  }\n  stop() {\n    if (this.state === 'inactive') {\n      throw this.getStateError('stop');\n    }\n    this.processorNode.disconnect();\n    if (this.isInternalAudioContext) {\n      this.audioContext.close();\n    }\n    this.worker.postMessage(stopRecordingMessage());\n  }\n  pause() {\n    if (this.state === 'inactive') {\n      throw this.getStateError('pause');\n    }\n    this.audioContext.suspend().then(() => {\n      this.state = 'paused';\n      this.dispatchEvent(new Event('pause'));\n    });\n  }\n  resume() {\n    if (this.state === 'inactive') {\n      throw this.getStateError('resume');\n    }\n    this.audioContext.resume().then(() => {\n      this.state = 'recording';\n      this.dispatchEvent(new Event('resume'));\n    });\n  }\n  requestData() {\n    // not implemented, dataavailable event only fires when encoding is finished\n  }\n  getStateError(method) {\n    return new Error(`Failed to execute '${method}' on 'MediaRecorder': The MediaRecorder's state is '${this.state}'.`);\n  }\n}\nMp3MediaRecorder.isTypeSupported = mimeType => mimeType === MP3_MIME_TYPE;\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'start');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'stop');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'pause');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'resume');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'dataavailable');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'error');\nexport { Mp3MediaRecorder };","map":{"version":3,"names":["assertType","condition","message","args","TypeError","format","i","replace","anyToString","x","String","Object","prototype","toString","call","currentErrorHandler","reportError","maybeError","error","Error","dispatchEvent","ErrorEvent","process","emit","console","_a","Global","window","self","global","globalThis","undefined","currentWarnHandler","Warning","constructor","code","warn","stack","_b","InitEventWasCalledWhileDispatching","FalsyWasAssignedToCancelBubble","TruthyWasAssignedToReturnValue","NonCancelableEventWasCanceled","CanceledInPassiveListener","EventListenerWasDuplicated","OptionWasIgnored","InvalidEventListener","InvalidAttributeHandler","Event$1","NONE","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","type","eventInitDict","defineProperty","value","enumerable","opts","internalDataMap","set","bubbles","Boolean","cancelable","composed","target","currentTarget","stopPropagationFlag","stopImmediatePropagationFlag","canceledFlag","inPassiveListenerFlag","dispatchFlag","timeStamp","Date","now","$","srcElement","composedPath","eventPhase","stopPropagation","cancelBubble","stopImmediatePropagation","data","returnValue","setCancelFlag","preventDefault","defaultPrevented","isTrusted","initEvent","assign","WeakMap","event","name","retv","get","keys","getOwnPropertyNames","length","Event","setPrototypeOf","createInvalidStateError","DOMException","msg","captureStackTrace","defineProperties","defineErrorCodeProperties","ErrorCodeMap","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","HIERARCHY_REQUEST_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","NOT_FOUND_ERR","NOT_SUPPORTED_ERR","INUSE_ATTRIBUTE_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","VALIDATION_ERR","TYPE_MISMATCH_ERR","SECURITY_ERR","NETWORK_ERR","ABORT_ERR","URL_MISMATCH_ERR","QUOTA_EXCEEDED_ERR","TIMEOUT_ERR","INVALID_NODE_TYPE_ERR","DATA_CLONE_ERR","obj","key","configurable","EventWrapper","wrap","getWrapperClassOf","internalDataMap$1","original","defineRedirectDescriptor","$$1","wrapperClassCache","originalEvent","getPrototypeOf","wrapper","defineWrapper","BaseEventWrapper","originalPrototype","CustomEventWrapper","d","getOwnPropertyDescriptor","bind","createListener","callback","capture","passive","once","signal","signalListener","flags","setRemoved","listener","isCapture","isPassive","isOnce","isRemoved","invokeCallback","handleEvent","thrownError","findIndexOfListener","listeners","addListener","list","removeListener","addEventListener","cow","push","index","removeListenerAt","disableCow","removeEventListener","filter","_","splice","createListenerListMap","create","ensureListenerList","listenerMap","attrCallback","attrListener","EventTarget","internalDataMap$2","type0","callback0","options0","$$2","normalizeAddOptions","aborted","warnDuplicate","normalizeOptions","e","eventData","options","assertCallback","keys$1","getEventAttributeValue","listMap","setEventAttributeValue","upsertEventAttributeListener","removeEventAttributeListener","defineEventAttributeCallback","defineEventAttribute","_eventClass","PostMessageType","startRecordingMessage","config","START_RECORDING","dataAvailableMessage","DATA_AVAILABLE","stopRecordingMessage","STOP_RECORDING","MP3_MIME_TYPE","SafeAudioContext","AudioContext","webkitAudioContext","createGain","ctx","createGainNode","createScriptProcessor","createJavaScriptNode","Mp3MediaRecorder","stream","audioContext","worker","mimeType","state","audioBitsPerSecond","videoBitsPerSecond","isInternalAudioContext","onWorkerMessage","WORKER_RECORDING","ERROR","errEvent","BLOB_READY","stopEvent","fallbackDataEvent","blob","timecode","dataEvent","BlobEvent","sourceNode","createMediaStreamSource","gainNode","gain","processorNode","connect","onmessage","start","getStateError","onaudioprocess","postMessage","inputBuffer","getChannelData","destination","resume","sampleRate","stop","disconnect","close","pause","suspend","then","requestData","method","isTypeSupported"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/node_modules/mp3-mediarecorder/dist/index.es.js"],"sourcesContent":["/**\n * Assert a condition.\n * @param condition The condition that it should satisfy.\n * @param message The error message.\n * @param args The arguments for replacing placeholders in the message.\n */\nfunction assertType(condition, message, ...args) {\n    if (!condition) {\n        throw new TypeError(format(message, args));\n    }\n}\n/**\n * Convert a text and arguments to one string.\n * @param message The formating text\n * @param args The arguments.\n */\nfunction format(message, args) {\n    let i = 0;\n    return message.replace(/%[os]/gu, () => anyToString(args[i++]));\n}\n/**\n * Convert a value to a string representation.\n * @param x The value to get the string representation.\n */\nfunction anyToString(x) {\n    if (typeof x !== \"object\" || x === null) {\n        return String(x);\n    }\n    return Object.prototype.toString.call(x);\n}\n\nlet currentErrorHandler;\n/**\n * Print a error message.\n * @param maybeError The error object.\n */\nfunction reportError(maybeError) {\n    try {\n        const error = maybeError instanceof Error\n            ? maybeError\n            : new Error(anyToString(maybeError));\n        // Call the user-defined error handler if exists.\n        if (currentErrorHandler) ;\n        // Dispatch an `error` event if this is on a browser.\n        if (typeof dispatchEvent === \"function\" &&\n            typeof ErrorEvent === \"function\") {\n            dispatchEvent(new ErrorEvent(\"error\", { error, message: error.message }));\n        }\n        // Emit an `uncaughtException` event if this is on Node.js.\n        //istanbul ignore else\n        else if (typeof process !== \"undefined\" &&\n            typeof process.emit === \"function\") {\n            process.emit(\"uncaughtException\", error);\n            return;\n        }\n        // Otherwise, print the error.\n        console.error(error);\n    }\n    catch (_a) {\n        // ignore.\n    }\n}\n\n/**\n * The global object.\n */\n//istanbul ignore next\nconst Global = typeof window !== \"undefined\"\n    ? window\n    : typeof self !== \"undefined\"\n        ? self\n        : typeof global !== \"undefined\"\n            ? global\n            : typeof globalThis !== \"undefined\"\n                ? globalThis\n                : undefined;\n\nlet currentWarnHandler;\n/**\n * The warning information.\n */\nclass Warning {\n    constructor(code, message) {\n        this.code = code;\n        this.message = message;\n    }\n    /**\n     * Report this warning.\n     * @param args The arguments of the warning.\n     */\n    warn(...args) {\n        var _a;\n        try {\n            // Call the user-defined warning handler if exists.\n            if (currentWarnHandler) ;\n            // Otherwise, print the warning.\n            const stack = ((_a = new Error().stack) !== null && _a !== void 0 ? _a : \"\").replace(/^(?:.+?\\n){2}/gu, \"\\n\");\n            console.warn(this.message, ...args, stack);\n        }\n        catch (_b) {\n            // Ignore.\n        }\n    }\n}\n\nconst InitEventWasCalledWhileDispatching = new Warning(\"W01\", \"Unable to initialize event under dispatching.\");\nconst FalsyWasAssignedToCancelBubble = new Warning(\"W02\", \"Assigning any falsy value to 'cancelBubble' property has no effect.\");\nconst TruthyWasAssignedToReturnValue = new Warning(\"W03\", \"Assigning any truthy value to 'returnValue' property has no effect.\");\nconst NonCancelableEventWasCanceled = new Warning(\"W04\", \"Unable to preventDefault on non-cancelable events.\");\nconst CanceledInPassiveListener = new Warning(\"W05\", \"Unable to preventDefault inside passive event listener invocation.\");\nconst EventListenerWasDuplicated = new Warning(\"W06\", \"An event listener wasn't added because it has been added already: %o, %o\");\nconst OptionWasIgnored = new Warning(\"W07\", \"The %o option value was abandoned because the event listener wasn't added as duplicated.\");\nconst InvalidEventListener = new Warning(\"W08\", \"The 'callback' argument must be a function or an object that has 'handleEvent' method: %o\");\nconst InvalidAttributeHandler = new Warning(\"W09\", \"Event attribute handler must be a function: %o\");\n\n/*eslint-disable class-methods-use-this */\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * `EventTarget` shim can control the internal state of this `Event` objects.\n * @see https://dom.spec.whatwg.org/#event\n */\nclass Event$1 {\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    static get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    static get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    static get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    static get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * Initialize this event instance.\n     * @param type The type of this event.\n     * @param eventInitDict Options to initialize.\n     * @see https://dom.spec.whatwg.org/#dom-event-event\n     */\n    constructor(type, eventInitDict) {\n        Object.defineProperty(this, \"isTrusted\", {\n            value: false,\n            enumerable: true,\n        });\n        const opts = eventInitDict !== null && eventInitDict !== void 0 ? eventInitDict : {};\n        internalDataMap.set(this, {\n            type: String(type),\n            bubbles: Boolean(opts.bubbles),\n            cancelable: Boolean(opts.cancelable),\n            composed: Boolean(opts.composed),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false,\n            inPassiveListenerFlag: false,\n            dispatchFlag: false,\n            timeStamp: Date.now(),\n        });\n    }\n    /**\n     * The type of this event.\n     * @see https://dom.spec.whatwg.org/#dom-event-type\n     */\n    get type() {\n        return $(this).type;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-target\n     */\n    get target() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @deprecated Use the `target` property instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-srcelement\n     */\n    get srcElement() {\n        return $(this).target;\n    }\n    /**\n     * The event target of the current dispatching.\n     * @see https://dom.spec.whatwg.org/#dom-event-currenttarget\n     */\n    get currentTarget() {\n        return $(this).currentTarget;\n    }\n    /**\n     * The event target of the current dispatching.\n     * This doesn't support node tree.\n     * @see https://dom.spec.whatwg.org/#dom-event-composedpath\n     */\n    composedPath() {\n        const currentTarget = $(this).currentTarget;\n        if (currentTarget) {\n            return [currentTarget];\n        }\n        return [];\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-none\n     */\n    get NONE() {\n        return NONE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-capturing_phase\n     */\n    get CAPTURING_PHASE() {\n        return CAPTURING_PHASE;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-at_target\n     */\n    get AT_TARGET() {\n        return AT_TARGET;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbling_phase\n     */\n    get BUBBLING_PHASE() {\n        return BUBBLING_PHASE;\n    }\n    /**\n     * The current event phase.\n     * @see https://dom.spec.whatwg.org/#dom-event-eventphase\n     */\n    get eventPhase() {\n        return $(this).dispatchFlag ? 2 : 0;\n    }\n    /**\n     * Stop event bubbling.\n     * Because this shim doesn't support node tree, this merely changes the `cancelBubble` property value.\n     * @see https://dom.spec.whatwg.org/#dom-event-stoppropagation\n     */\n    stopPropagation() {\n        $(this).stopPropagationFlag = true;\n    }\n    /**\n     * `true` if event bubbling was stopped.\n     * @deprecated\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    get cancelBubble() {\n        return $(this).stopPropagationFlag;\n    }\n    /**\n     * Stop event bubbling if `true` is set.\n     * @deprecated Use the `stopPropagation()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelbubble\n     */\n    set cancelBubble(value) {\n        if (value) {\n            $(this).stopPropagationFlag = true;\n        }\n        else {\n            FalsyWasAssignedToCancelBubble.warn();\n        }\n    }\n    /**\n     * Stop event bubbling and subsequent event listener callings.\n     * @see https://dom.spec.whatwg.org/#dom-event-stopimmediatepropagation\n     */\n    stopImmediatePropagation() {\n        const data = $(this);\n        data.stopPropagationFlag = data.stopImmediatePropagationFlag = true;\n    }\n    /**\n     * `true` if this event will bubble.\n     * @see https://dom.spec.whatwg.org/#dom-event-bubbles\n     */\n    get bubbles() {\n        return $(this).bubbles;\n    }\n    /**\n     * `true` if this event can be canceled by the `preventDefault()` method.\n     * @see https://dom.spec.whatwg.org/#dom-event-cancelable\n     */\n    get cancelable() {\n        return $(this).cancelable;\n    }\n    /**\n     * `true` if the default behavior will act.\n     * @deprecated Use the `defaultPrevented` proeprty instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    get returnValue() {\n        return !$(this).canceledFlag;\n    }\n    /**\n     * Cancel the default behavior if `false` is set.\n     * @deprecated Use the `preventDefault()` method instead.\n     * @see https://dom.spec.whatwg.org/#dom-event-returnvalue\n     */\n    set returnValue(value) {\n        if (!value) {\n            setCancelFlag($(this));\n        }\n        else {\n            TruthyWasAssignedToReturnValue.warn();\n        }\n    }\n    /**\n     * Cancel the default behavior.\n     * @see https://dom.spec.whatwg.org/#dom-event-preventdefault\n     */\n    preventDefault() {\n        setCancelFlag($(this));\n    }\n    /**\n     * `true` if the default behavior was canceled.\n     * @see https://dom.spec.whatwg.org/#dom-event-defaultprevented\n     */\n    get defaultPrevented() {\n        return $(this).canceledFlag;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     */\n    get composed() {\n        return $(this).composed;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-istrusted\n     */\n    //istanbul ignore next\n    get isTrusted() {\n        return false;\n    }\n    /**\n     * @see https://dom.spec.whatwg.org/#dom-event-timestamp\n     */\n    get timeStamp() {\n        return $(this).timeStamp;\n    }\n    /**\n     * @deprecated Don't use this method. The constructor did initialization.\n     */\n    initEvent(type, bubbles = false, cancelable = false) {\n        const data = $(this);\n        if (data.dispatchFlag) {\n            InitEventWasCalledWhileDispatching.warn();\n            return;\n        }\n        internalDataMap.set(this, Object.assign({}, data, {\n            type: String(type),\n            bubbles: Boolean(bubbles),\n            cancelable: Boolean(cancelable),\n            target: null,\n            currentTarget: null,\n            stopPropagationFlag: false,\n            stopImmediatePropagationFlag: false,\n            canceledFlag: false\n        }));\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nconst NONE = 0;\nconst CAPTURING_PHASE = 1;\nconst AT_TARGET = 2;\nconst BUBBLING_PHASE = 3;\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $(event, name = \"this\") {\n    const retv = internalDataMap.get(event);\n    assertType(retv != null, \"'%s' must be an object that Event constructor created, but got another one: %o\", name, event);\n    return retv;\n}\n/**\n * https://dom.spec.whatwg.org/#set-the-canceled-flag\n * @param data private data.\n */\nfunction setCancelFlag(data) {\n    if (data.inPassiveListenerFlag) {\n        CanceledInPassiveListener.warn();\n        return;\n    }\n    if (!data.cancelable) {\n        NonCancelableEventWasCanceled.warn();\n        return;\n    }\n    data.canceledFlag = true;\n}\n// Set enumerable\nObject.defineProperty(Event$1, \"NONE\", { enumerable: true });\nObject.defineProperty(Event$1, \"CAPTURING_PHASE\", { enumerable: true });\nObject.defineProperty(Event$1, \"AT_TARGET\", { enumerable: true });\nObject.defineProperty(Event$1, \"BUBBLING_PHASE\", { enumerable: true });\nconst keys = Object.getOwnPropertyNames(Event$1.prototype);\nfor (let i = 0; i < keys.length; ++i) {\n    if (keys[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(Event$1.prototype, keys[i], { enumerable: true });\n}\n// Ensure `event instanceof window.Event` is `true`.\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    Object.setPrototypeOf(Event$1.prototype, Global.Event.prototype);\n}\n\n/**\n * Create a new InvalidStateError instance.\n * @param message The error message.\n */\nfunction createInvalidStateError(message) {\n    if (Global.DOMException) {\n        return new Global.DOMException(message, \"InvalidStateError\");\n    }\n    if (DOMException == null) {\n        DOMException = class DOMException extends Error {\n            constructor(msg) {\n                super(msg);\n                if (Error.captureStackTrace) {\n                    Error.captureStackTrace(this, DOMException);\n                }\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get code() {\n                return 11;\n            }\n            // eslint-disable-next-line class-methods-use-this\n            get name() {\n                return \"InvalidStateError\";\n            }\n        };\n        Object.defineProperties(DOMException.prototype, {\n            code: { enumerable: true },\n            name: { enumerable: true },\n        });\n        defineErrorCodeProperties(DOMException);\n        defineErrorCodeProperties(DOMException.prototype);\n    }\n    return new DOMException(message);\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\nlet DOMException;\nconst ErrorCodeMap = {\n    INDEX_SIZE_ERR: 1,\n    DOMSTRING_SIZE_ERR: 2,\n    HIERARCHY_REQUEST_ERR: 3,\n    WRONG_DOCUMENT_ERR: 4,\n    INVALID_CHARACTER_ERR: 5,\n    NO_DATA_ALLOWED_ERR: 6,\n    NO_MODIFICATION_ALLOWED_ERR: 7,\n    NOT_FOUND_ERR: 8,\n    NOT_SUPPORTED_ERR: 9,\n    INUSE_ATTRIBUTE_ERR: 10,\n    INVALID_STATE_ERR: 11,\n    SYNTAX_ERR: 12,\n    INVALID_MODIFICATION_ERR: 13,\n    NAMESPACE_ERR: 14,\n    INVALID_ACCESS_ERR: 15,\n    VALIDATION_ERR: 16,\n    TYPE_MISMATCH_ERR: 17,\n    SECURITY_ERR: 18,\n    NETWORK_ERR: 19,\n    ABORT_ERR: 20,\n    URL_MISMATCH_ERR: 21,\n    QUOTA_EXCEEDED_ERR: 22,\n    TIMEOUT_ERR: 23,\n    INVALID_NODE_TYPE_ERR: 24,\n    DATA_CLONE_ERR: 25,\n};\nfunction defineErrorCodeProperties(obj) {\n    const keys = Object.keys(ErrorCodeMap);\n    for (let i = 0; i < keys.length; ++i) {\n        const key = keys[i];\n        const value = ErrorCodeMap[key];\n        Object.defineProperty(obj, key, {\n            get() {\n                return value;\n            },\n            configurable: true,\n            enumerable: true,\n        });\n    }\n}\n\n/**\n * An implementation of `Event` interface, that wraps a given event object.\n * This class controls the internal state of `Event`.\n * @see https://dom.spec.whatwg.org/#interface-event\n */\nclass EventWrapper extends Event$1 {\n    /**\n     * Wrap a given event object to control states.\n     * @param event The event-like object to wrap.\n     */\n    static wrap(event) {\n        return new (getWrapperClassOf(event))(event);\n    }\n    constructor(event) {\n        super(event.type, {\n            bubbles: event.bubbles,\n            cancelable: event.cancelable,\n            composed: event.composed,\n        });\n        if (event.cancelBubble) {\n            super.stopPropagation();\n        }\n        if (event.defaultPrevented) {\n            super.preventDefault();\n        }\n        internalDataMap$1.set(this, { original: event });\n        // Define accessors\n        const keys = Object.keys(event);\n        for (let i = 0; i < keys.length; ++i) {\n            const key = keys[i];\n            if (!(key in this)) {\n                Object.defineProperty(this, key, defineRedirectDescriptor(event, key));\n            }\n        }\n    }\n    stopPropagation() {\n        super.stopPropagation();\n        const { original } = $$1(this);\n        if (\"stopPropagation\" in original) {\n            original.stopPropagation();\n        }\n    }\n    get cancelBubble() {\n        return super.cancelBubble;\n    }\n    set cancelBubble(value) {\n        super.cancelBubble = value;\n        const { original } = $$1(this);\n        if (\"cancelBubble\" in original) {\n            original.cancelBubble = value;\n        }\n    }\n    stopImmediatePropagation() {\n        super.stopImmediatePropagation();\n        const { original } = $$1(this);\n        if (\"stopImmediatePropagation\" in original) {\n            original.stopImmediatePropagation();\n        }\n    }\n    get returnValue() {\n        return super.returnValue;\n    }\n    set returnValue(value) {\n        super.returnValue = value;\n        const { original } = $$1(this);\n        if (\"returnValue\" in original) {\n            original.returnValue = value;\n        }\n    }\n    preventDefault() {\n        super.preventDefault();\n        const { original } = $$1(this);\n        if (\"preventDefault\" in original) {\n            original.preventDefault();\n        }\n    }\n    get timeStamp() {\n        const { original } = $$1(this);\n        if (\"timeStamp\" in original) {\n            return original.timeStamp;\n        }\n        return super.timeStamp;\n    }\n}\n/**\n * Private data for event wrappers.\n */\nconst internalDataMap$1 = new WeakMap();\n/**\n * Get private data.\n * @param event The event object to get private data.\n * @returns The private data of the event.\n */\nfunction $$1(event) {\n    const retv = internalDataMap$1.get(event);\n    assertType(retv != null, \"'this' is expected an Event object, but got\", event);\n    return retv;\n}\n/**\n * Cache for wrapper classes.\n * @type {WeakMap<Object, Function>}\n * @private\n */\nconst wrapperClassCache = new WeakMap();\n// Make association for wrappers.\nwrapperClassCache.set(Object.prototype, EventWrapper);\nif (typeof Global !== \"undefined\" && typeof Global.Event !== \"undefined\") {\n    wrapperClassCache.set(Global.Event.prototype, EventWrapper);\n}\n/**\n * Get the wrapper class of a given prototype.\n * @param originalEvent The event object to wrap.\n */\nfunction getWrapperClassOf(originalEvent) {\n    const prototype = Object.getPrototypeOf(originalEvent);\n    if (prototype == null) {\n        return EventWrapper;\n    }\n    let wrapper = wrapperClassCache.get(prototype);\n    if (wrapper == null) {\n        wrapper = defineWrapper(getWrapperClassOf(prototype), prototype);\n        wrapperClassCache.set(prototype, wrapper);\n    }\n    return wrapper;\n}\n/**\n * Define new wrapper class.\n * @param BaseEventWrapper The base wrapper class.\n * @param originalPrototype The prototype of the original event.\n */\nfunction defineWrapper(BaseEventWrapper, originalPrototype) {\n    class CustomEventWrapper extends BaseEventWrapper {\n    }\n    const keys = Object.keys(originalPrototype);\n    for (let i = 0; i < keys.length; ++i) {\n        Object.defineProperty(CustomEventWrapper.prototype, keys[i], defineRedirectDescriptor(originalPrototype, keys[i]));\n    }\n    return CustomEventWrapper;\n}\n/**\n * Get the property descriptor to redirect a given property.\n */\nfunction defineRedirectDescriptor(obj, key) {\n    const d = Object.getOwnPropertyDescriptor(obj, key);\n    return {\n        get() {\n            const original = $$1(this).original;\n            const value = original[key];\n            if (typeof value === \"function\") {\n                return value.bind(original);\n            }\n            return value;\n        },\n        set(value) {\n            const original = $$1(this).original;\n            original[key] = value;\n        },\n        configurable: d.configurable,\n        enumerable: d.enumerable,\n    };\n}\n\n/**\n * Create a new listener.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n * @param signalListener The abort event listener for the abort signal.\n */\nfunction createListener(callback, capture, passive, once, signal, signalListener) {\n    return {\n        callback,\n        flags: (capture ? 1 /* Capture */ : 0) |\n            (passive ? 2 /* Passive */ : 0) |\n            (once ? 4 /* Once */ : 0),\n        signal,\n        signalListener,\n    };\n}\n/**\n * Set the `removed` flag to the given listener.\n * @param listener The listener to check.\n */\nfunction setRemoved(listener) {\n    listener.flags |= 8 /* Removed */;\n}\n/**\n * Check if the given listener has the `capture` flag or not.\n * @param listener The listener to check.\n */\nfunction isCapture(listener) {\n    return (listener.flags & 1 /* Capture */) === 1 /* Capture */;\n}\n/**\n * Check if the given listener has the `passive` flag or not.\n * @param listener The listener to check.\n */\nfunction isPassive(listener) {\n    return (listener.flags & 2 /* Passive */) === 2 /* Passive */;\n}\n/**\n * Check if the given listener has the `once` flag or not.\n * @param listener The listener to check.\n */\nfunction isOnce(listener) {\n    return (listener.flags & 4 /* Once */) === 4 /* Once */;\n}\n/**\n * Check if the given listener has the `removed` flag or not.\n * @param listener The listener to check.\n */\nfunction isRemoved(listener) {\n    return (listener.flags & 8 /* Removed */) === 8 /* Removed */;\n}\n/**\n * Call an event listener.\n * @param listener The listener to call.\n * @param target The event target object for `thisArg`.\n * @param event The event object for the first argument.\n * @param attribute `true` if this callback is an event attribute handler.\n */\nfunction invokeCallback({ callback }, target, event) {\n    try {\n        if (typeof callback === \"function\") {\n            callback.call(target, event);\n        }\n        else if (typeof callback.handleEvent === \"function\") {\n            callback.handleEvent(event);\n        }\n    }\n    catch (thrownError) {\n        reportError(thrownError);\n    }\n}\n\n/**\n * Find the index of given listener.\n * This returns `-1` if not found.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n */\nfunction findIndexOfListener({ listeners }, callback, capture) {\n    for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i].callback === callback &&\n            isCapture(listeners[i]) === capture) {\n            return i;\n        }\n    }\n    return -1;\n}\n/**\n * Add the given listener.\n * Does copy-on-write if needed.\n * @param list The listener list.\n * @param callback The callback function.\n * @param capture The capture flag.\n * @param passive The passive flag.\n * @param once The once flag.\n * @param signal The abort signal.\n */\nfunction addListener(list, callback, capture, passive, once, signal) {\n    let signalListener;\n    if (signal) {\n        signalListener = removeListener.bind(null, list, callback, capture);\n        signal.addEventListener(\"abort\", signalListener);\n    }\n    const listener = createListener(callback, capture, passive, once, signal, signalListener);\n    if (list.cow) {\n        list.cow = false;\n        list.listeners = [...list.listeners, listener];\n    }\n    else {\n        list.listeners.push(listener);\n    }\n    return listener;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param callback The callback function to find.\n * @param capture The capture flag to find.\n * @returns `true` if it mutated the list directly.\n */\nfunction removeListener(list, callback, capture) {\n    const index = findIndexOfListener(list, callback, capture);\n    if (index !== -1) {\n        return removeListenerAt(list, index);\n    }\n    return false;\n}\n/**\n * Remove a listener.\n * @param list The listener list.\n * @param index The index of the target listener.\n * @param disableCow Disable copy-on-write if true.\n * @returns `true` if it mutated the `listeners` array directly.\n */\nfunction removeListenerAt(list, index, disableCow = false) {\n    const listener = list.listeners[index];\n    // Set the removed flag.\n    setRemoved(listener);\n    // Dispose the abort signal listener if exists.\n    if (listener.signal) {\n        listener.signal.removeEventListener(\"abort\", listener.signalListener);\n    }\n    // Remove it from the array.\n    if (list.cow && !disableCow) {\n        list.cow = false;\n        list.listeners = list.listeners.filter((_, i) => i !== index);\n        return false;\n    }\n    list.listeners.splice(index, 1);\n    return true;\n}\n\n/**\n * Create a new `ListenerListMap` object.\n */\nfunction createListenerListMap() {\n    return Object.create(null);\n}\n/**\n * Get the listener list of the given type.\n * If the listener list has not been initialized, initialize and return it.\n * @param listenerMap The listener list map.\n * @param type The event type to get.\n */\nfunction ensureListenerList(listenerMap, type) {\n    var _a;\n    return ((_a = listenerMap[type]) !== null && _a !== void 0 ? _a : (listenerMap[type] = {\n        attrCallback: undefined,\n        attrListener: undefined,\n        cow: false,\n        listeners: [],\n    }));\n}\n\n/**\n * An implementation of the `EventTarget` interface.\n * @see https://dom.spec.whatwg.org/#eventtarget\n */\nclass EventTarget {\n    /**\n     * Initialize this instance.\n     */\n    constructor() {\n        internalDataMap$2.set(this, createListenerListMap());\n    }\n    // Implementation\n    addEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, once, passive, signal, type, } = normalizeAddOptions(type0, callback0, options0);\n        if (callback == null || (signal === null || signal === void 0 ? void 0 : signal.aborted)) {\n            return;\n        }\n        const list = ensureListenerList(listenerMap, type);\n        // Find existing listener.\n        const i = findIndexOfListener(list, callback, capture);\n        if (i !== -1) {\n            warnDuplicate(list.listeners[i], passive, once, signal);\n            return;\n        }\n        // Add the new listener.\n        addListener(list, callback, capture, passive, once, signal);\n    }\n    // Implementation\n    removeEventListener(type0, callback0, options0) {\n        const listenerMap = $$2(this);\n        const { callback, capture, type } = normalizeOptions(type0, callback0, options0);\n        const list = listenerMap[type];\n        if (callback != null && list) {\n            removeListener(list, callback, capture);\n        }\n    }\n    // Implementation\n    dispatchEvent(e) {\n        const list = $$2(this)[String(e.type)];\n        if (list == null) {\n            return true;\n        }\n        const event = e instanceof Event$1 ? e : EventWrapper.wrap(e);\n        const eventData = $(event, \"event\");\n        if (eventData.dispatchFlag) {\n            throw createInvalidStateError(\"This event has been in dispatching.\");\n        }\n        eventData.dispatchFlag = true;\n        eventData.target = eventData.currentTarget = this;\n        if (!eventData.stopPropagationFlag) {\n            const { cow, listeners } = list;\n            // Set copy-on-write flag.\n            list.cow = true;\n            // Call listeners.\n            for (let i = 0; i < listeners.length; ++i) {\n                const listener = listeners[i];\n                // Skip if removed.\n                if (isRemoved(listener)) {\n                    continue;\n                }\n                // Remove this listener if has the `once` flag.\n                if (isOnce(listener) && removeListenerAt(list, i, !cow)) {\n                    // Because this listener was removed, the next index is the\n                    // same as the current value.\n                    i -= 1;\n                }\n                // Call this listener with the `passive` flag.\n                eventData.inPassiveListenerFlag = isPassive(listener);\n                invokeCallback(listener, this, event);\n                eventData.inPassiveListenerFlag = false;\n                // Stop if the `event.stopImmediatePropagation()` method was called.\n                if (eventData.stopImmediatePropagationFlag) {\n                    break;\n                }\n            }\n            // Restore copy-on-write flag.\n            if (!cow) {\n                list.cow = false;\n            }\n        }\n        eventData.target = null;\n        eventData.currentTarget = null;\n        eventData.stopImmediatePropagationFlag = false;\n        eventData.stopPropagationFlag = false;\n        eventData.dispatchFlag = false;\n        return !eventData.canceledFlag;\n    }\n}\n/**\n * Internal data.\n */\nconst internalDataMap$2 = new WeakMap();\n/**\n * Get private data.\n * @param target The event target object to get private data.\n * @param name The variable name to report.\n * @returns The private data of the event.\n */\nfunction $$2(target, name = \"this\") {\n    const retv = internalDataMap$2.get(target);\n    assertType(retv != null, \"'%s' must be an object that EventTarget constructor created, but got another one: %o\", name, target);\n    return retv;\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeAddOptions(type, callback, options) {\n    var _a;\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n            passive: Boolean(options.passive),\n            once: Boolean(options.once),\n            signal: (_a = options.signal) !== null && _a !== void 0 ? _a : undefined,\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n        passive: false,\n        once: false,\n        signal: undefined,\n    };\n}\n/**\n * Normalize options.\n * @param options The options to normalize.\n */\nfunction normalizeOptions(type, callback, options) {\n    assertCallback(callback);\n    if (typeof options === \"object\" && options !== null) {\n        return {\n            type: String(type),\n            callback: callback !== null && callback !== void 0 ? callback : undefined,\n            capture: Boolean(options.capture),\n        };\n    }\n    return {\n        type: String(type),\n        callback: callback !== null && callback !== void 0 ? callback : undefined,\n        capture: Boolean(options),\n    };\n}\n/**\n * Assert the type of 'callback' argument.\n * @param callback The callback to check.\n */\nfunction assertCallback(callback) {\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" &&\n            callback !== null &&\n            typeof callback.handleEvent === \"function\")) {\n        return;\n    }\n    if (callback == null || typeof callback === \"object\") {\n        InvalidEventListener.warn(callback);\n        return;\n    }\n    throw new TypeError(format(InvalidEventListener.message, [callback]));\n}\n/**\n * Print warning for duplicated.\n * @param listener The current listener that is duplicated.\n * @param passive The passive flag of the new duplicated listener.\n * @param once The once flag of the new duplicated listener.\n * @param signal The signal object of the new duplicated listener.\n */\nfunction warnDuplicate(listener, passive, once, signal) {\n    EventListenerWasDuplicated.warn(isCapture(listener) ? \"capture\" : \"bubble\", listener.callback);\n    if (isPassive(listener) !== passive) {\n        OptionWasIgnored.warn(\"passive\");\n    }\n    if (isOnce(listener) !== once) {\n        OptionWasIgnored.warn(\"once\");\n    }\n    if (listener.signal !== signal) {\n        OptionWasIgnored.warn(\"signal\");\n    }\n}\n// Set enumerable\nconst keys$1 = Object.getOwnPropertyNames(EventTarget.prototype);\nfor (let i = 0; i < keys$1.length; ++i) {\n    if (keys$1[i] === \"constructor\") {\n        continue;\n    }\n    Object.defineProperty(EventTarget.prototype, keys$1[i], { enumerable: true });\n}\n// Ensure `eventTarget instanceof window.EventTarget` is `true`.\nif (typeof Global !== \"undefined\" &&\n    typeof Global.EventTarget !== \"undefined\") {\n    Object.setPrototypeOf(EventTarget.prototype, Global.EventTarget.prototype);\n}\n\n/**\n * Get the current value of a given event attribute.\n * @param target The `EventTarget` object to get.\n * @param type The event type.\n */\nfunction getEventAttributeValue(target, type) {\n    var _a, _b;\n    const listMap = $$2(target, \"target\");\n    return (_b = (_a = listMap[type]) === null || _a === void 0 ? void 0 : _a.attrCallback) !== null && _b !== void 0 ? _b : null;\n}\n/**\n * Set an event listener to a given event attribute.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction setEventAttributeValue(target, type, callback) {\n    if (callback != null && typeof callback !== \"function\") {\n        InvalidAttributeHandler.warn(callback);\n    }\n    if (typeof callback === \"function\" ||\n        (typeof callback === \"object\" && callback !== null)) {\n        upsertEventAttributeListener(target, type, callback);\n    }\n    else {\n        removeEventAttributeListener(target, type);\n    }\n}\n//------------------------------------------------------------------------------\n// Helpers\n//------------------------------------------------------------------------------\n/**\n * Update or insert the given event attribute handler.\n * @param target The `EventTarget` object to set.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction upsertEventAttributeListener(target, type, callback) {\n    const list = ensureListenerList($$2(target, \"target\"), String(type));\n    list.attrCallback = callback;\n    if (list.attrListener == null) {\n        list.attrListener = addListener(list, defineEventAttributeCallback(list), false, false, false, undefined);\n    }\n}\n/**\n * Remove the given event attribute handler.\n * @param target The `EventTarget` object to remove.\n * @param type The event type.\n * @param callback The event listener.\n */\nfunction removeEventAttributeListener(target, type) {\n    const listMap = $$2(target, \"target\");\n    const list = listMap[String(type)];\n    if (list && list.attrListener) {\n        removeListener(list, list.attrListener.callback, false);\n        list.attrCallback = list.attrListener = undefined;\n    }\n}\n/**\n * Define the callback function for the given listener list object.\n * It calls `attrCallback` property if the property value is a function.\n * @param list The `ListenerList` object.\n */\nfunction defineEventAttributeCallback(list) {\n    return function (event) {\n        const callback = list.attrCallback;\n        if (typeof callback === \"function\") {\n            callback.call(this, event);\n        }\n    };\n}\n/**\n * Define an event attribute.\n * @param target The `EventTarget` object to define an event attribute.\n * @param type The event type to define.\n * @param _eventClass Unused, but to infer `Event` class type.\n * @deprecated Use `getEventAttributeValue`/`setEventAttributeValue` pair on your derived class instead because of static analysis friendly.\n */\nfunction defineEventAttribute(target, type, _eventClass) {\n    Object.defineProperty(target, `on${type}`, {\n        get() {\n            return getEventAttributeValue(this, type);\n        },\n        set(value) {\n            setEventAttributeValue(this, type, value);\n        },\n        configurable: true,\n        enumerable: true,\n    });\n}var PostMessageType;\n(function (PostMessageType) {\n    PostMessageType[\"DATA_AVAILABLE\"] = \"DATA_AVAILABLE\";\n    PostMessageType[\"START_RECORDING\"] = \"START_RECORDING\";\n    PostMessageType[\"STOP_RECORDING\"] = \"STOP_RECORDING\";\n    PostMessageType[\"ERROR\"] = \"ERROR\";\n    PostMessageType[\"BLOB_READY\"] = \"BLOB_READY\";\n    PostMessageType[\"WORKER_RECORDING\"] = \"WORKER_RECORDING\";\n})(PostMessageType || (PostMessageType = {}));\nconst startRecordingMessage = (config) => ({\n    type: PostMessageType.START_RECORDING,\n    config,\n});\nconst dataAvailableMessage = (data) => ({\n    type: PostMessageType.DATA_AVAILABLE,\n    data,\n});\nconst stopRecordingMessage = () => ({\n    type: PostMessageType.STOP_RECORDING,\n});const MP3_MIME_TYPE = 'audio/mpeg';\nconst SafeAudioContext = window.AudioContext || window.webkitAudioContext;\nconst createGain = (ctx) => (ctx.createGain || ctx.createGainNode).call(ctx);\nconst createScriptProcessor = (ctx) => (ctx.createScriptProcessor || ctx.createJavaScriptNode).call(ctx, 4096, 1, 1);\nclass Mp3MediaRecorder extends EventTarget {\n    constructor(stream, { audioContext, worker }) {\n        super();\n        this.mimeType = MP3_MIME_TYPE;\n        this.state = 'inactive';\n        this.audioBitsPerSecond = 0;\n        this.videoBitsPerSecond = 0;\n        this.isInternalAudioContext = false;\n        this.onWorkerMessage = (event) => {\n            const message = event.data;\n            switch (message.type) {\n                case PostMessageType.WORKER_RECORDING: {\n                    const event = new Event('start');\n                    this.dispatchEvent(event);\n                    this.state = 'recording';\n                    break;\n                }\n                case PostMessageType.ERROR: {\n                    const error = new Error(message.error);\n                    const errEvent = new Event('error');\n                    errEvent.error = error;\n                    this.dispatchEvent(errEvent);\n                    this.state = 'inactive';\n                    break;\n                }\n                case PostMessageType.BLOB_READY: {\n                    const stopEvent = new Event('stop');\n                    const fallbackDataEvent = new Event('dataavailable');\n                    fallbackDataEvent.data = message.blob;\n                    fallbackDataEvent.timecode = Date.now();\n                    const dataEvent = window.BlobEvent\n                        ? new BlobEvent('dataavailable', {\n                            data: message.blob,\n                            timecode: Date.now(),\n                        })\n                        : fallbackDataEvent;\n                    this.dispatchEvent(dataEvent);\n                    this.dispatchEvent(stopEvent);\n                    this.state = 'inactive';\n                    break;\n                }\n                case PostMessageType.ERROR: {\n                    throw new Error(message.error);\n                }\n            }\n        };\n        if (!worker) {\n            throw new Error('No worker provided in Mp3MediaRecorder constructor.');\n        }\n        this.stream = stream;\n        this.isInternalAudioContext = !audioContext;\n        this.audioContext = audioContext || new SafeAudioContext();\n        this.worker = worker;\n        this.sourceNode = this.audioContext.createMediaStreamSource(stream);\n        this.gainNode = createGain(this.audioContext);\n        this.gainNode.gain.value = 1;\n        this.processorNode = createScriptProcessor(this.audioContext);\n        this.sourceNode.connect(this.gainNode);\n        this.gainNode.connect(this.processorNode);\n        this.worker.onmessage = this.onWorkerMessage;\n    }\n    start() {\n        if (this.state !== 'inactive') {\n            throw this.getStateError('start');\n        }\n        this.processorNode.onaudioprocess = (event) => {\n            this.worker.postMessage(dataAvailableMessage(event.inputBuffer.getChannelData(0)));\n        };\n        this.processorNode.connect(this.audioContext.destination);\n        if (this.audioContext.state === 'closed') {\n            this.audioContext = new AudioContext();\n        }\n        else if (this.audioContext.state === 'suspended') {\n            this.audioContext.resume();\n        }\n        this.worker.postMessage(startRecordingMessage({ sampleRate: this.audioContext.sampleRate }));\n    }\n    stop() {\n        if (this.state === 'inactive') {\n            throw this.getStateError('stop');\n        }\n        this.processorNode.disconnect();\n        if (this.isInternalAudioContext) {\n            this.audioContext.close();\n        }\n        this.worker.postMessage(stopRecordingMessage());\n    }\n    pause() {\n        if (this.state === 'inactive') {\n            throw this.getStateError('pause');\n        }\n        this.audioContext.suspend().then(() => {\n            this.state = 'paused';\n            this.dispatchEvent(new Event('pause'));\n        });\n    }\n    resume() {\n        if (this.state === 'inactive') {\n            throw this.getStateError('resume');\n        }\n        this.audioContext.resume().then(() => {\n            this.state = 'recording';\n            this.dispatchEvent(new Event('resume'));\n        });\n    }\n    requestData() {\n        // not implemented, dataavailable event only fires when encoding is finished\n    }\n    getStateError(method) {\n        return new Error(`Failed to execute '${method}' on 'MediaRecorder': The MediaRecorder's state is '${this.state}'.`);\n    }\n}\nMp3MediaRecorder.isTypeSupported = (mimeType) => mimeType === MP3_MIME_TYPE;\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'start');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'stop');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'pause');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'resume');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'dataavailable');\ndefineEventAttribute(Mp3MediaRecorder.prototype, 'error');export{Mp3MediaRecorder};"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}