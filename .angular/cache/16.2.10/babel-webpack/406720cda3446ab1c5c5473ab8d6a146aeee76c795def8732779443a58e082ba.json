{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreTag } from '@features/tag/services/tag';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModDataAction, AddonModDataProvider, AddonModDataTemplateMode } from '../../services/data';\nimport { AddonModDataHelper } from '../../services/data-helper';\nimport { AddonModDataOffline } from '../../services/data-offline';\nimport { AddonModDataModuleHandlerService } from '../../services/handlers/module';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { AddonModDataActionsMenuComponent } from '../actionsmenu/actionsmenu';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../../core/components/user-avatar/user-avatar\";\nimport * as i3 from \"../../../../../core/directives/fa-icon\";\nimport * as i4 from \"../../../../../core/directives/user-link\";\nimport * as i5 from \"../../../../../core/directives/update-non-reactive-attributes\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"../../../../../core/features/comments/components/comments/comments\";\nimport * as i8 from \"../../../../../core/features/tag/components/list/list\";\nimport * as i9 from \"../../../../../core/pipes/format-date\";\nimport * as i10 from \"@ngx-translate/core\";\nfunction AddonModDataActionComponent_ion_button_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_0_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.actionsMenu($event));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_data.actionsmenu\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.viewEntry());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 9);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_data.showmore\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.editEntry());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.edit\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 11);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_3_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.deleteEntry());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 12);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.delete\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 11);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_4_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r22);\n      const ctx_r21 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r21.undoDelete());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.restore\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_5_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.approveEntry());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_data.approve\"));\n  }\n}\nfunction AddonModDataActionComponent_ion_button_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r26 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function AddonModDataActionComponent_ion_button_6_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r26);\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.disapproveEntry());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 15);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_data.disapprove\"));\n  }\n}\nfunction AddonModDataActionComponent_core_comments_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-comments\", 16);\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"instanceId\", ctx_r7.database.coursemodule)(\"itemId\", ctx_r7.entry.id)(\"courseId\", ctx_r7.database.course);\n  }\n}\nfunction AddonModDataActionComponent_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreFormatDate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r8.entry.timecreated * 1000));\n  }\n}\nfunction AddonModDataActionComponent_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreFormatDate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, ctx_r9.entry.timemodified * 1000));\n  }\n}\nfunction AddonModDataActionComponent_core_user_avatar_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-user-avatar\", 17);\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"user\", ctx_r10.entry)(\"courseId\", ctx_r10.database.course)(\"userId\", ctx_r10.entry.userid)(\"profileUrl\", ctx_r10.userPicture);\n  }\n}\nfunction AddonModDataActionComponent_a_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"courseId\", ctx_r11.database.course)(\"userId\", ctx_r11.entry.userid)(\"title\", ctx_r11.entry.fullname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r11.entry.fullname, \"\\n\");\n  }\n}\nfunction AddonModDataActionComponent_core_tag_list_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-tag-list\", 19);\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"tags\", ctx_r12.entry.tags);\n  }\n}\n/**\n * Component that displays a database action.\n */\nexport class AddonModDataActionComponent {\n  constructor() {\n    this.title = ''; // Name of the module.\n    this.group = 0; // Module group.\n    this.tagsEnabled = false;\n    this.siteId = CoreSites.getCurrentSiteId();\n    this.tagsEnabled = CoreTag.areTagsAvailableInSite();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (_this.action == AddonModDataAction.USERPICTURE) {\n        const profile = yield CoreUser.getProfile(_this.entry.userid, _this.database.course);\n        _this.userPicture = profile.profileimageurl;\n      }\n    })();\n  }\n  /**\n   * Approve the entry.\n   */\n  approveEntry() {\n    AddonModDataHelper.approveOrDisapproveEntry(this.database.id, this.entry.id, true, this.database.course);\n  }\n  /**\n   * Show confirmation modal for deleting the entry.\n   */\n  deleteEntry() {\n    AddonModDataHelper.showDeleteEntryModal(this.database.id, this.entry.id, this.database.course);\n  }\n  /**\n   * Disapprove the entry.\n   */\n  disapproveEntry() {\n    AddonModDataHelper.approveOrDisapproveEntry(this.database.id, this.entry.id, false, this.database.course);\n  }\n  /**\n   * Go to the edit page of the entry.\n   */\n  editEntry() {\n    const params = {\n      title: this.title\n    };\n    const basePath = AddonModDataModuleHandlerService.PAGE_NAME;\n    CoreNavigator.navigateToSitePath(`${basePath}/${this.database.course}/${this.database.coursemodule}/edit/${this.entry.id}`, {\n      params\n    });\n  }\n  /**\n   * Go to the view page of the entry.\n   */\n  viewEntry() {\n    const params = {\n      title: this.title,\n      group: this.group,\n      offset: this.offset,\n      sortBy: this.sortBy,\n      sortDirection: this.sortDirection\n    };\n    const basePath = AddonModDataModuleHandlerService.PAGE_NAME;\n    CoreNavigator.navigateToSitePath(`${basePath}/${this.database.course}/${this.database.coursemodule}/${this.entry.id}`, {\n      params\n    });\n  }\n  /**\n   * Undo delete action.\n   *\n   * @returns Solved when done.\n   */\n  undoDelete() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const dataId = _this2.database.id;\n      const entryId = _this2.entry.id;\n      yield AddonModDataOffline.getEntry(dataId, entryId, AddonModDataAction.DELETE, _this2.siteId);\n      // Found. Just delete the action.\n      yield AddonModDataOffline.deleteEntry(dataId, entryId, AddonModDataAction.DELETE, _this2.siteId);\n      CoreEvents.trigger(AddonModDataProvider.ENTRY_CHANGED, {\n        dataId: dataId,\n        entryId: entryId\n      }, _this2.siteId);\n    })();\n  }\n  /**\n   * Open actions menu popover.\n   */\n  actionsMenu(event) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      var _this3$access;\n      event.stopPropagation();\n      event.preventDefault();\n      const items = [];\n      if (_this3.entry.canmanageentry) {\n        items.push(_this3.entry.deleted ? {\n          action: () => _this3.undoDelete(),\n          text: 'core.restore',\n          icon: 'fas-rotate-left'\n        } : {\n          action: () => _this3.deleteEntry(),\n          text: 'core.delete',\n          icon: 'fas-trash'\n        });\n        if (!_this3.entry.deleted) {\n          items.unshift({\n            action: () => _this3.editEntry(),\n            text: 'core.edit',\n            icon: 'fas-pen'\n          });\n        }\n      }\n      if (_this3.database.approval && (_this3$access = _this3.access) !== null && _this3$access !== void 0 && _this3$access.canapprove && !_this3.entry.deleted) {\n        items.push(!_this3.entry.approved ? {\n          action: () => _this3.approveEntry(),\n          text: 'addon.mod_data.approve',\n          icon: 'fas-thumbs-up'\n        } : {\n          action: () => _this3.disapproveEntry(),\n          text: 'addon.mod_data.disapprove',\n          icon: 'far-thumbs-down'\n        });\n      }\n      if (_this3.mode === AddonModDataTemplateMode.LIST) {\n        items.unshift({\n          action: () => _this3.viewEntry(),\n          text: 'addon.mod_data.showmore',\n          icon: 'fas-magnifying-glass-plus'\n        });\n      }\n      yield CoreDomUtils.openPopover({\n        component: AddonModDataActionsMenuComponent,\n        componentProps: {\n          items\n        },\n        id: 'actionsmenu-popover',\n        event\n      });\n    })();\n  }\n}\n_class = AddonModDataActionComponent;\n_class.ɵfac = function AddonModDataActionComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-data-action\"]],\n  inputs: {\n    access: \"access\",\n    mode: \"mode\",\n    action: \"action\",\n    entry: \"entry\",\n    database: \"database\",\n    title: \"title\",\n    group: \"group\",\n    offset: \"offset\",\n    sortBy: \"sortBy\",\n    sortDirection: \"sortDirection\"\n  },\n  decls: 13,\n  vars: 13,\n  consts: [[\"size\", \"small\", \"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [\"size\", \"small\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [\"contextLevel\", \"module\", \"component\", \"mod_data\", \"area\", \"database_entry\", 3, \"instanceId\", \"itemId\", \"courseId\", 4, \"ngIf\"], [4, \"ngIf\"], [\"slot\", \"start\", 3, \"user\", \"courseId\", \"userId\", \"profileUrl\", 4, \"ngIf\"], [\"core-user-link\", \"\", 3, \"courseId\", \"userId\", \"title\", 4, \"ngIf\"], [3, \"tags\", 4, \"ngIf\"], [\"size\", \"small\", \"fill\", \"clear\", 3, \"click\"], [\"name\", \"fas-ellipsis-vertical\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-magnifying-glass-plus\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-pen\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"size\", \"small\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-rotate-left\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-thumbs-up\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"far-thumbs-down\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"contextLevel\", \"module\", \"component\", \"mod_data\", \"area\", \"database_entry\", 3, \"instanceId\", \"itemId\", \"courseId\"], [\"slot\", \"start\", 3, \"user\", \"courseId\", \"userId\", \"profileUrl\"], [\"core-user-link\", \"\", 3, \"courseId\", \"userId\", \"title\"], [3, \"tags\"]],\n  template: function AddonModDataActionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AddonModDataActionComponent_ion_button_0_Template, 3, 3, \"ion-button\", 0);\n      i0.ɵɵtemplate(1, AddonModDataActionComponent_ion_button_1_Template, 3, 3, \"ion-button\", 0);\n      i0.ɵɵtemplate(2, AddonModDataActionComponent_ion_button_2_Template, 3, 3, \"ion-button\", 0);\n      i0.ɵɵtemplate(3, AddonModDataActionComponent_ion_button_3_Template, 3, 3, \"ion-button\", 1);\n      i0.ɵɵtemplate(4, AddonModDataActionComponent_ion_button_4_Template, 3, 3, \"ion-button\", 1);\n      i0.ɵɵtemplate(5, AddonModDataActionComponent_ion_button_5_Template, 3, 3, \"ion-button\", 0);\n      i0.ɵɵtemplate(6, AddonModDataActionComponent_ion_button_6_Template, 3, 3, \"ion-button\", 0);\n      i0.ɵɵtemplate(7, AddonModDataActionComponent_core_comments_7_Template, 1, 3, \"core-comments\", 2);\n      i0.ɵɵtemplate(8, AddonModDataActionComponent_span_8_Template, 3, 3, \"span\", 3);\n      i0.ɵɵtemplate(9, AddonModDataActionComponent_span_9_Template, 3, 3, \"span\", 3);\n      i0.ɵɵtemplate(10, AddonModDataActionComponent_core_user_avatar_10_Template, 1, 4, \"core-user-avatar\", 4);\n      i0.ɵɵtemplate(11, AddonModDataActionComponent_a_11_Template, 2, 4, \"a\", 5);\n      i0.ɵɵtemplate(12, AddonModDataActionComponent_core_tag_list_12_Template, 1, 1, \"core-tag-list\", 6);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"actionsmenu\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"more\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"edit\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"delete\" && !ctx.entry.deleted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"delete\" && ctx.entry.deleted);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"approve\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"disapprove\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"comments\" && ctx.mode === \"list\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"timeadded\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"timemodified\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"userpicture\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.action === \"user\" && ctx.entry);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.tagsEnabled && ctx.action === \"tags\" && ctx.entry);\n    }\n  },\n  dependencies: [i1.NgIf, i2.CoreUserAvatarComponent, i3.CoreFaIconDirective, i4.CoreUserLinkDirective, i5.CoreUpdateNonReactiveAttributesDirective, i6.IonButton, i6.IonIcon, i7.CoreCommentsCommentsComponent, i8.CoreTagListComponent, i9.CoreFormatDatePipe, i10.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreTag","CoreUser","CoreNavigator","CoreSites","CoreEvents","AddonModDataAction","AddonModDataProvider","AddonModDataTemplateMode","AddonModDataHelper","AddonModDataOffline","AddonModDataModuleHandlerService","CoreDomUtils","AddonModDataActionsMenuComponent","i0","ɵɵelementStart","ɵɵlistener","AddonModDataActionComponent_ion_button_0_Template_ion_button_click_0_listener","$event","ɵɵrestoreView","_r14","ctx_r13","ɵɵnextContext","ɵɵresetView","actionsMenu","ɵɵelement","ɵɵelementEnd","ɵɵattribute","ɵɵpipeBind1","AddonModDataActionComponent_ion_button_1_Template_ion_button_click_0_listener","_r16","ctx_r15","viewEntry","AddonModDataActionComponent_ion_button_2_Template_ion_button_click_0_listener","_r18","ctx_r17","editEntry","AddonModDataActionComponent_ion_button_3_Template_ion_button_click_0_listener","_r20","ctx_r19","deleteEntry","AddonModDataActionComponent_ion_button_4_Template_ion_button_click_0_listener","_r22","ctx_r21","undoDelete","AddonModDataActionComponent_ion_button_5_Template_ion_button_click_0_listener","_r24","ctx_r23","approveEntry","AddonModDataActionComponent_ion_button_6_Template_ion_button_click_0_listener","_r26","ctx_r25","disapproveEntry","ɵɵproperty","ctx_r7","database","coursemodule","entry","id","course","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ctx_r8","timecreated","ctx_r9","timemodified","ctx_r10","userid","userPicture","ctx_r11","fullname","ɵɵtextInterpolate1","ctx_r12","tags","AddonModDataActionComponent","constructor","title","group","tagsEnabled","siteId","getCurrentSiteId","areTagsAvailableInSite","ngOnInit","_this","_asyncToGenerator","action","USERPICTURE","profile","getProfile","profileimageurl","approveOrDisapproveEntry","showDeleteEntryModal","params","basePath","PAGE_NAME","navigateToSitePath","offset","sortBy","sortDirection","_this2","dataId","entryId","getEntry","DELETE","trigger","ENTRY_CHANGED","event","_this3","_this3$access","stopPropagation","preventDefault","items","canmanageentry","push","deleted","text","icon","unshift","approval","access","canapprove","approved","mode","LIST","openPopover","component","componentProps","selectors","inputs","decls","vars","consts","template","AddonModDataActionComponent_Template","rf","ctx","ɵɵtemplate","AddonModDataActionComponent_ion_button_0_Template","AddonModDataActionComponent_ion_button_1_Template","AddonModDataActionComponent_ion_button_2_Template","AddonModDataActionComponent_ion_button_3_Template","AddonModDataActionComponent_ion_button_4_Template","AddonModDataActionComponent_ion_button_5_Template","AddonModDataActionComponent_ion_button_6_Template","AddonModDataActionComponent_core_comments_7_Template","AddonModDataActionComponent_span_8_Template","AddonModDataActionComponent_span_9_Template","AddonModDataActionComponent_core_user_avatar_10_Template","AddonModDataActionComponent_a_11_Template","AddonModDataActionComponent_core_tag_list_12_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/data/components/action/action.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/data/components/action/addon-mod-data-action.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, Input } from '@angular/core';\nimport { Params } from '@angular/router';\nimport { CoreTag } from '@features/tag/services/tag';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreEvents } from '@singletons/events';\nimport {\n    AddonModDataAction,\n    AddonModDataData,\n    AddonModDataEntry,\n    AddonModDataGetDataAccessInformationWSResponse,\n    AddonModDataProvider,\n    AddonModDataTemplateMode,\n} from '../../services/data';\nimport { AddonModDataHelper } from '../../services/data-helper';\nimport { AddonModDataOffline } from '../../services/data-offline';\nimport { AddonModDataModuleHandlerService } from '../../services/handlers/module';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { AddonModDataActionsMenuComponent, AddonModDataActionsMenuItem } from '../actionsmenu/actionsmenu';\n\n/**\n * Component that displays a database action.\n */\n@Component({\n    selector: 'addon-mod-data-action',\n    templateUrl: 'addon-mod-data-action.html',\n})\nexport class AddonModDataActionComponent implements OnInit {\n\n    @Input() access?: AddonModDataGetDataAccessInformationWSResponse; // Access info.\n    @Input() mode!: AddonModDataTemplateMode; // The render mode.\n    @Input() action!: AddonModDataAction; // The field to render.\n    @Input() entry!: AddonModDataEntry; // The value of the field.\n    @Input() database!: AddonModDataData; // Database object.\n    @Input() title = ''; // Name of the module.\n    @Input() group = 0; // Module group.\n    @Input() offset?: number; // Offset of the entry.\n    @Input() sortBy?: string | number; // Sort by used to calculate the offset.\n    @Input() sortDirection?: string; // Sort direction used to calculate the offset.\n\n    siteId: string;\n    userPicture?: string;\n    tagsEnabled = false;\n\n    constructor() {\n        this.siteId = CoreSites.getCurrentSiteId();\n        this.tagsEnabled = CoreTag.areTagsAvailableInSite();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        if (this.action == AddonModDataAction.USERPICTURE) {\n            const profile = await CoreUser.getProfile(this.entry.userid, this.database.course);\n            this.userPicture = profile.profileimageurl;\n        }\n    }\n\n    /**\n     * Approve the entry.\n     */\n    approveEntry(): void {\n        AddonModDataHelper.approveOrDisapproveEntry(this.database.id, this.entry.id, true, this.database.course);\n    }\n\n    /**\n     * Show confirmation modal for deleting the entry.\n     */\n    deleteEntry(): void {\n        AddonModDataHelper.showDeleteEntryModal(this.database.id, this.entry.id, this.database.course);\n    }\n\n    /**\n     * Disapprove the entry.\n     */\n    disapproveEntry(): void {\n        AddonModDataHelper.approveOrDisapproveEntry(this.database.id, this.entry.id, false, this.database.course);\n    }\n\n    /**\n     * Go to the edit page of the entry.\n     */\n    editEntry(): void {\n        const params: Params = {\n            title: this.title,\n        };\n\n        const basePath = AddonModDataModuleHandlerService.PAGE_NAME;\n        CoreNavigator.navigateToSitePath(\n            `${basePath}/${this.database.course}/${this.database.coursemodule}/edit/${this.entry.id}`,\n            { params },\n        );\n    }\n\n    /**\n     * Go to the view page of the entry.\n     */\n    viewEntry(): void {\n        const params: Params = {\n            title: this.title,\n            group: this.group,\n            offset: this.offset,\n            sortBy: this.sortBy,\n            sortDirection: this.sortDirection,\n        };\n\n        const basePath = AddonModDataModuleHandlerService.PAGE_NAME;\n        CoreNavigator.navigateToSitePath(\n            `${basePath}/${this.database.course}/${this.database.coursemodule}/${this.entry.id}`,\n            { params },\n        );\n    }\n\n    /**\n     * Undo delete action.\n     *\n     * @returns Solved when done.\n     */\n    async undoDelete(): Promise<void> {\n        const dataId = this.database.id;\n        const entryId = this.entry.id;\n\n        await AddonModDataOffline.getEntry(dataId, entryId, AddonModDataAction.DELETE, this.siteId);\n\n        // Found. Just delete the action.\n        await AddonModDataOffline.deleteEntry(dataId, entryId, AddonModDataAction.DELETE, this.siteId);\n        CoreEvents.trigger(AddonModDataProvider.ENTRY_CHANGED, { dataId: dataId, entryId: entryId }, this.siteId);\n    }\n\n    /**\n     * Open actions menu popover.\n     */\n    async actionsMenu(event: Event): Promise<void> {\n        event.stopPropagation();\n        event.preventDefault();\n\n        const items: AddonModDataActionsMenuItem[] = [];\n\n        if (this.entry.canmanageentry) {\n            items.push(\n                this.entry.deleted\n                    ? {\n                        action: () => this.undoDelete(),\n                        text: 'core.restore',\n                        icon: 'fas-rotate-left',\n                    }\n                    : {\n                        action: () => this.deleteEntry(),\n                        text: 'core.delete',\n                        icon: 'fas-trash',\n                    },\n            );\n\n            if (!this.entry.deleted) {\n                items.unshift({\n                    action: () => this.editEntry(),\n                    text: 'core.edit',\n                    icon: 'fas-pen',\n                });\n            }\n        }\n\n        if (this.database.approval && this.access?.canapprove && !this.entry.deleted) {\n            items.push(\n                !this.entry.approved\n                    ? {\n                        action: () => this.approveEntry(),\n                        text: 'addon.mod_data.approve',\n                        icon: 'fas-thumbs-up',\n                    }\n                    : {\n                        action: () => this.disapproveEntry(),\n                        text: 'addon.mod_data.disapprove',\n                        icon: 'far-thumbs-down',\n                    },\n            );\n        }\n\n        if (this.mode === AddonModDataTemplateMode.LIST) {\n            items.unshift({\n                action: () => this.viewEntry(),\n                text: 'addon.mod_data.showmore',\n                icon: 'fas-magnifying-glass-plus',\n            });\n        }\n\n        await CoreDomUtils.openPopover({\n            component: AddonModDataActionsMenuComponent,\n            componentProps: { items },\n            id: 'actionsmenu-popover',\n            event,\n        });\n    }\n\n}\n","<ion-button size=\"small\" *ngIf=\"action === 'actionsmenu'\" fill=\"clear\" (click)=\"actionsMenu($event)\"\n    [attr.aria-label]=\"'addon.mod_data.actionsmenu' | translate\">\n    <ion-icon name=\"fas-ellipsis-vertical\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'more'\" fill=\"clear\" (click)=\"viewEntry()\"\n    [attr.aria-label]=\"'addon.mod_data.showmore' | translate\">\n    <ion-icon name=\"fas-magnifying-glass-plus\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'edit'\" fill=\"clear\" (click)=\"editEntry()\" [attr.aria-label]=\"'core.edit' | translate\">\n    <ion-icon name=\"fas-pen\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'delete' && !entry.deleted\" fill=\"clear\" color=\"danger\" (click)=\"deleteEntry()\"\n    [attr.aria-label]=\"'core.delete' | translate\">\n    <ion-icon name=\"fas-trash\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'delete' && entry.deleted\" fill=\"clear\" color=\"danger\" (click)=\"undoDelete()\"\n    [attr.aria-label]=\"'core.restore' | translate\">\n    <ion-icon name=\"fas-rotate-left\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'approve'\" fill=\"clear\" (click)=\"approveEntry()\"\n    [attr.aria-label]=\"'addon.mod_data.approve' | translate\">\n    <ion-icon name=\"fas-thumbs-up\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<ion-button size=\"small\" *ngIf=\"action === 'disapprove'\" fill=\"clear\" (click)=\"disapproveEntry()\"\n    [attr.aria-label]=\"'addon.mod_data.disapprove' | translate\">\n    <ion-icon name=\"far-thumbs-down\" slot=\"icon-only\" aria-hidden=\"true\" />\n</ion-button>\n\n<core-comments *ngIf=\"action === 'comments' && mode === 'list'\" contextLevel=\"module\" [instanceId]=\"database.coursemodule\"\n    component=\"mod_data\" [itemId]=\"entry.id\" area=\"database_entry\" [courseId]=\"database.course\" />\n\n<span *ngIf=\"action === 'timeadded'\">{{ entry.timecreated * 1000 | coreFormatDate }}</span>\n<span *ngIf=\"action === 'timemodified'\">{{ entry.timemodified * 1000 | coreFormatDate }}</span>\n\n<core-user-avatar *ngIf=\"action === 'userpicture'\" [user]=\"entry\" slot=\"start\" [courseId]=\"database.course\" [userId]=\"entry.userid\"\n    [profileUrl]=\"userPicture\" />\n\n<a *ngIf=\"action === 'user' && entry\" core-user-link [courseId]=\"database.course\" [userId]=\"entry.userid\" [title]=\"entry.fullname\">\n    {{entry.fullname}}\n</a>\n\n<core-tag-list *ngIf=\"tagsEnabled && action === 'tags' && entry\" [tags]=\"entry.tags\" />\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}