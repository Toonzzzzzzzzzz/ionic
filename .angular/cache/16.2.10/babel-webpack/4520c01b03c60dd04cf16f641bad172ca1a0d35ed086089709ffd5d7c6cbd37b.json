{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreUserDelegateService, CoreUserDelegateContext } from '@features/user/services/user-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\nimport { AddonNotes } from '../notes';\nimport * as i0 from \"@angular/core\";\n/**\n * Profile notes handler.\n */\nexport class AddonNotesUserHandlerService {\n  constructor() {\n    this.name = 'AddonNotes:notes';\n    this.priority = 250;\n    this.type = CoreUserDelegateService.TYPE_NEW_PAGE;\n    this.cacheEnabled = true;\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return AddonNotes.isPluginEnabled();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabledForUser(user, context, contextId) {\n    return _asyncToGenerator(function* () {\n      // Active course required.\n      if (context !== CoreUserDelegateContext.COURSE || !contextId || user.id == CoreSites.getCurrentSiteUserId()) {\n        return false;\n      }\n      // We are not using isEnabledForCourse because we need to cache the call.\n      return AddonNotes.isPluginViewNotesEnabledForCourse(contextId);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getDisplayData() {\n    return {\n      icon: 'fas-receipt',\n      title: 'addon.notes.notes',\n      class: 'addon-notes-handler',\n      action: (event, user, context, contextId) => {\n        event.preventDefault();\n        event.stopPropagation();\n        CoreNavigator.navigateToSitePath('/notes', {\n          params: {\n            courseId: contextId,\n            userId: user.id\n          }\n        });\n      }\n    };\n  }\n}\n_class = AddonNotesUserHandlerService;\n_class.ɵfac = function AddonNotesUserHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonNotesUserHandler = makeSingleton(AddonNotesUserHandlerService);","map":{"version":3,"names":["CoreUserDelegateService","CoreUserDelegateContext","CoreNavigator","CoreSites","makeSingleton","AddonNotes","AddonNotesUserHandlerService","constructor","name","priority","type","TYPE_NEW_PAGE","cacheEnabled","isEnabled","_asyncToGenerator","isPluginEnabled","isEnabledForUser","user","context","contextId","COURSE","id","getCurrentSiteUserId","isPluginViewNotesEnabledForCourse","getDisplayData","icon","title","class","action","event","preventDefault","stopPropagation","navigateToSitePath","params","courseId","userId","factory","ɵfac","providedIn","AddonNotesUserHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/notes/services/handlers/user.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreUserProfile } from '@features/user/services/user';\nimport {\n    CoreUserProfileHandler,\n    CoreUserDelegateService,\n    CoreUserProfileHandlerData,\n    CoreUserDelegateContext,\n} from '@features/user/services/user-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\nimport { AddonNotes } from '../notes';\n\n/**\n * Profile notes handler.\n */\n@Injectable( { providedIn: 'root' } )\nexport class AddonNotesUserHandlerService implements CoreUserProfileHandler {\n\n    name = 'AddonNotes:notes';\n    priority = 250;\n    type = CoreUserDelegateService.TYPE_NEW_PAGE;\n    cacheEnabled = true;\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        return AddonNotes.isPluginEnabled();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabledForUser(user: CoreUserProfile, context: CoreUserDelegateContext, contextId: number): Promise<boolean> {\n        // Active course required.\n        if (context !== CoreUserDelegateContext.COURSE || !contextId || user.id == CoreSites.getCurrentSiteUserId()) {\n            return false;\n        }\n\n        // We are not using isEnabledForCourse because we need to cache the call.\n        return AddonNotes.isPluginViewNotesEnabledForCourse(contextId);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getDisplayData(): CoreUserProfileHandlerData {\n        return {\n            icon: 'fas-receipt',\n            title: 'addon.notes.notes',\n            class: 'addon-notes-handler',\n            action: (event, user, context, contextId): void => {\n                event.preventDefault();\n                event.stopPropagation();\n                CoreNavigator.navigateToSitePath('/notes', {\n                    params: { courseId: contextId, userId: user.id },\n                });\n            },\n        };\n    }\n\n}\nexport const AddonNotesUserHandler = makeSingleton(AddonNotesUserHandlerService);\n"],"mappings":";;AAgBA,SAEIA,uBAAuB,EAEvBC,uBAAuB,QACpB,uCAAuC;AAC9C,SAASC,aAAa,QAAQ,qBAAqB;AACnD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,UAAU,QAAQ,UAAU;;AAErC;;;AAIA,OAAM,MAAOC,4BAA4B;EADzCC,YAAA;IAGI,KAAAC,IAAI,GAAG,kBAAkB;IACzB,KAAAC,QAAQ,GAAG,GAAG;IACd,KAAAC,IAAI,GAAGV,uBAAuB,CAACW,aAAa;IAC5C,KAAAC,YAAY,GAAG,IAAI;;EAEnB;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAOT,UAAU,CAACU,eAAe,EAAE;IAAC;EACxC;EAEA;;;EAGMC,gBAAgBA,CAACC,IAAqB,EAAEC,OAAgC,EAAEC,SAAiB;IAAA,OAAAL,iBAAA;MAC7F;MACA,IAAII,OAAO,KAAKjB,uBAAuB,CAACmB,MAAM,IAAI,CAACD,SAAS,IAAIF,IAAI,CAACI,EAAE,IAAIlB,SAAS,CAACmB,oBAAoB,EAAE,EAAE;QACzG,OAAO,KAAK;;MAGhB;MACA,OAAOjB,UAAU,CAACkB,iCAAiC,CAACJ,SAAS,CAAC;IAAC;EACnE;EAEA;;;EAGAK,cAAcA,CAAA;IACV,OAAO;MACHC,IAAI,EAAE,aAAa;MACnBC,KAAK,EAAE,mBAAmB;MAC1BC,KAAK,EAAE,qBAAqB;MAC5BC,MAAM,EAAEA,CAACC,KAAK,EAAEZ,IAAI,EAAEC,OAAO,EAAEC,SAAS,KAAU;QAC9CU,KAAK,CAACC,cAAc,EAAE;QACtBD,KAAK,CAACE,eAAe,EAAE;QACvB7B,aAAa,CAAC8B,kBAAkB,CAAC,QAAQ,EAAE;UACvCC,MAAM,EAAE;YAAEC,QAAQ,EAAEf,SAAS;YAAEgB,MAAM,EAAElB,IAAI,CAACI;UAAE;SACjD,CAAC;MACN;KACH;EACL;;SA3CSf,4BAA4B;;mBAA5BA,MAA4B;AAAA;;SAA5BA,MAA4B;EAAA8B,OAAA,EAA5B9B,MAA4B,CAAA+B,IAAA;EAAAC,UAAA,EADd;AAAM;AA+CjC,OAAO,MAAMC,qBAAqB,GAAGnC,aAAa,CAACE,4BAA4B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}