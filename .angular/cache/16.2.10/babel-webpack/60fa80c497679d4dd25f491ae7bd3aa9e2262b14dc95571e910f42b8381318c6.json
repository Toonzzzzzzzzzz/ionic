{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreRoutedItemsManagerSource } from '@classes/items-management/routed-items-manager-source';\nimport { CoreReportBuilder, REPORTS_LIST_LIMIT } from '../services/reportbuilder';\n/**\n * Provides a list of reports.\n */\nexport class CoreReportBuilderReportsSource extends CoreRoutedItemsManagerSource {\n  /**\n   * @inheritdoc\n   */\n  getItemPath(report) {\n    return report.id.toString();\n  }\n  /**\n   * @inheritdoc\n   */\n  loadPageItems(page) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const reports = yield CoreReportBuilder.getReports(page, _this.getPageLength());\n      return {\n        items: reports,\n        hasMoreItems: reports.length > 0\n      };\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  setItems(reports, hasMoreItems) {\n    const sortedReports = reports.slice(0);\n    sortedReports.sort((a, b) => a.timemodified < b.timemodified ? 1 : -1);\n    super.setItems(sortedReports, hasMoreItems);\n  }\n  /**\n   * @inheritdoc\n   */\n  getPageLength() {\n    return REPORTS_LIST_LIMIT;\n  }\n}","map":{"version":3,"names":["CoreRoutedItemsManagerSource","CoreReportBuilder","REPORTS_LIST_LIMIT","CoreReportBuilderReportsSource","getItemPath","report","id","toString","loadPageItems","page","_this","_asyncToGenerator","reports","getReports","getPageLength","items","hasMoreItems","length","setItems","sortedReports","slice","sort","a","b","timemodified"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/reportbuilder/classes/reports-source.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreRoutedItemsManagerSource } from '@classes/items-management/routed-items-manager-source';\nimport { CoreReportBuilder, CoreReportBuilderReport, REPORTS_LIST_LIMIT } from '../services/reportbuilder';\n\n/**\n * Provides a list of reports.\n */\nexport class CoreReportBuilderReportsSource extends CoreRoutedItemsManagerSource<CoreReportBuilderReport> {\n\n    /**\n     * @inheritdoc\n     */\n    getItemPath(report: CoreReportBuilderReport): string {\n        return report.id.toString();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async loadPageItems(page: number): Promise<{ items: CoreReportBuilderReport[]; hasMoreItems: boolean }> {\n        const reports = await CoreReportBuilder.getReports(page, this.getPageLength());\n\n        return { items: reports, hasMoreItems: reports.length > 0 };\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected setItems(reports: CoreReportBuilderReport[], hasMoreItems: boolean): void {\n        const sortedReports = reports.slice(0);\n        sortedReports.sort((a, b) => a.timemodified < b.timemodified ? 1 : -1);\n        super.setItems(sortedReports, hasMoreItems);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected getPageLength(): number {\n        return REPORTS_LIST_LIMIT;\n    }\n\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,4BAA4B,QAAQ,uDAAuD;AACpG,SAASC,iBAAiB,EAA2BC,kBAAkB,QAAQ,2BAA2B;AAE1G;;;AAGA,OAAM,MAAOC,8BAA+B,SAAQH,4BAAqD;EAErG;;;EAGAI,WAAWA,CAACC,MAA+B;IACvC,OAAOA,MAAM,CAACC,EAAE,CAACC,QAAQ,EAAE;EAC/B;EAEA;;;EAGgBC,aAAaA,CAACC,IAAY;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACtC,MAAMC,OAAO,SAASX,iBAAiB,CAACY,UAAU,CAACJ,IAAI,EAAEC,KAAI,CAACI,aAAa,EAAE,CAAC;MAE9E,OAAO;QAAEC,KAAK,EAAEH,OAAO;QAAEI,YAAY,EAAEJ,OAAO,CAACK,MAAM,GAAG;MAAC,CAAE;IAAC;EAChE;EAEA;;;EAGUC,QAAQA,CAACN,OAAkC,EAAEI,YAAqB;IACxE,MAAMG,aAAa,GAAGP,OAAO,CAACQ,KAAK,CAAC,CAAC,CAAC;IACtCD,aAAa,CAACE,IAAI,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAKD,CAAC,CAACE,YAAY,GAAGD,CAAC,CAACC,YAAY,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;IACtE,KAAK,CAACN,QAAQ,CAACC,aAAa,EAAEH,YAAY,CAAC;EAC/C;EAEA;;;EAGUF,aAAaA,CAAA;IACnB,OAAOZ,kBAAkB;EAC7B"},"metadata":{},"sourceType":"module","externalDependencies":[]}