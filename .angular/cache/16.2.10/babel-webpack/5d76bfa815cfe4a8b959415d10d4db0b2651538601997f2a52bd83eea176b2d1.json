{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport { CoreCoursesProvider, CoreCourses } from '@features/courses/services/courses';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { AddonCourseCompletion } from '@addons/coursecompletion/services/coursecompletion';\nimport { CoreBlockBaseComponent } from '@features/block/classes/base-block-component';\nimport { CoreUtils } from '@services/utils/utils';\nimport { AddonBlockStarredCourses } from '../../services/starredcourses';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../../core/components/empty-box/empty-box\";\nimport * as i3 from \"../../../../../core/components/loading/loading\";\nimport * as i4 from \"../../../../../core/components/horizontal-scroll-controls/horizontal-scroll-controls\";\nimport * as i5 from \"../../../../../core/directives/on-resize\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"../../../../../core/features/courses/components/course-list-item/course-list-item\";\nimport * as i8 from \"@ngx-translate/core\";\nfunction AddonBlockStarredCoursesComponent_core_empty_box_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 11);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"addon.block_starredcourses.nocourses\"));\n  }\n}\nfunction AddonBlockStarredCoursesComponent_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"core-courses-course-list-item\", 12);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const course_r3 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"course\", course_r3);\n  }\n}\n/**\n * Component to render a starred courses block.\n */\nexport class AddonBlockStarredCoursesComponent extends CoreBlockBaseComponent {\n  constructor() {\n    super('AddonBlockStarredCoursesComponent');\n    this.courses = [];\n    this.isDestroyed = false;\n    this.fetchContentDefaultError = 'Error getting starred courses data.';\n    this.site = CoreSites.getRequiredCurrentSite();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      // Generate unique id for scroll element.\n      const scrollId = CoreUtils.getUniqueId('AddonBlockStarredCoursesComponent-Scroll');\n      _this.scrollElementId = `addon-block-starredcourses-scroll-${scrollId}`;\n      _this.coursesObserver = CoreEvents.on(CoreCoursesProvider.EVENT_MY_COURSES_UPDATED, data => {\n        _this.refreshCourseList(data);\n      }, CoreSites.getCurrentSiteId());\n      _superprop_getNgOnInit().call(_this);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  invalidateContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      const courseIds = _this2.courses.map(course => course.id);\n      yield _this2.invalidateCourses(courseIds);\n    })();\n  }\n  /**\n   * Invalidate list of courses.\n   *\n   * @returns Promise resolved when done.\n   */\n  invalidateCourseList() {\n    return _asyncToGenerator(function* () {\n      return AddonBlockStarredCourses.invalidateStarredCourses();\n    })();\n  }\n  /**\n   * Helper function to invalidate only selected courses.\n   *\n   * @param courseIds Course Id array.\n   * @returns Promise resolved when done.\n   */\n  invalidateCourses(courseIds) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      // Invalidate course completion data.\n      promises.push(_this3.invalidateCourseList().finally(() => CoreUtils.allPromises(courseIds.map(courseId => AddonCourseCompletion.invalidateCourseCompletion(courseId)))));\n      if (courseIds.length == 1) {\n        promises.push(CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions(courseIds[0]));\n      } else {\n        promises.push(CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions());\n      }\n      if (courseIds.length > 0) {\n        promises.push(CoreCourses.invalidateCoursesByField('ids', courseIds.join(',')));\n      }\n      yield CoreUtils.allPromises(promises);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  fetchContent() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const showCategories = _this4.block.configsRecord && _this4.block.configsRecord.displaycategories && _this4.block.configsRecord.displaycategories.value == '1';\n      // Timemodified not present, use the block WS to retrieve the info.\n      const starredCourses = yield AddonBlockStarredCourses.getStarredCourses();\n      const courseIds = starredCourses.map(course => course.id);\n      // Get the courses using getCoursesByField to get more info about each course.\n      const courses = yield CoreCourses.getCoursesByField('ids', courseIds.join(','));\n      _this4.courses = starredCourses.map(recentCourse => {\n        const course = courses.find(course => recentCourse.id == course.id);\n        return Object.assign(recentCourse, course);\n      });\n      // Get course options and extra info.\n      const options = yield CoreCourses.getCoursesAdminAndNavOptions(courseIds);\n      _this4.courses.forEach(course => {\n        course.navOptions = options.navOptions[course.id];\n        course.admOptions = options.admOptions[course.id];\n        if (!showCategories) {\n          course.categoryname = '';\n        }\n      });\n    })();\n  }\n  /**\n   * Refresh course list based on a EVENT_MY_COURSES_UPDATED event.\n   *\n   * @param data Event data.\n   * @returns Promise resolved when done.\n   */\n  refreshCourseList(data) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      if (data.action == CoreCoursesProvider.ACTION_ENROL) {\n        // Always update if user enrolled in a course.\n        // New courses shouldn't be favourite by default, but just in case.\n        return _this5.refreshContent();\n      }\n      if (data.action == CoreCoursesProvider.ACTION_STATE_CHANGED && data.state == CoreCoursesProvider.STATE_FAVOURITE) {\n        const courseIndex = _this5.courses.findIndex(course => course.id == data.courseId);\n        if (courseIndex < 0) {\n          // Not found, use WS update. Usually new favourite.\n          return _this5.refreshContent();\n        }\n        const course = _this5.courses[courseIndex];\n        if (data.value === false) {\n          // Unfavourite, just remove.\n          _this5.courses.splice(courseIndex, 1);\n        } else {\n          // List is not synced, favourite course and place it at the begining.\n          course.isfavourite = !!data.value;\n          _this5.courses.splice(courseIndex, 1);\n          _this5.courses.unshift(course);\n        }\n        yield _this5.invalidateCourseList();\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$coursesObserver;\n    this.isDestroyed = true;\n    (_this$coursesObserver = this.coursesObserver) === null || _this$coursesObserver === void 0 || _this$coursesObserver.off();\n  }\n}\n_class = AddonBlockStarredCoursesComponent;\n_class.ɵfac = function AddonBlockStarredCoursesComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-block-starredcourses\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 15,\n  vars: 10,\n  consts: [[3, \"sticky\"], [\"slot\", \"end\", 1, \"flex-row\"], [3, \"aria-controls\"], [\"scrollControls\", \"\"], [3, \"hideUntil\"], [\"image\", \"assets/img/icons/courses.svg\", 3, \"message\", 4, \"ngIf\"], [1, \"core-horizontal-scroll\", 3, \"hidden\", \"id\", \"scroll\"], [1, \"flex-row\", 3, \"onResize\"], [1, \"safe-area-pseudo-padding-start\"], [4, \"ngFor\", \"ngForOf\"], [1, \"safe-area-pseudo-padding-end\"], [\"image\", \"assets/img/icons/courses.svg\", 3, \"message\"], [\"layout\", \"summarycard\", 1, \"core-block_starredcourses\", 3, \"course\"]],\n  template: function AddonBlockStarredCoursesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r4 = i0.ɵɵgetCurrentView();\n      i0.ɵɵelementStart(0, \"ion-item-divider\", 0)(1, \"ion-label\")(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(5, \"div\", 1);\n      i0.ɵɵelement(6, \"core-horizontal-scroll-controls\", 2, 3);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"core-loading\", 4);\n      i0.ɵɵtemplate(9, AddonBlockStarredCoursesComponent_core_empty_box_9_Template, 2, 3, \"core-empty-box\", 5);\n      i0.ɵɵelementStart(10, \"div\", 6);\n      i0.ɵɵlistener(\"scroll\", function AddonBlockStarredCoursesComponent_Template_div_scroll_10_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r0 = i0.ɵɵreference(7);\n        return i0.ɵɵresetView(_r0.updateScrollPosition());\n      });\n      i0.ɵɵelementStart(11, \"div\", 7);\n      i0.ɵɵlistener(\"onResize\", function AddonBlockStarredCoursesComponent_Template_div_onResize_11_listener() {\n        i0.ɵɵrestoreView(_r4);\n        const _r0 = i0.ɵɵreference(7);\n        return i0.ɵɵresetView(_r0.updateScrollPosition());\n      });\n      i0.ɵɵelement(12, \"div\", 8);\n      i0.ɵɵtemplate(13, AddonBlockStarredCoursesComponent_ng_container_13_Template, 2, 1, \"ng-container\", 9);\n      i0.ɵɵelement(14, \"div\", 10);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"sticky\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 8, \"addon.block_starredcourses.pluginname\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"aria-controls\", ctx.scrollElementId);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.courses.length === 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", ctx.courses.length === 0)(\"id\", ctx.scrollElementId);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.courses);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreEmptyBoxComponent, i3.CoreLoadingComponent, i4.CoreHorizontalScrollControlsComponent, i5.CoreOnResizeDirective, i6.IonItemDivider, i6.IonLabel, i7.CoreCoursesCourseListItemComponent, i8.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreEvents","CoreSites","CoreCoursesProvider","CoreCourses","CoreCourseOptionsDelegate","AddonCourseCompletion","CoreBlockBaseComponent","CoreUtils","AddonBlockStarredCourses","i0","ɵɵelement","ɵɵproperty","ɵɵpipeBind1","ɵɵelementContainerStart","ɵɵelementContainerEnd","ɵɵadvance","course_r3","AddonBlockStarredCoursesComponent","constructor","courses","isDestroyed","fetchContentDefaultError","site","getRequiredCurrentSite","ngOnInit","_superprop_getNgOnInit","_this","_asyncToGenerator","scrollId","getUniqueId","scrollElementId","coursesObserver","on","EVENT_MY_COURSES_UPDATED","data","refreshCourseList","getCurrentSiteId","call","invalidateContent","_this2","courseIds","map","course","id","invalidateCourses","invalidateCourseList","invalidateStarredCourses","_this3","promises","push","finally","allPromises","courseId","invalidateCourseCompletion","length","clearAndInvalidateCoursesOptions","invalidateCoursesByField","join","fetchContent","_this4","showCategories","block","configsRecord","displaycategories","value","starredCourses","getStarredCourses","getCoursesByField","recentCourse","find","Object","assign","options","getCoursesAdminAndNavOptions","forEach","navOptions","admOptions","categoryname","_this5","action","ACTION_ENROL","refreshContent","ACTION_STATE_CHANGED","state","STATE_FAVOURITE","courseIndex","findIndex","splice","isfavourite","unshift","ngOnDestroy","_this$coursesObserver","off","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddonBlockStarredCoursesComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵtemplate","AddonBlockStarredCoursesComponent_core_empty_box_9_Template","ɵɵlistener","AddonBlockStarredCoursesComponent_Template_div_scroll_10_listener","ɵɵrestoreView","_r4","_r0","ɵɵreference","ɵɵresetView","updateScrollPosition","AddonBlockStarredCoursesComponent_Template_div_onResize_11_listener","AddonBlockStarredCoursesComponent_ng_container_13_Template","ɵɵtextInterpolate","loaded"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/block/starredcourses/components/starredcourses/starredcourses.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/block/starredcourses/components/starredcourses/addon-block-starredcourses.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy } from '@angular/core';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreSites } from '@services/sites';\nimport { CoreCoursesProvider, CoreCoursesMyCoursesUpdatedEventData, CoreCourses } from '@features/courses/services/courses';\nimport {\n    CoreCourseSearchedDataWithExtraInfoAndOptions,\n    CoreEnrolledCourseDataWithOptions,\n} from '@features/courses/services/courses-helper';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { AddonCourseCompletion } from '@addons/coursecompletion/services/coursecompletion';\nimport { CoreBlockBaseComponent } from '@features/block/classes/base-block-component';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreSite } from '@classes/sites/site';\nimport { AddonBlockStarredCourse, AddonBlockStarredCourses } from '../../services/starredcourses';\n\n/**\n * Component to render a starred courses block.\n */\n@Component({\n    selector: 'addon-block-starredcourses',\n    templateUrl: 'addon-block-starredcourses.html',\n})\nexport class AddonBlockStarredCoursesComponent extends CoreBlockBaseComponent implements OnInit, OnDestroy {\n\n    courses: AddonBlockStarredCoursesCourse[] = [];\n\n    scrollElementId!: string;\n\n    protected site: CoreSite;\n    protected isDestroyed = false;\n    protected coursesObserver?: CoreEventObserver;\n    protected fetchContentDefaultError = 'Error getting starred courses data.';\n\n    constructor() {\n        super('AddonBlockStarredCoursesComponent');\n\n        this.site = CoreSites.getRequiredCurrentSite();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        // Generate unique id for scroll element.\n        const scrollId = CoreUtils.getUniqueId('AddonBlockStarredCoursesComponent-Scroll');\n\n        this.scrollElementId = `addon-block-starredcourses-scroll-${scrollId}`;\n\n        this.coursesObserver = CoreEvents.on(\n            CoreCoursesProvider.EVENT_MY_COURSES_UPDATED,\n            (data) => {\n                this.refreshCourseList(data);\n            },\n\n            CoreSites.getCurrentSiteId(),\n        );\n\n        super.ngOnInit();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async invalidateContent(): Promise<void> {\n        const courseIds = this.courses.map((course) => course.id);\n\n        await this.invalidateCourses(courseIds);\n    }\n\n    /**\n     * Invalidate list of courses.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async invalidateCourseList(): Promise<void> {\n        return AddonBlockStarredCourses.invalidateStarredCourses();\n    }\n\n    /**\n     * Helper function to invalidate only selected courses.\n     *\n     * @param courseIds Course Id array.\n     * @returns Promise resolved when done.\n     */\n    protected async invalidateCourses(courseIds: number[]): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        // Invalidate course completion data.\n        promises.push(this.invalidateCourseList().finally(() =>\n            CoreUtils.allPromises(courseIds.map((courseId) =>\n                AddonCourseCompletion.invalidateCourseCompletion(courseId)))));\n\n        if (courseIds.length  == 1) {\n            promises.push(CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions(courseIds[0]));\n        } else {\n            promises.push(CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions());\n        }\n        if (courseIds.length > 0) {\n            promises.push(CoreCourses.invalidateCoursesByField('ids', courseIds.join(',')));\n        }\n\n        await CoreUtils.allPromises(promises);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async fetchContent(): Promise<void> {\n        const showCategories = this.block.configsRecord && this.block.configsRecord.displaycategories &&\n            this.block.configsRecord.displaycategories.value == '1';\n\n        // Timemodified not present, use the block WS to retrieve the info.\n        const starredCourses = await AddonBlockStarredCourses.getStarredCourses();\n\n        const courseIds = starredCourses.map((course) => course.id);\n\n        // Get the courses using getCoursesByField to get more info about each course.\n        const courses = await CoreCourses.getCoursesByField('ids', courseIds.join(','));\n\n        this.courses = starredCourses.map((recentCourse) => {\n            const course = courses.find((course) => recentCourse.id == course.id);\n\n            return Object.assign(recentCourse, course);\n        });\n\n        // Get course options and extra info.\n        const options = await CoreCourses.getCoursesAdminAndNavOptions(courseIds);\n        this.courses.forEach((course) => {\n            course.navOptions = options.navOptions[course.id];\n            course.admOptions = options.admOptions[course.id];\n\n            if (!showCategories) {\n                course.categoryname = '';\n            }\n        });\n    }\n\n    /**\n     * Refresh course list based on a EVENT_MY_COURSES_UPDATED event.\n     *\n     * @param data Event data.\n     * @returns Promise resolved when done.\n     */\n    protected async refreshCourseList(data: CoreCoursesMyCoursesUpdatedEventData): Promise<void> {\n        if (data.action == CoreCoursesProvider.ACTION_ENROL) {\n            // Always update if user enrolled in a course.\n            // New courses shouldn't be favourite by default, but just in case.\n            return this.refreshContent();\n        }\n\n        if (data.action == CoreCoursesProvider.ACTION_STATE_CHANGED && data.state == CoreCoursesProvider.STATE_FAVOURITE) {\n            const courseIndex = this.courses.findIndex((course) => course.id == data.courseId);\n            if (courseIndex < 0) {\n                // Not found, use WS update. Usually new favourite.\n                return this.refreshContent();\n            }\n\n            const course = this.courses[courseIndex];\n            if (data.value === false) {\n                // Unfavourite, just remove.\n                this.courses.splice(courseIndex, 1);\n            } else {\n                // List is not synced, favourite course and place it at the begining.\n                course.isfavourite = !!data.value;\n\n                this.courses.splice(courseIndex, 1);\n                this.courses.unshift(course);\n            }\n\n            await this.invalidateCourseList();\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.isDestroyed = true;\n        this.coursesObserver?.off();\n    }\n\n}\n\ntype AddonBlockStarredCoursesCourse =\n    (AddonBlockStarredCourse & CoreCourseSearchedDataWithExtraInfoAndOptions) |\n    (CoreEnrolledCourseDataWithOptions & {\n        categoryname?: string; // Category name,\n    });\n","<ion-item-divider [sticky]=\"true\">\n    <ion-label>\n        <h2>{{ 'addon.block_starredcourses.pluginname' | translate }}</h2>\n    </ion-label>\n    <div slot=\"end\" class=\"flex-row\">\n        <core-horizontal-scroll-controls #scrollControls [aria-controls]=\"scrollElementId\" />\n    </div>\n</ion-item-divider>\n<core-loading [hideUntil]=\"loaded\">\n    <core-empty-box *ngIf=\"courses.length === 0\" image=\"assets/img/icons/courses.svg\"\n        [message]=\"'addon.block_starredcourses.nocourses' | translate\" />\n    <!-- List of courses. -->\n    <div [hidden]=\"courses.length === 0\" [id]=\"scrollElementId\" class=\"core-horizontal-scroll\"\n        (scroll)=\"scrollControls.updateScrollPosition()\">\n        <div (onResize)=\"scrollControls.updateScrollPosition()\" class=\"flex-row\">\n            <div class=\"safe-area-pseudo-padding-start\"></div>\n            <ng-container *ngFor=\"let course of courses\">\n                <core-courses-course-list-item [course]=\"course\" class=\"core-block_starredcourses\" layout=\"summarycard\" />\n            </ng-container>\n            <div class=\"safe-area-pseudo-padding-end\"></div>\n        </div>\n    </div>\n</core-loading>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}