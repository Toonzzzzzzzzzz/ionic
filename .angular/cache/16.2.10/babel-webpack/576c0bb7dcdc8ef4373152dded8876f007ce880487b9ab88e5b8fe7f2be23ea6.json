{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCompetencyPlansSource } from '@addons/competency/classes/competency-plans-source';\nimport { CoreListItemsManager } from '@classes/items-management/list-items-manager';\nimport { AddonCompetencyPlanCompetenciesSource } from '@addons/competency/classes/competency-plan-competencies-source';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreTime } from '@singletons/time';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/loading/loading\";\nimport * as i3 from \"../../../../core/components/progress-bar/progress-bar\";\nimport * as i4 from \"../../../../core/components/user-avatar/user-avatar\";\nimport * as i5 from \"../../../../core/directives/format-text\";\nimport * as i6 from \"../../../../core/directives/swipe-navigation\";\nimport * as i7 from \"../../../../core/directives/content\";\nimport * as i8 from \"@ionic/angular\";\nimport * as i9 from \"../../../../core/pipes/format-date\";\nimport * as i10 from \"@ngx-translate/core\";\nfunction AddonCompetencyPlanPage_h1_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r0.plan.plan.name)(\"contextInstanceId\", ctx_r0.plan.plan.userid);\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8)(2, \"ion-label\");\n    i0.ɵɵelement(3, \"core-user-avatar\", 9);\n    i0.ɵɵelementStart(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"user\", ctx_r1.user);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r1.user.fullname);\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_13_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵelement(3, \"core-format-text\", 7);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r4.plan.plan.description)(\"contextInstanceId\", ctx_r4.plan.plan.userid);\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_13_ion_item_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"coreFormatDate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.competency.duedate\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 4, ctx_r5.plan.plan.duedate * 1000));\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_13_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 14);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"addon.competency.template\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r6.plan.plan.template.shortname)(\"contextInstanceId\", 0);\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    x: a0,\n    y: a1\n  };\n};\nconst _c1 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction AddonCompetencyPlanPage_ion_card_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-list\");\n    i0.ɵɵtemplate(2, AddonCompetencyPlanPage_ion_card_13_ion_item_2_Template, 4, 2, \"ion-item\", 11);\n    i0.ɵɵelementStart(3, \"ion-item\", 8)(4, \"ion-label\")(5, \"p\", 10);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(10, AddonCompetencyPlanPage_ion_card_13_ion_item_10_Template, 8, 6, \"ion-item\", 11);\n    i0.ɵɵtemplate(11, AddonCompetencyPlanPage_ion_card_13_ion_item_11_Template, 7, 5, \"ion-item\", 11);\n    i0.ɵɵelementStart(12, \"ion-item\", 8)(13, \"ion-label\", 12)(14, \"p\", 10);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"p\");\n    i0.ɵɵtext(18);\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(20, \"core-progress-bar\", 13);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.plan.plan.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 11, \"addon.competency.status\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r2.plan.plan.statusname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.plan.plan.duedate > 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.plan.plan.template);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"addon-competency-plan-\", ctx_r2.plan.plan.id, \"-progress\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 13, \"addon.competency.progress\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(19, 15, \"addon.competency.xcompetenciesproficientoutofy\", i0.ɵɵpureFunction1(21, _c1, i0.ɵɵpureFunction2(18, _c0, ctx_r2.plan.proficientcompetencycount, ctx_r2.plan.competencycount))), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"ariaDescribedBy\", \"addon-competency-plan-\", ctx_r2.plan.plan.id, \"-progress\");\n    i0.ɵɵproperty(\"progress\", ctx_r2.plan.proficientcompetencypercentage)(\"text\", ctx_r2.plan.proficientcompetencypercentageformatted);\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_14_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 1, \"addon.competency.nocompetencies\"));\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const competency_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"color\", competency_r9.usercompetencyplan.proficiency ? \"success\" : \"danger\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", competency_r9.usercompetencyplan.gradename, \" \");\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const competency_r9 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"color\", competency_r9.usercompetency.proficiency ? \"success\" : \"danger\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", competency_r9.usercompetency.gradename, \" \");\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 16);\n    i0.ɵɵlistener(\"click\", function AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r15);\n      const competency_r9 = restoredCtx.$implicit;\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.competencies.select(competency_r9));\n    });\n    i0.ɵɵelementStart(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵelement(3, \"core-format-text\", 7);\n    i0.ɵɵelementStart(4, \"em\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_6_Template, 2, 2, \"ion-badge\", 17);\n    i0.ɵɵtemplate(7, AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_7_Template, 2, 2, \"ion-badge\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const competency_r9 = ctx.$implicit;\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵattribute(\"aria-label\", competency_r9.competency.shortname);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", competency_r9.competency.shortname)(\"contextInstanceId\", ctx_r8.plan.plan.userid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(competency_r9.competency.idnumber);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", competency_r9.usercompetencyplan);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !competency_r9.usercompetencyplan);\n  }\n}\nfunction AddonCompetencyPlanPage_ion_card_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-card-header\", 8)(2, \"ion-card-title\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-list\");\n    i0.ɵɵtemplate(6, AddonCompetencyPlanPage_ion_card_14_ion_item_6_Template, 5, 3, \"ion-item\", 11);\n    i0.ɵɵtemplate(7, AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template, 8, 7, \"ion-item\", 15);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"addon.competency.learningplancompetencies\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.plan.competencycount === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.competencies.items);\n  }\n}\n/**\n * Page that displays a learning plan.\n */\nexport class AddonCompetencyPlanPage {\n  constructor() {\n    this.logView = CoreTime.once(() => this.performLogView());\n    try {\n      const planId = CoreNavigator.getRequiredRouteNumberParam('planId');\n      const userId = CoreNavigator.getRouteNumberParam('userId');\n      const plansSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(AddonCompetencyPlansSource, [userId]);\n      const competenciesSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(AddonCompetencyPlanCompetenciesSource, [planId]);\n      this.competencies = new CoreListItemsManager(competenciesSource, AddonCompetencyPlanPage);\n      this.plans = new CoreSwipeNavigationItemsManager(plansSource);\n    } catch (error) {\n      CoreDomUtils.showErrorModal(error);\n      CoreNavigator.back();\n      return;\n    }\n  }\n  get plan() {\n    return this.competencies.getSource().plan;\n  }\n  get user() {\n    return this.competencies.getSource().user;\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.fetchLearningPlan();\n      yield _this.plans.start();\n      yield _this.competencies.start();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    this.plans.destroy();\n    this.competencies.destroy();\n  }\n  /**\n   * Fetches the learning plan and updates the view.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchLearningPlan() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this2.competencies.getSource().reload();\n        _this2.logView();\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error getting learning plan data.');\n      }\n    })();\n  }\n  /**\n   * Refreshes the learning plan.\n   *\n   * @param refresher Refresher.\n   */\n  refreshLearningPlan(refresher) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      yield _this3.competencies.getSource().invalidateCache();\n      _this3.fetchLearningPlan().finally(() => {\n        refresher === null || refresher === void 0 || refresher.complete();\n      });\n    })();\n  }\n  /**\n   * Log view.\n   */\n  performLogView() {\n    if (!this.plan) {\n      return;\n    }\n    const planId = this.competencies.getSource().PLAN_ID;\n    CoreAnalytics.logEvent({\n      type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n      ws: 'tool_lp_data_for_plan_page',\n      name: this.plan.plan.name,\n      data: {\n        category: 'competency',\n        planid: planId\n      },\n      url: `/admin/tool/lp/coursecompetencies.php?id=${planId}`\n    });\n  }\n}\n_class = AddonCompetencyPlanPage;\n_class.ɵfac = function AddonCompetencyPlanPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-competency-plan\"]],\n  decls: 15,\n  vars: 13,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [1, \"limited-width\", 3, \"core-swipe-navigation\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"contextLevel\", \"user\", 3, \"text\", \"contextInstanceId\"], [1, \"ion-text-wrap\"], [\"slot\", \"start\", 3, \"user\"], [1, \"item-heading\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [3, \"id\"], [3, \"progress\", \"text\", \"ariaDescribedBy\"], [\"contextLevel\", \"system\", 3, \"text\", \"contextInstanceId\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"end\", 3, \"color\", 4, \"ngIf\"], [\"slot\", \"end\", 3, \"color\"]],\n  template: function AddonCompetencyPlanPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtemplate(6, AddonCompetencyPlanPage_h1_6_Template, 2, 2, \"h1\", 2);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-refresher\", 4);\n      i0.ɵɵlistener(\"ionRefresh\", function AddonCompetencyPlanPage_Template_ion_refresher_ionRefresh_8_listener($event) {\n        return ctx.refreshLearningPlan($event.target);\n      });\n      i0.ɵɵelement(9, \"ion-refresher-content\", 5);\n      i0.ɵɵpipe(10, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"core-loading\", 6);\n      i0.ɵɵtemplate(12, AddonCompetencyPlanPage_ion_card_12_Template, 6, 2, \"ion-card\", 2);\n      i0.ɵɵtemplate(13, AddonCompetencyPlanPage_ion_card_13_Template, 21, 23, \"ion-card\", 2);\n      i0.ɵɵtemplate(14, AddonCompetencyPlanPage_ion_card_14_Template, 8, 5, \"ion-card\", 2);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 9, \"core.back\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.plan);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"core-swipe-navigation\", ctx.plans);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.competencies.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(10, 11, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.competencies.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.plan);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.plan);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreLoadingComponent, i3.CoreProgressBarComponent, i4.CoreUserAvatarComponent, i5.CoreFormatTextDirective, i6.CoreSwipeNavigationDirective, i7.CoreContentDirective, i8.IonBadge, i8.IonButtons, i8.IonCard, i8.IonCardHeader, i8.IonCardTitle, i8.IonContent, i8.IonHeader, i8.IonItem, i8.IonLabel, i8.IonList, i8.IonRefresher, i8.IonRefresherContent, i8.IonTitle, i8.IonToolbar, i8.IonBackButton, i9.CoreFormatDatePipe, i10.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreDomUtils","CoreNavigator","CoreSwipeNavigationItemsManager","CoreRoutedItemsManagerSourcesTracker","AddonCompetencyPlansSource","CoreListItemsManager","AddonCompetencyPlanCompetenciesSource","CoreAnalytics","CoreAnalyticsEventType","CoreTime","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","plan","name","userid","ɵɵtext","ctx_r1","user","ɵɵtextInterpolate","fullname","ctx_r4","description","ɵɵpipeBind1","ctx_r5","duedate","ctx_r6","template","shortname","ɵɵtemplate","AddonCompetencyPlanPage_ion_card_13_ion_item_2_Template","AddonCompetencyPlanPage_ion_card_13_ion_item_10_Template","AddonCompetencyPlanPage_ion_card_13_ion_item_11_Template","ctx_r2","statusname","ɵɵpropertyInterpolate1","id","ɵɵtextInterpolate1","ɵɵpipeBind2","ɵɵpureFunction1","_c1","ɵɵpureFunction2","_c0","proficientcompetencycount","competencycount","proficientcompetencypercentage","proficientcompetencypercentageformatted","competency_r9","usercompetencyplan","proficiency","gradename","usercompetency","ɵɵlistener","AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r15","$implicit","ctx_r14","ɵɵnextContext","ɵɵresetView","competencies","select","AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_6_Template","AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_7_Template","ɵɵattribute","competency","ctx_r8","idnumber","AddonCompetencyPlanPage_ion_card_14_ion_item_6_Template","AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template","ctx_r3","items","AddonCompetencyPlanPage","constructor","logView","once","performLogView","planId","getRequiredRouteNumberParam","userId","getRouteNumberParam","plansSource","getOrCreateSource","competenciesSource","plans","error","showErrorModal","back","getSource","ngOnInit","_this","_asyncToGenerator","fetchLearningPlan","start","ngOnDestroy","destroy","_this2","reload","showErrorModalDefault","refreshLearningPlan","refresher","_this3","invalidateCache","finally","complete","PLAN_ID","logEvent","type","VIEW_ITEM_LIST","ws","data","category","planid","url","selectors","decls","vars","consts","AddonCompetencyPlanPage_Template","rf","ctx","AddonCompetencyPlanPage_h1_6_Template","AddonCompetencyPlanPage_Template_ion_refresher_ionRefresh_8_listener","$event","target","AddonCompetencyPlanPage_ion_card_12_Template","AddonCompetencyPlanPage_ion_card_13_Template","AddonCompetencyPlanPage_ion_card_14_Template","loaded","ɵɵpropertyInterpolate"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/competency/pages/plan/plan.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/competency/pages/plan/plan.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { AddonCompetencyDataForPlanPageCompetency, AddonCompetencyDataForPlanPageWSResponse } from '../../services/competency';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreUserProfile } from '@features/user/services/user';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCompetencyPlansSource } from '@addons/competency/classes/competency-plans-source';\nimport { CoreListItemsManager } from '@classes/items-management/list-items-manager';\nimport { AddonCompetencyPlanCompetenciesSource } from '@addons/competency/classes/competency-plan-competencies-source';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreTime } from '@singletons/time';\n\n/**\n * Page that displays a learning plan.\n */\n@Component({\n    selector: 'page-addon-competency-plan',\n    templateUrl: 'plan.html',\n})\nexport class AddonCompetencyPlanPage implements OnInit, OnDestroy {\n\n    plans!: CoreSwipeNavigationItemsManager;\n    competencies!: CoreListItemsManager<AddonCompetencyDataForPlanPageCompetency, AddonCompetencyPlanCompetenciesSource>;\n\n    protected logView: () => void;\n\n    constructor() {\n        this.logView = CoreTime.once(() => this.performLogView());\n\n        try {\n            const planId = CoreNavigator.getRequiredRouteNumberParam('planId');\n            const userId = CoreNavigator.getRouteNumberParam('userId');\n            const plansSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(\n                AddonCompetencyPlansSource,\n                [userId],\n            );\n            const competenciesSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(\n                AddonCompetencyPlanCompetenciesSource,\n                [planId],\n            );\n\n            this.competencies = new CoreListItemsManager(competenciesSource, AddonCompetencyPlanPage);\n            this.plans = new CoreSwipeNavigationItemsManager(plansSource);\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n    }\n\n    get plan(): AddonCompetencyDataForPlanPageWSResponse | undefined {\n        return this.competencies.getSource().plan;\n    }\n\n    get user(): CoreUserProfile | undefined {\n        return this.competencies.getSource().user;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        await this.fetchLearningPlan();\n        await this.plans.start();\n        await this.competencies.start();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.plans.destroy();\n        this.competencies.destroy();\n    }\n\n    /**\n     * Fetches the learning plan and updates the view.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchLearningPlan(): Promise<void> {\n        try {\n            await this.competencies.getSource().reload();\n\n            this.logView();\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error getting learning plan data.');\n        }\n    }\n\n    /**\n     * Refreshes the learning plan.\n     *\n     * @param refresher Refresher.\n     */\n    async refreshLearningPlan(refresher: HTMLIonRefresherElement): Promise<void> {\n        await this.competencies.getSource().invalidateCache();\n\n        this.fetchLearningPlan().finally(() => {\n            refresher?.complete();\n        });\n    }\n\n    /**\n     * Log view.\n     */\n    protected performLogView(): void {\n        if (!this.plan) {\n            return;\n        }\n\n        const planId = this.competencies.getSource().PLAN_ID;\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n            ws: 'tool_lp_data_for_plan_page',\n            name: this.plan.plan.name,\n            data: {\n                category: 'competency',\n                planid: planId,\n            },\n            url: `/admin/tool/lp/coursecompetencies.php?id=${planId}`,\n        });\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1 *ngIf=\"plan\">\n                <core-format-text [text]=\"plan.plan.name\" contextLevel=\"user\" [contextInstanceId]=\"plan.plan.userid\" />\n            </h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content [core-swipe-navigation]=\"plans\" class=\"limited-width\">\n    <ion-refresher slot=\"fixed\" [disabled]=\"!competencies.loaded\" (ionRefresh)=\"refreshLearningPlan($event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n    <core-loading [hideUntil]=\"competencies.loaded\">\n        <ion-card *ngIf=\"user\">\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <core-user-avatar [user]=\"user\" slot=\"start\" />\n                    <p class=\"item-heading\">{{ user.fullname }}</p>\n                </ion-label>\n            </ion-item>\n        </ion-card>\n        <ion-card *ngIf=\"plan\">\n            <ion-list>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"plan.plan.description\">\n                    <ion-label>\n                        <p>\n                            <core-format-text [text]=\"plan.plan.description\" contextLevel=\"user\" [contextInstanceId]=\"plan.plan.userid\" />\n                        </p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.status' | translate }}</p>\n                        <p>{{ plan.plan.statusname }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"plan.plan.duedate > 0\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.duedate' | translate }}</p>\n                        <p>{{ plan.plan.duedate * 1000 | coreFormatDate }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"plan.plan.template\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.template' | translate }}</p>\n                        <p>\n                            <core-format-text [text]=\"plan.plan.template.shortname\" contextLevel=\"system\" [contextInstanceId]=\"0\" />\n                        </p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label id=\"addon-competency-plan-{{plan.plan.id}}-progress\">\n                        <p class=\"item-heading\">{{ 'addon.competency.progress' | translate }}</p>\n                        <p>\n                            {{ 'addon.competency.xcompetenciesproficientoutofy' | translate:\n                            {$a: {x: plan.proficientcompetencycount, y: plan.competencycount} } }}\n                        </p>\n                        <core-progress-bar [progress]=\"plan.proficientcompetencypercentage\"\n                            [text]=\"plan.proficientcompetencypercentageformatted\"\n                            ariaDescribedBy=\"addon-competency-plan-{{plan.plan.id}}-progress\" />\n                    </ion-label>\n                </ion-item>\n            </ion-list>\n        </ion-card>\n        <ion-card *ngIf=\"plan\">\n            <ion-card-header class=\"ion-text-wrap\">\n                <ion-card-title>{{ 'addon.competency.learningplancompetencies' | translate }}</ion-card-title>\n            </ion-card-header>\n            <ion-list>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"plan.competencycount === 0\">\n                    <ion-label>\n                        <p>{{ 'addon.competency.nocompetencies' | translate }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngFor=\"let competency of competencies.items\" (click)=\"competencies.select(competency)\"\n                    [attr.aria-label]=\"competency.competency.shortname\" [detail]=\"true\" button>\n                    <ion-label>\n                        <p class=\"item-heading\">\n                            <core-format-text [text]=\"competency.competency.shortname\" contextLevel=\"user\"\n                                [contextInstanceId]=\"plan.plan.userid\" /> <em>{{competency.competency.idnumber}}</em>\n                        </p>\n                    </ion-label>\n                    <ion-badge *ngIf=\"competency.usercompetencyplan\" slot=\"end\"\n                        [color]=\"competency.usercompetencyplan.proficiency ? 'success' : 'danger'\">\n                        {{ competency.usercompetencyplan.gradename }}\n                    </ion-badge>\n                    <ion-badge *ngIf=\"!competency.usercompetencyplan\" slot=\"end\"\n                        [color]=\"competency.usercompetency.proficiency ? 'success' : 'danger'\">\n                        {{ competency.usercompetency.gradename }}\n                    </ion-badge>\n                </ion-item>\n            </ion-list>\n        </ion-card>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}