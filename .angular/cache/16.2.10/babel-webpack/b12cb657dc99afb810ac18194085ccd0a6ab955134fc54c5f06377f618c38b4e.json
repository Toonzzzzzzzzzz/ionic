{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { AddonModLti, AddonModLtiProvider } from '../../services/lti';\nimport { AddonModLtiHelper } from '../../services/lti-helper';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@features/course/pages/contents/contents\";\nfunction AddonModLtiIndexComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 6)(1, \"div\", 7)(2, \"ion-button\", 8);\n    i0.ɵɵlistener(\"click\", function AddonModLtiIndexComponent_div_6_Template_ion_button_click_2_listener() {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.launch());\n    });\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelement(5, \"ion-icon\", 9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(6, \"core-course-module-navigation\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 3, \"addon.mod_lti.launchactivity\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"courseId\", ctx_r0.courseId)(\"currentModuleId\", ctx_r0.module.id);\n  }\n}\n/**\n * Component that displays an LTI entry page.\n */\nexport class AddonModLtiIndexComponent extends CoreCourseModuleMainActivityComponent {\n  constructor(content, courseContentsPage) {\n    super('AddonModLtiIndexComponent', content, courseContentsPage);\n    this.content = content;\n    this.component = AddonModLtiProvider.COMPONENT;\n    this.pluginName = 'lti';\n    this.displayDescription = false;\n    this.fetchContentDefaultError = 'addon.mod_lti.errorgetlti';\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      _superprop_getNgOnInit().call(_this);\n      _this.loadContent();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  fetchContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.lti = yield AddonModLti.getLti(_this2.courseId, _this2.module.id);\n      _this2.description = _this2.lti.intro;\n      _this2.displayDescription = _this2.lti && !!_this2.lti.showdescriptionlaunch;\n      _this2.dataRetrieved.emit(_this2.lti);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  invalidateContent() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      promises.push(AddonModLti.invalidateLti(_this3.courseId));\n      if (_this3.lti) {\n        promises.push(AddonModLti.invalidateLtiLaunchData(_this3.lti.id));\n      }\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * Launch the LTI.\n   */\n  launch() {\n    AddonModLtiHelper.getDataAndLaunch(this.courseId, this.module, this.lti);\n  }\n}\n_class = AddonModLtiIndexComponent;\n_class.ɵfac = function AddonModLtiIndexComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.IonContent), i0.ɵɵdirectiveInject(i2.CoreCourseContentsPage, 8));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-lti-index\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 7,\n  vars: 10,\n  consts: [[\"slot\", \"end\"], [\"fill\", \"clear\", \"aria-haspopup\", \"true\", 3, \"click\"], [\"name\", \"fas-circle-info\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [3, \"module\", \"description\", \"component\", \"componentId\", \"courseId\", \"completionChanged\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\"], [1, \"list-item-limited-width\"], [\"expand\", \"block\", 1, \"ion-margin\", \"ion-text-wrap\", 3, \"click\"], [\"name\", \"fas-up-right-from-square\", \"slot\", \"end\", \"aria-hidden\", \"true\"], [3, \"courseId\", \"currentModuleId\"]],\n  template: function AddonModLtiIndexComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"core-navbar-buttons\", 0)(1, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function AddonModLtiIndexComponent_Template_ion_button_click_1_listener() {\n        return ctx.openModuleSummary();\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelement(3, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"core-loading\", 3)(5, \"core-course-module-info\", 4);\n      i0.ɵɵlistener(\"completionChanged\", function AddonModLtiIndexComponent_Template_core_course_module_info_completionChanged_5_listener() {\n        return ctx.onCompletionChange();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(6, AddonModLtiIndexComponent_div_6_Template, 7, 5, \"div\", 5);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 8, \"core.info\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.showLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"module\", ctx.module)(\"description\", ctx.displayDescription && ctx.description)(\"component\", ctx.component)(\"componentId\", ctx.componentId)(\"courseId\", ctx.courseId);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showLoading);\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreCourseModuleMainActivityComponent","AddonModLti","AddonModLtiProvider","AddonModLtiHelper","i0","ɵɵelementStart","ɵɵlistener","AddonModLtiIndexComponent_div_6_Template_ion_button_click_2_listener","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","launch","ɵɵtext","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","ɵɵproperty","ctx_r0","courseId","module","id","AddonModLtiIndexComponent","constructor","content","courseContentsPage","component","COMPONENT","pluginName","displayDescription","fetchContentDefaultError","ngOnInit","_superprop_getNgOnInit","_this","_asyncToGenerator","call","loadContent","fetchContent","_this2","lti","getLti","description","intro","showdescriptionlaunch","dataRetrieved","emit","invalidateContent","_this3","promises","push","invalidateLti","invalidateLtiLaunchData","Promise","all","getDataAndLaunch","ɵɵdirectiveInject","i1","IonContent","i2","CoreCourseContentsPage","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddonModLtiIndexComponent_Template","rf","ctx","AddonModLtiIndexComponent_Template_ion_button_click_1_listener","openModuleSummary","AddonModLtiIndexComponent_Template_core_course_module_info_completionChanged_5_listener","onCompletionChange","ɵɵtemplate","AddonModLtiIndexComponent_div_6_Template","ɵɵattribute","showLoading","componentId"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lti/components/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lti/components/index/addon-mod-lti-index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Optional, OnInit } from '@angular/core';\nimport { IonContent } from '@ionic/angular';\n\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreCourseContentsPage } from '@features/course/pages/contents/contents';\nimport { AddonModLti, AddonModLtiLti, AddonModLtiProvider } from '../../services/lti';\nimport { AddonModLtiHelper } from '../../services/lti-helper';\n\n/**\n * Component that displays an LTI entry page.\n */\n@Component({\n    selector: 'addon-mod-lti-index',\n    templateUrl: 'addon-mod-lti-index.html',\n})\nexport class AddonModLtiIndexComponent extends CoreCourseModuleMainActivityComponent implements OnInit {\n\n    component = AddonModLtiProvider.COMPONENT;\n    pluginName = 'lti';\n    displayDescription = false;\n\n    lti?: AddonModLtiLti; // The LTI object.\n\n    protected fetchContentDefaultError = 'addon.mod_lti.errorgetlti';\n\n    constructor(\n        protected content?: IonContent,\n        @Optional() courseContentsPage?: CoreCourseContentsPage,\n    ) {\n        super('AddonModLtiIndexComponent', content, courseContentsPage);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        super.ngOnInit();\n\n        this.loadContent();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async fetchContent(): Promise<void> {\n        this.lti = await AddonModLti.getLti(this.courseId, this.module.id);\n\n        this.description = this.lti.intro;\n\n        this.displayDescription = this.lti && !!this.lti.showdescriptionlaunch;\n        this.dataRetrieved.emit(this.lti);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async invalidateContent(): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        promises.push(AddonModLti.invalidateLti(this.courseId));\n        if (this.lti) {\n            promises.push(AddonModLti.invalidateLtiLaunchData(this.lti.id));\n        }\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * Launch the LTI.\n     */\n    launch(): void {\n        AddonModLtiHelper.getDataAndLaunch(this.courseId, this.module, this.lti);\n    }\n\n}\n","<!-- Buttons to add to the header. -->\n<core-navbar-buttons slot=\"end\">\n    <ion-button fill=\"clear\" (click)=\"openModuleSummary()\" aria-haspopup=\"true\" [attr.aria-label]=\"'core.info' | translate\">\n        <ion-icon name=\"fas-circle-info\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n</core-navbar-buttons>\n\n<!-- Content. -->\n<core-loading [hideUntil]=\"!showLoading\">\n\n    <!-- Activity info. -->\n    <core-course-module-info [module]=\"module\" [description]=\"displayDescription && description\" [component]=\"component\"\n        [componentId]=\"componentId\" [courseId]=\"courseId\" (completionChanged)=\"onCompletionChange()\" />\n\n    <div collapsible-footer *ngIf=\"!showLoading\" slot=\"fixed\">\n        <div class=\"list-item-limited-width\">\n            <ion-button expand=\"block\" (click)=\"launch()\" class=\"ion-margin ion-text-wrap\">\n                {{ 'addon.mod_lti.launchactivity' | translate }}\n                <ion-icon name=\"fas-up-right-from-square\" slot=\"end\" aria-hidden=\"true\" />\n            </ion-button>\n        </div>\n\n        <core-course-module-navigation [courseId]=\"courseId\" [currentModuleId]=\"module.id\" />\n    </div>\n</core-loading>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}