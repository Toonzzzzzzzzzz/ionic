{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreCourseModuleCompletionStatus, CoreCourseModuleCompletionTracking } from '@features/course/services/course';\nimport { CoreFilterHelper } from '@features/filter/services/filter-helper';\nimport { Translate } from '@singletons';\nimport { CoreCourseModuleCompletionBaseComponent } from '@features/course/classes/module-completion';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreEvents } from '@singletons/events';\nimport { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../directives/update-non-reactive-attributes\";\nimport * as i3 from \"@ionic/angular\";\nfunction CoreCourseModuleCompletionLegacyComponent_img_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 2);\n    i0.ɵɵpipe(1, \"async\");\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r0.completionImage, i0.ɵɵsanitizeUrl)(\"alt\", i0.ɵɵpipeBind1(1, 2, ctx_r0.completionDescription$));\n  }\n}\nfunction CoreCourseModuleCompletionLegacyComponent_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r3 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 3);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionLegacyComponent_ion_button_1_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r3);\n      const ctx_r2 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r2.completionClicked($event));\n    });\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵelement(2, \"img\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(1, 2, ctx_r1.completionDescription$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", ctx_r1.completionImage, i0.ɵɵsanitizeUrl);\n  }\n}\n/**\n * Component to handle activity completion in sites previous to 3.11.\n * It shows a checkbox with the current status, and allows manually changing the completion if it's allowed.\n *\n * Example usage:\n *\n * <core-course-module-completion-legacy [completion]=\"module.completiondata\" [moduleName]=\"module.name\"\n *     (completionChanged)=\"completionChanged()\"></core-course-module-completion-legacy>\n */\nexport class CoreCourseModuleCompletionLegacyComponent extends CoreCourseModuleCompletionBaseComponent {\n  constructor() {\n    super(...arguments);\n    this.completionDescription$ = new BehaviorSubject('');\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, data => {\n      if (!this.completion || this.completion.cmid != data.completion.cmid) {\n        return;\n      }\n      this.completion = data.completion;\n      this.calculateData();\n      this.completionChanged.emit(this.completion);\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  calculateData() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.completion) {\n        return;\n      }\n      const moduleName = _this.moduleName || '';\n      let langKey;\n      let image;\n      if (_this.completion.tracking === CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_MANUAL) {\n        if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE) {\n          image = 'completion-manual-n';\n          langKey = 'core.completion-alt-manual-n';\n        } else if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n          image = 'completion-manual-y';\n          langKey = 'core.completion-alt-manual-y';\n        }\n      } else if (_this.completion.tracking === CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_AUTOMATIC) {\n        if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE) {\n          image = 'completion-auto-n';\n          langKey = 'core.completion-alt-auto-n';\n        } else if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n          image = 'completion-auto-y';\n          langKey = 'core.completion-alt-auto-y';\n        } else if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_PASS) {\n          image = 'completion-auto-pass';\n          langKey = 'core.completion-alt-auto-pass';\n        } else if (_this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_FAIL) {\n          image = 'completion-auto-fail';\n          langKey = 'core.completion-alt-auto-fail';\n        }\n      }\n      if (image) {\n        if (_this.completion.overrideby && _this.completion.overrideby > 0) {\n          image += '-override';\n        }\n        _this.completionImage = 'assets/img/completion/' + image + '.svg';\n      }\n      if (!moduleName || !_this.moduleId || !langKey) {\n        return;\n      }\n      const result = yield CoreFilterHelper.getFiltersAndFormatText(moduleName, 'module', _this.moduleId, {\n        clean: true,\n        singleLine: true,\n        shortenLength: 50,\n        courseId: _this.completion.courseId\n      });\n      let translateParams = {\n        $a: result.text\n      };\n      if (_this.completion.overrideby && _this.completion.overrideby > 0) {\n        langKey += '-override';\n        const profile = yield CoreUser.getProfile(_this.completion.overrideby, _this.completion.courseId, true);\n        translateParams = {\n          $a: {\n            overrideuser: profile.fullname,\n            modname: result.text\n          }\n        };\n      }\n      _this.completionDescription$.next(Translate.instant(langKey, translateParams));\n    })();\n  }\n  /**\n   * Completion clicked.\n   *\n   * @param event The click event.\n   */\n  completionClicked(event) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.completion) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      yield CoreCourseHelper.changeManualCompletion(_this2.completion);\n      CoreEvents.trigger(CoreEvents.MANUAL_COMPLETION_CHANGED, {\n        completion: _this2.completion\n      });\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$completionObser;\n    (_this$completionObser = this.completionObserver) === null || _this$completionObser === void 0 || _this$completionObser.off();\n  }\n}\n_class = CoreCourseModuleCompletionLegacyComponent;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵCoreCourseModuleCompletionLegacyComponent_BaseFactory;\n  return function CoreCourseModuleCompletionLegacyComponent_Factory(t) {\n    return (ɵCoreCourseModuleCompletionLegacyComponent_BaseFactory || (ɵCoreCourseModuleCompletionLegacyComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"core-course-module-completion-legacy\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 2,\n  vars: 2,\n  consts: [[3, \"src\", \"alt\", 4, \"ngIf\"], [\"fill\", \"clear\", 3, \"title\", \"click\", 4, \"ngIf\"], [3, \"src\", \"alt\"], [\"fill\", \"clear\", 3, \"title\", \"click\"], [\"role\", \"presentation\", \"alt\", \"\", 3, \"src\"]],\n  template: function CoreCourseModuleCompletionLegacyComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CoreCourseModuleCompletionLegacyComponent_img_0_Template, 2, 4, \"img\", 0);\n      i0.ɵɵtemplate(1, CoreCourseModuleCompletionLegacyComponent_ion_button_1_Template, 3, 4, \"ion-button\", 1);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.completion && ctx.completion.tracking !== 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.completion && ctx.completion.tracking === 1);\n    }\n  },\n  dependencies: [i1.NgIf, i2.CoreUpdateNonReactiveAttributesDirective, i3.IonButton, i1.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n  display: contents;\\n  --size: 30px;\\n}\\n[_nghost-%COMP%]   img[_ngcontent-%COMP%] {\\n  padding: 2px;\\n  width: var(--size);\\n  vertical-align: middle;\\n  max-width: none;\\n  margin: 4px;\\n}\\n[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  --padding-top: 0px;\\n  --padding-start: 0px;\\n  --padding-end: 0px;\\n  --padding-bottom: 0px;\\n  margin: 0;\\n  --a11y-target-min-size: 32px;\\n  width: var(--a11y-target-min-size);\\n  height: var(--a11y-target-min-size);\\n  min-width: var(--a11y-target-min-size);\\n  min-height: var(--a11y-target-min-size);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb3JlL2ZlYXR1cmVzL2NvdXJzZS9jb21wb25lbnRzL21vZHVsZS1jb21wbGV0aW9uLWxlZ2FjeS9tb2R1bGUtY29tcGxldGlvbi1sZWdhY3kuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtFQUNJLGlCQUFBO0VBQ0EsWUFBQTtBQUNKO0FBQ0k7RUFDSSxZQUFBO0VBQ0Esa0JBQUE7RUFDQSxzQkFBQTtFQUNBLGVBQUE7RUFDQSxXQUFBO0FBQ1I7QUFFSTtFQUNJLGtCQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLHFCQUFBO0VBQ0EsU0FBQTtFQUNBLDRCQUFBO0VBQ0Esa0NBQUE7RUFDQSxtQ0FBQTtFQUNBLHNDQUFBO0VBQ0EsdUNBQUE7QUFBUiIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgICBkaXNwbGF5OiBjb250ZW50cztcbiAgICAtLXNpemU6IDMwcHg7XG5cbiAgICBpbWcge1xuICAgICAgICBwYWRkaW5nOiAycHg7XG4gICAgICAgIHdpZHRoOiB2YXIoLS1zaXplKTtcbiAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcbiAgICAgICAgbWF4LXdpZHRoOiBub25lO1xuICAgICAgICBtYXJnaW46IDRweDtcbiAgICB9XG5cbiAgICBpb24tYnV0dG9uIHtcbiAgICAgICAgLS1wYWRkaW5nLXRvcDogMHB4O1xuICAgICAgICAtLXBhZGRpbmctc3RhcnQ6IDBweDtcbiAgICAgICAgLS1wYWRkaW5nLWVuZDogMHB4O1xuICAgICAgICAtLXBhZGRpbmctYm90dG9tOiAwcHg7XG4gICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgLS1hMTF5LXRhcmdldC1taW4tc2l6ZTogMzJweDtcbiAgICAgICAgd2lkdGg6IHZhcigtLWExMXktdGFyZ2V0LW1pbi1zaXplKTtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1hMTF5LXRhcmdldC1taW4tc2l6ZSk7XG4gICAgICAgIG1pbi13aWR0aDogdmFyKC0tYTExeS10YXJnZXQtbWluLXNpemUpO1xuICAgICAgICBtaW4taGVpZ2h0OiB2YXIoLS1hMTF5LXRhcmdldC1taW4tc2l6ZSk7O1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["CoreUser","CoreCourseModuleCompletionStatus","CoreCourseModuleCompletionTracking","CoreFilterHelper","Translate","CoreCourseModuleCompletionBaseComponent","CoreCourseHelper","CoreEvents","BehaviorSubject","i0","ɵɵelement","ɵɵproperty","ctx_r0","completionImage","ɵɵsanitizeUrl","ɵɵpipeBind1","completionDescription$","ɵɵelementStart","ɵɵlistener","CoreCourseModuleCompletionLegacyComponent_ion_button_1_Template_ion_button_click_0_listener","$event","ɵɵrestoreView","_r3","ctx_r2","ɵɵnextContext","ɵɵresetView","completionClicked","ɵɵelementEnd","ctx_r1","ɵɵadvance","CoreCourseModuleCompletionLegacyComponent","constructor","ngOnInit","completionObserver","on","MANUAL_COMPLETION_CHANGED","data","completion","cmid","calculateData","completionChanged","emit","_this","_asyncToGenerator","moduleName","langKey","image","tracking","COMPLETION_TRACKING_MANUAL","state","COMPLETION_INCOMPLETE","COMPLETION_COMPLETE","COMPLETION_TRACKING_AUTOMATIC","COMPLETION_COMPLETE_PASS","COMPLETION_COMPLETE_FAIL","overrideby","moduleId","result","getFiltersAndFormatText","clean","singleLine","shortenLength","courseId","translateParams","$a","text","profile","getProfile","overrideuser","fullname","modname","next","instant","event","_this2","stopPropagation","preventDefault","changeManualCompletion","trigger","ngOnDestroy","_this$completionObser","off","t","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","CoreCourseModuleCompletionLegacyComponent_Template","rf","ctx","ɵɵtemplate","CoreCourseModuleCompletionLegacyComponent_img_0_Template","CoreCourseModuleCompletionLegacyComponent_ion_button_1_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-completion-legacy/module-completion-legacy.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-completion-legacy/core-course-module-completion-legacy.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\n\nimport { CoreUser } from '@features/user/services/user';\nimport {\n    CoreCourseModuleCompletionStatus,\n    CoreCourseModuleCompletionTracking,\n} from '@features/course/services/course';\nimport { CoreFilterHelper } from '@features/filter/services/filter-helper';\nimport { Translate } from '@singletons';\nimport { CoreCourseModuleCompletionBaseComponent } from '@features/course/classes/module-completion';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { BehaviorSubject } from 'rxjs';\n\n/**\n * Component to handle activity completion in sites previous to 3.11.\n * It shows a checkbox with the current status, and allows manually changing the completion if it's allowed.\n *\n * Example usage:\n *\n * <core-course-module-completion-legacy [completion]=\"module.completiondata\" [moduleName]=\"module.name\"\n *     (completionChanged)=\"completionChanged()\"></core-course-module-completion-legacy>\n */\n@Component({\n    selector: 'core-course-module-completion-legacy',\n    templateUrl: 'core-course-module-completion-legacy.html',\n    styleUrls: ['module-completion-legacy.scss'],\n})\nexport class CoreCourseModuleCompletionLegacyComponent extends CoreCourseModuleCompletionBaseComponent\n    implements OnInit, OnDestroy {\n\n    completionImage?: string;\n    completionDescription$ = new BehaviorSubject('');\n\n    protected completionObserver?: CoreEventObserver;\n\n    /**\n     * @inheritdoc\n     */\n    ngOnInit(): void {\n        this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, (data) => {\n            if (!this.completion || this.completion.cmid != data.completion.cmid) {\n                return;\n            }\n\n            this.completion = data.completion;\n            this.calculateData();\n            this.completionChanged.emit(this.completion);\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async calculateData(): Promise<void> {\n        if (!this.completion) {\n            return;\n        }\n\n        const moduleName = this.moduleName || '';\n        let langKey: string | undefined;\n        let image: string | undefined;\n\n        if (this.completion.tracking === CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_MANUAL) {\n            if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE) {\n                image = 'completion-manual-n';\n                langKey = 'core.completion-alt-manual-n';\n            } else if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n                image = 'completion-manual-y';\n                langKey = 'core.completion-alt-manual-y';\n            }\n        } else if (this.completion.tracking === CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_AUTOMATIC) {\n            if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE) {\n                image = 'completion-auto-n';\n                langKey = 'core.completion-alt-auto-n';\n            } else if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE) {\n                image = 'completion-auto-y';\n                langKey = 'core.completion-alt-auto-y';\n            } else if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_PASS) {\n                image = 'completion-auto-pass';\n                langKey = 'core.completion-alt-auto-pass';\n            } else if (this.completion.state === CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_FAIL) {\n                image = 'completion-auto-fail';\n                langKey = 'core.completion-alt-auto-fail';\n            }\n        }\n\n        if (image) {\n            if (this.completion.overrideby && this.completion.overrideby > 0) {\n                image += '-override';\n            }\n            this.completionImage = 'assets/img/completion/' + image + '.svg';\n        }\n\n        if (!moduleName || !this.moduleId || !langKey) {\n            return;\n        }\n\n        const result = await CoreFilterHelper.getFiltersAndFormatText(\n            moduleName,\n            'module',\n            this.moduleId,\n            { clean: true, singleLine: true, shortenLength: 50, courseId: this.completion.courseId },\n        );\n\n        let translateParams: Record<string, unknown> = {\n            $a: result.text,\n        };\n\n        if (this.completion.overrideby && this.completion.overrideby > 0) {\n            langKey += '-override';\n\n            const profile = await CoreUser.getProfile(this.completion.overrideby, this.completion.courseId, true);\n\n            translateParams = {\n                $a: {\n                    overrideuser: profile.fullname,\n                    modname: result.text,\n                },\n            };\n        }\n\n        this.completionDescription$.next(Translate.instant(langKey, translateParams));\n    }\n\n    /**\n     * Completion clicked.\n     *\n     * @param event The click event.\n     */\n    async completionClicked(event: Event): Promise<void> {\n        if (!this.completion) {\n            return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n\n        await CoreCourseHelper.changeManualCompletion(this.completion);\n\n        CoreEvents.trigger(CoreEvents.MANUAL_COMPLETION_CHANGED, { completion: this.completion });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.completionObserver?.off();\n    }\n\n}\n","<img *ngIf=\"completion && completion.tracking !== 1\" [src]=\"completionImage\" [alt]=\"completionDescription$ | async\">\n\n<ion-button fill=\"clear\" *ngIf=\"completion && completion.tracking === 1\" (click)=\"completionClicked($event)\"\n    [title]=\"completionDescription$ | async\">\n    <img [src]=\"completionImage\" role=\"presentation\" alt=\"\">\n</ion-button>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}