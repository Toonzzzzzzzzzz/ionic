{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreRating } from '@features/rating/services/rating';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { ModalController } from '@singletons';\nimport * as i0 from \"@angular/core\";\nfunction CoreRatingRatingsComponent_ion_list_12_ion_item_1_ion_note_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-note\", 0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreDateDayOrTime\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rating_r3 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, rating_r3.timemodified), \" \");\n  }\n}\nfunction CoreRatingRatingsComponent_ion_list_12_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 7);\n    i0.ɵɵelement(1, \"core-user-avatar\", 8);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 9);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, CoreRatingRatingsComponent_ion_list_12_ion_item_1_ion_note_7_Template, 3, 3, \"ion-note\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const rating_r3 = ctx.$implicit;\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", rating_r3)(\"courseId\", ctx_r2.courseId);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(rating_r3.userfullname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(rating_r3.rating);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", rating_r3.timemodified);\n  }\n}\nfunction CoreRatingRatingsComponent_ion_list_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, CoreRatingRatingsComponent_ion_list_12_ion_item_1_Template, 8, 5, \"ion-item\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.ratings);\n  }\n}\nfunction CoreRatingRatingsComponent_core_empty_box_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 11);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"core.rating.noratings\"));\n  }\n}\n/**\n * Modal that displays individual ratings\n */\nexport class CoreRatingRatingsComponent {\n  constructor() {\n    this.loaded = false;\n    this.ratings = [];\n  }\n  /**\n   * Modal loaded.\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.ratings = yield CoreRating.getItemRatings(_this.contextLevel, _this.instanceId, _this.ratingComponent, _this.ratingArea, _this.itemId, _this.scaleId, undefined, _this.courseId);\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n      } finally {\n        _this.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Close modal.\n   */\n  closeModal() {\n    ModalController.dismiss();\n  }\n}\n_class = CoreRatingRatingsComponent;\n_class.ɵfac = function CoreRatingRatingsComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"ng-component\"]],\n  inputs: {\n    contextLevel: \"contextLevel\",\n    instanceId: \"instanceId\",\n    ratingComponent: \"ratingComponent\",\n    ratingArea: \"ratingArea\",\n    aggregateMethod: \"aggregateMethod\",\n    itemId: \"itemId\",\n    scaleId: \"scaleId\",\n    courseId: \"courseId\"\n  },\n  decls: 14,\n  vars: 9,\n  consts: [[\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"fas-xmark\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [4, \"ngIf\"], [\"icon\", \"fas-star-half-stroke\", 3, \"message\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", 4, \"ngFor\", \"ngForOf\"], [1, \"ion-text-wrap\"], [\"slot\", \"start\", 3, \"user\", \"courseId\"], [1, \"item-heading\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"icon\", \"fas-star-half-stroke\", 3, \"message\"]],\n  template: function CoreRatingRatingsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-title\")(3, \"h1\");\n      i0.ɵɵtext(4);\n      i0.ɵɵpipe(5, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(6, \"ion-buttons\", 0)(7, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function CoreRatingRatingsComponent_Template_ion_button_click_7_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelement(9, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(10, \"ion-content\")(11, \"core-loading\", 3);\n      i0.ɵɵtemplate(12, CoreRatingRatingsComponent_ion_list_12_Template, 2, 1, \"ion-list\", 4);\n      i0.ɵɵtemplate(13, CoreRatingRatingsComponent_core_empty_box_13_Template, 2, 3, \"core-empty-box\", 5);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 5, \"core.rating.ratings\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(8, 7, \"core.close\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ratings.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.ratings.length === 0);\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreRating","CoreDomUtils","ModalController","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","rating_r3","timemodified","ɵɵelement","ɵɵtemplate","CoreRatingRatingsComponent_ion_list_12_ion_item_1_ion_note_7_Template","ɵɵproperty","ctx_r2","courseId","ɵɵtextInterpolate","userfullname","rating","CoreRatingRatingsComponent_ion_list_12_ion_item_1_Template","ctx_r0","ratings","CoreRatingRatingsComponent","constructor","loaded","ngOnInit","_this","_asyncToGenerator","getItemRatings","contextLevel","instanceId","ratingComponent","ratingArea","itemId","scaleId","undefined","error","showErrorModal","closeModal","dismiss","selectors","inputs","aggregateMethod","decls","vars","consts","template","CoreRatingRatingsComponent_Template","rf","ctx","ɵɵlistener","CoreRatingRatingsComponent_Template_ion_button_click_7_listener","CoreRatingRatingsComponent_ion_list_12_Template","CoreRatingRatingsComponent_core_empty_box_13_Template","ɵɵattribute","length"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/rating/components/ratings/ratings.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/rating/components/ratings/ratings-modal.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ContextLevel } from '@/core/constants';\nimport { Component, Input, OnInit } from '@angular/core';\nimport { CoreRating, CoreRatingItemRating } from '@features/rating/services/rating';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { ModalController } from '@singletons';\n\n/**\n * Modal that displays individual ratings\n */\n@Component({\n    templateUrl: 'ratings-modal.html',\n})\nexport class CoreRatingRatingsComponent implements OnInit {\n\n    @Input() contextLevel!: ContextLevel;\n    @Input() instanceId!: number;\n    @Input() ratingComponent!: string;\n    @Input() ratingArea!: string;\n    @Input() aggregateMethod!: number;\n    @Input() itemId!: number;\n    @Input() scaleId!: number;\n    @Input() courseId!: number;\n\n    loaded = false;\n    ratings: CoreRatingItemRating[] = [];\n\n    /**\n     * Modal loaded.\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            this.ratings = await CoreRating.getItemRatings(\n                this.contextLevel,\n                this.instanceId,\n                this.ratingComponent,\n                this.ratingArea,\n                this.itemId,\n                this.scaleId,\n                undefined,\n                this.courseId,\n            );\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Close modal.\n     */\n    closeModal(): void {\n        ModalController.dismiss();\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-title>\n            <h1>{{ 'core.rating.ratings' | translate }}</h1>\n        </ion-title>\n        <ion-buttons slot=\"end\">\n            <ion-button fill=\"clear\" (click)=\"closeModal()\" [attr.aria-label]=\"'core.close' | translate\">\n                <ion-icon slot=\"icon-only\" name=\"fas-xmark\" aria-hidden=\"true\" />\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <core-loading [hideUntil]=\"loaded\">\n        <ion-list *ngIf=\"ratings.length > 0\">\n            <ion-item class=\"ion-text-wrap\" *ngFor=\"let rating of ratings\">\n                <core-user-avatar [user]=\"rating\" [courseId]=\"courseId\" slot=\"start\" />\n                <ion-label>\n                    <p class=\"item-heading\">{{ rating.userfullname }}</p>\n                    <p>{{ rating.rating }}</p>\n                </ion-label>\n                <ion-note slot=\"end\" *ngIf=\"rating.timemodified\">\n                    {{ rating.timemodified | coreDateDayOrTime }}\n                </ion-note>\n            </ion-item>\n        </ion-list>\n        <core-empty-box *ngIf=\"ratings.length === 0\" icon=\"fas-star-half-stroke\" [message]=\"'core.rating.noratings' | translate\" />\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}