{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreReminders, CoreRemindersService } from '@features/reminders/services/reminders';\nimport { CoreRemindersSetReminderMenuComponent } from '@features/reminders/components/set-reminder-menu/set-reminder-menu';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/directives/content\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@ngx-translate/core\";\nfunction AddonCalendarSettingsPage_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"ion-select\", 3);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonCalendarSettingsPage_ion_item_11_Template_ion_select_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.defaultTimeLabel = $event);\n    })(\"click\", function AddonCalendarSettingsPage_ion_item_11_Template_ion_select_click_4_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.changeDefaultTime($event));\n    });\n    i0.ɵɵelementStart(5, \"ion-select-option\", 4);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 4, \"addon.calendar.defaultnotificationtime\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.defaultTimeLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r0.defaultTimeLabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r0.defaultTimeLabel);\n  }\n}\n/**\n * Page that displays the calendar settings.\n */\nexport class AddonCalendarSettingsPage {\n  constructor() {\n    this.defaultTimeLabel = '';\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.updateDefaultTimeLabel();\n    })();\n  }\n  /**\n   * Change default time.\n   *\n   * @param e Event.\n   * @returns Promise resolved when done.\n   */\n  changeDefaultTime(e) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      var _reminderTime$timeBef;\n      e.stopPropagation();\n      e.stopImmediatePropagation();\n      e.preventDefault();\n      const reminderTime = yield CoreDomUtils.openPopover({\n        component: CoreRemindersSetReminderMenuComponent,\n        componentProps: {\n          initialValue: _this2.defaultTime,\n          noReminderLabel: 'core.settings.disabled'\n        },\n        event: e\n      });\n      if (reminderTime === undefined) {\n        // User canceled.\n        return;\n      }\n      yield CoreReminders.setDefaultNotificationTime((_reminderTime$timeBef = reminderTime.timeBefore) !== null && _reminderTime$timeBef !== void 0 ? _reminderTime$timeBef : CoreRemindersService.DISABLED);\n      _this2.updateDefaultTimeLabel();\n    })();\n  }\n  /**\n   * Update default time label.\n   */\n  updateDefaultTimeLabel() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.defaultTime = yield CoreReminders.getDefaultNotificationTime();\n      const defaultTime = CoreRemindersService.convertSecondsToValueAndUnit(_this3.defaultTime);\n      _this3.defaultTimeLabel = CoreReminders.getUnitValueLabel(defaultTime.value, defaultTime.unit);\n    })();\n  }\n}\n_class = AddonCalendarSettingsPage;\n_class.ɵfac = function AddonCalendarSettingsPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-calendar-settings\"]],\n  decls: 12,\n  vars: 7,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [3, \"ngModel\", \"ngModelChange\", \"click\"], [3, \"value\"]],\n  template: function AddonCalendarSettingsPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(9, \"ion-content\")(10, \"ion-list\");\n      i0.ɵɵtemplate(11, AddonCalendarSettingsPage_ion_item_11_Template, 7, 6, \"ion-item\", 2);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 3, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 5, \"core.settings.settings\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.defaultTimeLabel);\n    }\n  },\n  dependencies: [i1.NgIf, i2.CoreContentDirective, i3.NgControlStatus, i3.NgModel, i4.IonButtons, i4.IonContent, i4.IonHeader, i4.IonItem, i4.IonLabel, i4.IonList, i4.IonSelect, i4.IonSelectOption, i4.IonTitle, i4.IonToolbar, i4.SelectValueAccessor, i4.IonBackButton, i5.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreDomUtils","CoreReminders","CoreRemindersService","CoreRemindersSetReminderMenuComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵlistener","AddonCalendarSettingsPage_ion_item_11_Template_ion_select_ngModelChange_4_listener","$event","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","defaultTimeLabel","AddonCalendarSettingsPage_ion_item_11_Template_ion_select_click_4_listener","ctx_r3","changeDefaultTime","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵproperty","ctx_r0","AddonCalendarSettingsPage","constructor","ngOnInit","_this","_asyncToGenerator","updateDefaultTimeLabel","e","_this2","_reminderTime$timeBef","stopPropagation","stopImmediatePropagation","preventDefault","reminderTime","openPopover","component","componentProps","initialValue","defaultTime","noReminderLabel","event","undefined","setDefaultNotificationTime","timeBefore","DISABLED","_this3","getDefaultNotificationTime","convertSecondsToValueAndUnit","getUnitValueLabel","value","unit","selectors","decls","vars","consts","template","AddonCalendarSettingsPage_Template","rf","ctx","ɵɵelement","ɵɵtemplate","AddonCalendarSettingsPage_ion_item_11_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/calendar/pages/settings/settings.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/calendar/pages/settings/settings.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit } from '@angular/core';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport {\n    CoreReminders,\n    CoreRemindersService,\n} from '@features/reminders/services/reminders';\nimport { CoreRemindersSetReminderMenuComponent } from '@features/reminders/components/set-reminder-menu/set-reminder-menu';\n\n/**\n * Page that displays the calendar settings.\n */\n@Component({\n    selector: 'page-addon-calendar-settings',\n    templateUrl: 'settings.html',\n})\nexport class AddonCalendarSettingsPage implements OnInit {\n\n    defaultTimeLabel = '';\n\n    protected defaultTime?: number;\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.updateDefaultTimeLabel();\n    }\n\n    /**\n     * Change default time.\n     *\n     * @param e Event.\n     * @returns Promise resolved when done.\n     */\n    async changeDefaultTime(e: Event): Promise<void> {\n        e.stopPropagation();\n        e.stopImmediatePropagation();\n        e.preventDefault();\n\n        const reminderTime = await CoreDomUtils.openPopover<{timeBefore: number}>({\n            component: CoreRemindersSetReminderMenuComponent,\n            componentProps: {\n                initialValue: this.defaultTime,\n                noReminderLabel: 'core.settings.disabled',\n            },\n            event: e,\n        });\n\n        if (reminderTime === undefined) {\n            // User canceled.\n            return;\n        }\n\n        await CoreReminders.setDefaultNotificationTime(reminderTime.timeBefore ?? CoreRemindersService.DISABLED);\n        this.updateDefaultTimeLabel();\n    }\n\n    /**\n     * Update default time label.\n     */\n    async updateDefaultTimeLabel(): Promise<void> {\n        this.defaultTime = await CoreReminders.getDefaultNotificationTime();\n\n        const defaultTime = CoreRemindersService.convertSecondsToValueAndUnit(this.defaultTime);\n        this.defaultTimeLabel = CoreReminders.getUnitValueLabel(defaultTime.value, defaultTime.unit);\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>{{ 'core.settings.settings' | translate }}</h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <ion-list>\n        <ion-item *ngIf=\"defaultTimeLabel\">\n            <ion-label>{{ 'addon.calendar.defaultnotificationtime' | translate }}</ion-label>\n            <ion-select [(ngModel)]=\"defaultTimeLabel\" (click)=\"changeDefaultTime($event)\">\n                <ion-select-option [value]=\"defaultTimeLabel\">{{ defaultTimeLabel }}</ion-select-option>\n            </ion-select>\n        </ion-item>\n    </ion-list>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}