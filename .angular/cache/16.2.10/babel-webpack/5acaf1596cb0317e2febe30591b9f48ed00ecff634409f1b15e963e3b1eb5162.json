{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreConstants } from '@/core/constants';\nimport { AddonBlog } from '@addons/blog/services/blog';\nimport { AddonBlogMainMenuHandlerService } from '@addons/blog/services/handlers/mainmenu';\nimport { CoreCourse } from '@features/course/services/course';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreCourseModuleDelegate } from '@features/course/services/module-delegate';\nimport { CoreCourseModulePrefetchDelegate } from '@features/course/services/module-prefetch-delegate';\nimport { CoreCourses } from '@features/courses/services/courses';\nimport { CoreGradesHelper } from '@features/grades/services/grades-helper';\nimport { CoreNetwork } from '@services/network';\nimport { CoreFilepool } from '@services/filepool';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ModalController, NgZone } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport * as i0 from \"@angular/core\";\nfunction CoreCourseModuleSummaryComponent_ion_item_8_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵelement(1, \"core-mod-icon\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"modicon\", ctx_r7.modicon)(\"modname\", ctx_r7.module.modname)(\"componentId\", ctx_r7.module.instance)(\"fallbackTranslation\", ctx_r7.module.modplural);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r7.moduleNameTranslated, \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_item_8_ion_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-button\", 16);\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 17);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"href\", ctx_r8.externalUrl)(\"showBrowserWarning\", false);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 3, \"core.openinbrowser\"));\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 10)(1, \"ion-label\");\n    i0.ɵɵtemplate(2, CoreCourseModuleSummaryComponent_ion_item_8_p_2_Template, 3, 5, \"p\", 11);\n    i0.ɵɵelementStart(3, \"h1\");\n    i0.ɵɵelement(4, \"core-format-text\", 12);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(5, CoreCourseModuleSummaryComponent_ion_item_8_ion_button_5_Template, 3, 5, \"ion-button\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.moduleNameTranslated);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r0.module.name)(\"component\", ctx_r0.component)(\"componentId\", ctx_r0.componentId)(\"contextInstanceId\", ctx_r0.module.id)(\"courseId\", ctx_r0.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.displayOptions.displayOpenInBrowser && ctx_r0.externalUrl);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_item_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 18);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_item_9_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.openCourse());\n    });\n    i0.ɵɵelementStart(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵelement(3, \"ion-icon\", 20);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵelement(7, \"core-format-text\", 21);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 4, \"core.course\"), \" \");\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r1.course.fullname)(\"contextInstanceId\", ctx_r1.courseId);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_item_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 10)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"core-format-text\", 22);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 6, \"core.description\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r2.description)(\"component\", ctx_r2.component)(\"componentId\", ctx_r2.componentId)(\"contextInstanceId\", ctx_r2.module.id)(\"courseId\", ctx_r2.courseId);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 19);\n    i0.ɵɵelement(1, \"core-format-text\", 21);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r15 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", grade_r12.gradeitem)(\"contextInstanceId\", ctx_r15.courseId);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.grades.grade\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"p\", 36);\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.grade, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_badge_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 37);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.grades.notgraded\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 38);\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate(\"name\", grade_r12.icon);\n    i0.ɵɵattribute(\"aria-label\", grade_r12.iconAlt);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_img_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 39);\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵproperty(\"src\", grade_r12.image, i0.ɵɵsanitizeUrl)(\"alt\", grade_r12.iconAlt);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 40);\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵattribute(\"aria-label\", grade_r12.iconAlt);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 28);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const grade_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r27 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r27.toggleGrade(grade_r12));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 29);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtemplate(4, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_4_Template, 2, 2, \"p\", 30);\n    i0.ɵɵtemplate(5, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_5_Template, 3, 3, \"p\", 30);\n    i0.ɵɵtemplate(6, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_6_Template, 1, 1, \"p\", 31);\n    i0.ɵɵtemplate(7, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_badge_7_Template, 3, 3, \"ion-badge\", 32);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_8_Template, 1, 2, \"ion-icon\", 33);\n    i0.ɵɵtemplate(9, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_img_9_Template, 1, 2, \"img\", 34);\n    i0.ɵɵtemplate(10, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_10_Template, 1, 1, \"ion-icon\", 35);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"detail\", false);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 13, grade_r12.expanded ? \"core.collapse\" : \"core.expand\"))(\"aria-expanded\", grade_r12.expanded)(\"aria-controls\", \"grade-\" + grade_r12.id);\n    i0.ɵɵadvance(2);\n    i0.ɵɵclassProp(\"expandable-status-icon-expanded\", grade_r12.expanded);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !grade_r12.itemmodule);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.itemmodule);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.grade && grade_r12.grade !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !grade_r12.grade || grade_r12.grade === \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.icon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.image && !grade_r12.itemmodule);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.image && grade_r12.itemmodule);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.weight\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.weight, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.range\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.range, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.percentage\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.percentage, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.lettergrade\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.lettergrade, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.rank\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.rank, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.average\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.average, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 44);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r37 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"core.grades.feedback\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", grade_r12.feedback)(\"contextInstanceId\", ctx_r37.courseId);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"p\", 36);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"core.grades.contributiontocoursetotal\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"innerHTML\", grade_r12.contributiontocoursetotal, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 41);\n    i0.ɵɵtemplate(1, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_1_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(2, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_2_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(3, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_3_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(4, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_4_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(5, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_5_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(6, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_6_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(7, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_7_Template, 7, 5, \"ion-item\", 42);\n    i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_8_Template, 6, 4, \"ion-item\", 42);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const grade_r12 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"id\", \"grade-\" + grade_r12.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.weight == null ? null : grade_r12.weight.length) > 0 && grade_r12.weight !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.range == null ? null : grade_r12.range.length) > 0 && grade_r12.range !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.percentage == null ? null : grade_r12.percentage.length) > 0 && grade_r12.percentage !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.lettergrade == null ? null : grade_r12.lettergrade.length) > 0 && grade_r12.lettergrade !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.rank == null ? null : grade_r12.rank.length) > 0 && grade_r12.rank !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.average == null ? null : grade_r12.average.length) > 0 && grade_r12.average !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.feedback == null ? null : grade_r12.feedback.length) > 0 && grade_r12.feedback !== \"-\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", (grade_r12.contributiontocoursetotal == null ? null : grade_r12.contributiontocoursetotal.length) > 0 && grade_r12.contributiontocoursetotal !== \"-\");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template, 11, 15, \"ion-item\", 26);\n    i0.ɵɵtemplate(2, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_Template, 9, 9, \"div\", 27);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const grade_r12 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.gradeitem);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", grade_r12.expanded);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-list\")(2, \"ion-item\", 23)(3, \"ion-label\")(4, \"h2\");\n    i0.ɵɵelement(5, \"ion-icon\", 24);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_Template, 3, 2, \"ng-container\", 25);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(7, 2, \"core.grades.gradebook\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.grades);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r54 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 50);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r54);\n      const ctx_r53 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r53.removeFiles());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵpipe(2, \"coreBytesToSize\");\n    i0.ɵɵelement(3, \"ion-icon\", 51);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r51 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"disabled\", ctx_r51.prefetchLoading);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind2(1, 2, \"core.clearstoreddata\", i0.ɵɵpureFunction1(7, _c0, i0.ɵɵpipeBind1(2, 5, ctx_r51.size))));\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_spinner_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\", 52);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 47);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-badge\", 37);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"coreBytesToSize\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template, 4, 9, \"ion-button\", 48);\n    i0.ɵɵtemplate(9, CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_spinner_9_Template, 1, 0, \"ion-spinner\", 49);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r48 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 4, \"addon.storagemanager.totalspaceusage\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 6, ctx_r48.size));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r48.removeFilesLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r48.removeFilesLoading);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 43)(1, \"ion-label\")(2, \"p\", 43);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r49 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(4, 2, \"core.lastdownloaded\"), \" \", ctx_r49.downloadTimeReadable, \"\");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 56);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_spinner_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\", 57);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r58 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 53);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r58);\n      const ctx_r57 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r57.prefetch());\n    });\n    i0.ɵɵtemplate(1, CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_icon_1_Template, 1, 0, \"ion-icon\", 54);\n    i0.ɵɵtemplate(2, CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_spinner_2_Template, 1, 0, \"ion-spinner\", 55);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r50 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"disabled\", ctx_r50.prefetchDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r50.prefetchLoading);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r50.prefetchLoading);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 4, \"core.download\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 23)(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵelement(4, \"ion-icon\", 45);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(7, CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_Template, 10, 8, \"ion-item\", 42);\n    i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_card_12_ion_item_8_Template, 5, 4, \"ion-item\", 42);\n    i0.ɵɵtemplate(9, CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template, 6, 6, \"ion-button\", 46);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 4, \"addon.storagemanager.downloads\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.size && ctx_r4.displayOptions.displaySize);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.downloadTimeReadable);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.canPrefetch && ctx_r4.displayOptions.displayPrefetch);\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_item_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r60 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 58);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_item_13_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r60);\n      const ctx_r59 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r59.gotoBlog());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 59);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 2, \"addon.blog.blog\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r64 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 61);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r64);\n      const ctx_r63 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r63.refresh());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 62);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.refresh\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r66 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 61);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r66);\n      const ctx_r65 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r65.sync());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 63);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.settings.synchronizenow\"), \" \");\n  }\n}\nfunction CoreCourseModuleSummaryComponent_ion_footer_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-footer\");\n    i0.ɵɵtemplate(1, CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template, 5, 3, \"ion-button\", 60);\n    i0.ɵɵtemplate(2, CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template, 5, 3, \"ion-button\", 60);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.hasOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.hasOffline);\n  }\n}\n/**\n * Component to display a module summary modal.\n */\nexport class CoreCourseModuleSummaryComponent {\n  constructor() {\n    this.courseId = 0; // Course ID the component belongs to.\n    this.moduleId = 0; // Module ID the component belongs to.\n    this.component = ''; // Component name.\n    this.description = ''; // Module description.\n    this.hasOffline = false; // If it has offline data to be synced.\n    this.displayOptions = {};\n    this.loaded = false; // If the component has been loaded.\n    this.removeFilesLoading = false;\n    this.prefetchLoading = false;\n    this.canPrefetch = false;\n    this.prefetchDisabled = false;\n    this.downloadTimeReadable = ''; // Last download time in a readable format.\n    this.blog = false; // If blog is available.\n    this.isOnline = false; // If the app is online or not.\n    this.modicon = '';\n    this.moduleNameTranslated = '';\n    this.isDestroyed = false;\n    this.siteId = CoreSites.getCurrentSiteId();\n    this.isOnline = CoreNetwork.isOnline();\n    // Refresh online status when changes.\n    this.onlineSubscription = CoreNetwork.onChange().subscribe(() => {\n      // Execute the callback in the Angular zone, so change detection doesn't stop working.\n      NgZone.run(() => {\n        this.isOnline = CoreNetwork.isOnline();\n      });\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _CoreSites$getCurrent;\n      if (!_this.module) {\n        _this.closeModal();\n        return;\n      }\n      _this.displayOptions = Object.assign({\n        displayOpenInBrowser: !!((_CoreSites$getCurrent = CoreSites.getCurrentSite()) !== null && _CoreSites$getCurrent !== void 0 && _CoreSites$getCurrent.shouldDisplayInformativeLinks()),\n        displayDescription: true,\n        displayRefresh: true,\n        displayPrefetch: true,\n        displaySize: true,\n        displayBlog: true,\n        displayGrades: true\n      }, _this.displayOptions);\n      _this.displayOptions.displayGrades = _this.displayOptions.displayGrades && CoreCourseModuleDelegate.supportsFeature(_this.module.modname, CoreConstants.FEATURE_GRADE_HAS_GRADE, true);\n      _this.displayOptions.displayDescription = _this.displayOptions.displayDescription && CoreCourseModuleDelegate.supportsFeature(_this.module.modname, CoreConstants.FEATURE_SHOW_DESCRIPTION, true);\n      _this.fetchContent();\n      if (_this.component) {\n        _this.packageStatusObserver = CoreEvents.on(CoreEvents.PACKAGE_STATUS_CHANGED, data => {\n          if (data.componentId == module.id && data.component == _this.component) {\n            _this.getPackageStatus();\n          }\n        }, _this.siteId);\n        // Debounce the update size function to prevent too many calls when downloading or deleting a whole activity.\n        const debouncedUpdateSize = CoreUtils.debounce( /*#__PURE__*/_asyncToGenerator(function* () {\n          if (!_this.module) {\n            return;\n          }\n          const moduleSize = yield CoreCourseModulePrefetchDelegate.getModuleStoredSize(_this.module, _this.courseId);\n          if (moduleSize) {\n            _this.size = moduleSize;\n          }\n        }), 1000);\n        _this.fileStatusObserver = CoreEvents.on(CoreEvents.COMPONENT_FILE_ACTION, data => {\n          if (data.component != _this.component || data.componentId != module.id) {\n            // The event doesn't belong to this component, ignore.\n            return;\n          }\n          if (!CoreFilepool.isFileEventDownloadedOrDeleted(data)) {\n            return;\n          }\n          // Update the module size.\n          debouncedUpdateSize();\n        }, _this.siteId);\n      }\n    })();\n  }\n  /**\n   * Fetch content to populate the page.\n   */\n  fetchContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.module) {\n        return;\n      }\n      _this2.componentId = _this2.module.id;\n      _this2.externalUrl = _this2.module.url;\n      _this2.courseId = _this2.courseId || _this2.module.course;\n      _this2.moduleNameTranslated = CoreCourse.translateModuleName(_this2.module.modname, _this2.module.modplural);\n      _this2.blog = yield AddonBlog.isPluginEnabled();\n      try {\n        yield Promise.all([_this2.loadModIcon(), _this2.getPackageStatus(), _this2.fetchGrades(), _this2.fetchCourse()]);\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n      }\n      _this2.loaded = true;\n    })();\n  }\n  /**\n   * Load the module icon.\n   */\n  loadModIcon() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.module) {\n        return;\n      }\n      _this3.modicon = yield CoreCourseModuleDelegate.getModuleIconSrc(_this3.module.modname, _this3.module.modicon, _this3.module);\n    })();\n  }\n  /**\n   * Updage package status.\n   *\n   * @param refresh If prefetch info has to be refreshed.\n   */\n  getPackageStatus(refresh = false) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this4.module) {\n        return;\n      }\n      const moduleInfo = yield CoreCourseHelper.getModulePrefetchInfo(_this4.module, _this4.courseId, refresh, _this4.component);\n      _this4.canPrefetch = moduleInfo.status != CoreConstants.NOT_DOWNLOADABLE;\n      _this4.downloadTimeReadable = '';\n      if (_this4.canPrefetch) {\n        if (moduleInfo.downloadTime && moduleInfo.downloadTime > 0) {\n          _this4.downloadTimeReadable = CoreTextUtils.ucFirst(moduleInfo.downloadTimeReadable);\n        }\n        _this4.prefetchLoading = moduleInfo.status == CoreConstants.DOWNLOADING;\n        _this4.prefetchDisabled = moduleInfo.status == CoreConstants.DOWNLOADED;\n      }\n      if (moduleInfo.size && moduleInfo.size > 0) {\n        _this4.size = moduleInfo.size;\n      }\n    })();\n  }\n  /**\n   * Go to blog posts.\n   */\n  gotoBlog() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const params = {\n        cmId: _this5.moduleId\n      };\n      yield CoreNavigator.navigateToSitePath(AddonBlogMainMenuHandlerService.PAGE_NAME, {\n        params\n      });\n    })();\n  }\n  /**\n   * Fetch grade module info.\n   */\n  fetchGrades() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this6.displayOptions.displayGrades) {\n        return;\n      }\n      try {\n        _this6.grades = yield CoreGradesHelper.getModuleGrades(_this6.courseId, _this6.moduleId);\n      } catch (_unused) {\n        // Cannot get grades, don't display them.\n      }\n    })();\n  }\n  /**\n   * Toggle grades expand.\n   *\n   * @param grade Row to expand.\n   */\n  toggleGrade(grade) {\n    grade.expanded = !grade.expanded;\n  }\n  /**\n   * Fetch course.\n   */\n  fetchCourse() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      // Fix that.\n      try {\n        _this7.course = yield CoreCourses.getUserCourse(_this7.courseId, true);\n      } catch (_unused2) {\n        // The user is not enrolled in the course. Use getCourses to see if it's an admin/manager and can see the course.\n        _this7.course = yield CoreCourses.getCourse(_this7.courseId);\n      }\n    })();\n  }\n  /**\n   * Open course.\n   */\n  openCourse() {\n    if (!this.course) {\n      return;\n    }\n    CoreCourse.openCourse(this.course, {\n      replace: true,\n      animationDirection: 'back',\n      params: {\n        module: this.module,\n        openModule: false\n      }\n    });\n  }\n  /**\n   * Prefetch the module.\n   */\n  prefetch() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this8.module) {\n        return;\n      }\n      _this8.prefetchLoading = true; // Show spinner since this operation might take a while.\n      try {\n        // We need to call getDownloadSize, the package might have been updated.\n        const size = yield CoreCourseModulePrefetchDelegate.getModuleDownloadSize(_this8.module, _this8.courseId, true);\n        yield CoreDomUtils.confirmDownloadSize(size);\n        yield CoreCourseModulePrefetchDelegate.prefetchModule(_this8.module, _this8.courseId, true);\n        yield _this8.getPackageStatus(true);\n      } catch (error) {\n        _this8.prefetchLoading = false;\n        if (!_this8.isDestroyed) {\n          CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n        }\n      }\n    })();\n  }\n  /**\n   * Confirm and remove downloaded files.\n   */\n  removeFiles() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this9.module) {\n        return;\n      }\n      if (_this9.prefetchLoading) {\n        CoreDomUtils.showAlertTranslated(undefined, 'core.course.cannotdeletewhiledownloading');\n        return;\n      }\n      try {\n        yield CoreDomUtils.showDeleteConfirm('addon.storagemanager.confirmdeletedatafrom', {\n          name: _this9.module.name\n        });\n        _this9.removeFilesLoading = true;\n        yield CoreCourseHelper.removeModuleStoredData(_this9.module, _this9.courseId);\n      } catch (error) {\n        if (!_this9.isDestroyed && error) {\n          CoreDomUtils.showErrorModal(error);\n        }\n      } finally {\n        _this9.removeFilesLoading = false;\n        delete _this9.size;\n      }\n      yield _this9.getPackageStatus();\n    })();\n  }\n  /**\n   * Refresh the data.\n   */\n  refresh() {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this10.module) {\n        return;\n      }\n      ModalController.dismiss({\n        action: 'refresh'\n      });\n    })();\n  }\n  /**\n   * Sync the data.\n   */\n  sync() {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this11.module) {\n        return;\n      }\n      ModalController.dismiss({\n        action: 'sync'\n      });\n    })();\n  }\n  /**\n   * Close the modal.\n   */\n  closeModal() {\n    ModalController.dismiss();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$packageStatusOb, _this$fileStatusObser;\n    this.isDestroyed = true;\n    (_this$packageStatusOb = this.packageStatusObserver) === null || _this$packageStatusOb === void 0 || _this$packageStatusOb.off();\n    (_this$fileStatusObser = this.fileStatusObserver) === null || _this$fileStatusObser === void 0 || _this$fileStatusObser.off();\n    this.onlineSubscription.unsubscribe();\n  }\n}\n_class = CoreCourseModuleSummaryComponent;\n_class.ɵfac = function CoreCourseModuleSummaryComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"core-course-module-summary\"]],\n  inputs: {\n    module: \"module\",\n    courseId: \"courseId\",\n    moduleId: \"moduleId\",\n    component: \"component\",\n    description: \"description\",\n    hasOffline: \"hasOffline\",\n    displayOptions: \"displayOptions\"\n  },\n  decls: 15,\n  vars: 12,\n  consts: [[1, \"no-title\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"fas-xmark\", \"aria-hidden\", \"true\"], [3, \"fullscreen\"], [3, \"hideUntil\"], [\"class\", \"ion-text-wrap\", \"lines\", \"full\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", \"lines\", \"full\", 3, \"detail\", \"click\", 4, \"ngIf\"], [4, \"ngIf\"], [\"button\", \"\", 3, \"detail\", \"click\", 4, \"ngIf\"], [\"lines\", \"full\", 1, \"ion-text-wrap\"], [\"class\", \"core-modulename\", 4, \"ngIf\"], [\"contextLevel\", \"module\", 3, \"text\", \"component\", \"componentId\", \"contextInstanceId\", \"courseId\"], [\"fill\", \"clear\", \"core-link\", \"\", \"slot\", \"end\", 3, \"href\", \"showBrowserWarning\", 4, \"ngIf\"], [1, \"core-modulename\"], [\"slot\", \"start\", 3, \"modicon\", \"modname\", \"componentId\", \"fallbackTranslation\"], [\"fill\", \"clear\", \"core-link\", \"\", \"slot\", \"end\", 3, \"href\", \"showBrowserWarning\"], [\"name\", \"fas-up-right-from-square\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"button\", \"\", \"lines\", \"full\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [1, \"item-heading\"], [\"name\", \"fas-graduation-cap\", \"aria-hidden\", \"true\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [\"contextLevel\", \"module\", \"collapsible-item\", \"\", 3, \"text\", \"component\", \"componentId\", \"contextInstanceId\", \"courseId\"], [\"lines\", \"full\", 1, \"ion-text-wrap\", \"card-header\"], [\"name\", \"fas-chart-bar\", \"slot\", \"end\", \"aria-hidden\", \"true\"], [4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", \"class\", \"ion-text-wrap divider\", \"role\", \"heading\", 3, \"detail\", \"click\", 4, \"ngIf\"], [3, \"id\", 4, \"ngIf\"], [\"button\", \"\", \"role\", \"heading\", 1, \"ion-text-wrap\", \"divider\", 3, \"detail\", \"click\"], [\"name\", \"fas-chevron-right\", \"flip-rtl\", \"\", \"slot\", \"start\", \"aria-hidden\", \"true\", 1, \"expandable-status-icon\"], [\"class\", \"item-heading\", 4, \"ngIf\"], [3, \"innerHTML\", 4, \"ngIf\"], [\"color\", \"light\", 4, \"ngIf\"], [\"slot\", \"end\", 3, \"name\", 4, \"ngIf\"], [\"slot\", \"end\", 3, \"src\", \"alt\", 4, \"ngIf\"], [\"name\", \"fas-chart-bar\", \"slot\", \"end\", 4, \"ngIf\"], [3, \"innerHTML\"], [\"color\", \"light\"], [\"slot\", \"end\", 3, \"name\"], [\"slot\", \"end\", 3, \"src\", \"alt\"], [\"name\", \"fas-chart-bar\", \"slot\", \"end\"], [3, \"id\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [1, \"ion-text-wrap\"], [\"collapsible-item\", \"\", \"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [\"name\", \"fas-cloud-arrow-down\", \"aria-hidden\", \"true\"], [\"fill\", \"outline\", \"expand\", \"block\", \"class\", \"ion-text-wrap\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [1, \"item-heading\", \"ion-text-wrap\"], [\"color\", \"danger\", \"fill\", \"clear\", \"slot\", \"end\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"slot\", \"end\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"color\", \"danger\", \"fill\", \"clear\", \"slot\", \"end\", 3, \"disabled\", \"click\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"slot\", \"end\", \"aria-hidden\", \"true\"], [\"fill\", \"outline\", \"expand\", \"block\", 1, \"ion-text-wrap\", 3, \"disabled\", \"click\"], [\"name\", \"fas-cloud-arrow-down\", \"slot\", \"start\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"slot\", \"start\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"name\", \"fas-cloud-arrow-down\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"slot\", \"start\", \"aria-hidden\", \"true\"], [\"button\", \"\", 3, \"detail\", \"click\"], [\"name\", \"far-newspaper\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"class\", \"ion-margin\", \"expand\", \"block\", \"fill\", \"outline\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-margin\", 3, \"click\"], [\"name\", \"fas-rotate-right\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"name\", \"fas-rotate\", \"slot\", \"start\", \"aria-hidden\", \"true\"]],\n  template: function CoreCourseModuleSummaryComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1)(3, \"ion-button\", 2);\n      i0.ɵɵlistener(\"click\", function CoreCourseModuleSummaryComponent_Template_ion_button_click_3_listener() {\n        return ctx.closeModal();\n      });\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelement(5, \"ion-icon\", 3);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(6, \"ion-content\", 4)(7, \"core-loading\", 5);\n      i0.ɵɵtemplate(8, CoreCourseModuleSummaryComponent_ion_item_8_Template, 6, 7, \"ion-item\", 6);\n      i0.ɵɵtemplate(9, CoreCourseModuleSummaryComponent_ion_item_9_Template, 8, 6, \"ion-item\", 7);\n      i0.ɵɵtemplate(10, CoreCourseModuleSummaryComponent_ion_item_10_Template, 6, 8, \"ion-item\", 6);\n      i0.ɵɵtemplate(11, CoreCourseModuleSummaryComponent_ion_card_11_Template, 9, 4, \"ion-card\", 8);\n      i0.ɵɵtemplate(12, CoreCourseModuleSummaryComponent_ion_card_12_Template, 10, 6, \"ion-card\", 8);\n      i0.ɵɵtemplate(13, CoreCourseModuleSummaryComponent_ion_item_13_Template, 5, 4, \"ion-item\", 9);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(14, CoreCourseModuleSummaryComponent_ion_footer_14_Template, 3, 2, \"ion-footer\", 8);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(4, 10, \"core.close\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"fullscreen\", true);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.module);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.course);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.module && ctx.description && ctx.displayOptions.displayDescription);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayOptions.displayGrades && (ctx.grades == null ? null : ctx.grades.length) > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.canPrefetch && ctx.displayOptions.displayPrefetch || ctx.size && ctx.displayOptions.displaySize);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.blog && ctx.displayOptions.displayBlog);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loaded && ctx.isOnline && ctx.displayOptions.displayRefresh);\n    }\n  },\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%]     ion-item[collapsible] ion-label {\\n  margin-top: 12px;\\n}\\n\\nh1[_ngcontent-%COMP%] {\\n  font-size: 20px;\\n}\\n\\n.core-modulename[_ngcontent-%COMP%] {\\n  text-transform: uppercase;\\n}\\n.core-modulename[_ngcontent-%COMP%]   core-mod-icon[_ngcontent-%COMP%] {\\n  --padding: 3px;\\n  --size: 10px;\\n  margin: 0;\\n}\\n\\nion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%] {\\n  -webkit-margin-start: 0;\\n  margin-inline-start: 0;\\n  -webkit-margin-end: 4px;\\n  margin-inline-end: 4px;\\n  vertical-align: text-top;\\n}\\n\\nion-item.card-header[_ngcontent-%COMP%] {\\n  --padding-start: 8px;\\n  --padding-end: 8px;\\n  --inner-padding-start: 0px;\\n  --inner-padding-end: 0px;\\n  --min-height: 40px;\\n}\\nion-item.card-header[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] {\\n  margin: 0px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvY29yZS9mZWF0dXJlcy9jb3Vyc2UvY29tcG9uZW50cy9tb2R1bGUtc3VtbWFyeS9tb2R1bGUtc3VtbWFyeS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7O0VBQUE7QUNFQTs7OztFQUFBO0FBNEdBOztFQUFBO0FDOUdBOzs7O0VBQUE7QUNBQTs7OztFQUFBO0FBK0RBOzs7O0VBQUE7QUM3REE7RUFDSSxnQkFBQTtBQW9ESjs7QUFqREE7RUFDSSxlQUFBO0FBb0RKOztBQWpEQTtFQUNJLHlCQUFBO0FBb0RKO0FBbkRJO0VBQ0ksY0FBQTtFQUNBLFlBQUE7RUFDQSxTQUFBO0FBcURSOztBQWhEQTtFTGlTSSx1QktoUzJCO0VMaVMzQixzQktqUzJCO0VMa1MzQix1QktsUzhCO0VMbVM5QixzQktuUzhCO0VBQzlCLHdCQUFBO0FBc0RKOztBQWxEQTtFQUNJLG9CQUFBO0VBQ0Esa0JBQUE7RUFDQSwwQkFBQTtFQUNBLHdCQUFBO0VBQ0Esa0JBQUE7QUFxREo7QUFuREk7RUFDSSxXQUFBO0FBcURSIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBcHAgR2xvYmFsIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIHRoZSBkaWZmZXJlbnQgZmlsZXMgeW91IHNob3VsZCBpbXBvcnQgdG8gdXNlIGdsb2JhbCB2YXJpYWJsZXMuXG4gKi9cblxuJGZvbnQtcGF0aDogXCIuLi9hc3NldHMvZm9udHNcIjtcbiRhc3NldHMtcGF0aDogXCIuLi9hc3NldHNcIjtcblxuQGltcG9ydCBcIi4vaGVscGVycy9oZWxwZXJzLnNjc3NcIjtcbkBpbXBvcnQgXCIuL2dsb2JhbHMuY3VzdG9tLnNjc3NcIjtcbkBpbXBvcnQgXCIuL2dsb2JhbHMudmFyaWFibGVzLnNjc3NcIjtcbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgc3RyaW5nIGZ1bmN0aW9ucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMuZnVuY3Rpb25zLnN0cmluZy5zY3NzXG4gKi9cblxuXG4vLyBTdHJpbmcgVXRpbGl0eSBGdW5jdGlvbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIFN0cmluZyBSZXBsYWNlIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLXJlcGxhY2UoJHN0cmluZywgJHNlYXJjaCwgJHJlcGxhY2U6IFwiXCIpIHtcbiAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlYXJjaCk7XG5cbiAgQGlmICRpbmRleCB7XG4gICAgQHJldHVybiBzdHItc2xpY2UoJHN0cmluZywgMSwgJGluZGV4IC0gMSkgKyAkcmVwbGFjZSArIHN0ci1yZXBsYWNlKHN0ci1zbGljZSgkc3RyaW5nLCAkaW5kZXggKyBzdHItbGVuZ3RoKCRzZWFyY2gpKSwgJHNlYXJjaCwgJHJlcGxhY2UpO1xuICB9XG5cbiAgQHJldHVybiAkc3RyaW5nO1xufVxuXG4vLyBTdHJpbmcgU3BsaXQgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuQGZ1bmN0aW9uIHN0ci1zcGxpdCgkc3RyaW5nLCAkc2VwYXJhdG9yKSB7XG4gIC8vIGVtcHR5IGFycmF5L2xpc3RcbiAgJHNwbGl0LWFycjogKCk7XG4gIC8vIGZpcnN0IGluZGV4IG9mIHNlcGFyYXRvciBpbiBzdHJpbmdcbiAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlcGFyYXRvcik7XG4gIC8vIGxvb3AgdGhyb3VnaCBzdHJpbmdcbiAgQHdoaWxlICRpbmRleCAhPSBudWxsIHtcbiAgICAvLyBnZXQgdGhlIHN1YnN0cmluZyBmcm9tIHRoZSBmaXJzdCBjaGFyYWN0ZXIgdG8gdGhlIHNlcGFyYXRvclxuICAgICRpdGVtOiBzdHItc2xpY2UoJHN0cmluZywgMSwgJGluZGV4IC0gMSk7XG4gICAgLy8gcHVzaCBpdGVtIHRvIGFycmF5XG4gICAgJHNwbGl0LWFycjogYXBwZW5kKCRzcGxpdC1hcnIsICRpdGVtKTtcbiAgICAvLyByZW1vdmUgaXRlbSBhbmQgc2VwYXJhdG9yIGZyb20gc3RyaW5nXG4gICAgJHN0cmluZzogc3RyLXNsaWNlKCRzdHJpbmcsICRpbmRleCArIDEpO1xuICAgIC8vIGZpbmQgbmV3IGluZGV4IG9mIHNlcGFyYXRvclxuICAgICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZXBhcmF0b3IpO1xuICB9XG4gIC8vIGFkZCB0aGUgcmVtYWluaW5nIHN0cmluZyB0byBsaXN0ICh0aGUgbGFzdCBpdGVtKVxuICAkc3BsaXQtYXJyOiBhcHBlbmQoJHNwbGl0LWFyciwgJHN0cmluZyk7XG5cbiAgQHJldHVybiAkc3BsaXQtYXJyO1xufVxuXG5cbi8vIFN0cmluZyBFeHRyYWN0IEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLWV4dHJhY3QoJHN0cmluZywgJHN0YXJ0LCAkZW5kKSB7XG4gICRzdGFydC1pbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzdGFydCk7XG5cbiAgQGlmICRzdGFydC1pbmRleCB7XG4gICAgJHBvc3Q6IHN0ci1zbGljZSgkc3RyaW5nLCAkc3RhcnQtaW5kZXggKyBzdHItbGVuZ3RoKCRzdGFydCkpO1xuICAgICRlbmQtaW5kZXg6IHN0ci1pbmRleCgkcG9zdCwgJGVuZCk7XG5cbiAgICBAaWYgJGVuZC1pbmRleCB7XG4gICAgICBAcmV0dXJuIHN0ci1zbGljZSgkcG9zdCwgMSwgJGVuZC1pbmRleCAtIDEpO1xuICAgIH1cbiAgfVxuXG4gIEByZXR1cm4gbnVsbDtcbn1cblxuXG4vLyBTdHJpbmcgQ29udGFpbnMgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItY29udGFpbnMoJHN0cmluZywgJG5lZWRsZSkge1xuICBAaWYgKHR5cGUtb2YoJHN0cmluZykgPT0gc3RyaW5nKSB7XG4gICAgQHJldHVybiBzdHItaW5kZXgoJHN0cmluZywgJG5lZWRsZSkgIT0gbnVsbDtcbiAgfVxuXG4gIEByZXR1cm4gZmFsc2U7XG59XG5cblxuLy8gVVJMIEVuY29kZSBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHVybC1lbmNvZGUoJHZhbCkge1xuICAkc3BhY2VzOiBzdHItcmVwbGFjZSgkdmFsLCBcIiBcIiwgXCIlMjBcIik7XG4gICRlbmNvZGVkOiBzdHItcmVwbGFjZSgkc3BhY2VzLCBcIiNcIiwgXCIlMjNcIik7XG4gIEByZXR1cm4gJGVuY29kZWQ7XG59XG5cblxuLy8gQWRkIFJvb3QgU2VsZWN0b3Jcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBBZGRzIGEgcm9vdCBzZWxlY3RvciB1c2luZyBob3N0IGJhc2VkIG9uIHRoZSBzZWxlY3RvciBwYXNzZWRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBhZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgJGFkZEhvc3RTZWxlY3Rvcikge1xuICAkc2VsZWN0b3JzOiBzdHItc3BsaXQoJHJvb3QsIFwiLFwiKTtcblxuICAkbGlzdDogKCk7XG5cbiAgQGVhY2ggJHNlbGVjdG9yIGluICRzZWxlY3RvcnMge1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBjb250YWlucyA6aG9zdCggaXQgbWVhbnMgaXQgaXMgdGFyZ2V0aW5nIGEgY2xhc3Mgb24gdGhlIGhvc3RcbiAgICAvLyBlbGVtZW50IHNvIHdlIG5lZWQgdG8gY2hhbmdlIGhvdyB3ZSB0YXJnZXQgaXQ6XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZClcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgQGlmIHN0ci1jb250YWlucygkc2VsZWN0b3IsIFwiOmhvc3QoXCIpIHtcbiAgICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZClcbiAgICAgICRzaGFkb3ctZWxlbWVudDogc3RyLXJlcGxhY2UoJHNlbGVjdG9yLCBcIjpob3N0KFwiLCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSk6aG9zdChcIik7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkc2hhZG93LWVsZW1lbnQsIGNvbW1hKTtcblxuICAgICAgJG5ldy1lbGVtZW50OiAoKTtcbiAgICAgICRlbGVtZW50czogc3RyLXNwbGl0KCRzZWxlY3RvciwgXCIgXCIpO1xuXG4gICAgICBAZWFjaCAkZWxlbWVudCBpbiAkZWxlbWVudHMge1xuICAgICAgICBAaWYgc3RyLWNvbnRhaW5zKCRlbGVtZW50LCBcIjpob3N0KFwiKSB7XG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiAkZWxlbWVudDtcblxuICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIDpob3N0KCBhbmQgKSBzbyBhbGwgd2UgaGF2ZSBsZWZ0IGlzIHRoZSBjbGFzc1xuICAgICAgICAgIC8vIGluc2lkZSBvZiBpdDpcbiAgICAgICAgICAvLyA6aG9zdCguZml4ZWQpIC0+IC5maXhlZFxuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCBcIilcIiwgXCJcIik7XG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsIFwiOmhvc3QoXCIsIFwiXCIpO1xuXG4gICAgICAgICAgLy8gQWRkIHRoZSBjbGFzcyBiYWNrIGluc2lkZSBvZiBob3N0IHdpdGggdGhlIHJ0bCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyAuZml4ZWQgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsICRzY29wZWQtZWxlbWVudCwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pI3skc2NvcGVkLWVsZW1lbnR9XCIpO1xuXG4gICAgICAgICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJHNjb3BlZC1lbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH0gQGVsc2Uge1xuICAgICAgICAgIC8vIEFkZCBiYWNrIGFueSBzZWxlY3RvcnMgdGhhdCBmb2xsb3dlZCB0aGUgaG9zdCBhZnRlciB0cmFuc2Zvcm1pbmcgdGhlXG4gICAgICAgICAgLy8gZmlyc3Qgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QoLmZpeGVkKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKTpob3N0KC5maXhlZCkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWQgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJGVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkbmV3LWVsZW1lbnQsIGNvbW1hKTtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgY29udGFpbnMgOmhvc3Qgd2l0aG91dCBhIHBhcmFudGhlc2VzXG4gICAgLy8gaXQgbWVhbnMgaXQgaXMgdGFyZ2V0aW5nIGp1c3QgdGhlIGhvc3RcbiAgICAvLyBlbGVtZW50IHNvIHdlIGNhbiBjaGFuZ2UgaXQgdG8gbG9vayBmb3IgaG9zdC1jb250ZXh0XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdFwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAvLyAtLT4gOmhvc3Q6ZGlyKHJ0bClcbiAgICB9IEBlbHNlIGlmIHN0ci1jb250YWlucygkc2VsZWN0b3IsIFwiOmhvc3RcIikge1xuICAgICAgJG5ldy1lbGVtZW50OiAoKTtcbiAgICAgICRlbGVtZW50czogc3RyLXNwbGl0KCRzZWxlY3RvciwgXCIgXCIpO1xuXG4gICAgICBAZWFjaCAkZWxlbWVudCBpbiAkZWxlbWVudHMge1xuICAgICAgICBAaWYgc3RyLWNvbnRhaW5zKCRlbGVtZW50LCBcIjpob3N0XCIpIHtcbiAgICAgICAgICAvLyBSZXBsYWNlIHRoZSA6aG9zdCB3aXRoIHRoZSBhZGRIb3N0U2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgICAgICAgJHVwZGF0ZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJGVsZW1lbnQsIFwiOmhvc3RcIiwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pXCIpO1xuXG4gICAgICAgICAgLy8gQWRkIHRoZSBmaW5hbCBzZWxlY3RvciBhZnRlciBhbGwgdHJhbnNmb3JtYXRpb25zOlxuICAgICAgICAgIC8vIDpob3N0IC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJHVwZGF0ZWQtZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9IEBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgYmFjayBhbnkgc2VsZWN0b3JzIHRoYXQgZm9sbG93ZWQgdGhlIGhvc3QgYWZ0ZXIgdHJhbnNmb3JtaW5nIHRoZVxuICAgICAgICAgIC8vIGZpcnN0IHNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0IDo6c2xvdHRlZChpb24taWNvbikgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRlbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJG5ldy1lbGVtZW50LCBjb21tYSk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGRvZXMgbm90IGNvbnRhaW4gaG9zdCBhdCBhbGwgaXQgaXMgZWl0aGVyIGEgc2hhZG93XG4gICAgLy8gb3Igbm9ybWFsIGVsZW1lbnQgc28gYXBwZW5kIGJvdGggdGhlIGFkZEhvc3RTZWxlY3RvciBhbmQgaG9zdC1jb250ZXh0XG4gICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCJpb24tY29tcG9uZW50XCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSBpb24tY29tcG9uZW50XG4gICAgLy8gLS0+IFtkaXI9cnRsXSBpb24tY29tcG9uZW50XG4gICAgfSBAZWxzZSB7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCBcIiN7JGFkZEhvc3RTZWxlY3Rvcn0gI3skc2VsZWN0b3J9XCIsIGNvbW1hKTtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KSAjeyRzZWxlY3Rvcn1cIiwgY29tbWEpO1xuICAgIH1cbiAgfVxuXG4gIEByZXR1cm4gJGxpc3Q7XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIGNvbG9yIGZ1bmN0aW9ucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMuZnVuY3Rpb25zLmNvbG9yLnNjc3NcbiAqL1xuXG4vLyBHZXRzIHRoZSBhY3RpdmUgY29sb3IncyBjc3MgdmFyaWFibGUgZnJvbSBhIHZhcmlhdGlvbi4gQWxwaGEgaXMgb3B0aW9uYWwuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXhhbXBsZSB1c2FnZTpcbi8vIGN1cnJlbnQtY29sb3IoYmFzZSkgPT4gdmFyKC0taW9uLWNvbG9yLWJhc2UpXG4vLyBjdXJyZW50LWNvbG9yKGNvbnRyYXN0LCAwLjEpID0+IHJnYmEodmFyKC0taW9uLWNvbG9yLWNvbnRyYXN0LXJnYiksIDAuMSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gY3VycmVudC1jb2xvcigkdmFyaWF0aW9uLCAkYWxwaGE6IG51bGwpIHtcbiAgQGlmICRhbHBoYSA9PSBudWxsIHtcbiAgICBAcmV0dXJuIHZhcigtLWlvbi1jb2xvci0jeyR2YXJpYXRpb259KTtcbiAgfSBAZWxzZSB7XG4gICAgQHJldHVybiByZ2JhKHZhcigtLWlvbi1jb2xvci0jeyR2YXJpYXRpb259LXJnYiksICN7JGFscGhhfSk7XG4gIH1cbn1cblxuLy8gR2V0cyB0aGUgc3BlY2lmaWMgY29sb3IncyBjc3MgdmFyaWFibGUgZnJvbSB0aGUgbmFtZSBhbmQgdmFyaWF0aW9uLiBBbHBoYS9yZ2IgYXJlIG9wdGlvbmFsLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV4YW1wbGUgdXNhZ2U6XG4vLyBpb24tY29sb3IocHJpbWFyeSwgYmFzZSkgPT4gdmFyKC0taW9uLWNvbG9yLXByaW1hcnksICMzODgwZmYpXG4vLyBpb24tY29sb3Ioc2Vjb25kYXJ5LCBjb250cmFzdCkgPT4gdmFyKC0taW9uLWNvbG9yLXNlY29uZGFyeS1jb250cmFzdClcbi8vIGlvbi1jb2xvcihwcmltYXJ5LCBiYXNlLCAwLjUpID0+IHJnYmEodmFyKC0taW9uLWNvbG9yLXByaW1hcnktcmdiLCA1NiwgMTI4LCAyNTUpLCAwLjUpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGlvbi1jb2xvcigkbmFtZSwgJHZhcmlhdGlvbiwgJGFscGhhOiBudWxsLCAkcmdiOiBudWxsKSB7XG4gICR2YWx1ZXM6IG1hcC1nZXQoJGNvbG9ycywgJG5hbWUpO1xuICAkdmFsdWU6IG1hcC1nZXQoJHZhbHVlcywgJHZhcmlhdGlvbik7XG4gICR2YXJpYWJsZTogLS1pb24tY29sb3ItI3skbmFtZX0tI3skdmFyaWF0aW9ufTtcblxuICBAaWYgKCR2YXJpYXRpb24gPT0gYmFzZSkge1xuICAgICR2YXJpYWJsZTogLS1pb24tY29sb3ItI3skbmFtZX07XG4gIH1cblxuICBAaWYgKCRhbHBoYSkge1xuICAgICR2YWx1ZTogY29sb3ItdG8tcmdiLWxpc3QoJHZhbHVlKTtcbiAgICBAcmV0dXJuIHJnYmEodmFyKCN7JHZhcmlhYmxlfS1yZ2IsICR2YWx1ZSksICRhbHBoYSk7XG4gIH1cbiAgQGlmICgkcmdiKSB7XG4gICAgJHZhbHVlOiBjb2xvci10by1yZ2ItbGlzdCgkdmFsdWUpO1xuICAgICR2YXJpYWJsZTogI3skdmFyaWFibGV9LXJnYjtcbiAgfVxuXG4gIEByZXR1cm4gdmFyKCN7JHZhcmlhYmxlfSwgJHZhbHVlKTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIGJsYWNrIHRvIGNyZWF0ZSBpdHMgc2hhZGUuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci1zaGFkZSgkY29sb3IpIHtcbiAgQHJldHVybiBtaXgoIzAwMCwgJGNvbG9yLCAxMiUpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggd2hpdGUgdG8gY3JlYXRlIGl0cyB0aW50LlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3ItdGludCgkY29sb3IpIHtcbiAgQHJldHVybiBtaXgoI2ZmZiwgJGNvbG9yLCAxMCUpO1xufVxuXG4vLyBDb252ZXJ0cyBhIGNvbG9yIHRvIGEgY29tbWEgc2VwYXJhdGVkIHJnYi5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gY29sb3ItdG8tcmdiLWxpc3QoJGNvbG9yKSB7XG4gIEByZXR1cm4gI3tyZWQoJGNvbG9yKX0sI3tncmVlbigkY29sb3IpfSwje2JsdWUoJGNvbG9yKX07XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIG1peGlucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy90aGVtZXMvaW9uaWMubWl4aW5zLnNjc3NcbiAqL1xuXG5AbWl4aW4gaW5wdXQtY292ZXIoKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uKDAsIG51bGwsIG51bGwsIDApO1xuICBAaW5jbHVkZSBtYXJnaW4oMCk7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgYm9yZGVyOiAwO1xuICBiYWNrZ3JvdW5kOiB0cmFuc3BhcmVudDtcbiAgY3Vyc29yOiBwb2ludGVyO1xuXG4gIGFwcGVhcmFuY2U6IG5vbmU7XG4gIG91dGxpbmU6IG5vbmU7XG5cbiAgJjo6LW1vei1mb2N1cy1pbm5lciB7XG4gICAgYm9yZGVyOiAwO1xuICB9XG59XG5cbkBtaXhpbiB2aXN1YWxseS1oaWRkZW4oKSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG4gIHJpZ2h0OiAwO1xuICBib3R0b206IDA7XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcblxuICBtYXJnaW46IDA7XG4gIHBhZGRpbmc6IDA7XG5cbiAgYm9yZGVyOiAwO1xuICBvdXRsaW5lOiAwO1xuICBjbGlwOiByZWN0KDAgMCAwIDApO1xuXG4gIG9wYWNpdHk6IDA7XG4gIG92ZXJmbG93OiBoaWRkZW47XG5cbiAgLXdlYmtpdC1hcHBlYXJhbmNlOiBub25lO1xuICAtbW96LWFwcGVhcmFuY2U6IG5vbmU7XG59XG5cbkBtaXhpbiB0ZXh0LWluaGVyaXQoKSB7XG4gIGZvbnQtZmFtaWx5OiBpbmhlcml0O1xuICBmb250LXNpemU6IGluaGVyaXQ7XG4gIGZvbnQtc3R5bGU6IGluaGVyaXQ7XG4gIGZvbnQtd2VpZ2h0OiBpbmhlcml0O1xuICBsZXR0ZXItc3BhY2luZzogaW5oZXJpdDtcbiAgdGV4dC1kZWNvcmF0aW9uOiBpbmhlcml0O1xuICB0ZXh0LWluZGVudDogaW5oZXJpdDtcbiAgdGV4dC1vdmVyZmxvdzogaW5oZXJpdDtcbiAgdGV4dC10cmFuc2Zvcm06IGluaGVyaXQ7XG4gIHRleHQtYWxpZ246IGluaGVyaXQ7XG4gIHdoaXRlLXNwYWNlOiBpbmhlcml0O1xuICBjb2xvcjogaW5oZXJpdDtcbn1cblxuQG1peGluIGJ1dHRvbi1zdGF0ZSgpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24oMCwgMCwgMCwgMCk7XG5cbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIGNvbnRlbnQ6IFwiXCI7XG5cbiAgb3BhY2l0eTogMDtcbn1cblxuLy8gRm9udCBzbW9vdGhpbmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBmb250LXNtb290aGluZygpIHtcbiAgLW1vei1vc3gtZm9udC1zbW9vdGhpbmc6IGdyYXlzY2FsZTtcbiAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XG59XG5cbi8vIEdldCB0aGUga2V5IGZyb20gYSBtYXAgYmFzZWQgb24gdGhlIGluZGV4XG5AZnVuY3Rpb24gaW5kZXgtdG8ta2V5KCRtYXAsICRpbmRleCkge1xuICAka2V5czogbWFwLWtleXMoJG1hcCk7XG5cbiAgQHJldHVybiBudGgoJGtleXMsICRpbmRleCk7XG59XG5cblxuLy8gQnJlYWtwb2ludCBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBCcmVha3BvaW50IHZpZXdwb3J0IHNpemVzIGFuZCBtZWRpYSBxdWVyaWVzLlxuLy9cbi8vIEJyZWFrcG9pbnRzIGFyZSBkZWZpbmVkIGFzIGEgbWFwIG9mIChuYW1lOiBtaW5pbXVtIHdpZHRoKSwgb3JkZXIgZnJvbSBzbWFsbCB0byBsYXJnZTpcbi8vXG4vLyAgICAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpXG4vL1xuLy8gVGhlIG1hcCBkZWZpbmVkIGluIHRoZSBgJHNjcmVlbi1icmVha3BvaW50c2AgZ2xvYmFsIHZhcmlhYmxlIGlzIHVzZWQgYXMgdGhlIGAkYnJlYWtwb2ludHNgIGFyZ3VtZW50IGJ5IGRlZmF1bHQuXG5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBNaW5pbXVtIGJyZWFrcG9pbnQgd2lkdGguIE51bGwgZm9yIHRoZSBzbWFsbGVzdCAoZmlyc3QpIGJyZWFrcG9pbnQuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1taW4oc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICA1NzZweFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1pbjogbWFwLWdldCgkYnJlYWtwb2ludHMsICRuYW1lKTtcblxuICBAcmV0dXJuIGlmKCRuYW1lICE9IGluZGV4LXRvLWtleSgkYnJlYWtwb2ludHMsIDEpLCAkbWluLCBudWxsKTtcbn1cblxuLy8gUmV0dXJucyBhIGJsYW5rIHN0cmluZyBpZiBzbWFsbGVzdCBicmVha3BvaW50LCBvdGhlcndpc2UgcmV0dXJucyB0aGUgbmFtZSB3aXRoIGEgZGFzaCBpbmZyb250LlxuLy8gVXNlZnVsIGZvciBtYWtpbmcgcmVzcG9uc2l2ZSB1dGlsaXRpZXMuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1pbmZpeCh4cywgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIFwiXCIgIChSZXR1cm5zIGEgYmxhbmsgc3RyaW5nKVxuLy8gICAgPj4gYnJlYWtwb2ludC1pbmZpeChzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIFwiLXNtXCJcbkBmdW5jdGlvbiBicmVha3BvaW50LWluZml4KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgQHJldHVybiBpZihicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzKSA9PSBudWxsLCBcIlwiLCBcIi0jeyRuYW1lfVwiKTtcbn1cblxuLy8gTWVkaWEgb2YgYXQgbGVhc3QgdGhlIG1pbmltdW0gYnJlYWtwb2ludCB3aWR0aC4gTm8gcXVlcnkgZm9yIHRoZSBzbWFsbGVzdCBicmVha3BvaW50LlxuLy8gTWFrZXMgdGhlIEBjb250ZW50IGFwcGx5IHRvIHRoZSBnaXZlbiBicmVha3BvaW50IGFuZCB3aWRlci5cbkBtaXhpbiBtZWRpYS1icmVha3BvaW50LXVwKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1pbjogYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50cyk7XG4gIEBpZiAkbWluIHtcbiAgICBAbWVkaWEgKG1pbi13aWR0aDogJG1pbikge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG4vLyBOYW1lIG9mIHRoZSBuZXh0IGJyZWFrcG9pbnQsIG9yIG51bGwgZm9yIHRoZSBsYXN0IGJyZWFrcG9pbnQuXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtKVxuLy8gICAgbWRcbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIG1kXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20sICRicmVha3BvaW50LW5hbWVzOiAoeHMgc20gbWQgbGcgeGwpKVxuLy8gICAgbWRcbkBmdW5jdGlvbiBicmVha3BvaW50LW5leHQoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cywgJGJyZWFrcG9pbnQtbmFtZXM6IG1hcC1rZXlzKCRicmVha3BvaW50cykpIHtcbiAgJG46IGluZGV4KCRicmVha3BvaW50LW5hbWVzLCAkbmFtZSk7XG4gIEByZXR1cm4gaWYoJG4gPCBsZW5ndGgoJGJyZWFrcG9pbnQtbmFtZXMpLCBudGgoJGJyZWFrcG9pbnQtbmFtZXMsICRuICsgMSksIG51bGwpO1xufVxuXG4vLyBNYXhpbXVtIGJyZWFrcG9pbnQgd2lkdGguIE51bGwgZm9yIHRoZSBzbWFsbGVzdCAoZmlyc3QpIGJyZWFrcG9pbnQuXG4vLyBUaGUgbWF4aW11bSB2YWx1ZSBpcyByZWR1Y2VkIGJ5IDAuMDJweCB0byB3b3JrIGFyb3VuZCB0aGUgbGltaXRhdGlvbnMgb2Zcbi8vIGBtaW4tYCBhbmQgYG1heC1gIHByZWZpeGVzIGFuZCB2aWV3cG9ydHMgd2l0aCBmcmFjdGlvbmFsIHdpZHRocy5cbi8vXG4vLyBTZWUgaHR0cHM6Ly93d3cudzMub3JnL1RSL21lZGlhcXVlcmllcy00LyNtcS1taW4tbWF4XG4vLyBVc2VzIDAuMDJweCByYXRoZXIgdGhhbiAwLjAxcHggdG8gd29yayBhcm91bmQgYSBjdXJyZW50IHJvdW5kaW5nIGJ1ZyBpbiBTYWZhcmkuXHQvLyBVc2VzIDAuMDJweCByYXRoZXIgdGhhbiAwLjAxcHggdG8gd29yayBhcm91bmQgYSBjdXJyZW50IHJvdW5kaW5nIGJ1ZyBpbiBTYWZhcmkuXG4vLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3ODI2MVx0Ly8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzgyNjFcbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW1heChtZCwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIDc2Ny45OHB4XG5AZnVuY3Rpb24gYnJlYWtwb2ludC1tYXgoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWF4OiBtYXAtZ2V0KCRicmVha3BvaW50cywgJG5hbWUpO1xuICBAcmV0dXJuIGlmKCRtYXggYW5kICRtYXggPiAwLCAkbWF4IC0gLjAyLCBudWxsKTtcbn1cblxuLy8gTWVkaWEgb2YgYXQgbW9zdCB0aGUgbWF4aW11bSBicmVha3BvaW50IHdpZHRoLiBObyBxdWVyeSBmb3IgdGhlIGxhcmdlc3QgYnJlYWtwb2ludC5cbi8vIE1ha2VzIHRoZSBAY29udGVudCBhcHBseSB0byB0aGUgZ2l2ZW4gYnJlYWtwb2ludCBhbmQgbmFycm93ZXIuXG5AbWl4aW4gbWVkaWEtYnJlYWtwb2ludC1kb3duKCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1heDogYnJlYWtwb2ludC1tYXgoJG5hbWUsICRicmVha3BvaW50cyk7XG4gIEBpZiAkbWF4IHtcbiAgICBAbWVkaWEgKG1heC13aWR0aDogJG1heCkge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAY29udGVudDtcbiAgfVxufVxuXG5cbi8vIFRleHQgRGlyZWN0aW9uIC0gbHRyIC8gcnRsXG4vL1xuLy8gQ1NTIGRlZmF1bHRzIHRvIHVzZSB0aGUgbHRyIGNzcywgYW5kIGFkZHMgW2Rpcj1ydGxdIHNlbGVjdG9yc1xuLy8gdG8gb3ZlcnJpZGUgbHRyIGRlZmF1bHRzLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbXVsdGktZGlyKCkge1xuICBAY29udGVudDtcblxuICAvLyAkcm9vdDogI3smfTtcbiAgLy8gQGF0LXJvb3QgW2Rpcl0ge1xuICAvLyAgICN7JHJvb3R9IHtcbiAgLy8gICAgIEBjb250ZW50O1xuICAvLyAgIH1cbiAgLy8gfVxufVxuXG5AbWl4aW4gcnRsKCkge1xuICAkcm9vdDogI3smfTtcblxuICAkcm9vdFNwbGl0OiBzdHItc3BsaXQoJHJvb3QsIFwiLFwiKTtcbiAgJHNlbGVjdG9yczogI3thZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgXCJbZGlyPXJ0bF1cIil9O1xuICAkc2VsZWN0b3JzU3BsaXQ6IHN0ci1zcGxpdCgkc2VsZWN0b3JzLCBcIixcIik7XG5cbiAgJGhvc3RDb250ZXh0U2VsZWN0b3JzOiAoKTtcbiAgJHJlc3RTZWxlY3RvcnM6ICgpO1xuICAkZGlyU2VsZWN0b3JzOiAoKTtcblxuICAvLyBTZWxlY3RvcnMgbXVzdCBiZSBzcGxpdCBpbnRvIGluZGl2aWR1YWwgc2VsZWN0b3JzIGluIGNhc2UgdGhlIGJyb3dzZXJcbiAgLy8gZG9lc24ndCBzdXBwb3J0IGEgc3BlY2lmaWMgc2VsZWN0b3IuXG4gIC8vIEZvciBleGFtcGxlLCBGaXJlZm94IGFuZCBTYWZhcmkgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLlxuICAvLyBJZiBhbiBpbnZhbGlkIHNlbGVjdG9yIGlzIHVzZWQsIHRoZW4gdGhlIGVudGlyZSBncm91cCBvZiBzZWxlY3RvcnNcbiAgLy8gd2lsbCBiZSBpZ25vcmVkLlxuICAvLyBAbGluayBodHRwczovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLTMvI2dyb3VwaW5nXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkc2VsZWN0b3JzU3BsaXQge1xuICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgQGlmIHN0ci1pbmRleCgkc2VsZWN0b3IsIFwiOmhvc3QtY29udGV4dFwiKSB7XG4gICAgICAkaG9zdENvbnRleHRTZWxlY3RvcnM6IGFwcGVuZCgkaG9zdENvbnRleHRTZWxlY3RvcnMsICRzZWxlY3RvciwgY29tbWEpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICAgICRyZXN0U2VsZWN0b3JzOiBhcHBlbmQoJHJlc3RTZWxlY3RvcnMsICRzZWxlY3RvciwgY29tbWEpO1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBDaHJvbWUuXG4gIEBpZiBsZW5ndGgoJGhvc3RDb250ZXh0U2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JGhvc3RDb250ZXh0U2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgYWxsIGJyb3dzZXJzLlxuICBAaWYgbGVuZ3RoKCRyZXN0U2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JHJlc3RTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8vIElmIGJyb3dzZXIgY2FuIHN1cHBvcnQgYDpkaXIoKWAsIHRoZW4gYWRkIHRoZSBgOmRpcigpYCBzZWxlY3RvcnMuXG4gIC8vIEBzdXBwb3J0cyBzZWxlY3Rvcig6ZGlyKHJ0bCkpIHsgLy8gQCBJTVBPVEFOVCBOT1RFOiBUaGlzIGhhcyBiZWVuIHJlbW92ZWQgYmVjYXVzZSBzZWxlY3RvciBmdW5jdGlvbiBpcyBub3Qgc3VwcG9ydGVkIGluIGN1cnJlbnQgU0NTU1xuICAvLyBBZGRpbmcgOmRpcigpIGluIGNhc2UgdGhlIGJyb3dzZXIgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgIGFuZCBkb2VzIHN1cHBvcnQgYDpkaXIoKWAuXG4gIC8vIGA6aG9zdC1jb250ZXh0KClgIGlzIGFkZGVkOlxuICAvLyAtIHRocm91Z2ggdGhlIGBhZGQtcm9vdC1zZWxlY3RvcigpYCBmdW5jdGlvbi5cbiAgLy8gLSBmaXJzdCBzbyB0aGF0IGl0IHRha2VzIHByZWNlZGVuY2Ugb3ZlciBgOmRpcigpYC5cbiAgLy8gRm9yIGV4YW1wbGUsXG4gIC8vIC0gRmlyZWZveCBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAsIGJ1dCBkb2VzIHN1cHBvcnQgYDpkaXIoKWAuXG4gIC8vIC0gU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCwgYnV0IFNhZmFyaSAxNi40KyBzdXBwb3J0cyBgOmRpcigpYFxuICAvLyBAbGluayBodHRwczovL3dlYmtpdC5vcmcvYmxvZy8xMzk2Ni93ZWJraXQtZmVhdHVyZXMtaW4tc2FmYXJpLTE2LTQvXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkcm9vdFNwbGl0IHtcbiAgICAkZGlyU2VsZWN0b3I6IFwiI3skc2VsZWN0b3J9OmRpcihydGwpXCI7XG4gICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICAkZGlyU2VsZWN0b3JzOiBhcHBlbmQoJGRpclNlbGVjdG9ycywgJGRpclNlbGVjdG9yLCBjb21tYSk7XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgRmlyZWZveC5cbiAgQGlmIGxlbmd0aCgkZGlyU2VsZWN0b3JzKSA+IDAge1xuICAgIEBhdC1yb290ICN7JGRpclNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG4gIC8vfVxufVxuXG5AbWl4aW4gbHRyKCkge1xuICBAY29udGVudDtcbn1cblxuXG4vLyBTVkcgQmFja2dyb3VuZCBJbWFnZSBNaXhpblxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdmdcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBzdmctYmFja2dyb3VuZC1pbWFnZSgkc3ZnLCAkZmxpcC1ydGw6IGZhbHNlKSB7XG4gICR1cmw6IHVybC1lbmNvZGUoJHN2Zyk7XG4gICR2aWV3Qm94OiBzdHItc3BsaXQoc3RyLWV4dHJhY3QoJHN2ZywgXCJ2aWV3Qm94PSdcIiwgXCInXCIpLCBcIiBcIik7XG5cbiAgQGlmICRmbGlwLXJ0bCAhPSB0cnVlIG9yICR2aWV3Qm94ID09IG51bGwge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JHVybH1cIik7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICAkdHJhbnNmb3JtOiBcInRyYW5zZm9ybT0ndHJhbnNsYXRlKCN7bnRoKCR2aWV3Qm94LCAzKX0sIDApIHNjYWxlKC0xLCAxKSdcIjtcbiAgICAkZmxpcHBlZC11cmw6ICRzdmc7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPHBhdGhcIiwgXCI8cGF0aCAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxsaW5lXCIsIFwiPGxpbmUgI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8cG9seWdvblwiLCBcIjxwb2x5Z29uICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiB1cmwtZW5jb2RlKCRmbGlwcGVkLXVybCk7XG5cbiAgICBAaW5jbHVkZSBsdHIgKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skdXJsfVwiKTtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skZmxpcHBlZC11cmx9XCIpO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgcHJvcGVydHkgaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwcm9wZXJ0eS1ob3Jpem9udGFsKCRwcm9wLCAkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaWYgJHN0YXJ0ID09IDAgYW5kICRlbmQgPT0gMCB7XG4gICAgI3skcHJvcH0tbGVmdDogJHN0YXJ0O1xuICAgICN7JHByb3B9LXJpZ2h0OiAkZW5kO1xuXG4gIH0gQGVsc2Uge1xuICAgIC13ZWJraXQtI3skcHJvcH0tc3RhcnQ6ICRzdGFydDtcbiAgICAjeyRwcm9wfS1pbmxpbmUtc3RhcnQ6ICRzdGFydDtcbiAgICAtd2Via2l0LSN7JHByb3B9LWVuZDogJGVuZDtcbiAgICAjeyRwcm9wfS1pbmxpbmUtZW5kOiAkZW5kO1xuICB9XG59XG5cbi8vIEFkZCBwcm9wZXJ0eSBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkcHJvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtib29sZWFufSAkY29udGVudCBpbmNsdWRlIGNvbnRlbnQgb3IgdXNlIGRlZmF1bHRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwcm9wZXJ0eSgkcHJvcCwgJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoJHByb3AsICRzdGFydCwgJGVuZCk7XG4gICN7JHByb3B9LXRvcDogJHRvcDtcbiAgI3skcHJvcH0tYm90dG9tOiAkYm90dG9tO1xufVxuXG4vLyBBZGQgcGFkZGluZyBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKHBhZGRpbmcsICRzdGFydCwgJGVuZCk7XG59XG5cbi8vIEFkZCBwYWRkaW5nIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBhZGRpbmcoJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KHBhZGRpbmcsICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBtYXJnaW4gaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBtYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKG1hcmdpbiwgJHN0YXJ0LCAkZW5kKTtcbn1cblxuLy8gQWRkIG1hcmdpbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBtYXJnaW4oJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KG1hcmdpbiwgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIHBvc2l0aW9uIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnQgLSBhbW91bnQgdG8gcG9zaXRpb24gc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kIC0gYW1vdW50IHRvIGxlZnQ6IDA7IGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBvc2l0aW9uLWhvcml6b250YWwoJHN0YXJ0OiBudWxsLCAkZW5kOiBudWxsKSB7XG4gIEBpZiAkc3RhcnQgPT0gJGVuZCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgbGVmdDogJHN0YXJ0O1xuICAgICAgcmlnaHQ6ICRlbmQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAYXQtcm9vdCB7XG4gICAgICBAc3VwcG9ydHMgKGluc2V0LWlubGluZS1zdGFydDogMCkge1xuICAgICAgICAmIHtcbiAgICAgICAgICBpbnNldC1pbmxpbmUtc3RhcnQ6ICRzdGFydDtcbiAgICAgICAgICBpbnNldC1pbmxpbmUtZW5kOiAkZW5kO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVE9ETyBGVy0zNzY2XG4gICAgQGF0LXJvb3Qge1xuICAgICAgQHN1cHBvcnRzIG5vdCAoaW5zZXQtaW5saW5lLXN0YXJ0OiAwKSB7XG4gICAgICAgICYge1xuICAgICAgICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgICAgICAgIGxlZnQ6ICRzdGFydDtcbiAgICAgICAgICAgIHJpZ2h0OiAkZW5kO1xuICAgICAgICAgIH1cbiAgICAgICAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICAgICAgICBsZWZ0OiB1bnNldDtcbiAgICAgICAgICAgIHJpZ2h0OiB1bnNldDtcblxuICAgICAgICAgICAgbGVmdDogJGVuZDtcbiAgICAgICAgICAgIHJpZ2h0OiAkc3RhcnQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBwb3NpdGlvbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwb3NpdGlvbigkdG9wOiBudWxsLCAkZW5kOiBudWxsLCAkYm90dG9tOiBudWxsLCAkc3RhcnQ6IG51bGwpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQpO1xuICB0b3A6ICR0b3A7XG4gIGJvdHRvbTogJGJvdHRvbTtcbn1cblxuLy8gQWRkIGJvcmRlciBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBib3JkZXIoJHRvcCwgJGVuZDogJHRvcCwgJGJvdHRvbTogJHRvcCwgJHN0YXJ0OiAkZW5kKSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5KGJvcmRlciwgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIGJvcmRlciByYWRpdXMgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcC1zdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3AtZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbS1lbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tLXN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gYm9yZGVyLXJhZGl1cygkdG9wLXN0YXJ0LCAkdG9wLWVuZDogJHRvcC1zdGFydCwgJGJvdHRvbS1lbmQ6ICR0b3Atc3RhcnQsICRib3R0b20tc3RhcnQ6ICR0b3AtZW5kKSB7XG4gIEBpZiAkdG9wLXN0YXJ0ID09ICR0b3AtZW5kIGFuZCAkdG9wLXN0YXJ0ID09ICRib3R0b20tZW5kIGFuZCAkdG9wLXN0YXJ0ID09ICRib3R0b20tc3RhcnQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJvcmRlci1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICR0b3AtZW5kO1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6ICRib3R0b20tZW5kO1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJGJvdHRvbS1zdGFydDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBib3JkZXItdG9wLWxlZnQtcmFkaXVzOiAkdG9wLWVuZDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1yaWdodC1yYWRpdXM6ICRib3R0b20tc3RhcnQ7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAkYm90dG9tLWVuZDtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIGRpcmVjdGlvbiBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZGlyIC0gRGlyZWN0aW9uIG9uIExUUlxuQG1peGluIGRpcmVjdGlvbigkZGlyKSB7XG4gICRvdGhlci1kaXI6IG51bGw7XG5cbiAgQGlmICRkaXIgPT0gbHRyIHtcbiAgICAkb3RoZXItZGlyOiBydGw7XG4gIH0gQGVsc2Uge1xuICAgICRvdGhlci1kaXI6IGx0cjtcbiAgfVxuXG4gIEBpbmNsdWRlIGx0cigpIHtcbiAgICBkaXJlY3Rpb246ICRkaXI7XG4gIH1cbiAgQGluY2x1ZGUgcnRsKCkge1xuICAgIGRpcmVjdGlvbjogJG90aGVyLWRpcjtcbiAgfVxufVxuXG4vLyBBZGQgZmxvYXQgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHNpZGVcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZGVjb3JhdG9yIC0gIWltcG9ydGFudFxuQG1peGluIGZsb2F0KCRzaWRlLCAkZGVjb3JhdG9yOiBudWxsKSB7XG4gIEBpZiAkc2lkZSA9PSBzdGFydCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgZmxvYXQ6IGxlZnQgJGRlY29yYXRvcjtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgZmxvYXQ6IHJpZ2h0ICRkZWNvcmF0b3I7XG4gICAgfVxuICB9IEBlbHNlIGlmICRzaWRlID09IGVuZCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgZmxvYXQ6IHJpZ2h0ICRkZWNvcmF0b3I7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGZsb2F0OiBsZWZ0ICRkZWNvcmF0b3I7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBmbG9hdDogJHNpZGUgJGRlY29yYXRvcjtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIGJhY2tncm91bmQtcG9zaXRpb24oJGhvcml6b250YWwsICRob3Jpem9udGFsLWFtb3VudDogbnVsbCwgJHZlcnRpY2FsOiBudWxsLCAkdmVydGljYWwtYW1vdW50OiBudWxsKSB7XG4gIEBpZiAkaG9yaXpvbnRhbCA9PSBzdGFydCBvciAkaG9yaXpvbnRhbCA9PSBlbmQge1xuICAgICRob3Jpem9udGFsLWx0cjogbnVsbDtcbiAgICAkaG9yaXpvbnRhbC1ydGw6IG51bGw7XG4gICAgQGlmICRob3Jpem9udGFsID09IHN0YXJ0IHtcbiAgICAgICRob3Jpem9udGFsLWx0cjogbGVmdDtcbiAgICAgICRob3Jpem9udGFsLXJ0bDogcmlnaHQ7XG4gICAgfSBAZWxzZSB7XG4gICAgICAkaG9yaXpvbnRhbC1sdHI6IHJpZ2h0O1xuICAgICAgJGhvcml6b250YWwtcnRsOiBsZWZ0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsLWx0ciAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsLXJ0bCAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbCAkaG9yaXpvbnRhbC1hbW91bnQgJHZlcnRpY2FsICR2ZXJ0aWNhbC1hbW91bnQ7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiB0cmFuc2Zvcm0tb3JpZ2luKCR4LWF4aXMsICR5LWF4aXM6IG51bGwpIHtcbiAgQGlmICR4LWF4aXMgPT0gc3RhcnQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHgtYXhpcyA9PSBlbmQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0ICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGxlZnQgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHgtYXhpcyA9PSBsZWZ0IG9yICR4LWF4aXMgPT0gcmlnaHQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR4LWF4aXMgJHktYXhpcztcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46ICR4LWF4aXMgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogY2FsYygxMDAlIC0gI3skeC1heGlzfSkgJHktYXhpcztcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHRyYW5zZm9ybSBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdHJhbnNmb3JtcyAtIGNvbW1hIHNlcGFyYXRlZCBsaXN0IG9mIHRyYW5zZm9ybXNcbkBtaXhpbiB0cmFuc2Zvcm0oJHRyYW5zZm9ybXMuLi4pIHtcbiAgJGV4dHJhOiBudWxsO1xuXG4gICR4OiBudWxsO1xuICAkbHRyLXRyYW5zbGF0ZTogbnVsbDtcbiAgJHJ0bC10cmFuc2xhdGU6IG51bGw7XG5cbiAgQGVhY2ggJHRyYW5zZm9ybSBpbiAkdHJhbnNmb3JtcyB7XG4gICAgQGlmIChzdHItaW5kZXgoJHRyYW5zZm9ybSwgdHJhbnNsYXRlM2QpKSB7XG4gICAgICAkdHJhbnNmb3JtOiBzdHItcmVwbGFjZSgkdHJhbnNmb3JtLCAndHJhbnNsYXRlM2QoJyk7XG4gICAgICAkdHJhbnNmb3JtOiBzdHItcmVwbGFjZSgkdHJhbnNmb3JtLCAnKScpO1xuXG4gICAgICAkY29vcmRpbmF0ZXM6IHN0ci1zcGxpdCgkdHJhbnNmb3JtLCAnLCcpO1xuXG4gICAgICAkeDogbnRoKCRjb29yZGluYXRlcywgMSk7XG4gICAgICAkeTogbnRoKCRjb29yZGluYXRlcywgMik7XG4gICAgICAkejogbnRoKCRjb29yZGluYXRlcywgMyk7XG5cbiAgICAgICRsdHItdHJhbnNsYXRlOiB0cmFuc2xhdGUzZCgkeCwgJHksICR6KTtcbiAgICAgICRydGwtdHJhbnNsYXRlOiB0cmFuc2xhdGUzZChjYWxjKC0xICogI3skeH0pLCAkeSwgJHopO1xuICAgIH0gQGVsc2Uge1xuICAgICAgQGlmICRleHRyYSA9PSBudWxsIHtcbiAgICAgICAgJGV4dHJhOiAkdHJhbnNmb3JtO1xuICAgICAgfSBAZWxzZSB7XG4gICAgICAgICRleHRyYTogJGV4dHJhICR0cmFuc2Zvcm07XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgQGlmICR4ID09ICcwJyBvciAkeCA9PSBudWxsIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRsdHItdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIHRyYW5zZm9ybTogJGx0ci10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybTogJHJ0bC10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cbiAgfVxufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBtaXhpbnMgZm9yIFNDU1MgZnJvbSBkaWZmZXJlbnQgY29tcG9uZW50c1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogRXh0cmFjdGVkIGZyb21cbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy9jb21wb25lbnRzL2dyaWQvZ3JpZC5taXhpbnMuc2Nzc1xuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL2NvbXBvbmVudHMvaXRlbS9pdGVtLm1peGlucy5zY3NzXG4gKi9cblxuLy8gUmVzcG9uc2l2ZSBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cblxuLy8gQ3JlYXRlcyBhIGZpeGVkIHdpZHRoIGZvciB0aGUgZ3JpZCBiYXNlZCBvbiB0aGUgc2NyZWVuIHNpemVcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbWFrZS1ncmlkLXdpZHRocygkd2lkdGhzOiAkZ3JpZC13aWR0aHMsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICBAZWFjaCAkYnJlYWtwb2ludCwgJHdpZHRoIGluICR3aWR0aHMge1xuICAgIEBpbmNsdWRlIG1lZGlhLWJyZWFrcG9pbnQtdXAoJGJyZWFrcG9pbnQsICRicmVha3BvaW50cykge1xuICAgICAgd2lkdGg6ICR3aWR0aDtcbiAgICB9XG4gIH1cblxuICBtYXgtd2lkdGg6IDEwMCU7XG59XG5cblxuLy8gQWRkcyBwYWRkaW5nIHRvIHRoZSBlbGVtZW50IGJhc2VkIG9uIGJyZWFrcG9pbnRzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG1ha2UtYnJlYWtwb2ludC1wYWRkaW5nKCRwYWRkaW5ncykge1xuICBAZWFjaCAkYnJlYWtwb2ludCBpbiBtYXAta2V5cygkcGFkZGluZ3MpIHtcbiAgICBAaW5jbHVkZSBtZWRpYS1icmVha3BvaW50LXVwKCRicmVha3BvaW50KSB7XG4gICAgICAkcGFkZGluZzogbWFwLWdldCgkcGFkZGluZ3MsICRicmVha3BvaW50KTtcblxuICAgICAgQGluY2x1ZGUgcGFkZGluZygkcGFkZGluZyk7XG4gICAgfVxuICB9XG59XG5cblxuLy8gSXRlbSBNaXhpbnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBpdGVtLXB1c2gtc3ZnLXVybCgkZmlsbCkge1xuICAkaXRlbS1kZXRhaWwtcHVzaC1zdmc6IFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMiAyMCc+PHBhdGggZD0nTTIsMjBsLTItMmw4LThMMCwybDItMmwxMCwxMEwyLDIweicgZmlsbD0nI3skZmlsbH0nLz48L3N2Zz5cIjtcblxuICBAaW5jbHVkZSBzdmctYmFja2dyb3VuZC1pbWFnZSgkaXRlbS1kZXRhaWwtcHVzaC1zdmcsIHRydWUpO1xufVxuIiwiQHVzZSBcInNhc3M6bWF0aFwiIGFzIG1hdGg7XG5cbi8qKlxuICogQXBwIGN1c3RvbSBtaXhpbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgb3VyIGN1c3RvbSBtaXhpbnMuXG4gKi9cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIGJsYWNrIHRvIGNyZWF0ZSBpdHMgc2hhZGUuXG4vLyBEZWZhdWx0IHRvIGJvb3RzdHJhcCBsZXZlbCA2LlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3Itc2hhZGUtcGVyY2VudCgkY29sb3IsICRwZXJjZW50OiA0OCUpIHtcbiAgICBAcmV0dXJuIG1peCgjMDAwLCAkY29sb3IsICRwZXJjZW50KTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIHdoaXRlIHRvIGNyZWF0ZSBpdHMgdGludC5cbi8vIERlZmF1bHQgdG8gYm9vdHN0cmFwIGxldmVsIC0xMC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXRpbnQtcGVyY2VudCgkY29sb3IsICRwZXJjZW50OiA4MCUpIHtcbiAgICBAcmV0dXJuIG1peCgjZmZmLCAkY29sb3IsICRwZXJjZW50KTtcbn1cblxuLy8gSW9uaWMgQ29sb3JzXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gR2VuZXJhdGVzIHRoZSBjb2xvciBjbGFzc2VzIGFuZCB2YXJpYWJsZXMgYmFzZWQgb24gdGhlXG4vLyBjb2xvcnMgbWFwXG5cbkBtaXhpbiBnZW5lcmF0ZS1jb2xvcigkY29sb3ItbmFtZSwgJGNvbG9ycywgJHRoZW1lKSB7XG4gICAgJGNvbG9yLXRoZW1lczogbWFwLWdldCgkY29sb3JzLCAkY29sb3ItbmFtZSk7XG4gICAgJGJhc2U6IG1hcC1nZXQoJGNvbG9yLXRoZW1lcywgJHRoZW1lKTtcblxuICAgIEBpZiAkdGhlbWUgPT0gJ2RhcmsnIHtcbiAgICAgICAgJGJhc2U6IG1peChtYXAtZ2V0KCRjb2xvci10aGVtZXMsICdsaWdodCcpLCB3aGl0ZSwgODAlKSAhZGVmYXVsdDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBnZW5lcmF0ZS1jb2xvci12YXJpYW50cygkY29sb3ItbmFtZSwgJGJhc2UpO1xufVxuXG5AbWl4aW4gZ2VuZXJhdGUtY29sb3ItdmFyaWFudHMoJGNvbG9yLW5hbWUsICRiYXNlKSB7XG4gICAgJGNvbnRyYXN0OiBnZXRfY29udHJhc3RfY29sb3IoJGJhc2UpO1xuICAgICRzaGFkZTogZ2V0LWNvbG9yLXNoYWRlLXBlcmNlbnQoJGJhc2UpO1xuICAgICR0aW50OiBnZXQtY29sb3ItdGludC1wZXJjZW50KCRiYXNlKTtcblxuICAgIC0tI3skY29sb3ItbmFtZX06ICN7JGJhc2V9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tc2hhZGU6ICN7JHNoYWRlfTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LXRpbnQ6ICN7JHRpbnR9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tY29udHJhc3Q6ICN7JGNvbnRyYXN0fTtcblxuICAgIC8vIEludGVybmFsIGlvbmljIHVzZSBvbmx5LlxuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9OiB2YXIoLS0jeyRjb2xvci1uYW1lfSk7XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tYmFzZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1yZ2I6ICN7Y29sb3ItdG8tcmdiLWxpc3QoJGJhc2UpfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdDogI3skY29udHJhc3R9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0LXJnYjogI3tjb2xvci10by1yZ2ItbGlzdCgkY29udHJhc3QpfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1zaGFkZTogI3skc2hhZGV9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXRpbnQ6ICN7JHRpbnR9O1xuXG4gICAgLmlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSB7XG4gICAgICAgIC0taW9uLWNvbG9yOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0pO1xuICAgICAgICAtLWlvbi1jb2xvci1iYXNlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tYmFzZSk7XG4gICAgICAgIC0taW9uLWNvbG9yLXJnYjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXJnYik7XG4gICAgICAgIC0taW9uLWNvbG9yLWNvbnRyYXN0OiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QpO1xuICAgICAgICAtLWlvbi1jb2xvci1jb250cmFzdC1yZ2I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdC1yZ2IpO1xuICAgICAgICAtLWlvbi1jb2xvci1zaGFkZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXNoYWRlKTtcbiAgICAgICAgLS1pb24tY29sb3ItdGludDogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXRpbnQpO1xuICAgIH1cbn1cblxuQG1peGluIGNvcmUtZm9jdXMoKSB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgJjo6YWZ0ZXIge1xuICAgICAgICBAaW5jbHVkZSBwb3NpdGlvbigwLCAwLCAwLCAwKTtcbiAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICBjb250ZW50OiBcIlwiO1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICBAaW5jbHVkZSBjb3JlLWZvY3VzLXN0eWxlKCk7XG4gICAgfVxufVxuXG5AbWl4aW4gY29yZS1mb2N1cy1zdHlsZSgpIHtcbiAgICBib3gtc2hhZG93OiBpbnNldCAwIDAgdmFyKC0tYTExeS1mb2N1cy13aWR0aCkgMXB4IHZhcigtLWExMXktZm9jdXMtY29sb3IpO1xuICAgIGJvcmRlci1yYWRpdXM6IHZhcigtLWJvcmRlci1yYWRpdXMpO1xuICAgIC8vIFRoaWNrZXIgb3B0aW9uOlxuICAgIC8vIGJvcmRlcjogdmFyKC0tYTExeS1mb2N1cy13aWR0aCkgc29saWQgdmFyKC0tYTExeS1mb2N1cy1jb2xvcik7XG59XG5cbkBtaXhpbiBjb3JlLXRyYW5zaXRpb24oJHByb3BlcnRpZXM6IGFsbCwgJGR1cmF0aW9uOiA1MDBtcywgJHRpbWluZy1mdW5jdGlvbjogZWFzZS1pbi1vdXQpIHtcbiAgICAkdHJhbnNpdGlvbnM6ICgpO1xuICAgIEBlYWNoICRwcm9wZXJ0eSBpbiAkcHJvcGVydGllcyB7XG4gICAgICAkdHJhbnNpdGlvbnM6IGFwcGVuZCgkdHJhbnNpdGlvbnMsICRwcm9wZXJ0eSAkZHVyYXRpb24gJHRpbWluZy1mdW5jdGlvbiwgY29tbWEpO1xuICAgIH1cblxuICAgIC13ZWJraXQtdHJhbnNpdGlvbjogJHRyYW5zaXRpb25zO1xuICAgIHRyYW5zaXRpb246ICR0cmFuc2l0aW9ucztcbn1cblxuQG1peGluIHNyLW9ubHkoKSB7XG4gICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgIHdpZHRoOiAxcHg7XG4gICAgaGVpZ2h0OiAxcHg7XG4gICAgcGFkZGluZzogMDtcbiAgICBtYXJnaW46IC0xcHg7XG4gICAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgICBjbGlwOiByZWN0KDAsIDAsIDAsIDApO1xuICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XG4gICAgYm9yZGVyOiAwO1xufVxuXG4vKipcbiAqIFNhbWUgYXMgaXRlbS1wdXNoLXN2Zy11cmwgYnV0IGFkbWl0cyBmbGlwLXJ0bFxuICovXG5AbWl4aW4gcHVzaC1hcnJvdy1jb2xvcigkZmlsbDogNjI2MjYyLCAkZmxpcC1ydGw6IGZhbHNlKSB7XG4gICAgJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnOiBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMjAnPjxwYXRoIGQ9J00yLDIwbC0yLTJsOC04TDAsMmwyLTJsMTAsMTBMMiwyMHonIGZpbGw9JyN7JGZpbGx9Jy8+PC9zdmc+XCI7XG5cbiAgICBAaW5jbHVkZSBzdmctYmFja2dyb3VuZC1pbWFnZSgkaXRlbS1kZXRhaWwtcHVzaC1zdmcsICRmbGlwLXJ0bCk7XG59XG5cbkBtaXhpbiBib3JkZXItc3RhcnQoJHB4LCAkdHlwZTogbnVsbCwgJGNvbG9yOiBudWxsKSB7XG4gICAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChib3JkZXIsICRweCAkdHlwZSAkY29sb3IsIG51bGwpO1xufVxuXG5AbWl4aW4gYm9yZGVyLWVuZCgkcHgsICR0eXBlOiBudWxsLCAkY29sb3I6IG51bGwpIHtcbiAgICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKGJvcmRlciwgbnVsbCwgJHB4ICR0eXBlICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtYm9yZGVyLXN0YXJ0KCRweCwgJHR5cGUsICRjb2xvcikge1xuICAgICRzYWZlLWFyZWEtcG9zaXRpb246IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHB4fSk7XG5cbiAgICBAaW5jbHVkZSBib3JkZXItc3RhcnQoJHNhZmUtYXJlYS1wb3NpdGlvbiwgJHR5cGUsICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtYm9yZGVyLWVuZCgkcHgsICR0eXBlLCAkY29sb3IpIHtcbiAgICAkc2FmZS1hcmVhLXBvc2l0aW9uOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skcHh9KTtcblxuICAgIEBpbmNsdWRlIGJvcmRlci1lbmQoJHNhZmUtYXJlYS1wb3NpdGlvbiwgJHR5cGUsICRjb2xvcik7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogbnVsbDtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBudWxsO1xuXG4gICAgQGlmICgkZW5kKSB7XG4gICAgICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG4gICAgfVxuICAgIEBpZiAoJHN0YXJ0KSB7XG4gICAgICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1zdGFydCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJGVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLWVuZCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IG51bGw7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogbnVsbDtcblxuICAgIEBpZiAoJGVuZCkge1xuICAgICAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuICAgIH1cbiAgICBAaWYgKCRzdGFydCkge1xuICAgICAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1zdGFydCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRlbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctZW5kKCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcG9zaXRpb24oJHRvcDogbnVsbCwgJGVuZDogbnVsbCwgJGJvdHRvbTogbnVsbCwgJHN0YXJ0OiBudWxsKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgcG9zaXRpb24oJHRvcCwgJHNhZmUtYXJlYS1lbmQsICRib3R0b20sICRzYWZlLWFyZWEtc3RhcnQpO1xufVxuXG5AbWl4aW4gY29yZS1oZWFkaW5ncygpIHtcbiAgICBoMSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjZweDtcbiAgICB9XG4gICAgaDIsIC5pdGVtLWhlYWRpbmcge1xuICAgICAgICBmb250LXNpemU6IDI0cHg7XG4gICAgfVxuICAgIGgzIHtcbiAgICAgICAgZm9udC1zaXplOiAyMnB4O1xuICAgIH1cbiAgICBoNCB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjBweDtcbiAgICB9XG4gICAgaDUge1xuICAgICAgICBmb250LXNpemU6IDE4cHg7XG4gICAgfVxuICAgIGg2IHtcbiAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgIH1cbn1cblxuQG1peGluIGRhcmttb2RlKCkge1xuICAgICRyb290OiAjeyZ9O1xuXG4gICAgQGF0LXJvb3QgI3thZGQtcm9vdC1zZWxlY3Rvcigkcm9vdCwgXCJodG1sLmRhcmtcIil9IHtcbiAgICAgICAgQGNvbnRlbnQ7XG4gICAgfVxufVxuXG5AbWl4aW4gaG9yaXpvbnRhbF9zY3JvbGxfaXRlbSgkd2lkdGgsICRtaW4td2lkdGgsICRtYXgtd2lkdGgpIHtcbiAgICBmbGV4OiAwIDAgJHdpZHRoO1xuICAgIG1pbi13aWR0aDogJG1pbi13aWR0aDtcbiAgICBtYXgtd2lkdGg6ICRtYXgtd2lkdGg7XG4gICAgYWxpZ24tc2VsZjogc3RyZXRjaDtcbiAgICBkaXNwbGF5OiBibG9jaztcblxuICAgIGlvbi1jYXJkIHtcbiAgICAgICAgLS12ZXJ0aWNhbC1tYXJnaW46IDEwcHg7XG4gICAgICAgIC0taG9yaXpvbnRhbC1tYXJnaW46IDEwcHg7XG5cbiAgICAgICAgd2lkdGg6IGNhbGMoMTAwJSAtIHZhcigtLWhvcml6b250YWwtbWFyZ2luKSAtIHZhcigtLWhvcml6b250YWwtbWFyZ2luKSk7XG4gICAgICAgIGhlaWdodDogY2FsYygxMDAlIC0gdmFyKC0tdmVydGljYWwtbWFyZ2luKSAtIHZhcigtLXZlcnRpY2FsLW1hcmdpbikpO1xuICAgICAgICBtYXJnaW46IHZhcigtLXZlcnRpY2FsLW1hcmdpbikgdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pO1xuXG4gICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiAzNjBweCkge1xuICAgICAgICAgICAgLS1ob3Jpem9udGFsLW1hcmdpbjogNnB4O1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vLyBDb2xvciBtaXhpbnMuXG5AZnVuY3Rpb24gZ2V0X2JyaWdodG5lc3MoJGNvbG9yKSB7XG4gICAgQHJldHVybiBtYXRoLmRpdihyZWQoJGNvbG9yKSArIGdyZWVuKCRjb2xvcikgKyBibHVlKCRjb2xvciksIDMpO1xufVxuXG4vLyBHZXQgdGhlIGJldHRlciBjb2xvciBjb250cmFzdCB1c2luZyBXQ0FHIGFsZ29yeXRobS5cbkBmdW5jdGlvbiBnZXRfY29udHJhc3RfY29sb3IoJGNvbG9yKSB7XG4gICAgJGx1bWlhbmNlOiBsdW1pbmFuY2UoJGNvbG9yKTtcblxuICAgIC8vIFdoaXRlIGx1bWlhbmNlIGlzIDEuXG4gICAgJHdoaXRlQ29udHJhc3Q6IG1hdGguZGl2KCRsdW1pYW5jZSArIDAuMDUsIDEgKyAwLjA1KTtcbiAgICAvLyBXaGl0ZSBsdW1pYW5jZSBpcyAwLlxuICAgICRibGFja0NvbnRyYXN0OiBtYXRoLmRpdigwLjA1LCAkbHVtaWFuY2UgKyAwLjA1KTtcblxuICAgIEByZXR1cm4gaWYoJHdoaXRlQ29udHJhc3QgPCAkYmxhY2tDb250cmFzdCwgd2hpdGUsIGJsYWNrKTtcbn1cblxuLy8gQ29sb3IgY29udHJhc3QgdXNpbmcgeWlxIGFwcm94aW1hdGlvbiB3aXRoIDE1MCB0aHJlc2hvbGQuXG5AZnVuY3Rpb24gZ2V0X2NvbnRyYXN0X2NvbG9yX3lpcSgkY29sb3IsICRkYXJrOiBibGFjaywgJGxpZ2h0OiB3aGl0ZSkge1xuICAgICRyOiByZWQoJGNvbG9yKTtcbiAgICAkZzogZ3JlZW4oJGNvbG9yKTtcbiAgICAkYjogYmx1ZSgkY29sb3IpO1xuXG4gICAgJHlpcTogbWF0aC5kaXYoKCRyICogMjk5KSArICgkZyAqIDU4NykgKyAoJGIgKiAxMTQpLCAxMDAwKTtcblxuICAgIEByZXR1cm4gaWYoJHlpcSA+PSAxMjgsICRkYXJrLCAkbGlnaHQpO1xufVxuXG4vLyBXQ0FHIGNvbnRyYXN0IGFsZ29yaXRobVxuQGZ1bmN0aW9uIGNoZWNrLWNvbnRyYXN0KCRmb3JlZ3JvdW5kLCAkYmFja2dyb3VuZCkge1xuICAgICRmb3JlZ3JvdW5kTHVtaWFuY2U6IGx1bWluYW5jZSgkZm9yZWdyb3VuZCk7XG4gICAgJGJhY2tncm91bmRMdW1pbmFuY2U6IGx1bWluYW5jZSgkYmFja2dyb3VuZCk7XG5cbiAgICBAaWYgKCRiYWNrZ3JvdW5kTHVtaW5hbmNlIDwgJGZvcmVncm91bmRMdW1pYW5jZSkge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCRiYWNrZ3JvdW5kTHVtaW5hbmNlICsgMC4wNSwgJGZvcmVncm91bmRMdW1pYW5jZSArIDAuMDUpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCRmb3JlZ3JvdW5kTHVtaWFuY2UgKyAwLjA1LCAkYmFja2dyb3VuZEx1bWluYW5jZSArIDAuMDUpO1xuICAgIH1cbn1cblxuQGZ1bmN0aW9uIGx1bWluYW5jZSgkY29sb3IpIHtcbiAgICAkcjogcmVkKCRjb2xvcik7XG4gICAgJGc6IGdyZWVuKCRjb2xvcik7XG4gICAgJGI6IGJsdWUoJGNvbG9yKTtcblxuICAgICRyOiBjb21wb25lbnQtbHVtaW5hbmNlKCRyKTtcbiAgICAkZzogY29tcG9uZW50LWx1bWluYW5jZSgkZyk7XG4gICAgJGI6IGNvbXBvbmVudC1sdW1pbmFuY2UoJGIpO1xuXG4gICAgQHJldHVybiAkciAqIDAuMjEyNiArICRnICogMC43MTUyICsgJGIgKiAwLjA3MjI7XG59XG5cbkBmdW5jdGlvbiBjb21wb25lbnQtbHVtaW5hbmNlKCR2YWx1ZSkge1xuICAgICR2YWx1ZTogbWF0aC5kaXYoJHZhbHVlLCAyNTUpO1xuXG4gICAgQGlmICgkdmFsdWUgPD0gMC4wMzkyOCkge1xuICAgICAgICBAcmV0dXJuIG1hdGguZGl2KCR2YWx1ZSwgMTIuOTIpO1xuICAgIH0gQGVsc2Uge1xuICAgICAgICBAcmV0dXJuIG1hdGgucG93KG1hdGguZGl2KCR2YWx1ZSArIDAuMDU1LCAxLjA1NSksIDIuNCk7XG4gICAgfVxufVxuIiwiLypcbiAqIEFwcCBDdXN0b20gQXBwIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIGFsbCBjdXN0b20gYXBwIHZhcmlhYmxlcy5cbiAqL1xuIiwiLypcbiAqIEFwcCBHbG9iYWwgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgYWxsIGdsb2JhbCB2YXJpYWJsZXMuXG4gKi9cblxuJHdoaXRlOiAgICAgICAjZmZmZmZmICFkZWZhdWx0O1xuJGdyYXktMTAwOiAgICAjZjhmOWZhICFkZWZhdWx0O1xuJGdyYXktMjAwOiAgICAjZTllY2VmICFkZWZhdWx0O1xuJGdyYXktMzAwOiAgICAjZGVlMmU2ICFkZWZhdWx0OyAvLyBTdHJva2VcbiRncmF5LTQwMDogICAgI2NlZDRkYSAhZGVmYXVsdDtcbiRncmF5LTUwMDogICAgIzhmOTU5ZSAhZGVmYXVsdDsgLy8gU3Ryb2tlIG9uIGlucHV0c1xuJGdyYXktNjAwOiAgICAjNmE3MzdiICFkZWZhdWx0O1xuJGdyYXktNzAwOiAgICAjNDk1MDU3ICFkZWZhdWx0O1xuJGdyYXktODAwOiAgICAjMzQzYTQwICFkZWZhdWx0O1xuJGdyYXktOTAwOiAgICAjMjgyODI4ICFkZWZhdWx0OyAvLyBDb3B5IHRleHRcbiRibGFjazogICAgICAgIzAwMDAwMCAhZGVmYXVsdDsgLy8gQXZvaWQgdXNhZ2VcblxuJGJsdWU6ICAgICAgICAjMGY2Y2JmICFkZWZhdWx0O1xuJGN5YW46ICAgICAgICAjMDA4MTk2ICFkZWZhdWx0OyAvLyBOb3QgdXNlZC5cbiRncmVlbjogICAgICAgIzM1N2EzMiAhZGVmYXVsdDtcbiRyZWQ6ICAgICAgICAgI2NhMzEyMCAhZGVmYXVsdDtcbiR5ZWxsb3c6ICAgICAgI2YwYWQ0ZSAhZGVmYXVsdDtcblxuJGJyYW5kLWNvbG9yOiAjZjk4MDEyICFkZWZhdWx0O1xuXG4kdGV4dC1jb2xvcjogICAgICAgICAgICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1yZ2I6ICAgICAgICAgICBjb2xvci10by1yZ2ItbGlzdCgkdGV4dC1jb2xvcikgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1kYXJrOiAgICAgICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kdGV4dC1jb2xvci1kYXJrLXJnYjogICAgICBjb2xvci10by1yZ2ItbGlzdCgkdGV4dC1jb2xvci1kYXJrKSAhZGVmYXVsdDtcblxuJGJhY2tncm91bmQtY29sb3I6ICAgICAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiRiYWNrZ3JvdW5kLWNvbG9yLXJnYjogICAgICBjb2xvci10by1yZ2ItbGlzdCgkYmFja2dyb3VuZC1jb2xvcikgIWRlZmF1bHQ7XG4kYmFja2dyb3VuZC1jb2xvci1kYXJrOiAgICAgJGdyYXktOTAwICFkZWZhdWx0OyAvLyAjMWExYTFhXG4kYmFja2dyb3VuZC1jb2xvci1kYXJrLXJnYjogY29sb3ItdG8tcmdiLWxpc3QoJGJhY2tncm91bmQtY29sb3ItZGFyaykgIWRlZmF1bHQ7XG5cbiRpb24taXRlbS1iYWNrZ3JvdW5kOiAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLXJnYjogIGNvbG9yLXRvLXJnYi1saXN0KCRpb24taXRlbS1iYWNrZ3JvdW5kKSAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcms6ICRncmF5LTkwMCAhZGVmYXVsdDtcbiRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcmstcmdiOiBjb2xvci10by1yZ2ItbGlzdCgkaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrKSAhZGVmYXVsdDtcblxuJHByaW1hcnk6ICAgICRicmFuZC1jb2xvciAhZGVmYXVsdDtcbiRzZWNvbmRhcnk6ICAkZ3JheS0zMDAgIWRlZmF1bHQ7XG4kZGFuZ2VyOiAgICAgJHJlZCAhZGVmYXVsdDtcbiR3YXJuaW5nOiAgICAkeWVsbG93ICFkZWZhdWx0O1xuJHN1Y2Nlc3M6ICAgICRncmVlbiAhZGVmYXVsdDtcbiRpbmZvOiAgICAgICAkYmx1ZSAhZGVmYXVsdDtcbiRsaWdodDogICAgICAkZ3JheS0xMDAgIWRlZmF1bHQ7XG4kbWVkaXVtOiAgICAgJGdyYXktNzAwICFkZWZhdWx0O1xuJGRhcms6ICAgICAgICRncmF5LTkwMCAhZGVmYXVsdDtcblxuJGNvbG9yczogIChcbiAgICBwcmltYXJ5OiAobGlnaHQ6ICRwcmltYXJ5LCBkYXJrOiAkcHJpbWFyeSksXG4gICAgc2Vjb25kYXJ5OiAobGlnaHQ6ICRzZWNvbmRhcnksIGRhcms6ICRncmF5LTcwMCksXG4gICAgc3VjY2VzczogKGxpZ2h0OiAkc3VjY2VzcyksXG4gICAgd2FybmluZzogKGxpZ2h0OiAkd2FybmluZyksXG4gICAgZGFuZ2VyOiAgKGxpZ2h0OiAkZGFuZ2VyKSxcbiAgICBpbmZvOiAobGlnaHQ6ICRpbmZvKSxcbiAgICBsaWdodDogKGxpZ2h0OiAkbGlnaHQsIGRhcms6ICRkYXJrKSxcbiAgICBtZWRpdW06IChsaWdodDogJG1lZGl1bSwgZGFyazogJGdyYXktMjAwKSxcbiAgICBkYXJrOiAobGlnaHQ6ICRkYXJrLCBkYXJrOiAkbGlnaHQpLFxuKSAhZGVmYXVsdDtcblxuLyoqXG4gKiBMYXlvdXQgQnJlYWtwb2ludHNcbiAqXG4gKiBodHRwczovL2lvbmljZnJhbWV3b3JrLmNvbS9kb2NzL2xheW91dC9ncmlkI2RlZmF1bHQtYnJlYWtwb2ludHNcbiAqL1xuXG4vLyBUaGUgbWluaW11bSBkaW1lbnNpb25zIGF0IHdoaWNoIHlvdXIgbGF5b3V0IHdpbGwgY2hhbmdlLFxuLy8gYWRhcHRpbmcgdG8gZGlmZmVyZW50IHNjcmVlbiBzaXplcywgZm9yIHVzZSBpbiBtZWRpYSBxdWVyaWVzXG4kc2NyZWVuLWJyZWFrcG9pbnRzOiAoXG4gICAgeHM6IDBweCxcbiAgICBzbTogNTc2cHgsXG4gICAgbWQ6IDc2OHB4LFxuICAgIGxnOiA5OTJweCxcbiAgICB0YWJsZXQ6IDk5MnB4LFxuICAgIHhsOiAxMjAwcHhcbikgIWRlZmF1bHQ7XG5cbiRjb3JlLWNvdXJzZS1pbWFnZS1iYWNrZ3JvdW5kOiAjODFlY2VjLCAjNzRiOWZmLCAjYTI5YmZlLCAjZGZlNmU5LCAjMDBiODk0LCAjMDk4NGUzLCAjYjJiZWMzLCAjZmRjYjZlLCAjZmQ3OWE4LCAjNmM1Y2U3ICFkZWZhdWx0O1xuJGNvcmUtZGQtcXVlc3Rpb24tY29sb3JzOiAjRkZGRkZGLCAjQjBDNERFLCAjRENEQ0RDLCAjRDhCRkQ4LCAjODdDRUZBLCAjREFBNTIwLCAjRkZENzAwLCAjRjBFNjhDICFkZWZhdWx0O1xuJGNvcmUtdGV4dC1oaWdodGxpZ2h0LWJhY2tncm91bmQtY29sb3I6IGxpZ2h0ZW4oJGJsdWUsIDQwJSkgIWRlZmF1bHQ7XG5cbiRjb3JlLWZpeGVkLXVybDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1kYXNoYm9hcmQtbG9nbzogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1hbHdheXMtc2hvdy1tYWluLW1lbnU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtZm9ybWF0LXRleHQtbmV2ZXItc2hvcnRlbjogZmFsc2UgIWRlZmF1bHQ7XG5cbiRjb3JlLWhpZGUtY291cnNlaW1hZ2Utb24tY291cnNlOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWhpZGUtcHJvZ3Jlc3Mtb24tY291cnNlOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWhpZGUtcHJvZ3Jlc3Mtb24tc2VjdGlvbi1zZWxlY3RvcjogZmFsc2UgIWRlZmF1bHQ7XG5cbiRjb3JlLWNvdXJzZS1oaWRlLXRodW1iLW9uLWNhcmRzOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWNvdXJzZS10aHVtYi1vbi1jYXJkcy1iYWNrZ3JvdW5kOiBudWxsICFkZWZhdWx0O1xuJGNvcmUtY291cnNlLWhpZGUtcHJvZ3Jlc3Mtb24tY2FyZHM6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIGxvZ2luIHBhZ2UuXG4kY29yZS1sb2dpbi1idXR0b24tb3V0bGluZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1idXR0b24tb3V0bGluZS1kYXJrOiAkY29yZS1sb2dpbi1idXR0b24tb3V0bGluZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3I6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tbG9hZGluZy1jb2xvci1kYXJrOiAkdGV4dC1jb2xvci1kYXJrICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1mb3Jnb3QtcGFzc3dvcmQ6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1uZWVkLWhlbHA6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4taGlkZS1xcmNvZGU6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIG1vcmUgcGFnZS4gKGRlcHJlY2F0ZWQgb24gNC4wKVxuJGNvcmUtbW9yZS1oaWRlLXNpdGVpbmZvOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLW1vcmUtaGlkZS1zaXRlbmFtZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1tb3JlLWhpZGUtc2l0ZXVybDogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgdXNlciBwYWdlLlxuJGNvcmUtdXNlci1oaWRlLXNpdGVpbmZvOiAkY29yZS1tb3JlLWhpZGUtc2l0ZWluZm8gIWRlZmF1bHQ7XG4kY29yZS11c2VyLWhpZGUtc2l0ZW5hbWU6ICRjb3JlLW1vcmUtaGlkZS1zaXRlbmFtZSAhZGVmYXVsdDtcbiRjb3JlLXVzZXItaGlkZS1zaXRldXJsOiAkY29yZS1tb3JlLWhpZGUtc2l0ZXVybCAhZGVmYXVsdDtcblxuLy8gQWN0aXZpdHkgaWNvbiBiYWNrZ3JvdW5kIGNvbG9ycy5cbiRhY3Rpdml0eS1pY29uLWNvbG9yczogKFxuICAgIGFkbWluaXN0cmF0aW9uOiAjNWQ2M2Y2LFxuICAgIGFzc2Vzc21lbnQ6ICNlYjY2YTIsXG4gICAgY29sbGFib3JhdGlvbjogI2Y3NjM0ZCxcbiAgICBjb21tdW5pY2F0aW9uOiAjMTFhNjc2LFxuICAgIGNvbnRlbnQ6ICMzOTliZTIsXG4gICAgaW50ZXJmYWNlOiAjYTM3OGZmXG4pICFkZWZhdWx0O1xuXG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY2F0ZWdvcnk6ICM4ZTI0YWEgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY291cnNlOiAkcmVkICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWdyb3VwOiAkeWVsbG93ICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXVzZXI6ICRibHVlICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXNpdGU6ICRncmVlbiAhZGVmYXVsdDtcblxuLy8gQ2FsZW5kYXIgZXZlbnQgY2F0ZWdvcnkgYmFja2dyb3VuZCBjb2xvcnMuXG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY29sb3JzOiAoXG4gICAgY2F0ZWdvcnk6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jYXRlZ29yeSxcbiAgICBjb3Vyc2U6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb3Vyc2UsXG4gICAgZ3JvdXA6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1ncm91cCxcbiAgICB1c2VyOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktdXNlcixcbiAgICBzaXRlOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktc2l0ZSxcbikgIWRlZmF1bHQ7XG4iLCJAdXNlIFwidGhlbWUvZ2xvYmFsc1wiIGFzICo7XG5cbjpob3N0IDo6bmctZGVlcCBpb24taXRlbVtjb2xsYXBzaWJsZV0gaW9uLWxhYmVsIHtcbiAgICBtYXJnaW4tdG9wOiAxMnB4O1xufVxuXG5oMSB7XG4gICAgZm9udC1zaXplOiAyMHB4O1xufVxuXG4uY29yZS1tb2R1bGVuYW1lIHtcbiAgICB0ZXh0LXRyYW5zZm9ybTogdXBwZXJjYXNlO1xuICAgIGNvcmUtbW9kLWljb24ge1xuICAgICAgICAtLXBhZGRpbmc6IDNweDtcbiAgICAgICAgLS1zaXplOiAxMHB4O1xuICAgICAgICBtYXJnaW46IDA7XG4gICAgfVxufVxuXG5cbmlvbi1pdGVtIGlvbi1sYWJlbCBpb24taWNvbiB7XG4gICAgQGluY2x1ZGUgbWFyZ2luLWhvcml6b250YWwoMCwgNHB4KTtcbiAgICB2ZXJ0aWNhbC1hbGlnbjogdGV4dC10b3A7XG59XG5cblxuaW9uLWl0ZW0uY2FyZC1oZWFkZXIge1xuICAgIC0tcGFkZGluZy1zdGFydDogOHB4O1xuICAgIC0tcGFkZGluZy1lbmQ6IDhweDtcbiAgICAtLWlubmVyLXBhZGRpbmctc3RhcnQ6IDBweDtcbiAgICAtLWlubmVyLXBhZGRpbmctZW5kOiAwcHg7XG4gICAgLS1taW4taGVpZ2h0OiA0MHB4O1xuXG4gICAgaW9uLWxhYmVsIHtcbiAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["CoreConstants","AddonBlog","AddonBlogMainMenuHandlerService","CoreCourse","CoreCourseHelper","CoreCourseModuleDelegate","CoreCourseModulePrefetchDelegate","CoreCourses","CoreGradesHelper","CoreNetwork","CoreFilepool","CoreNavigator","CoreSites","CoreDomUtils","CoreTextUtils","CoreUtils","ModalController","NgZone","CoreEvents","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r7","modicon","module","modname","instance","modplural","ɵɵtextInterpolate1","moduleNameTranslated","ctx_r8","externalUrl","ɵɵattribute","ɵɵpipeBind1","ɵɵtemplate","CoreCourseModuleSummaryComponent_ion_item_8_p_2_Template","CoreCourseModuleSummaryComponent_ion_item_8_ion_button_5_Template","ctx_r0","name","component","componentId","id","courseId","displayOptions","displayOpenInBrowser","ɵɵlistener","CoreCourseModuleSummaryComponent_ion_item_9_Template_ion_item_click_0_listener","ɵɵrestoreView","_r10","ctx_r9","ɵɵnextContext","ɵɵresetView","openCourse","ctx_r1","course","fullname","ctx_r2","description","grade_r12","gradeitem","ctx_r15","grade","ɵɵsanitizeHtml","ɵɵpropertyInterpolate","icon","iconAlt","image","ɵɵsanitizeUrl","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template_ion_item_click_0_listener","_r29","$implicit","ctx_r27","toggleGrade","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_4_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_5_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_p_6_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_badge_7_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_8_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_img_9_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_ion_icon_10_Template","expanded","ɵɵclassProp","itemmodule","ɵɵtextInterpolate","weight","range","percentage","lettergrade","rank","average","feedback","ctx_r37","contributiontocoursetotal","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_1_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_2_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_3_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_4_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_5_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_6_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_7_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_ion_item_8_Template","length","ɵɵelementContainerStart","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_ion_item_1_Template","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_div_2_Template","ɵɵelementContainerEnd","CoreCourseModuleSummaryComponent_ion_card_11_ng_container_8_Template","ctx_r3","grades","CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template_ion_button_click_0_listener","_r54","ctx_r53","removeFiles","ctx_r51","prefetchLoading","ɵɵpipeBind2","ɵɵpureFunction1","_c0","size","CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_button_8_Template","CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_ion_spinner_9_Template","ctx_r48","removeFilesLoading","ɵɵtextInterpolate2","ctx_r49","downloadTimeReadable","CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template_ion_button_click_0_listener","_r58","ctx_r57","prefetch","CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_icon_1_Template","CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_ion_spinner_2_Template","ctx_r50","prefetchDisabled","CoreCourseModuleSummaryComponent_ion_card_12_ion_item_7_Template","CoreCourseModuleSummaryComponent_ion_card_12_ion_item_8_Template","CoreCourseModuleSummaryComponent_ion_card_12_ion_button_9_Template","ctx_r4","displaySize","canPrefetch","displayPrefetch","CoreCourseModuleSummaryComponent_ion_item_13_Template_ion_item_click_0_listener","_r60","ctx_r59","gotoBlog","CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template_ion_button_click_0_listener","_r64","ctx_r63","refresh","CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template_ion_button_click_0_listener","_r66","ctx_r65","sync","CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_1_Template","CoreCourseModuleSummaryComponent_ion_footer_14_ion_button_2_Template","ctx_r6","hasOffline","CoreCourseModuleSummaryComponent","constructor","moduleId","loaded","blog","isOnline","isDestroyed","siteId","getCurrentSiteId","onlineSubscription","onChange","subscribe","run","ngOnInit","_this","_asyncToGenerator","_CoreSites$getCurrent","closeModal","Object","assign","getCurrentSite","shouldDisplayInformativeLinks","displayDescription","displayRefresh","displayBlog","displayGrades","supportsFeature","FEATURE_GRADE_HAS_GRADE","FEATURE_SHOW_DESCRIPTION","fetchContent","packageStatusObserver","on","PACKAGE_STATUS_CHANGED","data","getPackageStatus","debouncedUpdateSize","debounce","moduleSize","getModuleStoredSize","fileStatusObserver","COMPONENT_FILE_ACTION","isFileEventDownloadedOrDeleted","_this2","url","translateModuleName","isPluginEnabled","Promise","all","loadModIcon","fetchGrades","fetchCourse","error","showErrorModal","_this3","getModuleIconSrc","_this4","moduleInfo","getModulePrefetchInfo","status","NOT_DOWNLOADABLE","downloadTime","ucFirst","DOWNLOADING","DOWNLOADED","_this5","params","cmId","navigateToSitePath","PAGE_NAME","_this6","getModuleGrades","_unused","_this7","getUserCourse","_unused2","getCourse","replace","animationDirection","openModule","_this8","getModuleDownloadSize","confirmDownloadSize","prefetchModule","showErrorModalDefault","_this9","showAlertTranslated","undefined","showDeleteConfirm","removeModuleStoredData","_this10","dismiss","action","_this11","ngOnDestroy","_this$packageStatusOb","_this$fileStatusObser","off","unsubscribe","selectors","inputs","decls","vars","consts","template","CoreCourseModuleSummaryComponent_Template","rf","ctx","CoreCourseModuleSummaryComponent_Template_ion_button_click_3_listener","CoreCourseModuleSummaryComponent_ion_item_8_Template","CoreCourseModuleSummaryComponent_ion_item_9_Template","CoreCourseModuleSummaryComponent_ion_item_10_Template","CoreCourseModuleSummaryComponent_ion_card_11_Template","CoreCourseModuleSummaryComponent_ion_card_12_Template","CoreCourseModuleSummaryComponent_ion_item_13_Template","CoreCourseModuleSummaryComponent_ion_footer_14_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-summary/module-summary.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-summary/module-summary.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreConstants } from '@/core/constants';\nimport { AddonBlog } from '@addons/blog/services/blog';\nimport { AddonBlogMainMenuHandlerService } from '@addons/blog/services/handlers/mainmenu';\nimport { Component, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Params } from '@angular/router';\nimport { CoreCourse } from '@features/course/services/course';\nimport { CoreCourseHelper, CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { CoreCourseModuleDelegate } from '@features/course/services/module-delegate';\nimport { CoreCourseModulePrefetchDelegate } from '@features/course/services/module-prefetch-delegate';\nimport { CoreCourses, CoreEnrolledCourseData } from '@features/courses/services/courses';\nimport { CoreGradesFormattedRow, CoreGradesFormattedTableRow, CoreGradesHelper } from '@features/grades/services/grades-helper';\nimport { CoreNetwork } from '@services/network';\nimport { CoreFilepool } from '@services/filepool';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ModalController, NgZone } from '@singletons';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { Subscription } from 'rxjs';\n\n/**\n * Component to display a module summary modal.\n */\n@Component({\n    selector: 'core-course-module-summary',\n    templateUrl: 'module-summary.html',\n    styleUrls: ['module-summary.scss'],\n})\nexport class CoreCourseModuleSummaryComponent implements OnInit, OnDestroy {\n\n    @Input() module?: CoreCourseModuleData; // The module of the component.\n    @Input() courseId = 0; // Course ID the component belongs to.\n    @Input() moduleId = 0; // Module ID the component belongs to.\n    @Input() component = ''; // Component name.\n    @Input() description = ''; // Module description.\n    @Input() hasOffline = false; // If it has offline data to be synced.\n    @Input() displayOptions: CoreCourseModuleSummaryDisplayOptions = {};\n\n    loaded = false; // If the component has been loaded.\n    componentId?: number; // Component ID.\n\n    // Data for context menu.\n    externalUrl?: string; // External URL to open in browser.\n\n    removeFilesLoading = false;\n    prefetchLoading = false;\n    canPrefetch = false;\n    prefetchDisabled = false;\n    size?: number; // Size in bytes\n    downloadTimeReadable = ''; // Last download time in a readable format.\n    grades?: CoreGradesFormattedRow[];\n    blog = false; // If blog is available.\n    isOnline = false; // If the app is online or not.\n    course?: CoreEnrolledCourseData;\n    modicon = '';\n    moduleNameTranslated = '';\n\n    protected onlineSubscription: Subscription; // It will observe the status of the network connection.\n    protected packageStatusObserver?: CoreEventObserver; // Observer of package status.\n    protected fileStatusObserver?: CoreEventObserver; // Observer of file status.\n    protected siteId: string;\n    protected isDestroyed = false;\n\n    constructor() {\n        this.siteId = CoreSites.getCurrentSiteId();\n        this.isOnline = CoreNetwork.isOnline();\n\n        // Refresh online status when changes.\n        this.onlineSubscription = CoreNetwork.onChange().subscribe(() => {\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\n            NgZone.run(() => {\n                this.isOnline = CoreNetwork.isOnline();\n            });\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        if (!this.module) {\n            this.closeModal();\n\n            return;\n        }\n\n        this.displayOptions = Object.assign({\n            displayOpenInBrowser: !!CoreSites.getCurrentSite()?.shouldDisplayInformativeLinks(),\n            displayDescription: true,\n            displayRefresh: true,\n            displayPrefetch: true,\n            displaySize: true,\n            displayBlog: true,\n            displayGrades: true,\n        }, this.displayOptions);\n\n        this.displayOptions.displayGrades = this.displayOptions.displayGrades &&\n            CoreCourseModuleDelegate.supportsFeature(this.module.modname, CoreConstants.FEATURE_GRADE_HAS_GRADE, true);\n\n        this.displayOptions.displayDescription = this.displayOptions.displayDescription &&\n            CoreCourseModuleDelegate.supportsFeature(this.module.modname, CoreConstants.FEATURE_SHOW_DESCRIPTION, true);\n\n        this.fetchContent();\n\n        if (this.component) {\n            this.packageStatusObserver = CoreEvents.on(\n                CoreEvents.PACKAGE_STATUS_CHANGED,\n                (data) => {\n                    if (data.componentId == module.id && data.component == this.component) {\n                        this.getPackageStatus();\n                    }\n                },\n                this.siteId,\n            );\n\n            // Debounce the update size function to prevent too many calls when downloading or deleting a whole activity.\n            const debouncedUpdateSize = CoreUtils.debounce(async () => {\n                if (!this.module) {\n                    return;\n                }\n\n                const moduleSize = await CoreCourseModulePrefetchDelegate.getModuleStoredSize(this.module, this.courseId);\n\n                if (moduleSize) {\n                    this.size = moduleSize;\n                }\n            }, 1000);\n\n            this.fileStatusObserver = CoreEvents.on(\n                CoreEvents.COMPONENT_FILE_ACTION,\n                (data) => {\n                    if (data.component != this.component || data.componentId != module.id) {\n                        // The event doesn't belong to this component, ignore.\n                        return;\n                    }\n\n                    if (!CoreFilepool.isFileEventDownloadedOrDeleted(data)) {\n                        return;\n                    }\n\n                    // Update the module size.\n                    debouncedUpdateSize();\n                },\n                this.siteId,\n            );\n        }\n\n    }\n\n    /**\n     * Fetch content to populate the page.\n     */\n    protected async fetchContent(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        this.componentId = this.module.id;\n        this.externalUrl = this.module.url;\n        this.courseId = this.courseId || this.module.course;\n        this.moduleNameTranslated = CoreCourse.translateModuleName(this.module.modname, this.module.modplural);\n\n        this.blog = await AddonBlog.isPluginEnabled();\n\n        try {\n            await Promise.all([\n                this.loadModIcon(),\n                this.getPackageStatus(),\n                this.fetchGrades(),\n                this.fetchCourse(),\n            ]);\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        }\n\n        this.loaded = true;\n    }\n\n    /**\n     * Load the module icon.\n     */\n    protected async loadModIcon(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        this.modicon = await CoreCourseModuleDelegate.getModuleIconSrc(this.module.modname, this.module.modicon, this.module);\n    }\n\n    /**\n     * Updage package status.\n     *\n     * @param refresh If prefetch info has to be refreshed.\n     */\n    protected async getPackageStatus(refresh = false): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        const moduleInfo =\n            await CoreCourseHelper.getModulePrefetchInfo(this.module, this.courseId, refresh, this.component);\n\n        this.canPrefetch = moduleInfo.status != CoreConstants.NOT_DOWNLOADABLE;\n        this.downloadTimeReadable = '';\n\n        if (this.canPrefetch) {\n            if (moduleInfo.downloadTime && moduleInfo.downloadTime > 0) {\n                this.downloadTimeReadable = CoreTextUtils.ucFirst(moduleInfo.downloadTimeReadable);\n            }\n            this.prefetchLoading = moduleInfo.status == CoreConstants.DOWNLOADING;\n            this.prefetchDisabled = moduleInfo.status == CoreConstants.DOWNLOADED;\n        }\n\n        if (moduleInfo.size && moduleInfo.size > 0) {\n            this.size = moduleInfo.size;\n        }\n    }\n\n    /**\n     * Go to blog posts.\n     */\n    async gotoBlog(): Promise<void> {\n        const params: Params = { cmId: this.moduleId };\n\n        await CoreNavigator.navigateToSitePath(AddonBlogMainMenuHandlerService.PAGE_NAME, { params });\n    }\n\n    /**\n     * Fetch grade module info.\n     */\n    protected async fetchGrades(): Promise<void> {\n        if (!this.displayOptions.displayGrades) {\n            return;\n        }\n\n        try {\n            this.grades = await CoreGradesHelper.getModuleGrades(this.courseId, this.moduleId);\n        } catch {\n            // Cannot get grades, don't display them.\n        }\n    }\n\n    /**\n     * Toggle grades expand.\n     *\n     * @param grade Row to expand.\n     */\n    toggleGrade(grade: CoreGradesFormattedTableRow): void {\n        grade.expanded = !grade.expanded;\n    }\n\n    /**\n     * Fetch course.\n     */\n    protected async fetchCourse(): Promise<void> {\n        // Fix that.\n        try {\n            this.course = await CoreCourses.getUserCourse(this.courseId, true);\n        } catch {\n            // The user is not enrolled in the course. Use getCourses to see if it's an admin/manager and can see the course.\n            this.course = await CoreCourses.getCourse(this.courseId);\n        }\n    }\n\n    /**\n     * Open course.\n     */\n    openCourse(): void {\n        if (!this.course) {\n            return;\n        }\n\n        CoreCourse.openCourse(\n            this.course,\n            {\n                replace: true,\n                animationDirection: 'back',\n                params: {\n                    module: this.module,\n                    openModule: false,\n                },\n            },\n        );\n    }\n\n    /**\n     * Prefetch the module.\n     */\n    async prefetch(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        this.prefetchLoading = true; // Show spinner since this operation might take a while.\n\n        try {\n            // We need to call getDownloadSize, the package might have been updated.\n            const size = await CoreCourseModulePrefetchDelegate.getModuleDownloadSize(this.module, this.courseId, true);\n\n            await CoreDomUtils.confirmDownloadSize(size);\n\n            await CoreCourseModulePrefetchDelegate.prefetchModule(this.module, this.courseId, true);\n\n            await this.getPackageStatus(true);\n        } catch (error) {\n            this.prefetchLoading = false;\n\n            if (!this.isDestroyed) {\n                CoreDomUtils.showErrorModalDefault(error, 'core.errordownloading', true);\n            }\n        }\n    }\n\n    /**\n     * Confirm and remove downloaded files.\n     */\n    async removeFiles(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        if (this.prefetchLoading) {\n            CoreDomUtils.showAlertTranslated(undefined, 'core.course.cannotdeletewhiledownloading');\n\n            return;\n        }\n\n        try {\n            await CoreDomUtils.showDeleteConfirm('addon.storagemanager.confirmdeletedatafrom', { name: this.module.name });\n\n            this.removeFilesLoading = true;\n\n            await CoreCourseHelper.removeModuleStoredData(this.module, this.courseId);\n\n        } catch (error) {\n            if (!this.isDestroyed &&error) {\n                CoreDomUtils.showErrorModal(error);\n            }\n        } finally {\n            this.removeFilesLoading = false;\n            delete this.size;\n        }\n\n        await this.getPackageStatus();\n    }\n\n    /**\n     * Refresh the data.\n     */\n    async refresh(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        ModalController.dismiss({ action: 'refresh' });\n    }\n\n    /**\n     * Sync the data.\n     */\n    async sync(): Promise<void> {\n        if (!this.module) {\n            return;\n        }\n\n        ModalController.dismiss({ action: 'sync' });\n    }\n\n    /**\n     * Close the modal.\n     */\n    closeModal(): void {\n        ModalController.dismiss();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.isDestroyed = true;\n        this.packageStatusObserver?.off();\n        this.fileStatusObserver?.off();\n        this.onlineSubscription.unsubscribe();\n    }\n\n}\n\nexport type CoreCourseModuleSummaryResult = {\n    action: 'sync'|'refresh';\n};\n\nexport type CoreCourseModuleSummaryDisplayOptions = {\n    displayOpenInBrowser?: boolean;\n    displayDescription?: boolean;\n    displayRefresh?: boolean;\n    displayPrefetch?: boolean;\n    displaySize?: boolean;\n    displayBlog?: boolean;\n    displayGrades?: boolean;\n};\n","<ion-header class=\"no-title\">\n    <ion-toolbar>\n        <ion-buttons slot=\"end\">\n            <ion-button fill=\"clear\" (click)=\"closeModal()\" [attr.aria-label]=\"'core.close' | translate\">\n                <ion-icon slot=\"icon-only\" name=\"fas-xmark\" aria-hidden=\"true\" />\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content [fullscreen]=\"true\">\n    <!-- Content. -->\n    <core-loading [hideUntil]=\"loaded\">\n        <!-- Activity info. -->\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"module\" lines=\"full\">\n            <ion-label>\n                <p *ngIf=\"moduleNameTranslated\" class=\"core-modulename\">\n                    <core-mod-icon slot=\"start\" [modicon]=\"modicon\" [modname]=\"module.modname\" [componentId]=\"module.instance\"\n                        [fallbackTranslation]=\"module.modplural\" />\n                    {{moduleNameTranslated}}\n                </p>\n                <h1>\n                    <core-format-text [text]=\"module.name\" contextLevel=\"module\" [component]=\"component\" [componentId]=\"componentId\"\n                        [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                </h1>\n            </ion-label>\n            <ion-button fill=\"clear\" *ngIf=\"displayOptions.displayOpenInBrowser && externalUrl\" [href]=\"externalUrl\" core-link\n                [showBrowserWarning]=\"false\" [attr.aria-label]=\"'core.openinbrowser' | translate\" slot=\"end\">\n                <ion-icon name=\"fas-up-right-from-square\" slot=\"icon-only\" aria-hidden=\"true\" />\n            </ion-button>\n        </ion-item>\n\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"course\" (click)=\"openCourse()\" button [detail]=\"true\" lines=\"full\">\n            <ion-label>\n                <p class=\"item-heading\">\n                    <ion-icon name=\"fas-graduation-cap\" aria-hidden=\"true\" />\n                    {{ 'core.course' | translate}}\n                </p>\n                <p>\n                    <core-format-text [text]=\"course.fullname\" contextLevel=\"course\" [contextInstanceId]=\"courseId\" />\n                </p>\n            </ion-label>\n        </ion-item>\n\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"module && description && displayOptions.displayDescription\" lines=\"full\">\n            <ion-label>\n                <p class=\"item-heading\">\n                    {{ 'core.description' | translate}}\n                </p>\n                <core-format-text [text]=\"description\" [component]=\"component\" [componentId]=\"componentId\" contextLevel=\"module\"\n                    [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" collapsible-item />\n            </ion-label>\n        </ion-item>\n\n        <ion-card *ngIf=\"displayOptions.displayGrades && grades?.length > 0\">\n            <ion-list>\n                <ion-item lines=\"full\" class=\"ion-text-wrap card-header\">\n                    <ion-label>\n                        <h2>\n                            <ion-icon name=\"fas-chart-bar\" slot=\"end\" aria-hidden=\"true\" />{{ 'core.grades.gradebook' | translate\n                            }}\n                        </h2>\n                    </ion-label>\n                </ion-item>\n                <ng-container *ngFor=\"let grade of grades\">\n                    <ion-item button *ngIf=\"grade.gradeitem\" class=\"ion-text-wrap divider\" (click)=\"toggleGrade(grade)\"\n                        [attr.aria-label]=\"(grade.expanded ? 'core.collapse' : 'core.expand') | translate\"\n                        [attr.aria-expanded]=\"grade.expanded\" [attr.aria-controls]=\"'grade-'+grade.id\" role=\"heading\" [detail]=\"false\">\n                        <ion-icon name=\"fas-chevron-right\" flip-rtl slot=\"start\" aria-hidden=\"true\" class=\"expandable-status-icon\"\n                            [class.expandable-status-icon-expanded]=\"grade.expanded\" />\n                        <ion-label>\n                            <p class=\"item-heading\" *ngIf=\"!grade.itemmodule\">\n                                <core-format-text [text]=\"grade.gradeitem\" contextLevel=\"course\" [contextInstanceId]=\"courseId\" />\n                            </p>\n                            <p class=\"item-heading\" *ngIf=\"grade.itemmodule\">\n                                {{ 'core.grades.grade' | translate }}\n                            </p>\n                            <p *ngIf=\"grade.grade && grade.grade !== '-'\" [innerHTML]=\"grade.grade\"></p>\n                            <ion-badge *ngIf=\"!grade.grade || grade.grade === '-'\" color=\"light\">\n                                {{ 'core.grades.notgraded' | translate }}\n                            </ion-badge>\n                        </ion-label>\n                        <ion-icon *ngIf=\"grade.icon\" name=\"{{grade.icon}}\" slot=\"end\" [attr.aria-label]=\"grade.iconAlt\" />\n                        <img *ngIf=\"grade.image && !grade.itemmodule\" [src]=\"grade.image\" slot=\"end\" [alt]=\"grade.iconAlt\" />\n                        <ion-icon *ngIf=\"grade.image && grade.itemmodule\" name=\"fas-chart-bar\" slot=\"end\"\n                            [attr.aria-label]=\"grade.iconAlt\" />\n                    </ion-item>\n                    <div *ngIf=\"grade.expanded\" [id]=\"'grade-'+grade.id\">\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.weight?.length > 0 && grade.weight !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.weight' | translate}}</p>\n                                <p [innerHTML]=\"grade.weight\"></p>\n                            </ion-label>\n                        </ion-item>\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.range?.length > 0 && grade.range !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.range' | translate}}</p>\n                                <p [innerHTML]=\"grade.range\"></p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.percentage?.length > 0 && grade.percentage !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.percentage' | translate}}</p>\n                                <p [innerHTML]=\"grade.percentage\"></p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.lettergrade?.length > 0 && grade.lettergrade !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.lettergrade' | translate}}</p>\n                                <p [innerHTML]=\"grade.lettergrade\"></p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.rank?.length > 0 && grade.rank !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.rank' | translate}}</p>\n                                <p [innerHTML]=\"grade.rank\"></p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.average?.length > 0 && grade.average !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.average' | translate}}</p>\n                                <p [innerHTML]=\"grade.average\"></p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\" *ngIf=\"grade.feedback?.length > 0 && grade.feedback !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.feedback' | translate}}</p>\n                                <p>\n                                    <core-format-text collapsible-item [text]=\"grade.feedback\" contextLevel=\"course\"\n                                        [contextInstanceId]=\"courseId\" />\n                                </p>\n                            </ion-label>\n                        </ion-item>\n\n                        <ion-item class=\"ion-text-wrap\"\n                            *ngIf=\"grade.contributiontocoursetotal?.length > 0 && grade.contributiontocoursetotal !== '-'\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ 'core.grades.contributiontocoursetotal' | translate}}</p>\n                                <p [innerHTML]=\"grade.contributiontocoursetotal\"></p>\n                            </ion-label>\n                        </ion-item>\n                    </div>\n                </ng-container>\n            </ion-list>\n        </ion-card>\n\n        <ion-card *ngIf=\"(canPrefetch && displayOptions.displayPrefetch) || (size && displayOptions.displaySize)\">\n            <ion-item lines=\"full\" class=\"ion-text-wrap card-header\">\n                <ion-label>\n                    <h2>\n                        <ion-icon name=\"fas-cloud-arrow-down\" aria-hidden=\"true\" />\n                        {{ 'addon.storagemanager.downloads' | translate }}\n                    </h2>\n                </ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"size && displayOptions.displaySize\" class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading ion-text-wrap\">{{ 'addon.storagemanager.totalspaceusage' | translate }}</p>\n                    <ion-badge color=\"light\">{{ size | coreBytesToSize }}</ion-badge>\n                </ion-label>\n                <ion-button *ngIf=\"!removeFilesLoading\" [disabled]=\"prefetchLoading\" (click)=\"removeFiles()\" color=\"danger\" fill=\"clear\"\n                    [attr.aria-label]=\"'core.clearstoreddata' | translate:{$a: size | coreBytesToSize}\" slot=\"end\">\n                    <ion-icon name=\"fas-trash\" slot=\"icon-only\" aria-hidden=\"true\" />\n                </ion-button>\n                <ion-spinner *ngIf=\"removeFilesLoading\" slot=\"end\" aria-hidden=\"true\" />\n            </ion-item>\n            <ion-item *ngIf=\"downloadTimeReadable\" class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"ion-text-wrap\">{{ 'core.lastdownloaded' | translate }} {{ downloadTimeReadable }}</p>\n                </ion-label>\n            </ion-item>\n            <ion-button fill=\"outline\" expand=\"block\" *ngIf=\"canPrefetch && displayOptions.displayPrefetch\" class=\"ion-text-wrap\"\n                (click)=\"prefetch()\" [disabled]=\"prefetchDisabled\">\n                <ion-icon *ngIf=\"!prefetchLoading\" name=\"fas-cloud-arrow-down\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-spinner *ngIf=\"prefetchLoading\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>\n                    {{ 'core.download' | translate }}\n                </ion-label>\n            </ion-button>\n        </ion-card>\n\n        <ion-item button *ngIf=\"blog && displayOptions.displayBlog\" (click)=\"gotoBlog()\" [detail]=\"true\">\n            <ion-icon name=\"far-newspaper\" slot=\"start\" aria-hidden=\"true\" />\n            <ion-label>\n                {{ 'addon.blog.blog' | translate }}\n            </ion-label>\n        </ion-item>\n    </core-loading>\n</ion-content>\n<ion-footer *ngIf=\"loaded && isOnline && displayOptions.displayRefresh\">\n    <ion-button class=\"ion-margin\" *ngIf=\"!hasOffline\" (click)=\"refresh()\" expand=\"block\" fill=\"outline\">\n        <ion-icon name=\"fas-rotate-right\" slot=\"start\" aria-hidden=\"true\" />\n        <ion-label>\n            {{ 'core.refresh' | translate }}\n        </ion-label>\n    </ion-button>\n\n    <ion-button class=\"ion-margin\" *ngIf=\"hasOffline\" (click)=\"sync()\" expand=\"block\" fill=\"outline\">\n        <ion-icon name=\"fas-rotate\" slot=\"start\" aria-hidden=\"true\" />\n        <ion-label>\n            {{ 'core.settings.synchronizenow' | translate }}\n        </ion-label>\n    </ion-button>\n</ion-footer>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}