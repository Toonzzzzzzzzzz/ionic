{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreBlockOnlyTitleComponent } from '@features/block/components/only-title-block/only-title-block';\nimport { CoreBlockBaseHandler } from '@features/block/classes/base-block-handler';\nimport { makeSingleton } from '@singletons';\nimport { FORUM_SEARCH_PAGE_NAME } from '@addons/mod/forum/forum.module';\nimport { CoreSearchGlobalSearch } from '@features/search/services/global-search';\nimport * as i0 from \"@angular/core\";\n/**\n * Block handler.\n */\nexport class AddonBlockSearchForumsHandlerService extends CoreBlockBaseHandler {\n  constructor() {\n    super(...arguments);\n    this.name = 'AddonBlockSearchForums';\n    this.blockName = 'search_forums';\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      const enabled = yield CoreSearchGlobalSearch.isEnabled();\n      if (!enabled) {\n        return false;\n      }\n      const forumSearchAreas = ['mod_forum-activity', 'mod_forum-post'];\n      const searchAreas = yield CoreSearchGlobalSearch.getSearchAreas();\n      return searchAreas.some(({\n        id\n      }) => forumSearchAreas.includes(id));\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getDisplayData(block, contextLevel, instanceId) {\n    if (contextLevel !== 'course') {\n      return;\n    }\n    return {\n      title: 'addon.block_searchforums.pluginname',\n      class: 'addon-block-search-forums',\n      component: CoreBlockOnlyTitleComponent,\n      link: FORUM_SEARCH_PAGE_NAME,\n      linkParams: {\n        courseId: instanceId\n      }\n    };\n  }\n}\n_class = AddonBlockSearchForumsHandlerService;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵAddonBlockSearchForumsHandlerService_BaseFactory;\n  return function AddonBlockSearchForumsHandlerService_Factory(t) {\n    return (ɵAddonBlockSearchForumsHandlerService_BaseFactory || (ɵAddonBlockSearchForumsHandlerService_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonBlockSearchForumsHandler = makeSingleton(AddonBlockSearchForumsHandlerService);","map":{"version":3,"names":["CoreBlockOnlyTitleComponent","CoreBlockBaseHandler","makeSingleton","FORUM_SEARCH_PAGE_NAME","CoreSearchGlobalSearch","AddonBlockSearchForumsHandlerService","constructor","name","blockName","isEnabled","_asyncToGenerator","enabled","forumSearchAreas","searchAreas","getSearchAreas","some","id","includes","getDisplayData","block","contextLevel","instanceId","title","class","component","link","linkParams","courseId","t","factory","ɵfac","providedIn","AddonBlockSearchForumsHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/block/searchforums/services/block-handler.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreBlockHandlerData } from '@features/block/services/block-delegate';\nimport { CoreBlockOnlyTitleComponent } from '@features/block/components/only-title-block/only-title-block';\nimport { CoreBlockBaseHandler } from '@features/block/classes/base-block-handler';\nimport { makeSingleton } from '@singletons';\nimport { FORUM_SEARCH_PAGE_NAME } from '@addons/mod/forum/forum.module';\nimport { CoreCourseBlock } from '@features/course/services/course';\nimport { CoreSearchGlobalSearch } from '@features/search/services/global-search';\n\n/**\n * Block handler.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonBlockSearchForumsHandlerService extends CoreBlockBaseHandler {\n\n    name = 'AddonBlockSearchForums';\n    blockName = 'search_forums';\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        const enabled = await CoreSearchGlobalSearch.isEnabled();\n\n        if (!enabled) {\n            return false;\n        }\n\n        const forumSearchAreas = ['mod_forum-activity', 'mod_forum-post'];\n        const searchAreas = await CoreSearchGlobalSearch.getSearchAreas();\n\n        return searchAreas.some(({ id }) => forumSearchAreas.includes(id));\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getDisplayData(block: CoreCourseBlock, contextLevel: string, instanceId: number): CoreBlockHandlerData | undefined {\n        if (contextLevel !== 'course') {\n            return;\n        }\n\n        return {\n            title: 'addon.block_searchforums.pluginname',\n            class: 'addon-block-search-forums',\n            component: CoreBlockOnlyTitleComponent,\n            link: FORUM_SEARCH_PAGE_NAME,\n            linkParams: { courseId: instanceId },\n        };\n    }\n\n}\n\nexport const AddonBlockSearchForumsHandler = makeSingleton(AddonBlockSearchForumsHandlerService);\n"],"mappings":";;AAgBA,SAASA,2BAA2B,QAAQ,8DAA8D;AAC1G,SAASC,oBAAoB,QAAQ,4CAA4C;AACjF,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,sBAAsB,QAAQ,gCAAgC;AAEvE,SAASC,sBAAsB,QAAQ,yCAAyC;;AAEhF;;;AAIA,OAAM,MAAOC,oCAAqC,SAAQJ,oBAAoB;EAD9EK,YAAA;;IAGI,KAAAC,IAAI,GAAG,wBAAwB;IAC/B,KAAAC,SAAS,GAAG,eAAe;;EAE3B;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,MAAMC,OAAO,SAASP,sBAAsB,CAACK,SAAS,EAAE;MAExD,IAAI,CAACE,OAAO,EAAE;QACV,OAAO,KAAK;;MAGhB,MAAMC,gBAAgB,GAAG,CAAC,oBAAoB,EAAE,gBAAgB,CAAC;MACjE,MAAMC,WAAW,SAAST,sBAAsB,CAACU,cAAc,EAAE;MAEjE,OAAOD,WAAW,CAACE,IAAI,CAAC,CAAC;QAAEC;MAAE,CAAE,KAAKJ,gBAAgB,CAACK,QAAQ,CAACD,EAAE,CAAC,CAAC;IAAC;EACvE;EAEA;;;EAGAE,cAAcA,CAACC,KAAsB,EAAEC,YAAoB,EAAEC,UAAkB;IAC3E,IAAID,YAAY,KAAK,QAAQ,EAAE;MAC3B;;IAGJ,OAAO;MACHE,KAAK,EAAE,qCAAqC;MAC5CC,KAAK,EAAE,2BAA2B;MAClCC,SAAS,EAAExB,2BAA2B;MACtCyB,IAAI,EAAEtB,sBAAsB;MAC5BuB,UAAU,EAAE;QAAEC,QAAQ,EAAEN;MAAU;KACrC;EACL;;SApCShB,oCAAqC;;;;+IAArCA,MAAoC,IAAAuB,CAAA,IAApCvB,MAAoC;EAAA;AAAA;;SAApCA,MAAoC;EAAAwB,OAAA,EAApCxB,MAAoC,CAAAyB,IAAA;EAAAC,UAAA,EADvB;AAAM;AAyChC,OAAO,MAAMC,6BAA6B,GAAG9B,aAAa,CAACG,oCAAoC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}