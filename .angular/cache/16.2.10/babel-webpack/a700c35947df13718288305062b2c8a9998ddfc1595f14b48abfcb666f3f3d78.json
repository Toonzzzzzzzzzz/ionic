{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourseModuleCompletionBaseComponent } from '@features/course/classes/module-completion';\nimport { CoreCourseModuleCompletionStatus, CoreCourseModuleCompletionTracking } from '@features/course/services/course';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCourseModuleCompletionDetailsComponent } from '../module-completion-details/module-completion-details';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreUser } from '@features/user/services/user';\nimport { Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../directives/fa-icon\";\nimport * as i3 from \"../../../../directives/update-non-reactive-attributes\";\nimport * as i4 from \"@ionic/angular\";\nimport * as i5 from \"@ngx-translate/core\";\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_1_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r8);\n      const ctx_r7 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r7.completionClicked($event));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵelement(4, \"div\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.course.todo\"), \" \");\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_2_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r9.completionClicked($event));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementStart(4, \"div\", 5);\n    i0.ɵɵelement(5, \"div\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.course.done\"), \" \");\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_1_Template, 5, 3, \"ion-button\", 2);\n    i0.ɵɵtemplate(2, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_2_Template, 6, 3, \"ion-button\", 3);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.completed);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.completed);\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_ion_icon_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 12);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.course.manualcompletionnotsynced\"));\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r15);\n      const ctx_r14 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r14.completionClicked($event));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 8);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵtemplate(4, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_ion_icon_4_Template, 2, 3, \"ion-icon\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(4);\n    i0.ɵɵattribute(\"aria-label\", ctx_r11.accessibleDescription);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 3, \"core.course.completion_manual:done\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.completion.offline);\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_ion_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 12);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.course.manualcompletionnotsynced\"));\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 4);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r17.completionClicked($event));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵtemplate(3, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_ion_icon_3_Template, 2, 3, \"ion-icon\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(4);\n    i0.ɵɵattribute(\"aria-label\", ctx_r12.accessibleDescription);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 3, \"core.course.completion_manual:markdone\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.completion.offline);\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_Template, 5, 5, \"ion-button\", 9);\n    i0.ɵɵtemplate(2, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_Template, 4, 5, \"ion-button\", 10);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.completed);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r4.completed);\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵtemplate(2, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.completion.isautomatic);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.completion.isautomatic);\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 13);\n    i0.ɵɵlistener(\"click\", function CoreCourseModuleCompletionComponent_ng_container_0_ion_button_2_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r20);\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.completionClicked($event));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementStart(3, \"div\", 5);\n    i0.ɵɵelement(4, \"div\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.course.completionmenuitem\"), \" \");\n  }\n}\nfunction CoreCourseModuleCompletionComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵtemplate(2, CoreCourseModuleCompletionComponent_ng_container_0_ion_button_2_Template, 5, 3, \"ion-button\", 1);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.completion.istrackeduser);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.completion.istrackeduser);\n  }\n}\n/**\n * Component to handle activity completion. It shows a checkbox with the current status, and allows manually changing\n * the completion if it's allowed.\n *\n * Example usage:\n *\n * <core-course-module-completion [completion]=\"module.completiondata\" [moduleName]=\"module.name\"\n *     (completionChanged)=\"completionChanged()\"></core-course-module-completion>\n */\nexport class CoreCourseModuleCompletionComponent extends CoreCourseModuleCompletionBaseComponent {\n  constructor() {\n    super(...arguments);\n    this.showCompletionConditions = false; // Whether to show activity completion conditions.\n    this.showManualCompletion = false; // Whether to show manual completion.\n    this.completed = false;\n    this.accessibleDescription = null;\n    this.showCompletionInfo = false;\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this$completion$deta;\n    if (!this.completion) {\n      return;\n    }\n    const hasConditions = !this.completion.isautomatic || (((_this$completion$deta = this.completion.details) === null || _this$completion$deta === void 0 ? void 0 : _this$completion$deta.length) || 0) > 0;\n    this.showCompletionInfo = hasConditions && (this.showCompletionConditions || this.showManualCompletion);\n    if (!this.showCompletionInfo) {\n      return;\n    }\n    if (!this.completion.isautomatic && this.completion.istrackeduser) {\n      this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, data => {\n        if (!this.completion || this.completion.cmid != data.completion.cmid) {\n          return;\n        }\n        this.completion = data.completion;\n        this.calculateData();\n        this.completionChanged.emit(this.completion);\n      });\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  calculateData() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.completion || !_this.completion.istrackeduser) {\n        return;\n      }\n      const completionStatus = _this.completion.tracking == CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_NONE ? undefined : _this.completion.state;\n      _this.completed = completionStatus !== CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE && completionStatus !== CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_FAIL;\n      if (!_this.completion.isautomatic) {\n        // Set an accessible description for manual completions with overridden completion state.\n        if (_this.completion.overrideby) {\n          const fullName = yield CoreUser.getUserFullNameWithDefault(_this.completion.overrideby, _this.completion.courseId);\n          const setByData = {\n            $a: {\n              activityname: _this.moduleName,\n              setby: fullName\n            }\n          };\n          const setByLangKey = _this.completion.state ? 'completion_setby:manual:done' : 'completion_setby:manual:markdone';\n          _this.accessibleDescription = Translate.instant('core.course.' + setByLangKey, setByData);\n        } else {\n          const langKey = _this.completion.state ? 'completion_manual:aria:done' : 'completion_manual:aria:markdone';\n          _this.accessibleDescription = Translate.instant('core.course.' + langKey, {\n            $a: _this.moduleName\n          });\n        }\n      }\n    })();\n  }\n  /**\n   * Completion clicked.\n   *\n   * @param event The click event.\n   */\n  completionClicked(event) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.completion || !_this2.showCompletionInfo) {\n        return;\n      }\n      event.stopPropagation();\n      event.preventDefault();\n      if (_this2.completion.isautomatic || !_this2.completion.istrackeduser) {\n        // Fake clicked element to correct position of the popover.\n        let target = event.target;\n        if (target && target.tagName !== 'ION-BUTTON') {\n          target = target.parentElement;\n        }\n        CoreDomUtils.openPopover({\n          component: CoreCourseModuleCompletionDetailsComponent,\n          componentProps: {\n            completion: _this2.completion\n          },\n          event: {\n            target\n          }\n        });\n      } else {\n        yield CoreCourseHelper.changeManualCompletion(_this2.completion);\n        CoreEvents.trigger(CoreEvents.MANUAL_COMPLETION_CHANGED, {\n          completion: _this2.completion\n        });\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnChanges(changes) {\n    if (changes.completion && this.completion && this.completion.istrackeduser) {\n      this.calculateData();\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$completionObser;\n    (_this$completionObser = this.completionObserver) === null || _this$completionObser === void 0 || _this$completionObser.off();\n  }\n}\n_class = CoreCourseModuleCompletionComponent;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵCoreCourseModuleCompletionComponent_BaseFactory;\n  return function CoreCourseModuleCompletionComponent_Factory(t) {\n    return (ɵCoreCourseModuleCompletionComponent_BaseFactory || (ɵCoreCourseModuleCompletionComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"core-course-module-completion\"]],\n  inputs: {\n    showCompletionConditions: \"showCompletionConditions\",\n    showManualCompletion: \"showManualCompletion\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature, i0.ɵɵNgOnChangesFeature],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [\"fill\", \"outline\", \"class\", \"chip\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"completioninfo completion_incomplete chip\", \"fill\", \"outline\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"completioninfo completion_complete chip\", \"color\", \"success\", 3, \"click\", 4, \"ngIf\"], [\"fill\", \"outline\", 1, \"completioninfo\", \"completion_incomplete\", \"chip\", 3, \"click\"], [\"role\", \"presentation\", \"aria-hidden\", \"true\", 1, \"select-icon\"], [1, \"select-icon-inner\"], [\"color\", \"success\", 1, \"completioninfo\", \"completion_complete\", \"chip\", 3, \"click\"], [\"name\", \"fas-check\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"color\", \"success\", \"class\", \"completioninfo completion_complete chip\", 3, \"click\", 4, \"ngIf\"], [\"fill\", \"outline\", \"class\", \"completioninfo completion_incomplete chip\", 3, \"click\", 4, \"ngIf\"], [\"name\", \"fas-arrows-rotate\", \"slot\", \"end\", 4, \"ngIf\"], [\"name\", \"fas-arrows-rotate\", \"slot\", \"end\"], [\"fill\", \"outline\", 1, \"chip\", 3, \"click\"]],\n  template: function CoreCourseModuleCompletionComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CoreCourseModuleCompletionComponent_ng_container_0_Template, 3, 2, \"ng-container\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.showCompletionInfo && ctx.completion);\n    }\n  },\n  dependencies: [i1.NgIf, i2.CoreFaIconDirective, i3.CoreUpdateNonReactiveAttributesDirective, i4.IonButton, i4.IonIcon, i5.TranslatePipe],\n  styles: [\"[_nghost-%COMP%] {\\n  display: block;\\n  margin: var(--margin, 4px);\\n}\\n[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  margin: 0px;\\n}\\n[_nghost-%COMP%]   ion-button.button-solid.ion-color-success[_ngcontent-%COMP%]::part(native) {\\n  background: var(--ion-color-tint);\\n  color: var(--ion-color-shade);\\n}\\n[_nghost-%COMP%]   ion-button.button-outline[_ngcontent-%COMP%]::part(native) {\\n  border-color: var(--gray-400);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb3JlL2ZlYXR1cmVzL2NvdXJzZS9jb21wb25lbnRzL21vZHVsZS1jb21wbGV0aW9uL21vZHVsZS1jb21wbGV0aW9uLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxjQUFBO0VBQ0EsMEJBQUE7QUFDSjtBQUNJO0VBQ0ksV0FBQTtBQUNSO0FBRUk7RUFDSSxpQ0FBQTtFQUNBLDZCQUFBO0FBQVI7QUFHSTtFQUNJLDZCQUFBO0FBRFIiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgZGlzcGxheTogYmxvY2s7XG4gICAgbWFyZ2luOiB2YXIoLS1tYXJnaW4sIDRweCk7XG5cbiAgICBpb24tYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luOiAwcHg7XG4gICAgfVxuXG4gICAgaW9uLWJ1dHRvbi5idXR0b24tc29saWQuaW9uLWNvbG9yLXN1Y2Nlc3M6OnBhcnQobmF0aXZlKXtcbiAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW9uLWNvbG9yLXRpbnQpO1xuICAgICAgICBjb2xvcjogdmFyKC0taW9uLWNvbG9yLXNoYWRlKTtcbiAgICB9XG5cbiAgICBpb24tYnV0dG9uLmJ1dHRvbi1vdXRsaW5lOjpwYXJ0KG5hdGl2ZSl7XG4gICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0tZ3JheS00MDApO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["CoreCourseModuleCompletionBaseComponent","CoreCourseModuleCompletionStatus","CoreCourseModuleCompletionTracking","CoreDomUtils","CoreCourseModuleCompletionDetailsComponent","CoreCourseHelper","CoreUser","Translate","CoreEvents","i0","ɵɵelementStart","ɵɵlistener","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_1_Template_ion_button_click_0_listener","$event","ɵɵrestoreView","_r8","ctx_r7","ɵɵnextContext","ɵɵresetView","completionClicked","ɵɵtext","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ɵɵpipeBind1","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_2_Template_ion_button_click_0_listener","_r10","ctx_r9","ɵɵelementContainerStart","ɵɵtemplate","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_1_Template","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_ion_button_2_Template","ɵɵelementContainerEnd","ɵɵproperty","ctx_r3","completed","ɵɵattribute","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_Template_ion_button_click_0_listener","_r15","ctx_r14","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_ion_icon_4_Template","ctx_r11","accessibleDescription","completion","offline","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_Template_ion_button_click_0_listener","_r18","ctx_r17","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_ion_icon_3_Template","ctx_r12","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_1_Template","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_ion_button_2_Template","ctx_r4","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_1_Template","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_ng_container_2_Template","ctx_r1","isautomatic","CoreCourseModuleCompletionComponent_ng_container_0_ion_button_2_Template_ion_button_click_0_listener","_r20","ctx_r19","CoreCourseModuleCompletionComponent_ng_container_0_ng_container_1_Template","CoreCourseModuleCompletionComponent_ng_container_0_ion_button_2_Template","ctx_r0","istrackeduser","CoreCourseModuleCompletionComponent","constructor","showCompletionConditions","showManualCompletion","showCompletionInfo","ngOnInit","_this$completion$deta","hasConditions","details","length","completionObserver","on","MANUAL_COMPLETION_CHANGED","data","cmid","calculateData","completionChanged","emit","_this","_asyncToGenerator","completionStatus","tracking","COMPLETION_TRACKING_NONE","undefined","state","COMPLETION_INCOMPLETE","COMPLETION_COMPLETE_FAIL","overrideby","fullName","getUserFullNameWithDefault","courseId","setByData","$a","activityname","moduleName","setby","setByLangKey","instant","langKey","event","_this2","stopPropagation","preventDefault","target","tagName","parentElement","openPopover","component","componentProps","changeManualCompletion","trigger","ngOnChanges","changes","ngOnDestroy","_this$completionObser","off","t","selectors","inputs","features","ɵɵInheritDefinitionFeature","ɵɵNgOnChangesFeature","decls","vars","consts","template","CoreCourseModuleCompletionComponent_Template","rf","ctx","CoreCourseModuleCompletionComponent_ng_container_0_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-completion/module-completion.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/components/module-completion/core-course-module-completion.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Input, OnChanges, OnDestroy, OnInit, SimpleChange } from '@angular/core';\n\nimport { CoreCourseModuleCompletionBaseComponent } from '@features/course/classes/module-completion';\nimport {\n    CoreCourseModuleCompletionStatus,\n    CoreCourseModuleCompletionTracking,\n} from '@features/course/services/course';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCourseModuleCompletionDetailsComponent } from '../module-completion-details/module-completion-details';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreUser } from '@features/user/services/user';\nimport { Translate } from '@singletons';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\n\n/**\n * Component to handle activity completion. It shows a checkbox with the current status, and allows manually changing\n * the completion if it's allowed.\n *\n * Example usage:\n *\n * <core-course-module-completion [completion]=\"module.completiondata\" [moduleName]=\"module.name\"\n *     (completionChanged)=\"completionChanged()\"></core-course-module-completion>\n */\n@Component({\n    selector: 'core-course-module-completion',\n    templateUrl: 'core-course-module-completion.html',\n    styleUrls: ['module-completion.scss'],\n})\nexport class CoreCourseModuleCompletionComponent\n    extends CoreCourseModuleCompletionBaseComponent\n    implements OnInit, OnChanges, OnDestroy {\n\n    @Input() showCompletionConditions = false; // Whether to show activity completion conditions.\n    @Input() showManualCompletion = false; // Whether to show manual completion.\n\n    completed = false;\n    accessibleDescription: string | null = null;\n    showCompletionInfo = false;\n    protected completionObserver?: CoreEventObserver;\n\n    /**\n     * @inheritdoc\n     */\n    ngOnInit(): void {\n        if (!this.completion) {\n            return;\n        }\n\n        const hasConditions = !this.completion.isautomatic || (this.completion.details?.length || 0) > 0;\n        this.showCompletionInfo = hasConditions && (this.showCompletionConditions || this.showManualCompletion);\n        if (!this.showCompletionInfo) {\n            return;\n        }\n\n        if (!this.completion.isautomatic && this.completion.istrackeduser) {\n            this.completionObserver = CoreEvents.on(CoreEvents.MANUAL_COMPLETION_CHANGED, (data) => {\n                if (!this.completion || this.completion.cmid != data.completion.cmid) {\n                    return;\n                }\n\n                this.completion = data.completion;\n                this.calculateData();\n                this.completionChanged.emit(this.completion);\n            });\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async calculateData(): Promise<void> {\n        if (!this.completion || !this.completion.istrackeduser) {\n            return;\n        }\n\n        const completionStatus = this.completion.tracking == CoreCourseModuleCompletionTracking.COMPLETION_TRACKING_NONE\n            ? undefined\n            : this.completion.state;\n\n        this.completed = completionStatus !== CoreCourseModuleCompletionStatus.COMPLETION_INCOMPLETE &&\n            completionStatus !== CoreCourseModuleCompletionStatus.COMPLETION_COMPLETE_FAIL;\n\n        if (!this.completion.isautomatic) {\n            // Set an accessible description for manual completions with overridden completion state.\n            if (this.completion.overrideby) {\n                const fullName = await CoreUser.getUserFullNameWithDefault(this.completion.overrideby, this.completion.courseId);\n\n                const setByData = {\n                    $a: {\n                        activityname: this.moduleName,\n                        setby: fullName,\n                    },\n                };\n                const setByLangKey = this.completion.state ? 'completion_setby:manual:done' : 'completion_setby:manual:markdone';\n                this.accessibleDescription = Translate.instant('core.course.' + setByLangKey, setByData);\n            } else {\n                const langKey = this.completion.state ? 'completion_manual:aria:done' : 'completion_manual:aria:markdone';\n                this.accessibleDescription = Translate.instant('core.course.' + langKey, { $a: this.moduleName });\n            }\n        }\n    }\n\n    /**\n     * Completion clicked.\n     *\n     * @param event The click event.\n     */\n    async completionClicked(event: Event): Promise<void> {\n        if (!this.completion || !this.showCompletionInfo) {\n            return;\n        }\n\n        event.stopPropagation();\n        event.preventDefault();\n\n        if (this.completion.isautomatic || !this.completion.istrackeduser) {\n            // Fake clicked element to correct position of the popover.\n            let target: HTMLElement | null = event.target as HTMLElement;\n            if (target && target.tagName !== 'ION-BUTTON') {\n                target = target.parentElement;\n            }\n\n            CoreDomUtils.openPopover({\n                component: CoreCourseModuleCompletionDetailsComponent,\n                componentProps: {\n                    completion: this.completion,\n                },\n                event: { target } as Event,\n            });\n        } else {\n            await CoreCourseHelper.changeManualCompletion(this.completion);\n\n            CoreEvents.trigger(CoreEvents.MANUAL_COMPLETION_CHANGED, { completion: this.completion });\n\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnChanges(changes: { [name: string]: SimpleChange }): void {\n        if (changes.completion && this.completion && this.completion.istrackeduser) {\n            this.calculateData();\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.completionObserver?.off();\n    }\n\n}\n","<ng-container *ngIf=\"showCompletionInfo && completion\">\n    <ng-container *ngIf=\"completion.istrackeduser\">\n        <ng-container *ngIf=\"completion.isautomatic\">\n            <ion-button class=\"completioninfo completion_incomplete chip\" *ngIf=\"!completed\" fill=\"outline\"\n                (click)=\"completionClicked($event)\">\n                {{ 'core.course.todo' | translate }}\n                <div class=\"select-icon\" role=\"presentation\" aria-hidden=\"true\">\n                    <div class=\"select-icon-inner\"></div>\n                </div>\n            </ion-button>\n\n            <ion-button class=\"completioninfo completion_complete chip\" color=\"success\" (click)=\"completionClicked($event)\"\n                *ngIf=\"completed\">\n                <ion-icon name=\"fas-check\" slot=\"start\" aria-hidden=\"true\" />\n                {{'core.course.done' | translate }}\n                <div class=\"select-icon\" role=\"presentation\" aria-hidden=\"true\">\n                    <div class=\"select-icon-inner\"></div>\n                </div>\n            </ion-button>\n        </ng-container>\n\n        <ng-container *ngIf=\"!completion.isautomatic\">\n            <ion-button *ngIf=\"completed\" color=\"success\" [attr.aria-label]=\"accessibleDescription\" (click)=\"completionClicked($event)\"\n                class=\"completioninfo completion_complete chip\">\n                <ion-icon name=\"fas-check\" slot=\"start\" aria-hidden=\"true\" />\n                {{ 'core.course.completion_manual:done' | translate }}\n                <ion-icon *ngIf=\"completion.offline\" name=\"fas-arrows-rotate\"\n                    [attr.aria-label]=\"'core.course.manualcompletionnotsynced' | translate\" slot=\"end\" />\n            </ion-button>\n            <ion-button *ngIf=\"!completed\" fill=\"outline\" [attr.aria-label]=\"accessibleDescription\" (click)=\"completionClicked($event)\"\n                class=\"completioninfo completion_incomplete chip\">\n                {{ 'core.course.completion_manual:markdone' | translate }}\n                <ion-icon *ngIf=\"completion.offline\" name=\"fas-arrows-rotate\"\n                    [attr.aria-label]=\"'core.course.manualcompletionnotsynced' | translate\" slot=\"end\" />\n            </ion-button>\n        </ng-container>\n    </ng-container>\n\n    <ion-button *ngIf=\"!completion.istrackeduser\" fill=\"outline\" class=\"chip\" (click)=\"completionClicked($event)\">\n        {{ 'core.course.completionmenuitem' | translate }}\n        <div class=\"select-icon\" role=\"presentation\" aria-hidden=\"true\">\n            <div class=\"select-icon-inner\"></div>\n        </div>\n    </ion-button>\n</ng-container>\n"],"mappings":";;AAgBA,SAASA,uCAAuC,QAAQ,4CAA4C;AACpG,SACIC,gCAAgC,EAChCC,kCAAkC,QAC/B,kCAAkC;AACzC,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,0CAA0C,QAAQ,wDAAwD;AACnH,SAASC,gBAAgB,QAAQ,yCAAyC;AAC1E,SAASC,QAAQ,QAAQ,8BAA8B;AACvD,SAASC,SAAS,QAAQ,aAAa;AACvC,SAA4BC,UAAU,QAAQ,oBAAoB;;;;;;;;;;ICvBtDC,EAAA,CAAAC,cAAA,oBACwC;IAApCD,EAAA,CAAAE,UAAA,mBAAAC,mIAAAC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAP,EAAA,CAAAQ,aAAA;MAAA,OAASR,EAAA,CAAAS,WAAA,CAAAF,MAAA,CAAAG,iBAAA,CAAAN,MAAA,CAAyB;IAAA,EAAC;IACnCJ,EAAA,CAAAW,MAAA,GACA;;IAAAX,EAAA,CAAAC,cAAA,aAAgE;IAC5DD,EAAA,CAAAY,SAAA,aAAqC;IACzCZ,EAAA,CAAAa,YAAA,EAAM;;;IAHNb,EAAA,CAAAc,SAAA,GACA;IADAd,EAAA,CAAAe,kBAAA,MAAAf,EAAA,CAAAgB,WAAA,gCACA;;;;;;IAKJhB,EAAA,CAAAC,cAAA,oBACsB;IADsDD,EAAA,CAAAE,UAAA,mBAAAe,mIAAAb,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAa,IAAA;MAAA,MAAAC,MAAA,GAAAnB,EAAA,CAAAQ,aAAA;MAAA,OAASR,EAAA,CAAAS,WAAA,CAAAU,MAAA,CAAAT,iBAAA,CAAAN,MAAA,CAAyB;IAAA,EAAC;IAE3GJ,EAAA,CAAAY,SAAA,kBAA6D;IAC7DZ,EAAA,CAAAW,MAAA,GACA;;IAAAX,EAAA,CAAAC,cAAA,aAAgE;IAC5DD,EAAA,CAAAY,SAAA,aAAqC;IACzCZ,EAAA,CAAAa,YAAA,EAAM;;;IAHNb,EAAA,CAAAc,SAAA,GACA;IADAd,EAAA,CAAAe,kBAAA,MAAAf,EAAA,CAAAgB,WAAA,gCACA;;;;;IAbRhB,EAAA,CAAAoB,uBAAA,GAA6C;IACzCpB,EAAA,CAAAqB,UAAA,IAAAC,sGAAA,wBAMa;IAEbtB,EAAA,CAAAqB,UAAA,IAAAE,sGAAA,wBAOa;IACjBvB,EAAA,CAAAwB,qBAAA,EAAe;;;;IAhBoDxB,EAAA,CAAAc,SAAA,GAAgB;IAAhBd,EAAA,CAAAyB,UAAA,UAAAC,MAAA,CAAAC,SAAA,CAAgB;IAS1E3B,EAAA,CAAAc,SAAA,GAAe;IAAfd,EAAA,CAAAyB,UAAA,SAAAC,MAAA,CAAAC,SAAA,CAAe;;;;;IAchB3B,EAAA,CAAAY,SAAA,mBACyF;;;;IAArFZ,EAAA,CAAA4B,WAAA,eAAA5B,EAAA,CAAAgB,WAAA,gDAAuE;;;;;;IAL/EhB,EAAA,CAAAC,cAAA,oBACoD;IADoCD,EAAA,CAAAE,UAAA,mBAAA2B,mIAAAzB,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAyB,IAAA;MAAA,MAAAC,OAAA,GAAA/B,EAAA,CAAAQ,aAAA;MAAA,OAASR,EAAA,CAAAS,WAAA,CAAAsB,OAAA,CAAArB,iBAAA,CAAAN,MAAA,CAAyB;IAAA,EAAC;IAEvHJ,EAAA,CAAAY,SAAA,kBAA6D;IAC7DZ,EAAA,CAAAW,MAAA,GACA;;IAAAX,EAAA,CAAAqB,UAAA,IAAAW,iHAAA,uBACyF;IAC7FhC,EAAA,CAAAa,YAAA,EAAa;;;;IANiCb,EAAA,CAAA4B,WAAA,eAAAK,OAAA,CAAAC,qBAAA,CAAyC;IAGnFlC,EAAA,CAAAc,SAAA,GACA;IADAd,EAAA,CAAAe,kBAAA,MAAAf,EAAA,CAAAgB,WAAA,kDACA;IAAWhB,EAAA,CAAAc,SAAA,GAAwB;IAAxBd,EAAA,CAAAyB,UAAA,SAAAQ,OAAA,CAAAE,UAAA,CAAAC,OAAA,CAAwB;;;;;IAMnCpC,EAAA,CAAAY,SAAA,mBACyF;;;;IAArFZ,EAAA,CAAA4B,WAAA,eAAA5B,EAAA,CAAAgB,WAAA,gDAAuE;;;;;;IAJ/EhB,EAAA,CAAAC,cAAA,oBACsD;IADkCD,EAAA,CAAAE,UAAA,mBAAAmC,mIAAAjC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAiC,IAAA;MAAA,MAAAC,OAAA,GAAAvC,EAAA,CAAAQ,aAAA;MAAA,OAASR,EAAA,CAAAS,WAAA,CAAA8B,OAAA,CAAA7B,iBAAA,CAAAN,MAAA,CAAyB;IAAA,EAAC;IAEvHJ,EAAA,CAAAW,MAAA,GACA;;IAAAX,EAAA,CAAAqB,UAAA,IAAAmB,iHAAA,uBACyF;IAC7FxC,EAAA,CAAAa,YAAA,EAAa;;;;IALiCb,EAAA,CAAA4B,WAAA,eAAAa,OAAA,CAAAP,qBAAA,CAAyC;IAEnFlC,EAAA,CAAAc,SAAA,GACA;IADAd,EAAA,CAAAe,kBAAA,MAAAf,EAAA,CAAAgB,WAAA,sDACA;IAAWhB,EAAA,CAAAc,SAAA,GAAwB;IAAxBd,EAAA,CAAAyB,UAAA,SAAAgB,OAAA,CAAAN,UAAA,CAAAC,OAAA,CAAwB;;;;;IAX3CpC,EAAA,CAAAoB,uBAAA,GAA8C;IAC1CpB,EAAA,CAAAqB,UAAA,IAAAqB,sGAAA,wBAMa;IACb1C,EAAA,CAAAqB,UAAA,IAAAsB,sGAAA,yBAKa;IACjB3C,EAAA,CAAAwB,qBAAA,EAAe;;;;IAbExB,EAAA,CAAAc,SAAA,GAAe;IAAfd,EAAA,CAAAyB,UAAA,SAAAmB,MAAA,CAAAjB,SAAA,CAAe;IAOf3B,EAAA,CAAAc,SAAA,GAAgB;IAAhBd,EAAA,CAAAyB,UAAA,UAAAmB,MAAA,CAAAjB,SAAA,CAAgB;;;;;IA5BrC3B,EAAA,CAAAoB,uBAAA,GAA+C;IAC3CpB,EAAA,CAAAqB,UAAA,IAAAwB,yFAAA,0BAiBe;IAEf7C,EAAA,CAAAqB,UAAA,IAAAyB,yFAAA,0BAce;IACnB9C,EAAA,CAAAwB,qBAAA,EAAe;;;;IAlCIxB,EAAA,CAAAc,SAAA,GAA4B;IAA5Bd,EAAA,CAAAyB,UAAA,SAAAsB,MAAA,CAAAZ,UAAA,CAAAa,WAAA,CAA4B;IAmB5BhD,EAAA,CAAAc,SAAA,GAA6B;IAA7Bd,EAAA,CAAAyB,UAAA,UAAAsB,MAAA,CAAAZ,UAAA,CAAAa,WAAA,CAA6B;;;;;;IAiBhDhD,EAAA,CAAAC,cAAA,qBAA8G;IAApCD,EAAA,CAAAE,UAAA,mBAAA+C,qGAAA7C,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAA6C,IAAA;MAAA,MAAAC,OAAA,GAAAnD,EAAA,CAAAQ,aAAA;MAAA,OAASR,EAAA,CAAAS,WAAA,CAAA0C,OAAA,CAAAzC,iBAAA,CAAAN,MAAA,CAAyB;IAAA,EAAC;IACzGJ,EAAA,CAAAW,MAAA,GACA;;IAAAX,EAAA,CAAAC,cAAA,aAAgE;IAC5DD,EAAA,CAAAY,SAAA,aAAqC;IACzCZ,EAAA,CAAAa,YAAA,EAAM;;;IAHNb,EAAA,CAAAc,SAAA,GACA;IADAd,EAAA,CAAAe,kBAAA,MAAAf,EAAA,CAAAgB,WAAA,8CACA;;;;;IAxCRhB,EAAA,CAAAoB,uBAAA,GAAuD;IACnDpB,EAAA,CAAAqB,UAAA,IAAA+B,0EAAA,0BAmCe;IAEfpD,EAAA,CAAAqB,UAAA,IAAAgC,wEAAA,wBAKa;IACjBrD,EAAA,CAAAwB,qBAAA,EAAe;;;;IA3CIxB,EAAA,CAAAc,SAAA,GAA8B;IAA9Bd,EAAA,CAAAyB,UAAA,SAAA6B,MAAA,CAAAnB,UAAA,CAAAoB,aAAA,CAA8B;IAqChCvD,EAAA,CAAAc,SAAA,GAA+B;IAA/Bd,EAAA,CAAAyB,UAAA,UAAA6B,MAAA,CAAAnB,UAAA,CAAAoB,aAAA,CAA+B;;;ADVhD;;;;;;;;;AAcA,OAAM,MAAOC,mCACT,SAAQjE,uCAAuC;EANnDkE,YAAA;;IASa,KAAAC,wBAAwB,GAAG,KAAK,CAAC,CAAC;IAClC,KAAAC,oBAAoB,GAAG,KAAK,CAAC,CAAC;IAEvC,KAAAhC,SAAS,GAAG,KAAK;IACjB,KAAAO,qBAAqB,GAAkB,IAAI;IAC3C,KAAA0B,kBAAkB,GAAG,KAAK;;EAG1B;;;EAGAC,QAAQA,CAAA;IAAA,IAAAC,qBAAA;IACJ,IAAI,CAAC,IAAI,CAAC3B,UAAU,EAAE;MAClB;;IAGJ,MAAM4B,aAAa,GAAG,CAAC,IAAI,CAAC5B,UAAU,CAACa,WAAW,IAAI,CAAC,EAAAc,qBAAA,OAAI,CAAC3B,UAAU,CAAC6B,OAAO,cAAAF,qBAAA,uBAAvBA,qBAAA,CAAyBG,MAAM,KAAI,CAAC,IAAI,CAAC;IAChG,IAAI,CAACL,kBAAkB,GAAGG,aAAa,KAAK,IAAI,CAACL,wBAAwB,IAAI,IAAI,CAACC,oBAAoB,CAAC;IACvG,IAAI,CAAC,IAAI,CAACC,kBAAkB,EAAE;MAC1B;;IAGJ,IAAI,CAAC,IAAI,CAACzB,UAAU,CAACa,WAAW,IAAI,IAAI,CAACb,UAAU,CAACoB,aAAa,EAAE;MAC/D,IAAI,CAACW,kBAAkB,GAAGnE,UAAU,CAACoE,EAAE,CAACpE,UAAU,CAACqE,yBAAyB,EAAGC,IAAI,IAAI;QACnF,IAAI,CAAC,IAAI,CAAClC,UAAU,IAAI,IAAI,CAACA,UAAU,CAACmC,IAAI,IAAID,IAAI,CAAClC,UAAU,CAACmC,IAAI,EAAE;UAClE;;QAGJ,IAAI,CAACnC,UAAU,GAAGkC,IAAI,CAAClC,UAAU;QACjC,IAAI,CAACoC,aAAa,EAAE;QACpB,IAAI,CAACC,iBAAiB,CAACC,IAAI,CAAC,IAAI,CAACtC,UAAU,CAAC;MAChD,CAAC,CAAC;;EAEV;EAEA;;;EAGgBoC,aAAaA,CAAA;IAAA,IAAAG,KAAA;IAAA,OAAAC,iBAAA;MACzB,IAAI,CAACD,KAAI,CAACvC,UAAU,IAAI,CAACuC,KAAI,CAACvC,UAAU,CAACoB,aAAa,EAAE;QACpD;;MAGJ,MAAMqB,gBAAgB,GAAGF,KAAI,CAACvC,UAAU,CAAC0C,QAAQ,IAAIpF,kCAAkC,CAACqF,wBAAwB,GAC1GC,SAAS,GACTL,KAAI,CAACvC,UAAU,CAAC6C,KAAK;MAE3BN,KAAI,CAAC/C,SAAS,GAAGiD,gBAAgB,KAAKpF,gCAAgC,CAACyF,qBAAqB,IACxFL,gBAAgB,KAAKpF,gCAAgC,CAAC0F,wBAAwB;MAElF,IAAI,CAACR,KAAI,CAACvC,UAAU,CAACa,WAAW,EAAE;QAC9B;QACA,IAAI0B,KAAI,CAACvC,UAAU,CAACgD,UAAU,EAAE;UAC5B,MAAMC,QAAQ,SAASvF,QAAQ,CAACwF,0BAA0B,CAACX,KAAI,CAACvC,UAAU,CAACgD,UAAU,EAAET,KAAI,CAACvC,UAAU,CAACmD,QAAQ,CAAC;UAEhH,MAAMC,SAAS,GAAG;YACdC,EAAE,EAAE;cACAC,YAAY,EAAEf,KAAI,CAACgB,UAAU;cAC7BC,KAAK,EAAEP;;WAEd;UACD,MAAMQ,YAAY,GAAGlB,KAAI,CAACvC,UAAU,CAAC6C,KAAK,GAAG,8BAA8B,GAAG,kCAAkC;UAChHN,KAAI,CAACxC,qBAAqB,GAAGpC,SAAS,CAAC+F,OAAO,CAAC,cAAc,GAAGD,YAAY,EAAEL,SAAS,CAAC;SAC3F,MAAM;UACH,MAAMO,OAAO,GAAGpB,KAAI,CAACvC,UAAU,CAAC6C,KAAK,GAAG,6BAA6B,GAAG,iCAAiC;UACzGN,KAAI,CAACxC,qBAAqB,GAAGpC,SAAS,CAAC+F,OAAO,CAAC,cAAc,GAAGC,OAAO,EAAE;YAAEN,EAAE,EAAEd,KAAI,CAACgB;UAAU,CAAE,CAAC;;;IAExG;EACL;EAEA;;;;;EAKMhF,iBAAiBA,CAACqF,KAAY;IAAA,IAAAC,MAAA;IAAA,OAAArB,iBAAA;MAChC,IAAI,CAACqB,MAAI,CAAC7D,UAAU,IAAI,CAAC6D,MAAI,CAACpC,kBAAkB,EAAE;QAC9C;;MAGJmC,KAAK,CAACE,eAAe,EAAE;MACvBF,KAAK,CAACG,cAAc,EAAE;MAEtB,IAAIF,MAAI,CAAC7D,UAAU,CAACa,WAAW,IAAI,CAACgD,MAAI,CAAC7D,UAAU,CAACoB,aAAa,EAAE;QAC/D;QACA,IAAI4C,MAAM,GAAuBJ,KAAK,CAACI,MAAqB;QAC5D,IAAIA,MAAM,IAAIA,MAAM,CAACC,OAAO,KAAK,YAAY,EAAE;UAC3CD,MAAM,GAAGA,MAAM,CAACE,aAAa;;QAGjC3G,YAAY,CAAC4G,WAAW,CAAC;UACrBC,SAAS,EAAE5G,0CAA0C;UACrD6G,cAAc,EAAE;YACZrE,UAAU,EAAE6D,MAAI,CAAC7D;WACpB;UACD4D,KAAK,EAAE;YAAEI;UAAM;SAClB,CAAC;OACL,MAAM;QACH,MAAMvG,gBAAgB,CAAC6G,sBAAsB,CAACT,MAAI,CAAC7D,UAAU,CAAC;QAE9DpC,UAAU,CAAC2G,OAAO,CAAC3G,UAAU,CAACqE,yBAAyB,EAAE;UAAEjC,UAAU,EAAE6D,MAAI,CAAC7D;QAAU,CAAE,CAAC;;IAE5F;EACL;EAEA;;;EAGAwE,WAAWA,CAACC,OAAyC;IACjD,IAAIA,OAAO,CAACzE,UAAU,IAAI,IAAI,CAACA,UAAU,IAAI,IAAI,CAACA,UAAU,CAACoB,aAAa,EAAE;MACxE,IAAI,CAACgB,aAAa,EAAE;;EAE5B;EAEA;;;EAGAsC,WAAWA,CAAA;IAAA,IAAAC,qBAAA;IACP,CAAAA,qBAAA,OAAI,CAAC5C,kBAAkB,cAAA4C,qBAAA,eAAvBA,qBAAA,CAAyBC,GAAG,EAAE;EAClC;;SA3HSvD,mCACT;;;;6IADSA,MAAmC,IAAAwD,CAAA,IAAnCxD,MAAmC;EAAA;AAAA;;QAAnCA,MAAmC;EAAAyD,SAAA;EAAAC,MAAA;IAAAxD,wBAAA;IAAAC,oBAAA;EAAA;EAAAwD,QAAA,GAAAnH,EAAA,CAAAoH,0BAAA,EAAApH,EAAA,CAAAqH,oBAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,6CAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MC1ChD3H,EAAA,CAAAqB,UAAA,IAAAwG,2DAAA,0BA4Ce;;;MA5CA7H,EAAA,CAAAyB,UAAA,SAAAmG,GAAA,CAAAhE,kBAAA,IAAAgE,GAAA,CAAAzF,UAAA,CAAsC"},"metadata":{},"sourceType":"module","externalDependencies":[]}