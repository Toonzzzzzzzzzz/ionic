{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreUserDelegateService, CoreUserDelegateContext } from '@features/user/services/user-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { makeSingleton } from '@singletons';\nimport { AddonCourseCompletion } from '../coursecompletion';\nimport * as i0 from \"@angular/core\";\n/**\n * Profile course completion handler.\n */\nexport class AddonCourseCompletionUserHandlerService {\n  constructor() {\n    this.name = 'AddonCourseCompletion:viewCompletion';\n    this.type = CoreUserDelegateService.TYPE_NEW_PAGE;\n    this.priority = 350;\n    this.cacheEnabled = true;\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return AddonCourseCompletion.isPluginViewEnabled();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabledForContext(context, courseId) {\n    return _asyncToGenerator(function* () {\n      if (context !== CoreUserDelegateContext.COURSE) {\n        return false;\n      }\n      return AddonCourseCompletion.isPluginViewEnabledForCourse(courseId);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabledForUser(user, context, contextId) {\n    return _asyncToGenerator(function* () {\n      return AddonCourseCompletion.isPluginViewEnabledForUser(contextId, user.id);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getDisplayData() {\n    return {\n      icon: 'fas-list-check',\n      title: 'addon.coursecompletion.coursecompletion',\n      class: 'addon-coursecompletion-handler',\n      action: (event, user, context, contextId) => {\n        event.preventDefault();\n        event.stopPropagation();\n        CoreNavigator.navigateToSitePath('/coursecompletion', {\n          params: {\n            courseId: contextId,\n            userId: user.id\n          }\n        });\n      }\n    };\n  }\n}\n_class = AddonCourseCompletionUserHandlerService;\n_class.ɵfac = function AddonCourseCompletionUserHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonCourseCompletionUserHandler = makeSingleton(AddonCourseCompletionUserHandlerService);","map":{"version":3,"names":["CoreUserDelegateService","CoreUserDelegateContext","CoreNavigator","makeSingleton","AddonCourseCompletion","AddonCourseCompletionUserHandlerService","constructor","name","type","TYPE_NEW_PAGE","priority","cacheEnabled","isEnabled","_asyncToGenerator","isPluginViewEnabled","isEnabledForContext","context","courseId","COURSE","isPluginViewEnabledForCourse","isEnabledForUser","user","contextId","isPluginViewEnabledForUser","id","getDisplayData","icon","title","class","action","event","preventDefault","stopPropagation","navigateToSitePath","params","userId","factory","ɵfac","providedIn","AddonCourseCompletionUserHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/coursecompletion/services/handlers/user.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreUserProfile } from '@features/user/services/user';\nimport {\n    CoreUserProfileHandler,\n    CoreUserDelegateService,\n    CoreUserProfileHandlerData,\n    CoreUserDelegateContext,\n} from '@features/user/services/user-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { makeSingleton } from '@singletons';\nimport { AddonCourseCompletion } from '../coursecompletion';\n\n/**\n * Profile course completion handler.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonCourseCompletionUserHandlerService implements CoreUserProfileHandler {\n\n    name = 'AddonCourseCompletion:viewCompletion';\n    type = CoreUserDelegateService.TYPE_NEW_PAGE;\n    priority = 350;\n    cacheEnabled = true;\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        return AddonCourseCompletion.isPluginViewEnabled();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabledForContext(context: CoreUserDelegateContext, courseId: number): Promise<boolean> {\n        if (context !== CoreUserDelegateContext.COURSE) {\n            return false;\n        }\n\n        return AddonCourseCompletion.isPluginViewEnabledForCourse(courseId);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabledForUser(user: CoreUserProfile, context: CoreUserDelegateContext,  contextId: number): Promise<boolean> {\n        return AddonCourseCompletion.isPluginViewEnabledForUser(contextId, user.id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getDisplayData(): CoreUserProfileHandlerData {\n        return {\n            icon: 'fas-list-check',\n            title: 'addon.coursecompletion.coursecompletion',\n            class: 'addon-coursecompletion-handler',\n            action: (event, user, context, contextId): void => {\n                event.preventDefault();\n                event.stopPropagation();\n                CoreNavigator.navigateToSitePath('/coursecompletion', {\n                    params: { courseId: contextId, userId: user.id },\n                });\n            },\n        };\n    }\n\n}\nexport const AddonCourseCompletionUserHandler = makeSingleton(AddonCourseCompletionUserHandlerService);\n"],"mappings":";;AAgBA,SAEIA,uBAAuB,EAEvBC,uBAAuB,QACpB,uCAAuC;AAC9C,SAASC,aAAa,QAAQ,qBAAqB;AACnD,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,qBAAqB,QAAQ,qBAAqB;;AAE3D;;;AAIA,OAAM,MAAOC,uCAAuC;EADpDC,YAAA;IAGI,KAAAC,IAAI,GAAG,sCAAsC;IAC7C,KAAAC,IAAI,GAAGR,uBAAuB,CAACS,aAAa;IAC5C,KAAAC,QAAQ,GAAG,GAAG;IACd,KAAAC,YAAY,GAAG,IAAI;;EAEnB;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAOT,qBAAqB,CAACU,mBAAmB,EAAE;IAAC;EACvD;EAEA;;;EAGMC,mBAAmBA,CAACC,OAAgC,EAAEC,QAAgB;IAAA,OAAAJ,iBAAA;MACxE,IAAIG,OAAO,KAAKf,uBAAuB,CAACiB,MAAM,EAAE;QAC5C,OAAO,KAAK;;MAGhB,OAAOd,qBAAqB,CAACe,4BAA4B,CAACF,QAAQ,CAAC;IAAC;EACxE;EAEA;;;EAGMG,gBAAgBA,CAACC,IAAqB,EAAEL,OAAgC,EAAGM,SAAiB;IAAA,OAAAT,iBAAA;MAC9F,OAAOT,qBAAqB,CAACmB,0BAA0B,CAACD,SAAS,EAAED,IAAI,CAACG,EAAE,CAAC;IAAC;EAChF;EAEA;;;EAGAC,cAAcA,CAAA;IACV,OAAO;MACHC,IAAI,EAAE,gBAAgB;MACtBC,KAAK,EAAE,yCAAyC;MAChDC,KAAK,EAAE,gCAAgC;MACvCC,MAAM,EAAEA,CAACC,KAAK,EAAET,IAAI,EAAEL,OAAO,EAAEM,SAAS,KAAU;QAC9CQ,KAAK,CAACC,cAAc,EAAE;QACtBD,KAAK,CAACE,eAAe,EAAE;QACvB9B,aAAa,CAAC+B,kBAAkB,CAAC,mBAAmB,EAAE;UAClDC,MAAM,EAAE;YAAEjB,QAAQ,EAAEK,SAAS;YAAEa,MAAM,EAAEd,IAAI,CAACG;UAAE;SACjD,CAAC;MACN;KACH;EACL;;SAhDSnB,uCAAuC;;mBAAvCA,MAAuC;AAAA;;SAAvCA,MAAuC;EAAA+B,OAAA,EAAvC/B,MAAuC,CAAAgC,IAAA;EAAAC,UAAA,EAD1B;AAAM;AAoDhC,OAAO,MAAMC,gCAAgC,GAAGpC,aAAa,CAACE,uCAAuC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}