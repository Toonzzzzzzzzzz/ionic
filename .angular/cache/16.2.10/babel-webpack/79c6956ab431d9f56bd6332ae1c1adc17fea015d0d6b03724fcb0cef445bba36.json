{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreSites } from '@services/sites';\nimport { AddonBlockTimeline } from '../../services/timeline';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCoursesHelper } from '@features/courses/services/courses-helper';\nimport { CoreCourses } from '@features/courses/services/courses';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { BehaviorSubject, combineLatest, of } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, share, tap, mergeAll } from 'rxjs/operators';\nimport { AddonBlockTimelineSection } from '@addons/block/timeline/classes/section';\nimport { FormControl } from '@angular/forms';\nimport { formControlValue, resolved } from '@/core/utils/rxjs';\nimport { CoreLogger } from '@singletons/logger';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../../core/components/empty-box/empty-box\";\nimport * as i3 from \"../../../../../core/components/loading/loading\";\nimport * as i4 from \"../../../../../core/components/combobox/combobox\";\nimport * as i5 from \"@angular/forms\";\nimport * as i6 from \"@ionic/angular\";\nimport * as i7 from \"../../../../../core/features/search/components/search-box/search-box\";\nimport * as i8 from \"../events/events\";\nimport * as i9 from \"@ngx-translate/core\";\nfunction AddonBlockTimelineComponent_ion_row_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-row\", 12)(1, \"ion-col\")(2, \"core-search-box\", 13);\n    i0.ɵɵlistener(\"onSubmit\", function AddonBlockTimelineComponent_ion_row_6_Template_core_search_box_onSubmit_2_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.searchChanged($event));\n    })(\"onClear\", function AddonBlockTimelineComponent_ion_row_6_Template_core_search_box_onClear_2_listener() {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.searchChanged(\"\"));\n    });\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(3, 2, \"addon.block_timeline.searchevents\"))(\"lengthCheck\", 2);\n  }\n}\nfunction AddonBlockTimelineComponent_ion_select_option_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r9 = ctx.$implicit;\n    const last_r10 = ctx.last;\n    i0.ɵɵproperty(\"value\", option_r9.value);\n    i0.ɵɵattribute(\"class\", \"ion-text-wrap\" + last_r10 ? \" core-select-option-border-bottom\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 3, option_r9.name), \" \");\n  }\n}\nfunction AddonBlockTimelineComponent_ion_select_option_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r11.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, option_r11.name), \" \");\n  }\n}\nfunction AddonBlockTimelineComponent_ion_col_16_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\", 16)(1, \"core-search-box\", 13);\n    i0.ɵɵlistener(\"onSubmit\", function AddonBlockTimelineComponent_ion_col_16_Template_core_search_box_onSubmit_1_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.searchChanged($event));\n    })(\"onClear\", function AddonBlockTimelineComponent_ion_col_16_Template_core_search_box_onClear_1_listener() {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.searchChanged(\"\"));\n    });\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(2, 2, \"addon.block_timeline.searchevents\"))(\"lengthCheck\", 2);\n  }\n}\nfunction AddonBlockTimelineComponent_ion_select_option_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r15 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r15.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 2, option_r15.name), \" \");\n  }\n}\nfunction AddonBlockTimelineComponent_ng_container_22_ng_container_1_addon_block_timeline_events_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"addon-block-timeline-events\", 20);\n    i0.ɵɵlistener(\"loadMore\", function AddonBlockTimelineComponent_ng_container_22_ng_container_1_addon_block_timeline_events_1_Template_addon_block_timeline_events_loadMore_0_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const section_r19 = i0.ɵɵnextContext().$implicit;\n      return i0.ɵɵresetView(section_r19.loadMore());\n    });\n    i0.ɵɵpipe(1, \"async\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r21 = ctx.ngIf;\n    const section_r19 = i0.ɵɵnextContext().$implicit;\n    const ctx_r20 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"events\", data_r21.events)(\"showInlineCourse\", i0.ɵɵpipeBind1(1, 5, ctx_r20.sort$) === ctx_r20.AddonBlockTimelineSort.ByDates)(\"canLoadMore\", data_r21.canLoadMore)(\"loadingMore\", data_r21.loadingMore)(\"course\", section_r19.course);\n  }\n}\nfunction AddonBlockTimelineComponent_ng_container_22_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonBlockTimelineComponent_ng_container_22_ng_container_1_addon_block_timeline_events_1_Template, 2, 7, \"addon-block-timeline-events\", 19);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const section_r19 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(2, 1, section_r19.data$));\n  }\n}\nfunction AddonBlockTimelineComponent_ng_container_22_core_empty_box_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 21);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"addon.block_timeline.noevents\"));\n  }\n}\nfunction AddonBlockTimelineComponent_ng_container_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonBlockTimelineComponent_ng_container_22_ng_container_1_Template, 3, 3, \"ng-container\", 17);\n    i0.ɵɵtemplate(2, AddonBlockTimelineComponent_ng_container_22_core_empty_box_2_Template, 2, 3, \"core-empty-box\", 18);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const sections_r16 = ctx.ngIf;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", sections_r16);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", sections_r16 && sections_r16.length === 0);\n  }\n}\n/**\n * Component to render a timeline block.\n */\nexport class AddonBlockTimelineComponent {\n  constructor() {\n    this.sort = new FormControl();\n    this.filter = new FormControl();\n    this.loaded = false;\n    this.courseIdsToInvalidate = [];\n    this.fetchContentDefaultError = 'Error getting timeline data.';\n    this.logger = CoreLogger.getInstance('AddonBlockTimelineComponent');\n    this.search$ = new BehaviorSubject(null);\n    this.initializeSort();\n    this.initializeFilter();\n    this.initializeSections();\n  }\n  get AddonBlockTimelineSort() {\n    return AddonBlockTimelineSort;\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const currentSite = CoreSites.getRequiredCurrentSite();\n      const [sort, filter, search] = yield Promise.all([currentSite.getLocalSiteConfig('AddonBlockTimelineSort', AddonBlockTimelineSort.ByDates), currentSite.getLocalSiteConfig('AddonBlockTimelineFilter', \"next30days\" /* AddonBlockTimelineFilter.Next30Days */), currentSite.isVersionGreaterEqualThan('4.0') ? '' : null]);\n      _this.sort.setValue(sort);\n      _this.filter.setValue(filter);\n      _this.search$.next(search);\n    })();\n  }\n  /**\n   * Sort changed.\n   *\n   * @param sort New sort.\n   */\n  sortChanged(sort) {\n    CoreSites.getRequiredCurrentSite().setLocalSiteConfig('AddonBlockTimelineSort', sort);\n  }\n  /**\n   * Filter changed.\n   *\n   * @param filter New filter.\n   */\n  filterChanged(filter) {\n    CoreSites.getRequiredCurrentSite().setLocalSiteConfig('AddonBlockTimelineFilter', filter);\n  }\n  /**\n   * Search text changed.\n   *\n   * @param search New search.\n   */\n  searchChanged(search) {\n    this.search$.next(search);\n  }\n  /**\n   * @inheritdoc\n   */\n  invalidateContent() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield CoreUtils.allPromises([AddonBlockTimeline.invalidateActionEventsByTimesort(), AddonBlockTimeline.invalidateActionEventsByCourses(), CoreCourses.invalidateUserCourses(), CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions(), CoreCourses.invalidateCoursesByField('ids', _this2.courseIdsToInvalidate.join(','))]);\n    })();\n  }\n  /**\n   * Initialize sort properties.\n   */\n  initializeSort() {\n    this.sort$ = formControlValue(this.sort);\n    this.sortOptions = Object.values(AddonBlockTimelineSort).map(value => ({\n      value,\n      name: `addon.block_timeline.${value}`\n    }));\n  }\n  /**\n   * Initialize filter properties.\n   */\n  initializeFilter() {\n    this.filter$ = formControlValue(this.filter);\n    this.statusFilterOptions = [{\n      value: \"all\" /* AddonBlockTimelineFilter.All */,\n      name: 'core.all'\n    }, {\n      value: \"overdue\" /* AddonBlockTimelineFilter.Overdue */,\n      name: 'addon.block_timeline.overdue'\n    }];\n    this.dateFilterOptions = [\"next7days\" /* AddonBlockTimelineFilter.Next7Days */, \"next30days\" /* AddonBlockTimelineFilter.Next30Days */, \"next3months\" /* AddonBlockTimelineFilter.Next3Months */, \"next6months\" /* AddonBlockTimelineFilter.Next6Months */].map(value => ({\n      value,\n      name: `addon.block_timeline.${value}`\n    }));\n  }\n  /**\n   * Initialize sections properties.\n   */\n  initializeSections() {\n    var _this3 = this;\n    const filtersRange = {\n      all: {\n        from: -14\n      },\n      overdue: {\n        from: -14,\n        to: 1\n      },\n      next7days: {\n        from: 0,\n        to: 7\n      },\n      next30days: {\n        from: 0,\n        to: 30\n      },\n      next3months: {\n        from: 0,\n        to: 90\n      },\n      next6months: {\n        from: 0,\n        to: 180\n      }\n    };\n    const sortValue = this.sort.valueChanges;\n    const courses = sortValue.pipe(distinctUntilChanged(), map( /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (sort) {\n        switch (sort) {\n          case AddonBlockTimelineSort.ByDates:\n            return [];\n          case AddonBlockTimelineSort.ByCourses:\n            return CoreCoursesHelper.getUserCoursesWithOptions();\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()), resolved(), map(courses => {\n      this.courseIdsToInvalidate = courses.map(course => course.id);\n      return courses;\n    }));\n    this.sections$ = combineLatest([this.filter$, sortValue, this.search$, courses]).pipe(map( /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator(function* ([filter, sort, search, courses]) {\n        const includeOverdue = filter === \"overdue\" /* AddonBlockTimelineFilter.Overdue */;\n        const dateRange = filtersRange[filter];\n        switch (sort) {\n          case AddonBlockTimelineSort.ByDates:\n            return _this3.getSectionsByDates(search, includeOverdue, dateRange);\n          case AddonBlockTimelineSort.ByCourses:\n            return _this3.getSectionsByCourse(search, includeOverdue, dateRange, courses);\n        }\n      });\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }()), resolved(), mergeAll(), catchError(error => {\n      // An error ocurred in the function, log the error and just resolve the observable so the workflow continues.\n      this.logger.error(error);\n      // Error getting data, fail.\n      CoreDomUtils.showErrorModalDefault(error, this.fetchContentDefaultError, true);\n      return of([]);\n    }), share(), tap(() => this.loaded = true));\n  }\n  /**\n   * Get sections sorted by dates.\n   *\n   * @param search Search string.\n   * @param overdue Whether to filter overdue events or not.\n   * @param dateRange Date range to filter events by.\n   * @returns Sections.\n   */\n  getSectionsByDates(search, overdue, dateRange) {\n    return _asyncToGenerator(function* () {\n      const section = new AddonBlockTimelineSection(search, overdue, dateRange);\n      yield section.loadMore();\n      return section.data$.pipe(map(({\n        events\n      }) => events.length > 0 ? [section] : []));\n    })();\n  }\n  /**\n   * Get sections sorted by courses.\n   *\n   * @param search Search string.\n   * @param overdue Whether to filter overdue events or not.\n   * @param dateRange Date range to filter events by.\n   * @param courses Courses.\n   * @returns Sections.\n   */\n  getSectionsByCourse(search, overdue, dateRange, courses) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      // Do not filter courses by date because they can contain activities due.\n      const courseIds = courses.map(course => course.id);\n      const gracePeriod = yield _this4.getCoursesGracePeriod();\n      const courseEvents = yield AddonBlockTimeline.getActionEventsByCourses(courseIds, search !== null && search !== void 0 ? search : '');\n      const sectionObservables = courses.filter(course => !course.hidden && !CoreCoursesHelper.isPastCourse(course, gracePeriod.after) && !CoreCoursesHelper.isFutureCourse(course, gracePeriod.after, gracePeriod.before) && courseEvents[course.id].events.length > 0).map(course => {\n        const section = new AddonBlockTimelineSection(search, overdue, dateRange, course, courseEvents[course.id].events, courseEvents[course.id].canLoadMore);\n        return section.data$.pipe(map(({\n          events\n        }) => events.length > 0 ? section : null));\n      });\n      if (sectionObservables.length === 0) {\n        return of([]);\n      }\n      return combineLatest(sectionObservables).pipe(map(sections => sections.filter(section => !!section)));\n    })();\n  }\n  /**\n   * Get courses grace period for the current site.\n   *\n   * @returns Courses grace period.\n   */\n  getCoursesGracePeriod() {\n    return _asyncToGenerator(function* () {\n      try {\n        const currentSite = CoreSites.getRequiredCurrentSite();\n        return {\n          before: parseInt(yield currentSite.getConfig('coursegraceperiodbefore'), 10),\n          after: parseInt(yield currentSite.getConfig('coursegraceperiodafter'), 10)\n        };\n      } catch (_unused) {\n        return {\n          before: 0,\n          after: 0\n        };\n      }\n    })();\n  }\n}\n/**\n * Sort options.\n */\n_class = AddonBlockTimelineComponent;\n_class.ɵfac = function AddonBlockTimelineComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-block-timeline\"]],\n  decls: 24,\n  vars: 25,\n  consts: [[3, \"sticky\"], [3, \"hideUntil\"], [\"class\", \"ion-hide-md-up addon-block-timeline-filter\", 4, \"ngIf\"], [1, \"ion-justify-content-between\", \"ion-align-items-center\", \"addon-block-timeline-filter\"], [\"size\", \"auto\"], [3, \"formControl\", \"onChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"disabled\", \"\", \"value\", \"disabled\", 1, \"ion-text-wrap\", \"core-select-option-title\"], [\"class\", \"ion-text-wrap\", 3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-hide-md-down\", 4, \"ngIf\"], [\"icon\", \"fas-arrow-down-short-wide\", 3, \"label\", \"formControl\", \"onChange\"], [4, \"ngIf\"], [1, \"ion-hide-md-up\", \"addon-block-timeline-filter\"], [\"autocorrect\", \"off\", \"spellcheck\", \"false\", \"searchArea\", \"AddonBlockTimeline\", 3, \"placeholder\", \"lengthCheck\", \"onSubmit\", \"onClear\"], [3, \"value\"], [1, \"ion-text-wrap\", 3, \"value\"], [1, \"ion-hide-md-down\"], [4, \"ngFor\", \"ngForOf\"], [\"image\", \"assets/img/icons/courses.svg\", 3, \"message\", 4, \"ngIf\"], [3, \"events\", \"showInlineCourse\", \"canLoadMore\", \"loadingMore\", \"course\", \"loadMore\", 4, \"ngIf\"], [3, \"events\", \"showInlineCourse\", \"canLoadMore\", \"loadingMore\", \"course\", \"loadMore\"], [\"image\", \"assets/img/icons/courses.svg\", 3, \"message\"]],\n  template: function AddonBlockTimelineComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-item-divider\", 0)(1, \"ion-label\")(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(5, \"core-loading\", 1);\n      i0.ɵɵtemplate(6, AddonBlockTimelineComponent_ion_row_6_Template, 4, 4, \"ion-row\", 2);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵelementStart(8, \"ion-row\", 3)(9, \"ion-col\", 4)(10, \"core-combobox\", 5);\n      i0.ɵɵlistener(\"onChange\", function AddonBlockTimelineComponent_Template_core_combobox_onChange_10_listener($event) {\n        return ctx.filterChanged($event);\n      });\n      i0.ɵɵtemplate(11, AddonBlockTimelineComponent_ion_select_option_11_Template, 3, 5, \"ion-select-option\", 6);\n      i0.ɵɵelementStart(12, \"ion-select-option\", 7);\n      i0.ɵɵtext(13);\n      i0.ɵɵpipe(14, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(15, AddonBlockTimelineComponent_ion_select_option_15_Template, 3, 4, \"ion-select-option\", 8);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(16, AddonBlockTimelineComponent_ion_col_16_Template, 3, 4, \"ion-col\", 9);\n      i0.ɵɵpipe(17, \"async\");\n      i0.ɵɵelementStart(18, \"ion-col\", 4)(19, \"core-combobox\", 10);\n      i0.ɵɵlistener(\"onChange\", function AddonBlockTimelineComponent_Template_core_combobox_onChange_19_listener($event) {\n        return ctx.sortChanged($event);\n      });\n      i0.ɵɵpipe(20, \"translate\");\n      i0.ɵɵtemplate(21, AddonBlockTimelineComponent_ion_select_option_21_Template, 3, 4, \"ion-select-option\", 8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(22, AddonBlockTimelineComponent_ng_container_22_Template, 3, 2, \"ng-container\", 11);\n      i0.ɵɵpipe(23, \"async\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"sticky\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 13, \"addon.block_timeline.pluginname\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(7, 15, ctx.search$) !== null);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"formControl\", ctx.filter);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.statusFilterOptions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(14, 17, \"addon.block_timeline.duedate\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.dateFilterOptions);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(17, 19, ctx.search$) !== null);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"label\", i0.ɵɵpipeBind1(20, 21, \"core.sortby\"))(\"formControl\", ctx.sort);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.sortOptions);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(23, 23, ctx.sections$));\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreEmptyBoxComponent, i3.CoreLoadingComponent, i4.CoreComboboxComponent, i5.NgControlStatus, i6.IonCol, i6.IonItemDivider, i6.IonLabel, i6.IonRow, i6.IonSelectOption, i5.FormControlDirective, i7.CoreSearchBoxComponent, i8.AddonBlockTimelineEventsComponent, i1.AsyncPipe, i9.TranslatePipe],\n  styles: [\"[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%] {\\n  margin: 8px;\\n  padding: 0;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   ion-col[_ngcontent-%COMP%] {\\n  padding: 0;\\n  margin-right: 2px;\\n  margin-left: 2px;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   core-combobox[_ngcontent-%COMP%]     ion-button {\\n  --border-width: 0;\\n  --a11y-min-target-size: 40px;\\n  margin: 0;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   .select-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   core-combobox[_ngcontent-%COMP%]     ion-button .select-icon {\\n  display: none;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   core-combobox[_ngcontent-%COMP%]     ion-button ion-icon {\\n  font-size: 20px;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   core-combobox[_ngcontent-%COMP%]     ion-select {\\n  margin: 0;\\n  --a11y-min-target-size: 40px;\\n}\\n[_nghost-%COMP%]   ion-row.addon-block-timeline-filter[_ngcontent-%COMP%]   core-search-box[_ngcontent-%COMP%] {\\n  padding: 0;\\n  margin: 0;\\n  --height: 40px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hZGRvbnMvYmxvY2svdGltZWxpbmUvY29tcG9uZW50cy90aW1lbGluZS90aW1lbGluZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0ksV0FBQTtFQUNBLFVBQUE7QUFBUjtBQUVRO0VBQ0ksVUFBQTtFQUNBLGlCQUFBO0VBQ0EsZ0JBQUE7QUFBWjtBQUdROztFQUVJLGlCQUFBO0VBQ0EsNEJBQUE7RUFDQSxTQUFBO0FBRFo7QUFHWTs7RUFDSSxhQUFBO0FBQWhCO0FBRVk7O0VBQ0ksZUFBQTtBQUNoQjtBQUdRO0VBQ0ksU0FBQTtFQUNBLDRCQUFBO0FBRFo7QUFJTztFQUNLLFVBQUE7RUFDQSxTQUFBO0VBQ0EsY0FBQTtBQUZaIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICAgIGlvbi1yb3cuYWRkb24tYmxvY2stdGltZWxpbmUtZmlsdGVyIHtcbiAgICAgICAgbWFyZ2luOiA4cHg7XG4gICAgICAgIHBhZGRpbmc6IDA7XG5cbiAgICAgICAgaW9uLWNvbCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgbWFyZ2luLXJpZ2h0OiAycHg7XG4gICAgICAgICAgICBtYXJnaW4tbGVmdDogMnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgaW9uLWJ1dHRvbixcbiAgICAgICAgY29yZS1jb21ib2JveCA6Om5nLWRlZXAgaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICAtLWJvcmRlci13aWR0aDogMDtcbiAgICAgICAgICAgIC0tYTExeS1taW4tdGFyZ2V0LXNpemU6IDQwcHg7XG4gICAgICAgICAgICBtYXJnaW46IDA7XG5cbiAgICAgICAgICAgIC5zZWxlY3QtaWNvbiB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlvbi1pY29uIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjb3JlLWNvbWJvYm94IDo6bmctZGVlcCBpb24tc2VsZWN0IHtcbiAgICAgICAgICAgIG1hcmdpbjogMDtcbiAgICAgICAgICAgIC0tYTExeS1taW4tdGFyZ2V0LXNpemU6IDQwcHg7XG4gICAgICAgIH1cblxuICAgICAgIGNvcmUtc2VhcmNoLWJveCB7XG4gICAgICAgICAgICBwYWRkaW5nOiAwO1xuICAgICAgICAgICAgbWFyZ2luOiAwO1xuICAgICAgICAgICAgLS1oZWlnaHQ6IDQwcHg7XG4gICAgICAgIH1cbiAgICB9XG5cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n  changeDetection: 0\n});\nexport var AddonBlockTimelineSort;\n(function (AddonBlockTimelineSort) {\n  AddonBlockTimelineSort[\"ByDates\"] = \"sortbydates\";\n  AddonBlockTimelineSort[\"ByCourses\"] = \"sortbycourses\";\n})(AddonBlockTimelineSort || (AddonBlockTimelineSort = {}));","map":{"version":3,"names":["CoreSites","AddonBlockTimeline","CoreUtils","CoreDomUtils","CoreCoursesHelper","CoreCourses","CoreCourseOptionsDelegate","BehaviorSubject","combineLatest","of","catchError","distinctUntilChanged","map","share","tap","mergeAll","AddonBlockTimelineSection","FormControl","formControlValue","resolved","CoreLogger","i0","ɵɵelementStart","ɵɵlistener","AddonBlockTimelineComponent_ion_row_6_Template_core_search_box_onSubmit_2_listener","$event","ɵɵrestoreView","_r7","ctx_r6","ɵɵnextContext","ɵɵresetView","searchChanged","AddonBlockTimelineComponent_ion_row_6_Template_core_search_box_onClear_2_listener","ctx_r8","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ɵɵpipeBind1","ɵɵtext","option_r9","value","ɵɵattribute","last_r10","ɵɵtextInterpolate1","name","option_r11","AddonBlockTimelineComponent_ion_col_16_Template_core_search_box_onSubmit_1_listener","_r13","ctx_r12","AddonBlockTimelineComponent_ion_col_16_Template_core_search_box_onClear_1_listener","ctx_r14","option_r15","AddonBlockTimelineComponent_ng_container_22_ng_container_1_addon_block_timeline_events_1_Template_addon_block_timeline_events_loadMore_0_listener","_r24","section_r19","$implicit","loadMore","data_r21","events","ctx_r20","sort$","AddonBlockTimelineSort","ByDates","canLoadMore","loadingMore","course","ɵɵelementContainerStart","ɵɵtemplate","AddonBlockTimelineComponent_ng_container_22_ng_container_1_addon_block_timeline_events_1_Template","ɵɵelementContainerEnd","data$","ɵɵelement","AddonBlockTimelineComponent_ng_container_22_ng_container_1_Template","AddonBlockTimelineComponent_ng_container_22_core_empty_box_2_Template","sections_r16","length","AddonBlockTimelineComponent","constructor","sort","filter","loaded","courseIdsToInvalidate","fetchContentDefaultError","logger","getInstance","search$","initializeSort","initializeFilter","initializeSections","ngOnInit","_this","_asyncToGenerator","currentSite","getRequiredCurrentSite","search","Promise","all","getLocalSiteConfig","isVersionGreaterEqualThan","setValue","next","sortChanged","setLocalSiteConfig","filterChanged","invalidateContent","_this2","allPromises","invalidateActionEventsByTimesort","invalidateActionEventsByCourses","invalidateUserCourses","clearAndInvalidateCoursesOptions","invalidateCoursesByField","join","sortOptions","Object","values","filter$","statusFilterOptions","dateFilterOptions","_this3","filtersRange","from","overdue","to","next7days","next30days","next3months","next6months","sortValue","valueChanges","courses","pipe","_ref","ByCourses","getUserCoursesWithOptions","_x","apply","arguments","id","sections$","_ref2","includeOverdue","dateRange","getSectionsByDates","getSectionsByCourse","_x2","error","showErrorModalDefault","section","_this4","courseIds","gracePeriod","getCoursesGracePeriod","courseEvents","getActionEventsByCourses","sectionObservables","hidden","isPastCourse","after","isFutureCourse","before","sections","parseInt","getConfig","_unused","_class","selectors","decls","vars","consts","template","AddonBlockTimelineComponent_Template","rf","ctx","AddonBlockTimelineComponent_ion_row_6_Template","AddonBlockTimelineComponent_Template_core_combobox_onChange_10_listener","AddonBlockTimelineComponent_ion_select_option_11_Template","AddonBlockTimelineComponent_ion_select_option_15_Template","AddonBlockTimelineComponent_ion_col_16_Template","AddonBlockTimelineComponent_Template_core_combobox_onChange_19_listener","AddonBlockTimelineComponent_ion_select_option_21_Template","AddonBlockTimelineComponent_ng_container_22_Template","ɵɵtextInterpolate"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/block/timeline/components/timeline/timeline.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/block/timeline/components/timeline/addon-block-timeline.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ChangeDetectionStrategy, Component, OnInit } from '@angular/core';\nimport { CoreSites } from '@services/sites';\nimport { ICoreBlockComponent } from '@features/block/classes/base-block-component';\nimport { AddonBlockTimeline } from '../../services/timeline';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreCoursesHelper, CoreEnrolledCourseDataWithOptions } from '@features/courses/services/courses-helper';\nimport { CoreCourses } from '@features/courses/services/courses';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { BehaviorSubject, combineLatest, Observable, of, Subject } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, share, tap, mergeAll } from 'rxjs/operators';\nimport { AddonBlockTimelineDateRange, AddonBlockTimelineSection } from '@addons/block/timeline/classes/section';\nimport { FormControl } from '@angular/forms';\nimport { formControlValue, resolved } from '@/core/utils/rxjs';\nimport { CoreLogger } from '@singletons/logger';\n\n/**\n * Component to render a timeline block.\n */\n@Component({\n    selector: 'addon-block-timeline',\n    templateUrl: 'addon-block-timeline.html',\n    styleUrls: ['timeline.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class AddonBlockTimelineComponent implements OnInit, ICoreBlockComponent {\n\n    sort = new FormControl();\n    sort$!: Observable<AddonBlockTimelineSort>;\n    sortOptions!: AddonBlockTimelineOption<AddonBlockTimelineSort>[];\n    filter = new FormControl();\n    filter$!: Observable<AddonBlockTimelineFilter>;\n    statusFilterOptions!: AddonBlockTimelineOption<AddonBlockTimelineFilter>[];\n    dateFilterOptions!: AddonBlockTimelineOption<AddonBlockTimelineFilter>[];\n    search$: Subject<string | null>;\n    sections$!: Observable<AddonBlockTimelineSection[]>;\n    loaded = false;\n\n    protected logger: CoreLogger;\n    protected courseIdsToInvalidate: number[] = [];\n    protected fetchContentDefaultError = 'Error getting timeline data.';\n\n    constructor() {\n        this.logger = CoreLogger.getInstance('AddonBlockTimelineComponent');\n        this.search$ = new BehaviorSubject<string | null>(null);\n        this.initializeSort();\n        this.initializeFilter();\n        this.initializeSections();\n    }\n\n    get AddonBlockTimelineSort(): typeof AddonBlockTimelineSort {\n        return AddonBlockTimelineSort;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        const currentSite = CoreSites.getRequiredCurrentSite();\n        const [sort, filter, search] = await Promise.all([\n            currentSite.getLocalSiteConfig('AddonBlockTimelineSort', AddonBlockTimelineSort.ByDates),\n            currentSite.getLocalSiteConfig('AddonBlockTimelineFilter', AddonBlockTimelineFilter.Next30Days),\n            currentSite.isVersionGreaterEqualThan('4.0') ? '' : null,\n        ]);\n\n        this.sort.setValue(sort);\n        this.filter.setValue(filter);\n        this.search$.next(search);\n    }\n\n    /**\n     * Sort changed.\n     *\n     * @param sort New sort.\n     */\n    sortChanged(sort: AddonBlockTimelineSort): void {\n        CoreSites.getRequiredCurrentSite().setLocalSiteConfig('AddonBlockTimelineSort', sort);\n    }\n\n    /**\n     * Filter changed.\n     *\n     * @param filter New filter.\n     */\n    filterChanged(filter: AddonBlockTimelineFilter): void {\n        CoreSites.getRequiredCurrentSite().setLocalSiteConfig('AddonBlockTimelineFilter', filter);\n    }\n\n    /**\n     * Search text changed.\n     *\n     * @param search New search.\n     */\n    searchChanged(search: string): void {\n        this.search$.next(search);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async invalidateContent(): Promise<void> {\n        await CoreUtils.allPromises([\n            AddonBlockTimeline.invalidateActionEventsByTimesort(),\n            AddonBlockTimeline.invalidateActionEventsByCourses(),\n            CoreCourses.invalidateUserCourses(),\n            CoreCourseOptionsDelegate.clearAndInvalidateCoursesOptions(),\n            CoreCourses.invalidateCoursesByField('ids', this.courseIdsToInvalidate.join(',')),\n        ]);\n    }\n\n    /**\n     * Initialize sort properties.\n     */\n    protected initializeSort(): void {\n        this.sort$ = formControlValue(this.sort);\n        this.sortOptions = Object.values(AddonBlockTimelineSort).map(value => ({\n            value,\n            name: `addon.block_timeline.${value}`,\n        }));\n    }\n\n    /**\n     * Initialize filter properties.\n     */\n    protected initializeFilter(): void {\n        this.filter$ = formControlValue(this.filter);\n        this.statusFilterOptions = [\n            { value: AddonBlockTimelineFilter.All, name: 'core.all' },\n            { value: AddonBlockTimelineFilter.Overdue, name: 'addon.block_timeline.overdue' },\n        ];\n        this.dateFilterOptions = [\n            AddonBlockTimelineFilter.Next7Days,\n            AddonBlockTimelineFilter.Next30Days,\n            AddonBlockTimelineFilter.Next3Months,\n            AddonBlockTimelineFilter.Next6Months,\n        ]\n            .map(value => ({\n                value,\n                name: `addon.block_timeline.${value}`,\n            }));\n    }\n\n    /**\n     * Initialize sections properties.\n     */\n    protected initializeSections(): void {\n        const filtersRange: Record<AddonBlockTimelineFilter, AddonBlockTimelineDateRange> = {\n            all: { from: -14 },\n            overdue: { from: -14, to: 1 },\n            next7days: { from: 0, to: 7 },\n            next30days: { from: 0, to: 30 },\n            next3months: { from: 0, to: 90 },\n            next6months: { from: 0, to: 180 },\n        };\n        const sortValue = this.sort.valueChanges as Observable<AddonBlockTimelineSort>;\n        const courses = sortValue.pipe(\n            distinctUntilChanged(),\n            map(async sort => {\n                switch (sort) {\n                    case AddonBlockTimelineSort.ByDates:\n                        return [];\n                    case AddonBlockTimelineSort.ByCourses:\n                        return CoreCoursesHelper.getUserCoursesWithOptions();\n                }\n            }),\n            resolved(),\n            map(courses => {\n                this.courseIdsToInvalidate = courses.map(course => course.id);\n\n                return courses;\n            }),\n        );\n\n        this.sections$ = combineLatest([this.filter$, sortValue, this.search$, courses]).pipe(\n            map(async ([filter, sort, search, courses]) => {\n                const includeOverdue = filter === AddonBlockTimelineFilter.Overdue;\n                const dateRange = filtersRange[filter];\n\n                switch (sort) {\n                    case AddonBlockTimelineSort.ByDates:\n                        return this.getSectionsByDates(search, includeOverdue, dateRange);\n                    case AddonBlockTimelineSort.ByCourses:\n                        return this.getSectionsByCourse(search, includeOverdue, dateRange, courses);\n                }\n            }),\n            resolved(),\n            mergeAll(),\n            catchError(error => {\n                // An error ocurred in the function, log the error and just resolve the observable so the workflow continues.\n                this.logger.error(error);\n\n                // Error getting data, fail.\n                CoreDomUtils.showErrorModalDefault(error, this.fetchContentDefaultError, true);\n\n                return of([] as AddonBlockTimelineSection[]);\n            }),\n            share(),\n            tap(() => (this.loaded = true)),\n        );\n    }\n\n    /**\n     * Get sections sorted by dates.\n     *\n     * @param search Search string.\n     * @param overdue Whether to filter overdue events or not.\n     * @param dateRange Date range to filter events by.\n     * @returns Sections.\n     */\n    protected async getSectionsByDates(\n        search: string | null,\n        overdue: boolean,\n        dateRange: AddonBlockTimelineDateRange,\n    ): Promise<Observable<AddonBlockTimelineSection[]>> {\n        const section = new AddonBlockTimelineSection(search, overdue, dateRange);\n\n        await section.loadMore();\n\n        return section.data$.pipe(map(({ events }) => events.length > 0 ? [section] : []));\n    }\n\n    /**\n     * Get sections sorted by courses.\n     *\n     * @param search Search string.\n     * @param overdue Whether to filter overdue events or not.\n     * @param dateRange Date range to filter events by.\n     * @param courses Courses.\n     * @returns Sections.\n     */\n    protected async getSectionsByCourse(\n        search: string | null,\n        overdue: boolean,\n        dateRange: AddonBlockTimelineDateRange,\n        courses: CoreEnrolledCourseDataWithOptions[],\n    ): Promise<Observable<AddonBlockTimelineSection[]>> {\n        // Do not filter courses by date because they can contain activities due.\n        const courseIds = courses.map(course => course.id);\n        const gracePeriod = await this.getCoursesGracePeriod();\n        const courseEvents = await AddonBlockTimeline.getActionEventsByCourses(courseIds, search ?? '');\n        const sectionObservables = courses\n            .filter(\n                course =>\n                    !course.hidden &&\n                !CoreCoursesHelper.isPastCourse(course, gracePeriod.after) &&\n                !CoreCoursesHelper.isFutureCourse(course, gracePeriod.after, gracePeriod.before) &&\n                courseEvents[course.id].events.length > 0,\n            )\n            .map(course => {\n                const section = new AddonBlockTimelineSection(\n                    search,\n                    overdue,\n                    dateRange,\n                    course,\n                    courseEvents[course.id].events,\n                    courseEvents[course.id].canLoadMore,\n                );\n\n                return section.data$.pipe(map(({ events }) => events.length > 0 ? section : null));\n            });\n\n        if (sectionObservables.length === 0) {\n            return of([]);\n        }\n\n        return combineLatest(sectionObservables).pipe(\n            map(sections => sections.filter(\n                (section: AddonBlockTimelineSection | null): section is AddonBlockTimelineSection => !!section,\n            )),\n        );\n    }\n\n    /**\n     * Get courses grace period for the current site.\n     *\n     * @returns Courses grace period.\n     */\n    protected async getCoursesGracePeriod(): Promise<{ before: number; after: number }> {\n        try {\n            const currentSite = CoreSites.getRequiredCurrentSite();\n\n            return {\n                before: parseInt(await currentSite.getConfig('coursegraceperiodbefore'), 10),\n                after: parseInt(await currentSite.getConfig('coursegraceperiodafter'), 10),\n            };\n        } catch {\n            return { before: 0, after: 0 };\n        }\n    }\n\n}\n\n/**\n * Sort options.\n */\nexport enum AddonBlockTimelineSort {\n    ByDates = 'sortbydates',\n    ByCourses = 'sortbycourses',\n}\n\n/**\n * Filter options.\n */\nexport const enum AddonBlockTimelineFilter {\n    All = 'all',\n    Overdue = 'overdue',\n    Next7Days = 'next7days',\n    Next30Days = 'next30days',\n    Next3Months = 'next3months',\n    Next6Months = 'next6months',\n}\n\n/**\n * Select option.\n */\nexport interface AddonBlockTimelineOption<Value> {\n    value: Value;\n    name: string;\n}\n","<ion-item-divider [sticky]=\"true\">\n    <ion-label>\n        <h2>{{ 'addon.block_timeline.pluginname' | translate }}</h2>\n    </ion-label>\n</ion-item-divider>\n<core-loading [hideUntil]=\"loaded\">\n    <ion-row class=\"ion-hide-md-up addon-block-timeline-filter\" *ngIf=\"(search$ | async) !== null\">\n        <ion-col>\n            <!-- Filter courses. -->\n            <core-search-box (onSubmit)=\"searchChanged($event)\" (onClear)=\"searchChanged('')\"\n                [placeholder]=\"'addon.block_timeline.searchevents' | translate\" autocorrect=\"off\" spellcheck=\"false\" [lengthCheck]=\"2\"\n                searchArea=\"AddonBlockTimeline\" />\n        </ion-col>\n    </ion-row>\n    <ion-row class=\"ion-justify-content-between ion-align-items-center addon-block-timeline-filter\">\n        <ion-col size=\"auto\">\n            <core-combobox [formControl]=\"filter\" (onChange)=\"filterChanged($event)\">\n                <ion-select-option *ngFor=\"let option of statusFilterOptions; last as last\"\n                    [attr.class]=\"'ion-text-wrap' + last ? ' core-select-option-border-bottom' : ''\" [value]=\"option.value\">\n                    {{ option.name | translate }}\n                </ion-select-option>\n                <ion-select-option class=\"ion-text-wrap core-select-option-title\" disabled value=\"disabled\">\n                    {{ 'addon.block_timeline.duedate' | translate }}\n                </ion-select-option>\n                <ion-select-option *ngFor=\"let option of dateFilterOptions\" class=\"ion-text-wrap\" [value]=\"option.value\">\n                    {{ option.name | translate }}\n                </ion-select-option>\n            </core-combobox>\n        </ion-col>\n        <ion-col class=\"ion-hide-md-down\" *ngIf=\"(search$ | async) !== null\">\n            <!-- Filter courses. -->\n            <core-search-box (onSubmit)=\"searchChanged($event)\" (onClear)=\"searchChanged('')\"\n                [placeholder]=\"'addon.block_timeline.searchevents' | translate\" autocorrect=\"off\" spellcheck=\"false\" [lengthCheck]=\"2\"\n                searchArea=\"AddonBlockTimeline\" />\n        </ion-col>\n        <ion-col size=\"auto\">\n            <core-combobox [label]=\"'core.sortby' | translate\" [formControl]=\"sort\" (onChange)=\"sortChanged($event)\"\n                icon=\"fas-arrow-down-short-wide\">\n                <ion-select-option *ngFor=\"let option of sortOptions\" class=\"ion-text-wrap\" [value]=\"option.value\">\n                    {{ option.name | translate }}\n                </ion-select-option>\n            </core-combobox>\n        </ion-col>\n    </ion-row>\n    <ng-container *ngIf=\"sections$ | async as sections\">\n        <ng-container *ngFor=\"let section of sections\">\n            <addon-block-timeline-events *ngIf=\"section.data$ | async as data\" [events]=\"data.events\"\n                [showInlineCourse]=\"(sort$ | async) === AddonBlockTimelineSort.ByDates\" [canLoadMore]=\"data.canLoadMore\"\n                [loadingMore]=\"data.loadingMore\" (loadMore)=\"section.loadMore()\" [course]=\"section.course\" />\n        </ng-container>\n        <core-empty-box *ngIf=\"sections && sections.length === 0\" image=\"assets/img/icons/courses.svg\"\n            [message]=\"'addon.block_timeline.noevents' | translate\" />\n    </ng-container>\n</core-loading>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}