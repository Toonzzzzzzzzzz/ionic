{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreQuestion } from '@features/question/services/question';\nimport { makeSingleton } from '@singletons';\nimport { AddonQtypeGapSelectComponent } from '../../component/gapselect';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler to support gapselect question type.\n */\nexport class AddonQtypeGapSelectHandlerService {\n  constructor() {\n    this.name = 'AddonQtypeGapSelect';\n    this.type = 'qtype_gapselect';\n  }\n  /**\n   * @inheritdoc\n   */\n  getBehaviour(question, behaviour) {\n    if (behaviour === 'interactive') {\n      return 'interactivecountback';\n    }\n    return behaviour;\n  }\n  /**\n   * @inheritdoc\n   */\n  getComponent() {\n    return AddonQtypeGapSelectComponent;\n  }\n  /**\n   * @inheritdoc\n   */\n  isCompleteResponse(question, answers) {\n    // We should always get a value for each select so we can assume we receive all the possible answers.\n    for (const name in answers) {\n      const value = answers[name];\n      if (!value || value === '0') {\n        return 0;\n      }\n    }\n    return 1;\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isGradableResponse(question, answers) {\n    // We should always get a value for each select so we can assume we receive all the possible answers.\n    for (const name in answers) {\n      const value = answers[name];\n      if (value) {\n        return 1;\n      }\n    }\n    return 0;\n  }\n  /**\n   * @inheritdoc\n   */\n  isSameResponse(question, prevAnswers, newAnswers) {\n    return CoreQuestion.compareAllAnswers(prevAnswers, newAnswers);\n  }\n}\n_class = AddonQtypeGapSelectHandlerService;\n_class.ɵfac = function AddonQtypeGapSelectHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonQtypeGapSelectHandler = makeSingleton(AddonQtypeGapSelectHandlerService);","map":{"version":3,"names":["CoreQuestion","makeSingleton","AddonQtypeGapSelectComponent","AddonQtypeGapSelectHandlerService","constructor","name","type","getBehaviour","question","behaviour","getComponent","isCompleteResponse","answers","value","isEnabled","_asyncToGenerator","isGradableResponse","isSameResponse","prevAnswers","newAnswers","compareAllAnswers","factory","ɵfac","providedIn","AddonQtypeGapSelectHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/qtype/gapselect/services/handlers/gapselect.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable, Type } from '@angular/core';\n\nimport { CoreQuestion, CoreQuestionQuestionParsed, CoreQuestionsAnswers } from '@features/question/services/question';\nimport { CoreQuestionHandler } from '@features/question/services/question-delegate';\nimport { makeSingleton } from '@singletons';\nimport { AddonQtypeGapSelectComponent } from '../../component/gapselect';\n\n/**\n * Handler to support gapselect question type.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonQtypeGapSelectHandlerService implements CoreQuestionHandler {\n\n    name = 'AddonQtypeGapSelect';\n    type = 'qtype_gapselect';\n\n    /**\n     * @inheritdoc\n     */\n    getBehaviour(question: CoreQuestionQuestionParsed, behaviour: string): string {\n        if (behaviour === 'interactive') {\n            return 'interactivecountback';\n        }\n\n        return behaviour;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getComponent(): Type<unknown> {\n        return AddonQtypeGapSelectComponent;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    isCompleteResponse(\n        question: CoreQuestionQuestionParsed,\n        answers: CoreQuestionsAnswers,\n    ): number {\n        // We should always get a value for each select so we can assume we receive all the possible answers.\n        for (const name in answers) {\n            const value = answers[name];\n            if (!value || value === '0') {\n                return 0;\n            }\n        }\n\n        return 1;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        return true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    isGradableResponse(\n        question: CoreQuestionQuestionParsed,\n        answers: CoreQuestionsAnswers,\n    ): number {\n        // We should always get a value for each select so we can assume we receive all the possible answers.\n        for (const name in answers) {\n            const value = answers[name];\n            if (value) {\n                return 1;\n            }\n        }\n\n        return 0;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    isSameResponse(\n        question: CoreQuestionQuestionParsed,\n        prevAnswers: CoreQuestionsAnswers,\n        newAnswers: CoreQuestionsAnswers,\n    ): boolean {\n        return CoreQuestion.compareAllAnswers(prevAnswers, newAnswers);\n    }\n\n}\n\nexport const AddonQtypeGapSelectHandler = makeSingleton(AddonQtypeGapSelectHandlerService);\n"],"mappings":";;AAgBA,SAASA,YAAY,QAA0D,sCAAsC;AAErH,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,4BAA4B,QAAQ,2BAA2B;;AAExE;;;AAIA,OAAM,MAAOC,iCAAiC;EAD9CC,YAAA;IAGI,KAAAC,IAAI,GAAG,qBAAqB;IAC5B,KAAAC,IAAI,GAAG,iBAAiB;;EAExB;;;EAGAC,YAAYA,CAACC,QAAoC,EAAEC,SAAiB;IAChE,IAAIA,SAAS,KAAK,aAAa,EAAE;MAC7B,OAAO,sBAAsB;;IAGjC,OAAOA,SAAS;EACpB;EAEA;;;EAGAC,YAAYA,CAAA;IACR,OAAOR,4BAA4B;EACvC;EAEA;;;EAGAS,kBAAkBA,CACdH,QAAoC,EACpCI,OAA6B;IAE7B;IACA,KAAK,MAAMP,IAAI,IAAIO,OAAO,EAAE;MACxB,MAAMC,KAAK,GAAGD,OAAO,CAACP,IAAI,CAAC;MAC3B,IAAI,CAACQ,KAAK,IAAIA,KAAK,KAAK,GAAG,EAAE;QACzB,OAAO,CAAC;;;IAIhB,OAAO,CAAC;EACZ;EAEA;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAO,IAAI;IAAC;EAChB;EAEA;;;EAGAC,kBAAkBA,CACdR,QAAoC,EACpCI,OAA6B;IAE7B;IACA,KAAK,MAAMP,IAAI,IAAIO,OAAO,EAAE;MACxB,MAAMC,KAAK,GAAGD,OAAO,CAACP,IAAI,CAAC;MAC3B,IAAIQ,KAAK,EAAE;QACP,OAAO,CAAC;;;IAIhB,OAAO,CAAC;EACZ;EAEA;;;EAGAI,cAAcA,CACVT,QAAoC,EACpCU,WAAiC,EACjCC,UAAgC;IAEhC,OAAOnB,YAAY,CAACoB,iBAAiB,CAACF,WAAW,EAAEC,UAAU,CAAC;EAClE;;SA3EShB,iCAAiC;;mBAAjCA,MAAiC;AAAA;;SAAjCA,MAAiC;EAAAkB,OAAA,EAAjClB,MAAiC,CAAAmB,IAAA;EAAAC,UAAA,EADpB;AAAM;AAgFhC,OAAO,MAAMC,0BAA0B,GAAGvB,aAAa,CAACE,iCAAiC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}