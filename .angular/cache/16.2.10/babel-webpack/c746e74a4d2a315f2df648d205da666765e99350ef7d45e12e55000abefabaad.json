{"ast":null,"code":"import _objectSpread from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreEvents } from '@singletons/events';\nimport { CoreMainMenu, CoreMainMenuProvider } from '../../services/mainmenu';\nimport { CoreMainMenuDelegate } from '../../services/mainmenu-delegate';\nimport { Router } from '@singletons';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreAriaRoleTab } from '@classes/aria-role-tab';\nimport { CoreNavigator } from '@services/navigator';\nimport { filter } from 'rxjs/operators';\nimport { NavigationEnd } from '@angular/router';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { CoreSites } from '@services/sites';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreLogger } from '@singletons/logger';\nimport { CorePlatform } from '@services/platform';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../directives/fa-icon\";\nimport * as i3 from \"@ionic/angular\";\nimport * as i4 from \"../../components/user-menu-button/user-menu-button\";\nimport * as i5 from \"@ngx-translate/core\";\nconst _c0 = [\"mainTabs\"];\nfunction CoreMainMenuPage_ion_spinner_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-spinner\");\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.loading\"));\n  }\n}\nfunction CoreMainMenuPage_core_user_menu_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-user-menu-button\", 14);\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"alwaysShow\", true);\n  }\n}\nfunction CoreMainMenuPage_ion_tab_button_5_ion_badge_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 19);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(tab_r5.badge);\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction CoreMainMenuPage_ion_tab_button_5_span_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 9);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r5 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(2, 1, tab_r5.badgeA11yText, i0.ɵɵpureFunction1(4, _c1, tab_r5.badge)), \" \");\n  }\n}\nfunction CoreMainMenuPage_ion_tab_button_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-tab-button\", 15);\n    i0.ɵɵlistener(\"keydown\", function CoreMainMenuPage_ion_tab_button_5_Template_ion_tab_button_keydown_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const tab_r5 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.tabAction.keyDown(tab_r5.page, $event));\n    })(\"keyup\", function CoreMainMenuPage_ion_tab_button_5_Template_ion_tab_button_keyup_0_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const tab_r5 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.tabAction.keyUp(tab_r5.page, $event));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 16);\n    i0.ɵɵelementStart(2, \"ion-label\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, CoreMainMenuPage_ion_tab_button_5_ion_badge_5_Template, 2, 1, \"ion-badge\", 17);\n    i0.ɵɵelementStart(6, \"span\", 9);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, CoreMainMenuPage_ion_tab_button_5_span_9_Template, 3, 6, \"span\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const tab_r5 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵclassMap(tab_r5.class);\n    i0.ɵɵproperty(\"hidden\", !ctx_r3.loaded && tab_r5.hide)(\"tab\", tab_r5.page)(\"disabled\", tab_r5.hide)(\"selected\", tab_r5.page === ctx_r3.selectedTab)(\"tabindex\", ctx_r3.selectedTab === tab_r5.page ? 0 : -1);\n    i0.ɵɵattribute(\"aria-controls\", tab_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"name\", tab_r5.icon);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 14, tab_r5.title));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", tab_r5.badge);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 16, tab_r5.title));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", tab_r5.badge && tab_r5.badgeA11yText);\n  }\n}\nfunction CoreMainMenuPage_ion_icon_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 20);\n  }\n}\nconst ANIMATION_DURATION = 500;\n/**\n * Page that displays the main menu of the app.\n */\nexport class CoreMainMenuPage {\n  constructor() {\n    this.tabs = [];\n    this.loaded = false;\n    this.showTabs = false;\n    this.tabsPlacement = 'bottom';\n    this.morePageName = CoreMainMenuProvider.MORE_PAGE_NAME;\n    this.isMainScreen = false;\n    this.moreBadge = false;\n    this.visibility = 'hidden';\n    this.selectHistory = [];\n    this.backButtonFunction = event => this.backButtonClicked(event);\n    this.tabAction = new CoreMainMenuRoleTab(this);\n    this.logger = CoreLogger.getInstance('CoreMainMenuPage');\n    // Listen navigation events to show or hide tabs.\n    this.navSubscription = Router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(() => {\n      var _this$mainTabs;\n      this.isMainScreen = !((_this$mainTabs = this.mainTabs) !== null && _this$mainTabs !== void 0 && _this$mainTabs.outlet.canGoBack());\n      this.updateVisibility();\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _this$mainTabs2;\n      _this.showTabs = true;\n      _this.urlToOpen = CoreNavigator.getRouteParam('urlToOpen');\n      _this.redirectPath = CoreNavigator.getRouteParam('redirectPath');\n      _this.redirectOptions = CoreNavigator.getRouteParam('redirectOptions');\n      _this.isMainScreen = !((_this$mainTabs2 = _this.mainTabs) !== null && _this$mainTabs2 !== void 0 && _this$mainTabs2.outlet.canGoBack());\n      _this.updateVisibility();\n      _this.subscription = CoreMainMenuDelegate.getHandlersObservable().subscribe(handlers => {\n        const previousHandlers = _this.allHandlers;\n        _this.allHandlers = handlers;\n        _this.updateHandlers(previousHandlers);\n      });\n      _this.badgeUpdateObserver = CoreEvents.on(CoreMainMenuProvider.MAIN_MENU_HANDLER_BADGE_UPDATED, data => {\n        if (data.siteId == CoreSites.getCurrentSiteId()) {\n          _this.updateMoreBadge();\n        }\n      });\n      _this.resizeListener = CoreDom.onWindowResize(() => {\n        _this.updateHandlers();\n      });\n      document.addEventListener('ionBackButton', _this.backButtonFunction);\n      if (CorePlatform.isIOS()) {\n        // In iOS, the resize event is triggered before the keyboard is opened/closed and not triggered again once done.\n        // Init handlers again once keyboard is closed since the resize event doesn't have the updated height.\n        _this.keyboardObserver = CoreEvents.on(CoreEvents.KEYBOARD_CHANGE, kbHeight => {\n          if (kbHeight === 0) {\n            _this.updateHandlers();\n            // If the device is slow it can take a bit more to update the window height. Retry in a few ms.\n            setTimeout(() => {\n              _this.updateHandlers();\n            }, 250);\n          }\n        });\n      }\n      CoreEvents.trigger(CoreEvents.MAIN_HOME_LOADED);\n    })();\n  }\n  /**\n   * Update handlers on change (size or handlers).\n   *\n   * @param previousHandlers Previous handlers (if they haave just been updated).\n   */\n  updateHandlers(previousHandlers) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.allHandlers) {\n        return;\n      }\n      _this2.tabsPlacement = CoreMainMenu.getTabPlacement();\n      _this2.updateVisibility();\n      const handlers = _this2.allHandlers.filter(handler => !handler.onlyInMore).slice(0, CoreMainMenu.getNumItems()); // Get main handlers.\n      // Re-build the list of tabs. If a handler is already in the list, use existing object to prevent re-creating the tab.\n      const newTabs = [];\n      for (let i = 0; i < handlers.length; i++) {\n        const handler = handlers[i];\n        // Check if the handler is already in the tabs list. If so, use it.\n        const tab = _this2.tabs.find(tab => tab.page == handler.page);\n        tab ? tab.hide = false : null;\n        handler.hide = false;\n        handler.id = handler.id || 'core-mainmenu-' + CoreUtils.getUniqueId('CoreMainMenuPage');\n        newTabs.push(tab || handler);\n      }\n      _this2.tabs = newTabs;\n      // Sort them by priority so new handlers are in the right position.\n      _this2.tabs.sort((a, b) => (b.priority || 0) - (a.priority || 0));\n      _this2.updateMoreBadge();\n      let removedHandlersPages = [];\n      if (previousHandlers) {\n        const allHandlers = _this2.allHandlers;\n        removedHandlersPages = previousHandlers.map(handler => handler.page).filter(page => !allHandlers.some(handler => handler.page === page));\n      }\n      const mainMenuTab = CoreNavigator.getCurrentMainMenuTab();\n      _this2.loaded = CoreMainMenuDelegate.areHandlersLoaded();\n      if (_this2.loaded && (!mainMenuTab || removedHandlersPages.includes(mainMenuTab))) {\n        // No tab selected or handler no longer available, select the first one.\n        yield CoreUtils.nextTick();\n        const tabPage = _this2.tabs[0] ? _this2.tabs[0].page : _this2.morePageName;\n        const tabPageParams = _this2.tabs[0] ? _this2.tabs[0].pageParams : {};\n        _this2.logger.debug(`Select first tab: ${tabPage}.`, _this2.tabs);\n        // Use navigate instead of mainTabs.select to be able to pass page params.\n        CoreNavigator.navigateToSitePath(tabPage, {\n          preferCurrentTab: false,\n          params: _objectSpread({\n            urlToOpen: _this2.urlToOpen,\n            redirectPath: _this2.redirectPath,\n            redirectOptions: _this2.redirectOptions\n          }, tabPageParams)\n        });\n      }\n    })();\n  }\n  /**\n   * Check all non visible tab handlers for any badge text or number.\n   */\n  updateMoreBadge() {\n    if (!this.allHandlers) {\n      return;\n    }\n    // Calculate the main handlers not to display them in this view.\n    const mainHandlers = this.allHandlers.filter(handler => !handler.onlyInMore).slice(0, CoreMainMenu.getNumItems());\n    // Use only the handlers that don't appear in the main view.\n    this.moreBadge = this.allHandlers.some(handler => mainHandlers.indexOf(handler) == -1 && !!handler.badge);\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$subscription, _this$navSubscription, _this$keyboardObserve, _this$badgeUpdateObse, _this$resizeListener;\n    (_this$subscription = this.subscription) === null || _this$subscription === void 0 || _this$subscription.unsubscribe();\n    (_this$navSubscription = this.navSubscription) === null || _this$navSubscription === void 0 || _this$navSubscription.unsubscribe();\n    document.removeEventListener('ionBackButton', this.backButtonFunction);\n    (_this$keyboardObserve = this.keyboardObserver) === null || _this$keyboardObserve === void 0 || _this$keyboardObserve.off();\n    (_this$badgeUpdateObse = this.badgeUpdateObserver) === null || _this$badgeUpdateObse === void 0 || _this$badgeUpdateObse.off();\n    (_this$resizeListener = this.resizeListener) === null || _this$resizeListener === void 0 || _this$resizeListener.off();\n  }\n  /**\n   * Selected tab has changed.\n   *\n   * @param event Event.\n   */\n  tabChanged(event) {\n    var _this$firstSelectedTa;\n    this.selectedTab = event.tab;\n    this.firstSelectedTab = (_this$firstSelectedTa = this.firstSelectedTab) !== null && _this$firstSelectedTa !== void 0 ? _this$firstSelectedTa : event.tab;\n    this.selectHistory.push(event.tab);\n  }\n  /**\n   * Update menu visibility.\n   */\n  updateVisibility() {\n    const visibility = this.tabsPlacement == 'side' ? '' : this.isMainScreen ? 'visible' : 'hidden';\n    if (visibility === this.visibility) {\n      return;\n    }\n    this.visibility = visibility;\n    this.notifyVisibilityUpdated();\n  }\n  /**\n   * Back button clicked.\n   *\n   * @param event Event.\n   */\n  backButtonClicked(event) {\n    var _this3 = this;\n    // Use a priority lower than 0 (navigation).\n    event.detail.register(-10, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (processNextHandler) {\n        // This callback can be called at the same time as Ionic's back navigation callback.\n        // Check if user is already at the root of a tab.\n        const isMainMenuRoot = yield _this3.currentRouteIsMainMenuRoot();\n        if (!isMainMenuRoot) {\n          return; // Not at root level, let Ionic handle the navigation.\n        }\n        // No back navigation, already at root level. Check if we should change tab.\n        if (_this3.selectHistory.length > 1) {\n          var _this3$mainTabs;\n          // The previous page in history is not the last one, we need the previous one.\n          const previousTab = _this3.selectHistory[_this3.selectHistory.length - 2];\n          // Remove curent and previous tabs from history.\n          _this3.selectHistory = _this3.selectHistory.filter(tab => _this3.selectedTab != tab && previousTab != tab);\n          (_this3$mainTabs = _this3.mainTabs) === null || _this3$mainTabs === void 0 || _this3$mainTabs.select(previousTab);\n          return;\n        }\n        if (_this3.firstSelectedTab && _this3.selectedTab != _this3.firstSelectedTab) {\n          var _this3$mainTabs2;\n          // All history is gone but we are not in the first selected tab.\n          _this3.selectHistory = [];\n          (_this3$mainTabs2 = _this3.mainTabs) === null || _this3$mainTabs2 === void 0 || _this3$mainTabs2.select(_this3.firstSelectedTab);\n          return;\n        }\n        processNextHandler();\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n  }\n  /**\n   * Check if current route is the root of the current main menu tab.\n   *\n   * @returns Promise.\n   */\n  currentRouteIsMainMenuRoot() {\n    return _asyncToGenerator(function* () {\n      // Check if the current route is the root of the current main menu tab.\n      return !!CoreNavigator.getCurrentRoute({\n        routeData: {\n          mainMenuTabRoot: CoreNavigator.getCurrentMainMenuTab()\n        }\n      });\n    })();\n  }\n  /**\n   * Notify that the menu visibility has been updated.\n   */\n  notifyVisibilityUpdated() {\n    return _asyncToGenerator(function* () {\n      yield CoreUtils.nextTick();\n      yield CoreUtils.wait(ANIMATION_DURATION);\n      yield CoreUtils.nextTick();\n      CoreEvents.trigger(CoreMainMenuProvider.MAIN_MENU_VISIBILITY_UPDATED);\n    })();\n  }\n}\n/**\n * Helper class to manage rol tab.\n */\n_class = CoreMainMenuPage;\n_class.ɵfac = function CoreMainMenuPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-mainmenu\"]],\n  viewQuery: function CoreMainMenuPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.mainTabs = _t.first);\n    }\n  },\n  decls: 22,\n  vars: 27,\n  consts: [[3, \"hidden\", \"ionTabsDidChange\"], [\"mainTabs\", \"\"], [\"slot\", \"bottom\", 1, \"mainmenu-tabs\"], [4, \"ngIf\"], [3, \"alwaysShow\", 4, \"ngIf\"], [\"layout\", \"label-hide\", 3, \"hidden\", \"tab\", \"disabled\", \"class\", \"selected\", \"tabindex\", \"keydown\", \"keyup\", 4, \"ngFor\", \"ngForOf\"], [\"layout\", \"label-hide\", 3, \"hidden\", \"tab\", \"tabindex\", \"keydown\", \"keyup\"], [\"name\", \"ellipsis-horizontal\", \"aria-hidden\", \"true\", 1, \"core-tab-icon\"], [\"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"class\", \"core-tab-badge\", \"name\", \"fas-circle\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [1, \"core-network-message\", 3, \"hidden\"], [1, \"core-online-message\"], [1, \"core-offline-message\"], [3, \"alwaysShow\"], [\"layout\", \"label-hide\", 3, \"hidden\", \"tab\", \"disabled\", \"selected\", \"tabindex\", \"keydown\", \"keyup\"], [\"aria-hidden\", \"true\", 1, \"core-tab-icon\", 3, \"name\"], [\"class\", \"core-tab-badge\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"class\", \"sr-only\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", 1, \"core-tab-badge\"], [\"name\", \"fas-circle\", \"aria-hidden\", \"true\", 1, \"core-tab-badge\"]],\n  template: function CoreMainMenuPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-tabs\", 0, 1);\n      i0.ɵɵlistener(\"ionTabsDidChange\", function CoreMainMenuPage_Template_ion_tabs_ionTabsDidChange_0_listener($event) {\n        return ctx.tabChanged($event);\n      });\n      i0.ɵɵelementStart(2, \"ion-tab-bar\", 2);\n      i0.ɵɵtemplate(3, CoreMainMenuPage_ion_spinner_3_Template, 2, 3, \"ion-spinner\", 3);\n      i0.ɵɵtemplate(4, CoreMainMenuPage_core_user_menu_button_4_Template, 1, 1, \"core-user-menu-button\", 4);\n      i0.ɵɵtemplate(5, CoreMainMenuPage_ion_tab_button_5_Template, 10, 18, \"ion-tab-button\", 5);\n      i0.ɵɵelementStart(6, \"ion-tab-button\", 6);\n      i0.ɵɵlistener(\"keydown\", function CoreMainMenuPage_Template_ion_tab_button_keydown_6_listener($event) {\n        return ctx.tabAction.keyDown(ctx.morePageName, $event);\n      })(\"keyup\", function CoreMainMenuPage_Template_ion_tab_button_keyup_6_listener($event) {\n        return ctx.tabAction.keyUp(ctx.morePageName, $event);\n      });\n      i0.ɵɵelement(7, \"ion-icon\", 7);\n      i0.ɵɵelementStart(8, \"ion-label\", 8);\n      i0.ɵɵtext(9);\n      i0.ɵɵpipe(10, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"span\", 9);\n      i0.ɵɵtext(12);\n      i0.ɵɵpipe(13, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(14, CoreMainMenuPage_ion_icon_14_Template, 1, 0, \"ion-icon\", 10);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(15, \"div\", 11)(16, \"div\", 12);\n      i0.ɵɵtext(17);\n      i0.ɵɵpipe(18, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(19, \"div\", 13);\n      i0.ɵɵtext(20);\n      i0.ɵɵpipe(21, \"translate\");\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵclassMap(\"placement-\" + ctx.tabsPlacement);\n      i0.ɵɵclassProp(\"tabshidden\", !ctx.isMainScreen && ctx.tabsPlacement === \"bottom\");\n      i0.ɵɵproperty(\"hidden\", !ctx.showTabs);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"@menuVisibilityAnimation\", ctx.visibility);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loaded && ctx.tabsPlacement === \"side\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.tabs);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", !ctx.loaded)(\"tab\", ctx.morePageName)(\"tabindex\", ctx.selectedTab === ctx.morePageName ? 0 : -1);\n      i0.ɵɵattribute(\"aria-controls\", ctx.morePageName);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(10, 19, \"core.more\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 21, \"core.more\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.moreBadge);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hidden\", !ctx.showTabs);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(18, 23, \"core.youreonline\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(21, 25, \"core.youreoffline\"), \" \");\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreFaIconDirective, i3.IonBadge, i3.IonIcon, i3.IonLabel, i3.IonSpinner, i3.IonTabBar, i3.IonTabButton, i3.IonTabs, i4.CoreMainMenuUserButtonComponent, i5.TranslatePipe],\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%] {\\n  --network-margin-bottom: 0px;\\n  --network-message-background: transparent;\\n  --network-message-offline: none;\\n  --network-message-online: none;\\n  --network-message-height: 16px;\\n}\\n[_nghost-%COMP%]   ion-tabs[_ngcontent-%COMP%] {\\n  --menutabbar-size: var(--bottom-tabs-size);\\n}\\n[_nghost-%COMP%]   ion-tabs.placement-side[_ngcontent-%COMP%] {\\n  --menutabbar-size: var(--side-tabs-size);\\n}\\n\\n.core-online[_nghost-%COMP%]   .core-network-message[_ngcontent-%COMP%], .core-online   [_nghost-%COMP%]   .core-network-message[_ngcontent-%COMP%], .core-offline[_nghost-%COMP%]   .core-network-message[_ngcontent-%COMP%], .core-offline   [_nghost-%COMP%]   .core-network-message[_ngcontent-%COMP%] {\\n  visibility: visible;\\n  height: var(--network-message-height);\\n  line-height: var(--network-message-height);\\n  padding-bottom: calc(var(--ion-safe-area-bottom, 0px) + var(--network-message-height));\\n}\\n\\n.core-online[_nghost-%COMP%], .core-online   [_nghost-%COMP%] {\\n  --network-margin-bottom: 8px;\\n  --network-message-background: var(--success);\\n  --network-message-online: block;\\n}\\n\\n.core-offline[_nghost-%COMP%], .core-offline   [_nghost-%COMP%] {\\n  --network-margin-bottom: 8px;\\n  --network-message-background: var(--danger);\\n  --network-message-offline: block;\\n}\\n\\nion-tab-bar[_ngcontent-%COMP%] {\\n  height: var(--menutabbar-size);\\n}\\nion-tab-bar[_ngcontent-%COMP%]   core-user-menu-button[_ngcontent-%COMP%] {\\n  align-items: center;\\n  display: flex;\\n  justify-content: center;\\n}\\nion-tab-bar[_ngcontent-%COMP%]   ion-tab-button.tab-selected[_ngcontent-%COMP%] {\\n  background: var(--background-selected);\\n}\\nion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-icon[_ngcontent-%COMP%] {\\n  text-overflow: unset;\\n  overflow: visible;\\n  text-align: center;\\n  font-size: 24px;\\n}\\nion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  font-weight: bold;\\n  border-radius: 10px;\\n  padding-left: 6px;\\n  padding-right: 6px;\\n  line-height: 14px;\\n  --background: var(--core-bottom-tabs-badge-color);\\n  --color: var(--core-bottom-tabs-badge-text-color);\\n}\\nion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%] {\\n  color: var(--core-bottom-tabs-badge-color);\\n  padding: 3px 6px 2px;\\n  top: 8px;\\n  min-width: 12px;\\n  font-size: 8px;\\n  font-weight: normal;\\n  box-sizing: border-box;\\n  position: absolute;\\n  z-index: 1;\\n}\\n@supports (inset-inline-start: 0) {\\n  ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%] {\\n    inset-inline-start: calc(50% + 6px);\\n  }\\n}\\n@supports not (inset-inline-start: 0) {\\n  ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%] {\\n    left: calc(50% + 6px);\\n  }\\n  [dir=rtl][_nghost-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%] {\\n    left: unset;\\n    right: unset;\\n    right: calc(50% + 6px);\\n  }\\n  [dir=rtl][_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%] {\\n    left: unset;\\n    right: unset;\\n    right: calc(50% + 6px);\\n  }\\n  ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%]:dir(rtl) {\\n    left: unset;\\n    right: unset;\\n    right: calc(50% + 6px);\\n  }\\n}\\n\\nion-tabs.placement-bottom[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-icon[_ngcontent-%COMP%] {\\n  margin-bottom: var(--network-margin-bottom);\\n  transition: margin 500ms ease-in-out, transform 300ms ease-in-out;\\n}\\nion-tabs.placement-bottom[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%], ion-tabs.placement-bottom[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n  top: 8px;\\n}\\nion-tabs.placement-bottom.tabshidden[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%] {\\n  pointer-events: none;\\n}\\nion-tabs.placement-bottom.tabshidden[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%] {\\n  height: auto;\\n}\\n\\nion-tabs.placement-side[_ngcontent-%COMP%] {\\n  flex-direction: row;\\n}\\nion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%] {\\n  order: -1;\\n  width: var(--menutabbar-size);\\n  height: calc(100% - var(--ion-safe-area-top) - var(--ion-safe-area-bottom));\\n  flex-direction: column;\\n  -webkit-border-end: var(--border);\\n  border-inline-end: var(--border);\\n  border-top: 0;\\n  justify-content: flex-start;\\n  -webkit-padding-start: var(--ion-safe-area-left);\\n  padding-inline-start: var(--ion-safe-area-left);\\n  -webkit-padding-end: 0px;\\n  padding-inline-end: 0px;\\n  padding-top: var(--ion-safe-area-top);\\n  padding-bottom: var(--ion-safe-area-bottom);\\n}\\nion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%] {\\n  --padding-start: 0;\\n  --padding-end: 0;\\n}\\n@supports (inset-inline-start: 0) {\\n  ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n    inset-inline-start: auto;\\n    inset-inline-end: 1px;\\n  }\\n}\\n@supports not (inset-inline-start: 0) {\\n  ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n    left: auto;\\n    right: 1px;\\n  }\\n  [dir=rtl][_nghost-%COMP%]   ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n    left: unset;\\n    right: unset;\\n    left: 1px;\\n    right: auto;\\n  }\\n  [dir=rtl][_ngcontent-%COMP%]   ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n    left: unset;\\n    right: unset;\\n    left: 1px;\\n    right: auto;\\n  }\\n  ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%]:dir(rtl) {\\n    left: unset;\\n    right: unset;\\n    left: 1px;\\n    right: auto;\\n  }\\n}\\nion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%], ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   core-user-menu-button[_ngcontent-%COMP%] {\\n  width: 100%;\\n  min-height: var(--menutabbar-size);\\n  flex: 0;\\n}\\nion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%], ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   ion-tab-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%], ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   core-user-menu-button[_ngcontent-%COMP%]   ion-icon.core-tab-badge[_ngcontent-%COMP%], ion-tabs.placement-side[_ngcontent-%COMP%]   ion-tab-bar[_ngcontent-%COMP%]   core-user-menu-button[_ngcontent-%COMP%]   ion-badge.core-tab-badge[_ngcontent-%COMP%] {\\n  top: calc(50% - 20px);\\n}\\n\\n.core-network-message[_ngcontent-%COMP%] {\\n  background: var(--network-message-background);\\n  pointer-events: none;\\n  position: absolute;\\n  bottom: 0;\\n  left: 0;\\n  right: 0;\\n  padding-left: 10px;\\n  padding-right: 10px;\\n  text-align: center;\\n  color: white;\\n  visibility: hidden;\\n  height: 0;\\n  transition: all 500ms ease-in-out;\\n  opacity: 0.8;\\n  z-index: 12;\\n  font-size: 12px;\\n}\\n.core-network-message[_ngcontent-%COMP%]   .core-online-message[_ngcontent-%COMP%] {\\n  display: var(--network-message-online);\\n}\\n.core-network-message[_ngcontent-%COMP%]   .core-offline-message[_ngcontent-%COMP%] {\\n  display: var(--network-message-offline);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvY29yZS9mZWF0dXJlcy9tYWlubWVudS9wYWdlcy9tZW51L21lbnUuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7OztFQUFBO0FDRUE7Ozs7RUFBQTtBQTRHQTs7RUFBQTtBQzlHQTs7OztFQUFBO0FDQUE7Ozs7RUFBQTtBQStEQTs7OztFQUFBO0FDN0RBO0VBU0ksNEJBQUE7RUFDQSx5Q0FBQTtFQUNBLCtCQUFBO0VBQ0EsOEJBQUE7RUFDQSw4QkFBQTtBQTRDSjtBQXhESTtFQUNJLDBDQUFBO0FBMERSO0FBdkRJO0VBQ0ksd0NBQUE7QUF5RFI7O0FBN0NJOztFQUNJLG1CQUFBO0VBQ0EscUNBQUE7RUFDQSwwQ0FBQTtFQUNBLHNGQUFBO0FBaURSOztBQTdDQTtFQUNJLDRCQUFBO0VBRUEsNENBQUE7RUFDQSwrQkFBQTtBQStDSjs7QUE1Q0E7RUFDSSw0QkFBQTtFQUVBLDJDQUFBO0VBQ0EsZ0NBQUE7QUE4Q0o7O0FBM0NBO0VBQ0ksOEJBQUE7QUE4Q0o7QUE1Q0k7RUFDSSxtQkFBQTtFQUNBLGFBQUE7RUFDQSx1QkFBQTtBQThDUjtBQTFDUTtFQUNJLHNDQUFBO0FBNENaO0FBekNRO0VBQ0ksb0JBQUE7RUFDQSxpQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQTJDWjtBQXhDUTtFQUNJLGVBQUE7RUFDQSxpQkFBQTtFQUNBLG1CQUFBO0VBQ0EsaUJBQUE7RUFDQSxrQkFBQTtFQUNBLGlCQUFBO0VBQ0EsaURBQUE7RUFDQSxpREFBQTtBQTBDWjtBQXZDUTtFQUNJLDBDQUFBO0VBQ0Esb0JBQUE7RUxtVlYsUUtsVjRCO0VBQ2xCLGVBQUE7RUFDQSxjQUFBO0VBQ0EsbUJBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EsVUFBQTtBQXlDWjtBTDhQTTtFQUNFO0lBQ0UsbUNLL1NxQztFQW1EN0M7QUFDRjtBTG1RTTtFQUNFO0lBRUkscUJLMVRtQztFQXdEN0M7RUxnR1c7SUFzS0QsV0FBQTtJQUNBLFlBQUE7SUFHQSxzQktsVW1DO0VBNkQ3QztFTGtHVztJQStKRCxXQUFBO0lBQ0EsWUFBQTtJQUdBLHNCS2xVbUM7RUFrRTdDO0VMb0hXO0lBd0lELFdBQUE7SUFDQSxZQUFBO0lBR0Esc0JLbFVtQztFQXVFN0M7QUFDRjs7QUEzRFE7RUFDSSwyQ0FBQTtFQUNBLGlFQUFBO0FBOERaO0FBM0RROztFQUVJLFFBQUE7QUE2RFo7QUFsRFE7RUFDSSxvQkFBQTtBQW9EWjtBQWxEWTtFQUNJLFlBQUE7QUFvRGhCOztBQTlDQTtFQUNJLG1CQUFBO0FBaURKO0FBL0NJO0VBQ0ksU0FBQTtFQUNBLDZCQUFBO0VBQ0EsMkVBQUE7RUFDQSxzQkFBQTtFTDBMSixpQ0UzTDJDO0VGNEwzQyxnQ0U1TDJDO0VHR3ZDLGFBQUE7RUFDQSwyQkFBQTtFTHFMSixnREtuTGlGO0VMb0xqRiwrQ0twTGlGO0VMcUxqRix3QktyTCtDO0VMc0wvQyx1Qkt0TCtDO0VMb01qRCxxQ0twTXVCO0VMcU12QiwyQ0tyTXNEO0FBc0R4RDtBQXBEUTtFQUNJLGtCQUFBO0VBQ0EsZ0JBQUE7QUFzRFo7QUw4TE07RUFDRTtJQUNFLHdCS3BQeUM7SUxxUHpDLHFCS3JQOEI7RUF5RHRDO0FBQ0Y7QUxrTU07RUFDRTtJQUVJLFVLL1B1QztJTGdRdkMsVUtoUTRCO0VBK0R0QztFTDhCVztJQXNLRCxXQUFBO0lBQ0EsWUFBQTtJQUVBLFNLdFE0QjtJTHVRNUIsV0t2UXVDO0VBcUVqRDtFTCtCVztJQStKRCxXQUFBO0lBQ0EsWUFBQTtJQUVBLFNLdFE0QjtJTHVRNUIsV0t2UXVDO0VBMkVqRDtFTGdEVztJQXdJRCxXQUFBO0lBQ0EsWUFBQTtJQUVBLFNLdFE0QjtJTHVRNUIsV0t2UXVDO0VBaUZqRDtBQUNGO0FBN0VRO0VBQ0ksV0FBQTtFQUNBLGtDQUFBO0VBQ0EsT0FBQTtBQStFWjtBQTdFWTs7O0VBRUkscUJBQUE7QUFnRmhCOztBQTFFQTtFQUNJLDZDQUFBO0VBQ0Esb0JBQUE7RUFDQSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxPQUFBO0VBQ0EsUUFBQTtFQUNBLGtCQUFBO0VBQ0EsbUJBQUE7RUFDQSxrQkFBQTtFQUNBLFlBQUE7RUFDQSxrQkFBQTtFQUNBLFNBQUE7RUFDQSxpQ0FBQTtFQUNBLFlBQUE7RUFDQSxXQUFBO0VBQ0EsZUFBQTtBQTZFSjtBQTNFSTtFQUNJLHNDQUFBO0FBNkVSO0FBMUVJO0VBQ0ksdUNBQUE7QUE0RVIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFwcCBHbG9iYWwgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgdGhlIGRpZmZlcmVudCBmaWxlcyB5b3Ugc2hvdWxkIGltcG9ydCB0byB1c2UgZ2xvYmFsIHZhcmlhYmxlcy5cbiAqL1xuXG4kZm9udC1wYXRoOiBcIi4uL2Fzc2V0cy9mb250c1wiO1xuJGFzc2V0cy1wYXRoOiBcIi4uL2Fzc2V0c1wiO1xuXG5AaW1wb3J0IFwiLi9oZWxwZXJzL2hlbHBlcnMuc2Nzc1wiO1xuQGltcG9ydCBcIi4vZ2xvYmFscy5jdXN0b20uc2Nzc1wiO1xuQGltcG9ydCBcIi4vZ2xvYmFscy52YXJpYWJsZXMuc2Nzc1wiO1xuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBzdHJpbmcgZnVuY3Rpb25zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3NcbiAqL1xuXG5cbi8vIFN0cmluZyBVdGlsaXR5IEZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gU3RyaW5nIFJlcGxhY2UgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItcmVwbGFjZSgkc3RyaW5nLCAkc2VhcmNoLCAkcmVwbGFjZTogXCJcIikge1xuICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VhcmNoKTtcblxuICBAaWYgJGluZGV4IHtcbiAgICBAcmV0dXJuIHN0ci1zbGljZSgkc3RyaW5nLCAxLCAkaW5kZXggLSAxKSArICRyZXBsYWNlICsgc3RyLXJlcGxhY2Uoc3RyLXNsaWNlKCRzdHJpbmcsICRpbmRleCArIHN0ci1sZW5ndGgoJHNlYXJjaCkpLCAkc2VhcmNoLCAkcmVwbGFjZSk7XG4gIH1cblxuICBAcmV0dXJuICRzdHJpbmc7XG59XG5cbi8vIFN0cmluZyBTcGxpdCBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5AZnVuY3Rpb24gc3RyLXNwbGl0KCRzdHJpbmcsICRzZXBhcmF0b3IpIHtcbiAgLy8gZW1wdHkgYXJyYXkvbGlzdFxuICAkc3BsaXQtYXJyOiAoKTtcbiAgLy8gZmlyc3QgaW5kZXggb2Ygc2VwYXJhdG9yIGluIHN0cmluZ1xuICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VwYXJhdG9yKTtcbiAgLy8gbG9vcCB0aHJvdWdoIHN0cmluZ1xuICBAd2hpbGUgJGluZGV4ICE9IG51bGwge1xuICAgIC8vIGdldCB0aGUgc3Vic3RyaW5nIGZyb20gdGhlIGZpcnN0IGNoYXJhY3RlciB0byB0aGUgc2VwYXJhdG9yXG4gICAgJGl0ZW06IHN0ci1zbGljZSgkc3RyaW5nLCAxLCAkaW5kZXggLSAxKTtcbiAgICAvLyBwdXNoIGl0ZW0gdG8gYXJyYXlcbiAgICAkc3BsaXQtYXJyOiBhcHBlbmQoJHNwbGl0LWFyciwgJGl0ZW0pO1xuICAgIC8vIHJlbW92ZSBpdGVtIGFuZCBzZXBhcmF0b3IgZnJvbSBzdHJpbmdcbiAgICAkc3RyaW5nOiBzdHItc2xpY2UoJHN0cmluZywgJGluZGV4ICsgMSk7XG4gICAgLy8gZmluZCBuZXcgaW5kZXggb2Ygc2VwYXJhdG9yXG4gICAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlcGFyYXRvcik7XG4gIH1cbiAgLy8gYWRkIHRoZSByZW1haW5pbmcgc3RyaW5nIHRvIGxpc3QgKHRoZSBsYXN0IGl0ZW0pXG4gICRzcGxpdC1hcnI6IGFwcGVuZCgkc3BsaXQtYXJyLCAkc3RyaW5nKTtcblxuICBAcmV0dXJuICRzcGxpdC1hcnI7XG59XG5cblxuLy8gU3RyaW5nIEV4dHJhY3QgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItZXh0cmFjdCgkc3RyaW5nLCAkc3RhcnQsICRlbmQpIHtcbiAgJHN0YXJ0LWluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHN0YXJ0KTtcblxuICBAaWYgJHN0YXJ0LWluZGV4IHtcbiAgICAkcG9zdDogc3RyLXNsaWNlKCRzdHJpbmcsICRzdGFydC1pbmRleCArIHN0ci1sZW5ndGgoJHN0YXJ0KSk7XG4gICAgJGVuZC1pbmRleDogc3RyLWluZGV4KCRwb3N0LCAkZW5kKTtcblxuICAgIEBpZiAkZW5kLWluZGV4IHtcbiAgICAgIEByZXR1cm4gc3RyLXNsaWNlKCRwb3N0LCAxLCAkZW5kLWluZGV4IC0gMSk7XG4gICAgfVxuICB9XG5cbiAgQHJldHVybiBudWxsO1xufVxuXG5cbi8vIFN0cmluZyBDb250YWlucyBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1jb250YWlucygkc3RyaW5nLCAkbmVlZGxlKSB7XG4gIEBpZiAodHlwZS1vZigkc3RyaW5nKSA9PSBzdHJpbmcpIHtcbiAgICBAcmV0dXJuIHN0ci1pbmRleCgkc3RyaW5nLCAkbmVlZGxlKSAhPSBudWxsO1xuICB9XG5cbiAgQHJldHVybiBmYWxzZTtcbn1cblxuXG4vLyBVUkwgRW5jb2RlIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gdXJsLWVuY29kZSgkdmFsKSB7XG4gICRzcGFjZXM6IHN0ci1yZXBsYWNlKCR2YWwsIFwiIFwiLCBcIiUyMFwiKTtcbiAgJGVuY29kZWQ6IHN0ci1yZXBsYWNlKCRzcGFjZXMsIFwiI1wiLCBcIiUyM1wiKTtcbiAgQHJldHVybiAkZW5jb2RlZDtcbn1cblxuXG4vLyBBZGQgUm9vdCBTZWxlY3RvclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFkZHMgYSByb290IHNlbGVjdG9yIHVzaW5nIGhvc3QgYmFzZWQgb24gdGhlIHNlbGVjdG9yIHBhc3NlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIGFkZC1yb290LXNlbGVjdG9yKCRyb290LCAkYWRkSG9zdFNlbGVjdG9yKSB7XG4gICRzZWxlY3RvcnM6IHN0ci1zcGxpdCgkcm9vdCwgXCIsXCIpO1xuXG4gICRsaXN0OiAoKTtcblxuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHNlbGVjdG9ycyB7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGNvbnRhaW5zIDpob3N0KCBpdCBtZWFucyBpdCBpcyB0YXJnZXRpbmcgYSBjbGFzcyBvbiB0aGUgaG9zdFxuICAgIC8vIGVsZW1lbnQgc28gd2UgbmVlZCB0byBjaGFuZ2UgaG93IHdlIHRhcmdldCBpdDpcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICBAaWYgc3RyLWNvbnRhaW5zKCRzZWxlY3RvciwgXCI6aG9zdChcIikge1xuICAgICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKVxuICAgICAgJHNoYWRvdy1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2VsZWN0b3IsIFwiOmhvc3QoXCIsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KTpob3N0KFwiKTtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRzaGFkb3ctZWxlbWVudCwgY29tbWEpO1xuXG4gICAgICAkbmV3LWVsZW1lbnQ6ICgpO1xuICAgICAgJGVsZW1lbnRzOiBzdHItc3BsaXQoJHNlbGVjdG9yLCBcIiBcIik7XG5cbiAgICAgIEBlYWNoICRlbGVtZW50IGluICRlbGVtZW50cyB7XG4gICAgICAgIEBpZiBzdHItY29udGFpbnMoJGVsZW1lbnQsIFwiOmhvc3QoXCIpIHtcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6ICRlbGVtZW50O1xuXG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgOmhvc3QoIGFuZCApIHNvIGFsbCB3ZSBoYXZlIGxlZnQgaXMgdGhlIGNsYXNzXG4gICAgICAgICAgLy8gaW5zaWRlIG9mIGl0OlxuICAgICAgICAgIC8vIDpob3N0KC5maXhlZCkgLT4gLmZpeGVkXG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsIFwiKVwiLCBcIlwiKTtcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgXCI6aG9zdChcIiwgXCJcIik7XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGNsYXNzIGJhY2sgaW5zaWRlIG9mIGhvc3Qgd2l0aCB0aGUgcnRsIHNlbGVjdG9yOlxuICAgICAgICAgIC8vIC5maXhlZCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgJHNjb3BlZC1lbGVtZW50LCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSkjeyRzY29wZWQtZWxlbWVudH1cIik7XG5cbiAgICAgICAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkc2NvcGVkLWVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfSBAZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGJhY2sgYW55IHNlbGVjdG9ycyB0aGF0IGZvbGxvd2VkIHRoZSBob3N0IGFmdGVyIHRyYW5zZm9ybWluZyB0aGVcbiAgICAgICAgICAvLyBmaXJzdCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCguZml4ZWQpIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZCA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRuZXctZWxlbWVudCwgY29tbWEpO1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBjb250YWlucyA6aG9zdCB3aXRob3V0IGEgcGFyYW50aGVzZXNcbiAgICAvLyBpdCBtZWFucyBpdCBpcyB0YXJnZXRpbmcganVzdCB0aGUgaG9zdFxuICAgIC8vIGVsZW1lbnQgc28gd2UgY2FuIGNoYW5nZSBpdCB0byBsb29rIGZvciBob3N0LWNvbnRleHRcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0XCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgIC8vIC0tPiA6aG9zdDpkaXIocnRsKVxuICAgIH0gQGVsc2UgaWYgc3RyLWNvbnRhaW5zKCRzZWxlY3RvciwgXCI6aG9zdFwiKSB7XG4gICAgICAkbmV3LWVsZW1lbnQ6ICgpO1xuICAgICAgJGVsZW1lbnRzOiBzdHItc3BsaXQoJHNlbGVjdG9yLCBcIiBcIik7XG5cbiAgICAgIEBlYWNoICRlbGVtZW50IGluICRlbGVtZW50cyB7XG4gICAgICAgIEBpZiBzdHItY29udGFpbnMoJGVsZW1lbnQsIFwiOmhvc3RcIikge1xuICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIDpob3N0IHdpdGggdGhlIGFkZEhvc3RTZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAgICAgICAkdXBkYXRlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkZWxlbWVudCwgXCI6aG9zdFwiLCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSlcIik7XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGZpbmFsIHNlbGVjdG9yIGFmdGVyIGFsbCB0cmFuc2Zvcm1hdGlvbnM6XG4gICAgICAgICAgLy8gOmhvc3QgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkdXBkYXRlZC1lbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH0gQGVsc2Uge1xuICAgICAgICAgIC8vIEFkZCBiYWNrIGFueSBzZWxlY3RvcnMgdGhhdCBmb2xsb3dlZCB0aGUgaG9zdCBhZnRlciB0cmFuc2Zvcm1pbmcgdGhlXG4gICAgICAgICAgLy8gZmlyc3Qgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QgOjpzbG90dGVkKGlvbi1pY29uKSAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJGVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkbmV3LWVsZW1lbnQsIGNvbW1hKTtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgZG9lcyBub3QgY29udGFpbiBob3N0IGF0IGFsbCBpdCBpcyBlaXRoZXIgYSBzaGFkb3dcbiAgICAvLyBvciBub3JtYWwgZWxlbWVudCBzbyBhcHBlbmQgYm90aCB0aGUgYWRkSG9zdFNlbGVjdG9yIGFuZCBob3N0LWNvbnRleHRcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcImlvbi1jb21wb25lbnRcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pIGlvbi1jb21wb25lbnRcbiAgICAvLyAtLT4gW2Rpcj1ydGxdIGlvbi1jb21wb25lbnRcbiAgICB9IEBlbHNlIHtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsIFwiI3skYWRkSG9zdFNlbGVjdG9yfSAjeyRzZWxlY3Rvcn1cIiwgY29tbWEpO1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pICN7JHNlbGVjdG9yfVwiLCBjb21tYSk7XG4gICAgfVxuICB9XG5cbiAgQHJldHVybiAkbGlzdDtcbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgY29sb3IgZnVuY3Rpb25zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2Nzc1xuICovXG5cbi8vIEdldHMgdGhlIGFjdGl2ZSBjb2xvcidzIGNzcyB2YXJpYWJsZSBmcm9tIGEgdmFyaWF0aW9uLiBBbHBoYSBpcyBvcHRpb25hbC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gY3VycmVudC1jb2xvcihiYXNlKSA9PiB2YXIoLS1pb24tY29sb3ItYmFzZSlcbi8vIGN1cnJlbnQtY29sb3IoY29udHJhc3QsIDAuMSkgPT4gcmdiYSh2YXIoLS1pb24tY29sb3ItY29udHJhc3QtcmdiKSwgMC4xKVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBjdXJyZW50LWNvbG9yKCR2YXJpYXRpb24sICRhbHBoYTogbnVsbCkge1xuICBAaWYgJGFscGhhID09IG51bGwge1xuICAgIEByZXR1cm4gdmFyKC0taW9uLWNvbG9yLSN7JHZhcmlhdGlvbn0pO1xuICB9IEBlbHNlIHtcbiAgICBAcmV0dXJuIHJnYmEodmFyKC0taW9uLWNvbG9yLSN7JHZhcmlhdGlvbn0tcmdiKSwgI3skYWxwaGF9KTtcbiAgfVxufVxuXG4vLyBHZXRzIHRoZSBzcGVjaWZpYyBjb2xvcidzIGNzcyB2YXJpYWJsZSBmcm9tIHRoZSBuYW1lIGFuZCB2YXJpYXRpb24uIEFscGhhL3JnYiBhcmUgb3B0aW9uYWwuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXhhbXBsZSB1c2FnZTpcbi8vIGlvbi1jb2xvcihwcmltYXJ5LCBiYXNlKSA9PiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSwgIzM4ODBmZilcbi8vIGlvbi1jb2xvcihzZWNvbmRhcnksIGNvbnRyYXN0KSA9PiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5LWNvbnRyYXN0KVxuLy8gaW9uLWNvbG9yKHByaW1hcnksIGJhc2UsIDAuNSkgPT4gcmdiYSh2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1yZ2IsIDU2LCAxMjgsIDI1NSksIDAuNSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gaW9uLWNvbG9yKCRuYW1lLCAkdmFyaWF0aW9uLCAkYWxwaGE6IG51bGwsICRyZ2I6IG51bGwpIHtcbiAgJHZhbHVlczogbWFwLWdldCgkY29sb3JzLCAkbmFtZSk7XG4gICR2YWx1ZTogbWFwLWdldCgkdmFsdWVzLCAkdmFyaWF0aW9uKTtcbiAgJHZhcmlhYmxlOiAtLWlvbi1jb2xvci0jeyRuYW1lfS0jeyR2YXJpYXRpb259O1xuXG4gIEBpZiAoJHZhcmlhdGlvbiA9PSBiYXNlKSB7XG4gICAgJHZhcmlhYmxlOiAtLWlvbi1jb2xvci0jeyRuYW1lfTtcbiAgfVxuXG4gIEBpZiAoJGFscGhhKSB7XG4gICAgJHZhbHVlOiBjb2xvci10by1yZ2ItbGlzdCgkdmFsdWUpO1xuICAgIEByZXR1cm4gcmdiYSh2YXIoI3skdmFyaWFibGV9LXJnYiwgJHZhbHVlKSwgJGFscGhhKTtcbiAgfVxuICBAaWYgKCRyZ2IpIHtcbiAgICAkdmFsdWU6IGNvbG9yLXRvLXJnYi1saXN0KCR2YWx1ZSk7XG4gICAgJHZhcmlhYmxlOiAjeyR2YXJpYWJsZX0tcmdiO1xuICB9XG5cbiAgQHJldHVybiB2YXIoI3skdmFyaWFibGV9LCAkdmFsdWUpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggYmxhY2sgdG8gY3JlYXRlIGl0cyBzaGFkZS5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXNoYWRlKCRjb2xvcikge1xuICBAcmV0dXJuIG1peCgjMDAwLCAkY29sb3IsIDEyJSk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCB3aGl0ZSB0byBjcmVhdGUgaXRzIHRpbnQuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci10aW50KCRjb2xvcikge1xuICBAcmV0dXJuIG1peCgjZmZmLCAkY29sb3IsIDEwJSk7XG59XG5cbi8vIENvbnZlcnRzIGEgY29sb3IgdG8gYSBjb21tYSBzZXBhcmF0ZWQgcmdiLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBjb2xvci10by1yZ2ItbGlzdCgkY29sb3IpIHtcbiAgQHJldHVybiAje3JlZCgkY29sb3IpfSwje2dyZWVuKCRjb2xvcil9LCN7Ymx1ZSgkY29sb3IpfTtcbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgbWl4aW5zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5taXhpbnMuc2Nzc1xuICovXG5cbkBtaXhpbiBpbnB1dC1jb3ZlcigpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24oMCwgbnVsbCwgbnVsbCwgMCk7XG4gIEBpbmNsdWRlIG1hcmdpbigwKTtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcblxuICBib3JkZXI6IDA7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgYXBwZWFyYW5jZTogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcblxuICAmOjotbW96LWZvY3VzLWlubmVyIHtcbiAgICBib3JkZXI6IDA7XG4gIH1cbn1cblxuQG1peGluIHZpc3VhbGx5LWhpZGRlbigpIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcblxuICBib3JkZXI6IDA7XG4gIG91dGxpbmU6IDA7XG4gIGNsaXA6IHJlY3QoMCAwIDAgMCk7XG5cbiAgb3BhY2l0eTogMDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbn1cblxuQG1peGluIHRleHQtaW5oZXJpdCgpIHtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiAgZm9udC1zdHlsZTogaW5oZXJpdDtcbiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7XG4gIGxldHRlci1zcGFjaW5nOiBpbmhlcml0O1xuICB0ZXh0LWRlY29yYXRpb246IGluaGVyaXQ7XG4gIHRleHQtaW5kZW50OiBpbmhlcml0O1xuICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xuICB0ZXh0LXRyYW5zZm9ybTogaW5oZXJpdDtcbiAgdGV4dC1hbGlnbjogaW5oZXJpdDtcbiAgd2hpdGUtc3BhY2U6IGluaGVyaXQ7XG4gIGNvbG9yOiBpbmhlcml0O1xufVxuXG5AbWl4aW4gYnV0dG9uLXN0YXRlKCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbigwLCAwLCAwLCAwKTtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgY29udGVudDogXCJcIjtcblxuICBvcGFjaXR5OiAwO1xufVxuXG4vLyBGb250IHNtb290aGluZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIGZvbnQtc21vb3RoaW5nKCkge1xuICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlO1xuICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcbn1cblxuLy8gR2V0IHRoZSBrZXkgZnJvbSBhIG1hcCBiYXNlZCBvbiB0aGUgaW5kZXhcbkBmdW5jdGlvbiBpbmRleC10by1rZXkoJG1hcCwgJGluZGV4KSB7XG4gICRrZXlzOiBtYXAta2V5cygkbWFwKTtcblxuICBAcmV0dXJuIG50aCgka2V5cywgJGluZGV4KTtcbn1cblxuXG4vLyBCcmVha3BvaW50IE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIEJyZWFrcG9pbnQgdmlld3BvcnQgc2l6ZXMgYW5kIG1lZGlhIHF1ZXJpZXMuXG4vL1xuLy8gQnJlYWtwb2ludHMgYXJlIGRlZmluZWQgYXMgYSBtYXAgb2YgKG5hbWU6IG1pbmltdW0gd2lkdGgpLCBvcmRlciBmcm9tIHNtYWxsIHRvIGxhcmdlOlxuLy9cbi8vICAgICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweClcbi8vXG4vLyBUaGUgbWFwIGRlZmluZWQgaW4gdGhlIGAkc2NyZWVuLWJyZWFrcG9pbnRzYCBnbG9iYWwgdmFyaWFibGUgaXMgdXNlZCBhcyB0aGUgYCRicmVha3BvaW50c2AgYXJndW1lbnQgYnkgZGVmYXVsdC5cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIE1pbmltdW0gYnJlYWtwb2ludCB3aWR0aC4gTnVsbCBmb3IgdGhlIHNtYWxsZXN0IChmaXJzdCkgYnJlYWtwb2ludC5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW1pbihzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIDU3NnB4XG5AZnVuY3Rpb24gYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWluOiBtYXAtZ2V0KCRicmVha3BvaW50cywgJG5hbWUpO1xuXG4gIEByZXR1cm4gaWYoJG5hbWUgIT0gaW5kZXgtdG8ta2V5KCRicmVha3BvaW50cywgMSksICRtaW4sIG51bGwpO1xufVxuXG4vLyBSZXR1cm5zIGEgYmxhbmsgc3RyaW5nIGlmIHNtYWxsZXN0IGJyZWFrcG9pbnQsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBuYW1lIHdpdGggYSBkYXNoIGluZnJvbnQuXG4vLyBVc2VmdWwgZm9yIG1ha2luZyByZXNwb25zaXZlIHV0aWxpdGllcy5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LWluZml4KHhzLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgXCJcIiAgKFJldHVybnMgYSBibGFuayBzdHJpbmcpXG4vLyAgICA+PiBicmVha3BvaW50LWluZml4KHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgXCItc21cIlxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtaW5maXgoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICBAcmV0dXJuIGlmKGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHMpID09IG51bGwsIFwiXCIsIFwiLSN7JG5hbWV9XCIpO1xufVxuXG4vLyBNZWRpYSBvZiBhdCBsZWFzdCB0aGUgbWluaW11bSBicmVha3BvaW50IHdpZHRoLiBObyBxdWVyeSBmb3IgdGhlIHNtYWxsZXN0IGJyZWFrcG9pbnQuXG4vLyBNYWtlcyB0aGUgQGNvbnRlbnQgYXBwbHkgdG8gdGhlIGdpdmVuIGJyZWFrcG9pbnQgYW5kIHdpZGVyLlxuQG1peGluIG1lZGlhLWJyZWFrcG9pbnQtdXAoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWluOiBicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzKTtcbiAgQGlmICRtaW4ge1xuICAgIEBtZWRpYSAobWluLXdpZHRoOiAkbWluKSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbi8vIE5hbWUgb2YgdGhlIG5leHQgYnJlYWtwb2ludCwgb3IgbnVsbCBmb3IgdGhlIGxhc3QgYnJlYWtwb2ludC5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20pXG4vLyAgICBtZFxuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgbWRcbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSwgJGJyZWFrcG9pbnQtbmFtZXM6ICh4cyBzbSBtZCBsZyB4bCkpXG4vLyAgICBtZFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbmV4dCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzLCAkYnJlYWtwb2ludC1uYW1lczogbWFwLWtleXMoJGJyZWFrcG9pbnRzKSkge1xuICAkbjogaW5kZXgoJGJyZWFrcG9pbnQtbmFtZXMsICRuYW1lKTtcbiAgQHJldHVybiBpZigkbiA8IGxlbmd0aCgkYnJlYWtwb2ludC1uYW1lcyksIG50aCgkYnJlYWtwb2ludC1uYW1lcywgJG4gKyAxKSwgbnVsbCk7XG59XG5cbi8vIE1heGltdW0gYnJlYWtwb2ludCB3aWR0aC4gTnVsbCBmb3IgdGhlIHNtYWxsZXN0IChmaXJzdCkgYnJlYWtwb2ludC5cbi8vIFRoZSBtYXhpbXVtIHZhbHVlIGlzIHJlZHVjZWQgYnkgMC4wMnB4IHRvIHdvcmsgYXJvdW5kIHRoZSBsaW1pdGF0aW9ucyBvZlxuLy8gYG1pbi1gIGFuZCBgbWF4LWAgcHJlZml4ZXMgYW5kIHZpZXdwb3J0cyB3aXRoIGZyYWN0aW9uYWwgd2lkdGhzLlxuLy9cbi8vIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvbWVkaWFxdWVyaWVzLTQvI21xLW1pbi1tYXhcbi8vIFVzZXMgMC4wMnB4IHJhdGhlciB0aGFuIDAuMDFweCB0byB3b3JrIGFyb3VuZCBhIGN1cnJlbnQgcm91bmRpbmcgYnVnIGluIFNhZmFyaS5cdC8vIFVzZXMgMC4wMnB4IHJhdGhlciB0aGFuIDAuMDFweCB0byB3b3JrIGFyb3VuZCBhIGN1cnJlbnQgcm91bmRpbmcgYnVnIGluIFNhZmFyaS5cbi8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4MjYxXHQvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3ODI2MVxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbWF4KG1kLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgNzY3Ljk4cHhcbkBmdW5jdGlvbiBicmVha3BvaW50LW1heCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtYXg6IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbmFtZSk7XG4gIEByZXR1cm4gaWYoJG1heCBhbmQgJG1heCA+IDAsICRtYXggLSAuMDIsIG51bGwpO1xufVxuXG4vLyBNZWRpYSBvZiBhdCBtb3N0IHRoZSBtYXhpbXVtIGJyZWFrcG9pbnQgd2lkdGguIE5vIHF1ZXJ5IGZvciB0aGUgbGFyZ2VzdCBicmVha3BvaW50LlxuLy8gTWFrZXMgdGhlIEBjb250ZW50IGFwcGx5IHRvIHRoZSBnaXZlbiBicmVha3BvaW50IGFuZCBuYXJyb3dlci5cbkBtaXhpbiBtZWRpYS1icmVha3BvaW50LWRvd24oJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWF4OiBicmVha3BvaW50LW1heCgkbmFtZSwgJGJyZWFrcG9pbnRzKTtcbiAgQGlmICRtYXgge1xuICAgIEBtZWRpYSAobWF4LXdpZHRoOiAkbWF4KSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cblxuLy8gVGV4dCBEaXJlY3Rpb24gLSBsdHIgLyBydGxcbi8vXG4vLyBDU1MgZGVmYXVsdHMgdG8gdXNlIHRoZSBsdHIgY3NzLCBhbmQgYWRkcyBbZGlyPXJ0bF0gc2VsZWN0b3JzXG4vLyB0byBvdmVycmlkZSBsdHIgZGVmYXVsdHMuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtdWx0aS1kaXIoKSB7XG4gIEBjb250ZW50O1xuXG4gIC8vICRyb290OiAjeyZ9O1xuICAvLyBAYXQtcm9vdCBbZGlyXSB7XG4gIC8vICAgI3skcm9vdH0ge1xuICAvLyAgICAgQGNvbnRlbnQ7XG4gIC8vICAgfVxuICAvLyB9XG59XG5cbkBtaXhpbiBydGwoKSB7XG4gICRyb290OiAjeyZ9O1xuXG4gICRyb290U3BsaXQ6IHN0ci1zcGxpdCgkcm9vdCwgXCIsXCIpO1xuICAkc2VsZWN0b3JzOiAje2FkZC1yb290LXNlbGVjdG9yKCRyb290LCBcIltkaXI9cnRsXVwiKX07XG4gICRzZWxlY3RvcnNTcGxpdDogc3RyLXNwbGl0KCRzZWxlY3RvcnMsIFwiLFwiKTtcblxuICAkaG9zdENvbnRleHRTZWxlY3RvcnM6ICgpO1xuICAkcmVzdFNlbGVjdG9yczogKCk7XG4gICRkaXJTZWxlY3RvcnM6ICgpO1xuXG4gIC8vIFNlbGVjdG9ycyBtdXN0IGJlIHNwbGl0IGludG8gaW5kaXZpZHVhbCBzZWxlY3RvcnMgaW4gY2FzZSB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IHN1cHBvcnQgYSBzcGVjaWZpYyBzZWxlY3Rvci5cbiAgLy8gRm9yIGV4YW1wbGUsIEZpcmVmb3ggYW5kIFNhZmFyaSBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAuXG4gIC8vIElmIGFuIGludmFsaWQgc2VsZWN0b3IgaXMgdXNlZCwgdGhlbiB0aGUgZW50aXJlIGdyb3VwIG9mIHNlbGVjdG9yc1xuICAvLyB3aWxsIGJlIGlnbm9yZWQuXG4gIC8vIEBsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMtMy8jZ3JvdXBpbmdcbiAgQGVhY2ggJHNlbGVjdG9yIGluICRzZWxlY3RvcnNTcGxpdCB7XG4gICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICBAaWYgc3RyLWluZGV4KCRzZWxlY3RvciwgXCI6aG9zdC1jb250ZXh0XCIpIHtcbiAgICAgICRob3N0Q29udGV4dFNlbGVjdG9yczogYXBwZW5kKCRob3N0Q29udGV4dFNlbGVjdG9ycywgJHNlbGVjdG9yLCBjb21tYSk7XG4gICAgfSBAZWxzZSB7XG4gICAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgICAgJHJlc3RTZWxlY3RvcnM6IGFwcGVuZCgkcmVzdFNlbGVjdG9ycywgJHNlbGVjdG9yLCBjb21tYSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IENocm9tZS5cbiAgQGlmIGxlbmd0aCgkaG9zdENvbnRleHRTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skaG9zdENvbnRleHRTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBhbGwgYnJvd3NlcnMuXG4gIEBpZiBsZW5ndGgoJHJlc3RTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skcmVzdFNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgYnJvd3NlciBjYW4gc3VwcG9ydCBgOmRpcigpYCwgdGhlbiBhZGQgdGhlIGA6ZGlyKClgIHNlbGVjdG9ycy5cbiAgLy8gQHN1cHBvcnRzIHNlbGVjdG9yKDpkaXIocnRsKSkgeyAvLyBAIElNUE9UQU5UIE5PVEU6IFRoaXMgaGFzIGJlZW4gcmVtb3ZlZCBiZWNhdXNlIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gY3VycmVudCBTQ1NTXG4gIC8vIEFkZGluZyA6ZGlyKCkgaW4gY2FzZSB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAgYW5kIGRvZXMgc3VwcG9ydCBgOmRpcigpYC5cbiAgLy8gYDpob3N0LWNvbnRleHQoKWAgaXMgYWRkZWQ6XG4gIC8vIC0gdGhyb3VnaCB0aGUgYGFkZC1yb290LXNlbGVjdG9yKClgIGZ1bmN0aW9uLlxuICAvLyAtIGZpcnN0IHNvIHRoYXQgaXQgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGA6ZGlyKClgLlxuICAvLyBGb3IgZXhhbXBsZSxcbiAgLy8gLSBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCwgYnV0IGRvZXMgc3VwcG9ydCBgOmRpcigpYC5cbiAgLy8gLSBTYWZhcmkgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLCBidXQgU2FmYXJpIDE2LjQrIHN1cHBvcnRzIGA6ZGlyKClgXG4gIC8vIEBsaW5rIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzEzOTY2L3dlYmtpdC1mZWF0dXJlcy1pbi1zYWZhcmktMTYtNC9cbiAgQGVhY2ggJHNlbGVjdG9yIGluICRyb290U3BsaXQge1xuICAgICRkaXJTZWxlY3RvcjogXCIjeyRzZWxlY3Rvcn06ZGlyKHJ0bClcIjtcbiAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgICRkaXJTZWxlY3RvcnM6IGFwcGVuZCgkZGlyU2VsZWN0b3JzLCAkZGlyU2VsZWN0b3IsIGNvbW1hKTtcbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBGaXJlZm94LlxuICBAaWYgbGVuZ3RoKCRkaXJTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skZGlyU2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cbiAgLy99XG59XG5cbkBtaXhpbiBsdHIoKSB7XG4gIEBjb250ZW50O1xufVxuXG5cbi8vIFNWRyBCYWNrZ3JvdW5kIEltYWdlIE1peGluXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN2Z1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRzdmcsICRmbGlwLXJ0bDogZmFsc2UpIHtcbiAgJHVybDogdXJsLWVuY29kZSgkc3ZnKTtcbiAgJHZpZXdCb3g6IHN0ci1zcGxpdChzdHItZXh0cmFjdCgkc3ZnLCBcInZpZXdCb3g9J1wiLCBcIidcIiksIFwiIFwiKTtcblxuICBAaWYgJGZsaXAtcnRsICE9IHRydWUgb3IgJHZpZXdCb3ggPT0gbnVsbCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skdXJsfVwiKTtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgICR0cmFuc2Zvcm06IFwidHJhbnNmb3JtPSd0cmFuc2xhdGUoI3tudGgoJHZpZXdCb3gsIDMpfSwgMCkgc2NhbGUoLTEsIDEpJ1wiO1xuICAgICRmbGlwcGVkLXVybDogJHN2ZztcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8cGF0aFwiLCBcIjxwYXRoICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPGxpbmVcIiwgXCI8bGluZSAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxwb2x5Z29uXCIsIFwiPHBvbHlnb24gI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHVybC1lbmNvZGUoJGZsaXBwZWQtdXJsKTtcblxuICAgIEBpbmNsdWRlIGx0ciAoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyR1cmx9XCIpO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyRmbGlwcGVkLXVybH1cIik7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBwcm9wZXJ0eSBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHByb3BlcnR5LWhvcml6b250YWwoJHByb3AsICRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpZiAkc3RhcnQgPT0gMCBhbmQgJGVuZCA9PSAwIHtcbiAgICAjeyRwcm9wfS1sZWZ0OiAkc3RhcnQ7XG4gICAgI3skcHJvcH0tcmlnaHQ6ICRlbmQ7XG5cbiAgfSBAZWxzZSB7XG4gICAgLXdlYmtpdC0jeyRwcm9wfS1zdGFydDogJHN0YXJ0O1xuICAgICN7JHByb3B9LWlubGluZS1zdGFydDogJHN0YXJ0O1xuICAgIC13ZWJraXQtI3skcHJvcH0tZW5kOiAkZW5kO1xuICAgICN7JHByb3B9LWlubGluZS1lbmQ6ICRlbmQ7XG4gIH1cbn1cblxuLy8gQWRkIHByb3BlcnR5IGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRwcm9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge2Jvb2xlYW59ICRjb250ZW50IGluY2x1ZGUgY29udGVudCBvciB1c2UgZGVmYXVsdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHByb3BlcnR5KCRwcm9wLCAkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbCgkcHJvcCwgJHN0YXJ0LCAkZW5kKTtcbiAgI3skcHJvcH0tdG9wOiAkdG9wO1xuICAjeyRwcm9wfS1ib3R0b206ICRib3R0b207XG59XG5cbi8vIEFkZCBwYWRkaW5nIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwocGFkZGluZywgJHN0YXJ0LCAkZW5kKTtcbn1cblxuLy8gQWRkIHBhZGRpbmcgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcGFkZGluZygkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkocGFkZGluZywgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIG1hcmdpbiBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIG1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwobWFyZ2luLCAkc3RhcnQsICRlbmQpO1xufVxuXG4vLyBBZGQgbWFyZ2luIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIG1hcmdpbigkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkobWFyZ2luLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgcG9zaXRpb24gaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydCAtIGFtb3VudCB0byBwb3NpdGlvbiBzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmQgLSBhbW91bnQgdG8gbGVmdDogMDsgZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcG9zaXRpb24taG9yaXpvbnRhbCgkc3RhcnQ6IG51bGwsICRlbmQ6IG51bGwpIHtcbiAgQGlmICRzdGFydCA9PSAkZW5kIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBsZWZ0OiAkc3RhcnQ7XG4gICAgICByaWdodDogJGVuZDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBhdC1yb290IHtcbiAgICAgIEBzdXBwb3J0cyAoaW5zZXQtaW5saW5lLXN0YXJ0OiAwKSB7XG4gICAgICAgICYge1xuICAgICAgICAgIGluc2V0LWlubGluZS1zdGFydDogJHN0YXJ0O1xuICAgICAgICAgIGluc2V0LWlubGluZS1lbmQ6ICRlbmQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIEZXLTM3NjZcbiAgICBAYXQtcm9vdCB7XG4gICAgICBAc3VwcG9ydHMgbm90IChpbnNldC1pbmxpbmUtc3RhcnQ6IDApIHtcbiAgICAgICAgJiB7XG4gICAgICAgICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgICAgICAgbGVmdDogJHN0YXJ0O1xuICAgICAgICAgICAgcmlnaHQ6ICRlbmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgICAgICAgIGxlZnQ6IHVuc2V0O1xuICAgICAgICAgICAgcmlnaHQ6IHVuc2V0O1xuXG4gICAgICAgICAgICBsZWZ0OiAkZW5kO1xuICAgICAgICAgICAgcmlnaHQ6ICRzdGFydDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHBvc2l0aW9uIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBvc2l0aW9uKCR0b3A6IG51bGwsICRlbmQ6IG51bGwsICRib3R0b206IG51bGwsICRzdGFydDogbnVsbCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZCk7XG4gIHRvcDogJHRvcDtcbiAgYm90dG9tOiAkYm90dG9tO1xufVxuXG4vLyBBZGQgYm9yZGVyIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIGJvcmRlcigkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkoYm9yZGVyLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgYm9yZGVyIHJhZGl1cyBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wLXN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcC1lbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tLWVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b20tc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBib3JkZXItcmFkaXVzKCR0b3Atc3RhcnQsICR0b3AtZW5kOiAkdG9wLXN0YXJ0LCAkYm90dG9tLWVuZDogJHRvcC1zdGFydCwgJGJvdHRvbS1zdGFydDogJHRvcC1lbmQpIHtcbiAgQGlmICR0b3Atc3RhcnQgPT0gJHRvcC1lbmQgYW5kICR0b3Atc3RhcnQgPT0gJGJvdHRvbS1lbmQgYW5kICR0b3Atc3RhcnQgPT0gJGJvdHRvbS1zdGFydCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYm9yZGVyLXJhZGl1czogJHRvcC1zdGFydDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogJHRvcC1lbmQ7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogJGJvdHRvbS1lbmQ7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAkYm90dG9tLXN0YXJ0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR0b3AtZW5kO1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogJGJvdHRvbS1zdGFydDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICRib3R0b20tZW5kO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgZGlyZWN0aW9uIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRkaXIgLSBEaXJlY3Rpb24gb24gTFRSXG5AbWl4aW4gZGlyZWN0aW9uKCRkaXIpIHtcbiAgJG90aGVyLWRpcjogbnVsbDtcblxuICBAaWYgJGRpciA9PSBsdHIge1xuICAgICRvdGhlci1kaXI6IHJ0bDtcbiAgfSBAZWxzZSB7XG4gICAgJG90aGVyLWRpcjogbHRyO1xuICB9XG5cbiAgQGluY2x1ZGUgbHRyKCkge1xuICAgIGRpcmVjdGlvbjogJGRpcjtcbiAgfVxuICBAaW5jbHVkZSBydGwoKSB7XG4gICAgZGlyZWN0aW9uOiAkb3RoZXItZGlyO1xuICB9XG59XG5cbi8vIEFkZCBmbG9hdCBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc2lkZVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRkZWNvcmF0b3IgLSAhaW1wb3J0YW50XG5AbWl4aW4gZmxvYXQoJHNpZGUsICRkZWNvcmF0b3I6IG51bGwpIHtcbiAgQGlmICRzaWRlID09IHN0YXJ0IHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBmbG9hdDogbGVmdCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBmbG9hdDogcmlnaHQgJGRlY29yYXRvcjtcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHNpZGUgPT0gZW5kIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBmbG9hdDogcmlnaHQgJGRlY29yYXRvcjtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgZmxvYXQ6IGxlZnQgJGRlY29yYXRvcjtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGZsb2F0OiAkc2lkZSAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYmFja2dyb3VuZC1wb3NpdGlvbigkaG9yaXpvbnRhbCwgJGhvcml6b250YWwtYW1vdW50OiBudWxsLCAkdmVydGljYWw6IG51bGwsICR2ZXJ0aWNhbC1hbW91bnQ6IG51bGwpIHtcbiAgQGlmICRob3Jpem9udGFsID09IHN0YXJ0IG9yICRob3Jpem9udGFsID09IGVuZCB7XG4gICAgJGhvcml6b250YWwtbHRyOiBudWxsO1xuICAgICRob3Jpem9udGFsLXJ0bDogbnVsbDtcbiAgICBAaWYgJGhvcml6b250YWwgPT0gc3RhcnQge1xuICAgICAgJGhvcml6b250YWwtbHRyOiBsZWZ0O1xuICAgICAgJGhvcml6b250YWwtcnRsOiByaWdodDtcbiAgICB9IEBlbHNlIHtcbiAgICAgICRob3Jpem9udGFsLWx0cjogcmlnaHQ7XG4gICAgICAkaG9yaXpvbnRhbC1ydGw6IGxlZnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwtbHRyICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwtcnRsICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIHRyYW5zZm9ybS1vcmlnaW4oJHgtYXhpcywgJHktYXhpczogbnVsbCkge1xuICBAaWYgJHgtYXhpcyA9PSBzdGFydCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkeC1heGlzID09IGVuZCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkeC1heGlzID09IGxlZnQgb3IgJHgtYXhpcyA9PSByaWdodCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHgtYXhpcyAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHgtYXhpcyAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjYWxjKDEwMCUgLSAjeyR4LWF4aXN9KSAkeS1heGlzO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdHJhbnNmb3JtIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0cmFuc2Zvcm1zIC0gY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgdHJhbnNmb3Jtc1xuQG1peGluIHRyYW5zZm9ybSgkdHJhbnNmb3Jtcy4uLikge1xuICAkZXh0cmE6IG51bGw7XG5cbiAgJHg6IG51bGw7XG4gICRsdHItdHJhbnNsYXRlOiBudWxsO1xuICAkcnRsLXRyYW5zbGF0ZTogbnVsbDtcblxuICBAZWFjaCAkdHJhbnNmb3JtIGluICR0cmFuc2Zvcm1zIHtcbiAgICBAaWYgKHN0ci1pbmRleCgkdHJhbnNmb3JtLCB0cmFuc2xhdGUzZCkpIHtcbiAgICAgICR0cmFuc2Zvcm06IHN0ci1yZXBsYWNlKCR0cmFuc2Zvcm0sICd0cmFuc2xhdGUzZCgnKTtcbiAgICAgICR0cmFuc2Zvcm06IHN0ci1yZXBsYWNlKCR0cmFuc2Zvcm0sICcpJyk7XG5cbiAgICAgICRjb29yZGluYXRlczogc3RyLXNwbGl0KCR0cmFuc2Zvcm0sICcsJyk7XG5cbiAgICAgICR4OiBudGgoJGNvb3JkaW5hdGVzLCAxKTtcbiAgICAgICR5OiBudGgoJGNvb3JkaW5hdGVzLCAyKTtcbiAgICAgICR6OiBudGgoJGNvb3JkaW5hdGVzLCAzKTtcblxuICAgICAgJGx0ci10cmFuc2xhdGU6IHRyYW5zbGF0ZTNkKCR4LCAkeSwgJHopO1xuICAgICAgJHJ0bC10cmFuc2xhdGU6IHRyYW5zbGF0ZTNkKGNhbGMoLTEgKiAjeyR4fSksICR5LCAkeik7XG4gICAgfSBAZWxzZSB7XG4gICAgICBAaWYgJGV4dHJhID09IG51bGwge1xuICAgICAgICAkZXh0cmE6ICR0cmFuc2Zvcm07XG4gICAgICB9IEBlbHNlIHtcbiAgICAgICAgJGV4dHJhOiAkZXh0cmEgJHRyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBAaWYgJHggPT0gJzAnIG9yICR4ID09IG51bGwge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIHRyYW5zZm9ybTogJGx0ci10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtOiAkbHRyLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtOiAkcnRsLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIG1peGlucyBmb3IgU0NTUyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL2NvbXBvbmVudHMvZ3JpZC9ncmlkLm1peGlucy5zY3NzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvY29tcG9uZW50cy9pdGVtL2l0ZW0ubWl4aW5zLnNjc3NcbiAqL1xuXG4vLyBSZXNwb25zaXZlIE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyBDcmVhdGVzIGEgZml4ZWQgd2lkdGggZm9yIHRoZSBncmlkIGJhc2VkIG9uIHRoZSBzY3JlZW4gc2l6ZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtYWtlLWdyaWQtd2lkdGhzKCR3aWR0aHM6ICRncmlkLXdpZHRocywgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gIEBlYWNoICRicmVha3BvaW50LCAkd2lkdGggaW4gJHdpZHRocyB7XG4gICAgQGluY2x1ZGUgbWVkaWEtYnJlYWtwb2ludC11cCgkYnJlYWtwb2ludCwgJGJyZWFrcG9pbnRzKSB7XG4gICAgICB3aWR0aDogJHdpZHRoO1xuICAgIH1cbiAgfVxuXG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuXG4vLyBBZGRzIHBhZGRpbmcgdG8gdGhlIGVsZW1lbnQgYmFzZWQgb24gYnJlYWtwb2ludHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbWFrZS1icmVha3BvaW50LXBhZGRpbmcoJHBhZGRpbmdzKSB7XG4gIEBlYWNoICRicmVha3BvaW50IGluIG1hcC1rZXlzKCRwYWRkaW5ncykge1xuICAgIEBpbmNsdWRlIG1lZGlhLWJyZWFrcG9pbnQtdXAoJGJyZWFrcG9pbnQpIHtcbiAgICAgICRwYWRkaW5nOiBtYXAtZ2V0KCRwYWRkaW5ncywgJGJyZWFrcG9pbnQpO1xuXG4gICAgICBAaW5jbHVkZSBwYWRkaW5nKCRwYWRkaW5nKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBJdGVtIE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIGl0ZW0tcHVzaC1zdmctdXJsKCRmaWxsKSB7XG4gICRpdGVtLWRldGFpbC1wdXNoLXN2ZzogXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyIDIwJz48cGF0aCBkPSdNMiwyMGwtMi0ybDgtOEwwLDJsMi0ybDEwLDEwTDIsMjB6JyBmaWxsPScjeyRmaWxsfScvPjwvc3ZnPlwiO1xuXG4gIEBpbmNsdWRlIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRpdGVtLWRldGFpbC1wdXNoLXN2ZywgdHJ1ZSk7XG59XG4iLCJAdXNlIFwic2FzczptYXRoXCIgYXMgbWF0aDtcblxuLyoqXG4gKiBBcHAgY3VzdG9tIG1peGlucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBvdXIgY3VzdG9tIG1peGlucy5cbiAqL1xuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggYmxhY2sgdG8gY3JlYXRlIGl0cyBzaGFkZS5cbi8vIERlZmF1bHQgdG8gYm9vdHN0cmFwIGxldmVsIDYuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci1zaGFkZS1wZXJjZW50KCRjb2xvciwgJHBlcmNlbnQ6IDQ4JSkge1xuICAgIEByZXR1cm4gbWl4KCMwMDAsICRjb2xvciwgJHBlcmNlbnQpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggd2hpdGUgdG8gY3JlYXRlIGl0cyB0aW50LlxuLy8gRGVmYXVsdCB0byBib290c3RyYXAgbGV2ZWwgLTEwLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3ItdGludC1wZXJjZW50KCRjb2xvciwgJHBlcmNlbnQ6IDgwJSkge1xuICAgIEByZXR1cm4gbWl4KCNmZmYsICRjb2xvciwgJHBlcmNlbnQpO1xufVxuXG4vLyBJb25pYyBDb2xvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBHZW5lcmF0ZXMgdGhlIGNvbG9yIGNsYXNzZXMgYW5kIHZhcmlhYmxlcyBiYXNlZCBvbiB0aGVcbi8vIGNvbG9ycyBtYXBcblxuQG1peGluIGdlbmVyYXRlLWNvbG9yKCRjb2xvci1uYW1lLCAkY29sb3JzLCAkdGhlbWUpIHtcbiAgICAkY29sb3ItdGhlbWVzOiBtYXAtZ2V0KCRjb2xvcnMsICRjb2xvci1uYW1lKTtcbiAgICAkYmFzZTogbWFwLWdldCgkY29sb3ItdGhlbWVzLCAkdGhlbWUpO1xuXG4gICAgQGlmICR0aGVtZSA9PSAnZGFyaycge1xuICAgICAgICAkYmFzZTogbWl4KG1hcC1nZXQoJGNvbG9yLXRoZW1lcywgJ2xpZ2h0JyksIHdoaXRlLCA4MCUpICFkZWZhdWx0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIGdlbmVyYXRlLWNvbG9yLXZhcmlhbnRzKCRjb2xvci1uYW1lLCAkYmFzZSk7XG59XG5cbkBtaXhpbiBnZW5lcmF0ZS1jb2xvci12YXJpYW50cygkY29sb3ItbmFtZSwgJGJhc2UpIHtcbiAgICAkY29udHJhc3Q6IGdldF9jb250cmFzdF9jb2xvcigkYmFzZSk7XG4gICAgJHNoYWRlOiBnZXQtY29sb3Itc2hhZGUtcGVyY2VudCgkYmFzZSk7XG4gICAgJHRpbnQ6IGdldC1jb2xvci10aW50LXBlcmNlbnQoJGJhc2UpO1xuXG4gICAgLS0jeyRjb2xvci1uYW1lfTogI3skYmFzZX07XG4gICAgLS0jeyRjb2xvci1uYW1lfS1zaGFkZTogI3skc2hhZGV9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tdGludDogI3skdGludH07XG4gICAgLS0jeyRjb2xvci1uYW1lfS1jb250cmFzdDogI3skY29udHJhc3R9O1xuXG4gICAgLy8gSW50ZXJuYWwgaW9uaWMgdXNlIG9ubHkuXG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX06IHZhcigtLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1iYXNlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0pO1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXJnYjogI3tjb2xvci10by1yZ2ItbGlzdCgkYmFzZSl9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0OiAjeyRjb250cmFzdH07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QtcmdiOiAje2NvbG9yLXRvLXJnYi1saXN0KCRjb250cmFzdCl9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXNoYWRlOiAjeyRzaGFkZX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tdGludDogI3skdGludH07XG5cbiAgICAuaW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9IHtcbiAgICAgICAgLS1pb24tY29sb3I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSk7XG4gICAgICAgIC0taW9uLWNvbG9yLWJhc2U6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1iYXNlKTtcbiAgICAgICAgLS1pb24tY29sb3ItcmdiOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tcmdiKTtcbiAgICAgICAgLS1pb24tY29sb3ItY29udHJhc3Q6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdCk7XG4gICAgICAgIC0taW9uLWNvbG9yLWNvbnRyYXN0LXJnYjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0LXJnYik7XG4gICAgICAgIC0taW9uLWNvbG9yLXNoYWRlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tc2hhZGUpO1xuICAgICAgICAtLWlvbi1jb2xvci10aW50OiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tdGludCk7XG4gICAgfVxufVxuXG5AbWl4aW4gY29yZS1mb2N1cygpIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAmOjphZnRlciB7XG4gICAgICAgIEBpbmNsdWRlIHBvc2l0aW9uKDAsIDAsIDAsIDApO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIEBpbmNsdWRlIGNvcmUtZm9jdXMtc3R5bGUoKTtcbiAgICB9XG59XG5cbkBtaXhpbiBjb3JlLWZvY3VzLXN0eWxlKCkge1xuICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCB2YXIoLS1hMTF5LWZvY3VzLXdpZHRoKSAxcHggdmFyKC0tYTExeS1mb2N1cy1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gICAgLy8gVGhpY2tlciBvcHRpb246XG4gICAgLy8gYm9yZGVyOiB2YXIoLS1hMTF5LWZvY3VzLXdpZHRoKSBzb2xpZCB2YXIoLS1hMTF5LWZvY3VzLWNvbG9yKTtcbn1cblxuQG1peGluIGNvcmUtdHJhbnNpdGlvbigkcHJvcGVydGllczogYWxsLCAkZHVyYXRpb246IDUwMG1zLCAkdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluLW91dCkge1xuICAgICR0cmFuc2l0aW9uczogKCk7XG4gICAgQGVhY2ggJHByb3BlcnR5IGluICRwcm9wZXJ0aWVzIHtcbiAgICAgICR0cmFuc2l0aW9uczogYXBwZW5kKCR0cmFuc2l0aW9ucywgJHByb3BlcnR5ICRkdXJhdGlvbiAkdGltaW5nLWZ1bmN0aW9uLCBjb21tYSk7XG4gICAgfVxuXG4gICAgLXdlYmtpdC10cmFuc2l0aW9uOiAkdHJhbnNpdGlvbnM7XG4gICAgdHJhbnNpdGlvbjogJHRyYW5zaXRpb25zO1xufVxuXG5AbWl4aW4gc3Itb25seSgpIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgd2lkdGg6IDFweDtcbiAgICBoZWlnaHQ6IDFweDtcbiAgICBwYWRkaW5nOiAwO1xuICAgIG1hcmdpbjogLTFweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGNsaXA6IHJlY3QoMCwgMCwgMCwgMCk7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBib3JkZXI6IDA7XG59XG5cbi8qKlxuICogU2FtZSBhcyBpdGVtLXB1c2gtc3ZnLXVybCBidXQgYWRtaXRzIGZsaXAtcnRsXG4gKi9cbkBtaXhpbiBwdXNoLWFycm93LWNvbG9yKCRmaWxsOiA2MjYyNjIsICRmbGlwLXJ0bDogZmFsc2UpIHtcbiAgICAkaXRlbS1kZXRhaWwtcHVzaC1zdmc6IFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMiAyMCc+PHBhdGggZD0nTTIsMjBsLTItMmw4LThMMCwybDItMmwxMCwxMEwyLDIweicgZmlsbD0nI3skZmlsbH0nLz48L3N2Zz5cIjtcblxuICAgIEBpbmNsdWRlIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRpdGVtLWRldGFpbC1wdXNoLXN2ZywgJGZsaXAtcnRsKTtcbn1cblxuQG1peGluIGJvcmRlci1zdGFydCgkcHgsICR0eXBlOiBudWxsLCAkY29sb3I6IG51bGwpIHtcbiAgICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKGJvcmRlciwgJHB4ICR0eXBlICRjb2xvciwgbnVsbCk7XG59XG5cbkBtaXhpbiBib3JkZXItZW5kKCRweCwgJHR5cGU6IG51bGwsICRjb2xvcjogbnVsbCkge1xuICAgIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoYm9yZGVyLCBudWxsLCAkcHggJHR5cGUgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1ib3JkZXItc3RhcnQoJHB4LCAkdHlwZSwgJGNvbG9yKSB7XG4gICAgJHNhZmUtYXJlYS1wb3NpdGlvbjogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skcHh9KTtcblxuICAgIEBpbmNsdWRlIGJvcmRlci1zdGFydCgkc2FmZS1hcmVhLXBvc2l0aW9uLCAkdHlwZSwgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1ib3JkZXItZW5kKCRweCwgJHR5cGUsICRjb2xvcikge1xuICAgICRzYWZlLWFyZWEtcG9zaXRpb246IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRweH0pO1xuXG4gICAgQGluY2x1ZGUgYm9yZGVyLWVuZCgkc2FmZS1hcmVhLXBvc2l0aW9uLCAkdHlwZSwgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBudWxsO1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IG51bGw7XG5cbiAgICBAaWYgKCRlbmQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcbiAgICB9XG4gICAgQGlmICgkc3RhcnQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLXN0YXJ0KCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4tZW5kKCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogbnVsbDtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBudWxsO1xuXG4gICAgQGlmICgkZW5kKSB7XG4gICAgICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG4gICAgfVxuICAgIEBpZiAoJHN0YXJ0KSB7XG4gICAgICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLXN0YXJ0KCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJGVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1lbmQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wb3NpdGlvbigkdG9wOiBudWxsLCAkZW5kOiBudWxsLCAkYm90dG9tOiBudWxsLCAkc3RhcnQ6IG51bGwpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBwb3NpdGlvbigkdG9wLCAkc2FmZS1hcmVhLWVuZCwgJGJvdHRvbSwgJHNhZmUtYXJlYS1zdGFydCk7XG59XG5cbkBtaXhpbiBjb3JlLWhlYWRpbmdzKCkge1xuICAgIGgxIHtcbiAgICAgICAgZm9udC1zaXplOiAyNnB4O1xuICAgIH1cbiAgICBoMiwgLml0ZW0taGVhZGluZyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICB9XG4gICAgaDMge1xuICAgICAgICBmb250LXNpemU6IDIycHg7XG4gICAgfVxuICAgIGg0IHtcbiAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgIH1cbiAgICBoNSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICB9XG4gICAgaDYge1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgfVxufVxuXG5AbWl4aW4gZGFya21vZGUoKSB7XG4gICAgJHJvb3Q6ICN7Jn07XG5cbiAgICBAYXQtcm9vdCAje2FkZC1yb290LXNlbGVjdG9yKCRyb290LCBcImh0bWwuZGFya1wiKX0ge1xuICAgICAgICBAY29udGVudDtcbiAgICB9XG59XG5cbkBtaXhpbiBob3Jpem9udGFsX3Njcm9sbF9pdGVtKCR3aWR0aCwgJG1pbi13aWR0aCwgJG1heC13aWR0aCkge1xuICAgIGZsZXg6IDAgMCAkd2lkdGg7XG4gICAgbWluLXdpZHRoOiAkbWluLXdpZHRoO1xuICAgIG1heC13aWR0aDogJG1heC13aWR0aDtcbiAgICBhbGlnbi1zZWxmOiBzdHJldGNoO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuXG4gICAgaW9uLWNhcmQge1xuICAgICAgICAtLXZlcnRpY2FsLW1hcmdpbjogMTBweDtcbiAgICAgICAgLS1ob3Jpem9udGFsLW1hcmdpbjogMTBweDtcblxuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pIC0gdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pKTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pIC0gdmFyKC0tdmVydGljYWwtbWFyZ2luKSk7XG4gICAgICAgIG1hcmdpbjogdmFyKC0tdmVydGljYWwtbWFyZ2luKSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbik7XG5cbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDM2MHB4KSB7XG4gICAgICAgICAgICAtLWhvcml6b250YWwtbWFyZ2luOiA2cHg7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIENvbG9yIG1peGlucy5cbkBmdW5jdGlvbiBnZXRfYnJpZ2h0bmVzcygkY29sb3IpIHtcbiAgICBAcmV0dXJuIG1hdGguZGl2KHJlZCgkY29sb3IpICsgZ3JlZW4oJGNvbG9yKSArIGJsdWUoJGNvbG9yKSwgMyk7XG59XG5cbi8vIEdldCB0aGUgYmV0dGVyIGNvbG9yIGNvbnRyYXN0IHVzaW5nIFdDQUcgYWxnb3J5dGhtLlxuQGZ1bmN0aW9uIGdldF9jb250cmFzdF9jb2xvcigkY29sb3IpIHtcbiAgICAkbHVtaWFuY2U6IGx1bWluYW5jZSgkY29sb3IpO1xuXG4gICAgLy8gV2hpdGUgbHVtaWFuY2UgaXMgMS5cbiAgICAkd2hpdGVDb250cmFzdDogbWF0aC5kaXYoJGx1bWlhbmNlICsgMC4wNSwgMSArIDAuMDUpO1xuICAgIC8vIFdoaXRlIGx1bWlhbmNlIGlzIDAuXG4gICAgJGJsYWNrQ29udHJhc3Q6IG1hdGguZGl2KDAuMDUsICRsdW1pYW5jZSArIDAuMDUpO1xuXG4gICAgQHJldHVybiBpZigkd2hpdGVDb250cmFzdCA8ICRibGFja0NvbnRyYXN0LCB3aGl0ZSwgYmxhY2spO1xufVxuXG4vLyBDb2xvciBjb250cmFzdCB1c2luZyB5aXEgYXByb3hpbWF0aW9uIHdpdGggMTUwIHRocmVzaG9sZC5cbkBmdW5jdGlvbiBnZXRfY29udHJhc3RfY29sb3JfeWlxKCRjb2xvciwgJGRhcms6IGJsYWNrLCAkbGlnaHQ6IHdoaXRlKSB7XG4gICAgJHI6IHJlZCgkY29sb3IpO1xuICAgICRnOiBncmVlbigkY29sb3IpO1xuICAgICRiOiBibHVlKCRjb2xvcik7XG5cbiAgICAkeWlxOiBtYXRoLmRpdigoJHIgKiAyOTkpICsgKCRnICogNTg3KSArICgkYiAqIDExNCksIDEwMDApO1xuXG4gICAgQHJldHVybiBpZigkeWlxID49IDEyOCwgJGRhcmssICRsaWdodCk7XG59XG5cbi8vIFdDQUcgY29udHJhc3QgYWxnb3JpdGhtXG5AZnVuY3Rpb24gY2hlY2stY29udHJhc3QoJGZvcmVncm91bmQsICRiYWNrZ3JvdW5kKSB7XG4gICAgJGZvcmVncm91bmRMdW1pYW5jZTogbHVtaW5hbmNlKCRmb3JlZ3JvdW5kKTtcbiAgICAkYmFja2dyb3VuZEx1bWluYW5jZTogbHVtaW5hbmNlKCRiYWNrZ3JvdW5kKTtcblxuICAgIEBpZiAoJGJhY2tncm91bmRMdW1pbmFuY2UgPCAkZm9yZWdyb3VuZEx1bWlhbmNlKSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJGJhY2tncm91bmRMdW1pbmFuY2UgKyAwLjA1LCAkZm9yZWdyb3VuZEx1bWlhbmNlICsgMC4wNSk7XG4gICAgfSBAZWxzZSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJGZvcmVncm91bmRMdW1pYW5jZSArIDAuMDUsICRiYWNrZ3JvdW5kTHVtaW5hbmNlICsgMC4wNSk7XG4gICAgfVxufVxuXG5AZnVuY3Rpb24gbHVtaW5hbmNlKCRjb2xvcikge1xuICAgICRyOiByZWQoJGNvbG9yKTtcbiAgICAkZzogZ3JlZW4oJGNvbG9yKTtcbiAgICAkYjogYmx1ZSgkY29sb3IpO1xuXG4gICAgJHI6IGNvbXBvbmVudC1sdW1pbmFuY2UoJHIpO1xuICAgICRnOiBjb21wb25lbnQtbHVtaW5hbmNlKCRnKTtcbiAgICAkYjogY29tcG9uZW50LWx1bWluYW5jZSgkYik7XG5cbiAgICBAcmV0dXJuICRyICogMC4yMTI2ICsgJGcgKiAwLjcxNTIgKyAkYiAqIDAuMDcyMjtcbn1cblxuQGZ1bmN0aW9uIGNvbXBvbmVudC1sdW1pbmFuY2UoJHZhbHVlKSB7XG4gICAgJHZhbHVlOiBtYXRoLmRpdigkdmFsdWUsIDI1NSk7XG5cbiAgICBAaWYgKCR2YWx1ZSA8PSAwLjAzOTI4KSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJHZhbHVlLCAxMi45Mik7XG4gICAgfSBAZWxzZSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5wb3cobWF0aC5kaXYoJHZhbHVlICsgMC4wNTUsIDEuMDU1KSwgMi40KTtcbiAgICB9XG59XG4iLCIvKlxuICogQXBwIEN1c3RvbSBBcHAgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgYWxsIGN1c3RvbSBhcHAgdmFyaWFibGVzLlxuICovXG4iLCIvKlxuICogQXBwIEdsb2JhbCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBhbGwgZ2xvYmFsIHZhcmlhYmxlcy5cbiAqL1xuXG4kd2hpdGU6ICAgICAgICNmZmZmZmYgIWRlZmF1bHQ7XG4kZ3JheS0xMDA6ICAgICNmOGY5ZmEgIWRlZmF1bHQ7XG4kZ3JheS0yMDA6ICAgICNlOWVjZWYgIWRlZmF1bHQ7XG4kZ3JheS0zMDA6ICAgICNkZWUyZTYgIWRlZmF1bHQ7IC8vIFN0cm9rZVxuJGdyYXktNDAwOiAgICAjY2VkNGRhICFkZWZhdWx0O1xuJGdyYXktNTAwOiAgICAjOGY5NTllICFkZWZhdWx0OyAvLyBTdHJva2Ugb24gaW5wdXRzXG4kZ3JheS02MDA6ICAgICM2YTczN2IgIWRlZmF1bHQ7XG4kZ3JheS03MDA6ICAgICM0OTUwNTcgIWRlZmF1bHQ7XG4kZ3JheS04MDA6ICAgICMzNDNhNDAgIWRlZmF1bHQ7XG4kZ3JheS05MDA6ICAgICMyODI4MjggIWRlZmF1bHQ7IC8vIENvcHkgdGV4dFxuJGJsYWNrOiAgICAgICAjMDAwMDAwICFkZWZhdWx0OyAvLyBBdm9pZCB1c2FnZVxuXG4kYmx1ZTogICAgICAgICMwZjZjYmYgIWRlZmF1bHQ7XG4kY3lhbjogICAgICAgICMwMDgxOTYgIWRlZmF1bHQ7IC8vIE5vdCB1c2VkLlxuJGdyZWVuOiAgICAgICAjMzU3YTMyICFkZWZhdWx0O1xuJHJlZDogICAgICAgICAjY2EzMTIwICFkZWZhdWx0O1xuJHllbGxvdzogICAgICAjZjBhZDRlICFkZWZhdWx0O1xuXG4kYnJhbmQtY29sb3I6ICNmOTgwMTIgIWRlZmF1bHQ7XG5cbiR0ZXh0LWNvbG9yOiAgICAgICAgICAgICAgICRncmF5LTkwMCAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLXJnYjogICAgICAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCR0ZXh0LWNvbG9yKSAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLWRhcms6ICAgICAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLWRhcmstcmdiOiAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCR0ZXh0LWNvbG9yLWRhcmspICFkZWZhdWx0O1xuXG4kYmFja2dyb3VuZC1jb2xvcjogICAgICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJGJhY2tncm91bmQtY29sb3ItcmdiOiAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCRiYWNrZ3JvdW5kLWNvbG9yKSAhZGVmYXVsdDtcbiRiYWNrZ3JvdW5kLWNvbG9yLWRhcms6ICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7IC8vICMxYTFhMWFcbiRiYWNrZ3JvdW5kLWNvbG9yLWRhcmstcmdiOiBjb2xvci10by1yZ2ItbGlzdCgkYmFja2dyb3VuZC1jb2xvci1kYXJrKSAhZGVmYXVsdDtcblxuJGlvbi1pdGVtLWJhY2tncm91bmQ6ICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtcmdiOiAgY29sb3ItdG8tcmdiLWxpc3QoJGlvbi1pdGVtLWJhY2tncm91bmQpICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyazogJGdyYXktOTAwICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyay1yZ2I6IGNvbG9yLXRvLXJnYi1saXN0KCRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcmspICFkZWZhdWx0O1xuXG4kcHJpbWFyeTogICAgJGJyYW5kLWNvbG9yICFkZWZhdWx0O1xuJHNlY29uZGFyeTogICRncmF5LTMwMCAhZGVmYXVsdDtcbiRkYW5nZXI6ICAgICAkcmVkICFkZWZhdWx0O1xuJHdhcm5pbmc6ICAgICR5ZWxsb3cgIWRlZmF1bHQ7XG4kc3VjY2VzczogICAgJGdyZWVuICFkZWZhdWx0O1xuJGluZm86ICAgICAgICRibHVlICFkZWZhdWx0O1xuJGxpZ2h0OiAgICAgICRncmF5LTEwMCAhZGVmYXVsdDtcbiRtZWRpdW06ICAgICAkZ3JheS03MDAgIWRlZmF1bHQ7XG4kZGFyazogICAgICAgJGdyYXktOTAwICFkZWZhdWx0O1xuXG4kY29sb3JzOiAgKFxuICAgIHByaW1hcnk6IChsaWdodDogJHByaW1hcnksIGRhcms6ICRwcmltYXJ5KSxcbiAgICBzZWNvbmRhcnk6IChsaWdodDogJHNlY29uZGFyeSwgZGFyazogJGdyYXktNzAwKSxcbiAgICBzdWNjZXNzOiAobGlnaHQ6ICRzdWNjZXNzKSxcbiAgICB3YXJuaW5nOiAobGlnaHQ6ICR3YXJuaW5nKSxcbiAgICBkYW5nZXI6ICAobGlnaHQ6ICRkYW5nZXIpLFxuICAgIGluZm86IChsaWdodDogJGluZm8pLFxuICAgIGxpZ2h0OiAobGlnaHQ6ICRsaWdodCwgZGFyazogJGRhcmspLFxuICAgIG1lZGl1bTogKGxpZ2h0OiAkbWVkaXVtLCBkYXJrOiAkZ3JheS0yMDApLFxuICAgIGRhcms6IChsaWdodDogJGRhcmssIGRhcms6ICRsaWdodCksXG4pICFkZWZhdWx0O1xuXG4vKipcbiAqIExheW91dCBCcmVha3BvaW50c1xuICpcbiAqIGh0dHBzOi8vaW9uaWNmcmFtZXdvcmsuY29tL2RvY3MvbGF5b3V0L2dyaWQjZGVmYXVsdC1icmVha3BvaW50c1xuICovXG5cbi8vIFRoZSBtaW5pbXVtIGRpbWVuc2lvbnMgYXQgd2hpY2ggeW91ciBsYXlvdXQgd2lsbCBjaGFuZ2UsXG4vLyBhZGFwdGluZyB0byBkaWZmZXJlbnQgc2NyZWVuIHNpemVzLCBmb3IgdXNlIGluIG1lZGlhIHF1ZXJpZXNcbiRzY3JlZW4tYnJlYWtwb2ludHM6IChcbiAgICB4czogMHB4LFxuICAgIHNtOiA1NzZweCxcbiAgICBtZDogNzY4cHgsXG4gICAgbGc6IDk5MnB4LFxuICAgIHRhYmxldDogOTkycHgsXG4gICAgeGw6IDEyMDBweFxuKSAhZGVmYXVsdDtcblxuJGNvcmUtY291cnNlLWltYWdlLWJhY2tncm91bmQ6ICM4MWVjZWMsICM3NGI5ZmYsICNhMjliZmUsICNkZmU2ZTksICMwMGI4OTQsICMwOTg0ZTMsICNiMmJlYzMsICNmZGNiNmUsICNmZDc5YTgsICM2YzVjZTcgIWRlZmF1bHQ7XG4kY29yZS1kZC1xdWVzdGlvbi1jb2xvcnM6ICNGRkZGRkYsICNCMEM0REUsICNEQ0RDREMsICNEOEJGRDgsICM4N0NFRkEsICNEQUE1MjAsICNGRkQ3MDAsICNGMEU2OEMgIWRlZmF1bHQ7XG4kY29yZS10ZXh0LWhpZ2h0bGlnaHQtYmFja2dyb3VuZC1jb2xvcjogbGlnaHRlbigkYmx1ZSwgNDAlKSAhZGVmYXVsdDtcblxuJGNvcmUtZml4ZWQtdXJsOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWRhc2hib2FyZC1sb2dvOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWFsd2F5cy1zaG93LW1haW4tbWVudTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1mb3JtYXQtdGV4dC1uZXZlci1zaG9ydGVuOiBmYWxzZSAhZGVmYXVsdDtcblxuJGNvcmUtaGlkZS1jb3Vyc2VpbWFnZS1vbi1jb3Vyc2U6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtaGlkZS1wcm9ncmVzcy1vbi1jb3Vyc2U6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtaGlkZS1wcm9ncmVzcy1vbi1zZWN0aW9uLXNlbGVjdG9yOiBmYWxzZSAhZGVmYXVsdDtcblxuJGNvcmUtY291cnNlLWhpZGUtdGh1bWItb24tY2FyZHM6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtY291cnNlLXRodW1iLW9uLWNhcmRzLWJhY2tncm91bmQ6IG51bGwgIWRlZmF1bHQ7XG4kY29yZS1jb3Vyc2UtaGlkZS1wcm9ncmVzcy1vbi1jYXJkczogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgbG9naW4gcGFnZS5cbiRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lLWRhcms6ICRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tbG9hZGluZy1jb2xvcjogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yLWRhcms6ICR0ZXh0LWNvbG9yLWRhcmsgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLWZvcmdvdC1wYXNzd29yZDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLW5lZWQtaGVscDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLXFyY29kZTogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgbW9yZSBwYWdlLiAoZGVwcmVjYXRlZCBvbiA0LjApXG4kY29yZS1tb3JlLWhpZGUtc2l0ZWluZm86IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbW9yZS1oaWRlLXNpdGVuYW1lOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLW1vcmUtaGlkZS1zaXRldXJsOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB1c2VyIHBhZ2UuXG4kY29yZS11c2VyLWhpZGUtc2l0ZWluZm86ICRjb3JlLW1vcmUtaGlkZS1zaXRlaW5mbyAhZGVmYXVsdDtcbiRjb3JlLXVzZXItaGlkZS1zaXRlbmFtZTogJGNvcmUtbW9yZS1oaWRlLXNpdGVuYW1lICFkZWZhdWx0O1xuJGNvcmUtdXNlci1oaWRlLXNpdGV1cmw6ICRjb3JlLW1vcmUtaGlkZS1zaXRldXJsICFkZWZhdWx0O1xuXG4vLyBBY3Rpdml0eSBpY29uIGJhY2tncm91bmQgY29sb3JzLlxuJGFjdGl2aXR5LWljb24tY29sb3JzOiAoXG4gICAgYWRtaW5pc3RyYXRpb246ICM1ZDYzZjYsXG4gICAgYXNzZXNzbWVudDogI2ViNjZhMixcbiAgICBjb2xsYWJvcmF0aW9uOiAjZjc2MzRkLFxuICAgIGNvbW11bmljYXRpb246ICMxMWE2NzYsXG4gICAgY29udGVudDogIzM5OWJlMixcbiAgICBpbnRlcmZhY2U6ICNhMzc4ZmZcbikgIWRlZmF1bHQ7XG5cbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jYXRlZ29yeTogIzhlMjRhYSAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb3Vyc2U6ICRyZWQgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktZ3JvdXA6ICR5ZWxsb3cgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktdXNlcjogJGJsdWUgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktc2l0ZTogJGdyZWVuICFkZWZhdWx0O1xuXG4vLyBDYWxlbmRhciBldmVudCBjYXRlZ29yeSBiYWNrZ3JvdW5kIGNvbG9ycy5cbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb2xvcnM6IChcbiAgICBjYXRlZ29yeTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNhdGVnb3J5LFxuICAgIGNvdXJzZTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvdXJzZSxcbiAgICBncm91cDogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWdyb3VwLFxuICAgIHVzZXI6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS11c2VyLFxuICAgIHNpdGU6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1zaXRlLFxuKSAhZGVmYXVsdDtcbiIsIkB1c2UgXCJ0aGVtZS9nbG9iYWxzXCIgYXMgKjtcblxuOmhvc3Qge1xuICAgIGlvbi10YWJzIHtcbiAgICAgICAgLS1tZW51dGFiYmFyLXNpemU6IHZhcigtLWJvdHRvbS10YWJzLXNpemUpO1xuICAgIH1cblxuICAgIGlvbi10YWJzLnBsYWNlbWVudC1zaWRlIHtcbiAgICAgICAgLS1tZW51dGFiYmFyLXNpemU6IHZhcigtLXNpZGUtdGFicy1zaXplKTtcbiAgICB9XG5cbiAgICAtLW5ldHdvcmstbWFyZ2luLWJvdHRvbTogMHB4O1xuICAgIC0tbmV0d29yay1tZXNzYWdlLWJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICAgIC0tbmV0d29yay1tZXNzYWdlLW9mZmxpbmU6IG5vbmU7XG4gICAgLS1uZXR3b3JrLW1lc3NhZ2Utb25saW5lOiBub25lO1xuICAgIC0tbmV0d29yay1tZXNzYWdlLWhlaWdodDogMTZweDtcbn1cblxuOmhvc3QtY29udGV4dCguY29yZS1vbmxpbmUpLFxuOmhvc3QtY29udGV4dCguY29yZS1vZmZsaW5lKSB7XG4gICAgLmNvcmUtbmV0d29yay1tZXNzYWdlIHtcbiAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZTtcbiAgICAgICAgaGVpZ2h0OiB2YXIoLS1uZXR3b3JrLW1lc3NhZ2UtaGVpZ2h0KTtcbiAgICAgICAgbGluZS1oZWlnaHQ6IHZhcigtLW5ldHdvcmstbWVzc2FnZS1oZWlnaHQpO1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWJvdHRvbSwgMHB4KSArIHZhcigtLW5ldHdvcmstbWVzc2FnZS1oZWlnaHQpKTtcbiAgICB9XG59XG5cbjpob3N0LWNvbnRleHQoLmNvcmUtb25saW5lKSB7XG4gICAgLS1uZXR3b3JrLW1hcmdpbi1ib3R0b206IDhweDtcblxuICAgIC0tbmV0d29yay1tZXNzYWdlLWJhY2tncm91bmQ6IHZhcigtLXN1Y2Nlc3MpO1xuICAgIC0tbmV0d29yay1tZXNzYWdlLW9ubGluZTogYmxvY2s7XG59XG5cbjpob3N0LWNvbnRleHQoLmNvcmUtb2ZmbGluZSkge1xuICAgIC0tbmV0d29yay1tYXJnaW4tYm90dG9tOiA4cHg7XG5cbiAgICAtLW5ldHdvcmstbWVzc2FnZS1iYWNrZ3JvdW5kOiB2YXIoLS1kYW5nZXIpO1xuICAgIC0tbmV0d29yay1tZXNzYWdlLW9mZmxpbmU6IGJsb2NrO1xufVxuXG5pb24tdGFiLWJhciB7XG4gICAgaGVpZ2h0OiB2YXIoLS1tZW51dGFiYmFyLXNpemUpO1xuXG4gICAgY29yZS11c2VyLW1lbnUtYnV0dG9uIHtcbiAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gICAgfVxuXG4gICAgaW9uLXRhYi1idXR0b24ge1xuICAgICAgICAmLnRhYi1zZWxlY3RlZCB7XG4gICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlbGVjdGVkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlvbi1pY29uLmNvcmUtdGFiLWljb24ge1xuICAgICAgICAgICAgdGV4dC1vdmVyZmxvdzogdW5zZXQ7XG4gICAgICAgICAgICBvdmVyZmxvdzogdmlzaWJsZTtcbiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlvbi1iYWRnZS5jb3JlLXRhYi1iYWRnZSB7XG4gICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICBmb250LXdlaWdodDogYm9sZDtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7XG4gICAgICAgICAgICBwYWRkaW5nLWxlZnQ6IDZweDtcbiAgICAgICAgICAgIHBhZGRpbmctcmlnaHQ6IDZweDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxNHB4O1xuICAgICAgICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jb3JlLWJvdHRvbS10YWJzLWJhZGdlLWNvbG9yKTtcbiAgICAgICAgICAgIC0tY29sb3I6IHZhcigtLWNvcmUtYm90dG9tLXRhYnMtYmFkZ2UtdGV4dC1jb2xvcik7XG4gICAgICAgIH1cblxuICAgICAgICBpb24taWNvbi5jb3JlLXRhYi1iYWRnZSB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29yZS1ib3R0b20tdGFicy1iYWRnZS1jb2xvcik7XG4gICAgICAgICAgICBwYWRkaW5nOiAzcHggNnB4IDJweDtcbiAgICAgICAgICAgIEBpbmNsdWRlIHBvc2l0aW9uKDhweCwgbnVsbCwgbnVsbCwgY2FsYyg1MCUgKyA2cHgpKTtcbiAgICAgICAgICAgIG1pbi13aWR0aDogMTJweDtcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogOHB4O1xuICAgICAgICAgICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XG4gICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgICB6LWluZGV4OiAxO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5pb24tdGFicy5wbGFjZW1lbnQtYm90dG9tIHtcbiAgICBpb24tdGFiLWJ1dHRvbiB7XG4gICAgICAgIGlvbi1pY29uLmNvcmUtdGFiLWljb24ge1xuICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogdmFyKC0tbmV0d29yay1tYXJnaW4tYm90dG9tKTtcbiAgICAgICAgICAgIHRyYW5zaXRpb246IG1hcmdpbiA1MDBtcyBlYXNlLWluLW91dCwgdHJhbnNmb3JtIDMwMG1zIGVhc2UtaW4tb3V0O1xuICAgICAgICB9XG5cbiAgICAgICAgaW9uLWljb24uY29yZS10YWItYmFkZ2UsXG4gICAgICAgIGlvbi1iYWRnZS5jb3JlLXRhYi1iYWRnZSB7XG4gICAgICAgICAgICB0b3A6IDhweDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBpZiAoJGNvcmUtYWx3YXlzLXNob3ctbWFpbi1tZW51KSB7XG4gICAgICAgIGlvbi10YWItYmFyIHtcbiAgICAgICAgICAgIGhlaWdodDogdmFyKC0tbWVudXRhYmJhci1zaXplKSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50O1xuICAgICAgICAgICAgdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApICFpbXBvcnRhbnQ7XG4gICAgICAgIH1cbiAgICB9IEBlbHNlIHtcbiAgICAgICAgJi50YWJzaGlkZGVuIGlvbi10YWItYmFyIHtcbiAgICAgICAgICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuXG4gICAgICAgICAgICBpb24tdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgaGVpZ2h0OiBhdXRvO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufVxuXG5pb24tdGFicy5wbGFjZW1lbnQtc2lkZSB7XG4gICAgZmxleC1kaXJlY3Rpb246IHJvdztcblxuICAgIGlvbi10YWItYmFyIHtcbiAgICAgICAgb3JkZXI6IC0xO1xuICAgICAgICB3aWR0aDogdmFyKC0tbWVudXRhYmJhci1zaXplKTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCkgLSB2YXIoLS1pb24tc2FmZS1hcmVhLWJvdHRvbSkpO1xuICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICBAaW5jbHVkZSBib3JkZXItZW5kKHZhcigtLWJvcmRlcikpO1xuICAgICAgICBib3JkZXItdG9wOiAwO1xuICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XG5cbiAgICAgICAgQGluY2x1ZGUgcGFkZGluZyh2YXIoLS1pb24tc2FmZS1hcmVhLXRvcCksIDBweCwgdmFyKC0taW9uLXNhZmUtYXJlYS1ib3R0b20pLCB2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpKTtcblxuICAgICAgICBpb24tdGFiLWJ1dHRvbiB7XG4gICAgICAgICAgICAtLXBhZGRpbmctc3RhcnQ6IDA7XG4gICAgICAgICAgICAtLXBhZGRpbmctZW5kOiAwO1xuICAgICAgICAgICAgaW9uLWJhZGdlLmNvcmUtdGFiLWJhZGdlIHtcbiAgICAgICAgICAgICAgICBAaW5jbHVkZSBwb3NpdGlvbihudWxsLCAxcHgsIG51bGwsIGF1dG8pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBpb24tdGFiLWJ1dHRvbiwgY29yZS11c2VyLW1lbnUtYnV0dG9uIHtcbiAgICAgICAgICAgIHdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgbWluLWhlaWdodDogdmFyKC0tbWVudXRhYmJhci1zaXplKTtcbiAgICAgICAgICAgIGZsZXg6IDA7XG5cbiAgICAgICAgICAgIGlvbi1pY29uLmNvcmUtdGFiLWJhZGdlLFxuICAgICAgICAgICAgaW9uLWJhZGdlLmNvcmUtdGFiLWJhZGdlIHtcbiAgICAgICAgICAgICAgICB0b3A6IGNhbGMoNTAlIC0gMjBweCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi5jb3JlLW5ldHdvcmstbWVzc2FnZSB7XG4gICAgYmFja2dyb3VuZDogdmFyKC0tbmV0d29yay1tZXNzYWdlLWJhY2tncm91bmQpO1xuICAgIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICBib3R0b206IDA7XG4gICAgbGVmdDogMDtcbiAgICByaWdodDogMDtcbiAgICBwYWRkaW5nLWxlZnQ6IDEwcHg7XG4gICAgcGFkZGluZy1yaWdodDogMTBweDtcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XG4gICAgY29sb3I6IHdoaXRlO1xuICAgIHZpc2liaWxpdHk6IGhpZGRlbjtcbiAgICBoZWlnaHQ6IDA7XG4gICAgdHJhbnNpdGlvbjogYWxsIDUwMG1zIGVhc2UtaW4tb3V0O1xuICAgIG9wYWNpdHk6IC44O1xuICAgIHotaW5kZXg6IDEyO1xuICAgIGZvbnQtc2l6ZTogMTJweDtcblxuICAgIC5jb3JlLW9ubGluZS1tZXNzYWdlIHtcbiAgICAgICAgZGlzcGxheTogdmFyKC0tbmV0d29yay1tZXNzYWdlLW9ubGluZSk7XG4gICAgfVxuXG4gICAgLmNvcmUtb2ZmbGluZS1tZXNzYWdlIHtcbiAgICAgICAgZGlzcGxheTogdmFyKC0tbmV0d29yay1tZXNzYWdlLW9mZmxpbmUpO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"],\n  data: {\n    animation: [trigger('menuVisibilityAnimation', [state('hidden', style({\n      height: 0,\n      visibility: 'hidden',\n      transform: 'translateY(100%)'\n    })), state('visible', style({\n      visibility: 'visible'\n    })), transition('visible => hidden', [style({\n      transform: 'translateY(0)'\n    }), animate(`${ANIMATION_DURATION}ms ease-in-out`, style({\n      transform: 'translateY(100%)'\n    }))]), transition('hidden => visible', [style({\n      transform: 'translateY(100%)',\n      visibility: 'visible',\n      height: '*'\n    }), animate(`${ANIMATION_DURATION}ms ease-in-out`, style({\n      transform: 'translateY(0)'\n    }))])])]\n  }\n});\nclass CoreMainMenuRoleTab extends CoreAriaRoleTab {\n  /**\n   * @inheritdoc\n   */\n  getSelectableTabs() {\n    const allTabs = this.componentInstance.tabs.filter(tab => !tab.hide).map(tab => ({\n      id: tab.id || tab.page,\n      findIndex: tab.page\n    }));\n    allTabs.push({\n      id: this.componentInstance.morePageName,\n      findIndex: this.componentInstance.morePageName\n    });\n    return allTabs;\n  }\n  /**\n   * @inheritdoc\n   */\n  isHorizontal() {\n    return this.componentInstance.tabsPlacement == 'bottom';\n  }\n  /**\n   * @inheritdoc\n   */\n  selectTab(tabId) {\n    var _this$componentInstan;\n    (_this$componentInstan = this.componentInstance.mainTabs) === null || _this$componentInstan === void 0 || _this$componentInstan.select(tabId);\n  }\n}","map":{"version":3,"names":["CoreEvents","CoreMainMenu","CoreMainMenuProvider","CoreMainMenuDelegate","Router","CoreUtils","CoreAriaRoleTab","CoreNavigator","filter","NavigationEnd","trigger","state","style","transition","animate","CoreSites","CoreDom","CoreLogger","CorePlatform","i0","ɵɵelement","ɵɵattribute","ɵɵpipeBind1","ɵɵproperty","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","tab_r5","badge","ɵɵtextInterpolate1","ɵɵpipeBind2","badgeA11yText","ɵɵpureFunction1","_c1","ɵɵlistener","CoreMainMenuPage_ion_tab_button_5_Template_ion_tab_button_keydown_0_listener","$event","restoredCtx","ɵɵrestoreView","_r11","$implicit","ctx_r10","ɵɵnextContext","ɵɵresetView","tabAction","keyDown","page","CoreMainMenuPage_ion_tab_button_5_Template_ion_tab_button_keyup_0_listener","ctx_r12","keyUp","ɵɵtemplate","CoreMainMenuPage_ion_tab_button_5_ion_badge_5_Template","CoreMainMenuPage_ion_tab_button_5_span_9_Template","ɵɵclassMap","class","ctx_r3","loaded","hide","selectedTab","id","icon","title","ANIMATION_DURATION","CoreMainMenuPage","constructor","tabs","showTabs","tabsPlacement","morePageName","MORE_PAGE_NAME","isMainScreen","moreBadge","visibility","selectHistory","backButtonFunction","event","backButtonClicked","CoreMainMenuRoleTab","logger","getInstance","navSubscription","events","pipe","subscribe","_this$mainTabs","mainTabs","outlet","canGoBack","updateVisibility","ngOnInit","_this","_asyncToGenerator","_this$mainTabs2","urlToOpen","getRouteParam","redirectPath","redirectOptions","subscription","getHandlersObservable","handlers","previousHandlers","allHandlers","updateHandlers","badgeUpdateObserver","on","MAIN_MENU_HANDLER_BADGE_UPDATED","data","siteId","getCurrentSiteId","updateMoreBadge","resizeListener","onWindowResize","document","addEventListener","isIOS","keyboardObserver","KEYBOARD_CHANGE","kbHeight","setTimeout","MAIN_HOME_LOADED","_this2","getTabPlacement","handler","onlyInMore","slice","getNumItems","newTabs","i","length","tab","find","getUniqueId","push","sort","a","b","priority","removedHandlersPages","map","some","mainMenuTab","getCurrentMainMenuTab","areHandlersLoaded","includes","nextTick","tabPage","tabPageParams","pageParams","debug","navigateToSitePath","preferCurrentTab","params","_objectSpread","mainHandlers","indexOf","ngOnDestroy","_this$subscription","_this$navSubscription","_this$keyboardObserve","_this$badgeUpdateObse","_this$resizeListener","unsubscribe","removeEventListener","off","tabChanged","_this$firstSelectedTa","firstSelectedTab","notifyVisibilityUpdated","_this3","detail","register","_ref","processNextHandler","isMainMenuRoot","currentRouteIsMainMenuRoot","_this3$mainTabs","previousTab","select","_this3$mainTabs2","_x","apply","arguments","getCurrentRoute","routeData","mainMenuTabRoot","wait","MAIN_MENU_VISIBILITY_UPDATED","_class","selectors","viewQuery","CoreMainMenuPage_Query","rf","ctx","CoreMainMenuPage_Template_ion_tabs_ionTabsDidChange_0_listener","CoreMainMenuPage_ion_spinner_3_Template","CoreMainMenuPage_core_user_menu_button_4_Template","CoreMainMenuPage_ion_tab_button_5_Template","CoreMainMenuPage_Template_ion_tab_button_keydown_6_listener","CoreMainMenuPage_Template_ion_tab_button_keyup_6_listener","CoreMainMenuPage_ion_icon_14_Template","ɵɵclassProp","height","transform","getSelectableTabs","allTabs","componentInstance","findIndex","isHorizontal","selectTab","tabId","_this$componentInstan"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/mainmenu/pages/menu/menu.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/mainmenu/pages/menu/menu.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { IonTabs } from '@ionic/angular';\nimport { BackButtonEvent } from '@ionic/core';\nimport { Subscription } from 'rxjs';\n\nimport { CoreEvents, CoreEventObserver } from '@singletons/events';\nimport { CoreMainMenu, CoreMainMenuProvider } from '../../services/mainmenu';\nimport { CoreMainMenuDelegate, CoreMainMenuHandlerToDisplay } from '../../services/mainmenu-delegate';\nimport { Router } from '@singletons';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreAriaRoleTab, CoreAriaRoleTabFindable } from '@classes/aria-role-tab';\nimport { CoreNavigationOptions, CoreNavigator } from '@services/navigator';\nimport { filter } from 'rxjs/operators';\nimport { NavigationEnd } from '@angular/router';\nimport { trigger, state, style, transition, animate } from '@angular/animations';\nimport { CoreSites } from '@services/sites';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreLogger } from '@singletons/logger';\nimport { CorePlatform } from '@services/platform';\n\nconst ANIMATION_DURATION = 500;\n\n/**\n * Page that displays the main menu of the app.\n */\n@Component({\n    selector: 'page-core-mainmenu',\n    templateUrl: 'menu.html',\n    animations: [\n        trigger('menuVisibilityAnimation', [\n            state('hidden', style({\n                height: 0,\n                visibility: 'hidden',\n                transform: 'translateY(100%)',\n            })),\n            state('visible', style({\n                visibility: 'visible',\n            })),\n            transition('visible => hidden', [\n                style({ transform: 'translateY(0)' }),\n                animate(`${ANIMATION_DURATION}ms ease-in-out`, style({ transform: 'translateY(100%)' })),\n            ]),\n            transition('hidden => visible', [\n                style({ transform: 'translateY(100%)',  visibility: 'visible', height: '*' }),\n                animate(`${ANIMATION_DURATION}ms ease-in-out`, style({ transform: 'translateY(0)' })),\n            ]),\n        ])],\n    styleUrls: ['menu.scss'],\n})\nexport class CoreMainMenuPage implements OnInit, OnDestroy {\n\n    tabs: CoreMainMenuHandlerToDisplay[] = [];\n    allHandlers?: CoreMainMenuHandlerToDisplay[];\n    loaded = false;\n    showTabs = false;\n    tabsPlacement: 'bottom' | 'side' = 'bottom';\n    morePageName = CoreMainMenuProvider.MORE_PAGE_NAME;\n    selectedTab?: string;\n    isMainScreen = false;\n    moreBadge = false;\n    visibility = 'hidden';\n\n    protected subscription?: Subscription;\n    protected navSubscription?: Subscription;\n    protected keyboardObserver?: CoreEventObserver;\n    protected badgeUpdateObserver?: CoreEventObserver;\n    protected resizeListener?: CoreEventObserver;\n    protected backButtonFunction: (event: BackButtonEvent) => void;\n    protected selectHistory: string[] = [];\n    protected firstSelectedTab?: string;\n    protected urlToOpen?: string;\n    protected redirectPath?: string;\n    protected redirectOptions?: CoreNavigationOptions;\n    protected logger: CoreLogger;\n\n    @ViewChild('mainTabs') mainTabs?: IonTabs;\n\n    tabAction: CoreMainMenuRoleTab;\n\n    constructor() {\n        this.backButtonFunction = (event) => this.backButtonClicked(event);\n        this.tabAction = new CoreMainMenuRoleTab(this);\n        this.logger = CoreLogger.getInstance('CoreMainMenuPage');\n\n        // Listen navigation events to show or hide tabs.\n        this.navSubscription = Router.events\n            .pipe(filter(event => event instanceof NavigationEnd))\n            .subscribe(() => {\n                this.isMainScreen = !this.mainTabs?.outlet.canGoBack();\n                this.updateVisibility();\n            });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.showTabs = true;\n        this.urlToOpen = CoreNavigator.getRouteParam('urlToOpen');\n        this.redirectPath = CoreNavigator.getRouteParam('redirectPath');\n        this.redirectOptions = CoreNavigator.getRouteParam('redirectOptions');\n\n        this.isMainScreen = !this.mainTabs?.outlet.canGoBack();\n        this.updateVisibility();\n\n        this.subscription = CoreMainMenuDelegate.getHandlersObservable().subscribe((handlers) => {\n            const previousHandlers = this.allHandlers;\n            this.allHandlers = handlers;\n\n            this.updateHandlers(previousHandlers);\n        });\n\n        this.badgeUpdateObserver = CoreEvents.on(CoreMainMenuProvider.MAIN_MENU_HANDLER_BADGE_UPDATED, (data) => {\n            if (data.siteId == CoreSites.getCurrentSiteId()) {\n                this.updateMoreBadge();\n            }\n        });\n\n        this.resizeListener = CoreDom.onWindowResize(() => {\n            this.updateHandlers();\n        });\n        document.addEventListener('ionBackButton', this.backButtonFunction);\n\n        if (CorePlatform.isIOS()) {\n            // In iOS, the resize event is triggered before the keyboard is opened/closed and not triggered again once done.\n            // Init handlers again once keyboard is closed since the resize event doesn't have the updated height.\n            this.keyboardObserver = CoreEvents.on(CoreEvents.KEYBOARD_CHANGE, (kbHeight: number) => {\n                if (kbHeight === 0) {\n                    this.updateHandlers();\n\n                    // If the device is slow it can take a bit more to update the window height. Retry in a few ms.\n                    setTimeout(() => {\n                        this.updateHandlers();\n                    }, 250);\n                }\n            });\n        }\n        CoreEvents.trigger(CoreEvents.MAIN_HOME_LOADED);\n    }\n\n    /**\n     * Update handlers on change (size or handlers).\n     *\n     * @param previousHandlers Previous handlers (if they haave just been updated).\n     */\n    async updateHandlers(previousHandlers?: CoreMainMenuHandlerToDisplay[]): Promise<void> {\n        if (!this.allHandlers) {\n            return;\n        }\n        this.tabsPlacement = CoreMainMenu.getTabPlacement();\n        this.updateVisibility();\n\n        const handlers = this.allHandlers\n            .filter((handler) => !handler.onlyInMore)\n            .slice(0, CoreMainMenu.getNumItems()); // Get main handlers.\n\n        // Re-build the list of tabs. If a handler is already in the list, use existing object to prevent re-creating the tab.\n        const newTabs: CoreMainMenuHandlerToDisplay[] = [];\n\n        for (let i = 0; i < handlers.length; i++) {\n            const handler = handlers[i];\n\n            // Check if the handler is already in the tabs list. If so, use it.\n            const tab = this.tabs.find((tab) => tab.page == handler.page);\n\n            tab ? tab.hide = false : null;\n            handler.hide = false;\n            handler.id = handler.id || 'core-mainmenu-' + CoreUtils.getUniqueId('CoreMainMenuPage');\n\n            newTabs.push(tab || handler);\n        }\n\n        this.tabs = newTabs;\n\n        // Sort them by priority so new handlers are in the right position.\n        this.tabs.sort((a, b) => (b.priority || 0) - (a.priority || 0));\n\n        this.updateMoreBadge();\n\n        let removedHandlersPages: string[] = [];\n        if (previousHandlers) {\n            const allHandlers = this.allHandlers;\n            removedHandlersPages = previousHandlers.map(handler => handler.page)\n                .filter(page => !allHandlers.some(handler => handler.page === page));\n        }\n\n        const mainMenuTab = CoreNavigator.getCurrentMainMenuTab();\n        this.loaded = CoreMainMenuDelegate.areHandlersLoaded();\n\n        if (this.loaded && (!mainMenuTab || removedHandlersPages.includes(mainMenuTab))) {\n            // No tab selected or handler no longer available, select the first one.\n            await CoreUtils.nextTick();\n\n            const tabPage = this.tabs[0] ? this.tabs[0].page : this.morePageName;\n            const tabPageParams = this.tabs[0] ? this.tabs[0].pageParams : {};\n            this.logger.debug(`Select first tab: ${tabPage}.`, this.tabs);\n\n            // Use navigate instead of mainTabs.select to be able to pass page params.\n            CoreNavigator.navigateToSitePath(tabPage, {\n                preferCurrentTab: false,\n                params: {\n                    urlToOpen: this.urlToOpen,\n                    redirectPath: this.redirectPath,\n                    redirectOptions: this.redirectOptions,\n                    ...tabPageParams,\n                },\n            });\n        }\n    }\n\n    /**\n     * Check all non visible tab handlers for any badge text or number.\n     */\n    updateMoreBadge(): void {\n        if (!this.allHandlers) {\n            return;\n        }\n\n        // Calculate the main handlers not to display them in this view.\n        const mainHandlers = this.allHandlers\n            .filter((handler) => !handler.onlyInMore)\n            .slice(0, CoreMainMenu.getNumItems());\n\n        // Use only the handlers that don't appear in the main view.\n        this.moreBadge = this.allHandlers.some((handler) => mainHandlers.indexOf(handler) == -1 && !!handler.badge);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.subscription?.unsubscribe();\n        this.navSubscription?.unsubscribe();\n        document.removeEventListener('ionBackButton', this.backButtonFunction);\n        this.keyboardObserver?.off();\n        this.badgeUpdateObserver?.off();\n        this.resizeListener?.off();\n    }\n\n    /**\n     * Selected tab has changed.\n     *\n     * @param event Event.\n     */\n    tabChanged(event: {tab: string}): void {\n        this.selectedTab = event.tab;\n        this.firstSelectedTab = this.firstSelectedTab ?? event.tab;\n        this.selectHistory.push(event.tab);\n    }\n\n    /**\n     * Update menu visibility.\n     */\n    protected updateVisibility(): void {\n        const visibility = this.tabsPlacement == 'side' ? '' : (this.isMainScreen ? 'visible' : 'hidden');\n\n        if (visibility === this.visibility) {\n            return;\n        }\n\n        this.visibility = visibility;\n        this.notifyVisibilityUpdated();\n    }\n\n    /**\n     * Back button clicked.\n     *\n     * @param event Event.\n     */\n    protected backButtonClicked(event: BackButtonEvent): void {\n        // Use a priority lower than 0 (navigation).\n        event.detail.register(-10, async (processNextHandler: () => void) => {\n            // This callback can be called at the same time as Ionic's back navigation callback.\n            // Check if user is already at the root of a tab.\n            const isMainMenuRoot = await this.currentRouteIsMainMenuRoot();\n            if (!isMainMenuRoot) {\n                return; // Not at root level, let Ionic handle the navigation.\n            }\n\n            // No back navigation, already at root level. Check if we should change tab.\n            if (this.selectHistory.length > 1) {\n                // The previous page in history is not the last one, we need the previous one.\n                const previousTab = this.selectHistory[this.selectHistory.length - 2];\n\n                // Remove curent and previous tabs from history.\n                this.selectHistory = this.selectHistory.filter((tab) => this.selectedTab != tab && previousTab != tab);\n\n                this.mainTabs?.select(previousTab);\n\n                return;\n            }\n\n            if (this.firstSelectedTab && this.selectedTab != this.firstSelectedTab) {\n                // All history is gone but we are not in the first selected tab.\n                this.selectHistory = [];\n                this.mainTabs?.select(this.firstSelectedTab);\n\n                return;\n            }\n\n            processNextHandler();\n        });\n    }\n\n    /**\n     * Check if current route is the root of the current main menu tab.\n     *\n     * @returns Promise.\n     */\n    protected async currentRouteIsMainMenuRoot(): Promise<boolean> {\n        // Check if the current route is the root of the current main menu tab.\n        return !!CoreNavigator.getCurrentRoute({ routeData: { mainMenuTabRoot: CoreNavigator.getCurrentMainMenuTab() } });\n    }\n\n    /**\n     * Notify that the menu visibility has been updated.\n     */\n    protected async notifyVisibilityUpdated(): Promise<void> {\n        await CoreUtils.nextTick();\n        await CoreUtils.wait(ANIMATION_DURATION);\n        await CoreUtils.nextTick();\n\n        CoreEvents.trigger(CoreMainMenuProvider.MAIN_MENU_VISIBILITY_UPDATED);\n    }\n\n}\n\n/**\n * Helper class to manage rol tab.\n */\nclass CoreMainMenuRoleTab extends CoreAriaRoleTab<CoreMainMenuPage> {\n\n    /**\n     * @inheritdoc\n     */\n    getSelectableTabs(): CoreAriaRoleTabFindable[] {\n        const allTabs: CoreAriaRoleTabFindable[] =\n            this.componentInstance.tabs.filter((tab) => !tab.hide).map((tab) => ({\n                id: tab.id || tab.page,\n                findIndex: tab.page,\n            }));\n\n        allTabs.push({\n            id: this.componentInstance.morePageName,\n            findIndex: this.componentInstance.morePageName,\n        });\n\n        return allTabs;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    isHorizontal(): boolean {\n        return this.componentInstance.tabsPlacement == 'bottom';\n    }\n\n    /**\n     * @inheritdoc\n     */\n    selectTab(tabId: string): void {\n        this.componentInstance.mainTabs?.select(tabId);\n    }\n\n}\n","<ion-tabs #mainTabs [hidden]=\"!showTabs\" [class]=\"'placement-' + tabsPlacement\"\n    [class.tabshidden]=\"!isMainScreen && tabsPlacement === 'bottom'\" (ionTabsDidChange)=\"tabChanged($event)\">\n    <ion-tab-bar slot=\"bottom\" class=\"mainmenu-tabs\" [@menuVisibilityAnimation]=\"visibility\">\n        <ion-spinner *ngIf=\"!loaded\" [attr.aria-label]=\"'core.loading' | translate\" />\n\n        <core-user-menu-button *ngIf=\"loaded && tabsPlacement === 'side'\" [alwaysShow]=\"true\" />\n\n        <ion-tab-button *ngFor=\"let tab of tabs\" (keydown)=\"tabAction.keyDown(tab.page, $event)\" (keyup)=\"tabAction.keyUp(tab.page, $event)\"\n            [hidden]=\"!loaded && tab.hide\" [tab]=\"tab.page\" [disabled]=\"tab.hide\" layout=\"label-hide\" class=\"{{tab.class}}\"\n            [selected]=\"tab.page === selectedTab\" [tabindex]=\"selectedTab === tab.page ? 0 : -1\" [attr.aria-controls]=\"tab.id\">\n            <ion-icon class=\"core-tab-icon\" [name]=\"tab.icon\" aria-hidden=\"true\" />\n            <ion-label aria-hidden=\"true\">{{ tab.title | translate }}</ion-label>\n            <ion-badge class=\"core-tab-badge\" *ngIf=\"tab.badge\" aria-hidden=\"true\">{{ tab.badge }}</ion-badge>\n            <span class=\"sr-only\">{{ tab.title | translate }}</span>\n            <span *ngIf=\"tab.badge && tab.badgeA11yText\" class=\"sr-only\">\n                {{ tab.badgeA11yText | translate: {$a : tab.badge } }}\n            </span>\n        </ion-tab-button>\n\n        <ion-tab-button (keydown)=\"tabAction.keyDown(morePageName, $event)\" (keyup)=\"tabAction.keyUp(morePageName, $event)\"\n            [hidden]=\"!loaded\" [tab]=\"morePageName\" layout=\"label-hide\" [tabindex]=\"selectedTab === morePageName ? 0 : -1\"\n            [attr.aria-controls]=\"morePageName\">\n            <ion-icon class=\"core-tab-icon\" name=\"ellipsis-horizontal\" aria-hidden=\"true\" />\n            <ion-label aria-hidden=\"true\">{{ 'core.more' | translate }}</ion-label>\n            <span class=\"sr-only\">{{ 'core.more' | translate }}</span>\n            <ion-icon *ngIf=\"moreBadge\" class=\"core-tab-badge\" name=\"fas-circle\" aria-hidden=\"true\" />\n        </ion-tab-button>\n    </ion-tab-bar>\n</ion-tabs>\n<div class=\"core-network-message\" [hidden]=\"!showTabs\">\n    <div class=\"core-online-message\">\n        {{ \"core.youreonline\" | translate }}\n    </div>\n    <div class=\"core-offline-message\">\n        {{ \"core.youreoffline\" | translate }}\n    </div>\n</div>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}