{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreCourse } from '../services/course';\n/**\n * Base module handler to be registered.\n */\nexport class CoreModuleHandlerBase {\n  constructor() {\n    this.pageName = '';\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getData(module, courseId,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  sectionId,\n  // eslint-disable-line @typescript-eslint/no-unused-vars\n  forCoursePage) {\n    var _this = this;\n    return {\n      icon: this.getIconSrc(module, module.modicon),\n      title: module.name,\n      class: 'addon-mod_' + module.modname + '-handler',\n      showDownloadButton: true,\n      hasCustomCmListItem: false,\n      action: function () {\n        var _ref = _asyncToGenerator(function* (event, module, courseId, options) {\n          yield _this.openActivityPage(module, courseId, options);\n        });\n        return function action(_x, _x2, _x3, _x4) {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    };\n  }\n  /**\n   * Opens the activity page.\n   *\n   * @param module The module object.\n   * @param courseId The course ID.\n   * @param options Options for the navigation.\n   * @returns Promise resolved when done.\n   */\n  openActivityPage(module, courseId, options) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!CoreCourse.moduleHasView(module)) {\n        return;\n      }\n      options = options || {};\n      options.params = options.params || {};\n      Object.assign(options.params, {\n        module\n      });\n      const routeParams = '/' + courseId + '/' + module.id;\n      yield CoreNavigator.navigateToSitePath(_this2.pageName + routeParams, options);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getIconSrc(module, modicon) {\n    if (!module) {\n      return modicon;\n    }\n    return CoreCourse.getModuleIconSrc(module.modname, modicon);\n  }\n}","map":{"version":3,"names":["CoreNavigator","CoreCourse","CoreModuleHandlerBase","constructor","pageName","isEnabled","_asyncToGenerator","getData","module","courseId","sectionId","forCoursePage","_this","icon","getIconSrc","modicon","title","name","class","modname","showDownloadButton","hasCustomCmListItem","action","_ref","event","options","openActivityPage","_x","_x2","_x3","_x4","apply","arguments","_this2","moduleHasView","params","Object","assign","routeParams","id","navigateToSitePath","getModuleIconSrc"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/course/classes/module-base-handler.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreNavigationOptions, CoreNavigator } from '@services/navigator';\nimport { CoreCourse } from '../services/course';\nimport { CoreCourseModuleData } from '../services/course-helper';\nimport { CoreCourseModuleHandler, CoreCourseModuleHandlerData } from '../services/module-delegate';\n\n/**\n * Base module handler to be registered.\n */\nexport class CoreModuleHandlerBase implements Partial<CoreCourseModuleHandler> {\n\n    protected pageName = '';\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        return true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getData(\n        module: CoreCourseModuleData,\n        courseId: number, // eslint-disable-line @typescript-eslint/no-unused-vars\n        sectionId?: number, // eslint-disable-line @typescript-eslint/no-unused-vars\n        forCoursePage?: boolean, // eslint-disable-line @typescript-eslint/no-unused-vars\n    ): Promise<CoreCourseModuleHandlerData> | CoreCourseModuleHandlerData {\n        return {\n            icon: this.getIconSrc(module, module.modicon),\n            title: module.name,\n            class: 'addon-mod_' + module.modname + '-handler',\n            showDownloadButton: true,\n            hasCustomCmListItem: false,\n            action: async (\n                event: Event,\n                module: CoreCourseModuleData,\n                courseId: number,\n                options?: CoreNavigationOptions,\n            ): Promise<void> => {\n                await this.openActivityPage(module, courseId, options);\n            },\n        };\n    }\n\n    /**\n     * Opens the activity page.\n     *\n     * @param module The module object.\n     * @param courseId The course ID.\n     * @param options Options for the navigation.\n     * @returns Promise resolved when done.\n     */\n    async openActivityPage(module: CoreCourseModuleData, courseId: number, options?: CoreNavigationOptions): Promise<void> {\n        if (!CoreCourse.moduleHasView(module)) {\n            return;\n        }\n\n        options = options || {};\n        options.params = options.params || {};\n        Object.assign(options.params, { module });\n\n        const routeParams = '/' + courseId + '/' + module.id;\n\n        await CoreNavigator.navigateToSitePath(this.pageName + routeParams, options);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getIconSrc(module?: CoreCourseModuleData, modicon?: string): Promise<string | undefined> | string | undefined {\n        if (!module) {\n            return modicon;\n        }\n\n        return CoreCourse.getModuleIconSrc(module.modname, modicon);\n    }\n\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAAgCA,aAAa,QAAQ,qBAAqB;AAC1E,SAASC,UAAU,QAAQ,oBAAoB;AAI/C;;;AAGA,OAAM,MAAOC,qBAAqB;EAAlCC,YAAA;IAEc,KAAAC,QAAQ,GAAG,EAAE;EAoE3B;EAlEI;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAO,IAAI;IAAC;EAChB;EAEA;;;EAGAC,OAAOA,CACHC,MAA4B,EAC5BC,QAAgB;EAAE;EAClBC,SAAkB;EAAE;EACpBC,aAAuB;IAAA,IAAAC,KAAA;IAEvB,OAAO;MACHC,IAAI,EAAE,IAAI,CAACC,UAAU,CAACN,MAAM,EAAEA,MAAM,CAACO,OAAO,CAAC;MAC7CC,KAAK,EAAER,MAAM,CAACS,IAAI;MAClBC,KAAK,EAAE,YAAY,GAAGV,MAAM,CAACW,OAAO,GAAG,UAAU;MACjDC,kBAAkB,EAAE,IAAI;MACxBC,mBAAmB,EAAE,KAAK;MAC1BC,MAAM;QAAA,IAAAC,IAAA,GAAAjB,iBAAA,CAAE,WACJkB,KAAY,EACZhB,MAA4B,EAC5BC,QAAgB,EAChBgB,OAA+B,EAChB;UACf,MAAMb,KAAI,CAACc,gBAAgB,CAAClB,MAAM,EAAEC,QAAQ,EAAEgB,OAAO,CAAC;QAC1D,CAAC;QAAA,gBAAAH,OAAAK,EAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;UAAA,OAAAP,IAAA,CAAAQ,KAAA,OAAAC,SAAA;QAAA;MAAA;KACJ;EACL;EAEA;;;;;;;;EAQMN,gBAAgBA,CAAClB,MAA4B,EAAEC,QAAgB,EAAEgB,OAA+B;IAAA,IAAAQ,MAAA;IAAA,OAAA3B,iBAAA;MAClG,IAAI,CAACL,UAAU,CAACiC,aAAa,CAAC1B,MAAM,CAAC,EAAE;QACnC;;MAGJiB,OAAO,GAAGA,OAAO,IAAI,EAAE;MACvBA,OAAO,CAACU,MAAM,GAAGV,OAAO,CAACU,MAAM,IAAI,EAAE;MACrCC,MAAM,CAACC,MAAM,CAACZ,OAAO,CAACU,MAAM,EAAE;QAAE3B;MAAM,CAAE,CAAC;MAEzC,MAAM8B,WAAW,GAAG,GAAG,GAAG7B,QAAQ,GAAG,GAAG,GAAGD,MAAM,CAAC+B,EAAE;MAEpD,MAAMvC,aAAa,CAACwC,kBAAkB,CAACP,MAAI,CAAC7B,QAAQ,GAAGkC,WAAW,EAAEb,OAAO,CAAC;IAAC;EACjF;EAEA;;;EAGAX,UAAUA,CAACN,MAA6B,EAAEO,OAAgB;IACtD,IAAI,CAACP,MAAM,EAAE;MACT,OAAOO,OAAO;;IAGlB,OAAOd,UAAU,CAACwC,gBAAgB,CAACjC,MAAM,CAACW,OAAO,EAAEJ,OAAO,CAAC;EAC/D"},"metadata":{},"sourceType":"module","externalDependencies":[]}