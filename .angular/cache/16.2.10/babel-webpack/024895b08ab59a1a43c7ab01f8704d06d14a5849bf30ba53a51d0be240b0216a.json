{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreUserDelegateService } from '../user-delegate';\nimport { CoreSites } from '@services/sites';\nimport { CoreUtils } from '@services/utils/utils';\nimport { makeSingleton } from '@singletons';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler to send a email to a user.\n */\nexport class CoreUserProfileMailHandlerService {\n  constructor() {\n    this.name = 'CoreUserProfileMail';\n    this.priority = 700;\n    this.type = CoreUserDelegateService.TYPE_COMMUNICATION;\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabledForUser(user) {\n    return _asyncToGenerator(function* () {\n      return user.id != CoreSites.getCurrentSiteUserId() && !!user.email;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getDisplayData() {\n    return {\n      icon: 'mail',\n      title: 'core.user.sendemail',\n      class: 'core-user-profile-mail',\n      action: (event, user) => {\n        event.preventDefault();\n        event.stopPropagation();\n        CoreUtils.openInBrowser('mailto:' + user.email, {\n          showBrowserWarning: false\n        });\n      }\n    };\n  }\n}\n_class = CoreUserProfileMailHandlerService;\n_class.ɵfac = function CoreUserProfileMailHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const CoreUserProfileMailHandler = makeSingleton(CoreUserProfileMailHandlerService);","map":{"version":3,"names":["CoreUserDelegateService","CoreSites","CoreUtils","makeSingleton","CoreUserProfileMailHandlerService","constructor","name","priority","type","TYPE_COMMUNICATION","isEnabled","_asyncToGenerator","isEnabledForUser","user","id","getCurrentSiteUserId","email","getDisplayData","icon","title","class","action","event","preventDefault","stopPropagation","openInBrowser","showBrowserWarning","factory","ɵfac","providedIn","CoreUserProfileMailHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/user/services/handlers/profile-mail.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\n\nimport { CoreUserDelegateService, CoreUserProfileHandler, CoreUserProfileHandlerData } from '../user-delegate';\nimport { CoreSites } from '@services/sites';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreUserProfile } from '../user';\nimport { makeSingleton } from '@singletons';\n\n/**\n * Handler to send a email to a user.\n */\n@Injectable({ providedIn: 'root' })\nexport class CoreUserProfileMailHandlerService implements CoreUserProfileHandler {\n\n    name = 'CoreUserProfileMail';\n    priority = 700;\n    type = CoreUserDelegateService.TYPE_COMMUNICATION;\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        return true;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabledForUser(user: CoreUserProfile): Promise<boolean> {\n        return user.id != CoreSites.getCurrentSiteUserId() && !!user.email;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getDisplayData(): CoreUserProfileHandlerData {\n        return {\n            icon: 'mail',\n            title: 'core.user.sendemail',\n            class: 'core-user-profile-mail',\n            action: (event, user): void => {\n                event.preventDefault();\n                event.stopPropagation();\n\n                CoreUtils.openInBrowser('mailto:' + user.email, { showBrowserWarning: false });\n            },\n        };\n    }\n\n}\n\nexport const CoreUserProfileMailHandler = makeSingleton(CoreUserProfileMailHandlerService);\n"],"mappings":";;AAgBA,SAASA,uBAAuB,QAA4D,kBAAkB;AAC9G,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,SAAS,QAAQ,uBAAuB;AAEjD,SAASC,aAAa,QAAQ,aAAa;;AAE3C;;;AAIA,OAAM,MAAOC,iCAAiC;EAD9CC,YAAA;IAGI,KAAAC,IAAI,GAAG,qBAAqB;IAC5B,KAAAC,QAAQ,GAAG,GAAG;IACd,KAAAC,IAAI,GAAGR,uBAAuB,CAACS,kBAAkB;;EAEjD;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAO,IAAI;IAAC;EAChB;EAEA;;;EAGMC,gBAAgBA,CAACC,IAAqB;IAAA,OAAAF,iBAAA;MACxC,OAAOE,IAAI,CAACC,EAAE,IAAIb,SAAS,CAACc,oBAAoB,EAAE,IAAI,CAAC,CAACF,IAAI,CAACG,KAAK;IAAC;EACvE;EAEA;;;EAGAC,cAAcA,CAAA;IACV,OAAO;MACHC,IAAI,EAAE,MAAM;MACZC,KAAK,EAAE,qBAAqB;MAC5BC,KAAK,EAAE,wBAAwB;MAC/BC,MAAM,EAAEA,CAACC,KAAK,EAAET,IAAI,KAAU;QAC1BS,KAAK,CAACC,cAAc,EAAE;QACtBD,KAAK,CAACE,eAAe,EAAE;QAEvBtB,SAAS,CAACuB,aAAa,CAAC,SAAS,GAAGZ,IAAI,CAACG,KAAK,EAAE;UAAEU,kBAAkB,EAAE;QAAK,CAAE,CAAC;MAClF;KACH;EACL;;SAnCStB,iCAAiC;;mBAAjCA,MAAiC;AAAA;;SAAjCA,MAAiC;EAAAuB,OAAA,EAAjCvB,MAAiC,CAAAwB,IAAA;EAAAC,UAAA,EADpB;AAAM;AAwChC,OAAO,MAAMC,0BAA0B,GAAG3B,aAAa,CAACC,iCAAiC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}