{"ast":null,"code":"var _class;\nimport { CoreScreen } from '@services/screen';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreMainMenuUserMenuTourComponent } from '../user-menu-tour/user-menu-tour';\nimport { CoreMainMenuUserMenuComponent } from '../user-menu/user-menu';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../components/user-avatar/user-avatar\";\nimport * as i4 from \"../../../../directives/aria-button\";\nimport * as i5 from \"../../../../directives/user-tour\";\nimport * as i6 from \"@ngx-translate/core\";\nfunction CoreMainMenuUserButtonComponent_core_user_avatar_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r2 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-user-avatar\", 1);\n    i0.ɵɵlistener(\"ariaButtonClick\", function CoreMainMenuUserButtonComponent_core_user_avatar_0_Template_core_user_avatar_ariaButtonClick_0_listener($event) {\n      i0.ɵɵrestoreView(_r2);\n      const ctx_r1 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r1.openUserMenu($event));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"site\", ctx_r0.siteInfo)(\"linkProfile\", false)(\"userTour\", ctx_r0.userTour);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 4, \"core.user.useraccount\"));\n  }\n}\n/**\n * Component to display an avatar on the header to open user menu.\n *\n * Example: <core-user-menu-button></core-user-menu-button>\n */\nexport class CoreMainMenuUserButtonComponent {\n  constructor(routerOutlet) {\n    this.routerOutlet = routerOutlet;\n    this.alwaysShow = false;\n    this.isMainScreen = false;\n    this.userTour = {\n      id: 'user-menu',\n      component: CoreMainMenuUserMenuTourComponent,\n      alignment: \"start\" /* CoreUserToursAlignment.Start */,\n      side: CoreScreen.isMobile ? \"start\" /* CoreUserToursSide.Start */ : \"end\" /* CoreUserToursSide.End */\n    };\n\n    const currentSite = CoreSites.getRequiredCurrentSite();\n    this.siteInfo = currentSite.getInfo();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    this.isMainScreen = !this.routerOutlet.canGoBack();\n  }\n  /**\n   * Open User menu\n   *\n   * @param event Click event.\n   */\n  openUserMenu(event) {\n    event.preventDefault();\n    event.stopPropagation();\n    CoreDomUtils.openSideModal({\n      component: CoreMainMenuUserMenuComponent\n    });\n  }\n}\n_class = CoreMainMenuUserButtonComponent;\n_class.ɵfac = function CoreMainMenuUserButtonComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.IonRouterOutlet));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"core-user-menu-button\"]],\n  inputs: {\n    alwaysShow: \"alwaysShow\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[\"class\", \"core-bar-button-image clickable\", 3, \"site\", \"linkProfile\", \"userTour\", \"ariaButtonClick\", 4, \"ngIf\"], [1, \"core-bar-button-image\", \"clickable\", 3, \"site\", \"linkProfile\", \"userTour\", \"ariaButtonClick\"]],\n  template: function CoreMainMenuUserButtonComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, CoreMainMenuUserButtonComponent_core_user_avatar_0_Template, 2, 6, \"core-user-avatar\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", (ctx.alwaysShow || ctx.isMainScreen) && ctx.siteInfo);\n    }\n  },\n  dependencies: [i2.NgIf, i3.CoreUserAvatarComponent, i4.CoreAriaButtonClickDirective, i5.CoreUserTourDirective, i6.TranslatePipe],\n  styles: [\"ion-tabs.placement-side   ion-toolbar[_nghost-%COMP%], ion-tabs.placement-side   ion-toolbar   [_nghost-%COMP%] {\\n  display: none;\\n}\\n\\n[_nghost-%COMP%]   core-user-avatar[_ngcontent-%COMP%] {\\n  --userpicture-padding: 6px !important;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb3JlL2ZlYXR1cmVzL21haW5tZW51L2NvbXBvbmVudHMvdXNlci1tZW51LWJ1dHRvbi91c2VyLW1lbnUtYnV0dG9uLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxhQUFBO0FBQ0o7O0FBRUE7RUFDSSxxQ0FBQTtBQUNKIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3QtY29udGV4dChpb24tdGFicy5wbGFjZW1lbnQtc2lkZSBpb24tdG9vbGJhcikge1xuICAgIGRpc3BsYXk6IG5vbmU7XG59XG5cbjpob3N0IGNvcmUtdXNlci1hdmF0YXIge1xuICAgIC0tdXNlcnBpY3R1cmUtcGFkZGluZzogNnB4ICFpbXBvcnRhbnQ7XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"names":["CoreScreen","CoreSites","CoreDomUtils","CoreMainMenuUserMenuTourComponent","CoreMainMenuUserMenuComponent","i0","ɵɵelementStart","ɵɵlistener","CoreMainMenuUserButtonComponent_core_user_avatar_0_Template_core_user_avatar_ariaButtonClick_0_listener","$event","ɵɵrestoreView","_r2","ctx_r1","ɵɵnextContext","ɵɵresetView","openUserMenu","ɵɵelementEnd","ɵɵproperty","ctx_r0","siteInfo","userTour","ɵɵattribute","ɵɵpipeBind1","CoreMainMenuUserButtonComponent","constructor","routerOutlet","alwaysShow","isMainScreen","id","component","alignment","side","isMobile","currentSite","getRequiredCurrentSite","getInfo","ngOnInit","canGoBack","event","preventDefault","stopPropagation","openSideModal","ɵɵdirectiveInject","i1","IonRouterOutlet","selectors","inputs","decls","vars","consts","template","CoreMainMenuUserButtonComponent_Template","rf","ctx","ɵɵtemplate","CoreMainMenuUserButtonComponent_core_user_avatar_0_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/mainmenu/components/user-menu-button/user-menu-button.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/mainmenu/components/user-menu-button/user-menu-button.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Input, OnInit } from '@angular/core';\nimport { CoreSiteInfo } from '@classes/sites/unauthenticated-site';\nimport { CoreUserTourDirectiveOptions } from '@directives/user-tour';\nimport { CoreUserToursAlignment, CoreUserToursSide } from '@features/usertours/services/user-tours';\nimport { IonRouterOutlet } from '@ionic/angular';\nimport { CoreScreen } from '@services/screen';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreMainMenuUserMenuTourComponent } from '../user-menu-tour/user-menu-tour';\nimport { CoreMainMenuUserMenuComponent } from '../user-menu/user-menu';\n\n/**\n * Component to display an avatar on the header to open user menu.\n *\n * Example: <core-user-menu-button></core-user-menu-button>\n */\n@Component({\n    selector: 'core-user-menu-button',\n    templateUrl: 'user-menu-button.html',\n    styleUrls: ['user-menu-button.scss'],\n})\nexport class CoreMainMenuUserButtonComponent implements OnInit {\n\n    @Input() alwaysShow = false;\n    siteInfo?: CoreSiteInfo;\n    isMainScreen = false;\n    userTour: CoreUserTourDirectiveOptions = {\n        id: 'user-menu',\n        component: CoreMainMenuUserMenuTourComponent,\n        alignment: CoreUserToursAlignment.Start,\n        side: CoreScreen.isMobile ? CoreUserToursSide.Start : CoreUserToursSide.End,\n    };\n\n    constructor(protected routerOutlet: IonRouterOutlet) {\n        const currentSite = CoreSites.getRequiredCurrentSite();\n\n        this.siteInfo = currentSite.getInfo();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnInit(): void {\n        this.isMainScreen = !this.routerOutlet.canGoBack();\n    }\n\n    /**\n     * Open User menu\n     *\n     * @param event Click event.\n     */\n    openUserMenu(event: Event): void {\n        event.preventDefault();\n        event.stopPropagation();\n\n        CoreDomUtils.openSideModal<void>({\n            component: CoreMainMenuUserMenuComponent,\n        });\n    }\n\n}\n","<core-user-avatar *ngIf=\"(alwaysShow || isMainScreen) && siteInfo\" [site]=\"siteInfo\" class=\"core-bar-button-image clickable\"\n    [linkProfile]=\"false\" (ariaButtonClick)=\"openUserMenu($event)\" [userTour]=\"userTour\"\n    [attr.aria-label]=\"'core.user.useraccount' | translate\" />\n"],"mappings":";AAmBA,SAASA,UAAU,QAAQ,kBAAkB;AAC7C,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,iCAAiC,QAAQ,kCAAkC;AACpF,SAASC,6BAA6B,QAAQ,wBAAwB;;;;;;;;;;;ICvBtEC,EAAA,CAAAC,cAAA,0BAE8D;IADpCD,EAAA,CAAAE,UAAA,6BAAAC,wGAAAC,MAAA;MAAAJ,EAAA,CAAAK,aAAA,CAAAC,GAAA;MAAA,MAAAC,MAAA,GAAAP,EAAA,CAAAQ,aAAA;MAAA,OAAmBR,EAAA,CAAAS,WAAA,CAAAF,MAAA,CAAAG,YAAA,CAAAN,MAAA,CAAoB;IAAA,EAAC;;IADlEJ,EAAA,CAAAW,YAAA,EAE8D;;;;IAFKX,EAAA,CAAAY,UAAA,SAAAC,MAAA,CAAAC,QAAA,CAAiB,mCAAAD,MAAA,CAAAE,QAAA;IAEhFf,EAAA,CAAAgB,WAAA,eAAAhB,EAAA,CAAAiB,WAAA,gCAAuD;;;ADuB3D;;;;;AAUA,OAAM,MAAOC,+BAA+B;EAYxCC,YAAsBC,YAA6B;IAA7B,KAAAA,YAAY,GAAZA,YAAY;IAVzB,KAAAC,UAAU,GAAG,KAAK;IAE3B,KAAAC,YAAY,GAAG,KAAK;IACpB,KAAAP,QAAQ,GAAiC;MACrCQ,EAAE,EAAE,WAAW;MACfC,SAAS,EAAE1B,iCAAiC;MAC5C2B,SAAS;MACTC,IAAI,EAAE/B,UAAU,CAACgC,QAAQ,GAAE,wCAA0B;KACxD;;IAGG,MAAMC,WAAW,GAAGhC,SAAS,CAACiC,sBAAsB,EAAE;IAEtD,IAAI,CAACf,QAAQ,GAAGc,WAAW,CAACE,OAAO,EAAE;EACzC;EAEA;;;EAGAC,QAAQA,CAAA;IACJ,IAAI,CAACT,YAAY,GAAG,CAAC,IAAI,CAACF,YAAY,CAACY,SAAS,EAAE;EACtD;EAEA;;;;;EAKAtB,YAAYA,CAACuB,KAAY;IACrBA,KAAK,CAACC,cAAc,EAAE;IACtBD,KAAK,CAACE,eAAe,EAAE;IAEvBtC,YAAY,CAACuC,aAAa,CAAO;MAC7BZ,SAAS,EAAEzB;KACd,CAAC;EACN;;SArCSmB,+BAA+B;;mBAA/BA,MAA+B,EAAAlB,EAAA,CAAAqC,iBAAA,CAAAC,EAAA,CAAAC,eAAA;AAAA;;QAA/BrB,MAA+B;EAAAsB,SAAA;EAAAC,MAAA;IAAApB,UAAA;EAAA;EAAAqB,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,yCAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCnC5C/C,EAAA,CAAAiD,UAAA,IAAAC,2DAAA,8BAE8D;;;MAF3ClD,EAAA,CAAAY,UAAA,UAAAoC,GAAA,CAAA3B,UAAA,IAAA2B,GAAA,CAAA1B,YAAA,KAAA0B,GAAA,CAAAlC,QAAA,CAA8C"},"metadata":{},"sourceType":"module","externalDependencies":[]}