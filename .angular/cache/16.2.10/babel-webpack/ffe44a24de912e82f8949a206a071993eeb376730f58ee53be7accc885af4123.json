{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreCustomURLSchemes } from '@services/urlschemes';\nimport { NgZone } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\n/**\n * Asynchronous function to handle custom URLs when the app is launched.\n */\nexport default function () {\n  return _ref.apply(this, arguments);\n}\nfunction _ref() {\n  _ref = _asyncToGenerator(function* () {\n    const lastUrls = {};\n    // Handle app launched with a certain URL (custom URL scheme).\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    window.handleOpenURL = url => {\n      // Execute the callback in the Angular zone, so change detection doesn't stop working.\n      NgZone.run(() => {\n        // First check that the URL hasn't been treated a few seconds ago. Sometimes this function is called more than once.\n        if (lastUrls[url] && Date.now() - lastUrls[url] < 3000) {\n          // Function called more than once, stop.\n          return;\n        }\n        if (!CoreCustomURLSchemes.isCustomURL(url)) {\n          // Not a custom URL, ignore.\n          return;\n        }\n        lastUrls[url] = Date.now();\n        CoreEvents.trigger(CoreEvents.APP_LAUNCHED_URL, {\n          url\n        });\n        CoreCustomURLSchemes.handleCustomURL(url).catch(error => {\n          CoreCustomURLSchemes.treatHandleCustomURLError(error);\n        });\n      });\n    };\n  });\n  return _ref.apply(this, arguments);\n}","map":{"version":3,"names":["CoreCustomURLSchemes","NgZone","CoreEvents","_ref","apply","arguments","_asyncToGenerator","lastUrls","window","handleOpenURL","url","run","Date","now","isCustomURL","trigger","APP_LAUNCHED_URL","handleCustomURL","catch","error","treatHandleCustomURLError"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/initializers/initialize-urlscheme.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreCustomURLSchemes } from '@services/urlschemes';\nimport { NgZone } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\n\n/**\n * Asynchronous function to handle custom URLs when the app is launched.\n */\nexport default async function(): Promise<void> {\n    const lastUrls: Record<string, number> = {};\n\n    // Handle app launched with a certain URL (custom URL scheme).\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    (<any> window).handleOpenURL = (url: string): void => {\n        // Execute the callback in the Angular zone, so change detection doesn't stop working.\n        NgZone.run(() => {\n            // First check that the URL hasn't been treated a few seconds ago. Sometimes this function is called more than once.\n            if (lastUrls[url] && Date.now() - lastUrls[url] < 3000) {\n                // Function called more than once, stop.\n                return;\n            }\n\n            if (!CoreCustomURLSchemes.isCustomURL(url)) {\n                // Not a custom URL, ignore.\n                return;\n            }\n\n            lastUrls[url] = Date.now();\n\n            CoreEvents.trigger(CoreEvents.APP_LAUNCHED_URL, { url });\n            CoreCustomURLSchemes.handleCustomURL(url).catch((error) => {\n                CoreCustomURLSchemes.treatHandleCustomURLError(error);\n            });\n        });\n    };\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAASA,oBAAoB,QAAQ,sBAAsB;AAC3D,SAASC,MAAM,QAAQ,aAAa;AACpC,SAASC,UAAU,QAAQ,oBAAoB;AAE/C;;;AAGA;EAAA,OAAAC,IAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AA2BC,SAAAF,KAAA;EAAAA,IAAA,GAAAG,iBAAA,CA3Bc,aAAK;IAChB,MAAMC,QAAQ,GAA2B,EAAE;IAE3C;IACA;IACOC,MAAO,CAACC,aAAa,GAAIC,GAAW,IAAU;MACjD;MACAT,MAAM,CAACU,GAAG,CAAC,MAAK;QACZ;QACA,IAAIJ,QAAQ,CAACG,GAAG,CAAC,IAAIE,IAAI,CAACC,GAAG,EAAE,GAAGN,QAAQ,CAACG,GAAG,CAAC,GAAG,IAAI,EAAE;UACpD;UACA;;QAGJ,IAAI,CAACV,oBAAoB,CAACc,WAAW,CAACJ,GAAG,CAAC,EAAE;UACxC;UACA;;QAGJH,QAAQ,CAACG,GAAG,CAAC,GAAGE,IAAI,CAACC,GAAG,EAAE;QAE1BX,UAAU,CAACa,OAAO,CAACb,UAAU,CAACc,gBAAgB,EAAE;UAAEN;QAAG,CAAE,CAAC;QACxDV,oBAAoB,CAACiB,eAAe,CAACP,GAAG,CAAC,CAACQ,KAAK,CAAEC,KAAK,IAAI;UACtDnB,oBAAoB,CAACoB,yBAAyB,CAACD,KAAK,CAAC;QACzD,CAAC,CAAC;MACN,CAAC,CAAC;IACN,CAAC;EACL,CAAC;EAAA,OAAAhB,IAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}