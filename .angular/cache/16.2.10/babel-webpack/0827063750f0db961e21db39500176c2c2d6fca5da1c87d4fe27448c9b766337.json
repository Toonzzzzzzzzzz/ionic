{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { IonContent } from '@ionic/angular';\nimport { CoreError } from '@classes/errors/error';\nimport { CoreNetwork } from '@services/network';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites, CoreSitesReadingStrategy } from '@services/sites';\nimport { CoreSync } from '@services/sync';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ModalController, Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModLessonMenuModalPage } from '../../components/menu-modal/menu-modal';\nimport { AddonModLesson, AddonModLessonProvider } from '../../services/lesson';\nimport { AddonModLessonHelper } from '../../services/lesson-helper';\nimport { AddonModLessonOffline } from '../../services/lesson-offline';\nimport { AddonModLessonSync } from '../../services/lesson-sync';\nimport { CoreForms } from '@singletons/form';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nconst _c0 = [\"questionFormEl\"];\nfunction AddonModLessonPlayerPage_ion_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 9);\n    i0.ɵɵlistener(\"click\", function AddonModLessonPlayerPage_ion_button_9_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.showMenu());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_lesson.lessonmenu\"));\n  }\n}\nfunction AddonModLessonPlayerPage_ion_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 11)(1, \"ion-item\", 12);\n    i0.ɵɵelement(2, \"ion-icon\", 13);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r1.messages[0].message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_core_timer_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-timer\", 20);\n    i0.ɵɵlistener(\"finished\", function AddonModLessonPlayerPage_div_13_core_timer_1_Template_core_timer_finished_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.timeUp());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"endTime\", ctx_r5.endTime)(\"timeLeftClassThreshold\", -1)(\"timerText\", i0.ɵɵpipeBind1(1, 3, \"addon.mod_lesson.timeremaining\"));\n  }\n}\nconst _c1 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction AddonModLessonPlayerPage_div_13_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(4, 1, \"addon.mod_lesson.attempt\", i0.ɵɵpureFunction1(4, _c1, ctx_r6.retake)));\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 21)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r7.pageData.ongoingscore);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 23);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r15.component)(\"componentId\", ctx_r15.lesson.coursemodule)(\"text\", ctx_r15.pageContent)(\"contextInstanceId\", ctx_r15.lesson.coursemodule)(\"courseId\", ctx_r15.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_divider_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item-divider\", 12)(1, \"ion-label\")(2, \"h2\");\n    i0.ɵɵelement(3, \"core-format-text\", 23);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"component\", ctx_r18.component)(\"componentId\", ctx_r18.lesson.coursemodule)(\"text\", ctx_r18.pageContent)(\"contextInstanceId\", ctx_r18.lesson.coursemodule)(\"courseId\", ctx_r18.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12);\n    i0.ɵɵelement(1, \"ion-label\", 31)(2, \"ion-input\", 32);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(3, 5, \"addon.mod_lesson.youranswer\"));\n    i0.ɵɵproperty(\"type\", ctx_r19.question.input.type)(\"id\", ctx_r19.question.input.id)(\"formControlName\", ctx_r19.question.input.name)(\"maxlength\", ctx_r19.question.input.maxlength);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\", 33);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(4, \"core-rich-text-editor\", 34);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 7, \"core.content\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(5, 9, \"addon.mod_lesson.youranswer\"));\n    i0.ɵɵproperty(\"control\", ctx_r23.question.control)(\"component\", ctx_r23.component)(\"componentId\", ctx_r23.lesson.coursemodule)(\"autoSave\", true)(\"contextInstanceId\", ctx_r23.lesson.coursemodule);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\")(2, \"p\", 35);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 23);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r24 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 6, \"addon.mod_lesson.youranswer\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"component\", ctx_r24.component)(\"componentId\", ctx_r24.lesson.coursemodule)(\"text\", ctx_r24.question.useranswer)(\"contextInstanceId\", ctx_r24.lesson.coursemodule)(\"courseId\", ctx_r24.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_1_Template, 6, 11, \"ion-item\", 18);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_2_Template, 7, 8, \"ion-item\", 16);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r20 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r20.question.textarea);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r20.question.textarea && ctx_r20.question.useranswer);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-radio\", 39);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r28 = ctx.$implicit;\n    const ctx_r27 = i0.ɵɵnextContext(6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r27.component)(\"componentId\", ctx_r27.lesson.coursemodule)(\"text\", option_r28.text)(\"contextInstanceId\", ctx_r27.lesson.coursemodule)(\"courseId\", ctx_r27.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", option_r28.id)(\"value\", option_r28.value)(\"disabled\", option_r28.disabled);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-radio-group\", 37);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_ion_item_1_Template, 4, 8, \"ion-item\", 38);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r25 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"formControlName\", ctx_r25.question.controlName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r25.question.options);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-checkbox\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r30 = ctx.$implicit;\n    const ctx_r29 = i0.ɵɵnextContext(6);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r29.component)(\"componentId\", ctx_r29.lesson.coursemodule)(\"text\", option_r30.text)(\"contextInstanceId\", ctx_r29.lesson.coursemodule)(\"courseId\", ctx_r29.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", option_r30.id)(\"formControlName\", option_r30.name);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_ion_item_1_Template, 4, 7, \"ion-item\", 38);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r26 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r26.question.options);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_Template, 2, 2, \"ion-radio-group\", 36);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_Template, 2, 1, \"ng-container\", 18);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r21.question.multi);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r21.question.multi);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_ion_select_option_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 43);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r34 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", option_r34.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", option_r34.label, \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\")(2, \"p\");\n    i0.ɵɵelement(3, \"core-format-text\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-select\", 41);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵtemplate(6, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_ion_select_option_6_Template, 2, 2, \"ion-select-option\", 42);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const row_r32 = ctx.$implicit;\n    const ctx_r31 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"component\", ctx_r31.component)(\"componentId\", ctx_r31.lesson.coursemodule)(\"text\", row_r32.text)(\"contextInstanceId\", ctx_r31.lesson.coursemodule)(\"courseId\", ctx_r31.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", row_r32.id)(\"formControlName\", row_r32.name)(\"cancelText\", i0.ɵɵpipeBind1(5, 9, \"core.cancel\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", row_r32.options);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_Template, 7, 11, \"ion-item\", 38);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r22.question.rows);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 24, 25);\n    i0.ɵɵlistener(\"ngSubmit\", function AddonModLessonPlayerPage_div_13_ion_card_4_form_2_Template_form_ngSubmit_0_listener($event) {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r35.submitQuestion($event));\n    });\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_divider_2_Template, 4, 5, \"ion-item-divider\", 16);\n    i0.ɵɵelementContainerStart(3, 26);\n    i0.ɵɵtemplate(4, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_4_Template, 4, 7, \"ion-item\", 27);\n    i0.ɵɵtemplate(5, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_Template, 3, 2, \"ng-container\", 28);\n    i0.ɵɵtemplate(6, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_Template, 3, 2, \"ng-container\", 28);\n    i0.ɵɵtemplate(7, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_Template, 2, 1, \"ng-container\", 28);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementStart(8, \"ion-button\", 29);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r16.questionForm);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r16.pageContent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitch\", ctx_r16.question.template);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"shortanswer\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"essay\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"multichoice\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"matching\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r16.question.submitLabel, \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_4_ion_item_1_Template, 3, 5, \"ion-item\", 16);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_card_4_form_2_Template, 11, 8, \"form\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r8.question && ctx_r8.pageContent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.question && ctx_r8.loaded);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_ion_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r43 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\", 48)(1, \"ion-button\", 49);\n    i0.ɵɵlistener(\"click\", function AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_ion_col_2_Template_ion_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r43);\n      const button_r41 = restoredCtx.$implicit;\n      const ctx_r42 = i0.ɵɵnextContext(4);\n      return i0.ɵɵresetView(ctx_r42.buttonClicked(button_r41.data));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const button_r41 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"id\", button_r41.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", button_r41.content, \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-grid\", 45)(1, \"ion-row\", 46);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_ion_col_2_Template, 3, 2, \"ion-col\", 47);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r37 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r37.pageButtons);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_5_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\")(2, \"span\", 50);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"core-progress-bar\", 51);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r38 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"addon-mod_lesson-\", ctx_r38.cmId, \"-progress\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 4, \"addon.mod_lesson.progresscompleted\", i0.ɵɵpureFunction1(7, _c1, ctx_r38.pageData.progress)), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"ariaDescribedBy\", \"addon-mod_lesson-\", ctx_r38.cmId, \"-progress\");\n    i0.ɵɵproperty(\"progress\", ctx_r38.pageData.progress);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_5_ion_card_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 11)(1, \"ion-item\", 12);\n    i0.ɵɵelement(2, \"ion-icon\", 13);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.mod_lesson.progressbarteacherwarning2\"));\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_Template, 3, 1, \"ion-grid\", 44);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_list_5_ion_item_2_Template, 6, 9, \"ion-item\", 16);\n    i0.ɵɵtemplate(3, AddonModLessonPlayerPage_div_13_ion_list_5_ion_card_3_Template, 6, 3, \"ion-card\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.pageButtons == null ? null : ctx_r9.pageButtons.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.lesson.progressbar && !ctx_r9.canManage && ctx_r9.pageData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.lesson.progressbar && ctx_r9.canManage);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 52)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 53);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.mod_lesson.finishretakeoffline\"));\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_card_header_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card-header\", 12)(1, \"ion-card-title\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, \"addon.mod_lesson.congratulations\"));\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r45 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r45.eolData.notenoughtimespent.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r46 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r46.eolData.numberofpagesviewed.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r47 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r47.eolData.youshouldview.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r48 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r48.eolData.numberofcorrectanswers.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12);\n    i0.ɵɵelement(1, \"ion-label\", 56);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r49 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"innerHTML\", ctx_r49.eolData.displayscorewithessays.message, i0.ɵɵsanitizeHtml);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r50 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r50.eolData.displayscorewithoutessays.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r51 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r51.eolData.yourcurrentgradeisoutof.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r52 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r52.eolData.eolstudentoutoftimenoanswers.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r53 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r53.eolData.welldone.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\")(2, \"span\", 50);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"core-progress-bar\", 51);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r54 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"id\", \"addon-mod_lesson-\", ctx_r54.cmId, \"-progress-end\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(4, 4, \"addon.mod_lesson.progresscompleted\", i0.ɵɵpureFunction1(7, _c1, ctx_r54.eolData.progresscompleted.value)), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate1(\"ariaDescribedBy\", \"addon-mod_lesson-\", ctx_r54.cmId, \"-progress-end\");\n    i0.ɵɵproperty(\"progress\", ctx_r54.eolData.progresscompleted.value);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r55 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r55.eolData.displayofgrade.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r61 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 57);\n    i0.ɵɵlistener(\"click\", function AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_13_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r61);\n      const ctx_r60 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r60.reviewLesson(ctx_r60.reviewPageId));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.reviewlesson\"), \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r57 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r57.eolData.modattemptsnoteacher.message);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-button\", 58);\n    i0.ɵɵelement(1, \"core-format-text\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r58 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"href\", ctx_r58.activityLink.href)(\"capture\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r58.activityLink.label)(\"contextInstanceId\", ctx_r58.lesson.coursemodule)(\"courseId\", ctx_r58.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r59 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r59.activityLink.label)(\"contextInstanceId\", ctx_r59.lesson.coursemodule)(\"courseId\", ctx_r59.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_card_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_card_7_ion_card_header_1_Template, 4, 3, \"ion-card-header\", 16);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_2_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(3, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_3_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(4, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_4_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(5, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_5_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(6, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_6_Template, 2, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(7, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_7_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(8, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_8_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(9, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_9_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(10, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_10_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(11, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_11_Template, 6, 9, \"ion-item\", 16);\n    i0.ɵɵtemplate(12, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_12_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(13, AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_13_Template, 3, 3, \"ion-button\", 54);\n    i0.ɵɵtemplate(14, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_14_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(15, AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_15_Template, 2, 5, \"ion-button\", 55);\n    i0.ɵɵtemplate(16, AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_16_Template, 3, 3, \"ion-item\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.gradelesson);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.notenoughtimespent);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.numberofpagesviewed);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.youshouldview);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.numberofcorrectanswers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.displayscorewithessays);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r11.eolData.displayscorewithessays && ctx_r11.eolData.displayscorewithoutessays);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.yourcurrentgradeisoutof);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.eolstudentoutoftimenoanswers);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.welldone);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.lesson.progressbar && ctx_r11.eolData.progresscompleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.displayofgrade);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.reviewlesson);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.eolData.modattemptsnoteacher);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.activityLink && ctx_r11.activityLink.formatted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.activityLink && !ctx_r11.activityLink.formatted);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r62 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r62.processData.ongoingscore);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵelement(1, \"core-format-text\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r66 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"component\", ctx_r66.component)(\"componentId\", ctx_r66.lesson.coursemodule)(\"text\", ctx_r66.processData.feedback)(\"contextInstanceId\", ctx_r66.lesson.coursemodule)(\"courseId\", ctx_r66.courseId);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtext(8);\n    i0.ɵɵpipe(9, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"addon.mod_lesson.gotoendoflesson\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 5, \"addon.mod_lesson.or\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(9, 7, \"addon.mod_lesson.continuetonextpage\"));\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\");\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_2_Template, 2, 5, \"div\", 18);\n    i0.ɵɵtemplate(3, AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_3_Template, 10, 9, \"div\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r63 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r63.processData.reviewmode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r63.review);\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r69 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 61);\n    i0.ɵɵlistener(\"click\", function AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_3_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r69);\n      const ctx_r68 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r68.changePage(ctx_r68.LESSON_EOL));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_lesson.finish\"), \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_4_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r72 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 62);\n    i0.ɵɵlistener(\"click\", function AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_4_Template_ion_button_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r72);\n      const button_r70 = restoredCtx.$implicit;\n      const ctx_r71 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r71.changePage(button_r70.pageId, true));\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const button_r70 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, button_r70.label), \" \");\n  }\n}\nfunction AddonModLessonPlayerPage_div_13_ion_list_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_1_Template, 3, 1, \"ion-item\", 16);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_Template, 4, 2, \"ion-item\", 16);\n    i0.ɵɵtemplate(3, AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_3_Template, 3, 3, \"ion-button\", 59);\n    i0.ɵɵtemplate(4, AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_4_Template, 3, 3, \"ion-button\", 60);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.processData.ongoingscore && !ctx_r12.processData.reviewmode);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r12.processData.reviewmode || ctx_r12.review);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r12.review);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r12.processDataButtons);\n  }\n}\nconst _c2 = function (a0) {\n  return {\n    \"addon-mod_lesson-slideshow\": a0\n  };\n};\nconst _c3 = function (a0, a1) {\n  return {\n    \"width\": a0,\n    \"height\": a1\n  };\n};\nfunction AddonModLessonPlayerPage_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, AddonModLessonPlayerPage_div_13_core_timer_1_Template, 2, 5, \"core-timer\", 15);\n    i0.ɵɵtemplate(2, AddonModLessonPlayerPage_div_13_ion_item_2_Template, 5, 6, \"ion-item\", 16);\n    i0.ɵɵtemplate(3, AddonModLessonPlayerPage_div_13_ion_item_3_Template, 3, 1, \"ion-item\", 17);\n    i0.ɵɵtemplate(4, AddonModLessonPlayerPage_div_13_ion_card_4_Template, 3, 2, \"ion-card\", 18);\n    i0.ɵɵtemplate(5, AddonModLessonPlayerPage_div_13_ion_list_5_Template, 4, 3, \"ion-list\", 18);\n    i0.ɵɵtemplate(6, AddonModLessonPlayerPage_div_13_ion_card_6_Template, 6, 3, \"ion-card\", 19);\n    i0.ɵɵtemplate(7, AddonModLessonPlayerPage_div_13_ion_card_7_Template, 17, 16, \"ion-card\", 18);\n    i0.ɵɵtemplate(8, AddonModLessonPlayerPage_div_13_ion_list_8_Template, 5, 4, \"ion-list\", 18);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(10, _c2, ctx_r2.lesson.slideshow))(\"ngStyle\", i0.ɵɵpureFunction2(12, _c3, ctx_r2.lessonWidth, ctx_r2.lessonHeight));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.endTime);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.showRetake && !ctx_r2.eolData && !ctx_r2.processData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.pageData && ctx_r2.pageData.ongoingscore && !ctx_r2.eolData && !ctx_r2.processData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.eolData && !ctx_r2.processData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.eolData && !ctx_r2.processData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.eolData && !ctx_r2.processData && (ctx_r2.eolData.offline == null ? null : ctx_r2.eolData.offline.value));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.eolData && !ctx_r2.processData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.processData);\n  }\n}\n/**\n * Page that allows attempting and reviewing a lesson.\n */\nexport class AddonModLessonPlayerPage {\n  constructor(changeDetector, formBuilder) {\n    this.changeDetector = changeDetector;\n    this.formBuilder = formBuilder;\n    this.component = AddonModLessonProvider.COMPONENT;\n    this.LESSON_EOL = AddonModLessonProvider.LESSON_EOL;\n    this.messages = []; // Messages to display to the user.\n    this.processDataButtons = []; // Buttons to display after processing a page.\n    this.forceLeave = false; // If true, don't perform any check when leaving the view.\n    this.menuShown = false; // Whether menu is shown.\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.cmId = CoreNavigator.getRequiredRouteNumberParam('cmId');\n        _this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n        _this.password = CoreNavigator.getRouteParam('password');\n        _this.review = !!CoreNavigator.getRouteBooleanParam('review');\n        _this.currentPage = CoreNavigator.getRouteNumberParam('pageId');\n        _this.retakeToReview = CoreNavigator.getRouteNumberParam('retake');\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n        CoreNavigator.back();\n        return;\n      }\n      try {\n        // Fetch the Lesson data.\n        const success = yield _this.fetchLessonData();\n        if (success) {\n          // Review data loaded or new retake started, remove any retake being finished in sync.\n          AddonModLessonSync.deleteRetakeFinishedInSync(_this.lesson.id);\n        }\n      } finally {\n        _this.loaded = true;\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    if (this.lesson) {\n      // Unblock the lesson so it can be synced.\n      CoreSync.unblockOperation(this.component, this.lesson.id);\n    }\n  }\n  /**\n   * Check if we can leave the page or not.\n   *\n   * @returns Resolved if we can leave it, rejected if not.\n   */\n  canLeave() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (_this2.forceLeave || !_this2.questionForm) {\n        return true;\n      }\n      if (_this2.question && !_this2.eolData && !_this2.processData && _this2.originalData) {\n        // Question shown. Check if there is any change.\n        if (!CoreUtils.basicLeftCompare(_this2.questionForm.getRawValue(), _this2.originalData, 3)) {\n          yield CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\n        }\n      }\n      CoreForms.triggerFormCancelledEvent(_this2.formElement, CoreSites.getCurrentSiteId());\n      return true;\n    })();\n  }\n  /**\n   * Runs when the page is about to leave and no longer be the active page.\n   */\n  ionViewWillLeave() {\n    if (this.menuShown) {\n      ModalController.dismiss();\n    }\n  }\n  /**\n   * A button was clicked.\n   *\n   * @param data Button data.\n   */\n  buttonClicked(data) {\n    this.processPage(data);\n  }\n  /**\n   * Call a function and go offline if allowed and the call fails.\n   *\n   * @param func Function to call.\n   * @param options Options passed to the function.\n   * @returns Promise resolved in success, rejected otherwise.\n   */\n  callFunction(func, options) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        return yield func();\n      } catch (error) {\n        if (_this3.offline || _this3.review || !AddonModLesson.isLessonOffline(_this3.lesson)) {\n          // Already offline or not allowed.\n          throw error;\n        }\n        if (CoreUtils.isWebServiceError(error)) {\n          // WebService returned an error, cannot perform the action.\n          throw error;\n        }\n        // Go offline and retry.\n        _this3.offline = true;\n        // Get the possible jumps now.\n        _this3.jumps = yield AddonModLesson.getPagesPossibleJumps(_this3.lesson.id, {\n          cmId: _this3.cmId,\n          readingStrategy: 1 /* CoreSitesReadingStrategy.PREFER_CACHE */\n        });\n        // Call the function again with offline mode and the new jumps.\n        options.readingStrategy = 1 /* CoreSitesReadingStrategy.PREFER_CACHE */;\n        options.jumps = _this3.jumps;\n        options.offline = true;\n        return func();\n      }\n    })();\n  }\n  /**\n   * Change the page from menu or when continuing from a feedback page.\n   *\n   * @param pageId Page to load.\n   * @param ignoreCurrent If true, allow loading current page.\n   * @returns Promise resolved when done.\n   */\n  changePage(pageId, ignoreCurrent) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (!ignoreCurrent && !_this4.eolData && _this4.currentPage == pageId) {\n        // Page already loaded, stop.\n        return;\n      }\n      _this4.loaded = true;\n      _this4.messages = [];\n      try {\n        yield _this4.loadPage(pageId);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading page');\n      } finally {\n        _this4.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Get the lesson data and load the page.\n   *\n   * @returns Promise resolved with true if success, resolved with false otherwise.\n   */\n  fetchLessonData() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        var _this5$lesson$mediafi;\n        _this5.lesson = yield AddonModLesson.getLesson(_this5.courseId, _this5.cmId);\n        _this5.title = _this5.lesson.name; // Temporary title.\n        // Block the lesson so it cannot be synced.\n        CoreSync.blockOperation(_this5.component, _this5.lesson.id);\n        // Wait for any ongoing sync to finish. We won't sync a lesson while it's being played.\n        yield AddonModLessonSync.waitForSync(_this5.lesson.id);\n        // If lesson has offline data already, use offline mode.\n        _this5.offline = yield AddonModLessonOffline.hasOfflineData(_this5.lesson.id);\n        if (!_this5.offline && !CoreNetwork.isOnline() && AddonModLesson.isLessonOffline(_this5.lesson) && !_this5.review) {\n          // Lesson doesn't have offline data, but it allows offline and the device is offline. Use offline mode.\n          _this5.offline = true;\n        }\n        const lessonId = _this5.lesson.id;\n        const options = {\n          cmId: _this5.cmId,\n          readingStrategy: _this5.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */\n        };\n\n        _this5.accessInfo = yield _this5.callFunction(() => AddonModLesson.getAccessInformation(lessonId, options), options);\n        const promises = [];\n        _this5.canManage = _this5.accessInfo.canmanage;\n        _this5.retake = _this5.accessInfo.attemptscount;\n        _this5.showRetake = !_this5.currentPage && _this5.retake > 0; // Only show it in first page if it isn't the first retake.\n        if (_this5.accessInfo.preventaccessreasons.length) {\n          // If it's a password protected lesson and we have the password, allow playing it.\n          const preventReason = AddonModLesson.getPreventAccessReason(_this5.accessInfo, !!_this5.password, _this5.review);\n          if (preventReason) {\n            // Lesson cannot be played, show message and go back.\n            throw new CoreError(preventReason.message);\n          }\n        }\n        if (_this5.review && _this5.retakeToReview != _this5.accessInfo.attemptscount - 1) {\n          // Reviewing a retake that isn't the last one. Error.\n          throw new CoreError(Translate.instant('addon.mod_lesson.errorreviewretakenotlast'));\n        }\n        if (_this5.password) {\n          // Lesson uses password, get the whole lesson object.\n          const options = {\n            password: _this5.password,\n            cmId: _this5.cmId,\n            readingStrategy: _this5.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */\n          };\n\n          promises.push(_this5.callFunction(() => AddonModLesson.getLessonWithPassword(lessonId, options), options).then(lesson => {\n            _this5.lesson = lesson;\n            return;\n          }));\n        }\n        if (_this5.offline) {\n          // Offline mode, get the list of possible jumps to allow navigation.\n          promises.push(AddonModLesson.getPagesPossibleJumps(_this5.lesson.id, {\n            cmId: _this5.cmId,\n            readingStrategy: 1 /* CoreSitesReadingStrategy.PREFER_CACHE */\n          }).then(jumpList => {\n            _this5.jumps = jumpList;\n            return;\n          }));\n        }\n        yield Promise.all(promises);\n        _this5.mediaFile = (_this5$lesson$mediafi = _this5.lesson.mediafiles) === null || _this5$lesson$mediafi === void 0 ? void 0 : _this5$lesson$mediafi[0];\n        _this5.lessonWidth = _this5.lesson.slideshow ? CoreDomUtils.formatPixelsSize(_this5.lesson.mediawidth) : '';\n        _this5.lessonHeight = _this5.lesson.slideshow ? CoreDomUtils.formatPixelsSize(_this5.lesson.mediaheight) : '';\n        yield _this5.launchRetake(_this5.currentPage);\n        return true;\n      } catch (error) {\n        if (_this5.review && _this5.retakeToReview && CoreUtils.isWebServiceError(error)) {\n          // The user cannot review the retake. Unmark the retake as being finished in sync.\n          yield AddonModLessonSync.deleteRetakeFinishedInSync(_this5.lesson.id);\n        }\n        CoreDomUtils.showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n        _this5.forceLeave = true;\n        CoreNavigator.back();\n        return false;\n      }\n    })();\n  }\n  /**\n   * Finish the retake.\n   *\n   * @param outOfTime Whether the retake is finished because the user ran out of time.\n   * @returns Promise resolved when done.\n   */\n  finishRetake(outOfTime) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this6.lesson) {\n        return;\n      }\n      const lesson = _this6.lesson;\n      _this6.messages = [];\n      if (_this6.offline && CoreNetwork.isOnline()) {\n        var _result$warnings;\n        // Offline mode but the app is online. Try to sync the data.\n        const result = yield CoreUtils.ignoreErrors(AddonModLessonSync.syncLesson(lesson.id, true, true));\n        if (result !== null && result !== void 0 && (_result$warnings = result.warnings) !== null && _result$warnings !== void 0 && _result$warnings.length) {\n          // Some data was deleted. Check if the retake has changed.\n          const info = yield AddonModLesson.getAccessInformation(lesson.id, {\n            cmId: _this6.cmId\n          });\n          if (info.attemptscount != _this6.accessInfo.attemptscount) {\n            // The retake has changed. Leave the view and show the error.\n            _this6.forceLeave = true;\n            CoreNavigator.back();\n            throw new CoreError(result.warnings[0]);\n          }\n          // Retake hasn't changed, show the warning and finish the retake in offline.\n          CoreDomUtils.showAlert(undefined, result.warnings[0]);\n        }\n        _this6.offline = false;\n      }\n      // Now finish the retake.\n      const options = {\n        password: _this6.password,\n        outOfTime,\n        review: _this6.review,\n        offline: _this6.offline,\n        accessInfo: _this6.accessInfo\n      };\n      const data = yield _this6.callFunction(() => AddonModLesson.finishRetake(lesson, _this6.courseId, options), options);\n      _this6.title = lesson.name;\n      _this6.eolData = data.data;\n      _this6.messages = _this6.messages.concat(data.messages);\n      _this6.processData = undefined;\n      _this6.endTime = undefined;\n      CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, {\n        module: 'lesson'\n      });\n      // Format activity link if present.\n      if (_this6.eolData.activitylink) {\n        _this6.activityLink = AddonModLessonHelper.formatActivityLink(_this6.eolData.activitylink.value);\n      } else {\n        _this6.activityLink = undefined;\n      }\n      // Format review lesson if present.\n      if (_this6.eolData.reviewlesson) {\n        const params = CoreUrlUtils.extractUrlParams(_this6.eolData.reviewlesson.value);\n        if (!params || !params.pageid) {\n          // No pageid in the URL, the user cannot review (probably didn't answer any question).\n          delete _this6.eolData.reviewlesson;\n        } else {\n          _this6.reviewPageId = Number(params.pageid);\n        }\n      }\n      _this6.logPageLoaded(AddonModLessonProvider.LESSON_EOL, Translate.instant('addon.mod_lesson.congratulations'));\n    })();\n  }\n  /**\n   * Jump to a certain page after performing an action.\n   *\n   * @param pageId The page to load.\n   * @returns Promise resolved when done.\n   */\n  jumpToPage(pageId) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      if (pageId === 0) {\n        // Not a valid page, return to entry view.\n        // This happens, for example, when the user clicks to go to previous page and there is no previous page.\n        _this7.forceLeave = true;\n        CoreNavigator.back();\n        return;\n      } else if (pageId == AddonModLessonProvider.LESSON_EOL) {\n        // End of lesson reached.\n        return _this7.finishRetake();\n      }\n      // Load new page.\n      _this7.messages = [];\n      return _this7.loadPage(pageId);\n    })();\n  }\n  /**\n   * Start or continue a retake.\n   *\n   * @param pageId The page to load.\n   * @returns Promise resolved when done.\n   */\n  launchRetake(pageId) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      var _data;\n      let data;\n      if (_this8.review) {\n        // Review mode, no need to launch the retake.\n      } else if (!_this8.offline) {\n        // Not in offline mode, launch the retake.\n        data = yield AddonModLesson.launchRetake(_this8.lesson.id, _this8.password, pageId);\n      } else {\n        // Check if there is a finished offline retake.\n        const finished = yield AddonModLessonOffline.hasFinishedRetake(_this8.lesson.id);\n        if (finished) {\n          // Always show EOL page.\n          pageId = AddonModLessonProvider.LESSON_EOL;\n        }\n      }\n      _this8.currentPage = pageId || _this8.accessInfo.firstpageid;\n      _this8.messages = ((_data = data) === null || _data === void 0 ? void 0 : _data.messages) || [];\n      if (_this8.lesson.timelimit && !_this8.accessInfo.canmanage) {\n        // Get the last lesson timer.\n        const timers = yield AddonModLesson.getTimers(_this8.lesson.id, {\n          cmId: _this8.cmId,\n          readingStrategy: 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */\n        });\n\n        _this8.endTime = timers[timers.length - 1].starttime + _this8.lesson.timelimit;\n      }\n      return _this8.loadPage(_this8.currentPage);\n    })();\n  }\n  /**\n   * Load the lesson menu.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadMenu() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (_this9.loadingMenu || !_this9.lesson) {\n        // Already loading.\n        return;\n      }\n      try {\n        _this9.loadingMenu = true;\n        const lessonId = _this9.lesson.id;\n        const options = {\n          password: _this9.password,\n          cmId: _this9.cmId,\n          readingStrategy: _this9.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */\n        };\n\n        const pages = yield _this9.callFunction(() => AddonModLesson.getPages(lessonId, options), options);\n        _this9.lessonPages = pages.map(entry => entry.page);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading menu.');\n      } finally {\n        _this9.loadingMenu = false;\n      }\n    })();\n  }\n  /**\n   * Load a certain page.\n   *\n   * @param pageId The page to load.\n   * @returns Promise resolved when done.\n   */\n  loadPage(pageId) {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      var _data$page$title, _data$page;\n      if (pageId == AddonModLessonProvider.LESSON_EOL) {\n        // End of lesson reached.\n        return _this10.finishRetake();\n      } else if (!_this10.lesson) {\n        return;\n      }\n      const lesson = _this10.lesson;\n      const options = {\n        password: _this10.password,\n        review: _this10.review,\n        includeContents: true,\n        cmId: _this10.cmId,\n        readingStrategy: _this10.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */,\n        accessInfo: _this10.accessInfo,\n        jumps: _this10.jumps,\n        includeOfflineData: true\n      };\n      const data = yield _this10.callFunction(() => AddonModLesson.getPageData(lesson, pageId, options), options);\n      if (data.newpageid == AddonModLessonProvider.LESSON_EOL) {\n        // End of lesson reached.\n        return _this10.finishRetake();\n      }\n      _this10.pageData = data;\n      _this10.title = data.page.title;\n      _this10.pageContent = AddonModLessonHelper.getPageContentsFromPageData(data);\n      _this10.loaded = true;\n      _this10.currentPage = pageId;\n      _this10.messages = _this10.messages.concat(data.messages);\n      // Page loaded, hide EOL and feedback data if shown.\n      _this10.eolData = _this10.processData = undefined;\n      if (AddonModLesson.isQuestionPage(data.page.type)) {\n        // Create an empty FormGroup without controls, they will be added in getQuestionFromPageData.\n        _this10.questionForm = _this10.formBuilder.group({});\n        _this10.pageButtons = [];\n        _this10.question = AddonModLessonHelper.getQuestionFromPageData(_this10.questionForm, data);\n        _this10.originalData = _this10.questionForm.getRawValue(); // Use getRawValue to include disabled values.\n      } else {\n        _this10.pageButtons = AddonModLessonHelper.getPageButtonsFromHtml(data.pagecontent || '');\n        _this10.question = undefined;\n        _this10.originalData = undefined;\n      }\n      // Don't display the navigation menu in review mode, using them displays errors.\n      if (data.displaymenu && !_this10.displayMenu && !_this10.review) {\n        // Load the menu.\n        _this10.loadMenu();\n      }\n      _this10.displayMenu = !_this10.review && !!data.displaymenu;\n      if (!_this10.firstPageLoaded) {\n        _this10.firstPageLoaded = true;\n      } else {\n        _this10.showRetake = false;\n      }\n      _this10.logPageLoaded(pageId, (_data$page$title = (_data$page = data.page) === null || _data$page === void 0 ? void 0 : _data$page.title) !== null && _data$page$title !== void 0 ? _data$page$title : '');\n    })();\n  }\n  /**\n   * Log page loaded.\n   *\n   * @param pageId Page ID.\n   */\n  logPageLoaded(pageId, title) {\n    if (!this.lesson) {\n      return;\n    }\n    CoreAnalytics.logEvent({\n      type: CoreAnalyticsEventType.VIEW_ITEM,\n      ws: 'mod_lesson_get_page_data',\n      name: this.lesson.name + ': ' + title,\n      data: {\n        id: this.lesson.id,\n        pageid: pageId,\n        category: 'lesson'\n      },\n      url: `/mod/lesson/view.php?id=${this.lesson.id}&pageid=${pageId}`\n    });\n  }\n  /**\n   * Log continue page.\n   */\n  logContinuePageLoaded() {\n    if (!this.lesson) {\n      return;\n    }\n    CoreAnalytics.logEvent({\n      type: CoreAnalyticsEventType.VIEW_ITEM,\n      ws: 'mod_lesson_process_page',\n      name: this.lesson.name + ': ' + Translate.instant('addon.mod_lesson.continue'),\n      data: {\n        id: this.lesson.id,\n        category: 'lesson'\n      },\n      url: '/mod/lesson/continue.php'\n    });\n  }\n  /**\n   * Process a page, sending some data.\n   *\n   * @param data The data to send.\n   * @param formSubmitted Whether a form was submitted.\n   * @returns Promise resolved when done.\n   */\n  processPage(data, formSubmitted) {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this11.lesson || !_this11.pageData) {\n        return;\n      }\n      _this11.loaded = false;\n      const lesson = _this11.lesson;\n      const pageData = _this11.pageData;\n      const options = {\n        password: _this11.password,\n        review: _this11.review,\n        offline: _this11.offline,\n        accessInfo: _this11.accessInfo,\n        jumps: _this11.jumps\n      };\n      try {\n        const result = yield _this11.callFunction(() => AddonModLesson.processPage(lesson, _this11.courseId, pageData, data, options), options);\n        if (formSubmitted) {\n          CoreForms.triggerFormSubmittedEvent(_this11.formElement, result.sent, CoreSites.getCurrentSiteId());\n        }\n        if (!_this11.offline && !_this11.review && AddonModLesson.isLessonOffline(lesson)) {\n          var _this11$pageData;\n          // Lesson allows offline and the user changed some data in server. Update cached data.\n          const retake = _this11.accessInfo.attemptscount;\n          const options = {\n            cmId: _this11.cmId,\n            readingStrategy: 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */\n          };\n          // Update in background the list of content pages viewed or question attempts.\n          if (AddonModLesson.isQuestionPage(((_this11$pageData = _this11.pageData) === null || _this11$pageData === void 0 || (_this11$pageData = _this11$pageData.page) === null || _this11$pageData === void 0 ? void 0 : _this11$pageData.type) || -1)) {\n            AddonModLesson.getQuestionsAttemptsOnline(lesson.id, retake, options);\n          } else {\n            AddonModLesson.getContentPagesViewedOnline(lesson.id, retake, options);\n          }\n        }\n        if (result.nodefaultresponse || result.inmediatejump) {\n          // Don't display feedback or force a redirect to a new page. Load the new page.\n          return yield _this11.jumpToPage(result.newpageid);\n        }\n        // Not inmediate jump, show the feedback.\n        result.feedback = AddonModLessonHelper.removeQuestionFromFeedback(result.feedback);\n        _this11.messages = result.messages;\n        _this11.processData = result;\n        _this11.processDataButtons = [];\n        if (lesson.review && !result.correctanswer && !result.noanswer && !result.isessayquestion && !result.maxattemptsreached && !result.reviewmode) {\n          // User can try again, show button to do so.\n          _this11.processDataButtons.push({\n            label: 'addon.mod_lesson.reviewquestionback',\n            pageId: _this11.currentPage\n          });\n        }\n        // Button to continue.\n        if (lesson.review && !result.correctanswer && !result.noanswer && !result.isessayquestion && !result.maxattemptsreached) {\n          var _pageData$page;\n          /* If both the \"Yes, I'd like to try again\" and \"No, I just want to go on to the next question\" point to the\n              same page then don't show the \"No, I just want to go on to the next question\" button. It's confusing. */\n          if (((_pageData$page = pageData.page) === null || _pageData$page === void 0 ? void 0 : _pageData$page.id) != result.newpageid) {\n            // Button to continue the lesson (the page to go is configured by the teacher).\n            _this11.processDataButtons.push({\n              label: 'addon.mod_lesson.reviewquestioncontinue',\n              pageId: result.newpageid\n            });\n          }\n        } else {\n          _this11.processDataButtons.push({\n            label: 'addon.mod_lesson.continue',\n            pageId: result.newpageid\n          });\n        }\n        _this11.logContinuePageLoaded();\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error processing page');\n      } finally {\n        _this11.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Review the lesson.\n   *\n   * @param pageId Page to load.\n   */\n  reviewLesson(pageId) {\n    var _this12 = this;\n    return _asyncToGenerator(function* () {\n      _this12.loaded = false;\n      _this12.review = true;\n      _this12.offline = false; // Don't allow offline mode in review.\n      try {\n        yield _this12.loadPage(pageId);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading page');\n      } finally {\n        _this12.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Submit a question.\n   *\n   * @param e Event.\n   */\n  submitQuestion(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    this.loaded = false;\n    // Use getRawValue to include disabled values.\n    const data = AddonModLessonHelper.prepareQuestionData(this.question, this.questionForm.getRawValue());\n    this.processPage(data, true).finally(() => {\n      this.loaded = true;\n    });\n  }\n  /**\n   * Time up.\n   */\n  timeUp() {\n    var _this13 = this;\n    return _asyncToGenerator(function* () {\n      // Time up called, hide the timer.\n      _this13.endTime = undefined;\n      _this13.loaded = false;\n      try {\n        yield _this13.finishRetake(true);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error finishing attempt');\n      } finally {\n        _this13.loaded = true;\n      }\n    })();\n  }\n  /**\n   * Show the navigation modal.\n   *\n   * @returns Promise resolved when done.\n   */\n  showMenu() {\n    var _this14 = this;\n    return _asyncToGenerator(function* () {\n      _this14.menuShown = true;\n      yield CoreDomUtils.openSideModal({\n        component: AddonModLessonMenuModalPage,\n        componentProps: {\n          pageInstance: _this14\n        }\n      });\n      _this14.menuShown = false;\n    })();\n  }\n}\n_class = AddonModLessonPlayerPage;\n_class.ɵfac = function AddonModLessonPlayerPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ChangeDetectorRef), i0.ɵɵdirectiveInject(i1.FormBuilder));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-mod-lesson-player\"]],\n  viewQuery: function AddonModLessonPlayerPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(IonContent, 5);\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.formElement = _t.first);\n    }\n  },\n  decls: 14,\n  vars: 10,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [1, \"limited-width\"], [3, \"hideUntil\"], [\"class\", \"core-info-card\", 4, \"ngIf\"], [3, \"ngClass\", \"ngStyle\", 4, \"ngIf\"], [\"fill\", \"clear\", 3, \"click\"], [\"name\", \"fas-bookmark\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [1, \"core-info-card\"], [1, \"ion-text-wrap\"], [\"name\", \"fas-circle-info\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [3, \"ngClass\", \"ngStyle\"], [3, \"endTime\", \"timeLeftClassThreshold\", \"timerText\", \"finished\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"class\", \"addon-mod_lesson-ongoingscore ion-text-wrap\", 4, \"ngIf\"], [4, \"ngIf\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [3, \"endTime\", \"timeLeftClassThreshold\", \"timerText\", \"finished\"], [1, \"addon-mod_lesson-ongoingscore\", \"ion-text-wrap\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [\"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"courseId\"], [3, \"formGroup\", \"ngSubmit\"], [\"questionFormEl\", \"\"], [3, \"ngSwitch\"], [\"class\", \"ion-text-wrap\", 4, \"ngSwitchCase\"], [4, \"ngSwitchCase\"], [\"expand\", \"block\", \"type\", \"submit\", 1, \"ion-text-wrap\", \"ion-margin\", \"button-no-uppercase\"], [\"type\", \"submit\", 1, \"core-submit-hidden-enter\"], [\"stacked\", \"\", 1, \"sr-only\"], [\"autocorrect\", \"off\", 3, \"type\", \"placeholder\", \"id\", \"formControlName\", \"maxlength\"], [1, \"sr-only\"], [\"contextLevel\", \"module\", \"elementId\", \"answer_editor\", 3, \"placeholder\", \"control\", \"component\", \"componentId\", \"autoSave\", \"contextInstanceId\"], [1, \"item-heading\"], [3, \"formControlName\", 4, \"ngIf\"], [3, \"formControlName\"], [\"class\", \"ion-text-wrap\", 4, \"ngFor\", \"ngForOf\"], [\"slot\", \"end\", 3, \"id\", \"value\", \"disabled\"], [\"slot\", \"end\", 3, \"id\", \"formControlName\"], [\"interface\", \"action-sheet\", 3, \"id\", \"formControlName\", \"cancelText\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [\"class\", \"ion-text-wrap addon-mod_lesson-pagebuttons\", 4, \"ngIf\"], [1, \"ion-text-wrap\", \"addon-mod_lesson-pagebuttons\"], [1, \"ion-align-items-center\"], [\"size\", \"12\", \"size-md\", \"6\", \"size-lg\", \"3\", \"col-xl\", \"\", 4, \"ngFor\", \"ngForOf\"], [\"size\", \"12\", \"size-md\", \"6\", \"size-lg\", \"3\", \"col-xl\", \"\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-text-wrap\", \"button-no-uppercase\", 3, \"id\", \"click\"], [3, \"id\"], [3, \"progress\", \"ariaDescribedBy\"], [1, \"core-warning-card\"], [\"name\", \"fas-triangle-exclamation\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", \"class\", \"ion-text-wrap ion-margin button-no-uppercase\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", \"core-link\", \"\", \"class\", \"ion-text-wrap ion-margin button-no-uppercase\", 3, \"href\", \"capture\", 4, \"ngIf\"], [3, \"innerHTML\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", \"ion-margin\", \"button-no-uppercase\", 3, \"click\"], [\"expand\", \"block\", \"fill\", \"outline\", \"core-link\", \"\", 1, \"ion-text-wrap\", \"ion-margin\", \"button-no-uppercase\", 3, \"href\", \"capture\"], [\"expand\", \"block\", \"class\", \"ion-text-wrap ion-margin\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"class\", \"ion-text-wrap ion-margin\", \"fill\", \"outline\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"]],\n  template: function AddonModLessonPlayerPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵelement(7, \"core-format-text\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(8, \"ion-buttons\", 3);\n      i0.ɵɵtemplate(9, AddonModLessonPlayerPage_ion_button_9_Template, 3, 3, \"ion-button\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"ion-content\", 5)(11, \"core-loading\", 6);\n      i0.ɵɵtemplate(12, AddonModLessonPlayerPage_ion_card_12_Template, 5, 1, \"ion-card\", 7);\n      i0.ɵɵtemplate(13, AddonModLessonPlayerPage_div_13_Template, 9, 15, \"div\", 8);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 8, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"text\", ctx.title)(\"contextInstanceId\", ctx.lesson == null ? null : ctx.lesson.coursemodule)(\"courseId\", ctx.courseId);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.displayMenu || ctx.mediaFile);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.lesson && (ctx.messages == null ? null : ctx.messages.length));\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.lesson);\n    }\n  },\n  styles: [\"[_nghost-%COMP%] {\\n  --background-odd: var(--light);\\n}\\n\\nhtml.dark[_nghost-%COMP%], html.dark   [_nghost-%COMP%] {\\n  --background-odd: var(--medium);\\n}\\n\\n[_nghost-%COMP%]     .addon-mod_lesson-slideshow {\\n  max-width: 100%;\\n  max-height: 100%;\\n  margin: 0 auto;\\n}\\n[_nghost-%COMP%]     .studentanswer {\\n  -webkit-padding-start: 8px;\\n          padding-inline-start: 8px;\\n}\\n[_nghost-%COMP%]     table {\\n  width: 100%;\\n  margin-top: 1.5rem;\\n}\\n[_nghost-%COMP%]     table tr:nth-child(odd) {\\n  background-color: var(--background-odd);\\n}\\n[_nghost-%COMP%]     table tr:last-child td {\\n  border-bottom: 0;\\n}\\n[_nghost-%COMP%]     table td {\\n  padding: 5px;\\n  line-height: 1.5;\\n  border-bottom: 1px solid var(--stroke);\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hZGRvbnMvbW9kL2xlc3Nvbi9wYWdlcy9wbGF5ZXIvcGxheWVyLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRyw4QkFBQTtBQUNIOztBQUVBO0VBQ0csK0JBQUE7QUFDSDs7QUFHSTtFQUNJLGVBQUE7RUFDQSxnQkFBQTtFQUNBLGNBQUE7QUFBUjtBQUdJO0VBQ0ksMEJBQUE7VUFBQSx5QkFBQTtBQURSO0FBSUk7RUFDSSxXQUFBO0VBQ0Esa0JBQUE7QUFGUjtBQUlRO0VBQ0ksdUNBQUE7QUFGWjtBQUtRO0VBQ0ksZ0JBQUE7QUFIWjtBQU1RO0VBQ0ksWUFBQTtFQUNBLGdCQUFBO0VBQ0Esc0NBQUE7QUFKWiIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgIC0tYmFja2dyb3VuZC1vZGQ6IHZhcigtLWxpZ2h0KTtcbn1cblxuOmhvc3QtY29udGV4dChodG1sLmRhcmspIHtcbiAgIC0tYmFja2dyb3VuZC1vZGQ6IHZhcigtLW1lZGl1bSk7XG59XG5cbjpob3N0IDo6bmctZGVlcCB7XG4gICAgLmFkZG9uLW1vZF9sZXNzb24tc2xpZGVzaG93IHtcbiAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICBtYXgtaGVpZ2h0OiAxMDAlO1xuICAgICAgICBtYXJnaW46IDAgYXV0bztcbiAgICB9XG5cbiAgICAuc3R1ZGVudGFuc3dlciB7XG4gICAgICAgIHBhZGRpbmctaW5saW5lLXN0YXJ0OiA4cHg7XG4gICAgfVxuXG4gICAgdGFibGUge1xuICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgbWFyZ2luLXRvcDogMS41cmVtO1xuXG4gICAgICAgIHRyOm50aC1jaGlsZChvZGQpIHtcbiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLWJhY2tncm91bmQtb2RkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRyOmxhc3QtY2hpbGQgdGQge1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRkIHtcbiAgICAgICAgICAgIHBhZGRpbmc6IDVweDtcbiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAxLjU7XG4gICAgICAgICAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgdmFyKC0tc3Ryb2tlKTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["IonContent","CoreError","CoreNetwork","CoreNavigator","CoreSites","CoreSitesReadingStrategy","CoreSync","CoreDomUtils","CoreUrlUtils","CoreUtils","ModalController","Translate","CoreEvents","AddonModLessonMenuModalPage","AddonModLesson","AddonModLessonProvider","AddonModLessonHelper","AddonModLessonOffline","AddonModLessonSync","CoreForms","CoreAnalytics","CoreAnalyticsEventType","i0","ɵɵelementStart","ɵɵlistener","AddonModLessonPlayerPage_ion_button_9_Template_ion_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","showMenu","ɵɵelement","ɵɵelementEnd","ɵɵattribute","ɵɵpipeBind1","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate","ctx_r1","messages","message","AddonModLessonPlayerPage_div_13_core_timer_1_Template_core_timer_finished_0_listener","_r14","ctx_r13","timeUp","ɵɵproperty","ctx_r5","endTime","ɵɵpipeBind2","ɵɵpureFunction1","_c1","ctx_r6","retake","ctx_r7","pageData","ongoingscore","ctx_r15","component","lesson","coursemodule","pageContent","courseId","ctx_r18","ɵɵpropertyInterpolate","ctx_r19","question","input","type","id","name","maxlength","ctx_r23","control","ctx_r24","useranswer","ɵɵelementContainerStart","ɵɵtemplate","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_1_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_ion_item_2_Template","ɵɵelementContainerEnd","ctx_r20","textarea","ctx_r27","option_r28","text","value","disabled","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_ion_item_1_Template","ctx_r25","controlName","options","ctx_r29","option_r30","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_ion_item_1_Template","ctx_r26","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ion_radio_group_1_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_ng_container_2_Template","ctx_r21","multi","option_r34","ɵɵtextInterpolate1","label","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_ion_select_option_6_Template","ctx_r31","row_r32","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_ion_item_1_Template","ctx_r22","rows","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_Template_form_ngSubmit_0_listener","$event","_r36","ctx_r35","submitQuestion","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_divider_2_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ion_item_4_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_5_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_6_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_ng_container_7_Template","ctx_r16","questionForm","template","submitLabel","AddonModLessonPlayerPage_div_13_ion_card_4_ion_item_1_Template","AddonModLessonPlayerPage_div_13_ion_card_4_form_2_Template","ctx_r8","loaded","AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_ion_col_2_Template_ion_button_click_1_listener","restoredCtx","_r43","button_r41","$implicit","ctx_r42","buttonClicked","data","content","AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_ion_col_2_Template","ctx_r37","pageButtons","ɵɵpropertyInterpolate1","ctx_r38","cmId","progress","AddonModLessonPlayerPage_div_13_ion_list_5_ion_grid_1_Template","AddonModLessonPlayerPage_div_13_ion_list_5_ion_item_2_Template","AddonModLessonPlayerPage_div_13_ion_list_5_ion_card_3_Template","ctx_r9","length","progressbar","canManage","ctx_r45","eolData","notenoughtimespent","ctx_r46","numberofpagesviewed","ctx_r47","youshouldview","ctx_r48","numberofcorrectanswers","ctx_r49","displayscorewithessays","ɵɵsanitizeHtml","ctx_r50","displayscorewithoutessays","ctx_r51","yourcurrentgradeisoutof","ctx_r52","eolstudentoutoftimenoanswers","ctx_r53","welldone","ctx_r54","progresscompleted","ctx_r55","displayofgrade","AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_13_Template_ion_button_click_0_listener","_r61","ctx_r60","reviewLesson","reviewPageId","ctx_r57","modattemptsnoteacher","ctx_r58","activityLink","href","ctx_r59","AddonModLessonPlayerPage_div_13_ion_card_7_ion_card_header_1_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_2_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_3_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_4_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_5_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_6_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_7_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_8_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_9_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_10_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_11_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_12_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_13_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_14_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_button_15_Template","AddonModLessonPlayerPage_div_13_ion_card_7_ion_item_16_Template","ctx_r11","gradelesson","reviewlesson","formatted","ctx_r62","processData","ctx_r66","feedback","AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_2_Template","AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_div_3_Template","ctx_r63","reviewmode","review","AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_3_Template_ion_button_click_0_listener","_r69","ctx_r68","changePage","LESSON_EOL","AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_4_Template_ion_button_click_0_listener","_r72","button_r70","ctx_r71","pageId","AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_1_Template","AddonModLessonPlayerPage_div_13_ion_list_8_ion_item_2_Template","AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_3_Template","AddonModLessonPlayerPage_div_13_ion_list_8_ion_button_4_Template","ctx_r12","processDataButtons","AddonModLessonPlayerPage_div_13_core_timer_1_Template","AddonModLessonPlayerPage_div_13_ion_item_2_Template","AddonModLessonPlayerPage_div_13_ion_item_3_Template","AddonModLessonPlayerPage_div_13_ion_card_4_Template","AddonModLessonPlayerPage_div_13_ion_list_5_Template","AddonModLessonPlayerPage_div_13_ion_card_6_Template","AddonModLessonPlayerPage_div_13_ion_card_7_Template","AddonModLessonPlayerPage_div_13_ion_list_8_Template","_c2","ctx_r2","slideshow","ɵɵpureFunction2","_c3","lessonWidth","lessonHeight","showRetake","offline","AddonModLessonPlayerPage","constructor","changeDetector","formBuilder","COMPONENT","forceLeave","menuShown","ngOnInit","_this","_asyncToGenerator","getRequiredRouteNumberParam","password","getRouteParam","getRouteBooleanParam","currentPage","getRouteNumberParam","retakeToReview","error","showErrorModal","back","success","fetchLessonData","deleteRetakeFinishedInSync","ngOnDestroy","unblockOperation","canLeave","_this2","originalData","basicLeftCompare","getRawValue","showConfirm","instant","triggerFormCancelledEvent","formElement","getCurrentSiteId","ionViewWillLeave","dismiss","processPage","callFunction","func","_this3","isLessonOffline","isWebServiceError","jumps","getPagesPossibleJumps","readingStrategy","ignoreCurrent","_this4","loadPage","showErrorModalDefault","_this5","_this5$lesson$mediafi","getLesson","title","blockOperation","waitForSync","hasOfflineData","isOnline","lessonId","accessInfo","getAccessInformation","promises","canmanage","attemptscount","preventaccessreasons","preventReason","getPreventAccessReason","push","getLessonWithPassword","then","jumpList","Promise","all","mediaFile","mediafiles","formatPixelsSize","mediawidth","mediaheight","launchRetake","finishRetake","outOfTime","_this6","_result$warnings","result","ignoreErrors","syncLesson","warnings","info","showAlert","undefined","concat","trigger","ACTIVITY_DATA_SENT","module","activitylink","formatActivityLink","params","extractUrlParams","pageid","Number","logPageLoaded","jumpToPage","_this7","_this8","_data","finished","hasFinishedRetake","firstpageid","timelimit","timers","getTimers","starttime","loadMenu","_this9","loadingMenu","pages","getPages","lessonPages","map","entry","page","_this10","_data$page$title","_data$page","includeContents","includeOfflineData","getPageData","newpageid","getPageContentsFromPageData","isQuestionPage","group","getQuestionFromPageData","getPageButtonsFromHtml","pagecontent","displaymenu","displayMenu","firstPageLoaded","logEvent","VIEW_ITEM","ws","category","url","logContinuePageLoaded","formSubmitted","_this11","triggerFormSubmittedEvent","sent","_this11$pageData","getQuestionsAttemptsOnline","getContentPagesViewedOnline","nodefaultresponse","inmediatejump","removeQuestionFromFeedback","correctanswer","noanswer","isessayquestion","maxattemptsreached","_pageData$page","_this12","e","preventDefault","stopPropagation","prepareQuestionData","finally","_this13","_this14","openSideModal","componentProps","pageInstance","ɵɵdirectiveInject","ChangeDetectorRef","i1","FormBuilder","selectors","viewQuery","AddonModLessonPlayerPage_Query","rf","ctx","AddonModLessonPlayerPage_ion_button_9_Template","AddonModLessonPlayerPage_ion_card_12_Template","AddonModLessonPlayerPage_div_13_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lesson/pages/player/player.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lesson/pages/player/player.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnInit, OnDestroy, ViewChild, ChangeDetectorRef, ElementRef } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { IonContent } from '@ionic/angular';\n\nimport { CoreError } from '@classes/errors/error';\nimport { CanLeave } from '@guards/can-leave';\nimport { CoreNetwork } from '@services/network';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites, CoreSitesCommonWSOptions, CoreSitesReadingStrategy } from '@services/sites';\nimport { CoreSync } from '@services/sync';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreWSExternalFile } from '@services/ws';\nimport { ModalController, Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModLessonMenuModalPage } from '../../components/menu-modal/menu-modal';\nimport {\n    AddonModLesson,\n    AddonModLessonEOLPageDataEntry,\n    AddonModLessonFinishRetakeResponse,\n    AddonModLessonGetAccessInformationWSResponse,\n    AddonModLessonGetPageDataWSResponse,\n    AddonModLessonGetPagesPageWSData,\n    AddonModLessonLaunchAttemptWSResponse,\n    AddonModLessonLessonWSData,\n    AddonModLessonMessageWSData,\n    AddonModLessonPageWSData,\n    AddonModLessonPossibleJumps,\n    AddonModLessonProcessPageOptions,\n    AddonModLessonProcessPageResponse,\n    AddonModLessonProvider,\n} from '../../services/lesson';\nimport {\n    AddonModLessonActivityLink,\n    AddonModLessonHelper,\n    AddonModLessonPageButton,\n    AddonModLessonQuestion,\n} from '../../services/lesson-helper';\nimport { AddonModLessonOffline } from '../../services/lesson-offline';\nimport { AddonModLessonSync } from '../../services/lesson-sync';\nimport { CoreFormFields, CoreForms } from '@singletons/form';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\n\n/**\n * Page that allows attempting and reviewing a lesson.\n */\n@Component({\n    selector: 'page-addon-mod-lesson-player',\n    templateUrl: 'player.html',\n    styleUrls: ['player.scss'],\n})\nexport class AddonModLessonPlayerPage implements OnInit, OnDestroy, CanLeave {\n\n    @ViewChild(IonContent) content?: IonContent;\n    @ViewChild('questionFormEl') formElement?: ElementRef;\n\n    component = AddonModLessonProvider.COMPONENT;\n    readonly LESSON_EOL = AddonModLessonProvider.LESSON_EOL;\n    questionForm?: FormGroup; // The FormGroup for question pages.\n    title?: string; // The page title.\n    lesson?: AddonModLessonLessonWSData; // The lesson object.\n    currentPage?: number; // Current page being viewed.\n    review?: boolean; // Whether the user is reviewing.\n    messages: AddonModLessonMessageWSData[] = []; // Messages to display to the user.\n    canManage?: boolean; // Whether the user can manage the lesson.\n    retake?: number; // Current retake number.\n    showRetake?: boolean; // Whether the retake number needs to be displayed.\n    lessonWidth?: string; // Width of the lesson (if slideshow mode).\n    lessonHeight?: string; // Height of the lesson (if slideshow mode).\n    endTime?: number; // End time of the lesson if it's timed.\n    pageData?: AddonModLessonGetPageDataWSResponse; // Current page data.\n    pageContent?: string; // Current page contents.\n    pageButtons?: AddonModLessonPageButton[]; // List of buttons of the current page.\n    question?: AddonModLessonQuestion; // Question of the current page (if it's a question page).\n    eolData?: Record<string, AddonModLessonEOLPageDataEntry>; // Data for EOL page (if current page is EOL).\n    processData?: AddonModLessonProcessPageResponse; // Data to display after processing a page.\n    processDataButtons: ProcessDataButton[] = []; // Buttons to display after processing a page.\n    loaded?: boolean; // Whether data has been loaded.\n    displayMenu?: boolean; // Whether the lesson menu should be displayed.\n    originalData?: CoreFormFields; // Original question data. It is used to check if data has changed.\n    reviewPageId?: number; // Page to open if the user wants to review the attempt.\n    courseId!: number; // The course ID the lesson belongs to.\n    lessonPages?: AddonModLessonPageWSData[]; // Lesson pages (for the lesson menu).\n    loadingMenu?: boolean; // Whether the lesson menu is being loaded.\n    mediaFile?: CoreWSExternalFile; // Media file of the lesson.\n    activityLink?: AddonModLessonActivityLink; // Next activity link data.\n    cmId!: number; // Course module ID.\n\n    protected password?: string; // Lesson password (if any).\n    protected forceLeave = false; // If true, don't perform any check when leaving the view.\n    protected offline?: boolean; // Whether we are in offline mode.\n    protected accessInfo?: AddonModLessonGetAccessInformationWSResponse; // Lesson access info.\n    protected jumps?: AddonModLessonPossibleJumps; // All possible jumps.\n    protected firstPageLoaded?: boolean; // Whether the first page has been loaded.\n    protected retakeToReview?: number; // Retake to review.\n    protected menuShown = false; // Whether menu is shown.\n\n    constructor(\n        protected changeDetector: ChangeDetectorRef,\n        protected formBuilder: FormBuilder,\n    ) {\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            this.cmId = CoreNavigator.getRequiredRouteNumberParam('cmId');\n            this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n            this.password = CoreNavigator.getRouteParam('password');\n            this.review = !!CoreNavigator.getRouteBooleanParam('review');\n            this.currentPage = CoreNavigator.getRouteNumberParam('pageId');\n            this.retakeToReview = CoreNavigator.getRouteNumberParam('retake');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        try {\n            // Fetch the Lesson data.\n            const success = await this.fetchLessonData();\n            if (success) {\n                // Review data loaded or new retake started, remove any retake being finished in sync.\n                AddonModLessonSync.deleteRetakeFinishedInSync(this.lesson!.id);\n            }\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        if (this.lesson) {\n            // Unblock the lesson so it can be synced.\n            CoreSync.unblockOperation(this.component, this.lesson.id);\n        }\n    }\n\n    /**\n     * Check if we can leave the page or not.\n     *\n     * @returns Resolved if we can leave it, rejected if not.\n     */\n    async canLeave(): Promise<boolean> {\n        if (this.forceLeave || !this.questionForm) {\n            return true;\n        }\n\n        if (this.question && !this.eolData && !this.processData && this.originalData) {\n            // Question shown. Check if there is any change.\n            if (!CoreUtils.basicLeftCompare(this.questionForm.getRawValue(), this.originalData, 3)) {\n                await CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\n            }\n        }\n\n        CoreForms.triggerFormCancelledEvent(this.formElement, CoreSites.getCurrentSiteId());\n\n        return true;\n    }\n\n    /**\n     * Runs when the page is about to leave and no longer be the active page.\n     */\n    ionViewWillLeave(): void {\n        if (this.menuShown) {\n            ModalController.dismiss();\n        }\n    }\n\n    /**\n     * A button was clicked.\n     *\n     * @param data Button data.\n     */\n    buttonClicked(data: Record<string, string>): void {\n        this.processPage(data);\n    }\n\n    /**\n     * Call a function and go offline if allowed and the call fails.\n     *\n     * @param func Function to call.\n     * @param options Options passed to the function.\n     * @returns Promise resolved in success, rejected otherwise.\n     */\n    protected async callFunction<T>(func: () => Promise<T>, options: CommonOptions): Promise<T> {\n        try {\n            return await func();\n        } catch (error) {\n            if (this.offline || this.review || !AddonModLesson.isLessonOffline(this.lesson!)) {\n                // Already offline or not allowed.\n                throw error;\n            }\n\n            if (CoreUtils.isWebServiceError(error)) {\n                // WebService returned an error, cannot perform the action.\n                throw error;\n            }\n\n            // Go offline and retry.\n            this.offline = true;\n\n            // Get the possible jumps now.\n            this.jumps = await AddonModLesson.getPagesPossibleJumps(this.lesson!.id, {\n                cmId: this.cmId,\n                readingStrategy: CoreSitesReadingStrategy.PREFER_CACHE,\n            });\n\n            // Call the function again with offline mode and the new jumps.\n            options.readingStrategy = CoreSitesReadingStrategy.PREFER_CACHE;\n            options.jumps = this.jumps;\n            options.offline = true;\n\n            return func();\n        }\n    }\n\n    /**\n     * Change the page from menu or when continuing from a feedback page.\n     *\n     * @param pageId Page to load.\n     * @param ignoreCurrent If true, allow loading current page.\n     * @returns Promise resolved when done.\n     */\n    async changePage(pageId: number, ignoreCurrent?: boolean): Promise<void> {\n        if (!ignoreCurrent && !this.eolData && this.currentPage == pageId) {\n            // Page already loaded, stop.\n            return;\n        }\n\n        this.loaded = true;\n        this.messages = [];\n\n        try {\n            await this.loadPage(pageId);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading page');\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Get the lesson data and load the page.\n     *\n     * @returns Promise resolved with true if success, resolved with false otherwise.\n     */\n    protected async fetchLessonData(): Promise<boolean> {\n        try {\n            this.lesson = await AddonModLesson.getLesson(this.courseId, this.cmId);\n\n            this.title = this.lesson.name; // Temporary title.\n\n            // Block the lesson so it cannot be synced.\n            CoreSync.blockOperation(this.component, this.lesson.id);\n\n            // Wait for any ongoing sync to finish. We won't sync a lesson while it's being played.\n            await AddonModLessonSync.waitForSync(this.lesson.id);\n\n            // If lesson has offline data already, use offline mode.\n            this.offline = await AddonModLessonOffline.hasOfflineData(this.lesson.id);\n\n            if (!this.offline && !CoreNetwork.isOnline() && AddonModLesson.isLessonOffline(this.lesson) && !this.review) {\n                // Lesson doesn't have offline data, but it allows offline and the device is offline. Use offline mode.\n                this.offline = true;\n            }\n\n            const lessonId = this.lesson.id;\n            const options = {\n                cmId: this.cmId,\n                readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n            };\n            this.accessInfo = await this.callFunction<AddonModLessonGetAccessInformationWSResponse>(\n                () => AddonModLesson.getAccessInformation(lessonId, options),\n                options,\n            );\n\n            const promises: Promise<void>[] = [];\n            this.canManage = this.accessInfo.canmanage;\n            this.retake = this.accessInfo.attemptscount;\n            this.showRetake = !this.currentPage && this.retake > 0; // Only show it in first page if it isn't the first retake.\n\n            if (this.accessInfo.preventaccessreasons.length) {\n                // If it's a password protected lesson and we have the password, allow playing it.\n                const preventReason = AddonModLesson.getPreventAccessReason(this.accessInfo, !!this.password, this.review);\n                if (preventReason) {\n                    // Lesson cannot be played, show message and go back.\n                    throw new CoreError(preventReason.message);\n                }\n            }\n\n            if (this.review && this.retakeToReview != this.accessInfo.attemptscount - 1) {\n                // Reviewing a retake that isn't the last one. Error.\n                throw new CoreError(Translate.instant('addon.mod_lesson.errorreviewretakenotlast'));\n            }\n\n            if (this.password) {\n                // Lesson uses password, get the whole lesson object.\n                const options = {\n                    password: this.password,\n                    cmId: this.cmId,\n                    readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n                };\n                promises.push(this.callFunction<AddonModLessonLessonWSData>(\n                    () => AddonModLesson.getLessonWithPassword(lessonId, options),\n                    options,\n                ).then((lesson) => {\n                    this.lesson = lesson;\n\n                    return;\n                }));\n            }\n\n            if (this.offline) {\n                // Offline mode, get the list of possible jumps to allow navigation.\n                promises.push(AddonModLesson.getPagesPossibleJumps(this.lesson.id, {\n                    cmId: this.cmId,\n                    readingStrategy: CoreSitesReadingStrategy.PREFER_CACHE,\n                }).then((jumpList) => {\n                    this.jumps = jumpList;\n\n                    return;\n                }));\n            }\n\n            await Promise.all(promises);\n\n            this.mediaFile = this.lesson.mediafiles?.[0];\n            this.lessonWidth = this.lesson.slideshow ? CoreDomUtils.formatPixelsSize(this.lesson.mediawidth!) : '';\n            this.lessonHeight = this.lesson.slideshow ? CoreDomUtils.formatPixelsSize(this.lesson.mediaheight!) : '';\n\n            await this.launchRetake(this.currentPage);\n\n            return true;\n        } catch (error) {\n\n            if (this.review && this.retakeToReview && CoreUtils.isWebServiceError(error)) {\n                // The user cannot review the retake. Unmark the retake as being finished in sync.\n                await AddonModLessonSync.deleteRetakeFinishedInSync(this.lesson!.id);\n            }\n\n            CoreDomUtils.showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n            this.forceLeave = true;\n            CoreNavigator.back();\n\n            return false;\n        }\n    }\n\n    /**\n     * Finish the retake.\n     *\n     * @param outOfTime Whether the retake is finished because the user ran out of time.\n     * @returns Promise resolved when done.\n     */\n    protected async finishRetake(outOfTime?: boolean): Promise<void> {\n        if (!this.lesson) {\n            return;\n        }\n\n        const lesson = this.lesson;\n        this.messages = [];\n\n        if (this.offline && CoreNetwork.isOnline()) {\n            // Offline mode but the app is online. Try to sync the data.\n            const result = await CoreUtils.ignoreErrors(\n                AddonModLessonSync.syncLesson(lesson.id, true, true),\n            );\n\n            if (result?.warnings?.length) {\n                // Some data was deleted. Check if the retake has changed.\n                const info = await AddonModLesson.getAccessInformation(lesson.id, {\n                    cmId: this.cmId,\n                });\n\n                if (info.attemptscount != this.accessInfo!.attemptscount) {\n                    // The retake has changed. Leave the view and show the error.\n                    this.forceLeave = true;\n                    CoreNavigator.back();\n\n                    throw new CoreError(result.warnings[0]);\n                }\n\n                // Retake hasn't changed, show the warning and finish the retake in offline.\n                CoreDomUtils.showAlert(undefined, result.warnings[0]);\n            }\n\n            this.offline = false;\n        }\n\n        // Now finish the retake.\n        const options = {\n            password: this.password,\n            outOfTime,\n            review: this.review,\n            offline: this.offline,\n            accessInfo: this.accessInfo,\n        };\n        const data = await this.callFunction<AddonModLessonFinishRetakeResponse>(\n            () => AddonModLesson.finishRetake(lesson, this.courseId, options),\n            options,\n        );\n\n        this.title = lesson.name;\n        this.eolData = data.data;\n        this.messages = this.messages.concat(data.messages);\n        this.processData = undefined;\n        this.endTime = undefined;\n\n        CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, { module: 'lesson' });\n\n        // Format activity link if present.\n        if (this.eolData.activitylink) {\n            this.activityLink = AddonModLessonHelper.formatActivityLink(<string> this.eolData.activitylink.value);\n        } else {\n            this.activityLink = undefined;\n        }\n\n        // Format review lesson if present.\n        if (this.eolData.reviewlesson) {\n            const params = CoreUrlUtils.extractUrlParams(<string> this.eolData.reviewlesson.value);\n\n            if (!params || !params.pageid) {\n                // No pageid in the URL, the user cannot review (probably didn't answer any question).\n                delete this.eolData.reviewlesson;\n            } else {\n                this.reviewPageId = Number(params.pageid);\n            }\n        }\n\n        this.logPageLoaded(AddonModLessonProvider.LESSON_EOL, Translate.instant('addon.mod_lesson.congratulations'));\n    }\n\n    /**\n     * Jump to a certain page after performing an action.\n     *\n     * @param pageId The page to load.\n     * @returns Promise resolved when done.\n     */\n    protected async jumpToPage(pageId: number): Promise<void> {\n        if (pageId === 0) {\n            // Not a valid page, return to entry view.\n            // This happens, for example, when the user clicks to go to previous page and there is no previous page.\n            this.forceLeave = true;\n            CoreNavigator.back();\n\n            return;\n        } else if (pageId == AddonModLessonProvider.LESSON_EOL) {\n            // End of lesson reached.\n            return this.finishRetake();\n        }\n\n        // Load new page.\n        this.messages = [];\n\n        return this.loadPage(pageId);\n    }\n\n    /**\n     * Start or continue a retake.\n     *\n     * @param pageId The page to load.\n     * @returns Promise resolved when done.\n     */\n    protected async launchRetake(pageId?: number): Promise<void> {\n        let data: AddonModLessonLaunchAttemptWSResponse | undefined;\n\n        if (this.review) {\n            // Review mode, no need to launch the retake.\n        } else if (!this.offline) {\n            // Not in offline mode, launch the retake.\n            data = await AddonModLesson.launchRetake(this.lesson!.id, this.password, pageId);\n        } else {\n            // Check if there is a finished offline retake.\n            const finished = await AddonModLessonOffline.hasFinishedRetake(this.lesson!.id);\n            if (finished) {\n                // Always show EOL page.\n                pageId = AddonModLessonProvider.LESSON_EOL;\n            }\n        }\n\n        this.currentPage = pageId || this.accessInfo!.firstpageid;\n        this.messages = data?.messages || [];\n\n        if (this.lesson!.timelimit && !this.accessInfo!.canmanage) {\n            // Get the last lesson timer.\n            const timers = await AddonModLesson.getTimers(this.lesson!.id, {\n                cmId: this.cmId,\n                readingStrategy: CoreSitesReadingStrategy.ONLY_NETWORK,\n            });\n\n            this.endTime = timers[timers.length - 1].starttime + this.lesson!.timelimit;\n        }\n\n        return this.loadPage(this.currentPage);\n    }\n\n    /**\n     * Load the lesson menu.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadMenu(): Promise<void> {\n        if (this.loadingMenu || !this.lesson) {\n            // Already loading.\n            return;\n        }\n\n        try {\n            this.loadingMenu = true;\n            const lessonId = this.lesson.id;\n            const options = {\n                password: this.password,\n                cmId: this.cmId,\n                readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n            };\n\n            const pages = await this.callFunction<AddonModLessonGetPagesPageWSData[]>(\n                () => AddonModLesson.getPages(lessonId, options),\n                options,\n            );\n\n            this.lessonPages = pages.map((entry) => entry.page);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading menu.');\n        } finally {\n            this.loadingMenu = false;\n        }\n    }\n\n    /**\n     * Load a certain page.\n     *\n     * @param pageId The page to load.\n     * @returns Promise resolved when done.\n     */\n    protected async loadPage(pageId: number): Promise<void> {\n        if (pageId == AddonModLessonProvider.LESSON_EOL) {\n            // End of lesson reached.\n            return this.finishRetake();\n        } else if (!this.lesson) {\n            return;\n        }\n\n        const lesson = this.lesson;\n        const options = {\n            password: this.password,\n            review: this.review,\n            includeContents: true,\n            cmId: this.cmId,\n            readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n            accessInfo: this.accessInfo,\n            jumps: this.jumps,\n            includeOfflineData: true,\n        };\n\n        const data = await this.callFunction<AddonModLessonGetPageDataWSResponse>(\n            () => AddonModLesson.getPageData(lesson, pageId, options),\n            options,\n        );\n\n        if (data.newpageid == AddonModLessonProvider.LESSON_EOL) {\n            // End of lesson reached.\n            return this.finishRetake();\n        }\n\n        this.pageData = data;\n        this.title = data.page!.title;\n        this.pageContent = AddonModLessonHelper.getPageContentsFromPageData(data);\n        this.loaded = true;\n        this.currentPage = pageId;\n        this.messages = this.messages.concat(data.messages);\n\n        // Page loaded, hide EOL and feedback data if shown.\n        this.eolData = this.processData = undefined;\n\n        if (AddonModLesson.isQuestionPage(data.page!.type)) {\n            // Create an empty FormGroup without controls, they will be added in getQuestionFromPageData.\n            this.questionForm = this.formBuilder.group({});\n            this.pageButtons = [];\n            this.question = AddonModLessonHelper.getQuestionFromPageData(this.questionForm, data);\n            this.originalData = this.questionForm.getRawValue(); // Use getRawValue to include disabled values.\n        } else {\n            this.pageButtons = AddonModLessonHelper.getPageButtonsFromHtml(data.pagecontent || '');\n            this.question = undefined;\n            this.originalData = undefined;\n        }\n\n        // Don't display the navigation menu in review mode, using them displays errors.\n        if (data.displaymenu && !this.displayMenu && !this.review) {\n            // Load the menu.\n            this.loadMenu();\n        }\n        this.displayMenu = !this.review && !!data.displaymenu;\n\n        if (!this.firstPageLoaded) {\n            this.firstPageLoaded = true;\n        } else {\n            this.showRetake = false;\n        }\n\n        this.logPageLoaded(pageId, data.page?.title ?? '');\n    }\n\n    /**\n     * Log page loaded.\n     *\n     * @param pageId Page ID.\n     */\n    protected logPageLoaded(pageId: number, title: string): void {\n        if (!this.lesson) {\n            return;\n        }\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: 'mod_lesson_get_page_data',\n            name: this.lesson.name + ': ' + title,\n            data: { id: this.lesson.id, pageid: pageId, category: 'lesson' },\n            url: `/mod/lesson/view.php?id=${this.lesson.id}&pageid=${pageId}`,\n        });\n    }\n\n    /**\n     * Log continue page.\n     */\n    protected logContinuePageLoaded(): void {\n        if (!this.lesson) {\n            return;\n        }\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: 'mod_lesson_process_page',\n            name: this.lesson.name + ': ' + Translate.instant('addon.mod_lesson.continue'),\n            data: { id: this.lesson.id, category: 'lesson' },\n            url: '/mod/lesson/continue.php',\n        });\n    }\n\n    /**\n     * Process a page, sending some data.\n     *\n     * @param data The data to send.\n     * @param formSubmitted Whether a form was submitted.\n     * @returns Promise resolved when done.\n     */\n    protected async processPage(data: CoreFormFields, formSubmitted?: boolean): Promise<void> {\n        if (!this.lesson || !this.pageData) {\n            return;\n        }\n\n        this.loaded = false;\n\n        const lesson = this.lesson;\n        const pageData = this.pageData;\n        const options: AddonModLessonProcessPageOptions = {\n            password: this.password,\n            review: this.review,\n            offline: this.offline,\n            accessInfo: this.accessInfo,\n            jumps: this.jumps,\n        };\n\n        try {\n            const result = await this.callFunction<AddonModLessonProcessPageResponse>(\n                () => AddonModLesson.processPage(\n                    lesson,\n                    this.courseId,\n                    pageData,\n                    data,\n                    options,\n                ),\n                options,\n            );\n\n            if (formSubmitted) {\n                CoreForms.triggerFormSubmittedEvent(\n                    this.formElement,\n                    result.sent,\n                    CoreSites.getCurrentSiteId(),\n                );\n            }\n\n            if (!this.offline && !this.review && AddonModLesson.isLessonOffline(lesson)) {\n                // Lesson allows offline and the user changed some data in server. Update cached data.\n                const retake = this.accessInfo!.attemptscount;\n                const options = {\n                    cmId: this.cmId,\n                    readingStrategy: CoreSitesReadingStrategy.ONLY_NETWORK,\n                };\n\n                // Update in background the list of content pages viewed or question attempts.\n                if (AddonModLesson.isQuestionPage(this.pageData?.page?.type || -1)) {\n                    AddonModLesson.getQuestionsAttemptsOnline(lesson.id, retake, options);\n                } else {\n                    AddonModLesson.getContentPagesViewedOnline(lesson.id, retake, options);\n                }\n            }\n\n            if (result.nodefaultresponse || result.inmediatejump) {\n                // Don't display feedback or force a redirect to a new page. Load the new page.\n                return await this.jumpToPage(result.newpageid);\n            }\n\n            // Not inmediate jump, show the feedback.\n            result.feedback = AddonModLessonHelper.removeQuestionFromFeedback(result.feedback);\n            this.messages = result.messages;\n            this.processData = result;\n            this.processDataButtons = [];\n\n            if (lesson.review && !result.correctanswer && !result.noanswer && !result.isessayquestion &&\n                    !result.maxattemptsreached && !result.reviewmode) {\n                // User can try again, show button to do so.\n                this.processDataButtons.push({\n                    label: 'addon.mod_lesson.reviewquestionback',\n                    pageId: this.currentPage!,\n                });\n            }\n\n            // Button to continue.\n            if (lesson.review && !result.correctanswer && !result.noanswer && !result.isessayquestion &&\n                    !result.maxattemptsreached) {\n                /* If both the \"Yes, I'd like to try again\" and \"No, I just want to go on to the next question\" point to the\n                    same page then don't show the \"No, I just want to go on to the next question\" button. It's confusing. */\n                if (pageData.page?.id != result.newpageid) {\n                    // Button to continue the lesson (the page to go is configured by the teacher).\n                    this.processDataButtons.push({\n                        label: 'addon.mod_lesson.reviewquestioncontinue',\n                        pageId: result.newpageid,\n                    });\n                }\n            } else {\n                this.processDataButtons.push({\n                    label: 'addon.mod_lesson.continue',\n                    pageId: result.newpageid,\n                });\n            }\n\n            this.logContinuePageLoaded();\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error processing page');\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Review the lesson.\n     *\n     * @param pageId Page to load.\n     */\n    async reviewLesson(pageId: number): Promise<void> {\n        this.loaded = false;\n        this.review = true;\n        this.offline = false; // Don't allow offline mode in review.\n\n        try {\n            await this.loadPage(pageId);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading page');\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Submit a question.\n     *\n     * @param e Event.\n     */\n    submitQuestion(e: Event): void {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.loaded = false;\n\n        // Use getRawValue to include disabled values.\n        const data = AddonModLessonHelper.prepareQuestionData(this.question!, this.questionForm!.getRawValue());\n\n        this.processPage(data, true).finally(() => {\n            this.loaded = true;\n        });\n    }\n\n    /**\n     * Time up.\n     */\n    async timeUp(): Promise<void> {\n        // Time up called, hide the timer.\n        this.endTime = undefined;\n        this.loaded = false;\n\n        try {\n            await this.finishRetake(true);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error finishing attempt');\n        } finally {\n            this.loaded = true;\n        }\n    }\n\n    /**\n     * Show the navigation modal.\n     *\n     * @returns Promise resolved when done.\n     */\n    async showMenu(): Promise<void> {\n        this.menuShown = true;\n\n        await CoreDomUtils.openSideModal({\n            component: AddonModLessonMenuModalPage,\n            componentProps: {\n                pageInstance: this,\n            },\n        });\n\n        this.menuShown = false;\n    }\n\n}\n\n/**\n * Common options for functions called using callFunction.\n */\ntype CommonOptions = CoreSitesCommonWSOptions & {\n    jumps?: AddonModLessonPossibleJumps;\n    offline?: boolean;\n};\n\n/**\n * Button displayed after processing a page.\n */\ntype ProcessDataButton = {\n    label: string;\n    pageId: number;\n};\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>\n                <core-format-text [text]=\"title\" contextLevel=\"module\" [contextInstanceId]=\"lesson?.coursemodule\" [courseId]=\"courseId\" />\n            </h1>\n        </ion-title>\n        <ion-buttons slot=\"end\">\n            <ion-button fill=\"clear\" *ngIf=\"displayMenu || mediaFile\" [attr.aria-label]=\"'addon.mod_lesson.lessonmenu' | translate\"\n                (click)=\"showMenu()\">\n                <ion-icon name=\"fas-bookmark\" slot=\"icon-only\" aria-hidden=\"true\" />\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content class=\"limited-width\">\n    <core-loading [hideUntil]=\"loaded\">\n        <!-- Info messages. Only show the first one. -->\n        <ion-card class=\"core-info-card\" *ngIf=\"lesson && messages?.length\">\n            <ion-item class=\"ion-text-wrap\">\n                <ion-icon name=\"fas-circle-info\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>{{ messages[0].message }}</ion-label>\n            </ion-item>\n        </ion-card>\n\n        <div *ngIf=\"lesson\" [ngClass]='{\"addon-mod_lesson-slideshow\": lesson.slideshow}'\n            [ngStyle]=\"{'width': lessonWidth, 'height': lessonHeight}\">\n\n            <core-timer *ngIf=\"endTime\" [endTime]=\"endTime\" (finished)=\"timeUp()\" [timeLeftClassThreshold]=\"-1\"\n                [timerText]=\"'addon.mod_lesson.timeremaining' | translate\" />\n\n            <!-- Retake and ongoing score. -->\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"showRetake && !eolData && !processData\">\n                <ion-label>\n                    <p>{{ 'addon.mod_lesson.attempt' | translate:{$a: retake} }}</p>\n                </ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"pageData && pageData.ongoingscore && !eolData && !processData\"\n                class=\"addon-mod_lesson-ongoingscore ion-text-wrap\">\n                <ion-label>{{ pageData.ongoingscore }}</ion-label>\n            </ion-item>\n\n            <!-- Page content. -->\n            <ion-card *ngIf=\"!eolData && !processData\">\n                <!-- Content page. -->\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"!question && pageContent\">\n                    <ion-label>\n                        <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"pageContent\"\n                            contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                    </ion-label>\n                </ion-item>\n\n                <!-- Question page. -->\n                <!-- We need to set ngIf loaded to make formGroup directive restart every time a page changes, see MOBILE-2540. -->\n                <form *ngIf=\"question && loaded\" [formGroup]=\"questionForm\" #questionFormEl (ngSubmit)=\"submitQuestion($event)\">\n\n                    <ion-item-divider class=\"ion-text-wrap\" *ngIf=\"pageContent\">\n                        <ion-label>\n                            <h2>\n                                <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"pageContent\"\n                                    contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                            </h2>\n                        </ion-label>\n                    </ion-item-divider>\n\n                    <!-- Render a different input depending on the type of the question. -->\n                    <ng-container [ngSwitch]=\"question.template\">\n\n                        <!-- Short answer. -->\n                        <ion-item class=\"ion-text-wrap\" *ngSwitchCase=\"'shortanswer'\">\n                            <ion-label class=\"sr-only\" stacked />\n                            <ion-input [type]=\"question.input!.type\" placeholder=\"{{ 'addon.mod_lesson.youranswer' | translate }}\"\n                                [id]=\"question.input!.id\" [formControlName]=\"question.input!.name\" autocorrect=\"off\"\n                                [maxlength]=\"question.input!.maxlength\" />\n                        </ion-item>\n\n                        <!-- Essay. -->\n                        <ng-container *ngSwitchCase=\"'essay'\">\n                            <ion-item *ngIf=\"question.textarea\">\n                                <ion-label class=\"sr-only\">{{ 'core.content' | translate }}</ion-label>\n                                <core-rich-text-editor placeholder=\"{{ 'addon.mod_lesson.youranswer' | translate }}\"\n                                    [control]=\"question.control\" [component]=\"component\" [componentId]=\"lesson.coursemodule\"\n                                    [autoSave]=\"true\" contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\"\n                                    elementId=\"answer_editor\" />\n                            </ion-item>\n                            <ion-item class=\"ion-text-wrap\" *ngIf=\"!question.textarea && question.useranswer\">\n                                <ion-label>\n                                    <p class=\"item-heading\">{{ 'addon.mod_lesson.youranswer' | translate }}</p>\n                                    <p>\n                                        <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\"\n                                            [text]=\"question.useranswer\" contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\"\n                                            [courseId]=\"courseId\" />\n                                    </p>\n                                </ion-label>\n                            </ion-item>\n                        </ng-container>\n\n                        <!-- Multichoice. -->\n                        <ng-container *ngSwitchCase=\"'multichoice'\">\n                            <!-- Single choice. -->\n                            <ion-radio-group *ngIf=\"!question.multi\" [formControlName]=\"question.controlName\">\n                                <ion-item class=\"ion-text-wrap\" *ngFor=\"let option of question.options\">\n                                    <ion-label>\n                                        <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"option.text\"\n                                            contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                                    </ion-label>\n                                    <ion-radio slot=\"end\" [id]=\"option.id\" [value]=\"option.value\" [disabled]=\"option.disabled\" />\n                                </ion-item>\n                            </ion-radio-group>\n\n                            <!-- Multiple choice. -->\n                            <ng-container *ngIf=\"question.multi\">\n                                <ion-item class=\"ion-text-wrap\" *ngFor=\"let option of question.options\">\n                                    <ion-label>\n                                        <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"option.text\"\n                                            contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                                    </ion-label>\n                                    <ion-checkbox [id]=\"option.id\" [formControlName]=\"option.name\" slot=\"end\" />\n                                </ion-item>\n                            </ng-container>\n                        </ng-container>\n\n                        <!-- Matching. -->\n                        <ng-container *ngSwitchCase=\"'matching'\">\n                            <ion-item class=\"ion-text-wrap\" *ngFor=\"let row of question.rows\">\n                                <ion-label>\n                                    <p>\n                                        <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"row.text\"\n                                            contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                                    </p>\n                                </ion-label>\n                                <ion-select [id]=\"row.id\" [formControlName]=\"row.name\" [cancelText]=\"'core.cancel' | translate\"\n                                    interface=\"action-sheet\">\n                                    <ion-select-option *ngFor=\"let option of row.options\" [value]=\"option.value\">\n                                        {{option.label}}\n                                    </ion-select-option>\n                                </ion-select>\n                            </ion-item>\n                        </ng-container>\n                    </ng-container>\n\n                    <ion-button expand=\"block\" type=\"submit\" class=\"ion-text-wrap ion-margin button-no-uppercase\">\n                        {{ question.submitLabel }}\n                    </ion-button>\n                    <!-- Remove this once Ionic fixes this bug: https://github.com/ionic-team/ionic-framework/issues/19368 -->\n                    <input type=\"submit\" class=\"core-submit-hidden-enter\" />\n                </form>\n            </ion-card>\n\n            <!-- Page buttons and progress. -->\n            <ion-list *ngIf=\"!eolData && !processData\">\n                <ion-grid *ngIf=\"pageButtons?.length\" class=\"ion-text-wrap addon-mod_lesson-pagebuttons\">\n                    <ion-row class=\"ion-align-items-center\">\n                        <ion-col *ngFor=\"let button of pageButtons\" size=\"12\" size-md=\"6\" size-lg=\"3\" col-xl>\n                            <ion-button expand=\"block\" fill=\"outline\" [id]=\"button.id\" (click)=\"buttonClicked(button.data)\"\n                                class=\"ion-text-wrap button-no-uppercase\">\n                                {{ button.content }}\n                            </ion-button>\n                        </ion-col>\n                    </ion-row>\n                </ion-grid>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"lesson.progressbar && !canManage && pageData\">\n                    <ion-label>\n                        <span id=\"addon-mod_lesson-{{cmId}}-progress\">\n                            {{ 'addon.mod_lesson.progresscompleted' | translate:{$a: pageData.progress} }}\n                        </span>\n                        <core-progress-bar [progress]=\"pageData.progress\" ariaDescribedBy=\"addon-mod_lesson-{{cmId}}-progress\" />\n                    </ion-label>\n                </ion-item>\n                <ion-card class=\"core-info-card\" *ngIf=\"lesson.progressbar && canManage\">\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-icon name=\"fas-circle-info\" slot=\"start\" aria-hidden=\"true\" />\n                        <ion-label>{{ 'addon.mod_lesson.progressbarteacherwarning2' | translate }}</ion-label>\n                    </ion-item>\n                </ion-card>\n            </ion-list>\n\n            <!-- End of lesson reached. -->\n            <ion-card class=\"core-warning-card\" *ngIf=\"eolData && !processData && eolData.offline?.value\">\n                <ion-item>\n                    <ion-icon name=\"fas-triangle-exclamation\" slot=\"start\" aria-hidden=\"true\" />\n                    <ion-label>{{ 'addon.mod_lesson.finishretakeoffline' | translate }}</ion-label>\n                </ion-item>\n            </ion-card>\n\n            <ion-card *ngIf=\"eolData && !processData\">\n\n                <ion-card-header class=\"ion-text-wrap\" *ngIf=\"eolData.gradelesson\">\n                    <ion-card-title>{{ 'addon.mod_lesson.congratulations' | translate }}</ion-card-title>\n                </ion-card-header>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.notenoughtimespent\">\n                    <ion-label>{{ eolData.notenoughtimespent.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.numberofpagesviewed\">\n                    <ion-label>{{ eolData.numberofpagesviewed.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.youshouldview\">\n                    <ion-label>{{ eolData.youshouldview.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.numberofcorrectanswers\">\n                    <ion-label>{{ eolData.numberofcorrectanswers.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.displayscorewithessays\">\n                    <ion-label [innerHTML]=\"eolData.displayscorewithessays.message\" />\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"!eolData.displayscorewithessays && eolData.displayscorewithoutessays\">\n                    <ion-label>{{ eolData.displayscorewithoutessays.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.yourcurrentgradeisoutof\">\n                    <ion-label>{{ eolData.yourcurrentgradeisoutof.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.eolstudentoutoftimenoanswers\">\n                    <ion-label>{{ eolData.eolstudentoutoftimenoanswers.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.welldone\">\n                    <ion-label>{{ eolData.welldone.message }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"lesson.progressbar && eolData.progresscompleted\">\n                    <ion-label>\n                        <span id=\"addon-mod_lesson-{{cmId}}-progress-end\">\n                            {{ 'addon.mod_lesson.progresscompleted' | translate:{$a: eolData.progresscompleted.value} }}\n                        </span>\n                        <core-progress-bar [progress]=\"eolData.progresscompleted.value\"\n                            ariaDescribedBy=\"addon-mod_lesson-{{cmId}}-progress-end\" />\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.displayofgrade\">\n                    <ion-label>{{ eolData.displayofgrade.message }}</ion-label>\n                </ion-item>\n                <ion-button *ngIf=\"eolData.reviewlesson\" expand=\"block\" class=\"ion-text-wrap ion-margin button-no-uppercase\"\n                    (click)=\"reviewLesson(reviewPageId!)\">\n                    {{ 'addon.mod_lesson.reviewlesson' | translate }}\n                </ion-button>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"eolData.modattemptsnoteacher\">\n                    <ion-label>{{ eolData.modattemptsnoteacher.message }}</ion-label>\n                </ion-item>\n                <!-- If activity link was successfully formatted, render the button. -->\n                <ion-button *ngIf=\"activityLink && activityLink.formatted\" expand=\"block\" fill=\"outline\" [href]=\"activityLink.href\"\n                    core-link [capture]=\"true\" class=\"ion-text-wrap ion-margin button-no-uppercase\">\n                    <core-format-text [text]=\"activityLink.label\" contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\"\n                        [courseId]=\"courseId\" />\n                </ion-button>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"activityLink && !activityLink.formatted\">\n                    <!-- Activity link wasn't formatted, render the original link. -->\n                    <ion-label>\n                        <core-format-text [text]=\"activityLink.label\" contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\"\n                            [courseId]=\"courseId\" />\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n\n            <!-- Feedback returned when processing an action. -->\n            <ion-list *ngIf=\"processData\">\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"processData.ongoingscore && !processData.reviewmode\">\n                    <ion-label>{{ processData.ongoingscore }}</ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"!processData.reviewmode || review\">\n                    <ion-label>\n                        <div *ngIf=\"!processData.reviewmode\">\n                            <core-format-text [component]=\"component\" [componentId]=\"lesson.coursemodule\" [text]=\"processData.feedback\"\n                                contextLevel=\"module\" [contextInstanceId]=\"lesson.coursemodule\" [courseId]=\"courseId\" />\n                        </div>\n                        <div *ngIf=\"review\">\n                            <p>{{ 'addon.mod_lesson.gotoendoflesson' | translate }}</p>\n                            <p>{{ 'addon.mod_lesson.or' | translate }}</p>\n                            <p>{{ 'addon.mod_lesson.continuetonextpage' | translate }}</p>\n                        </div>\n                    </ion-label>\n                </ion-item>\n\n                <ion-button expand=\"block\" class=\"ion-text-wrap ion-margin\" *ngIf=\"review\" (click)=\"changePage(LESSON_EOL)\">\n                    {{ 'addon.mod_lesson.finish' | translate }}\n                </ion-button>\n                <ion-button expand=\"block\" class=\"ion-text-wrap ion-margin\" fill=\"outline\" *ngFor=\"let button of processDataButtons\"\n                    (click)=\"changePage(button.pageId, true)\">\n                    {{ button.label | translate }}\n                </ion-button>\n            </ion-list>\n        </div>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}