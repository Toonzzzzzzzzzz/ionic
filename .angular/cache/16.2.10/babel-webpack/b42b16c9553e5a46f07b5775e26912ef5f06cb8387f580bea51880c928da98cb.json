{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { makeSingleton } from '@singletons';\nimport { AddonUserProfileFieldDatetimeComponent } from '../../component/datetime';\nimport moment from 'moment-timezone';\nimport * as i0 from \"@angular/core\";\n/**\n * Datetime user profile field handlers.\n */\nexport class AddonUserProfileFieldDatetimeHandlerService {\n  constructor() {\n    this.name = 'AddonUserProfileFieldDatetime';\n    this.type = 'datetime';\n  }\n  /**\n   * Whether or not the handler is enabled on a site level.\n   *\n   * @returns Promise resolved with true if enabled.\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      return true;\n    })();\n  }\n  /**\n   * Get the data to send for the field based on the input data.\n   *\n   * @param field User field to get the data for.\n   * @param signup True if user is in signup page.\n   * @param registerAuth Register auth method. E.g. 'email'.\n   * @param formValues Form Values.\n   * @returns Data to send for the field.\n   */\n  getData(field, signup, registerAuth, formValues) {\n    return _asyncToGenerator(function* () {\n      const name = 'profile_field_' + field.shortname;\n      if (formValues[name]) {\n        return {\n          type: 'datetime',\n          name: 'profile_field_' + field.shortname,\n          value: moment(formValues[name]).unix()\n        };\n      }\n    })();\n  }\n  /**\n   * Return the Component to use to display the user profile field.\n   * It's recommended to return the class of the component, but you can also return an instance of the component.\n   *\n   * @returns The component (or promise resolved with component) to use, undefined if not found.\n   */\n  getComponent() {\n    return AddonUserProfileFieldDatetimeComponent;\n  }\n}\n_class = AddonUserProfileFieldDatetimeHandlerService;\n_class.ɵfac = function AddonUserProfileFieldDatetimeHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonUserProfileFieldDatetimeHandler = makeSingleton(AddonUserProfileFieldDatetimeHandlerService);","map":{"version":3,"names":["makeSingleton","AddonUserProfileFieldDatetimeComponent","moment","AddonUserProfileFieldDatetimeHandlerService","constructor","name","type","isEnabled","_asyncToGenerator","getData","field","signup","registerAuth","formValues","shortname","value","unix","getComponent","factory","ɵfac","providedIn","AddonUserProfileFieldDatetimeHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/userprofilefield/datetime/services/handlers/datetime.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable, Type } from '@angular/core';\n\nimport { AuthEmailSignupProfileField } from '@features/login/services/login-helper';\nimport { CoreUserProfileField } from '@features/user/services/user';\nimport { CoreUserProfileFieldHandler, CoreUserProfileFieldHandlerData } from '@features/user/services/user-profile-field-delegate';\nimport { CoreFormFields } from '@singletons/form';\nimport { makeSingleton } from '@singletons';\nimport { AddonUserProfileFieldDatetimeComponent } from '../../component/datetime';\nimport moment from 'moment-timezone';\n\n/**\n * Datetime user profile field handlers.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonUserProfileFieldDatetimeHandlerService implements CoreUserProfileFieldHandler {\n\n    name = 'AddonUserProfileFieldDatetime';\n    type = 'datetime';\n\n    /**\n     * Whether or not the handler is enabled on a site level.\n     *\n     * @returns Promise resolved with true if enabled.\n     */\n    async isEnabled(): Promise<boolean> {\n        return true;\n    }\n\n    /**\n     * Get the data to send for the field based on the input data.\n     *\n     * @param field User field to get the data for.\n     * @param signup True if user is in signup page.\n     * @param registerAuth Register auth method. E.g. 'email'.\n     * @param formValues Form Values.\n     * @returns Data to send for the field.\n     */\n    async getData(\n        field: AuthEmailSignupProfileField | CoreUserProfileField,\n        signup: boolean,\n        registerAuth: string,\n        formValues: CoreFormFields,\n    ): Promise<CoreUserProfileFieldHandlerData | undefined> {\n        const name = 'profile_field_' + field.shortname;\n\n        if (formValues[name]) {\n            return {\n                type: 'datetime',\n                name: 'profile_field_' + field.shortname,\n                value: moment(<string> formValues[name]).unix(),\n            };\n        }\n    }\n\n    /**\n     * Return the Component to use to display the user profile field.\n     * It's recommended to return the class of the component, but you can also return an instance of the component.\n     *\n     * @returns The component (or promise resolved with component) to use, undefined if not found.\n     */\n    getComponent(): Type<unknown> | Promise<Type<unknown>> {\n        return AddonUserProfileFieldDatetimeComponent;\n    }\n\n}\n\nexport const AddonUserProfileFieldDatetimeHandler = makeSingleton(AddonUserProfileFieldDatetimeHandlerService);\n"],"mappings":";;AAoBA,SAASA,aAAa,QAAQ,aAAa;AAC3C,SAASC,sCAAsC,QAAQ,0BAA0B;AACjF,OAAOC,MAAM,MAAM,iBAAiB;;AAEpC;;;AAIA,OAAM,MAAOC,2CAA2C;EADxDC,YAAA;IAGI,KAAAC,IAAI,GAAG,+BAA+B;IACtC,KAAAC,IAAI,GAAG,UAAU;;EAEjB;;;;;EAKMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,OAAO,IAAI;IAAC;EAChB;EAEA;;;;;;;;;EASMC,OAAOA,CACTC,KAAyD,EACzDC,MAAe,EACfC,YAAoB,EACpBC,UAA0B;IAAA,OAAAL,iBAAA;MAE1B,MAAMH,IAAI,GAAG,gBAAgB,GAAGK,KAAK,CAACI,SAAS;MAE/C,IAAID,UAAU,CAACR,IAAI,CAAC,EAAE;QAClB,OAAO;UACHC,IAAI,EAAE,UAAU;UAChBD,IAAI,EAAE,gBAAgB,GAAGK,KAAK,CAACI,SAAS;UACxCC,KAAK,EAAEb,MAAM,CAAUW,UAAU,CAACR,IAAI,CAAC,CAAC,CAACW,IAAI;SAChD;;IACJ;EACL;EAEA;;;;;;EAMAC,YAAYA,CAAA;IACR,OAAOhB,sCAAsC;EACjD;;SAhDSE,2CAA2C;;mBAA3CA,MAA2C;AAAA;;SAA3CA,MAA2C;EAAAe,OAAA,EAA3Cf,MAA2C,CAAAgB,IAAA;EAAAC,UAAA,EAD9B;AAAM;AAqDhC,OAAO,MAAMC,oCAAoC,GAAGrB,aAAa,CAACG,2CAA2C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}