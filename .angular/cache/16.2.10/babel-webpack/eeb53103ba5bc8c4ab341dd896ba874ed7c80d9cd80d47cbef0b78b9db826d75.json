{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { makeSingleton } from '@singletons';\nimport { AddonModFeedbackHelper } from '../feedback-helper';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler for feedback push notifications clicks.\n */\nexport class AddonModFeedbackPushClickHandlerService {\n  constructor() {\n    this.name = 'AddonModFeedbackPushClickHandler';\n    this.priority = 200;\n    this.featureName = 'CoreCourseModuleDelegate_AddonModFeedback';\n  }\n  /**\n   * @inheritdoc\n   */\n  handles(notification) {\n    return _asyncToGenerator(function* () {\n      if (CoreUtils.isTrueOrOne(notification.notif) && notification.moodlecomponent == 'mod_feedback' && (notification.name == 'submission' || notification.name == 'message')) {\n        return true;\n      }\n      return false;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  handleClick(notification) {\n    const contextUrlParams = CoreUrlUtils.extractUrlParams(notification.contexturl);\n    const courseId = Number(notification.courseid);\n    const moduleId = Number(contextUrlParams.id);\n    if (notification.name == 'submission') {\n      return AddonModFeedbackHelper.handleShowEntriesLink(contextUrlParams, notification.site);\n    } else {\n      return CoreCourseHelper.navigateToModule(moduleId, {\n        courseId,\n        siteId: notification.site\n      });\n    }\n  }\n}\n_class = AddonModFeedbackPushClickHandlerService;\n_class.ɵfac = function AddonModFeedbackPushClickHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonModFeedbackPushClickHandler = makeSingleton(AddonModFeedbackPushClickHandlerService);","map":{"version":3,"names":["CoreCourseHelper","CoreUrlUtils","CoreUtils","makeSingleton","AddonModFeedbackHelper","AddonModFeedbackPushClickHandlerService","constructor","name","priority","featureName","handles","notification","_asyncToGenerator","isTrueOrOne","notif","moodlecomponent","handleClick","contextUrlParams","extractUrlParams","contexturl","courseId","Number","courseid","moduleId","id","handleShowEntriesLink","site","navigateToModule","siteId","factory","ɵfac","providedIn","AddonModFeedbackPushClickHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/feedback/services/handlers/push-click.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreCourseHelper } from '@features/course/services/course-helper';\nimport { CorePushNotificationsClickHandler } from '@features/pushnotifications/services/push-delegate';\nimport { CorePushNotificationsNotificationBasicData } from '@features/pushnotifications/services/pushnotifications';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { makeSingleton } from '@singletons';\nimport { AddonModFeedbackHelper } from '../feedback-helper';\n\n/**\n * Handler for feedback push notifications clicks.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonModFeedbackPushClickHandlerService implements CorePushNotificationsClickHandler {\n\n    name = 'AddonModFeedbackPushClickHandler';\n    priority = 200;\n    featureName = 'CoreCourseModuleDelegate_AddonModFeedback';\n\n    /**\n     * @inheritdoc\n     */\n    async handles(notification: CorePushNotificationsNotificationBasicData): Promise<boolean> {\n        if (CoreUtils.isTrueOrOne(notification.notif) && notification.moodlecomponent == 'mod_feedback' &&\n                (notification.name == 'submission' || notification.name == 'message')) {\n\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    handleClick(notification: AddonModFeedbackPushNotificationData): Promise<void> {\n        const contextUrlParams = CoreUrlUtils.extractUrlParams(notification.contexturl!);\n        const courseId = Number(notification.courseid);\n        const moduleId = Number(contextUrlParams.id);\n\n        if (notification.name == 'submission') {\n            return AddonModFeedbackHelper.handleShowEntriesLink(contextUrlParams, notification.site);\n        } else {\n            return CoreCourseHelper.navigateToModule(moduleId, {\n                courseId,\n                siteId: notification.site,\n            });\n        }\n    }\n\n}\n\nexport const AddonModFeedbackPushClickHandler = makeSingleton(AddonModFeedbackPushClickHandlerService);\n\ntype AddonModFeedbackPushNotificationData = CorePushNotificationsNotificationBasicData & {\n    contexturl?: string;\n    courseid?: number | string;\n};\n"],"mappings":";;AAeA,SAASA,gBAAgB,QAAQ,yCAAyC;AAG1E,SAASC,YAAY,QAAQ,qBAAqB;AAClD,SAASC,SAAS,QAAQ,uBAAuB;AACjD,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,sBAAsB,QAAQ,oBAAoB;;AAE3D;;;AAIA,OAAM,MAAOC,uCAAuC;EADpDC,YAAA;IAGI,KAAAC,IAAI,GAAG,kCAAkC;IACzC,KAAAC,QAAQ,GAAG,GAAG;IACd,KAAAC,WAAW,GAAG,2CAA2C;;EAEzD;;;EAGMC,OAAOA,CAACC,YAAwD;IAAA,OAAAC,iBAAA;MAClE,IAAIV,SAAS,CAACW,WAAW,CAACF,YAAY,CAACG,KAAK,CAAC,IAAIH,YAAY,CAACI,eAAe,IAAI,cAAc,KACtFJ,YAAY,CAACJ,IAAI,IAAI,YAAY,IAAII,YAAY,CAACJ,IAAI,IAAI,SAAS,CAAC,EAAE;QAE3E,OAAO,IAAI;;MAGf,OAAO,KAAK;IAAC;EACjB;EAEA;;;EAGAS,WAAWA,CAACL,YAAkD;IAC1D,MAAMM,gBAAgB,GAAGhB,YAAY,CAACiB,gBAAgB,CAACP,YAAY,CAACQ,UAAW,CAAC;IAChF,MAAMC,QAAQ,GAAGC,MAAM,CAACV,YAAY,CAACW,QAAQ,CAAC;IAC9C,MAAMC,QAAQ,GAAGF,MAAM,CAACJ,gBAAgB,CAACO,EAAE,CAAC;IAE5C,IAAIb,YAAY,CAACJ,IAAI,IAAI,YAAY,EAAE;MACnC,OAAOH,sBAAsB,CAACqB,qBAAqB,CAACR,gBAAgB,EAAEN,YAAY,CAACe,IAAI,CAAC;KAC3F,MAAM;MACH,OAAO1B,gBAAgB,CAAC2B,gBAAgB,CAACJ,QAAQ,EAAE;QAC/CH,QAAQ;QACRQ,MAAM,EAAEjB,YAAY,CAACe;OACxB,CAAC;;EAEV;;SAnCSrB,uCAAuC;;mBAAvCA,MAAuC;AAAA;;SAAvCA,MAAuC;EAAAwB,OAAA,EAAvCxB,MAAuC,CAAAyB,IAAA;EAAAC,UAAA,EAD1B;AAAM;AAwChC,OAAO,MAAMC,gCAAgC,GAAG7B,aAAa,CAACE,uCAAuC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}