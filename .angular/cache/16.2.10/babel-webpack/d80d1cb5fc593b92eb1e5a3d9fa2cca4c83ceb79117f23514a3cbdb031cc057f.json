{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreCourse } from '@features/course/services/course';\nimport { IonContent } from '@ionic/angular';\nimport { CoreNetwork } from '@services/network';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { NgZone, Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModFeedback, AddonModFeedbackProvider } from '../../services/feedback';\nimport { AddonModFeedbackHelper } from '../../services/feedback-helper';\nimport { AddonModFeedbackSync } from '../../services/feedback-sync';\nimport { AddonModFeedbackModuleHandlerService } from '../../services/handlers/module';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../../core/components/loading/loading\";\nimport * as i3 from \"../../../../../core/components/mark-required/mark-required\";\nimport * as i4 from \"../../../../../core/components/recaptcha/recaptcha\";\nimport * as i5 from \"../../../../../core/components/spacer/spacer\";\nimport * as i6 from \"../../../../../core/directives/fa-icon\";\nimport * as i7 from \"../../../../../core/directives/format-text\";\nimport * as i8 from \"../../../../../core/directives/collapsible-footer\";\nimport * as i9 from \"../../../../../core/directives/content\";\nimport * as i10 from \"../../../../../core/directives/update-non-reactive-attributes\";\nimport * as i11 from \"@angular/forms\";\nimport * as i12 from \"@ionic/angular\";\nimport * as i13 from \"@ngx-translate/core\";\nfunction AddonModFeedbackFormPage_ng_container_10_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.anonymous\"));\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_p_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.non_anonymous\"));\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_core_spacer_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-spacer\");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", item_r7.itemnumber, \". \");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r7.postfix);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 20);\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_1_Template, 2, 1, \"span\", 5);\n    i0.ɵɵelement(2, \"core-format-text\", 21);\n    i0.ɵɵtemplate(3, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_3_Template, 2, 1, \"span\", 22);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"core-mark-required\", item_r7.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.feedback.autonumbering && item_r7.itemnumber);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"component\", ctx_r10.component)(\"componentId\", ctx_r10.cmId)(\"text\", item_r7.name)(\"contextInstanceId\", ctx_r10.cmId)(\"courseId\", ctx_r10.courseId)(\"wsNotFiltered\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.postfix);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵelement(1, \"core-format-text\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"component\", ctx_r11.component)(\"componentId\", ctx_r11.cmId)(\"text\", item_r7.presentation)(\"contextInstanceId\", ctx_r11.cmId)(\"wsNotFiltered\", true)(\"courseId\", ctx_r11.courseId);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-input\", 25);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template_ion_input_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r27);\n      const item_r7 = i0.ɵɵnextContext(2).$implicit;\n      return i0.ɵɵresetView(item_r7.value = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵpropertyInterpolate(\"maxlength\", item_r7.length);\n    i0.ɵɵproperty(\"ngModel\", item_r7.value)(\"required\", item_r7.required);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_span_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\");\n    i0.ɵɵtext(1, \", \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-text\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵtemplate(3, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_span_3_Template, 2, 0, \"span\", 5);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(2, 4, \"addon.mod_feedback.numberoutofrange\"), \" [\", item_r7.rangefrom, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r7.rangefrom && item_r7.rangeto);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", item_r7.rangeto, \"] \");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-input\", 26);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template_ion_input_ngModelChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r34);\n      const item_r7 = i0.ɵɵnextContext(2).$implicit;\n      return i0.ɵɵresetView(item_r7.value = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_Template, 5, 6, \"ion-text\", 27);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵproperty(\"ngModel\", item_r7.value)(\"required\", item_r7.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.hasError);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r38 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-textarea\", 29);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template_ion_textarea_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r38);\n      const item_r7 = i0.ɵɵnextContext(2).$implicit;\n      return i0.ɵɵresetView(item_r7.value = $event);\n    });\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵproperty(\"required\", item_r7.required)(\"ngModel\", item_r7.value);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_ion_select_option_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 32);\n    i0.ɵɵelement(1, \"core-format-text\", 24);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r41 = ctx.$implicit;\n    const ctx_r40 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"value\", option_r41.value);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"component\", ctx_r40.component)(\"componentId\", ctx_r40.cmId)(\"text\", option_r41.label)(\"contextInstanceId\", ctx_r40.cmId)(\"wsNotFiltered\", true)(\"courseId\", ctx_r40.courseId);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    header: a0\n  };\n};\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r44 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-select\", 30);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template_ion_select_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r44);\n      const item_r7 = i0.ɵɵnextContext(2).$implicit;\n      return i0.ɵɵresetView(item_r7.value = $event);\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_ion_select_option_2_Template, 2, 7, \"ion-select-option\", 31);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵproperty(\"required\", item_r7.required)(\"ngModel\", item_r7.value)(\"cancelText\", i0.ɵɵpipeBind1(1, 7, \"core.cancel\"))(\"interfaceOptions\", i0.ɵɵpureFunction1(9, _c0, item_r7.name));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r7.choices);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"ion-radio\", 34);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const option_r47 = ctx.$implicit;\n    const ctx_r46 = i0.ɵɵnextContext(5);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r46.component)(\"componentId\", ctx_r46.cmId)(\"text\", option_r47.label)(\"contextInstanceId\", ctx_r46.cmId)(\"wsNotFiltered\", true)(\"courseId\", ctx_r46.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", option_r47.value);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r50 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-radio-group\", 33);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template_ion_radio_group_ngModelChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r50);\n      const item_r7 = i0.ɵɵnextContext(2).$implicit;\n      return i0.ɵɵresetView(item_r7.value = $event);\n    });\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_ion_item_1_Template, 4, 7, \"ion-item\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵproperty(\"ngModel\", item_r7.value)(\"required\", item_r7.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", item_r7.choices);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r55 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"ion-checkbox\", 35);\n    i0.ɵɵlistener(\"ngModelChange\", function AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template_ion_checkbox_ngModelChange_3_listener($event) {\n      const restoredCtx = i0.ɵɵrestoreView(_r55);\n      const option_r53 = restoredCtx.$implicit;\n      return i0.ɵɵresetView(option_r53.checked = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const option_r53 = ctx.$implicit;\n    const item_r7 = i0.ɵɵnextContext(3).$implicit;\n    const ctx_r52 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r52.component)(\"componentId\", ctx_r52.cmId)(\"text\", option_r53.label)(\"contextInstanceId\", ctx_r52.cmId)(\"wsNotFiltered\", true)(\"courseId\", ctx_r52.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate2(\"name\", \"\", item_r7.typ, \"_\", item_r7.id, \"\");\n    i0.ɵɵproperty(\"required\", item_r7.required)(\"ngModel\", option_r53.checked);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template, 4, 10, \"ion-item\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", item_r7.choices);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_core_recaptcha_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-recaptcha\", 38);\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵproperty(\"publicKey\", item_r7.captcha.recaptchapublickey)(\"model\", item_r7);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 39)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 40);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.mod_feedback.captchaofflinewarning\"));\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_core_recaptcha_1_Template, 1, 2, \"core-recaptcha\", 36);\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_div_2_Template, 6, 3, \"div\", 37);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext(2).$implicit;\n    const ctx_r18 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r18.preview && !ctx_r18.offline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r18.preview && (!item_r7.captcha || ctx_r18.offline));\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\", 13)(2, \"ion-label\", 14);\n    i0.ɵɵtemplate(3, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_Template, 4, 9, \"p\", 15);\n    i0.ɵɵtemplate(4, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_4_Template, 2, 6, \"p\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template, 1, 5, \"ion-input\", 16);\n    i0.ɵɵtemplate(6, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template, 3, 5, \"ng-container\", 5);\n    i0.ɵɵtemplate(7, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template, 1, 4, \"ion-textarea\", 17);\n    i0.ɵɵtemplate(8, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template, 3, 11, \"ion-select\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(9, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template, 2, 5, \"ion-radio-group\", 19);\n    i0.ɵɵtemplate(10, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_Template, 2, 1, \"ng-container\", 5);\n    i0.ɵɵtemplate(11, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_Template, 3, 2, \"ng-container\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"core-danger-item\", item_r7.isEmpty || item_r7.hasError);\n    i0.ɵɵproperty(\"color\", item_r7.dependitem > 0 ? \"light\" : \"\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"position\", item_r7.hasTextInput ? \"stacked\" : undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"label\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"textfield\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"numeric\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"textarea\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"multichoice-d\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"multichoice-r\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"multichoice-c\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.templateName === \"captcha\");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ng_container_9_core_spacer_1_Template, 1, 0, \"core-spacer\", 5);\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_Template, 12, 13, \"ng-container\", 5);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.typ === \"pagebreak\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r7.typ !== \"pagebreak\");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r67 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\")(1, \"ion-button\", 42);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r67);\n      const ctx_r66 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r66.gotoPage(true));\n    });\n    i0.ɵɵelement(2, \"ion-icon\", 43);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.previous\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r69 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\")(1, \"ion-button\", 44);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r69);\n      const ctx_r68 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r68.gotoPage(false));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelement(4, \"ion-icon\", 45);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.next\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r71 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-col\")(1, \"ion-button\", 44);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template_ion_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r71);\n      const ctx_r70 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r70.gotoPage(false));\n    });\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.submit\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_ion_row_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-row\", 41);\n    i0.ɵɵtemplate(1, AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template, 5, 3, \"ion-col\", 5);\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template, 5, 3, \"ion-col\", 5);\n    i0.ɵɵtemplate(3, AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template, 4, 3, \"ion-col\", 5);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.hasPrevPage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.hasNextPage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.hasNextPage);\n  }\n}\nfunction AddonModFeedbackFormPage_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-list\", 8)(2, \"ion-item\", 9)(3, \"ion-label\")(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, AddonModFeedbackFormPage_ng_container_10_p_7_Template, 3, 3, \"p\", 5);\n    i0.ɵɵtemplate(8, AddonModFeedbackFormPage_ng_container_10_p_8_Template, 3, 3, \"p\", 5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(9, AddonModFeedbackFormPage_ng_container_10_ng_container_9_Template, 3, 2, \"ng-container\", 11);\n    i0.ɵɵtemplate(10, AddonModFeedbackFormPage_ng_container_10_ion_row_10_Template, 4, 3, \"ion-row\", 12);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 5, \"addon.mod_feedback.mode\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.access.isanonymous);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.access.isanonymous);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.items);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.preview);\n  }\n}\nfunction AddonModFeedbackFormPage_ion_card_11_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.this_feedback_is_already_submitted\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_ion_card_11_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.feedback_submitted_offline\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_ion_card_11_core_format_text_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-format-text\", 49);\n  }\n  if (rf & 2) {\n    const ctx_r74 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"component\", ctx_r74.component)(\"text\", ctx_r74.completionPageContents)(\"contextInstanceId\", ctx_r74.cmId)(\"courseId\", ctx_r74.courseId);\n  }\n}\nfunction AddonModFeedbackFormPage_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 46)(1, \"ion-item\", 9);\n    i0.ɵɵelement(2, \"ion-icon\", 47);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtemplate(4, AddonModFeedbackFormPage_ion_card_11_p_4_Template, 3, 3, \"p\", 5);\n    i0.ɵɵtemplate(5, AddonModFeedbackFormPage_ion_card_11_p_5_Template, 3, 3, \"p\", 5);\n    i0.ɵɵtemplate(6, AddonModFeedbackFormPage_ion_card_11_core_format_text_6_Template, 1, 4, \"core-format-text\", 48);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.completionPageContents && !ctx_r1.completedOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.completionPageContents && ctx_r1.completedOffline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.completionPageContents);\n  }\n}\nfunction AddonModFeedbackFormPage_div_12_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r79 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 54);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackFormPage_div_12_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r79);\n      const ctx_r78 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r78.showAnalysis());\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 55);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"addon.mod_feedback.completed_feedbacks\"), \" \");\n  }\n}\nfunction AddonModFeedbackFormPage_div_12_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.continue\"));\n  }\n}\nfunction AddonModFeedbackFormPage_div_12_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.course.nextactivity\"));\n  }\n}\nfunction AddonModFeedbackFormPage_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r81 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 50)(1, \"div\", 51);\n    i0.ɵɵtemplate(2, AddonModFeedbackFormPage_div_12_ion_button_2_Template, 4, 3, \"ion-button\", 52);\n    i0.ɵɵelementStart(3, \"ion-button\", 53);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackFormPage_div_12_Template_ion_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r81);\n      const ctx_r80 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r80.continue());\n    });\n    i0.ɵɵtemplate(4, AddonModFeedbackFormPage_div_12_ng_container_4_Template, 3, 3, \"ng-container\", 5);\n    i0.ɵɵtemplate(5, AddonModFeedbackFormPage_div_12_ng_container_5_Template, 3, 3, \"ng-container\", 5);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.access.canviewanalysis);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.siteAfterSubmit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.siteAfterSubmit);\n  }\n}\n/**\n * Page that displays feedback form.\n */\nexport class AddonModFeedbackFormPage {\n  constructor() {\n    this.forceLeave = false;\n    this.preview = false;\n    this.fromIndex = false;\n    this.component = AddonModFeedbackProvider.COMPONENT;\n    this.offline = false;\n    this.feedbackLoaded = false;\n    this.items = [];\n    this.hasPrevPage = false;\n    this.hasNextPage = false;\n    this.completed = false;\n    this.completedOffline = false;\n    this.currentSite = CoreSites.getRequiredCurrentSite();\n    // Refresh online status when changes.\n    this.onlineObserver = CoreNetwork.onChange().subscribe(() => {\n      // Execute the callback in the Angular zone, so change detection doesn't stop working.\n      NgZone.run(() => {\n        this.offline = !CoreNetwork.isOnline();\n      });\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this.cmId = CoreNavigator.getRequiredRouteNumberParam('cmId');\n        _this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n        _this.currentPage = CoreNavigator.getRouteNumberParam('page');\n        _this.title = CoreNavigator.getRouteParam('title');\n        _this.preview = !!CoreNavigator.getRouteBooleanParam('preview');\n        _this.fromIndex = !!CoreNavigator.getRouteBooleanParam('fromIndex');\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n        CoreNavigator.back();\n        return;\n      }\n      yield _this.fetchData();\n      if (!_this.access || _this.access.isempty && !_this.access.canedititems && !_this.access.canviewreports) {\n        CoreDomUtils.showErrorModal(Translate.instant('core.nopermissiontoaccesspage'));\n        CoreNavigator.back();\n        return;\n      }\n      if (!_this.feedback) {\n        return;\n      }\n      try {\n        yield AddonModFeedback.logView(_this.feedback.id, true);\n        CoreCourse.checkModuleCompletion(_this.courseId, _this.module.completiondata);\n      } catch (_unused) {\n        // Ignore errors.\n      }\n    })();\n  }\n  /**\n   * View entered.\n   */\n  ionViewDidEnter() {\n    this.forceLeave = false;\n  }\n  /**\n   * @inheritdoc\n   */\n  canLeave() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (_this2.forceLeave) {\n        return true;\n      }\n      if (!_this2.preview) {\n        const responses = AddonModFeedbackHelper.getPageItemsResponses(_this2.items);\n        if (_this2.items && !_this2.completed && _this2.originalData) {\n          // Form submitted. Check if there is any change.\n          if (!CoreUtils.basicLeftCompare(responses, _this2.originalData, 3)) {\n            yield CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\n          }\n        }\n      }\n      return true;\n    })();\n  }\n  /**\n   * Fetch all the data required for the view.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchData() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this3.module = yield CoreCourse.getModule(_this3.cmId, _this3.courseId, undefined, true, false, _this3.currentSite.getId());\n        _this3.offline = !CoreNetwork.isOnline();\n        const options = {\n          cmId: _this3.cmId,\n          readingStrategy: _this3.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */,\n          siteId: _this3.currentSite.getId()\n        };\n        _this3.feedback = yield AddonModFeedback.getFeedback(_this3.courseId, _this3.cmId);\n        _this3.title = _this3.feedback.name || _this3.title;\n        yield _this3.fetchAccessData(options);\n        let page = 0;\n        if (!_this3.preview && _this3.access.cansubmit && !_this3.access.isempty) {\n          var _this3$currentPage;\n          page = (_this3$currentPage = _this3.currentPage) !== null && _this3$currentPage !== void 0 ? _this3$currentPage : yield _this3.fetchResumePage(options);\n        } else {\n          _this3.preview = true;\n        }\n        yield _this3.fetchFeedbackPageData(page);\n      } catch (message) {\n        CoreDomUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\n        _this3.forceLeave = true;\n        CoreNavigator.back();\n      } finally {\n        _this3.feedbackLoaded = true;\n      }\n    })();\n  }\n  /**\n   * Fetch access information.\n   *\n   * @param options Options.\n   * @returns Promise resolved when done.\n   */\n  fetchAccessData(options) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this4.access = yield AddonModFeedback.getFeedbackAccessInformation(_this4.feedback.id, options);\n      } catch (error) {\n        if (_this4.offline || CoreUtils.isWebServiceError(error)) {\n          // Already offline or shouldn't go offline, fail.\n          throw error;\n        }\n        // If it fails, go offline.\n        _this4.offline = true;\n        options.readingStrategy = 1 /* CoreSitesReadingStrategy.PREFER_CACHE */;\n        _this4.access = yield AddonModFeedback.getFeedbackAccessInformation(_this4.feedback.id, options);\n      }\n    })();\n  }\n  /**\n   * Get resume page from WS.\n   *\n   * @param options Options.\n   * @returns Promise resolved with the page to resume.\n   */\n  fetchResumePage(options) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        return yield AddonModFeedback.getResumePage(_this5.feedback.id, options);\n      } catch (error) {\n        if (_this5.offline || CoreUtils.isWebServiceError(error)) {\n          // Already offline or shouldn't go offline, fail.\n          throw error;\n        }\n        // Go offline.\n        _this5.offline = true;\n        options.readingStrategy = 1 /* CoreSitesReadingStrategy.PREFER_CACHE */;\n        return AddonModFeedback.getResumePage(_this5.feedback.id, options);\n      }\n    })();\n  }\n  /**\n   * Fetch page data.\n   *\n   * @param page Page to load.\n   * @returns Promise resolved when done.\n   */\n  fetchFeedbackPageData(page = 0) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      _this6.items = [];\n      const response = yield _this6.fetchPageItems(page);\n      _this6.items = response.items.map(itemData => AddonModFeedbackHelper.getItemForm(itemData, _this6.preview)).filter(itemData => itemData); // Filter items with errors.\n      if (!_this6.preview) {\n        const itemsCopy = CoreUtils.clone(_this6.items); // Copy the array to avoid modifications.\n        _this6.originalData = AddonModFeedbackHelper.getPageItemsResponses(itemsCopy);\n      }\n      _this6.analyticsLogEvent();\n    })();\n  }\n  /**\n   * Fetch page items.\n   *\n   * @param page Page to get.\n   * @returns Promise resolved with WS response.\n   */\n  fetchPageItems(page) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      const options = {\n        cmId: _this7.cmId,\n        readingStrategy: _this7.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */,\n        siteId: _this7.currentSite.getId()\n      };\n      if (_this7.preview) {\n        const response = yield AddonModFeedback.getItems(_this7.feedback.id, options);\n        return {\n          items: response.items,\n          warnings: response.warnings,\n          hasnextpage: false,\n          hasprevpage: false\n        };\n      }\n      _this7.currentPage = page;\n      let response;\n      try {\n        response = yield AddonModFeedback.getPageItemsWithValues(_this7.feedback.id, page, options);\n      } catch (error) {\n        if (_this7.offline || CoreUtils.isWebServiceError(error)) {\n          // Already offline or shouldn't go offline, fail.\n          throw error;\n        }\n        // Go offline.\n        _this7.offline = true;\n        options.readingStrategy = 1 /* CoreSitesReadingStrategy.PREFER_CACHE */;\n        response = yield AddonModFeedback.getPageItemsWithValues(_this7.feedback.id, page, options);\n      }\n      _this7.hasPrevPage = !!response.hasprevpage;\n      _this7.hasNextPage = !!response.hasnextpage;\n      return response;\n    })();\n  }\n  /**\n   * Function to allow page navigation through the questions form.\n   *\n   * @param goPrevious If true it will go back to the previous page, if false, it will go forward.\n   * @returns Resolved when done.\n   */\n  gotoPage(goPrevious) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      var _this8$content;\n      (_this8$content = _this8.content) === null || _this8$content === void 0 || _this8$content.scrollToTop();\n      _this8.feedbackLoaded = false;\n      const responses = AddonModFeedbackHelper.getPageItemsResponses(_this8.items);\n      const formHasErrors = _this8.items.some(item => item.isEmpty || item.hasError);\n      try {\n        // Sync other pages first.\n        yield CoreUtils.ignoreErrors(AddonModFeedbackSync.syncFeedback(_this8.feedback.id));\n        const response = yield AddonModFeedback.processPage(_this8.feedback.id, _this8.currentPage, responses, {\n          goPrevious,\n          formHasErrors,\n          courseId: _this8.courseId,\n          cmId: _this8.cmId\n        });\n        if (response.completed) {\n          // Form is completed, show completion message and buttons.\n          _this8.items = [];\n          _this8.completed = true;\n          _this8.completedOffline = !!response.offline;\n          _this8.completionPageContents = response.completionpagecontents;\n          _this8.siteAfterSubmit = response.siteaftersubmit;\n          CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, {\n            module: 'feedback'\n          });\n          // Invalidate access information so user will see home page updated (continue form or completion messages).\n          yield Promise.all([AddonModFeedback.invalidateFeedbackAccessInformationData(_this8.feedback.id), AddonModFeedback.invalidateResumePageData(_this8.feedback.id)]);\n          // If form has been submitted, the info has been already invalidated but we should update index view.\n          CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n            feedbackId: _this8.feedback.id,\n            tab: 'overview',\n            offline: _this8.completedOffline\n          });\n          yield _this8.fetchAccessData({\n            cmId: _this8.cmId,\n            readingStrategy: _this8.offline ? 1 /* CoreSitesReadingStrategy.PREFER_CACHE */ : 2 /* CoreSitesReadingStrategy.ONLY_NETWORK */,\n            siteId: _this8.currentSite.getId()\n          });\n        } else if (typeof response.jumpto != 'number' || response.jumpto == _this8.currentPage) {\n          // Errors on questions, stay in page.\n        } else {\n          // Invalidate access information so user will see home page updated (continue form).\n          yield AddonModFeedback.invalidateResumePageData(_this8.feedback.id);\n          CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n            feedbackId: _this8.feedback.id,\n            tab: 'overview',\n            offline: _this8.completedOffline\n          });\n          // Fetch the new page.\n          yield _this8.fetchFeedbackPageData(response.jumpto);\n        }\n      } catch (message) {\n        CoreDomUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\n      } finally {\n        _this8.feedbackLoaded = true;\n      }\n    })();\n  }\n  /**\n   * Function to link implemented features.\n   */\n  showAnalysis() {\n    if (this.fromIndex) {\n      // Previous page is the index page, go back.\n      CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n        feedbackId: this.feedback.id,\n        tab: 'analysis',\n        offline: this.completedOffline\n      });\n      CoreNavigator.back();\n      return;\n    }\n    CoreNavigator.navigateToSitePath(AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.cmId}`, {\n      params: {\n        module: this.module,\n        tab: 'analysis'\n      }\n    });\n  }\n  /**\n   * Function to go to the page after submit.\n   *\n   * @returns Promise resolved when done.\n   */\n  continue() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this9.siteAfterSubmit) {\n        return CoreNavigator.back();\n      }\n      const modal = yield CoreDomUtils.showModalLoading();\n      try {\n        yield CoreSites.visitLink(_this9.siteAfterSubmit, {\n          siteId: _this9.currentSite.id\n        });\n      } finally {\n        modal.dismiss();\n      }\n    })();\n  }\n  /**\n   * Log event in analytics.\n   */\n  analyticsLogEvent() {\n    if (!this.feedback) {\n      return;\n    }\n    if (this.preview) {\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'mod_feedback_get_items',\n        name: this.feedback.name,\n        data: {\n          id: this.feedback.id,\n          category: 'feedback'\n        },\n        url: `/mod/feedback/print.php?id=${this.cmId}&courseid=${this.courseId}`\n      });\n      return;\n    }\n    let url = '/mod/feedback/complete.php';\n    if (!this.completed) {\n      url += `?id=${this.cmId}` + (this.currentPage ? `&gopage=${this.currentPage}` : '') + `&courseid=${this.courseId}`;\n    }\n    CoreAnalytics.logEvent({\n      type: CoreAnalyticsEventType.VIEW_ITEM,\n      ws: this.completed ? 'mod_feedback_get_feedback_access_information' : 'mod_feedback_get_page_items',\n      name: this.feedback.name,\n      data: {\n        id: this.feedback.id,\n        category: 'feedback',\n        page: this.currentPage\n      },\n      url\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    this.onlineObserver.unsubscribe();\n  }\n}\n_class = AddonModFeedbackFormPage;\n_class.ɵfac = function AddonModFeedbackFormPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-mod-feedback-form\"]],\n  viewQuery: function AddonModFeedbackFormPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(IonContent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n    }\n  },\n  decls: 13,\n  vars: 10,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [1, \"limited-width\"], [1, \"has-spacer\", 3, \"hideUntil\"], [4, \"ngIf\"], [\"class\", \"core-success-card\", 4, \"ngIf\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", \"appearOnBottom\", \"\", 4, \"ngIf\"], [1, \"ion-no-margin\", \"has-spacer\"], [1, \"ion-text-wrap\"], [1, \"item-heading\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-align-items-center spacer-top\", 4, \"ngIf\"], [1, \"ion-text-wrap\", \"addon-mod_feedback-item\", 3, \"color\"], [3, \"position\"], [3, \"core-mark-required\", 4, \"ngIf\"], [\"type\", \"text\", \"autocorrect\", \"off\", 3, \"ngModel\", \"name\", \"maxlength\", \"required\", \"ngModelChange\", 4, \"ngIf\"], [3, \"required\", \"name\", \"ngModel\", \"ngModelChange\", 4, \"ngIf\"], [\"interface\", \"action-sheet\", 3, \"required\", \"name\", \"ngModel\", \"cancelText\", \"interfaceOptions\", \"ngModelChange\", 4, \"ngIf\"], [3, \"ngModel\", \"required\", \"name\", \"ngModelChange\", 4, \"ngIf\"], [3, \"core-mark-required\"], [\"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"courseId\", \"wsNotFiltered\"], [\"class\", \"addon-mod_feedback-postfix\", 4, \"ngIf\"], [1, \"addon-mod_feedback-postfix\"], [\"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"wsNotFiltered\", \"courseId\"], [\"type\", \"text\", \"autocorrect\", \"off\", 3, \"ngModel\", \"name\", \"maxlength\", \"required\", \"ngModelChange\"], [\"type\", \"number\", 3, \"ngModel\", \"name\", \"required\", \"ngModelChange\"], [\"color\", \"danger\", \"class\", \"addon-mod_feedback-item-error\", 4, \"ngIf\"], [\"color\", \"danger\", 1, \"addon-mod_feedback-item-error\"], [3, \"required\", \"name\", \"ngModel\", \"ngModelChange\"], [\"interface\", \"action-sheet\", 3, \"required\", \"name\", \"ngModel\", \"cancelText\", \"interfaceOptions\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [3, \"ngModel\", \"required\", \"name\", \"ngModelChange\"], [\"slot\", \"start\", 3, \"value\"], [\"value\", \"option.value\", 3, \"required\", \"name\", \"ngModel\", \"ngModelChange\"], [\"modelValueName\", \"value\", 3, \"publicKey\", \"model\", 4, \"ngIf\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [\"modelValueName\", \"value\", 3, \"publicKey\", \"model\"], [1, \"core-warning-card\"], [\"name\", \"fas-triangle-exclamation\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [1, \"ion-align-items-center\", \"spacer-top\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-text-wrap\", 3, \"click\"], [\"name\", \"fas-chevron-left\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", 3, \"click\"], [\"name\", \"fas-chevron-right\", \"slot\", \"end\", \"aria-hidden\", \"true\"], [1, \"core-success-card\"], [\"name\", \"fas-check\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"componentId\", \"componentId\", \"contextLevel\", \"module\", 3, \"component\", \"text\", \"contextInstanceId\", \"courseId\", 4, \"ngIf\"], [\"componentId\", \"componentId\", \"contextLevel\", \"module\", 3, \"component\", \"text\", \"contextInstanceId\", \"courseId\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", \"appearOnBottom\", \"\"], [1, \"list-item-limited-width\", \"adaptable-buttons-row\"], [\"expand\", \"block\", \"fill\", \"outline\", \"class\", \"ion-text-wrap ion-margin\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-text-wrap\", \"ion-margin\", 3, \"click\"], [\"name\", \"fas-chart-bar\", \"slot\", \"start\", \"aria-hidden\", \"true\"]],\n  template: function AddonModFeedbackFormPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵelement(7, \"core-format-text\", 2);\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(8, \"ion-content\", 3)(9, \"core-loading\", 4);\n      i0.ɵɵtemplate(10, AddonModFeedbackFormPage_ng_container_10_Template, 11, 7, \"ng-container\", 5);\n      i0.ɵɵtemplate(11, AddonModFeedbackFormPage_ion_card_11_Template, 7, 3, \"ion-card\", 6);\n      i0.ɵɵtemplate(12, AddonModFeedbackFormPage_div_12_Template, 6, 3, \"div\", 7);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 8, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"text\", ctx.title)(\"contextInstanceId\", ctx.cmId)(\"courseId\", ctx.courseId);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.feedbackLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.items && ctx.items.length);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.completed);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.feedbackLoaded && ctx.completed);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreLoadingComponent, i3.CoreMarkRequiredComponent, i4.CoreRecaptchaComponent, i5.CoreSpacerComponent, i6.CoreFaIconDirective, i7.CoreFormatTextDirective, i8.CoreCollapsibleFooterDirective, i9.CoreContentDirective, i10.CoreUpdateNonReactiveAttributesDirective, i11.NgControlStatus, i11.RequiredValidator, i11.MaxLengthValidator, i11.NgModel, i12.IonButton, i12.IonButtons, i12.IonCard, i12.IonCheckbox, i12.IonCol, i12.IonContent, i12.IonHeader, i12.IonIcon, i12.IonInput, i12.IonItem, i12.IonLabel, i12.IonList, i12.IonRadio, i12.IonRadioGroup, i12.IonRow, i12.IonSelect, i12.IonSelectOption, i12.IonText, i12.IonTextarea, i12.IonTitle, i12.IonToolbar, i12.BooleanValueAccessor, i12.NumericValueAccessor, i12.RadioValueAccessor, i12.SelectValueAccessor, i12.TextValueAccessor, i12.IonBackButton, i13.TranslatePipe],\n  styles: [\"[_nghost-%COMP%]   .addon-mod_feedback-item[_ngcontent-%COMP%]   ion-label.label-stacked[_ngcontent-%COMP%] {\\n  margin: 11px 0px 10px;\\n  transform: none;\\n}\\n[_nghost-%COMP%]   .addon-mod_feedback-item-error[_ngcontent-%COMP%] {\\n  padding-top: 5px;\\n  padding-bottom: 8px;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hZGRvbnMvbW9kL2ZlZWRiYWNrL3BhZ2VzL2Zvcm0vZm9ybS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNJO0VBQ0kscUJBQUE7RUFDQSxlQUFBO0FBQVI7QUFHSTtFQUNJLGdCQUFBO0VBQ0EsbUJBQUE7QUFEUiIsInNvdXJjZXNDb250ZW50IjpbIjpob3N0IHtcbiAgICAuYWRkb24tbW9kX2ZlZWRiYWNrLWl0ZW0gaW9uLWxhYmVsLmxhYmVsLXN0YWNrZWQge1xuICAgICAgICBtYXJnaW46IDExcHggMHB4IDEwcHg7XG4gICAgICAgIHRyYW5zZm9ybTogbm9uZTtcbiAgICB9XG5cbiAgICAuYWRkb24tbW9kX2ZlZWRiYWNrLWl0ZW0tZXJyb3Ige1xuICAgICAgICBwYWRkaW5nLXRvcDogNXB4O1xuICAgICAgICBwYWRkaW5nLWJvdHRvbTogOHB4O1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["CoreCourse","IonContent","CoreNetwork","CoreNavigator","CoreSites","CoreDomUtils","CoreUtils","NgZone","Translate","CoreEvents","AddonModFeedback","AddonModFeedbackProvider","AddonModFeedbackHelper","AddonModFeedbackSync","AddonModFeedbackModuleHandlerService","CoreAnalytics","CoreAnalyticsEventType","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1","ɵɵelement","ɵɵtextInterpolate1","item_r7","itemnumber","postfix","ɵɵtemplate","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_1_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_span_3_Template","ɵɵproperty","required","ctx_r10","feedback","autonumbering","component","cmId","name","courseId","ctx_r11","presentation","ɵɵlistener","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template_ion_input_ngModelChange_0_listener","$event","ɵɵrestoreView","_r27","ɵɵnextContext","$implicit","ɵɵresetView","value","ɵɵpropertyInterpolate2","typ","id","ɵɵpropertyInterpolate","length","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_span_3_Template","ɵɵtextInterpolate2","rangefrom","rangeto","ɵɵelementContainerStart","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template_ion_input_ngModelChange_1_listener","_r34","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_ion_text_2_Template","ɵɵelementContainerEnd","hasError","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template_ion_textarea_ngModelChange_0_listener","_r38","option_r41","ctx_r40","label","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template_ion_select_ngModelChange_0_listener","_r44","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_ion_select_option_2_Template","ɵɵpureFunction1","_c0","choices","ctx_r46","option_r47","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template_ion_radio_group_ngModelChange_0_listener","_r50","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_ion_item_1_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template_ion_checkbox_ngModelChange_3_listener","restoredCtx","_r55","option_r53","checked","ctx_r52","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_ion_item_1_Template","captcha","recaptchapublickey","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_core_recaptcha_1_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_div_2_Template","ctx_r18","preview","offline","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_3_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_p_4_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_input_5_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_6_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_textarea_7_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_select_8_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ion_radio_group_9_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_10_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_ng_container_11_Template","ɵɵclassProp","isEmpty","dependitem","hasTextInput","undefined","templateName","AddonModFeedbackFormPage_ng_container_10_ng_container_9_core_spacer_1_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_ng_container_2_Template","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template_ion_button_click_1_listener","_r67","ctx_r66","gotoPage","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template_ion_button_click_1_listener","_r69","ctx_r68","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template_ion_button_click_1_listener","_r71","ctx_r70","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_1_Template","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_2_Template","AddonModFeedbackFormPage_ng_container_10_ion_row_10_ion_col_3_Template","ctx_r6","hasPrevPage","hasNextPage","AddonModFeedbackFormPage_ng_container_10_p_7_Template","AddonModFeedbackFormPage_ng_container_10_p_8_Template","AddonModFeedbackFormPage_ng_container_10_ng_container_9_Template","AddonModFeedbackFormPage_ng_container_10_ion_row_10_Template","ctx_r0","access","isanonymous","items","ctx_r74","completionPageContents","AddonModFeedbackFormPage_ion_card_11_p_4_Template","AddonModFeedbackFormPage_ion_card_11_p_5_Template","AddonModFeedbackFormPage_ion_card_11_core_format_text_6_Template","ctx_r1","completedOffline","AddonModFeedbackFormPage_div_12_ion_button_2_Template_ion_button_click_0_listener","_r79","ctx_r78","showAnalysis","AddonModFeedbackFormPage_div_12_ion_button_2_Template","AddonModFeedbackFormPage_div_12_Template_ion_button_click_3_listener","_r81","ctx_r80","continue","AddonModFeedbackFormPage_div_12_ng_container_4_Template","AddonModFeedbackFormPage_div_12_ng_container_5_Template","ctx_r2","canviewanalysis","siteAfterSubmit","AddonModFeedbackFormPage","constructor","forceLeave","fromIndex","COMPONENT","feedbackLoaded","completed","currentSite","getRequiredCurrentSite","onlineObserver","onChange","subscribe","run","isOnline","ngOnInit","_this","_asyncToGenerator","getRequiredRouteNumberParam","currentPage","getRouteNumberParam","title","getRouteParam","getRouteBooleanParam","error","showErrorModal","back","fetchData","isempty","canedititems","canviewreports","instant","logView","checkModuleCompletion","module","completiondata","_unused","ionViewDidEnter","canLeave","_this2","responses","getPageItemsResponses","originalData","basicLeftCompare","showConfirm","_this3","getModule","getId","options","readingStrategy","siteId","getFeedback","fetchAccessData","page","cansubmit","_this3$currentPage","fetchResumePage","fetchFeedbackPageData","message","showErrorModalDefault","_this4","getFeedbackAccessInformation","isWebServiceError","_this5","getResumePage","_this6","response","fetchPageItems","map","itemData","getItemForm","filter","itemsCopy","clone","analyticsLogEvent","_this7","getItems","warnings","hasnextpage","hasprevpage","getPageItemsWithValues","goPrevious","_this8","_this8$content","content","scrollToTop","formHasErrors","some","item","ignoreErrors","syncFeedback","processPage","completionpagecontents","siteaftersubmit","trigger","ACTIVITY_DATA_SENT","Promise","all","invalidateFeedbackAccessInformationData","invalidateResumePageData","FORM_SUBMITTED","feedbackId","tab","jumpto","navigateToSitePath","PAGE_NAME","params","_this9","modal","showModalLoading","visitLink","dismiss","logEvent","type","VIEW_ITEM","ws","data","category","url","ngOnDestroy","unsubscribe","selectors","viewQuery","AddonModFeedbackFormPage_Query","rf","ctx","AddonModFeedbackFormPage_ng_container_10_Template","AddonModFeedbackFormPage_ion_card_11_Template","AddonModFeedbackFormPage_div_12_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/feedback/pages/form/form.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/feedback/pages/form/form.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { CoreSite } from '@classes/sites/site';\nimport { CoreCourse, CoreCourseCommonModWSOptions } from '@features/course/services/course';\nimport { CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { CanLeave } from '@guards/can-leave';\nimport { IonContent } from '@ionic/angular';\nimport { CoreNetwork } from '@services/network';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites, CoreSitesReadingStrategy } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreUtils } from '@services/utils/utils';\nimport { NgZone, Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport { Subscription } from 'rxjs';\nimport {\n    AddonModFeedback,\n    AddonModFeedbackGetFeedbackAccessInformationWSResponse,\n    AddonModFeedbackPageItems,\n    AddonModFeedbackProvider,\n    AddonModFeedbackResponseValue,\n    AddonModFeedbackWSFeedback,\n} from '../../services/feedback';\nimport { AddonModFeedbackFormItem, AddonModFeedbackHelper } from '../../services/feedback-helper';\nimport { AddonModFeedbackSync } from '../../services/feedback-sync';\nimport { AddonModFeedbackModuleHandlerService } from '../../services/handlers/module';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\n\n/**\n * Page that displays feedback form.\n */\n@Component({\n    selector: 'page-addon-mod-feedback-form',\n    templateUrl: 'form.html',\n    styleUrls: ['form.scss'],\n})\nexport class AddonModFeedbackFormPage implements OnInit, OnDestroy, CanLeave {\n\n    @ViewChild(IonContent) content?: IonContent;\n\n    protected module?: CoreCourseModuleData;\n    protected currentPage?: number;\n    protected onlineObserver: Subscription;\n    protected originalData?: Record<string, AddonModFeedbackResponseValue>;\n    protected currentSite: CoreSite;\n    protected forceLeave = false;\n\n    title?: string;\n    preview = false;\n    fromIndex = false;\n    cmId!: number;\n    courseId!: number;\n    feedback?: AddonModFeedbackWSFeedback;\n    completionPageContents?: string;\n    component = AddonModFeedbackProvider.COMPONENT;\n    offline = false;\n    feedbackLoaded = false;\n    access?: AddonModFeedbackGetFeedbackAccessInformationWSResponse;\n    items: AddonModFeedbackFormItem[] = [];\n    hasPrevPage = false;\n    hasNextPage = false;\n    completed = false;\n    completedOffline = false;\n    siteAfterSubmit?: string;\n\n    constructor() {\n        this.currentSite = CoreSites.getRequiredCurrentSite();\n\n        // Refresh online status when changes.\n        this.onlineObserver = CoreNetwork.onChange().subscribe(() => {\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\n            NgZone.run(() => {\n                this.offline = !CoreNetwork.isOnline();\n            });\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            this.cmId = CoreNavigator.getRequiredRouteNumberParam('cmId');\n            this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n            this.currentPage = CoreNavigator.getRouteNumberParam('page');\n            this.title = CoreNavigator.getRouteParam('title');\n            this.preview = !!CoreNavigator.getRouteBooleanParam('preview');\n            this.fromIndex = !!CoreNavigator.getRouteBooleanParam('fromIndex');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        await this.fetchData();\n\n        if (!this.access || this.access.isempty && (!this.access.canedititems && !this.access.canviewreports)) {\n            CoreDomUtils.showErrorModal(Translate.instant('core.nopermissiontoaccesspage'));\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        if (!this.feedback) {\n            return;\n        }\n\n        try {\n            await AddonModFeedback.logView(this.feedback.id, true);\n\n            CoreCourse.checkModuleCompletion(this.courseId, this.module!.completiondata);\n        } catch {\n            // Ignore errors.\n        }\n    }\n\n    /**\n     * View entered.\n     */\n    ionViewDidEnter(): void {\n        this.forceLeave = false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async canLeave(): Promise<boolean> {\n        if (this.forceLeave) {\n            return true;\n        }\n\n        if (!this.preview) {\n            const responses = AddonModFeedbackHelper.getPageItemsResponses(this.items);\n\n            if (this.items && !this.completed && this.originalData) {\n                // Form submitted. Check if there is any change.\n                if (!CoreUtils.basicLeftCompare(responses, this.originalData, 3)) {\n                    await CoreDomUtils.showConfirm(Translate.instant('core.confirmcanceledit'));\n                }\n            }\n        }\n\n        return true;\n    }\n\n    /**\n     * Fetch all the data required for the view.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchData(): Promise<void> {\n        try {\n            this.module = await CoreCourse.getModule(this.cmId, this.courseId, undefined, true, false, this.currentSite.getId());\n\n            this.offline = !CoreNetwork.isOnline();\n            const options = {\n                cmId: this.cmId,\n                readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n                siteId: this.currentSite.getId(),\n            };\n\n            this.feedback = await AddonModFeedback.getFeedback(this.courseId, this.cmId);\n\n            this.title = this.feedback.name || this.title;\n\n            await this.fetchAccessData(options);\n\n            let page = 0;\n\n            if (!this.preview && this.access!.cansubmit && !this.access!.isempty) {\n                page = this.currentPage ?? await this.fetchResumePage(options);\n            } else {\n                this.preview = true;\n            }\n\n            await this.fetchFeedbackPageData(page);\n        } catch (message) {\n            CoreDomUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\n            this.forceLeave = true;\n            CoreNavigator.back();\n        } finally {\n            this.feedbackLoaded = true;\n        }\n    }\n\n    /**\n     * Fetch access information.\n     *\n     * @param options Options.\n     * @returns Promise resolved when done.\n     */\n    protected async fetchAccessData(options: CoreCourseCommonModWSOptions): Promise<void> {\n        try {\n            this.access = await AddonModFeedback.getFeedbackAccessInformation(this.feedback!.id, options);\n        } catch (error) {\n            if (this.offline || CoreUtils.isWebServiceError(error)) {\n                // Already offline or shouldn't go offline, fail.\n                throw error;\n            }\n\n            // If it fails, go offline.\n            this.offline = true;\n            options.readingStrategy = CoreSitesReadingStrategy.PREFER_CACHE;\n\n            this.access = await AddonModFeedback.getFeedbackAccessInformation(this.feedback!.id, options);\n        }\n    }\n\n    /**\n     * Get resume page from WS.\n     *\n     * @param options Options.\n     * @returns Promise resolved with the page to resume.\n     */\n    protected async fetchResumePage(options: CoreCourseCommonModWSOptions): Promise<number> {\n        try {\n            return await AddonModFeedback.getResumePage(this.feedback!.id, options);\n        } catch (error) {\n            if (this.offline || CoreUtils.isWebServiceError(error)) {\n                // Already offline or shouldn't go offline, fail.\n                throw error;\n            }\n\n            // Go offline.\n            this.offline = true;\n            options.readingStrategy = CoreSitesReadingStrategy.PREFER_CACHE;\n\n            return AddonModFeedback.getResumePage(this.feedback!.id, options);\n        }\n    }\n\n    /**\n     * Fetch page data.\n     *\n     * @param page Page to load.\n     * @returns Promise resolved when done.\n     */\n    protected async fetchFeedbackPageData(page: number = 0): Promise<void> {\n        this.items = [];\n        const response = await this.fetchPageItems(page);\n\n        this.items = <AddonModFeedbackFormItem[]> response.items\n            .map((itemData) => AddonModFeedbackHelper.getItemForm(itemData, this.preview))\n            .filter((itemData) => itemData); // Filter items with errors.\n\n        if (!this.preview) {\n            const itemsCopy = CoreUtils.clone(this.items); // Copy the array to avoid modifications.\n            this.originalData = AddonModFeedbackHelper.getPageItemsResponses(itemsCopy);\n        }\n\n        this.analyticsLogEvent();\n    }\n\n    /**\n     * Fetch page items.\n     *\n     * @param page Page to get.\n     * @returns Promise resolved with WS response.\n     */\n    protected async fetchPageItems(page: number): Promise<AddonModFeedbackPageItems> {\n        const options = {\n            cmId: this.cmId,\n            readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n            siteId: this.currentSite.getId(),\n        };\n\n        if (this.preview) {\n            const response = await AddonModFeedback.getItems(this.feedback!.id, options);\n\n            return {\n                items: response.items,\n                warnings: response.warnings,\n                hasnextpage: false,\n                hasprevpage: false,\n            };\n        }\n\n        this.currentPage = page;\n        let response: AddonModFeedbackPageItems;\n\n        try {\n            response = await AddonModFeedback.getPageItemsWithValues(this.feedback!.id, page, options);\n        } catch (error) {\n            if (this.offline || CoreUtils.isWebServiceError(error)) {\n                // Already offline or shouldn't go offline, fail.\n                throw error;\n            }\n\n            // Go offline.\n            this.offline = true;\n            options.readingStrategy = CoreSitesReadingStrategy.PREFER_CACHE;\n\n            response = await AddonModFeedback.getPageItemsWithValues(this.feedback!.id, page, options);\n        }\n\n        this.hasPrevPage = !!response.hasprevpage;\n        this.hasNextPage = !!response.hasnextpage;\n\n        return response;\n    }\n\n    /**\n     * Function to allow page navigation through the questions form.\n     *\n     * @param goPrevious If true it will go back to the previous page, if false, it will go forward.\n     * @returns Resolved when done.\n     */\n    async gotoPage(goPrevious: boolean): Promise<void> {\n        this.content?.scrollToTop();\n        this.feedbackLoaded = false;\n\n        const responses = AddonModFeedbackHelper.getPageItemsResponses(this.items);\n        const formHasErrors = this.items.some((item) => item.isEmpty || item.hasError);\n\n        try {\n            // Sync other pages first.\n            await CoreUtils.ignoreErrors(AddonModFeedbackSync.syncFeedback(this.feedback!.id));\n\n            const response = await AddonModFeedback.processPage(this.feedback!.id, this.currentPage!, responses, {\n                goPrevious,\n                formHasErrors,\n                courseId: this.courseId,\n                cmId: this.cmId,\n            });\n\n            if (response.completed) {\n                // Form is completed, show completion message and buttons.\n                this.items = [];\n                this.completed = true;\n                this.completedOffline = !!response.offline;\n                this.completionPageContents = response.completionpagecontents;\n                this.siteAfterSubmit = response.siteaftersubmit;\n\n                CoreEvents.trigger(CoreEvents.ACTIVITY_DATA_SENT, { module: 'feedback' });\n\n                // Invalidate access information so user will see home page updated (continue form or completion messages).\n                await Promise.all([\n                    AddonModFeedback.invalidateFeedbackAccessInformationData(this.feedback!.id),\n                    AddonModFeedback.invalidateResumePageData(this.feedback!.id),\n                ]);\n\n                // If form has been submitted, the info has been already invalidated but we should update index view.\n                CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n                    feedbackId: this.feedback!.id,\n                    tab: 'overview',\n                    offline: this.completedOffline,\n                });\n\n                await this.fetchAccessData({\n                    cmId: this.cmId,\n                    readingStrategy: this.offline ? CoreSitesReadingStrategy.PREFER_CACHE : CoreSitesReadingStrategy.ONLY_NETWORK,\n                    siteId: this.currentSite.getId(),\n                });\n            } else if (typeof response.jumpto != 'number' || response.jumpto == this.currentPage) {\n                // Errors on questions, stay in page.\n            } else {\n                // Invalidate access information so user will see home page updated (continue form).\n                await AddonModFeedback.invalidateResumePageData(this.feedback!.id);\n\n                CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n                    feedbackId: this.feedback!.id,\n                    tab: 'overview',\n                    offline: this.completedOffline,\n                });\n\n                // Fetch the new page.\n                await this.fetchFeedbackPageData(response.jumpto);\n            }\n        } catch (message) {\n            CoreDomUtils.showErrorModalDefault(message, 'core.course.errorgetmodule', true);\n        } finally {\n            this.feedbackLoaded = true;\n        }\n    }\n\n    /**\n     * Function to link implemented features.\n     */\n    showAnalysis(): void {\n        if (this.fromIndex) {\n            // Previous page is the index page, go back.\n            CoreEvents.trigger(AddonModFeedbackProvider.FORM_SUBMITTED, {\n                feedbackId: this.feedback!.id,\n                tab: 'analysis',\n                offline: this.completedOffline,\n            });\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        CoreNavigator.navigateToSitePath(AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.cmId}`, {\n            params: {\n                module: this.module,\n                tab: 'analysis',\n            },\n        });\n    }\n\n    /**\n     * Function to go to the page after submit.\n     *\n     * @returns Promise resolved when done.\n     */\n    async continue(): Promise<void> {\n        if (!this.siteAfterSubmit) {\n            return CoreNavigator.back();\n        }\n\n        const modal = await CoreDomUtils.showModalLoading();\n\n        try {\n            await CoreSites.visitLink(this.siteAfterSubmit, { siteId: this.currentSite.id });\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n    /**\n     * Log event in analytics.\n     */\n    protected analyticsLogEvent(): void {\n        if (!this.feedback) {\n            return;\n        }\n\n        if (this.preview) {\n            CoreAnalytics.logEvent({\n                type: CoreAnalyticsEventType.VIEW_ITEM,\n                ws: 'mod_feedback_get_items',\n                name: this.feedback.name,\n                data: { id: this.feedback.id, category: 'feedback' },\n                url: `/mod/feedback/print.php?id=${this.cmId}&courseid=${this.courseId}`,\n            });\n\n            return;\n        }\n\n        let url = '/mod/feedback/complete.php';\n        if (!this.completed) {\n            url += `?id=${this.cmId}` + (this.currentPage ? `&gopage=${this.currentPage}` : '') + `&courseid=${this.courseId}`;\n        }\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: this.completed ? 'mod_feedback_get_feedback_access_information' : 'mod_feedback_get_page_items',\n            name: this.feedback.name,\n            data: { id: this.feedback.id, category: 'feedback', page: this.currentPage },\n            url,\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.onlineObserver.unsubscribe();\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1>\n                <core-format-text [text]=\"title\" contextLevel=\"module\" [contextInstanceId]=\"cmId\" [courseId]=\"courseId\" />\n            </h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content class=\"limited-width\">\n    <core-loading [hideUntil]=\"feedbackLoaded\" class=\"has-spacer\">\n        <ng-container *ngIf=\"items && items.length\">\n            <ion-list class=\"ion-no-margin has-spacer\">\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.mod_feedback.mode' | translate }}</p>\n                        <p *ngIf=\"access!.isanonymous\">{{ 'addon.mod_feedback.anonymous' | translate }}</p>\n                        <p *ngIf=\"!access!.isanonymous\">{{ 'addon.mod_feedback.non_anonymous' | translate }}</p>\n                    </ion-label>\n                </ion-item>\n                <ng-container *ngFor=\"let item of items\">\n                    <core-spacer *ngIf=\"item.typ === 'pagebreak'\" />\n                    <ng-container *ngIf=\"item.typ !== 'pagebreak'\">\n                        <ion-item class=\"ion-text-wrap addon-mod_feedback-item\" [color]=\"item.dependitem > 0 ? 'light' : ''\"\n                            [class.core-danger-item]=\"item.isEmpty || item.hasError\">\n                            <ion-label [position]=\"item.hasTextInput ? 'stacked' : undefined\">\n                                <p *ngIf=\"item.name\" [core-mark-required]=\"item.required\">\n                                    <span *ngIf=\"feedback!.autonumbering && item.itemnumber\">{{item.itemnumber}}. </span>\n                                    <core-format-text [component]=\"component\" [componentId]=\"cmId\" [text]=\"item.name\" contextLevel=\"module\"\n                                        [contextInstanceId]=\"cmId\" [courseId]=\"courseId\" [wsNotFiltered]=\"true\" />\n                                    <span *ngIf=\"item.postfix\" class=\"addon-mod_feedback-postfix\">{{item.postfix}}</span>\n                                </p>\n                                <p *ngIf=\"item.templateName === 'label'\">\n                                    <core-format-text [component]=\"component\" [componentId]=\"cmId\" [text]=\"item.presentation\"\n                                        contextLevel=\"module\" [contextInstanceId]=\"cmId\" [wsNotFiltered]=\"true\" [courseId]=\"courseId\" />\n                                </p>\n                            </ion-label>\n\n                            <ion-input *ngIf=\"item.templateName === 'textfield'\" type=\"text\" [(ngModel)]=\"item.value\" autocorrect=\"off\"\n                                name=\"{{item.typ}}_{{item.id}}\" maxlength=\"{{item.length}}\" [required]=\"item.required\" />\n\n                            <ng-container *ngIf=\"item.templateName === 'numeric'\">\n                                <ion-input type=\"number\" [(ngModel)]=\"item.value\" name=\"{{item.typ}}_{{item.id}}\"\n                                    [required]=\"item.required\" />\n                                <ion-text *ngIf=\"item.hasError\" color=\"danger\" class=\"addon-mod_feedback-item-error\">\n                                    {{ 'addon.mod_feedback.numberoutofrange' | translate }} [{{item.rangefrom}}\n                                    <span *ngIf=\"item.rangefrom && item.rangeto\">, </span>{{item.rangeto}}]\n                                </ion-text>\n                            </ng-container>\n\n                            <ion-textarea *ngIf=\"item.templateName === 'textarea'\" [required]=\"item.required\"\n                                name=\"{{item.typ}}_{{item.id}}\" [(ngModel)]=\"item.value\" />\n\n                            <ion-select *ngIf=\"item.templateName === 'multichoice-d'\" [required]=\"item.required\"\n                                name=\"{{item.typ}}_{{item.id}}\" [(ngModel)]=\"item.value\" interface=\"action-sheet\"\n                                [cancelText]=\"'core.cancel' | translate\" [interfaceOptions]=\"{header: item.name}\">\n                                <ion-select-option *ngFor=\"let option of item.choices\" [value]=\"option.value\">\n                                    <core-format-text [component]=\"component\" [componentId]=\"cmId\" [text]=\"option.label\"\n                                        contextLevel=\"module\" [contextInstanceId]=\"cmId\" [wsNotFiltered]=\"true\" [courseId]=\"courseId\" />\n                                </ion-select-option>\n                            </ion-select>\n                        </ion-item>\n\n                        <ion-radio-group *ngIf=\"item.templateName === 'multichoice-r'\" [(ngModel)]=\"item.value\" [required]=\"item.required\"\n                            name=\"{{item.typ}}_{{item.id}}\">\n                            <ion-item *ngFor=\"let option of item.choices\">\n                                <ion-label>\n                                    <core-format-text [component]=\"component\" [componentId]=\"cmId\" [text]=\"option.label\"\n                                        contextLevel=\"module\" [contextInstanceId]=\"cmId\" [wsNotFiltered]=\"true\" [courseId]=\"courseId\" />\n                                </ion-label>\n                                <ion-radio slot=\"start\" [value]=\"option.value\" />\n                            </ion-item>\n                        </ion-radio-group>\n\n                        <ng-container *ngIf=\"item.templateName === 'multichoice-c'\">\n                            <ion-item *ngFor=\"let option of item.choices\">\n                                <ion-label>\n                                    <core-format-text [component]=\"component\" [componentId]=\"cmId\" [text]=\"option.label\"\n                                        contextLevel=\"module\" [contextInstanceId]=\"cmId\" [wsNotFiltered]=\"true\" [courseId]=\"courseId\" />\n                                </ion-label>\n                                <ion-checkbox [required]=\"item.required\" name=\"{{item.typ}}_{{item.id}}\" [(ngModel)]=\"option.checked\"\n                                    value=\"option.value\" />\n                            </ion-item>\n                        </ng-container>\n\n                        <ng-container *ngIf=\"item.templateName === 'captcha'\">\n                            <core-recaptcha *ngIf=\"!preview && !offline\" [publicKey]=\"item.captcha.recaptchapublickey\" [model]=\"item\"\n                                modelValueName=\"value\" />\n                            <div *ngIf=\"!preview && (!item.captcha || offline)\" class=\"core-warning-card\">\n                                <ion-item>\n                                    <ion-icon name=\"fas-triangle-exclamation\" slot=\"start\" aria-hidden=\"true\" />\n                                    <ion-label>{{ 'addon.mod_feedback.captchaofflinewarning' | translate }}</ion-label>\n                                </ion-item>\n                            </div>\n                        </ng-container>\n                    </ng-container>\n                </ng-container>\n\n                <ion-row class=\"ion-align-items-center spacer-top\" *ngIf=\"!preview\">\n                    <ion-col *ngIf=\"hasPrevPage\">\n                        <ion-button expand=\"block\" fill=\"outline\" (click)=\"gotoPage(true)\" class=\"ion-text-wrap\">\n                            <ion-icon name=\"fas-chevron-left\" slot=\"start\" aria-hidden=\"true\" />\n                            {{ 'core.previous' | translate }}\n                        </ion-button>\n                    </ion-col>\n                    <ion-col *ngIf=\"hasNextPage\">\n                        <ion-button expand=\"block\" (click)=\"gotoPage(false)\" class=\"ion-text-wrap\">\n                            {{ 'core.next' | translate }}\n                            <ion-icon name=\"fas-chevron-right\" slot=\"end\" aria-hidden=\"true\" />\n                        </ion-button>\n                    </ion-col>\n                    <ion-col *ngIf=\"!hasNextPage\">\n                        <ion-button expand=\"block\" (click)=\"gotoPage(false)\" class=\"ion-text-wrap\">\n                            {{ 'core.submit' | translate }}\n                        </ion-button>\n                    </ion-col>\n                </ion-row>\n            </ion-list>\n        </ng-container>\n\n        <ion-card class=\"core-success-card\" *ngIf=\"completed\">\n            <ion-item class=\"ion-text-wrap\">\n                <ion-icon name=\"fas-check\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>\n                    <p *ngIf=\"!completionPageContents && !completedOffline\">\n                        {{ 'addon.mod_feedback.this_feedback_is_already_submitted' | translate }}\n                    </p>\n                    <p *ngIf=\"!completionPageContents && completedOffline\">\n                        {{ 'addon.mod_feedback.feedback_submitted_offline' | translate }}\n                    </p>\n                    <core-format-text *ngIf=\"completionPageContents\" [component]=\"component\" componentId=\"componentId\"\n                        [text]=\"completionPageContents\" contextLevel=\"module\" [contextInstanceId]=\"cmId\" [courseId]=\"courseId\" />\n                </ion-label>\n            </ion-item>\n        </ion-card>\n\n        <div collapsible-footer *ngIf=\"feedbackLoaded && completed\" slot=\"fixed\" appearOnBottom>\n            <div class=\"list-item-limited-width adaptable-buttons-row\">\n                <ion-button expand=\"block\" fill=\"outline\" (click)=\"showAnalysis()\" class=\"ion-text-wrap ion-margin\"\n                    *ngIf=\"access!.canviewanalysis\">\n                    <ion-icon name=\"fas-chart-bar\" slot=\"start\" aria-hidden=\"true\" />\n                    {{ 'addon.mod_feedback.completed_feedbacks' | translate }}\n                </ion-button>\n                <ion-button expand=\"block\" (click)=\"continue()\" class=\"ion-text-wrap ion-margin\">\n                    <ng-container *ngIf=\"!siteAfterSubmit\">{{ 'core.continue' | translate }}</ng-container>\n                    <ng-container *ngIf=\"siteAfterSubmit\">{{ 'core.course.nextactivity' | translate }}</ng-container>\n                </ion-button>\n            </div>\n        </div>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}