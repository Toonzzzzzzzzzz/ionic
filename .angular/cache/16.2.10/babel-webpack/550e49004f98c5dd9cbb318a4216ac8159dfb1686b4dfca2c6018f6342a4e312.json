{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreDom } from '@singletons/dom';\nimport * as i0 from \"@angular/core\";\n/**\n * Directive to move ion-fab components as direct children of the nearest ion-content.\n *\n * Example usage:\n *\n * <ion-fab core-fab>\n */\nexport class CoreFabDirective {\n  constructor(el) {\n    this.initialPaddingBottom = 0;\n    this.element = el.nativeElement;\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.slotPromise = CoreDom.slotOnContent(_this.element);\n      yield _this.slotPromise;\n      _this.content = _this.element.closest('ion-content');\n      if (!_this.content) {\n        return;\n      }\n      // Add space at the bottom to let the user see the whole content.\n      _this.initialPaddingBottom = parseFloat(_this.content.style.getPropertyValue('--padding-bottom') || '0');\n      yield _this.calculatePlace();\n      CoreDom.onElementSlot(_this.element, () => {\n        _this.calculatePlace();\n      });\n    })();\n  }\n  /**\n   * Calculate the height of the footer.\n   */\n  calculatePlace() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this2.content) {\n        return;\n      }\n      const initialHeight = _this2.element.getBoundingClientRect().height || 56;\n      _this2.content.style.setProperty('--padding-bottom', _this2.initialPaddingBottom + initialHeight + 'px');\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$slotPromise;\n    this.element.remove();\n    if (this.content) {\n      this.content.style.setProperty('--padding-bottom', this.initialPaddingBottom + 'px');\n    }\n    (_this$slotPromise = this.slotPromise) === null || _this$slotPromise === void 0 || _this$slotPromise.cancel();\n  }\n}\n_class = CoreFabDirective;\n_class.ɵfac = function CoreFabDirective_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n_class.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: _class,\n  selectors: [[\"ion-fab\", \"core-fab\", \"\"]]\n});","map":{"version":3,"names":["CoreDom","CoreFabDirective","constructor","el","initialPaddingBottom","element","nativeElement","ngOnInit","_this","_asyncToGenerator","slotPromise","slotOnContent","content","closest","parseFloat","style","getPropertyValue","calculatePlace","onElementSlot","_this2","initialHeight","getBoundingClientRect","height","setProperty","ngOnDestroy","_this$slotPromise","remove","cancel","i0","ɵɵdirectiveInject","ElementRef","selectors"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/directives/fab.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Directive, ElementRef, OnDestroy, OnInit } from '@angular/core';\nimport { CoreCancellablePromise } from '@classes/cancellable-promise';\nimport { CoreDom } from '@singletons/dom';\n\n/**\n * Directive to move ion-fab components as direct children of the nearest ion-content.\n *\n * Example usage:\n *\n * <ion-fab core-fab>\n */\n@Directive({\n    selector: 'ion-fab[core-fab]',\n})\nexport class CoreFabDirective implements OnInit, OnDestroy {\n\n    protected element: HTMLElement;\n    protected content?: HTMLIonContentElement | null;\n    protected initialPaddingBottom = 0;\n    protected slotPromise?: CoreCancellablePromise<void>;\n\n    constructor(el: ElementRef) {\n        this.element = el.nativeElement;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.slotPromise = CoreDom.slotOnContent(this.element);\n        await this.slotPromise;\n\n        this.content = this.element.closest('ion-content');\n\n        if (!this.content) {\n            return;\n        }\n\n        // Add space at the bottom to let the user see the whole content.\n        this.initialPaddingBottom = parseFloat(this.content.style.getPropertyValue('--padding-bottom') || '0');\n\n        await this.calculatePlace();\n\n        CoreDom.onElementSlot(this.element, () => {\n            this.calculatePlace();\n        });\n    }\n\n    /**\n     * Calculate the height of the footer.\n     */\n    protected async calculatePlace(): Promise<void> {\n        if (!this.content) {\n            return;\n        }\n\n        const initialHeight = this.element.getBoundingClientRect().height || 56;\n        this.content.style.setProperty('--padding-bottom', this.initialPaddingBottom + initialHeight + 'px');\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.element.remove();\n\n        if (this.content) {\n            this.content.style.setProperty('--padding-bottom', this.initialPaddingBottom + 'px');\n        }\n        this.slotPromise?.cancel();\n    }\n\n}\n"],"mappings":";;AAgBA,SAASA,OAAO,QAAQ,iBAAiB;;AAEzC;;;;;;;AAUA,OAAM,MAAOC,gBAAgB;EAOzBC,YAAYC,EAAc;IAHhB,KAAAC,oBAAoB,GAAG,CAAC;IAI9B,IAAI,CAACC,OAAO,GAAGF,EAAE,CAACG,aAAa;EACnC;EAEA;;;EAGMC,QAAQA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACVD,KAAI,CAACE,WAAW,GAAGV,OAAO,CAACW,aAAa,CAACH,KAAI,CAACH,OAAO,CAAC;MACtD,MAAMG,KAAI,CAACE,WAAW;MAEtBF,KAAI,CAACI,OAAO,GAAGJ,KAAI,CAACH,OAAO,CAACQ,OAAO,CAAC,aAAa,CAAC;MAElD,IAAI,CAACL,KAAI,CAACI,OAAO,EAAE;QACf;;MAGJ;MACAJ,KAAI,CAACJ,oBAAoB,GAAGU,UAAU,CAACN,KAAI,CAACI,OAAO,CAACG,KAAK,CAACC,gBAAgB,CAAC,kBAAkB,CAAC,IAAI,GAAG,CAAC;MAEtG,MAAMR,KAAI,CAACS,cAAc,EAAE;MAE3BjB,OAAO,CAACkB,aAAa,CAACV,KAAI,CAACH,OAAO,EAAE,MAAK;QACrCG,KAAI,CAACS,cAAc,EAAE;MACzB,CAAC,CAAC;IAAC;EACP;EAEA;;;EAGgBA,cAAcA,CAAA;IAAA,IAAAE,MAAA;IAAA,OAAAV,iBAAA;MAC1B,IAAI,CAACU,MAAI,CAACP,OAAO,EAAE;QACf;;MAGJ,MAAMQ,aAAa,GAAGD,MAAI,CAACd,OAAO,CAACgB,qBAAqB,EAAE,CAACC,MAAM,IAAI,EAAE;MACvEH,MAAI,CAACP,OAAO,CAACG,KAAK,CAACQ,WAAW,CAAC,kBAAkB,EAAEJ,MAAI,CAACf,oBAAoB,GAAGgB,aAAa,GAAG,IAAI,CAAC;IAAC;EACzG;EAEA;;;EAGAI,WAAWA,CAAA;IAAA,IAAAC,iBAAA;IACP,IAAI,CAACpB,OAAO,CAACqB,MAAM,EAAE;IAErB,IAAI,IAAI,CAACd,OAAO,EAAE;MACd,IAAI,CAACA,OAAO,CAACG,KAAK,CAACQ,WAAW,CAAC,kBAAkB,EAAE,IAAI,CAACnB,oBAAoB,GAAG,IAAI,CAAC;;IAExF,CAAAqB,iBAAA,OAAI,CAACf,WAAW,cAAAe,iBAAA,eAAhBA,iBAAA,CAAkBE,MAAM,EAAE;EAC9B;;SAxDS1B,gBAAgB;;mBAAhBA,MAAgB,EAAA2B,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,UAAA;AAAA;;QAAhB7B,MAAgB;EAAA8B,SAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}