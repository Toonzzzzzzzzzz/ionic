{"ast":null,"code":"// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n/**\n * Database variables for CoreEditorOffline service.\n */\nexport const DRAFT_TABLE = 'editor_draft';\nexport const SITE_SCHEMA = {\n  name: 'CoreEditorProvider',\n  version: 1,\n  tables: [{\n    name: DRAFT_TABLE,\n    columns: [{\n      name: 'contextlevel',\n      type: 'TEXT'\n    }, {\n      name: 'contextinstanceid',\n      type: 'INTEGER'\n    }, {\n      name: 'elementid',\n      type: 'TEXT'\n    }, {\n      name: 'extraparams',\n      type: 'TEXT'\n    }, {\n      name: 'drafttext',\n      type: 'TEXT',\n      notNull: true\n    }, {\n      name: 'pageinstance',\n      type: 'TEXT',\n      notNull: true\n    }, {\n      name: 'timecreated',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'timemodified',\n      type: 'INTEGER',\n      notNull: true\n    }, {\n      name: 'originalcontent',\n      type: 'TEXT'\n    }],\n    primaryKeys: ['contextlevel', 'contextinstanceid', 'elementid', 'extraparams']\n  }]\n};","map":{"version":3,"names":["DRAFT_TABLE","SITE_SCHEMA","name","version","tables","columns","type","notNull","primaryKeys"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/editor/services/database/editor.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreSiteSchema } from '@services/sites';\n\n/**\n * Database variables for CoreEditorOffline service.\n */\nexport const DRAFT_TABLE = 'editor_draft';\nexport const SITE_SCHEMA: CoreSiteSchema = {\n    name: 'CoreEditorProvider',\n    version: 1,\n    tables: [\n        {\n            name: DRAFT_TABLE,\n            columns: [\n                {\n                    name: 'contextlevel',\n                    type: 'TEXT',\n                },\n                {\n                    name: 'contextinstanceid',\n                    type: 'INTEGER',\n                },\n                {\n                    name: 'elementid',\n                    type: 'TEXT',\n                },\n                {\n                    name: 'extraparams', // Moodle web uses a page hash built with URL. App will use some params stringified.\n                    type: 'TEXT',\n                },\n                {\n                    name: 'drafttext',\n                    type: 'TEXT',\n                    notNull: true,\n                },\n                {\n                    name: 'pageinstance',\n                    type: 'TEXT',\n                    notNull: true,\n                },\n                {\n                    name: 'timecreated',\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'timemodified',\n                    type: 'INTEGER',\n                    notNull: true,\n                },\n                {\n                    name: 'originalcontent',\n                    type: 'TEXT',\n                },\n            ],\n            primaryKeys: ['contextlevel', 'contextinstanceid', 'elementid', 'extraparams'],\n        },\n    ],\n};\n\n/**\n * Primary data to identify a stored draft.\n */\nexport type CoreEditorDraftPrimaryData = {\n    contextlevel: string; // Context level.\n    contextinstanceid: number; // The instance ID related to the context.\n    elementid: string; // Element ID.\n    extraparams: string; // Extra params stringified.\n};\n\n/**\n * Draft data stored.\n */\nexport type CoreEditorDraft = CoreEditorDraftPrimaryData & {\n    drafttext?: string; // Draft text stored.\n    pageinstance?: string; // Unique identifier to prevent storing data from several sources at the same time.\n    timecreated?: number; // Time created.\n    timemodified?: number; // Time modified.\n    originalcontent?: string; // Original content of the editor.\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;;AAGA,OAAO,MAAMA,WAAW,GAAG,cAAc;AACzC,OAAO,MAAMC,WAAW,GAAmB;EACvCC,IAAI,EAAE,oBAAoB;EAC1BC,OAAO,EAAE,CAAC;EACVC,MAAM,EAAE,CACJ;IACIF,IAAI,EAAEF,WAAW;IACjBK,OAAO,EAAE,CACL;MACIH,IAAI,EAAE,cAAc;MACpBI,IAAI,EAAE;KACT,EACD;MACIJ,IAAI,EAAE,mBAAmB;MACzBI,IAAI,EAAE;KACT,EACD;MACIJ,IAAI,EAAE,WAAW;MACjBI,IAAI,EAAE;KACT,EACD;MACIJ,IAAI,EAAE,aAAa;MACnBI,IAAI,EAAE;KACT,EACD;MACIJ,IAAI,EAAE,WAAW;MACjBI,IAAI,EAAE,MAAM;MACZC,OAAO,EAAE;KACZ,EACD;MACIL,IAAI,EAAE,cAAc;MACpBI,IAAI,EAAE,MAAM;MACZC,OAAO,EAAE;KACZ,EACD;MACIL,IAAI,EAAE,aAAa;MACnBI,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE;KACZ,EACD;MACIL,IAAI,EAAE,cAAc;MACpBI,IAAI,EAAE,SAAS;MACfC,OAAO,EAAE;KACZ,EACD;MACIL,IAAI,EAAE,iBAAiB;MACvBI,IAAI,EAAE;KACT,CACJ;IACDE,WAAW,EAAE,CAAC,cAAc,EAAE,mBAAmB,EAAE,WAAW,EAAE,aAAa;GAChF;CAER"},"metadata":{},"sourceType":"module","externalDependencies":[]}