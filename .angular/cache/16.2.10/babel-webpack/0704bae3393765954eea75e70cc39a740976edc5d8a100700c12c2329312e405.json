{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreError } from '@classes/errors/error';\nimport { CoreTabsComponent } from '@components/tabs/tabs';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreTimeUtils } from '@services/utils/time';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEvents } from '@singletons/events';\nimport { AddonModFeedback, AddonModFeedbackProvider } from '../../services/feedback';\nimport { AddonModFeedbackOffline } from '../../services/feedback-offline';\nimport { AddonModFeedbackSync, AddonModFeedbackSyncProvider } from '../../services/feedback-sync';\nimport { AddonModFeedbackModuleHandlerService } from '../../services/handlers/module';\nimport { AddonModFeedbackPrefetchHandler } from '../../services/handlers/prefetch';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@features/course/pages/contents/contents\";\nfunction AddonModFeedbackIndexComponent_ng_template_9_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModFeedbackIndexComponent_ng_template_9_ng_container_0_Template, 1, 0, \"ng-container\", 12);\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext();\n    const _r6 = i0.ɵɵreference(16);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r6);\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_ng_container_0_Template, 1, 0, \"ng-container\", 12);\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n    const _r8 = i0.ɵɵreference(18);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r8);\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r14 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-tab\", 13);\n    i0.ɵɵlistener(\"ionSelect\", function AddonModFeedbackIndexComponent_core_tab_10_Template_core_tab_ionSelect_0_listener() {\n      i0.ɵɵrestoreView(_r14);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.tabChanged(\"analysis\"));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_Template, 1, 1, \"ng-template\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_feedback.analysis\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_ng_container_0_Template, 1, 0, \"ng-container\", 12);\n  }\n  if (rf & 2) {\n    i0.ɵɵnextContext(2);\n    const _r8 = i0.ɵɵreference(18);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r8);\n  }\n}\nfunction AddonModFeedbackIndexComponent_core_tab_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"core-tab\", 13);\n    i0.ɵɵlistener(\"ionSelect\", function AddonModFeedbackIndexComponent_core_tab_11_Template_core_tab_ionSelect_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ctx_r17 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r17.tabChanged(\"analysis\"));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_Template, 1, 1, \"ng-template\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(1, 1, \"addon.mod_feedback.completed_feedbacks\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_div_1_ion_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r23 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 20);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackIndexComponent_div_12_div_1_ion_button_1_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r23);\n      const ctx_r22 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r22.gotoAnswerQuestions(true));\n    });\n    i0.ɵɵelement(1, \"ion-icon\", 21);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"addon.mod_feedback.preview\"), \" \");\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.complete_the_form\"), \" \");\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.continue_the_form\"), \" \");\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 22);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const ctx_r26 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r26.gotoAnswerQuestions());\n    });\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_1_Template, 3, 3, \"ng-container\", 23);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_2_Template, 3, 3, \"ng-container\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r21.goPage);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r21.goPage);\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_div_12_div_1_ion_button_1_Template, 4, 3, \"ion-button\", 18);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_Template, 3, 2, \"ion-button\", 19);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r19 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.access.canedititems || ctx_r19.access.canviewreports);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r19.access.cancomplete && ctx_r19.access.cansubmit && ctx_r19.access.isopen);\n  }\n}\nfunction AddonModFeedbackIndexComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_div_12_div_1_Template, 3, 2, \"div\", 15);\n    i0.ɵɵelement(2, \"core-course-module-navigation\", 16);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.access && (ctx_r3.access.canedititems || ctx_r3.access.canviewreports || !ctx_r3.access.isempty));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"courseId\", ctx_r3.courseId)(\"currentModuleId\", ctx_r3.module.id);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_ion_item_13_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r31 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 31);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_ion_item_13_Template_ion_item_click_0_listener() {\n      i0.ɵɵrestoreView(_r31);\n      const ctx_r30 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r30.openNonRespondents());\n    });\n    i0.ɵɵelementStart(1, \"ion-label\")(2, \"p\", 26);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_feedback.show_nonrespondents\"));\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    count: a0\n  };\n};\nfunction AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r33 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"core-group-selector\", 24);\n    i0.ɵɵlistener(\"selectedChange\", function AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template_core_group_selector_selectedChange_1_listener($event) {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r32 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r32.group = $event);\n    })(\"selectedChange\", function AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template_core_group_selector_selectedChange_1_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r34 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r34.setGroup(ctx_r34.group));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(2, \"ion-item\", 25);\n    i0.ɵɵlistener(\"click\", function AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template_ion_item_click_2_listener() {\n      i0.ɵɵrestoreView(_r33);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r35.openAttempts());\n    });\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 26);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-badge\", 0)(8, \"span\", 27);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"span\", 28);\n    i0.ɵɵtext(11);\n    i0.ɵɵpipe(12, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(13, AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_ion_item_13_Template, 5, 4, \"ion-item\", 29);\n    i0.ɵɵelementStart(14, \"ion-item\", 30)(15, \"ion-label\")(16, \"p\", 26);\n    i0.ɵɵtext(17);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(19, \"ion-badge\", 0)(20, \"span\", 27);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(22, \"span\", 28);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r28 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"groupInfo\", ctx_r28.groupInfo)(\"selected\", ctx_r28.group)(\"courseId\", ctx_r28.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵclassProp(\"hide-detail\", !(ctx_r28.access.canviewreports && ctx_r28.completedCount > 0));\n    i0.ɵɵproperty(\"detail\", true)(\"button\", ctx_r28.access.canviewreports && ctx_r28.completedCount > 0);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 14, \"addon.mod_feedback.completed_feedbacks\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r28.completedCount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(12, 16, \"addon.mod_feedback.completedfeedbackscountdescription\", i0.ɵɵpureFunction1(24, _c0, ctx_r28.completedCount)), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r28.access.isanonymous && ctx_r28.access.canviewreports);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(18, 19, \"addon.mod_feedback.questions\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r28.itemsCount);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(24, 21, \"addon.mod_feedback.questionscountdescription\", i0.ɵɵpureFunction1(26, _c0, ctx_r28.itemsCount)), \" \");\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template, 25, 28, \"ion-list\", 23);\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.access && ctx_r5.access.canviewanalysis && !ctx_r5.access.isempty);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_card_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 34)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 35);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.mod_feedback.feedback_is_not_open\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_card_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 36)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 37);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 1, \"addon.mod_feedback.this_feedback_is_already_submitted\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 30)(1, \"ion-label\")(2, \"p\", 26);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r40 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_feedback.feedbackopen\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r40.overview.openTimeReadable);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 30)(1, \"ion-label\")(2, \"p\", 26);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r41 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.mod_feedback.feedbackclose\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r41.overview.closeTimeReadable);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 30)(1, \"ion-label\")(2, \"p\", 26);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(5, \"core-format-text\", 39);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r42 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 6, \"addon.mod_feedback.page_after_submit\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r42.component)(\"componentId\", ctx_r42.componentId)(\"text\", ctx_r42.feedback.page_after_submit)(\"contextInstanceId\", ctx_r42.module.id)(\"courseId\", ctx_r42.courseId);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.anonymous\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"addon.mod_feedback.non_anonymous\"));\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\", 30)(2, \"ion-label\")(3, \"p\", 26);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_6_Template, 3, 3, \"p\", 23);\n    i0.ɵɵtemplate(7, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_7_Template, 3, 3, \"p\", 23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r43 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 3, \"addon.mod_feedback.mode\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r43.access.isanonymous);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r43.access.isanonymous);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_1_Template, 7, 4, \"ion-item\", 38);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_2_Template, 7, 4, \"ion-item\", 38);\n    i0.ɵɵtemplate(3, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_3_Template, 6, 8, \"ion-item\", 38);\n    i0.ɵɵtemplate(4, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_Template, 8, 5, \"ng-container\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r39 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r39.access.canedititems && ctx_r39.overview.timeopen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r39.access.canedititems && ctx_r39.overview.timeclose);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r39.access.canedititems && ctx_r39.feedback && ctx_r39.feedback.page_after_submit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r39.access.isempty);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"core-loading\", 3);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template, 1, 0, \"ng-container\", 12);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_15_ion_card_2_Template, 6, 3, \"ion-card\", 32);\n    i0.ɵɵtemplate(3, AddonModFeedbackIndexComponent_ng_template_15_ion_card_3_Template, 6, 3, \"ion-card\", 33);\n    i0.ɵɵtemplate(4, AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_Template, 5, 4, \"ion-list\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext();\n    const _r4 = i0.ɵɵreference(14);\n    i0.ɵɵproperty(\"hideUntil\", ctx_r7.tabsLoaded.overview);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.access && ctx_r7.access.cancomplete && !ctx_r7.access.isopen);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.access && ctx_r7.access.cancomplete && ctx_r7.access.isopen && !ctx_r7.access.cansubmit);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.access && (ctx_r7.access.canedititems || ctx_r7.access.canviewreports || !ctx_r7.access.isempty));\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainer(0);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 34)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 35);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r48 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(ctx_r48.warning);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r56 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(data_r56);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ul\");\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template, 2, 1, \"li\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"p\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵpipe(6, \"number\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r51 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r51.data);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate2(\"\", i0.ɵɵpipeBind1(5, 3, \"addon.mod_feedback.average\"), \": \", i0.ɵɵpipeBind2(6, 5, item_r51.average, \"1.2-2\"), \"\");\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const data_r59 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(data_r59);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template, 2, 1, \"li\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const data_r59 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", data_r59);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ul\");\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template, 2, 1, \"ng-container\", 44);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r51 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", item_r51.data);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵpipe(3, \"number\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r51 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate2(\" \", i0.ɵɵpipeBind1(2, 2, \"addon.mod_feedback.average\"), \": \", i0.ɵɵpipeBind2(3, 4, item_r51.average, \"1.2-2\"), \" \");\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"core-chart\", 45);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template, 4, 7, \"p\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const item_r51 = i0.ɵɵnextContext().$implicit;\n    const ctx_r54 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"type\", item_r51.chartType)(\"data\", item_r51.chartData)(\"labels\", item_r51.labels)(\"contextInstanceId\", ctx_r54.module.id)(\"wsNotFiltered\", true)(\"courseId\", ctx_r54.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r51.average);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 41)(1, \"ion-label\")(2, \"p\", 26);\n    i0.ɵɵtext(3);\n    i0.ɵɵelement(4, \"core-format-text\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 39);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerStart(7, 42);\n    i0.ɵɵtemplate(8, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template, 7, 8, \"ng-container\", 43);\n    i0.ɵɵtemplate(9, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template, 3, 1, \"ng-container\", 43);\n    i0.ɵɵtemplate(10, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template, 3, 7, \"ng-container\", 43);\n    i0.ɵɵelementContainerEnd();\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r51 = ctx.$implicit;\n    const ctx_r50 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", item_r51.num, \". \");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"component\", ctx_r50.component)(\"componentId\", ctx_r50.componentId)(\"text\", item_r51.name)(\"contextInstanceId\", ctx_r50.module.id)(\"courseId\", ctx_r50.courseId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"component\", ctx_r50.component)(\"componentId\", ctx_r50.componentId)(\"text\", item_r51.label)(\"contextInstanceId\", ctx_r50.module.id)(\"courseId\", ctx_r50.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitch\", item_r51.templateName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"numeric\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"list\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngSwitchCase\", \"chart\");\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_Template, 11, 15, \"ion-item\", 40);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r49 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r49.items);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_card_1_Template, 5, 1, \"ion-card\", 32);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_Template, 2, 1, \"ion-list\", 23);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r47 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r47.warning);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r47.items && ctx_r47.items.length);\n  }\n}\nfunction AddonModFeedbackIndexComponent_ng_template_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"core-loading\", 3);\n    i0.ɵɵtemplate(1, AddonModFeedbackIndexComponent_ng_template_17_ng_container_1_Template, 1, 0, \"ng-container\", 12);\n    i0.ɵɵtemplate(2, AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_Template, 3, 2, \"ng-container\", 23);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext();\n    const _r4 = i0.ɵɵreference(14);\n    i0.ɵɵproperty(\"hideUntil\", ctx_r9.tabsLoaded.analysis);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngTemplateOutlet\", _r4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r9.access && (ctx_r9.access.canedititems || !ctx_r9.access.isempty));\n  }\n}\n/**\n * Component that displays a feedback index page.\n */\nexport class AddonModFeedbackIndexComponent extends CoreCourseModuleMainActivityComponent {\n  constructor(content, courseContentsPage) {\n    var _this;\n    super('AddonModLessonIndexComponent', content, courseContentsPage);\n    _this = this;\n    this.content = content;\n    this.tab = 'overview';\n    this.group = 0;\n    this.component = AddonModFeedbackProvider.COMPONENT;\n    this.pluginName = 'feedback';\n    this.items = [];\n    this.showAnalysis = false;\n    this.tabsReady = false;\n    this.completedCount = 0;\n    this.itemsCount = 0;\n    this.overview = {\n      timeopen: 0,\n      openTimeReadable: '',\n      timeclose: 0,\n      closeTimeReadable: ''\n    };\n    this.tabsLoaded = {\n      overview: false,\n      analysis: false\n    };\n    this.syncEventName = AddonModFeedbackSyncProvider.AUTO_SYNCED;\n    this.checkCompletionAfterLog = false;\n    // Listen for form submit events.\n    this.submitObserver = CoreEvents.on(AddonModFeedbackProvider.FORM_SUBMITTED, /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (data) {\n        if (!_this.feedback || data.feedbackId != _this.feedback.id) {\n          return;\n        }\n        _this.tabsLoaded.analysis = false;\n        _this.tabsLoaded.overview = false;\n        _this.showLoading = true;\n        // Prefetch data if needed.\n        if (!data.offline && _this.isPrefetched()) {\n          yield CoreUtils.ignoreErrors(AddonModFeedbackSync.prefetchAfterUpdate(AddonModFeedbackPrefetchHandler.instance, _this.module, _this.courseId));\n        }\n        // Load the right tab.\n        if (data.tab != _this.tab) {\n          _this.tabChanged(data.tab);\n        } else {\n          _this.loadContent(true);\n        }\n      });\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }(), this.siteId);\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this2 = this;\n    return _asyncToGenerator(function* () {\n      _superprop_getNgOnInit().call(_this2);\n      try {\n        yield _this2.loadContent(false, true);\n      } finally {\n        _this2.tabsReady = true;\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  logActivity() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this3.feedback) {\n        return; // Shouldn't happen.\n      }\n\n      yield AddonModFeedback.logView(_this3.feedback.id);\n      _this3.callAnalyticsLogEvent();\n    })();\n  }\n  /**\n   * Call analytics.\n   */\n  callAnalyticsLogEvent() {\n    this.analyticsLogEvent('mod_feedback_view_feedback', {\n      url: this.tab === 'analysis' ? `/mod/feedback/analysis.php?id=${this.module.id}` : undefined\n    });\n  }\n  /**\n   * @inheritdoc\n   */\n  invalidateContent() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      promises.push(AddonModFeedback.invalidateFeedbackData(_this4.courseId));\n      if (_this4.feedback) {\n        promises.push(AddonModFeedback.invalidateFeedbackAccessInformationData(_this4.feedback.id));\n        promises.push(AddonModFeedback.invalidateAnalysisData(_this4.feedback.id));\n        promises.push(CoreGroups.invalidateActivityAllowedGroups(_this4.feedback.coursemodule));\n        promises.push(CoreGroups.invalidateActivityGroupMode(_this4.feedback.coursemodule));\n        promises.push(AddonModFeedback.invalidateResumePageData(_this4.feedback.id));\n      }\n      _this4.tabsLoaded.analysis = false;\n      _this4.tabsLoaded.overview = false;\n      yield Promise.all(promises);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  isRefreshSyncNeeded(syncEventData) {\n    if (this.feedback && syncEventData.feedbackId == this.feedback.id) {\n      var _this$content;\n      // Refresh the data.\n      (_this$content = this.content) === null || _this$content === void 0 || _this$content.scrollToTop();\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @inheritdoc\n   */\n  fetchContent(refresh, sync = false, showErrors = false) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this5.feedback = yield AddonModFeedback.getFeedback(_this5.courseId, _this5.module.id);\n        _this5.description = _this5.feedback.intro;\n        _this5.dataRetrieved.emit(_this5.feedback);\n        if (sync) {\n          // Try to synchronize the feedback.\n          yield _this5.syncActivity(showErrors);\n        }\n        // Check if there are answers stored in offline.\n        _this5.access = yield AddonModFeedback.getFeedbackAccessInformation(_this5.feedback.id, {\n          cmId: _this5.module.id\n        });\n        _this5.showAnalysis = (_this5.access.canviewreports || _this5.access.canviewanalysis) && !_this5.access.isempty;\n        _this5.firstSelectedTab = 0;\n        if (!_this5.showAnalysis) {\n          _this5.tab = 'overview';\n        }\n        if (_this5.tab == 'analysis') {\n          _this5.firstSelectedTab = 1;\n          return yield _this5.fetchFeedbackAnalysisData();\n        }\n        yield _this5.fetchFeedbackOverviewData();\n      } finally {\n        if (_this5.feedback) {\n          // Check if there are responses stored in offline.\n          _this5.hasOffline = yield AddonModFeedbackOffline.hasFeedbackOfflineData(_this5.feedback.id);\n        }\n        if (_this5.tabsReady) {\n          var _this5$tabsComponent;\n          // Make sure the right tab is selected.\n          (_this5$tabsComponent = _this5.tabsComponent) === null || _this5$tabsComponent === void 0 || _this5$tabsComponent.selectTab(_this5.tab || 'overview');\n        }\n      }\n    })();\n  }\n  /**\n   * Convenience function to get feedback overview data.\n   *\n   * @returns Resolved when done.\n   */\n  fetchFeedbackOverviewData() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      const promises = [];\n      if (_this6.access.cancomplete && _this6.access.cansubmit && _this6.access.isopen) {\n        promises.push(AddonModFeedback.getResumePage(_this6.feedback.id, {\n          cmId: _this6.module.id\n        }).then(goPage => {\n          _this6.goPage = goPage > 0 ? goPage : undefined;\n          return;\n        }));\n      }\n      if (_this6.access.canedititems) {\n        _this6.overview.timeopen = (_this6.feedback.timeopen || 0) * 1000;\n        _this6.overview.openTimeReadable = _this6.overview.timeopen ? CoreTimeUtils.userDate(_this6.overview.timeopen) : '';\n        _this6.overview.timeclose = (_this6.feedback.timeclose || 0) * 1000;\n        _this6.overview.closeTimeReadable = _this6.overview.timeclose ? CoreTimeUtils.userDate(_this6.overview.timeclose) : '';\n      }\n      if (_this6.access.canviewanalysis) {\n        // Get groups (only for teachers).\n        promises.push(_this6.fetchGroupInfo(_this6.module.id));\n      }\n      try {\n        yield Promise.all(promises);\n      } finally {\n        _this6.tabsLoaded.overview = true;\n      }\n    })();\n  }\n  /**\n   * Convenience function to get feedback analysis data.\n   *\n   * @returns Resolved when done.\n   */\n  fetchFeedbackAnalysisData() {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        if (_this7.access.canviewanalysis) {\n          // Get groups (only for teachers).\n          yield _this7.fetchGroupInfo(_this7.module.id);\n        } else {\n          _this7.tabChanged('overview');\n        }\n      } finally {\n        _this7.tabsLoaded.analysis = true;\n      }\n    })();\n  }\n  /**\n   * Fetch Group info data.\n   *\n   * @param cmId Course module ID.\n   * @returns Resolved when done.\n   */\n  fetchGroupInfo(cmId) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      _this8.groupInfo = yield CoreGroups.getActivityGroupInfo(cmId);\n      yield _this8.setGroup(CoreGroups.validateGroupId(_this8.group, _this8.groupInfo));\n    })();\n  }\n  /**\n   * Parse the analysis info to show the info correctly formatted.\n   *\n   * @param item Item to parse.\n   * @returns Parsed item.\n   */\n  parseAnalysisInfo(item) {\n    switch (item.typ) {\n      case 'numeric':\n        item.average = item.data.reduce((prev, current) => prev + Number(current), 0) / item.data.length;\n        item.templateName = 'numeric';\n        break;\n      case 'info':\n        item.data = item.data.map(dataItem => {\n          const parsed = CoreTextUtils.parseJSON(dataItem);\n          return parsed.show !== undefined ? parsed.show : false;\n        }).filter(dataItem => dataItem);\n      // Filter false entries.\n      case 'textfield':\n      case 'textarea':\n        item.templateName = 'list';\n        break;\n      case 'multichoicerated':\n      case 'multichoice':\n        {\n          const parsedData = item.data.map(dataItem => {\n            const parsed = CoreTextUtils.parseJSON(dataItem);\n            return parsed.answertext !== undefined ? parsed : false;\n          }).filter(dataItem => dataItem); // Filter false entries.\n          // Format labels.\n          item.labels = parsedData.map(dataItem => {\n            dataItem.quotient = (dataItem.quotient * 100).toFixed(2);\n            let label = '';\n            if (dataItem.value !== undefined) {\n              label = '(' + dataItem.value + ') ';\n            }\n            label += dataItem.answertext;\n            label += Number(dataItem.quotient) > 0 ? ' (' + dataItem.quotient + '%)' : '';\n            return label;\n          });\n          item.chartData = parsedData.map(dataItem => Number(dataItem.answercount));\n          if (item.typ === 'multichoicerated') {\n            item.average = parsedData.reduce((prev, current) => prev + Number(current.avg), 0.0);\n          }\n          const subtype = item.presentation.charAt(0);\n          // Display bar chart if there are no answers to avoid division by 0 error.\n          const single = subtype !== 'c' && item.chartData.some(count => count > 0);\n          item.chartType = single ? 'doughnut' : 'bar';\n          item.templateName = 'chart';\n          break;\n        }\n      default:\n        break;\n    }\n    return item;\n  }\n  /**\n   * Function to go to the questions form.\n   *\n   * @param preview Preview or edit the form.\n   */\n  gotoAnswerQuestions(preview = false) {\n    CoreNavigator.navigateToSitePath(AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/form`, {\n      params: {\n        preview,\n        fromIndex: true\n      }\n    });\n  }\n  /**\n   * User entered the page that contains the component.\n   */\n  ionViewDidEnter() {\n    var _this$tabsComponent;\n    super.ionViewDidEnter();\n    (_this$tabsComponent = this.tabsComponent) === null || _this$tabsComponent === void 0 || _this$tabsComponent.ionViewDidEnter();\n  }\n  /**\n   * User left the page that contains the component.\n   */\n  ionViewDidLeave() {\n    var _this$tabsComponent2;\n    super.ionViewDidLeave();\n    (_this$tabsComponent2 = this.tabsComponent) === null || _this$tabsComponent2 === void 0 || _this$tabsComponent2.ionViewDidLeave();\n  }\n  /**\n   * Open non respondents page.\n   */\n  openNonRespondents() {\n    CoreNavigator.navigateToSitePath(AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/nonrespondents`, {\n      params: {\n        group: this.group\n      }\n    });\n  }\n  /**\n   * Open attempts page.\n   */\n  openAttempts() {\n    if (!this.access.canviewreports || this.completedCount <= 0) {\n      return;\n    }\n    CoreNavigator.navigateToSitePath(AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/attempts`, {\n      params: {\n        group: this.group\n      }\n    });\n  }\n  /**\n   * Tab changed, fetch content again.\n   *\n   * @param tabName New tab name.\n   */\n  tabChanged(tabName) {\n    const tabHasChanged = this.tab !== undefined && this.tab !== tabName;\n    this.tab = tabName;\n    if (!this.tabsLoaded[this.tab]) {\n      this.loadContent(false, false, true);\n    }\n    if (tabHasChanged) {\n      this.callAnalyticsLogEvent();\n    }\n  }\n  /**\n   * Set group to see the analysis.\n   *\n   * @param groupId Group ID.\n   * @returns Resolved when done.\n   */\n  setGroup(groupId) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      _this9.group = groupId;\n      const analysis = yield AddonModFeedback.getAnalysis(_this9.feedback.id, {\n        groupId,\n        cmId: _this9.module.id\n      });\n      _this9.completedCount = analysis.completedcount;\n      _this9.itemsCount = analysis.itemscount;\n      if (_this9.tab == 'analysis') {\n        var _analysis$warnings;\n        let num = 1;\n        _this9.items = analysis.itemsdata.map(itemData => {\n          const item = Object.assign(itemData.item, {\n            data: itemData.data,\n            num: num++\n          });\n          // Move data inside item.\n          if (item.data && item.data.length) {\n            return _this9.parseAnalysisInfo(item);\n          }\n          return false;\n        }).filter(item => item);\n        _this9.warning = '';\n        if ((_analysis$warnings = analysis.warnings) !== null && _analysis$warnings !== void 0 && _analysis$warnings.length) {\n          const warning = analysis.warnings.find(warning => warning.warningcode == 'insufficientresponsesforthisgroup');\n          _this9.warning = warning === null || warning === void 0 ? void 0 : warning.message;\n        }\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  sync() {\n    if (!this.feedback) {\n      throw new CoreError('Cannot sync without a feedback.');\n    }\n    return AddonModFeedbackSync.syncFeedback(this.feedback.id);\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$submitObserver;\n    super.ngOnDestroy();\n    (_this$submitObserver = this.submitObserver) === null || _this$submitObserver === void 0 || _this$submitObserver.off();\n  }\n}\n_class = AddonModFeedbackIndexComponent;\n_class.ɵfac = function AddonModFeedbackIndexComponent_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.IonContent), i0.ɵɵdirectiveInject(i2.CoreCourseContentsPage, 8));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-feedback-index\"]],\n  viewQuery: function AddonModFeedbackIndexComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreTabsComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.tabsComponent = _t.first);\n    }\n  },\n  inputs: {\n    tab: \"tab\",\n    group: \"group\"\n  },\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 19,\n  vars: 18,\n  consts: [[\"slot\", \"end\"], [\"fill\", \"clear\", \"aria-haspopup\", \"true\", 3, \"click\"], [\"name\", \"fas-circle-info\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [3, \"module\", \"description\", \"component\", \"componentId\", \"courseId\", \"hasDataToSync\", \"completionChanged\"], [3, \"hideUntil\", \"selectedIndex\"], [\"id\", \"overview\", 3, \"title\", \"ionSelect\"], [\"id\", \"analysis\", 3, \"title\", \"ionSelect\", 4, \"ngIf\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\", 4, \"ngIf\"], [\"basicInfo\", \"\"], [\"tabOverview\", \"\"], [\"tabAnalysis\", \"\"], [4, \"ngTemplateOutlet\"], [\"id\", \"analysis\", 3, \"title\", \"ionSelect\"], [\"collapsible-footer\", \"\", \"slot\", \"fixed\"], [\"class\", \"list-item-limited-width adaptable-buttons-row\", 4, \"ngIf\"], [3, \"courseId\", \"currentModuleId\"], [1, \"list-item-limited-width\", \"adaptable-buttons-row\"], [\"expand\", \"block\", \"fill\", \"outline\", \"class\", \"ion-margin ion-text-wrap\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"class\", \"ion-margin ion-text-wrap\", 3, \"click\", 4, \"ngIf\"], [\"expand\", \"block\", \"fill\", \"outline\", 1, \"ion-margin\", \"ion-text-wrap\", 3, \"click\"], [\"name\", \"fas-magnifying-glass\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 1, \"ion-margin\", \"ion-text-wrap\", 3, \"click\"], [4, \"ngIf\"], [3, \"groupInfo\", \"selected\", \"courseId\", \"selectedChange\"], [1, \"ion-text-wrap\", 3, \"detail\", \"button\", \"click\"], [1, \"item-heading\"], [\"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngIf\"], [1, \"ion-text-wrap\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"class\", \"core-info-card\", 4, \"ngIf\"], [\"class\", \"core-success-card\", 4, \"ngIf\"], [1, \"core-info-card\"], [\"name\", \"fas-circle-question\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [1, \"core-success-card\"], [\"name\", \"fas-check\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"courseId\"], [\"class\", \"ion-text-wrap core-analysis\", 4, \"ngFor\", \"ngForOf\"], [1, \"ion-text-wrap\", \"core-analysis\"], [3, \"ngSwitch\"], [4, \"ngSwitchCase\"], [4, \"ngFor\", \"ngForOf\"], [\"height\", \"300\", \"contextLevel\", \"module\", 3, \"type\", \"data\", \"labels\", \"contextInstanceId\", \"wsNotFiltered\", \"courseId\"]],\n  template: function AddonModFeedbackIndexComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"core-navbar-buttons\", 0)(1, \"ion-button\", 1);\n      i0.ɵɵlistener(\"click\", function AddonModFeedbackIndexComponent_Template_ion_button_click_1_listener() {\n        return ctx.openModuleSummary();\n      });\n      i0.ɵɵpipe(2, \"translate\");\n      i0.ɵɵelement(3, \"ion-icon\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(4, \"core-loading\", 3)(5, \"core-course-module-info\", 4);\n      i0.ɵɵlistener(\"completionChanged\", function AddonModFeedbackIndexComponent_Template_core_course_module_info_completionChanged_5_listener() {\n        return ctx.onCompletionChange();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"core-tabs\", 5)(7, \"core-tab\", 6);\n      i0.ɵɵlistener(\"ionSelect\", function AddonModFeedbackIndexComponent_Template_core_tab_ionSelect_7_listener() {\n        return ctx.tabChanged(\"overview\");\n      });\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵtemplate(9, AddonModFeedbackIndexComponent_ng_template_9_Template, 1, 1, \"ng-template\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(10, AddonModFeedbackIndexComponent_core_tab_10_Template, 3, 3, \"core-tab\", 7);\n      i0.ɵɵtemplate(11, AddonModFeedbackIndexComponent_core_tab_11_Template, 3, 3, \"core-tab\", 7);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(12, AddonModFeedbackIndexComponent_div_12_Template, 3, 3, \"div\", 8);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(13, AddonModFeedbackIndexComponent_ng_template_13_Template, 1, 1, \"ng-template\", null, 9, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(15, AddonModFeedbackIndexComponent_ng_template_15_Template, 5, 5, \"ng-template\", null, 10, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(17, AddonModFeedbackIndexComponent_ng_template_17_Template, 3, 3, \"ng-template\", null, 11, i0.ɵɵtemplateRefExtractor);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 14, \"core.info\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hideUntil\", !ctx.showLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"module\", ctx.module)(\"description\", ctx.description)(\"component\", ctx.component)(\"componentId\", ctx.componentId)(\"courseId\", ctx.courseId)(\"hasDataToSync\", ctx.hasOffline);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hideUntil\", ctx.tabsReady)(\"selectedIndex\", ctx.firstSelectedTab);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"title\", i0.ɵɵpipeBind1(8, 16, \"addon.mod_feedback.overview\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAnalysis && ctx.access && ctx.access.canviewreports);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showAnalysis && ctx.access && !ctx.access.canviewreports);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.showLoading);\n    }\n  },\n  encapsulation: 2\n});","map":{"version":3,"names":["CoreError","CoreTabsComponent","CoreCourseModuleMainActivityComponent","CoreGroups","CoreNavigator","CoreTextUtils","CoreTimeUtils","CoreUtils","CoreEvents","AddonModFeedback","AddonModFeedbackProvider","AddonModFeedbackOffline","AddonModFeedbackSync","AddonModFeedbackSyncProvider","AddonModFeedbackModuleHandlerService","AddonModFeedbackPrefetchHandler","i0","ɵɵelementContainer","ɵɵtemplate","AddonModFeedbackIndexComponent_ng_template_9_ng_container_0_Template","ɵɵproperty","_r6","AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_ng_container_0_Template","_r8","ɵɵelementStart","ɵɵlistener","AddonModFeedbackIndexComponent_core_tab_10_Template_core_tab_ionSelect_0_listener","ɵɵrestoreView","_r14","ctx_r13","ɵɵnextContext","ɵɵresetView","tabChanged","AddonModFeedbackIndexComponent_core_tab_10_ng_template_2_Template","ɵɵelementEnd","ɵɵpipeBind1","AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_ng_container_0_Template","AddonModFeedbackIndexComponent_core_tab_11_Template_core_tab_ionSelect_0_listener","_r18","ctx_r17","AddonModFeedbackIndexComponent_core_tab_11_ng_template_2_Template","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_1_Template_ion_button_click_0_listener","_r23","ctx_r22","gotoAnswerQuestions","ɵɵelement","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","ɵɵelementContainerStart","ɵɵelementContainerEnd","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_Template_ion_button_click_0_listener","_r27","ctx_r26","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_1_Template","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_ng_container_2_Template","ctx_r21","goPage","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_1_Template","AddonModFeedbackIndexComponent_div_12_div_1_ion_button_2_Template","ctx_r19","access","canedititems","canviewreports","cancomplete","cansubmit","isopen","AddonModFeedbackIndexComponent_div_12_div_1_Template","ctx_r3","isempty","courseId","module","id","AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_ion_item_13_Template_ion_item_click_0_listener","_r31","ctx_r30","openNonRespondents","ɵɵtextInterpolate","AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template_core_group_selector_selectedChange_1_listener","$event","_r33","ctx_r32","group","ctx_r34","setGroup","AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template_ion_item_click_2_listener","ctx_r35","openAttempts","AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_ion_item_13_Template","ctx_r28","groupInfo","ɵɵclassProp","completedCount","ɵɵpipeBind2","ɵɵpureFunction1","_c0","isanonymous","itemsCount","AddonModFeedbackIndexComponent_ng_template_13_ion_list_0_Template","ctx_r5","canviewanalysis","ctx_r40","overview","openTimeReadable","ctx_r41","closeTimeReadable","ctx_r42","component","componentId","feedback","page_after_submit","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_6_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_p_7_Template","ctx_r43","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_1_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_2_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ion_item_3_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_ng_container_4_Template","ctx_r39","timeopen","timeclose","AddonModFeedbackIndexComponent_ng_template_15_ng_container_1_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_card_2_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_card_3_Template","AddonModFeedbackIndexComponent_ng_template_15_ion_list_4_Template","ctx_r7","tabsLoaded","_r4","ctx_r48","warning","data_r56","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_li_2_Template","item_r51","data","ɵɵtextInterpolate2","average","data_r59","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_li_1_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_ng_container_2_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_p_2_Template","chartType","chartData","labels","ctx_r54","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_8_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_9_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_ng_container_10_Template","num","ctx_r50","name","label","templateName","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_ion_item_1_Template","ctx_r49","items","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_card_1_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_ion_list_2_Template","ctx_r47","length","AddonModFeedbackIndexComponent_ng_template_17_ng_container_1_Template","AddonModFeedbackIndexComponent_ng_template_17_ng_container_2_Template","ctx_r9","analysis","AddonModFeedbackIndexComponent","constructor","content","courseContentsPage","_this","this","tab","COMPONENT","pluginName","showAnalysis","tabsReady","syncEventName","AUTO_SYNCED","checkCompletionAfterLog","submitObserver","on","FORM_SUBMITTED","_ref","_asyncToGenerator","feedbackId","showLoading","offline","isPrefetched","ignoreErrors","prefetchAfterUpdate","instance","loadContent","_x","apply","arguments","siteId","ngOnInit","_superprop_getNgOnInit","_this2","call","logActivity","_this3","logView","callAnalyticsLogEvent","analyticsLogEvent","url","undefined","invalidateContent","_this4","promises","push","invalidateFeedbackData","invalidateFeedbackAccessInformationData","invalidateAnalysisData","invalidateActivityAllowedGroups","coursemodule","invalidateActivityGroupMode","invalidateResumePageData","Promise","all","isRefreshSyncNeeded","syncEventData","_this$content","scrollToTop","fetchContent","refresh","sync","showErrors","_this5","getFeedback","description","intro","dataRetrieved","emit","syncActivity","getFeedbackAccessInformation","cmId","firstSelectedTab","fetchFeedbackAnalysisData","fetchFeedbackOverviewData","hasOffline","hasFeedbackOfflineData","_this5$tabsComponent","tabsComponent","selectTab","_this6","getResumePage","then","userDate","fetchGroupInfo","_this7","_this8","getActivityGroupInfo","validateGroupId","parseAnalysisInfo","item","typ","reduce","prev","current","Number","map","dataItem","parsed","parseJSON","show","filter","parsedData","answertext","quotient","toFixed","value","answercount","avg","subtype","presentation","charAt","single","some","count","preview","navigateToSitePath","PAGE_NAME","params","fromIndex","ionViewDidEnter","_this$tabsComponent","ionViewDidLeave","_this$tabsComponent2","tabName","tabHasChanged","groupId","_this9","getAnalysis","completedcount","itemscount","_analysis$warnings","itemsdata","itemData","Object","assign","warnings","find","warningcode","message","syncFeedback","ngOnDestroy","_this$submitObserver","off","ɵɵdirectiveInject","i1","IonContent","i2","CoreCourseContentsPage","selectors","viewQuery","AddonModFeedbackIndexComponent_Query","rf","ctx","AddonModFeedbackIndexComponent_Template_ion_button_click_1_listener","openModuleSummary","AddonModFeedbackIndexComponent_Template_core_course_module_info_completionChanged_5_listener","onCompletionChange","AddonModFeedbackIndexComponent_Template_core_tab_ionSelect_7_listener","AddonModFeedbackIndexComponent_ng_template_9_Template","AddonModFeedbackIndexComponent_core_tab_10_Template","AddonModFeedbackIndexComponent_core_tab_11_Template","AddonModFeedbackIndexComponent_div_12_Template","AddonModFeedbackIndexComponent_ng_template_13_Template","ɵɵtemplateRefExtractor","AddonModFeedbackIndexComponent_ng_template_15_Template","AddonModFeedbackIndexComponent_ng_template_17_Template","ɵɵattribute"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/feedback/components/index/index.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/feedback/components/index/addon-mod-feedback-index.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, Input, Optional, ViewChild, OnInit, OnDestroy } from '@angular/core';\nimport { CoreError } from '@classes/errors/error';\nimport { CoreTabsComponent } from '@components/tabs/tabs';\nimport { CoreCourseModuleMainActivityComponent } from '@features/course/classes/main-activity-component';\nimport { CoreCourseContentsPage } from '@features/course/pages/contents/contents';\nimport { IonContent } from '@ionic/angular';\nimport { CoreGroupInfo, CoreGroups } from '@services/groups';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreTimeUtils } from '@services/utils/time';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport {\n    AddonModFeedback,\n    AddonModFeedbackGetFeedbackAccessInformationWSResponse,\n    AddonModFeedbackProvider,\n    AddonModFeedbackWSFeedback,\n    AddonModFeedbackWSItem,\n} from '../../services/feedback';\nimport { AddonModFeedbackOffline } from '../../services/feedback-offline';\nimport {\n    AddonModFeedbackAutoSyncData,\n    AddonModFeedbackSync,\n    AddonModFeedbackSyncProvider,\n    AddonModFeedbackSyncResult,\n} from '../../services/feedback-sync';\nimport { AddonModFeedbackModuleHandlerService } from '../../services/handlers/module';\nimport { AddonModFeedbackPrefetchHandler } from '../../services/handlers/prefetch';\n\n/**\n * Component that displays a feedback index page.\n */\n@Component({\n    selector: 'addon-mod-feedback-index',\n    templateUrl: 'addon-mod-feedback-index.html',\n})\nexport class AddonModFeedbackIndexComponent extends CoreCourseModuleMainActivityComponent implements OnInit, OnDestroy {\n\n    @ViewChild(CoreTabsComponent) tabsComponent?: CoreTabsComponent;\n\n    @Input() tab = 'overview';\n    @Input() group = 0;\n\n    component = AddonModFeedbackProvider.COMPONENT;\n    pluginName = 'feedback';\n    feedback?: AddonModFeedbackWSFeedback;\n    goPage?: number;\n    items: AddonModFeedbackItem[] = [];\n    warning?: string;\n    showAnalysis = false;\n    tabsReady = false;\n    firstSelectedTab?: number;\n    access?: AddonModFeedbackGetFeedbackAccessInformationWSResponse;\n    completedCount = 0;\n    itemsCount = 0;\n    groupInfo?: CoreGroupInfo;\n\n    overview = {\n        timeopen: 0,\n        openTimeReadable: '',\n        timeclose: 0,\n        closeTimeReadable: '',\n    };\n\n    tabsLoaded = {\n        overview: false,\n        analysis: false,\n    };\n\n    protected submitObserver: CoreEventObserver;\n    protected syncEventName = AddonModFeedbackSyncProvider.AUTO_SYNCED;\n    protected checkCompletionAfterLog = false;\n\n    constructor(\n        protected content?: IonContent,\n        @Optional() courseContentsPage?: CoreCourseContentsPage,\n    ) {\n        super('AddonModLessonIndexComponent', content, courseContentsPage);\n\n        // Listen for form submit events.\n        this.submitObserver = CoreEvents.on(AddonModFeedbackProvider.FORM_SUBMITTED, async (data) => {\n            if (!this.feedback || data.feedbackId != this.feedback.id) {\n                return;\n            }\n\n            this.tabsLoaded.analysis = false;\n            this.tabsLoaded.overview = false;\n            this.showLoading = true;\n\n            // Prefetch data if needed.\n            if (!data.offline && this.isPrefetched()) {\n                await CoreUtils.ignoreErrors(AddonModFeedbackSync.prefetchAfterUpdate(\n                    AddonModFeedbackPrefetchHandler.instance,\n                    this.module,\n                    this.courseId,\n                ));\n            }\n\n            // Load the right tab.\n            if (data.tab != this.tab) {\n                this.tabChanged(data.tab);\n            } else {\n                this.loadContent(true);\n            }\n        }, this.siteId);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        super.ngOnInit();\n\n        try {\n            await this.loadContent(false, true);\n        } finally {\n            this.tabsReady = true;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async logActivity(): Promise<void> {\n        if (!this.feedback) {\n            return; // Shouldn't happen.\n        }\n\n        await AddonModFeedback.logView(this.feedback.id);\n\n        this.callAnalyticsLogEvent();\n    }\n\n    /**\n     * Call analytics.\n     */\n    protected callAnalyticsLogEvent(): void {\n        this.analyticsLogEvent('mod_feedback_view_feedback', {\n            url: this.tab === 'analysis' ? `/mod/feedback/analysis.php?id=${this.module.id}` : undefined,\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async invalidateContent(): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        promises.push(AddonModFeedback.invalidateFeedbackData(this.courseId));\n        if (this.feedback) {\n            promises.push(AddonModFeedback.invalidateFeedbackAccessInformationData(this.feedback.id));\n            promises.push(AddonModFeedback.invalidateAnalysisData(this.feedback.id));\n            promises.push(CoreGroups.invalidateActivityAllowedGroups(this.feedback.coursemodule));\n            promises.push(CoreGroups.invalidateActivityGroupMode(this.feedback.coursemodule));\n            promises.push(AddonModFeedback.invalidateResumePageData(this.feedback.id));\n        }\n\n        this.tabsLoaded.analysis = false;\n        this.tabsLoaded.overview = false;\n\n        await Promise.all(promises);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected isRefreshSyncNeeded(syncEventData: AddonModFeedbackAutoSyncData): boolean {\n        if (this.feedback && syncEventData.feedbackId == this.feedback.id) {\n            // Refresh the data.\n            this.content?.scrollToTop();\n\n            return true;\n        }\n\n        return false;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async fetchContent(refresh?: boolean, sync = false, showErrors = false): Promise<void> {\n        try {\n            this.feedback = await AddonModFeedback.getFeedback(this.courseId, this.module.id);\n\n            this.description = this.feedback.intro;\n            this.dataRetrieved.emit(this.feedback);\n\n            if (sync) {\n                // Try to synchronize the feedback.\n                await this.syncActivity(showErrors);\n            }\n\n            // Check if there are answers stored in offline.\n            this.access = await AddonModFeedback.getFeedbackAccessInformation(this.feedback.id, { cmId: this.module.id });\n\n            this.showAnalysis = (this.access.canviewreports || this.access.canviewanalysis) && !this.access.isempty;\n            this.firstSelectedTab = 0;\n            if (!this.showAnalysis) {\n                this.tab = 'overview';\n            }\n\n            if (this.tab == 'analysis') {\n                this.firstSelectedTab = 1;\n\n                return await this.fetchFeedbackAnalysisData();\n            }\n\n            await this.fetchFeedbackOverviewData();\n        } finally {\n            if (this.feedback) {\n                // Check if there are responses stored in offline.\n                this.hasOffline = await AddonModFeedbackOffline.hasFeedbackOfflineData(this.feedback.id);\n            }\n\n            if (this.tabsReady) {\n                // Make sure the right tab is selected.\n                this.tabsComponent?.selectTab(this.tab || 'overview');\n            }\n        }\n    }\n\n    /**\n     * Convenience function to get feedback overview data.\n     *\n     * @returns Resolved when done.\n     */\n    protected async fetchFeedbackOverviewData(): Promise<void> {\n        const promises: Promise<void>[] = [];\n\n        if (this.access!.cancomplete && this.access!.cansubmit && this.access!.isopen) {\n            promises.push(AddonModFeedback.getResumePage(this.feedback!.id, { cmId: this.module.id }).then((goPage) => {\n                this.goPage = goPage > 0 ? goPage : undefined;\n\n                return;\n            }));\n        }\n\n        if (this.access!.canedititems) {\n            this.overview.timeopen = (this.feedback!.timeopen || 0) * 1000;\n            this.overview.openTimeReadable = this.overview.timeopen ? CoreTimeUtils.userDate(this.overview.timeopen) : '';\n            this.overview.timeclose = (this.feedback!.timeclose || 0) * 1000;\n            this.overview.closeTimeReadable = this.overview.timeclose ? CoreTimeUtils.userDate(this.overview.timeclose) : '';\n        }\n        if (this.access!.canviewanalysis) {\n            // Get groups (only for teachers).\n            promises.push(this.fetchGroupInfo(this.module.id));\n        }\n\n        try {\n            await Promise.all(promises);\n        } finally {\n            this.tabsLoaded.overview = true;\n        }\n    }\n\n    /**\n     * Convenience function to get feedback analysis data.\n     *\n     * @returns Resolved when done.\n     */\n    protected async fetchFeedbackAnalysisData(): Promise<void> {\n        try {\n            if (this.access!.canviewanalysis) {\n                // Get groups (only for teachers).\n                await this.fetchGroupInfo(this.module.id);\n            } else {\n                this.tabChanged('overview');\n            }\n\n        } finally {\n            this.tabsLoaded.analysis = true;\n        }\n    }\n\n    /**\n     * Fetch Group info data.\n     *\n     * @param cmId Course module ID.\n     * @returns Resolved when done.\n     */\n    protected async fetchGroupInfo(cmId: number): Promise<void> {\n        this.groupInfo = await CoreGroups.getActivityGroupInfo(cmId);\n\n        await this.setGroup(CoreGroups.validateGroupId(this.group, this.groupInfo));\n    }\n\n    /**\n     * Parse the analysis info to show the info correctly formatted.\n     *\n     * @param item Item to parse.\n     * @returns Parsed item.\n     */\n    protected parseAnalysisInfo(item: AddonModFeedbackItem): AddonModFeedbackItem {\n        switch (item.typ) {\n            case 'numeric':\n                item.average = item.data.reduce((prev, current) => prev + Number(current), 0) / item.data.length;\n                item.templateName = 'numeric';\n                break;\n\n            case 'info':\n                item.data = <string[]> item.data.map((dataItem) => {\n                    const parsed = <Record<string, string>> CoreTextUtils.parseJSON(dataItem);\n\n                    return parsed.show !== undefined ? parsed.show : false;\n                }).filter((dataItem) => dataItem); // Filter false entries.\n\n            case 'textfield':\n            case 'textarea':\n                item.templateName = 'list';\n                break;\n\n            case 'multichoicerated':\n            case 'multichoice': {\n                const parsedData = <Record<string, string | number>[]> item.data.map((dataItem) => {\n                    const parsed = <Record<string, string | number>> CoreTextUtils.parseJSON(dataItem);\n\n                    return parsed.answertext !== undefined ? parsed : false;\n                }).filter((dataItem) => dataItem); // Filter false entries.\n\n                // Format labels.\n                item.labels = parsedData.map((dataItem) => {\n                    dataItem.quotient = (<number> dataItem.quotient * 100).toFixed(2);\n                    let label = '';\n\n                    if (dataItem.value !== undefined) {\n                        label = '(' + dataItem.value + ') ';\n                    }\n                    label += dataItem.answertext;\n                    label += Number(dataItem.quotient) > 0 ? ' (' + dataItem.quotient + '%)' : '';\n\n                    return label;\n                });\n\n                item.chartData = parsedData.map((dataItem) => Number(dataItem.answercount));\n\n                if (item.typ === 'multichoicerated') {\n                    item.average = parsedData.reduce((prev, current) => prev + Number(current.avg), 0.0);\n                }\n\n                const subtype = item.presentation.charAt(0);\n\n                // Display bar chart if there are no answers to avoid division by 0 error.\n                const single = subtype !== 'c' && item.chartData.some((count) => count > 0);\n                item.chartType = single ? 'doughnut' : 'bar';\n                item.templateName = 'chart';\n                break;\n            }\n\n            default:\n                break;\n        }\n\n        return item;\n    }\n\n    /**\n     * Function to go to the questions form.\n     *\n     * @param preview Preview or edit the form.\n     */\n    gotoAnswerQuestions(preview: boolean = false): void {\n        CoreNavigator.navigateToSitePath(\n            AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/form`,\n            {\n                params: {\n                    preview,\n                    fromIndex: true,\n                },\n            },\n        );\n    }\n\n    /**\n     * User entered the page that contains the component.\n     */\n    ionViewDidEnter(): void {\n        super.ionViewDidEnter();\n\n        this.tabsComponent?.ionViewDidEnter();\n    }\n\n    /**\n     * User left the page that contains the component.\n     */\n    ionViewDidLeave(): void {\n        super.ionViewDidLeave();\n\n        this.tabsComponent?.ionViewDidLeave();\n    }\n\n    /**\n     * Open non respondents page.\n     */\n    openNonRespondents(): void {\n        CoreNavigator.navigateToSitePath(\n            AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/nonrespondents`,\n            {\n                params: {\n                    group: this.group,\n                },\n            },\n        );\n    }\n\n    /**\n     * Open attempts page.\n     */\n    openAttempts(): void {\n        if (!this.access!.canviewreports || this.completedCount <= 0) {\n            return;\n        }\n\n        CoreNavigator.navigateToSitePath(\n            AddonModFeedbackModuleHandlerService.PAGE_NAME + `/${this.courseId}/${this.module.id}/attempts`,\n            {\n                params: {\n                    group: this.group,\n                },\n            },\n        );\n    }\n\n    /**\n     * Tab changed, fetch content again.\n     *\n     * @param tabName New tab name.\n     */\n    tabChanged(tabName: string): void {\n        const tabHasChanged = this.tab !== undefined && this.tab !== tabName;\n        this.tab = tabName;\n\n        if (!this.tabsLoaded[this.tab]) {\n            this.loadContent(false, false, true);\n        }\n\n        if (tabHasChanged) {\n            this.callAnalyticsLogEvent();\n        }\n    }\n\n    /**\n     * Set group to see the analysis.\n     *\n     * @param groupId Group ID.\n     * @returns Resolved when done.\n     */\n    async setGroup(groupId: number): Promise<void> {\n        this.group = groupId;\n\n        const analysis = await AddonModFeedback.getAnalysis(this.feedback!.id, { groupId, cmId: this.module.id });\n\n        this.completedCount = analysis.completedcount;\n        this.itemsCount = analysis.itemscount;\n\n        if (this.tab == 'analysis') {\n            let num = 1;\n\n            this.items = <AddonModFeedbackItem[]> analysis.itemsdata.map((itemData) => {\n                const item: AddonModFeedbackItem = Object.assign(itemData.item, {\n                    data: itemData.data,\n                    num: num++,\n                });\n\n                // Move data inside item.\n                if (item.data && item.data.length) {\n                    return this.parseAnalysisInfo(item);\n                }\n\n                return false;\n            }).filter((item) => item);\n\n            this.warning = '';\n            if (analysis.warnings?.length) {\n                const warning = analysis.warnings.find((warning) => warning.warningcode == 'insufficientresponsesforthisgroup');\n                this.warning = warning?.message;\n            }\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected sync(): Promise<AddonModFeedbackSyncResult> {\n        if (!this.feedback) {\n            throw new CoreError('Cannot sync without a feedback.');\n        }\n\n        return AddonModFeedbackSync.syncFeedback(this.feedback.id);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        super.ngOnDestroy();\n        this.submitObserver?.off();\n    }\n\n}\n\ntype AddonModFeedbackItem = AddonModFeedbackWSItem & {\n    data: string[];\n    num: number;\n    templateName?: string;\n    average?: number;\n    labels?: string[];\n    chartData?: number[];\n    chartType?: string;\n};\n","<!-- Buttons to add to the header. -->\n<core-navbar-buttons slot=\"end\">\n    <ion-button fill=\"clear\" (click)=\"openModuleSummary()\" aria-haspopup=\"true\" [attr.aria-label]=\"'core.info' | translate\">\n        <ion-icon name=\"fas-circle-info\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n</core-navbar-buttons>\n\n<!-- Content. -->\n<core-loading [hideUntil]=\"!showLoading\">\n\n    <!-- Activity info. -->\n    <core-course-module-info [module]=\"module\" [description]=\"description\" [component]=\"component\" [componentId]=\"componentId\"\n        [courseId]=\"courseId\" [hasDataToSync]=\"hasOffline\" (completionChanged)=\"onCompletionChange()\" />\n\n    <core-tabs [hideUntil]=\"tabsReady\" [selectedIndex]=\"firstSelectedTab\">\n        <core-tab [title]=\"'addon.mod_feedback.overview' | translate\" id=\"overview\" (ionSelect)=\"tabChanged('overview')\">\n            <ng-template>\n                <ng-container *ngTemplateOutlet=\"tabOverview\" />\n            </ng-template>\n        </core-tab>\n        <core-tab *ngIf=\"showAnalysis && access && access.canviewreports\" id=\"analysis\" [title]=\"'addon.mod_feedback.analysis' | translate\"\n            (ionSelect)=\"tabChanged('analysis')\">\n            <ng-template>\n                <ng-container *ngTemplateOutlet=\"tabAnalysis\" />\n            </ng-template>\n        </core-tab>\n\n        <core-tab *ngIf=\"showAnalysis && access && !access.canviewreports\" id=\"analysis\"\n            [title]=\"'addon.mod_feedback.completed_feedbacks' | translate\" (ionSelect)=\"tabChanged('analysis')\">\n            <ng-template>\n                <ng-container *ngTemplateOutlet=\"tabAnalysis\" />\n            </ng-template>\n        </core-tab>\n    </core-tabs>\n\n    <div collapsible-footer *ngIf=\"!showLoading\" slot=\"fixed\">\n        <div class=\"list-item-limited-width adaptable-buttons-row\"\n            *ngIf=\"access && (access.canedititems || access.canviewreports || !access.isempty)\">\n            <ion-button *ngIf=\"access.canedititems || access.canviewreports\" expand=\"block\" fill=\"outline\"\n                (click)=\"gotoAnswerQuestions(true)\" class=\"ion-margin ion-text-wrap\">\n                <ion-icon name=\"fas-magnifying-glass\" slot=\"start\" aria-hidden=\"true\" />\n                {{ 'addon.mod_feedback.preview' | translate }}\n            </ion-button>\n            <ion-button *ngIf=\"access.cancomplete && access.cansubmit && access.isopen\" expand=\"block\" (click)=\"gotoAnswerQuestions()\"\n                class=\"ion-margin ion-text-wrap\">\n                <ng-container *ngIf=\"!goPage\">\n                    {{ 'addon.mod_feedback.complete_the_form' | translate }}\n                </ng-container>\n                <ng-container *ngIf=\"goPage\">\n                    {{ 'addon.mod_feedback.continue_the_form' | translate }}\n                </ng-container>\n            </ion-button>\n        </div>\n\n        <core-course-module-navigation [courseId]=\"courseId\" [currentModuleId]=\"module.id\" />\n    </div>\n</core-loading>\n\n<ng-template #basicInfo>\n    <ion-list *ngIf=\"access && access.canviewanalysis && !access.isempty\">\n        <core-group-selector [groupInfo]=\"groupInfo\" [(selected)]=\"group\" (selectedChange)=\"setGroup(group)\" [courseId]=\"courseId\" />\n\n        <ion-item class=\"ion-text-wrap\" (click)=\"openAttempts()\" [class.hide-detail]=\"!(access.canviewreports && completedCount > 0)\"\n            [detail]=\"true\" [button]=\"access.canviewreports && completedCount > 0\">\n            <ion-label>\n                <p class=\"item-heading\">{{ 'addon.mod_feedback.completed_feedbacks' | translate }}</p>\n            </ion-label>\n            <ion-badge slot=\"end\">\n                <span aria-hidden=\"true\">{{completedCount}}</span>\n                <span class=\"sr-only\">\n                    {{ 'addon.mod_feedback.completedfeedbackscountdescription' | translate:{count: completedCount} }}\n                </span>\n            </ion-badge>\n        </ion-item>\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"!access.isanonymous && access.canviewreports\" (click)=\"openNonRespondents()\" [detail]=\"true\"\n            button>\n            <ion-label>\n                <p class=\"item-heading\">{{ 'addon.mod_feedback.show_nonrespondents' | translate }}</p>\n            </ion-label>\n        </ion-item>\n        <ion-item class=\"ion-text-wrap\">\n            <ion-label>\n                <p class=\"item-heading\">{{ 'addon.mod_feedback.questions' | translate }}</p>\n            </ion-label>\n            <ion-badge slot=\"end\">\n                <span aria-hidden=\"true\">{{itemsCount}}</span>\n                <span class=\"sr-only\">\n                    {{ 'addon.mod_feedback.questionscountdescription' | translate:{count: itemsCount} }}\n                </span>\n            </ion-badge>\n        </ion-item>\n    </ion-list>\n</ng-template>\n\n<!-- Template to render the overview. -->\n<ng-template #tabOverview>\n    <core-loading [hideUntil]=\"tabsLoaded.overview\">\n        <ng-container *ngTemplateOutlet=\"basicInfo\" />\n\n        <ion-card class=\"core-info-card\" *ngIf=\"access && access.cancomplete && !access.isopen\">\n            <ion-item>\n                <ion-icon name=\"fas-circle-question\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>{{ 'addon.mod_feedback.feedback_is_not_open' | translate }}</ion-label>\n            </ion-item>\n        </ion-card>\n\n        <ion-card class=\"core-success-card\" *ngIf=\"access && access.cancomplete && access.isopen && !access.cansubmit\">\n            <ion-item>\n                <ion-icon name=\"fas-check\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>{{ 'addon.mod_feedback.this_feedback_is_already_submitted' | translate }}</ion-label>\n            </ion-item>\n        </ion-card>\n\n        <ion-list *ngIf=\"access && (access.canedititems || access.canviewreports || !access.isempty)\">\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"access.canedititems && overview.timeopen\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.mod_feedback.feedbackopen' | translate }}</p>\n                    <p>{{overview.openTimeReadable}}</p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"access.canedititems && overview.timeclose\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.mod_feedback.feedbackclose' | translate }}</p>\n                    <p>{{overview.closeTimeReadable}}</p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"access.canedititems && feedback && feedback.page_after_submit\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.mod_feedback.page_after_submit' | translate }}</p>\n                    <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"feedback.page_after_submit\"\n                        contextLevel=\"module\" [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                </ion-label>\n            </ion-item>\n            <ng-container *ngIf=\"!access.isempty\">\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.mod_feedback.mode' | translate }}</p>\n                        <p *ngIf=\"access.isanonymous\">{{ 'addon.mod_feedback.anonymous' | translate }}</p>\n                        <p *ngIf=\"!access.isanonymous\">{{ 'addon.mod_feedback.non_anonymous' | translate }}</p>\n                    </ion-label>\n                </ion-item>\n            </ng-container>\n        </ion-list>\n    </core-loading>\n</ng-template>\n\n<!-- Template to render the analysis. -->\n<ng-template #tabAnalysis>\n    <core-loading [hideUntil]=\"tabsLoaded.analysis\">\n        <ng-container *ngTemplateOutlet=\"basicInfo\" />\n\n        <ng-container *ngIf=\"access && (access.canedititems || !access.isempty)\">\n            <ion-card class=\"core-info-card\" *ngIf=\"warning\">\n                <ion-item>\n                    <ion-icon name=\"fas-circle-question\" slot=\"start\" aria-hidden=\"true\" />\n                    <ion-label>{{ warning }}</ion-label>\n                </ion-item>\n            </ion-card>\n\n            <ion-list *ngIf=\"items && items.length\">\n                <ion-item class=\"ion-text-wrap core-analysis\" *ngFor=\"let item of items\">\n                    <ion-label>\n                        <p class=\"item-heading\">\n                            {{item.num}}. <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"item.name\"\n                                contextLevel=\"module\" [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                        </p>\n                        <p>\n                            <core-format-text [component]=\"component\" [componentId]=\"componentId\" [text]=\"item.label\" contextLevel=\"module\"\n                                [contextInstanceId]=\"module.id\" [courseId]=\"courseId\" />\n                        </p>\n                        <ng-container [ngSwitch]=\"item.templateName\">\n                            <ng-container *ngSwitchCase=\"'numeric'\">\n                                <ul>\n                                    <li *ngFor=\"let data of item.data\">{{ data }}</li>\n                                </ul>\n                                <p>{{ 'addon.mod_feedback.average' | translate }}: {{item.average | number : '1.2-2'}}</p>\n                            </ng-container>\n                            <ng-container *ngSwitchCase=\"'list'\">\n                                <ul>\n                                    <ng-container *ngFor=\"let data of item.data\">\n                                        <li *ngIf=\"data\">{{ data }}</li>\n                                    </ng-container>\n                                </ul>\n                            </ng-container>\n                            <ng-container *ngSwitchCase=\"'chart'\">\n                                <core-chart [type]=\"item.chartType\" [data]=\"item.chartData\" [labels]=\"item.labels\" height=\"300\"\n                                    contextLevel=\"module\" [contextInstanceId]=\"module.id\" [wsNotFiltered]=\"true\" [courseId]=\"courseId\" />\n                                <p *ngIf=\"item.average\">\n                                    {{ 'addon.mod_feedback.average' | translate }}: {{item.average | number : '1.2-2'}}\n                                </p>\n                            </ng-container>\n                        </ng-container>\n                    </ion-label>\n                </ion-item>\n            </ion-list>\n        </ng-container>\n    </core-loading>\n</ng-template>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}