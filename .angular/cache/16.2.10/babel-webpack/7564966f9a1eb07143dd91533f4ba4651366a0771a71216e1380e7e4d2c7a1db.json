{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { Validators } from '@angular/forms';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreWS } from '@services/ws';\nimport { Translate } from '@singletons';\nimport { CoreUserProfileFieldDelegate } from '@features/user/services/user-profile-field-delegate';\nimport { CoreLoginHelper } from '@features/login/services/login-helper';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreForms } from '@singletons/form';\nimport { CoreRecaptchaComponent } from '@components/recaptcha/recaptcha';\nimport { CorePath } from '@singletons/path';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreSitesFactory } from '@services/sites-factory';\nimport { EMAIL_SIGNUP_FEATURE_NAME } from '@features/login/constants';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../components/input-errors/input-errors\";\nimport * as i4 from \"../../../../components/loading/loading\";\nimport * as i5 from \"../../../../components/mark-required/mark-required\";\nimport * as i6 from \"../../../../components/recaptcha/recaptcha\";\nimport * as i7 from \"../../../../components/show-password/show-password\";\nimport * as i8 from \"../../../../directives/fa-icon\";\nimport * as i9 from \"../../../../directives/format-text\";\nimport * as i10 from \"../../../../directives/link\";\nimport * as i11 from \"../../../../directives/content\";\nimport * as i12 from \"../../../../directives/update-non-reactive-attributes\";\nimport * as i13 from \"@ionic/angular\";\nimport * as i14 from \"../../../user/components/user-profile-field/user-profile-field\";\nimport * as i15 from \"@ngx-translate/core\";\nconst _c0 = [\"ageForm\"];\nconst _c1 = [\"signupFormEl\"];\nfunction CoreLoginEmailSignupPage_ion_button_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 7);\n    i0.ɵɵlistener(\"click\", function CoreLoginEmailSignupPage_ion_button_10_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.showAuthInstructions());\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.login.instructions\"));\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ion_list_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\", 11)(1, \"ion-item\", 12)(2, \"ion-label\");\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"ion-button\", 13);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 4, \"core.login.signuprequiredfieldnotsupported\"), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", ctx_r5.signupUrl)(\"showBrowserWarning\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 6, \"core.openinbrowser\"), \" \");\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_ion_select_option_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const country_r11 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", country_r11.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(country_r11.name);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 15, 16);\n    i0.ɵɵlistener(\"ngSubmit\", function CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_Template_form_ngSubmit_0_listener($event) {\n      i0.ɵɵrestoreView(_r13);\n      const ctx_r12 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r12.verifyAge($event));\n    });\n    i0.ɵɵelementStart(2, \"ion-item-divider\", 12)(3, \"ion-label\")(4, \"h2\");\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(7, \"ion-item\", 12)(8, \"ion-label\", 17)(9, \"span\", 18);\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(12, \"ion-input\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"ion-item\", 12)(14, \"ion-label\", 17)(15, \"span\", 18);\n    i0.ɵɵtext(16);\n    i0.ɵɵpipe(17, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"ion-select\", 20);\n    i0.ɵɵpipe(19, \"translate\");\n    i0.ɵɵpipe(20, \"translate\");\n    i0.ɵɵpipe(21, \"translate\");\n    i0.ɵɵelementStart(22, \"ion-select-option\", 21);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(25, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_ion_select_option_25_Template, 2, 2, \"ion-select-option\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(26, \"div\", 11)(27, \"ion-button\", 23);\n    i0.ɵɵtext(28);\n    i0.ɵɵpipe(29, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(30, \"ion-item\", 12)(31, \"ion-label\")(32, \"p\", 24);\n    i0.ɵɵtext(33);\n    i0.ɵɵpipe(34, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(35, \"p\");\n    i0.ɵɵtext(36);\n    i0.ɵɵpipe(37, \"translate\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r7.ageVerificationForm);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 13, \"core.agelocationverification\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 15, \"core.whatisyourage\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(17, 17, \"core.wheredoyoulive\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"cancelText\", i0.ɵɵpipeBind1(19, 19, \"core.cancel\"))(\"okText\", i0.ɵɵpipeBind1(20, 21, \"core.ok\"))(\"placeholder\", i0.ɵɵpipeBind1(21, 23, \"core.login.selectacountry\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(24, 25, \"core.login.selectacountry\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r7.countries);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"disabled\", !ctx_r7.ageVerificationForm.valid);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(29, 27, \"core.proceed\"), \" \");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 29, \"core.whyisthisrequired\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(37, 31, \"core.explanationdigitalminor\"));\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 42);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r15 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r15.site.siteUrl);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 42);\n    i0.ɵɵelement(1, \"core-format-text\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r16 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r16.siteName)(\"filter\", false);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r17.site.siteUrl);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 44);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r18 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r18.settings.passwordpolicy, \" \");\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_item_51_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 12)(1, \"ion-label\", 17)(2, \"span\", 18);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(5, \"ion-input\", 45);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelement(7, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const nameField_r24 = ctx.$implicit;\n    const ctx_r19 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 6, \"core.user.\" + nameField_r24));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(6, 8, \"core.user.\" + nameField_r24));\n    i0.ɵɵpropertyInterpolate(\"formControlName\", nameField_r24);\n    i0.ɵɵproperty(\"name\", nameField_r24);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r19.signupForm.controls[nameField_r24])(\"errorMessages\", ctx_r19.namefieldsErrors[nameField_r24]);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_select_option_69_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-select-option\", 25);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const country_r25 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", country_r25.code);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(country_r25.name);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_core_user_profile_field_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-user-profile-field\", 47);\n  }\n  if (rf & 2) {\n    const field_r28 = ctx.$implicit;\n    const ctx_r27 = i0.ɵɵnextContext(5);\n    i0.ɵɵproperty(\"field\", field_r28)(\"edit\", true)(\"signup\", true)(\"form\", ctx_r27.signupForm);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item-divider\", 12)(2, \"ion-label\")(3, \"p\", 24);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(5, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_core_user_profile_field_5_Template, 1, 4, \"core-user-profile-field\", 46);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const category_r26 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(category_r26.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", category_r26.fields);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_71_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item-divider\", 12)(2, \"ion-label\")(3, \"h2\")(4, \"span\", 48);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelement(7, \"core-recaptcha\", 49);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r22 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"core-mark-required\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 6, \"core.login.security_question\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"publicKey\", ctx_r22.settings.recaptchapublickey)(\"model\", ctx_r22.captcha)(\"siteUrl\", ctx_r22.site.siteUrl)(\"showRequiredError\", ctx_r22.formSubmitClicked);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_72_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item-divider\", 12)(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"ion-item\", 12)(7, \"ion-label\")(8, \"a\", 50);\n    i0.ɵɵtext(9);\n    i0.ɵɵpipe(10, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(11, \"ion-item\", 12)(12, \"ion-label\")(13, \"span\", 48);\n    i0.ɵɵtext(14);\n    i0.ɵɵpipe(15, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(16, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"ion-checkbox\", 51);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r23 = i0.ɵɵnextContext(4);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 7, \"core.login.policyagreement\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"href\", ctx_r23.settings.sitepolicy, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(10, 9, \"core.login.policyagreementclick\"), \" \");\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"core-mark-required\", true);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(15, 11, \"core.login.policyacceptmandatory\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r23.signupForm.controls.policyagreed)(\"errorMessages\", ctx_r23.policyErrors);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r30 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"form\", 15, 26);\n    i0.ɵɵlistener(\"ngSubmit\", function CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_Template_form_ngSubmit_0_listener($event) {\n      i0.ɵɵrestoreView(_r30);\n      const ctx_r29 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r29.create($event));\n    });\n    i0.ɵɵelementStart(2, \"ion-item\", 27)(3, \"ion-label\");\n    i0.ɵɵtemplate(4, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_4_Template, 2, 1, \"p\", 28);\n    i0.ɵɵtemplate(5, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_5_Template, 2, 2, \"p\", 28);\n    i0.ɵɵtemplate(6, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_6_Template, 2, 1, \"p\", 6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(7, \"ion-item-divider\", 12)(8, \"ion-label\")(9, \"h2\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"ion-item\", 12)(13, \"ion-label\", 17)(14, \"span\", 18);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(17, \"ion-input\", 29);\n    i0.ɵɵpipe(18, \"translate\");\n    i0.ɵɵelement(19, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"ion-item\", 12)(21, \"ion-label\", 17)(22, \"span\", 18);\n    i0.ɵɵtext(23);\n    i0.ɵɵpipe(24, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(25, \"core-show-password\", 31);\n    i0.ɵɵelement(26, \"ion-input\", 32);\n    i0.ɵɵpipe(27, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(28, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_28_Template, 2, 1, \"p\", 33);\n    i0.ɵɵelement(29, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(30, \"ion-item-divider\", 12)(31, \"ion-label\")(32, \"h2\");\n    i0.ɵɵtext(33);\n    i0.ɵɵpipe(34, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(35, \"ion-item\", 12)(36, \"ion-label\", 17)(37, \"span\", 18);\n    i0.ɵɵtext(38);\n    i0.ɵɵpipe(39, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(40, \"ion-input\", 34);\n    i0.ɵɵpipe(41, \"translate\");\n    i0.ɵɵelement(42, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(43, \"ion-item\", 12)(44, \"ion-label\", 17)(45, \"span\", 18);\n    i0.ɵɵtext(46);\n    i0.ɵɵpipe(47, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(48, \"ion-input\", 35);\n    i0.ɵɵpipe(49, \"translate\");\n    i0.ɵɵelement(50, \"core-input-errors\", 30);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(51, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_item_51_Template, 8, 10, \"ion-item\", 36);\n    i0.ɵɵelementStart(52, \"ion-item\", 12)(53, \"ion-label\", 17);\n    i0.ɵɵtext(54);\n    i0.ɵɵpipe(55, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(56, \"ion-input\", 37);\n    i0.ɵɵpipe(57, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(58, \"ion-item\", 12)(59, \"ion-label\", 17);\n    i0.ɵɵtext(60);\n    i0.ɵɵpipe(61, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(62, \"ion-select\", 38);\n    i0.ɵɵpipe(63, \"translate\");\n    i0.ɵɵpipe(64, \"translate\");\n    i0.ɵɵpipe(65, \"translate\");\n    i0.ɵɵelementStart(66, \"ion-select-option\", 21);\n    i0.ɵɵtext(67);\n    i0.ɵɵpipe(68, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(69, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_select_option_69_Template, 2, 2, \"ion-select-option\", 22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(70, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_Template, 6, 2, \"ng-container\", 39);\n    i0.ɵɵtemplate(71, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_71_Template, 8, 8, \"ng-container\", 6);\n    i0.ɵɵtemplate(72, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_72_Template, 18, 13, \"ng-container\", 6);\n    i0.ɵɵelementStart(73, \"div\", 11)(74, \"ion-button\", 40);\n    i0.ɵɵtext(75);\n    i0.ɵɵpipe(76, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(77, \"input\", 41);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"formGroup\", ctx_r8.signupForm);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r8.siteName && ctx_r8.displaySiteUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.siteName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.siteName && ctx_r8.displaySiteUrl);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 38, \"core.login.createuserandpass\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 40, \"core.login.username\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(18, 42, \"core.login.username\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r8.signupForm.controls.username)(\"errorMessages\", ctx_r8.usernameErrors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(24, 44, \"core.login.password\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(27, 46, \"core.login.password\"));\n    i0.ɵɵproperty(\"clearOnEdit\", false);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.settings.passwordpolicy);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"control\", ctx_r8.signupForm.controls.password)(\"errorMessages\", ctx_r8.passwordErrors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(34, 48, \"core.login.supplyinfo\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(39, 50, \"core.user.email\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(41, 52, \"core.user.email\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r8.signupForm.controls.email)(\"errorMessages\", ctx_r8.emailErrors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(47, 54, \"core.user.emailagain\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(49, 56, \"core.user.emailagain\"));\n    i0.ɵɵproperty(\"pattern\", ctx_r8.escapeMail(ctx_r8.signupForm.controls.email.value));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"control\", ctx_r8.signupForm.controls.email2)(\"errorMessages\", ctx_r8.email2Errors);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.settings.namefields);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(55, 58, \"core.user.city\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"placeholder\", i0.ɵɵpipeBind1(57, 60, \"core.user.city\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(61, 62, \"core.user.country\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"placeholder\", i0.ɵɵpipeBind1(63, 64, \"core.login.selectacountry\"))(\"cancelText\", i0.ɵɵpipeBind1(64, 66, \"core.cancel\"))(\"okText\", i0.ɵɵpipeBind1(65, 68, \"core.ok\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(68, 70, \"core.login.selectacountry\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.countries);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r8.categories);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.settings.recaptchapublickey);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r8.settings.sitepolicy);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(76, 72, \"core.login.createaccount\"));\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_Template, 38, 33, \"form\", 14);\n    i0.ɵɵtemplate(2, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_Template, 78, 74, \"form\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r6.ageDigitalConsentVerification);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r6.ageDigitalConsentVerification && ctx_r6.site);\n  }\n}\nfunction CoreLoginEmailSignupPage_core_loading_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"core-loading\", 9)(1, \"div\", 5);\n    i0.ɵɵtemplate(2, CoreLoginEmailSignupPage_core_loading_12_ion_list_2_Template, 8, 8, \"ion-list\", 10);\n    i0.ɵɵtemplate(3, CoreLoginEmailSignupPage_core_loading_12_ng_container_3_Template, 3, 2, \"ng-container\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"hideUntil\", ctx_r1.settingsLoaded);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.allRequiredSupported);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.allRequiredSupported && ctx_r1.settingsLoaded && ctx_r1.settings);\n  }\n}\nfunction CoreLoginEmailSignupPage_ion_list_14_h2_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h2\", 54);\n    i0.ɵɵelement(1, \"core-format-text\", 43);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r31 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r31.siteName)(\"filter\", false);\n  }\n}\nfunction CoreLoginEmailSignupPage_ion_list_14_p_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r32 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r32.supportName);\n  }\n}\nfunction CoreLoginEmailSignupPage_ion_list_14_p_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r33 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r33.supportEmail);\n  }\n}\nfunction CoreLoginEmailSignupPage_ion_list_14_ion_button_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r36 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 55);\n    i0.ɵɵlistener(\"click\", function CoreLoginEmailSignupPage_ion_list_14_ion_button_15_Template_ion_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r36);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r35.showContactOnSite());\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.openinbrowser\"), \" \");\n  }\n}\nfunction CoreLoginEmailSignupPage_ion_list_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item-divider\", 12)(2, \"ion-label\");\n    i0.ɵɵtemplate(3, CoreLoginEmailSignupPage_ion_list_14_h2_3_Template, 2, 2, \"h2\", 52);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"ion-item\", 12)(5, \"ion-label\")(6, \"p\", 24);\n    i0.ɵɵtext(7);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵpipe(11, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, CoreLoginEmailSignupPage_ion_list_14_p_12_Template, 2, 1, \"p\", 6);\n    i0.ɵɵtemplate(13, CoreLoginEmailSignupPage_ion_list_14_p_13_Template, 2, 1, \"p\", 6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"div\", 11);\n    i0.ɵɵtemplate(15, CoreLoginEmailSignupPage_ion_list_14_ion_button_15_Template, 3, 3, \"ion-button\", 53);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.siteName);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 6, \"core.considereddigitalminor\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(11, 8, \"core.digitalminor_desc\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.supportName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.supportEmail);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.supportName && !ctx_r2.supportEmail);\n  }\n}\n/**\n * Page to signup using email.\n */\nexport class CoreLoginEmailSignupPage {\n  constructor(fb, elementRef, changeDetector) {\n    this.fb = fb;\n    this.elementRef = elementRef;\n    this.changeDetector = changeDetector;\n    this.displaySiteUrl = false;\n    this.authInstructions = '';\n    this.settingsLoaded = false;\n    this.allRequiredSupported = true;\n    this.formSubmitClicked = false;\n    this.captcha = {\n      recaptcharesponse: ''\n    };\n    this.isMinor = false; // Whether the user is minor age.\n    // Create the ageVerificationForm.\n    this.ageVerificationForm = this.fb.group({\n      age: ['', Validators.required]\n    });\n    this.countryControl = this.fb.control('', Validators.required);\n    this.ageVerificationForm.addControl('country', this.countryControl);\n    // Create the signupForm with the basic controls. More controls will be added later.\n    this.signupForm = this.fb.group({\n      username: ['', Validators.required],\n      password: ['', Validators.required],\n      email: ['', Validators.compose([Validators.required, Validators.email])],\n      email2: ['', Validators.compose([Validators.required, Validators.email])]\n    });\n    // Setup validation errors.\n    this.usernameErrors = CoreLoginHelper.getErrorMessages('core.login.usernamerequired');\n    this.passwordErrors = CoreLoginHelper.getErrorMessages('core.login.passwordrequired');\n    this.emailErrors = CoreLoginHelper.getErrorMessages('core.login.missingemail');\n    this.policyErrors = CoreLoginHelper.getErrorMessages('core.login.policyagree');\n    this.email2Errors = CoreLoginHelper.getErrorMessages('core.login.missingemail', undefined, 'core.login.emailnotmatch');\n  }\n  /**\n   * Component initialized.\n   */\n  ngOnInit() {\n    const siteUrl = CoreNavigator.getRouteParam('siteUrl');\n    if (!siteUrl) {\n      CoreDomUtils.showErrorModal('Site URL not supplied.');\n      CoreNavigator.back();\n      return;\n    }\n    this.site = CoreSitesFactory.makeUnauthenticatedSite(siteUrl);\n    this.displaySiteUrl = this.site.shouldDisplayInformativeLinks();\n    // Fetch the data.\n    this.fetchData().finally(() => {\n      this.settingsLoaded = true;\n    });\n  }\n  /**\n   * Complete the FormGroup using the settings received from server.\n   */\n  completeFormGroup() {\n    var _this$settings, _this$settings2, _this$settings5;\n    this.signupForm.addControl('city', this.fb.control(((_this$settings = this.settings) === null || _this$settings === void 0 ? void 0 : _this$settings.defaultcity) || ''));\n    this.signUpCountryControl = this.fb.control(((_this$settings2 = this.settings) === null || _this$settings2 === void 0 ? void 0 : _this$settings2.country) || '');\n    this.signupForm.addControl('country', this.signUpCountryControl);\n    // Add the name fields.\n    for (const i in (_this$settings3 = this.settings) === null || _this$settings3 === void 0 ? void 0 : _this$settings3.namefields) {\n      var _this$settings3, _this$settings4;\n      this.signupForm.addControl((_this$settings4 = this.settings) === null || _this$settings4 === void 0 ? void 0 : _this$settings4.namefields[i], this.fb.control('', Validators.required));\n    }\n    if ((_this$settings5 = this.settings) !== null && _this$settings5 !== void 0 && _this$settings5.sitepolicy) {\n      this.signupForm.addControl('policyagreed', this.fb.control(false, Validators.requiredTrue));\n    }\n  }\n  /**\n   * Fetch the required data from the server.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchData() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        // Get site config.\n        _this.siteConfig = yield _this.site.getPublicConfig();\n        _this.signupUrl = CorePath.concatenatePaths(_this.siteConfig.httpswwwroot, 'login/signup.php');\n        const configValid = yield _this.treatSiteConfig();\n        if (configValid) {\n          // Check content verification.\n          if (_this.ageDigitalConsentVerification === undefined) {\n            const result = yield CoreUtils.ignoreErrors(CoreWS.callAjax('core_auth_is_age_digital_consent_verification_enabled', {}, {\n              siteUrl: _this.site.getURL()\n            }));\n            _this.ageDigitalConsentVerification = !!(result !== null && result !== void 0 && result.status);\n          }\n          yield _this.getSignupSettings();\n        }\n        _this.completeFormGroup();\n      } catch (error) {\n        if (_this.allRequiredSupported) {\n          CoreDomUtils.showErrorModal(error);\n        }\n      }\n    })();\n  }\n  /**\n   * Get signup settings from server.\n   *\n   * @returns Promise resolved when done.\n   */\n  getSignupSettings() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      _this2.settings = yield CoreWS.callAjax('auth_email_get_signup_settings', {}, {\n        siteUrl: _this2.site.getURL()\n      });\n      if (CoreUserProfileFieldDelegate.hasRequiredUnsupportedField(_this2.settings.profilefields)) {\n        _this2.allRequiredSupported = false;\n        throw new Error(Translate.instant('core.login.signuprequiredfieldnotsupported'));\n      }\n      _this2.categories = CoreLoginHelper.formatProfileFieldsForSignup(_this2.settings.profilefields);\n      if (_this2.settings.recaptchapublickey) {\n        _this2.captcha.recaptcharesponse = ''; // Reset captcha.\n      }\n\n      if (!_this2.countryControl.value) {\n        _this2.countryControl.setValue(_this2.settings.country || '');\n      }\n      const namefieldsErrors = {};\n      if (_this2.settings.namefields) {\n        _this2.settings.namefields.forEach(field => {\n          namefieldsErrors[field] = CoreLoginHelper.getErrorMessages('core.login.missing' + field);\n        });\n      }\n      _this2.namefieldsErrors = namefieldsErrors;\n      _this2.countries = yield CoreUtils.getCountryListSorted();\n    })();\n  }\n  /**\n   * Treat the site config, checking if it's valid and extracting the data we're interested in.\n   *\n   * @returns True if success.\n   */\n  treatSiteConfig() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      var _this3$siteConfig;\n      if (((_this3$siteConfig = _this3.siteConfig) === null || _this3$siteConfig === void 0 ? void 0 : _this3$siteConfig.registerauth) == 'email' && !_this3.site.isFeatureDisabled(EMAIL_SIGNUP_FEATURE_NAME)) {\n        _this3.siteName = yield _this3.site.getSiteName();\n        _this3.authInstructions = _this3.siteConfig.authinstructions;\n        _this3.ageDigitalConsentVerification = _this3.siteConfig.agedigitalconsentverification;\n        _this3.supportName = _this3.siteConfig.supportname;\n        _this3.supportEmail = _this3.siteConfig.supportemail;\n        _this3.countryControl.setValue(_this3.siteConfig.country || '');\n        return true;\n      } else {\n        CoreDomUtils.showErrorModal(Translate.instant('core.login.signupplugindisabled', {\n          $a: Translate.instant('core.login.auth_email')\n        }));\n        CoreNavigator.back();\n        return false;\n      }\n    })();\n  }\n  /**\n   * Create account.\n   *\n   * @param e Event.\n   * @returns Promise resolved when done.\n   */\n  create(e) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      var _this4$settings, _this4$siteConfig, _this4$settings2;\n      e.preventDefault();\n      e.stopPropagation();\n      _this4.formSubmitClicked = true;\n      if (!_this4.signupForm.valid || (_this4$settings = _this4.settings) !== null && _this4$settings !== void 0 && _this4$settings.recaptchapublickey && !_this4.captcha.recaptcharesponse) {\n        // Form not valid. Mark all controls as dirty to display errors.\n        for (const name in _this4.signupForm.controls) {\n          _this4.signupForm.controls[name].markAsDirty();\n        }\n        _this4.changeDetector.detectChanges();\n        // Scroll to the first element with errors.\n        const errorFound = yield CoreDom.scrollToInputError(_this4.elementRef.nativeElement);\n        if (!errorFound) {\n          // Input not found, show an error modal.\n          CoreDomUtils.showErrorModal('core.errorinvalidform', true);\n        }\n        return;\n      }\n      const modal = yield CoreDomUtils.showModalLoading('core.sending', true);\n      const params = {\n        username: _this4.signupForm.value.username.trim().toLowerCase(),\n        password: _this4.signupForm.value.password,\n        firstname: CoreTextUtils.cleanTags(_this4.signupForm.value.firstname),\n        lastname: CoreTextUtils.cleanTags(_this4.signupForm.value.lastname),\n        email: _this4.signupForm.value.email.trim(),\n        city: CoreTextUtils.cleanTags(_this4.signupForm.value.city),\n        country: _this4.signupForm.value.country\n      };\n      if ((_this4$siteConfig = _this4.siteConfig) !== null && _this4$siteConfig !== void 0 && _this4$siteConfig.launchurl) {\n        params.redirect = CoreLoginHelper.prepareForSSOLogin(_this4.site.getURL(), undefined, _this4.siteConfig.launchurl);\n      }\n      // Get the recaptcha response (if needed).\n      if ((_this4$settings2 = _this4.settings) !== null && _this4$settings2 !== void 0 && _this4$settings2.recaptchapublickey && _this4.captcha.recaptcharesponse) {\n        params.recaptcharesponse = _this4.captcha.recaptcharesponse;\n      }\n      try {\n        var _this4$settings3;\n        // Get the data for the custom profile fields.\n        params.customprofilefields = yield CoreUserProfileFieldDelegate.getDataForFields((_this4$settings3 = _this4.settings) === null || _this4$settings3 === void 0 ? void 0 : _this4$settings3.profilefields, true, 'email', _this4.signupForm.value);\n        const result = yield CoreWS.callAjax('auth_email_signup_user', params, {\n          siteUrl: _this4.site.getURL()\n        });\n        if (result.success) {\n          CoreForms.triggerFormSubmittedEvent(_this4.signupFormElement, true);\n          // Show alert and ho back.\n          const message = Translate.instant('core.login.emailconfirmsent', {\n            $a: params.email\n          });\n          CoreDomUtils.showAlert(Translate.instant('core.success'), message);\n          CoreNavigator.back();\n        } else {\n          var _this4$recaptchaCompo, _result$warnings;\n          (_this4$recaptchaCompo = _this4.recaptchaComponent) === null || _this4$recaptchaCompo === void 0 || _this4$recaptchaCompo.expireRecaptchaAnswer();\n          const warning = (_result$warnings = result.warnings) === null || _result$warnings === void 0 ? void 0 : _result$warnings[0];\n          if (warning) {\n            let error = warning.message;\n            if (error == 'incorrect-captcha-sol' || !error && warning.item == 'recaptcharesponse') {\n              error = Translate.instant('core.login.recaptchaincorrect');\n            }\n            CoreDomUtils.showErrorModal(error);\n          } else {\n            CoreDomUtils.showErrorModal('core.login.usernotaddederror', true);\n          }\n        }\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'core.login.usernotaddederror', true);\n      } finally {\n        modal.dismiss();\n      }\n    })();\n  }\n  /**\n   * Escape mail to avoid special characters to be treated as a RegExp.\n   *\n   * @param text Initial mail.\n   * @returns Escaped mail.\n   */\n  escapeMail(text) {\n    return CoreTextUtils.escapeForRegex(text);\n  }\n  /**\n   * Show authentication instructions.\n   */\n  showAuthInstructions() {\n    CoreTextUtils.viewText(Translate.instant('core.login.instructions'), this.authInstructions);\n  }\n  /**\n   * Show contact information on site (we have to display again the age verification form).\n   */\n  showContactOnSite() {\n    CoreUtils.openInBrowser(CorePath.concatenatePaths(this.site.getURL(), '/login/verify_age_location.php'), {\n      showBrowserWarning: false\n    });\n  }\n  /**\n   * Verify Age.\n   *\n   * @param e Event.\n   * @returns Promise resolved when done.\n   */\n  verifyAge(e) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      if (!_this5.ageVerificationForm.valid) {\n        CoreDomUtils.showErrorModal('core.errorinvalidform', true);\n        return;\n      }\n      const modal = yield CoreDomUtils.showModalLoading('core.sending', true);\n      const params = _this5.ageVerificationForm.value;\n      params.age = parseInt(params.age, 10); // Use just the integer part.\n      try {\n        const result = yield CoreWS.callAjax('core_auth_is_minor', params, {\n          siteUrl: _this5.site.getURL()\n        });\n        CoreForms.triggerFormSubmittedEvent(_this5.ageFormElement, true);\n        if (!result.status) {\n          if (_this5.countryControl.value) {\n            var _this5$signUpCountryC;\n            (_this5$signUpCountryC = _this5.signUpCountryControl) === null || _this5$signUpCountryC === void 0 || _this5$signUpCountryC.setValue(_this5.countryControl.value);\n          }\n          // Not a minor, go ahead.\n          _this5.ageDigitalConsentVerification = false;\n        } else {\n          // Is a minor.\n          _this5.isMinor = true;\n        }\n      } catch (_unused) {\n        // Something wrong, redirect to the site.\n        CoreDomUtils.showErrorModal('There was an error verifying your age, please try again using the browser.');\n      } finally {\n        modal.dismiss();\n      }\n    })();\n  }\n}\n_class = CoreLoginEmailSignupPage;\n_class.ɵfac = function CoreLoginEmailSignupPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i0.ElementRef), i0.ɵɵdirectiveInject(i0.ChangeDetectorRef));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-login-email-signup\"]],\n  viewQuery: function CoreLoginEmailSignupPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreRecaptchaComponent, 5);\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.recaptchaComponent = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.ageFormElement = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.signupFormElement = _t.first);\n    }\n  },\n  decls: 15,\n  vars: 9,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [3, \"hideUntil\", 4, \"ngIf\"], [1, \"list-item-limited-width\"], [4, \"ngIf\"], [\"fill\", \"clear\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"far-circle-question\", \"aria-hidden\", \"true\"], [3, \"hideUntil\"], [\"class\", \"ion-padding\", 4, \"ngIf\"], [1, \"ion-padding\"], [1, \"ion-text-wrap\"], [\"expand\", \"block\", \"core-link\", \"\", \"autoLogin\", \"no\", 3, \"href\", \"showBrowserWarning\"], [3, \"formGroup\", \"ngSubmit\", 4, \"ngIf\"], [3, \"formGroup\", \"ngSubmit\"], [\"ageForm\", \"\"], [\"position\", \"stacked\"], [\"core-mark-required\", \"true\"], [\"type\", \"number\", \"name\", \"age\", \"placeholder\", \"0\", \"formControlName\", \"age\", \"autocapitalize\", \"none\", \"autocorrect\", \"off\"], [\"name\", \"country\", \"formControlName\", \"country\", 3, \"cancelText\", \"okText\", \"placeholder\"], [\"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"expand\", \"block\", \"type\", \"submit\", 3, \"disabled\"], [1, \"item-heading\"], [3, \"value\"], [\"signupFormEl\", \"\"], [1, \"ion-text-wrap\", \"ion-text-center\"], [\"class\", \"ion-padding item-heading\", 4, \"ngIf\"], [\"type\", \"text\", \"name\", \"username\", \"formControlName\", \"username\", \"autocapitalize\", \"none\", \"autocorrect\", \"off\", 3, \"placeholder\"], [3, \"control\", \"errorMessages\"], [\"name\", \"password\"], [\"name\", \"password\", \"type\", \"password\", \"formControlName\", \"password\", \"autocomplete\", \"new-password\", \"required\", \"true\", 3, \"placeholder\", \"clearOnEdit\"], [\"class\", \"core-input-footnote\", 4, \"ngIf\"], [\"type\", \"email\", \"name\", \"email\", \"formControlName\", \"email\", \"autocapitalize\", \"none\", \"autocorrect\", \"off\", 3, \"placeholder\"], [\"type\", \"email\", \"name\", \"email2\", \"autocapitalize\", \"none\", \"formControlName\", \"email2\", \"autocorrect\", \"off\", 3, \"placeholder\", \"pattern\"], [\"class\", \"ion-text-wrap\", 4, \"ngFor\", \"ngForOf\"], [\"type\", \"text\", \"name\", \"city\", \"formControlName\", \"city\", \"autocorrect\", \"off\", 3, \"placeholder\"], [\"name\", \"country\", \"formControlName\", \"country\", 3, \"placeholder\", \"cancelText\", \"okText\"], [4, \"ngFor\", \"ngForOf\"], [\"expand\", \"block\", \"type\", \"submit\"], [\"type\", \"submit\", 1, \"core-submit-hidden-enter\"], [1, \"ion-padding\", \"item-heading\"], [3, \"text\", \"filter\"], [1, \"core-input-footnote\"], [\"type\", \"text\", \"autocorrect\", \"off\", 3, \"name\", \"placeholder\", \"formControlName\"], [\"registerAuth\", \"email\", 3, \"field\", \"edit\", \"signup\", \"form\", 4, \"ngFor\", \"ngForOf\"], [\"registerAuth\", \"email\", 3, \"field\", \"edit\", \"signup\", \"form\"], [3, \"core-mark-required\"], [3, \"publicKey\", \"model\", \"siteUrl\", \"showRequiredError\"], [\"core-link\", \"\", \"capture\", \"false\", 3, \"href\"], [\"slot\", \"end\", \"name\", \"policyagreed\", \"formControlName\", \"policyagreed\"], [\"class\", \"item-heading ion-padding\", 4, \"ngIf\"], [\"expand\", \"block\", 3, \"click\", 4, \"ngIf\"], [1, \"item-heading\", \"ion-padding\"], [\"expand\", \"block\", 3, \"click\"]],\n  template: function CoreLoginEmailSignupPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(9, \"ion-buttons\", 2);\n      i0.ɵɵtemplate(10, CoreLoginEmailSignupPage_ion_button_10_Template, 3, 3, \"ion-button\", 3);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(11, \"ion-content\");\n      i0.ɵɵtemplate(12, CoreLoginEmailSignupPage_core_loading_12_Template, 4, 3, \"core-loading\", 4);\n      i0.ɵɵelementStart(13, \"div\", 5);\n      i0.ɵɵtemplate(14, CoreLoginEmailSignupPage_ion_list_14_Template, 16, 10, \"ion-list\", 6);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 5, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 7, \"core.login.newaccount\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.authInstructions);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", !ctx.isMinor);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.allRequiredSupported && ctx.isMinor);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf, i3.CoreInputErrorsComponent, i4.CoreLoadingComponent, i5.CoreMarkRequiredComponent, i6.CoreRecaptchaComponent, i7.CoreShowPasswordComponent, i8.CoreFaIconDirective, i9.CoreFormatTextDirective, i10.CoreLinkDirective, i11.CoreContentDirective, i12.CoreUpdateNonReactiveAttributesDirective, i1.ɵNgNoValidate, i1.NgControlStatus, i1.NgControlStatusGroup, i1.RequiredValidator, i1.PatternValidator, i13.IonButton, i13.IonButtons, i13.IonCheckbox, i13.IonContent, i13.IonHeader, i13.IonIcon, i13.IonInput, i13.IonItem, i13.IonItemDivider, i13.IonLabel, i13.IonList, i13.IonSelect, i13.IonSelectOption, i13.IonTitle, i13.IonToolbar, i13.BooleanValueAccessor, i13.NumericValueAccessor, i13.SelectValueAccessor, i13.TextValueAccessor, i13.IonBackButton, i1.FormGroupDirective, i1.FormControlName, i14.CoreUserProfileFieldComponent, i15.TranslatePipe],\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%] {\\n  --background: var(--core-login-background);\\n  --ion-item-background: var(--core-login-background);\\n  --color: var(--core-login-text-color);\\n}\\n[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] {\\n  --color: var(--core-login-text-color);\\n}\\n[_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .core-oauth-icon[_ngcontent-%COMP%] {\\n  color: var(--color);\\n}\\n[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%] {\\n  --color: var(--core-login-text-color);\\n  -webkit-text-decoration-color: var(--core-login-text-color);\\n          text-decoration-color: var(--core-login-text-color);\\n}\\n[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] {\\n  color: var(--core-login-text-color);\\n}\\n[_nghost-%COMP%]   .core-login-reconnect-warning[_ngcontent-%COMP%] {\\n  margin: 0px 0px 32px 0px;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%] {\\n  margin-bottom: 32px;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%] {\\n  width: 90%;\\n  max-width: 300px;\\n  margin: 0px auto;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n  max-width: 100%;\\n  max-height: 104px;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   .core-sitename[_ngcontent-%COMP%] {\\n  font-size: 1.2rem;\\n  margin-bottom: 8px;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]   .core-siteurl[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n  margin-bottom: 0px;\\n}\\n[_nghost-%COMP%]   .core-login-info-box[_ngcontent-%COMP%]   .core-login-site[_ngcontent-%COMP%]    + .core-login-user[_ngcontent-%COMP%] {\\n  margin-top: 24px;\\n}\\n[_nghost-%COMP%]   core-user-avatar.large-avatar[_ngcontent-%COMP%] {\\n  --core-avatar-size: var(--core-large-avatar-size);\\n}\\n[_nghost-%COMP%]   .core-login-fullname[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n  margin-bottom: 0px;\\n}\\n[_nghost-%COMP%]   .core-login-methods[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item.item-input[_ngcontent-%COMP%] {\\n  margin-bottom: 16px;\\n}\\n[_nghost-%COMP%]   .core-login-methods[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-login-methods[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%] {\\n  --background: var(--core-login-input-background);\\n  --color: var(--core-login-input-color);\\n}\\n[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%] {\\n  margin-left: 0px;\\n  margin-right: 0px;\\n}\\n[_nghost-%COMP%]   .core-login-forgotten-password[_ngcontent-%COMP%] {\\n  text-decoration: underline;\\n}\\n[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%] {\\n  position: relative;\\n  padding: 8px 0;\\n}\\n[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  background: var(--core-login-background);\\n  padding: 0 8px;\\n}\\n[_nghost-%COMP%]   .core-login-methods-separator[_ngcontent-%COMP%]::before {\\n  height: 1px;\\n  position: absolute;\\n  top: 50%;\\n  left: 0px;\\n  right: 0px;\\n  border-bottom: 1px solid var(--gray-300);\\n  content: \\\"\\\";\\n  z-index: -1;\\n}\\n[_nghost-%COMP%]   .core-login-login-button[_ngcontent-%COMP%] {\\n  margin-top: 32px;\\n}\\n[_nghost-%COMP%]   .core-login-login-inbrowser-button[_ngcontent-%COMP%] {\\n  margin-bottom: 8px;\\n}\\n[_nghost-%COMP%]   p.core-login-inbrowser[_ngcontent-%COMP%] {\\n  font-size: 12px;\\n  margin-top: 8px;\\n  margin-bottom: 8px;\\n}\\n[_nghost-%COMP%]   .core-login-sign-up[_ngcontent-%COMP%] {\\n  margin-top: 8px;\\n  border-top: 1px solid var(--gray-300);\\n}\\n[_nghost-%COMP%]   .core-login-identity-providers[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   .core-login-sign-up[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%] {\\n  margin-top: 16px;\\n  margin-bottom: 8px;\\n  font-size: 16px;\\n}\\n\\nhtml.dark[_nghost-%COMP%]   core-loading[_ngcontent-%COMP%], html.dark   [_nghost-%COMP%]   core-loading[_ngcontent-%COMP%] {\\n  --loading-background: var(--core-login-background-dark);\\n  --loading-text-color: #ffffff;\\n  --loading-spinner: #ffffff;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvY29yZS9mZWF0dXJlcy9sb2dpbi9sb2dpbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7O0VBQUE7QUNFQTs7OztFQUFBO0FBNEdBOztFQUFBO0FDOUdBOzs7O0VBQUE7QUNBQTs7OztFQUFBO0FBK0RBOzs7O0VBQUE7QUM1REk7O0VBRUksMENBQUE7RUFDQSxtREFBQTtFQUNBLHFDQUFBO0FBbURSO0FBaERJO0VBQ0kscUNBQUE7QUFrRFI7QUFoRFE7RUFDSSxtQkFBQTtBQWtEWjtBQTlDSTtFQUNJLHFDQUFBO0VBQ0EsMkRBQUE7VUFBQSxtREFBQTtBQWdEUjtBQTlDUTtFQUNJLG1DQUFBO0FBZ0RaO0FBMUNJO0VBQ0ksd0JBQUE7QUE0Q1I7QUF6Q0k7RUFDSSxtQkFBQTtBQTJDUjtBQXhDWTtFQUNJLFVBQUE7RUFDQSxnQkFBQTtFQUNBLGdCQUFBO0FBMENoQjtBQXhDZ0I7RUFDSSxlQUFBO0VBQ0EsaUJBQUE7QUEwQ3BCO0FBdENZO0VBQ0ksaUJBQUE7RUFDQSxrQkFBQTtBQXdDaEI7QUFyQ1k7RUFDSSxlQUFBO0VBQ0Esa0JBQUE7QUF1Q2hCO0FBbkNRO0VBQ0ksZ0JBQUE7QUFxQ1o7QUFqQ0k7RUFDSSxpREFBQTtBQW1DUjtBQWhDSTtFQUNJLGVBQUE7RUFDQSxrQkFBQTtBQWtDUjtBQTlCUTtFQUNJLG1CQUFBO0FBZ0NaO0FBN0JROztFQUVJLGdEQUFBO0VBQ0Esc0NBQUE7QUErQlo7QUEzQkk7RUFDSSxnQkFBQTtFQUNBLGlCQUFBO0FBNkJSO0FBMUJJO0VBQ0ksMEJBQUE7QUE0QlI7QUFFSTtFQUNJLGtCQUFBO0VBQ0EsY0FBQTtBQUFSO0FBRVE7RUFDSSx3Q0FBQTtFQUNBLGNBQUE7QUFBWjtBQUdRO0VBQ0ksV0FBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxVQUFBO0VBQ0Esd0NBQUE7RUFDQSxXQUFBO0VBQ0EsV0FBQTtBQURaO0FBYUk7RUFDSSxnQkFBQTtBQVhSO0FBY0k7RUFDSSxrQkFBQTtBQVpSO0FBZUk7RUFDSSxlQUFBO0VBQ0EsZUFBQTtFQUNBLGtCQUFBO0FBYlI7QUFnQkk7RUFDSSxlQUFBO0VBQ0EscUNBQUE7QUFkUjtBQWlCSTs7RUFFSSxnQkFBQTtFQUNBLGtCQUFBO0VBQ0EsZUFBQTtBQWZSOztBQTZCUTtFQUNJLHVEQUFBO0VBQ0EsNkJBQUE7RUFDQSwwQkFBQTtBQTFCWiIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQXBwIEdsb2JhbCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSB0aGUgZGlmZmVyZW50IGZpbGVzIHlvdSBzaG91bGQgaW1wb3J0IHRvIHVzZSBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiRmb250LXBhdGg6IFwiLi4vYXNzZXRzL2ZvbnRzXCI7XG4kYXNzZXRzLXBhdGg6IFwiLi4vYXNzZXRzXCI7XG5cbkBpbXBvcnQgXCIuL2hlbHBlcnMvaGVscGVycy5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLmN1c3RvbS5zY3NzXCI7XG5AaW1wb3J0IFwiLi9nbG9iYWxzLnZhcmlhYmxlcy5zY3NzXCI7XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIHN0cmluZyBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5zdHJpbmcuc2Nzc1xuICovXG5cblxuLy8gU3RyaW5nIFV0aWxpdHkgRnVuY3Rpb25zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG4vLyBTdHJpbmcgUmVwbGFjZSBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1yZXBsYWNlKCRzdHJpbmcsICRzZWFyY2gsICRyZXBsYWNlOiBcIlwiKSB7XG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZWFyY2gpO1xuXG4gIEBpZiAkaW5kZXgge1xuICAgIEByZXR1cm4gc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpICsgJHJlcGxhY2UgKyBzdHItcmVwbGFjZShzdHItc2xpY2UoJHN0cmluZywgJGluZGV4ICsgc3RyLWxlbmd0aCgkc2VhcmNoKSksICRzZWFyY2gsICRyZXBsYWNlKTtcbiAgfVxuXG4gIEByZXR1cm4gJHN0cmluZztcbn1cblxuLy8gU3RyaW5nIFNwbGl0IEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbkBmdW5jdGlvbiBzdHItc3BsaXQoJHN0cmluZywgJHNlcGFyYXRvcikge1xuICAvLyBlbXB0eSBhcnJheS9saXN0XG4gICRzcGxpdC1hcnI6ICgpO1xuICAvLyBmaXJzdCBpbmRleCBvZiBzZXBhcmF0b3IgaW4gc3RyaW5nXG4gICRpbmRleDogc3RyLWluZGV4KCRzdHJpbmcsICRzZXBhcmF0b3IpO1xuICAvLyBsb29wIHRocm91Z2ggc3RyaW5nXG4gIEB3aGlsZSAkaW5kZXggIT0gbnVsbCB7XG4gICAgLy8gZ2V0IHRoZSBzdWJzdHJpbmcgZnJvbSB0aGUgZmlyc3QgY2hhcmFjdGVyIHRvIHRoZSBzZXBhcmF0b3JcbiAgICAkaXRlbTogc3RyLXNsaWNlKCRzdHJpbmcsIDEsICRpbmRleCAtIDEpO1xuICAgIC8vIHB1c2ggaXRlbSB0byBhcnJheVxuICAgICRzcGxpdC1hcnI6IGFwcGVuZCgkc3BsaXQtYXJyLCAkaXRlbSk7XG4gICAgLy8gcmVtb3ZlIGl0ZW0gYW5kIHNlcGFyYXRvciBmcm9tIHN0cmluZ1xuICAgICRzdHJpbmc6IHN0ci1zbGljZSgkc3RyaW5nLCAkaW5kZXggKyAxKTtcbiAgICAvLyBmaW5kIG5ldyBpbmRleCBvZiBzZXBhcmF0b3JcbiAgICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VwYXJhdG9yKTtcbiAgfVxuICAvLyBhZGQgdGhlIHJlbWFpbmluZyBzdHJpbmcgdG8gbGlzdCAodGhlIGxhc3QgaXRlbSlcbiAgJHNwbGl0LWFycjogYXBwZW5kKCRzcGxpdC1hcnIsICRzdHJpbmcpO1xuXG4gIEByZXR1cm4gJHNwbGl0LWFycjtcbn1cblxuXG4vLyBTdHJpbmcgRXh0cmFjdCBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1leHRyYWN0KCRzdHJpbmcsICRzdGFydCwgJGVuZCkge1xuICAkc3RhcnQtaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc3RhcnQpO1xuXG4gIEBpZiAkc3RhcnQtaW5kZXgge1xuICAgICRwb3N0OiBzdHItc2xpY2UoJHN0cmluZywgJHN0YXJ0LWluZGV4ICsgc3RyLWxlbmd0aCgkc3RhcnQpKTtcbiAgICAkZW5kLWluZGV4OiBzdHItaW5kZXgoJHBvc3QsICRlbmQpO1xuXG4gICAgQGlmICRlbmQtaW5kZXgge1xuICAgICAgQHJldHVybiBzdHItc2xpY2UoJHBvc3QsIDEsICRlbmQtaW5kZXggLSAxKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuIG51bGw7XG59XG5cblxuLy8gU3RyaW5nIENvbnRhaW5zIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gc3RyLWNvbnRhaW5zKCRzdHJpbmcsICRuZWVkbGUpIHtcbiAgQGlmICh0eXBlLW9mKCRzdHJpbmcpID09IHN0cmluZykge1xuICAgIEByZXR1cm4gc3RyLWluZGV4KCRzdHJpbmcsICRuZWVkbGUpICE9IG51bGw7XG4gIH1cblxuICBAcmV0dXJuIGZhbHNlO1xufVxuXG5cbi8vIFVSTCBFbmNvZGUgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiB1cmwtZW5jb2RlKCR2YWwpIHtcbiAgJHNwYWNlczogc3RyLXJlcGxhY2UoJHZhbCwgXCIgXCIsIFwiJTIwXCIpO1xuICAkZW5jb2RlZDogc3RyLXJlcGxhY2UoJHNwYWNlcywgXCIjXCIsIFwiJTIzXCIpO1xuICBAcmV0dXJuICRlbmNvZGVkO1xufVxuXG5cbi8vIEFkZCBSb290IFNlbGVjdG9yXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gQWRkcyBhIHJvb3Qgc2VsZWN0b3IgdXNpbmcgaG9zdCBiYXNlZCBvbiB0aGUgc2VsZWN0b3IgcGFzc2VkXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gYWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsICRhZGRIb3N0U2VsZWN0b3IpIHtcbiAgJHNlbGVjdG9yczogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG5cbiAgJGxpc3Q6ICgpO1xuXG4gIEBlYWNoICRzZWxlY3RvciBpbiAkc2VsZWN0b3JzIHtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgY29udGFpbnMgOmhvc3QoIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBhIGNsYXNzIG9uIHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBuZWVkIHRvIGNoYW5nZSBob3cgd2UgdGFyZ2V0IGl0OlxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgIEBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0KFwiKSB7XG4gICAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpXG4gICAgICAkc2hhZG93LWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzZWxlY3RvciwgXCI6aG9zdChcIiwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pOmhvc3QoXCIpO1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJHNoYWRvdy1lbGVtZW50LCBjb21tYSk7XG5cbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdChcIikge1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogJGVsZW1lbnQ7XG5cbiAgICAgICAgICAvLyBSZXBsYWNlIHRoZSA6aG9zdCggYW5kICkgc28gYWxsIHdlIGhhdmUgbGVmdCBpcyB0aGUgY2xhc3NcbiAgICAgICAgICAvLyBpbnNpZGUgb2YgaXQ6XG4gICAgICAgICAgLy8gOmhvc3QoLmZpeGVkKSAtPiAuZml4ZWRcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgXCIpXCIsIFwiXCIpO1xuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCBcIjpob3N0KFwiLCBcIlwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgY2xhc3MgYmFjayBpbnNpZGUgb2YgaG9zdCB3aXRoIHRoZSBydGwgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gLmZpeGVkIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZFxuICAgICAgICAgICRzY29wZWQtZWxlbWVudDogc3RyLXJlcGxhY2UoJHNjb3BlZC1lbGVtZW50LCAkc2NvcGVkLWVsZW1lbnQsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KSN7JHNjb3BlZC1lbGVtZW50fVwiKTtcblxuICAgICAgICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3QoLmZpeGVkKVwiLCBcIltkaXI9cnRsXVwiKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRzY29wZWQtZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9IEBlbHNlIHtcbiAgICAgICAgICAvLyBBZGQgYmFjayBhbnkgc2VsZWN0b3JzIHRoYXQgZm9sbG93ZWQgdGhlIGhvc3QgYWZ0ZXIgdHJhbnNmb3JtaW5nIHRoZVxuICAgICAgICAgIC8vIGZpcnN0IHNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0KC5maXhlZCkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSk6aG9zdCguZml4ZWQpIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICRlbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgJG5ldy1lbGVtZW50LCBjb21tYSk7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGNvbnRhaW5zIDpob3N0IHdpdGhvdXQgYSBwYXJhbnRoZXNlc1xuICAgIC8vIGl0IG1lYW5zIGl0IGlzIHRhcmdldGluZyBqdXN0IHRoZSBob3N0XG4gICAgLy8gZWxlbWVudCBzbyB3ZSBjYW4gY2hhbmdlIGl0IHRvIGxvb2sgZm9yIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiOmhvc3RcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgLy8gLS0+IDpob3N0OmRpcihydGwpXG4gICAgfSBAZWxzZSBpZiBzdHItY29udGFpbnMoJHNlbGVjdG9yLCBcIjpob3N0XCIpIHtcbiAgICAgICRuZXctZWxlbWVudDogKCk7XG4gICAgICAkZWxlbWVudHM6IHN0ci1zcGxpdCgkc2VsZWN0b3IsIFwiIFwiKTtcblxuICAgICAgQGVhY2ggJGVsZW1lbnQgaW4gJGVsZW1lbnRzIHtcbiAgICAgICAgQGlmIHN0ci1jb250YWlucygkZWxlbWVudCwgXCI6aG9zdFwiKSB7XG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgOmhvc3Qgd2l0aCB0aGUgYWRkSG9zdFNlbGVjdG9yOlxuICAgICAgICAgIC8vIDpob3N0IC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgICAgICAgICR1cGRhdGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRlbGVtZW50LCBcIjpob3N0XCIsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KVwiKTtcblxuICAgICAgICAgIC8vIEFkZCB0aGUgZmluYWwgc2VsZWN0b3IgYWZ0ZXIgYWxsIHRyYW5zZm9ybWF0aW9uczpcbiAgICAgICAgICAvLyA6aG9zdCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAgICAgICAkbmV3LWVsZW1lbnQ6IGFwcGVuZCgkbmV3LWVsZW1lbnQsICR1cGRhdGVkLWVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfSBAZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGJhY2sgYW55IHNlbGVjdG9ycyB0aGF0IGZvbGxvd2VkIHRoZSBob3N0IGFmdGVyIHRyYW5zZm9ybWluZyB0aGVcbiAgICAgICAgICAvLyBmaXJzdCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCA6OnNsb3R0ZWQoaW9uLWljb24pIC0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRuZXctZWxlbWVudCwgY29tbWEpO1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBkb2VzIG5vdCBjb250YWluIGhvc3QgYXQgYWxsIGl0IGlzIGVpdGhlciBhIHNoYWRvd1xuICAgIC8vIG9yIG5vcm1hbCBlbGVtZW50IHNvIGFwcGVuZCBib3RoIHRoZSBhZGRIb3N0U2VsZWN0b3IgYW5kIGhvc3QtY29udGV4dFxuICAgIC8vIEBpbmNsdWRlIGFkZC1yb290LXNlbGVjdG9yKFwiaW9uLWNvbXBvbmVudFwiLCBcIltkaXI9cnRsXVwiKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgaW9uLWNvbXBvbmVudFxuICAgIC8vIC0tPiBbZGlyPXJ0bF0gaW9uLWNvbXBvbmVudFxuICAgIH0gQGVsc2Uge1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgXCIjeyRhZGRIb3N0U2VsZWN0b3J9ICN7JHNlbGVjdG9yfVwiLCBjb21tYSk7XG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSkgI3skc2VsZWN0b3J9XCIsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICBAcmV0dXJuICRsaXN0O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBjb2xvciBmdW5jdGlvbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLmZ1bmN0aW9ucy5jb2xvci5zY3NzXG4gKi9cblxuLy8gR2V0cyB0aGUgYWN0aXZlIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gYSB2YXJpYXRpb24uIEFscGhhIGlzIG9wdGlvbmFsLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEV4YW1wbGUgdXNhZ2U6XG4vLyBjdXJyZW50LWNvbG9yKGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1iYXNlKVxuLy8gY3VycmVudC1jb2xvcihjb250cmFzdCwgMC4xKSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1jb250cmFzdC1yZ2IpLCAwLjEpXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGN1cnJlbnQtY29sb3IoJHZhcmlhdGlvbiwgJGFscGhhOiBudWxsKSB7XG4gIEBpZiAkYWxwaGEgPT0gbnVsbCB7XG4gICAgQHJldHVybiB2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufSk7XG4gIH0gQGVsc2Uge1xuICAgIEByZXR1cm4gcmdiYSh2YXIoLS1pb24tY29sb3ItI3skdmFyaWF0aW9ufS1yZ2IpLCAjeyRhbHBoYX0pO1xuICB9XG59XG5cbi8vIEdldHMgdGhlIHNwZWNpZmljIGNvbG9yJ3MgY3NzIHZhcmlhYmxlIGZyb20gdGhlIG5hbWUgYW5kIHZhcmlhdGlvbi4gQWxwaGEvcmdiIGFyZSBvcHRpb25hbC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gaW9uLWNvbG9yKHByaW1hcnksIGJhc2UpID0+IHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LCAjMzg4MGZmKVxuLy8gaW9uLWNvbG9yKHNlY29uZGFyeSwgY29udHJhc3QpID0+IHZhcigtLWlvbi1jb2xvci1zZWNvbmRhcnktY29udHJhc3QpXG4vLyBpb24tY29sb3IocHJpbWFyeSwgYmFzZSwgMC41KSA9PiByZ2JhKHZhcigtLWlvbi1jb2xvci1wcmltYXJ5LXJnYiwgNTYsIDEyOCwgMjU1KSwgMC41KVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBpb24tY29sb3IoJG5hbWUsICR2YXJpYXRpb24sICRhbHBoYTogbnVsbCwgJHJnYjogbnVsbCkge1xuICAkdmFsdWVzOiBtYXAtZ2V0KCRjb2xvcnMsICRuYW1lKTtcbiAgJHZhbHVlOiBtYXAtZ2V0KCR2YWx1ZXMsICR2YXJpYXRpb24pO1xuICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9LSN7JHZhcmlhdGlvbn07XG5cbiAgQGlmICgkdmFyaWF0aW9uID09IGJhc2UpIHtcbiAgICAkdmFyaWFibGU6IC0taW9uLWNvbG9yLSN7JG5hbWV9O1xuICB9XG5cbiAgQGlmICgkYWxwaGEpIHtcbiAgICAkdmFsdWU6IGNvbG9yLXRvLXJnYi1saXN0KCR2YWx1ZSk7XG4gICAgQHJldHVybiByZ2JhKHZhcigjeyR2YXJpYWJsZX0tcmdiLCAkdmFsdWUpLCAkYWxwaGEpO1xuICB9XG4gIEBpZiAoJHJnYikge1xuICAgICR2YWx1ZTogY29sb3ItdG8tcmdiLWxpc3QoJHZhbHVlKTtcbiAgICAkdmFyaWFibGU6ICN7JHZhcmlhYmxlfS1yZ2I7XG4gIH1cblxuICBAcmV0dXJuIHZhcigjeyR2YXJpYWJsZX0sICR2YWx1ZSk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3Itc2hhZGUoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCMwMDAsICRjb2xvciwgMTIlKTtcbn1cblxuLy8gTWl4ZXMgYSBjb2xvciB3aXRoIHdoaXRlIHRvIGNyZWF0ZSBpdHMgdGludC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXRpbnQoJGNvbG9yKSB7XG4gIEByZXR1cm4gbWl4KCNmZmYsICRjb2xvciwgMTAlKTtcbn1cblxuLy8gQ29udmVydHMgYSBjb2xvciB0byBhIGNvbW1hIHNlcGFyYXRlZCByZ2IuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGNvbG9yLXRvLXJnYi1saXN0KCRjb2xvcikge1xuICBAcmV0dXJuICN7cmVkKCRjb2xvcil9LCN7Z3JlZW4oJGNvbG9yKX0sI3tibHVlKCRjb2xvcil9O1xufVxuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBtaXhpbnMgZm9yIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvdGhlbWVzL2lvbmljLm1peGlucy5zY3NzXG4gKi9cblxuQG1peGluIGlucHV0LWNvdmVyKCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbigwLCBudWxsLCBudWxsLCAwKTtcbiAgQGluY2x1ZGUgbWFyZ2luKDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIGJvcmRlcjogMDtcbiAgYmFja2dyb3VuZDogdHJhbnNwYXJlbnQ7XG4gIGN1cnNvcjogcG9pbnRlcjtcblxuICBhcHBlYXJhbmNlOiBub25lO1xuICBvdXRsaW5lOiBub25lO1xuXG4gICY6Oi1tb3otZm9jdXMtaW5uZXIge1xuICAgIGJvcmRlcjogMDtcbiAgfVxufVxuXG5AbWl4aW4gdmlzdWFsbHktaGlkZGVuKCkge1xuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgdG9wOiAwO1xuICBsZWZ0OiAwO1xuICByaWdodDogMDtcbiAgYm90dG9tOiAwO1xuXG4gIHdpZHRoOiAxMDAlO1xuICBoZWlnaHQ6IDEwMCU7XG5cbiAgbWFyZ2luOiAwO1xuICBwYWRkaW5nOiAwO1xuXG4gIGJvcmRlcjogMDtcbiAgb3V0bGluZTogMDtcbiAgY2xpcDogcmVjdCgwIDAgMCAwKTtcblxuICBvcGFjaXR5OiAwO1xuICBvdmVyZmxvdzogaGlkZGVuO1xuXG4gIC13ZWJraXQtYXBwZWFyYW5jZTogbm9uZTtcbiAgLW1vei1hcHBlYXJhbmNlOiBub25lO1xufVxuXG5AbWl4aW4gdGV4dC1pbmhlcml0KCkge1xuICBmb250LWZhbWlseTogaW5oZXJpdDtcbiAgZm9udC1zaXplOiBpbmhlcml0O1xuICBmb250LXN0eWxlOiBpbmhlcml0O1xuICBmb250LXdlaWdodDogaW5oZXJpdDtcbiAgbGV0dGVyLXNwYWNpbmc6IGluaGVyaXQ7XG4gIHRleHQtZGVjb3JhdGlvbjogaW5oZXJpdDtcbiAgdGV4dC1pbmRlbnQ6IGluaGVyaXQ7XG4gIHRleHQtb3ZlcmZsb3c6IGluaGVyaXQ7XG4gIHRleHQtdHJhbnNmb3JtOiBpbmhlcml0O1xuICB0ZXh0LWFsaWduOiBpbmhlcml0O1xuICB3aGl0ZS1zcGFjZTogaW5oZXJpdDtcbiAgY29sb3I6IGluaGVyaXQ7XG59XG5cbkBtaXhpbiBidXR0b24tc3RhdGUoKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uKDAsIDAsIDAsIDApO1xuXG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcblxuICBjb250ZW50OiBcIlwiO1xuXG4gIG9wYWNpdHk6IDA7XG59XG5cbi8vIEZvbnQgc21vb3RoaW5nXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gZm9udC1zbW9vdGhpbmcoKSB7XG4gIC1tb3otb3N4LWZvbnQtc21vb3RoaW5nOiBncmF5c2NhbGU7XG4gIC13ZWJraXQtZm9udC1zbW9vdGhpbmc6IGFudGlhbGlhc2VkO1xufVxuXG4vLyBHZXQgdGhlIGtleSBmcm9tIGEgbWFwIGJhc2VkIG9uIHRoZSBpbmRleFxuQGZ1bmN0aW9uIGluZGV4LXRvLWtleSgkbWFwLCAkaW5kZXgpIHtcbiAgJGtleXM6IG1hcC1rZXlzKCRtYXApO1xuXG4gIEByZXR1cm4gbnRoKCRrZXlzLCAkaW5kZXgpO1xufVxuXG5cbi8vIEJyZWFrcG9pbnQgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gQnJlYWtwb2ludCB2aWV3cG9ydCBzaXplcyBhbmQgbWVkaWEgcXVlcmllcy5cbi8vXG4vLyBCcmVha3BvaW50cyBhcmUgZGVmaW5lZCBhcyBhIG1hcCBvZiAobmFtZTogbWluaW11bSB3aWR0aCksIG9yZGVyIGZyb20gc21hbGwgdG8gbGFyZ2U6XG4vL1xuLy8gICAgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KVxuLy9cbi8vIFRoZSBtYXAgZGVmaW5lZCBpbiB0aGUgYCRzY3JlZW4tYnJlYWtwb2ludHNgIGdsb2JhbCB2YXJpYWJsZSBpcyB1c2VkIGFzIHRoZSBgJGJyZWFrcG9pbnRzYCBhcmd1bWVudCBieSBkZWZhdWx0LlxuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gTWluaW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbWluKHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgNTc2cHhcbkBmdW5jdGlvbiBicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbmFtZSk7XG5cbiAgQHJldHVybiBpZigkbmFtZSAhPSBpbmRleC10by1rZXkoJGJyZWFrcG9pbnRzLCAxKSwgJG1pbiwgbnVsbCk7XG59XG5cbi8vIFJldHVybnMgYSBibGFuayBzdHJpbmcgaWYgc21hbGxlc3QgYnJlYWtwb2ludCwgb3RoZXJ3aXNlIHJldHVybnMgdGhlIG5hbWUgd2l0aCBhIGRhc2ggaW5mcm9udC5cbi8vIFVzZWZ1bCBmb3IgbWFraW5nIHJlc3BvbnNpdmUgdXRpbGl0aWVzLlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoeHMsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIlwiICAoUmV0dXJucyBhIGJsYW5rIHN0cmluZylcbi8vICAgID4+IGJyZWFrcG9pbnQtaW5maXgoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBcIi1zbVwiXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1pbmZpeCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gIEByZXR1cm4gaWYoYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50cykgPT0gbnVsbCwgXCJcIiwgXCItI3skbmFtZX1cIik7XG59XG5cbi8vIE1lZGlhIG9mIGF0IGxlYXN0IHRoZSBtaW5pbXVtIGJyZWFrcG9pbnQgd2lkdGguIE5vIHF1ZXJ5IGZvciB0aGUgc21hbGxlc3QgYnJlYWtwb2ludC5cbi8vIE1ha2VzIHRoZSBAY29udGVudCBhcHBseSB0byB0aGUgZ2l2ZW4gYnJlYWtwb2ludCBhbmQgd2lkZXIuXG5AbWl4aW4gbWVkaWEtYnJlYWtwb2ludC11cCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtaW46IGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1pbiB7XG4gICAgQG1lZGlhIChtaW4td2lkdGg6ICRtaW4pIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuLy8gTmFtZSBvZiB0aGUgbmV4dCBicmVha3BvaW50LCBvciBudWxsIGZvciB0aGUgbGFzdCBicmVha3BvaW50LlxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSlcbi8vICAgIG1kXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20sICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICBtZFxuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtLCAkYnJlYWtwb2ludC1uYW1lczogKHhzIHNtIG1kIGxnIHhsKSlcbi8vICAgIG1kXG5AZnVuY3Rpb24gYnJlYWtwb2ludC1uZXh0KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMsICRicmVha3BvaW50LW5hbWVzOiBtYXAta2V5cygkYnJlYWtwb2ludHMpKSB7XG4gICRuOiBpbmRleCgkYnJlYWtwb2ludC1uYW1lcywgJG5hbWUpO1xuICBAcmV0dXJuIGlmKCRuIDwgbGVuZ3RoKCRicmVha3BvaW50LW5hbWVzKSwgbnRoKCRicmVha3BvaW50LW5hbWVzLCAkbiArIDEpLCBudWxsKTtcbn1cblxuLy8gTWF4aW11bSBicmVha3BvaW50IHdpZHRoLiBOdWxsIGZvciB0aGUgc21hbGxlc3QgKGZpcnN0KSBicmVha3BvaW50LlxuLy8gVGhlIG1heGltdW0gdmFsdWUgaXMgcmVkdWNlZCBieSAwLjAycHggdG8gd29yayBhcm91bmQgdGhlIGxpbWl0YXRpb25zIG9mXG4vLyBgbWluLWAgYW5kIGBtYXgtYCBwcmVmaXhlcyBhbmQgdmlld3BvcnRzIHdpdGggZnJhY3Rpb25hbCB3aWR0aHMuXG4vL1xuLy8gU2VlIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9tZWRpYXF1ZXJpZXMtNC8jbXEtbWluLW1heFxuLy8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlx0Ly8gVXNlcyAwLjAycHggcmF0aGVyIHRoYW4gMC4wMXB4IHRvIHdvcmsgYXJvdW5kIGEgY3VycmVudCByb3VuZGluZyBidWcgaW4gU2FmYXJpLlxuLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNzgyNjFcdC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4MjYxXG4vL1xuLy8gICAgPj4gYnJlYWtwb2ludC1tYXgobWQsICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweCkpXG4vLyAgICA3NjcuOThweFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgJG1heDogbWFwLWdldCgkYnJlYWtwb2ludHMsICRuYW1lKTtcbiAgQHJldHVybiBpZigkbWF4IGFuZCAkbWF4ID4gMCwgJG1heCAtIC4wMiwgbnVsbCk7XG59XG5cbi8vIE1lZGlhIG9mIGF0IG1vc3QgdGhlIG1heGltdW0gYnJlYWtwb2ludCB3aWR0aC4gTm8gcXVlcnkgZm9yIHRoZSBsYXJnZXN0IGJyZWFrcG9pbnQuXG4vLyBNYWtlcyB0aGUgQGNvbnRlbnQgYXBwbHkgdG8gdGhlIGdpdmVuIGJyZWFrcG9pbnQgYW5kIG5hcnJvd2VyLlxuQG1peGluIG1lZGlhLWJyZWFrcG9pbnQtZG93bigkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtYXg6IGJyZWFrcG9pbnQtbWF4KCRuYW1lLCAkYnJlYWtwb2ludHMpO1xuICBAaWYgJG1heCB7XG4gICAgQG1lZGlhIChtYXgtd2lkdGg6ICRtYXgpIHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGNvbnRlbnQ7XG4gIH1cbn1cblxuXG4vLyBUZXh0IERpcmVjdGlvbiAtIGx0ciAvIHJ0bFxuLy9cbi8vIENTUyBkZWZhdWx0cyB0byB1c2UgdGhlIGx0ciBjc3MsIGFuZCBhZGRzIFtkaXI9cnRsXSBzZWxlY3RvcnNcbi8vIHRvIG92ZXJyaWRlIGx0ciBkZWZhdWx0cy5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG11bHRpLWRpcigpIHtcbiAgQGNvbnRlbnQ7XG5cbiAgLy8gJHJvb3Q6ICN7Jn07XG4gIC8vIEBhdC1yb290IFtkaXJdIHtcbiAgLy8gICAjeyRyb290fSB7XG4gIC8vICAgICBAY29udGVudDtcbiAgLy8gICB9XG4gIC8vIH1cbn1cblxuQG1peGluIHJ0bCgpIHtcbiAgJHJvb3Q6ICN7Jn07XG5cbiAgJHJvb3RTcGxpdDogc3RyLXNwbGl0KCRyb290LCBcIixcIik7XG4gICRzZWxlY3RvcnM6ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiW2Rpcj1ydGxdXCIpfTtcbiAgJHNlbGVjdG9yc1NwbGl0OiBzdHItc3BsaXQoJHNlbGVjdG9ycywgXCIsXCIpO1xuXG4gICRob3N0Q29udGV4dFNlbGVjdG9yczogKCk7XG4gICRyZXN0U2VsZWN0b3JzOiAoKTtcbiAgJGRpclNlbGVjdG9yczogKCk7XG5cbiAgLy8gU2VsZWN0b3JzIG11c3QgYmUgc3BsaXQgaW50byBpbmRpdmlkdWFsIHNlbGVjdG9ycyBpbiBjYXNlIHRoZSBicm93c2VyXG4gIC8vIGRvZXNuJ3Qgc3VwcG9ydCBhIHNwZWNpZmljIHNlbGVjdG9yLlxuICAvLyBGb3IgZXhhbXBsZSwgRmlyZWZveCBhbmQgU2FmYXJpIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYC5cbiAgLy8gSWYgYW4gaW52YWxpZCBzZWxlY3RvciBpcyB1c2VkLCB0aGVuIHRoZSBlbnRpcmUgZ3JvdXAgb2Ygc2VsZWN0b3JzXG4gIC8vIHdpbGwgYmUgaWdub3JlZC5cbiAgLy8gQGxpbmsgaHR0cHM6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy0zLyNncm91cGluZ1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHNlbGVjdG9yc1NwbGl0IHtcbiAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgIEBpZiBzdHItaW5kZXgoJHNlbGVjdG9yLCBcIjpob3N0LWNvbnRleHRcIikge1xuICAgICAgJGhvc3RDb250ZXh0U2VsZWN0b3JzOiBhcHBlbmQoJGhvc3RDb250ZXh0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgICAkcmVzdFNlbGVjdG9yczogYXBwZW5kKCRyZXN0U2VsZWN0b3JzLCAkc2VsZWN0b3IsIGNvbW1hKTtcbiAgICB9XG4gIH1cblxuICAvLyBTdXBwb3J0ZWQgYnkgQ2hyb21lLlxuICBAaWYgbGVuZ3RoKCRob3N0Q29udGV4dFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRob3N0Q29udGV4dFNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IGFsbCBicm93c2Vycy5cbiAgQGlmIGxlbmd0aCgkcmVzdFNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRyZXN0U2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cblxuICAvLyBJZiBicm93c2VyIGNhbiBzdXBwb3J0IGA6ZGlyKClgLCB0aGVuIGFkZCB0aGUgYDpkaXIoKWAgc2VsZWN0b3JzLlxuICAvLyBAc3VwcG9ydHMgc2VsZWN0b3IoOmRpcihydGwpKSB7IC8vIEAgSU1QT1RBTlQgTk9URTogVGhpcyBoYXMgYmVlbiByZW1vdmVkIGJlY2F1c2Ugc2VsZWN0b3IgZnVuY3Rpb24gaXMgbm90IHN1cHBvcnRlZCBpbiBjdXJyZW50IFNDU1NcbiAgLy8gQWRkaW5nIDpkaXIoKSBpbiBjYXNlIHRoZSBicm93c2VyIGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCBhbmQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyBgOmhvc3QtY29udGV4dCgpYCBpcyBhZGRlZDpcbiAgLy8gLSB0aHJvdWdoIHRoZSBgYWRkLXJvb3Qtc2VsZWN0b3IoKWAgZnVuY3Rpb24uXG4gIC8vIC0gZmlyc3Qgc28gdGhhdCBpdCB0YWtlcyBwcmVjZWRlbmNlIG92ZXIgYDpkaXIoKWAuXG4gIC8vIEZvciBleGFtcGxlLFxuICAvLyAtIEZpcmVmb3ggZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLCBidXQgZG9lcyBzdXBwb3J0IGA6ZGlyKClgLlxuICAvLyAtIFNhZmFyaSBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAsIGJ1dCBTYWZhcmkgMTYuNCsgc3VwcG9ydHMgYDpkaXIoKWBcbiAgLy8gQGxpbmsgaHR0cHM6Ly93ZWJraXQub3JnL2Jsb2cvMTM5NjYvd2Via2l0LWZlYXR1cmVzLWluLXNhZmFyaS0xNi00L1xuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHJvb3RTcGxpdCB7XG4gICAgJGRpclNlbGVjdG9yOiBcIiN7JHNlbGVjdG9yfTpkaXIocnRsKVwiO1xuICAgIC8vIEdyb3VwIHRoZSBzZWxlY3RvcnMgYmFjayBpbnRvIGEgc2luZ2xlIHNlbGVjdG9yIHRvIG9wdGltaXplIHRoZSBvdXRwdXQuXG4gICAgJGRpclNlbGVjdG9yczogYXBwZW5kKCRkaXJTZWxlY3RvcnMsICRkaXJTZWxlY3RvciwgY29tbWEpO1xuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IEZpcmVmb3guXG4gIEBpZiBsZW5ndGgoJGRpclNlbGVjdG9ycykgPiAwIHtcbiAgICBAYXQtcm9vdCAjeyRkaXJTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuICAvL31cbn1cblxuQG1peGluIGx0cigpIHtcbiAgQGNvbnRlbnQ7XG59XG5cblxuLy8gU1ZHIEJhY2tncm91bmQgSW1hZ2UgTWl4aW5cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3ZnXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gc3ZnLWJhY2tncm91bmQtaW1hZ2UoJHN2ZywgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAkdXJsOiB1cmwtZW5jb2RlKCRzdmcpO1xuICAkdmlld0JveDogc3RyLXNwbGl0KHN0ci1leHRyYWN0KCRzdmcsIFwidmlld0JveD0nXCIsIFwiJ1wiKSwgXCIgXCIpO1xuXG4gIEBpZiAkZmxpcC1ydGwgIT0gdHJ1ZSBvciAkdmlld0JveCA9PSBudWxsIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyR1cmx9XCIpO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgJHRyYW5zZm9ybTogXCJ0cmFuc2Zvcm09J3RyYW5zbGF0ZSgje250aCgkdmlld0JveCwgMyl9LCAwKSBzY2FsZSgtMSwgMSknXCI7XG4gICAgJGZsaXBwZWQtdXJsOiAkc3ZnO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxwYXRoXCIsIFwiPHBhdGggI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8bGluZVwiLCBcIjxsaW5lICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPHBvbHlnb25cIiwgXCI8cG9seWdvbiAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogdXJsLWVuY29kZSgkZmxpcHBlZC11cmwpO1xuXG4gICAgQGluY2x1ZGUgbHRyICgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JHVybH1cIik7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcImRhdGE6aW1hZ2Uvc3ZnK3htbDtjaGFyc2V0PXV0Zi04LCN7JGZsaXBwZWQtdXJsfVwiKTtcbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHByb3BlcnR5IGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHktaG9yaXpvbnRhbCgkcHJvcCwgJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGlmICRzdGFydCA9PSAwIGFuZCAkZW5kID09IDAge1xuICAgICN7JHByb3B9LWxlZnQ6ICRzdGFydDtcbiAgICAjeyRwcm9wfS1yaWdodDogJGVuZDtcblxuICB9IEBlbHNlIHtcbiAgICAtd2Via2l0LSN7JHByb3B9LXN0YXJ0OiAkc3RhcnQ7XG4gICAgI3skcHJvcH0taW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgLXdlYmtpdC0jeyRwcm9wfS1lbmQ6ICRlbmQ7XG4gICAgI3skcHJvcH0taW5saW5lLWVuZDogJGVuZDtcbiAgfVxufVxuXG4vLyBBZGQgcHJvcGVydHkgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHByb3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7Ym9vbGVhbn0gJGNvbnRlbnQgaW5jbHVkZSBjb250ZW50IG9yIHVzZSBkZWZhdWx0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcHJvcGVydHkoJHByb3AsICR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKCRwcm9wLCAkc3RhcnQsICRlbmQpO1xuICAjeyRwcm9wfS10b3A6ICR0b3A7XG4gICN7JHByb3B9LWJvdHRvbTogJGJvdHRvbTtcbn1cblxuLy8gQWRkIHBhZGRpbmcgaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChwYWRkaW5nLCAkc3RhcnQsICRlbmQpO1xufVxuXG4vLyBBZGQgcGFkZGluZyBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b21cbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwYWRkaW5nKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShwYWRkaW5nLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgbWFyZ2luIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChtYXJnaW4sICRzdGFydCwgJGVuZCk7XG59XG5cbi8vIEFkZCBtYXJnaW4gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gbWFyZ2luKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShtYXJnaW4sICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBwb3NpdGlvbiBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0IC0gYW1vdW50IHRvIHBvc2l0aW9uIHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZCAtIGFtb3VudCB0byBsZWZ0OiAwOyBlbmRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBwb3NpdGlvbi1ob3Jpem9udGFsKCRzdGFydDogbnVsbCwgJGVuZDogbnVsbCkge1xuICBAaWYgJHN0YXJ0ID09ICRlbmQge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGxlZnQ6ICRzdGFydDtcbiAgICAgIHJpZ2h0OiAkZW5kO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGF0LXJvb3Qge1xuICAgICAgQHN1cHBvcnRzIChpbnNldC1pbmxpbmUtc3RhcnQ6IDApIHtcbiAgICAgICAgJiB7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLXN0YXJ0OiAkc3RhcnQ7XG4gICAgICAgICAgaW5zZXQtaW5saW5lLWVuZDogJGVuZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRPRE8gRlctMzc2NlxuICAgIEBhdC1yb290IHtcbiAgICAgIEBzdXBwb3J0cyBub3QgKGluc2V0LWlubGluZS1zdGFydDogMCkge1xuICAgICAgICAmIHtcbiAgICAgICAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICAgICAgICBsZWZ0OiAkc3RhcnQ7XG4gICAgICAgICAgICByaWdodDogJGVuZDtcbiAgICAgICAgICB9XG4gICAgICAgICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgICAgICAgbGVmdDogdW5zZXQ7XG4gICAgICAgICAgICByaWdodDogdW5zZXQ7XG5cbiAgICAgICAgICAgIGxlZnQ6ICRlbmQ7XG4gICAgICAgICAgICByaWdodDogJHN0YXJ0O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgcG9zaXRpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcG9zaXRpb24oJHRvcDogbnVsbCwgJGVuZDogbnVsbCwgJGJvdHRvbTogbnVsbCwgJHN0YXJ0OiBudWxsKSB7XG4gIEBpbmNsdWRlIHBvc2l0aW9uLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kKTtcbiAgdG9wOiAkdG9wO1xuICBib3R0b206ICRib3R0b207XG59XG5cbi8vIEFkZCBib3JkZXIgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gYm9yZGVyKCR0b3AsICRlbmQ6ICR0b3AsICRib3R0b206ICR0b3AsICRzdGFydDogJGVuZCkge1xuICBAaW5jbHVkZSBwcm9wZXJ0eShib3JkZXIsICR0b3AsICRlbmQsICRib3R0b20sICRzdGFydCk7XG59XG5cbi8vIEFkZCBib3JkZXIgcmFkaXVzIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Atc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wLWVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b20tZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbS1zdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIGJvcmRlci1yYWRpdXMoJHRvcC1zdGFydCwgJHRvcC1lbmQ6ICR0b3Atc3RhcnQsICRib3R0b20tZW5kOiAkdG9wLXN0YXJ0LCAkYm90dG9tLXN0YXJ0OiAkdG9wLWVuZCkge1xuICBAaWYgJHRvcC1zdGFydCA9PSAkdG9wLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLWVuZCBhbmQgJHRvcC1zdGFydCA9PSAkYm90dG9tLXN0YXJ0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBib3JkZXItcmFkaXVzOiAkdG9wLXN0YXJ0O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci10b3AtcmlnaHQtcmFkaXVzOiAkdG9wLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLWVuZDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICRib3R0b20tc3RhcnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYm9yZGVyLXRvcC1sZWZ0LXJhZGl1czogJHRvcC1lbmQ7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogJHRvcC1zdGFydDtcbiAgICAgIGJvcmRlci1ib3R0b20tcmlnaHQtcmFkaXVzOiAkYm90dG9tLXN0YXJ0O1xuICAgICAgYm9yZGVyLWJvdHRvbS1sZWZ0LXJhZGl1czogJGJvdHRvbS1lbmQ7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBkaXJlY3Rpb24gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRpciAtIERpcmVjdGlvbiBvbiBMVFJcbkBtaXhpbiBkaXJlY3Rpb24oJGRpcikge1xuICAkb3RoZXItZGlyOiBudWxsO1xuXG4gIEBpZiAkZGlyID09IGx0ciB7XG4gICAgJG90aGVyLWRpcjogcnRsO1xuICB9IEBlbHNlIHtcbiAgICAkb3RoZXItZGlyOiBsdHI7XG4gIH1cblxuICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgZGlyZWN0aW9uOiAkZGlyO1xuICB9XG4gIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICBkaXJlY3Rpb246ICRvdGhlci1kaXI7XG4gIH1cbn1cblxuLy8gQWRkIGZsb2F0IGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRzaWRlXG4vLyBAcGFyYW0ge3N0cmluZ30gJGRlY29yYXRvciAtICFpbXBvcnRhbnRcbkBtaXhpbiBmbG9hdCgkc2lkZSwgJGRlY29yYXRvcjogbnVsbCkge1xuICBAaWYgJHNpZGUgPT0gc3RhcnQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiBsZWZ0ICRkZWNvcmF0b3I7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkc2lkZSA9PSBlbmQge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGZsb2F0OiByaWdodCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBmbG9hdDogbGVmdCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgZmxvYXQ6ICRzaWRlICRkZWNvcmF0b3I7XG4gICAgfVxuICB9XG59XG5cbkBtaXhpbiBiYWNrZ3JvdW5kLXBvc2l0aW9uKCRob3Jpem9udGFsLCAkaG9yaXpvbnRhbC1hbW91bnQ6IG51bGwsICR2ZXJ0aWNhbDogbnVsbCwgJHZlcnRpY2FsLWFtb3VudDogbnVsbCkge1xuICBAaWYgJGhvcml6b250YWwgPT0gc3RhcnQgb3IgJGhvcml6b250YWwgPT0gZW5kIHtcbiAgICAkaG9yaXpvbnRhbC1sdHI6IG51bGw7XG4gICAgJGhvcml6b250YWwtcnRsOiBudWxsO1xuICAgIEBpZiAkaG9yaXpvbnRhbCA9PSBzdGFydCB7XG4gICAgICAkaG9yaXpvbnRhbC1sdHI6IGxlZnQ7XG4gICAgICAkaG9yaXpvbnRhbC1ydGw6IHJpZ2h0O1xuICAgIH0gQGVsc2Uge1xuICAgICAgJGhvcml6b250YWwtbHRyOiByaWdodDtcbiAgICAgICRob3Jpem9udGFsLXJ0bDogbGVmdDtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1sdHIgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBiYWNrZ3JvdW5kLXBvc2l0aW9uOiAkaG9yaXpvbnRhbC1ydGwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwgJGhvcml6b250YWwtYW1vdW50ICR2ZXJ0aWNhbCAkdmVydGljYWwtYW1vdW50O1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gdHJhbnNmb3JtLW9yaWdpbigkeC1heGlzLCAkeS1heGlzOiBudWxsKSB7XG4gIEBpZiAkeC1heGlzID09IHN0YXJ0IHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IHJpZ2h0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gZW5kIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBsZWZ0ICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIGlmICR4LWF4aXMgPT0gbGVmdCBvciAkeC1heGlzID09IHJpZ2h0IHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiAkeC1heGlzICR5LWF4aXM7XG4gICAgfVxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIHRyYW5zZm9ybS1vcmlnaW46IGNhbGMoMTAwJSAtICN7JHgtYXhpc30pICR5LWF4aXM7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCB0cmFuc2Zvcm0gZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRyYW5zZm9ybXMgLSBjb21tYSBzZXBhcmF0ZWQgbGlzdCBvZiB0cmFuc2Zvcm1zXG5AbWl4aW4gdHJhbnNmb3JtKCR0cmFuc2Zvcm1zLi4uKSB7XG4gICRleHRyYTogbnVsbDtcblxuICAkeDogbnVsbDtcbiAgJGx0ci10cmFuc2xhdGU6IG51bGw7XG4gICRydGwtdHJhbnNsYXRlOiBudWxsO1xuXG4gIEBlYWNoICR0cmFuc2Zvcm0gaW4gJHRyYW5zZm9ybXMge1xuICAgIEBpZiAoc3RyLWluZGV4KCR0cmFuc2Zvcm0sIHRyYW5zbGF0ZTNkKSkge1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJ3RyYW5zbGF0ZTNkKCcpO1xuICAgICAgJHRyYW5zZm9ybTogc3RyLXJlcGxhY2UoJHRyYW5zZm9ybSwgJyknKTtcblxuICAgICAgJGNvb3JkaW5hdGVzOiBzdHItc3BsaXQoJHRyYW5zZm9ybSwgJywnKTtcblxuICAgICAgJHg6IG50aCgkY29vcmRpbmF0ZXMsIDEpO1xuICAgICAgJHk6IG50aCgkY29vcmRpbmF0ZXMsIDIpO1xuICAgICAgJHo6IG50aCgkY29vcmRpbmF0ZXMsIDMpO1xuXG4gICAgICAkbHRyLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoJHgsICR5LCAkeik7XG4gICAgICAkcnRsLXRyYW5zbGF0ZTogdHJhbnNsYXRlM2QoY2FsYygtMSAqICN7JHh9KSwgJHksICR6KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgIEBpZiAkZXh0cmEgPT0gbnVsbCB7XG4gICAgICAgICRleHRyYTogJHRyYW5zZm9ybTtcbiAgICAgIH0gQGVsc2Uge1xuICAgICAgICAkZXh0cmE6ICRleHRyYSAkdHJhbnNmb3JtO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEBpZiAkeCA9PSAnMCcgb3IgJHggPT0gbnVsbCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgdHJhbnNmb3JtOiAkbHRyLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuICB9IEBlbHNlIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRsdHItdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm06ICRydGwtdHJhbnNsYXRlICRleHRyYTtcbiAgICB9XG4gIH1cbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgbWl4aW5zIGZvciBTQ1NTIGZyb20gZGlmZmVyZW50IGNvbXBvbmVudHNcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIEV4dHJhY3RlZCBmcm9tXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvY29tcG9uZW50cy9ncmlkL2dyaWQubWl4aW5zLnNjc3NcbiAqIGh0dHBzOi8vZ2l0aHViLmNvbS9pb25pYy10ZWFtL2lvbmljLWZyYW1ld29yay9ibG9iL21hc3Rlci9jb3JlL3NyYy9jb21wb25lbnRzL2l0ZW0vaXRlbS5taXhpbnMuc2Nzc1xuICovXG5cbi8vIFJlc3BvbnNpdmUgTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5cbi8vIENyZWF0ZXMgYSBmaXhlZCB3aWR0aCBmb3IgdGhlIGdyaWQgYmFzZWQgb24gdGhlIHNjcmVlbiBzaXplXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIG1ha2UtZ3JpZC13aWR0aHMoJHdpZHRoczogJGdyaWQtd2lkdGhzLCAkYnJlYWtwb2ludHM6ICRzY3JlZW4tYnJlYWtwb2ludHMpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQsICR3aWR0aCBpbiAkd2lkdGhzIHtcbiAgICBAaW5jbHVkZSBtZWRpYS1icmVha3BvaW50LXVwKCRicmVha3BvaW50LCAkYnJlYWtwb2ludHMpIHtcbiAgICAgIHdpZHRoOiAkd2lkdGg7XG4gICAgfVxuICB9XG5cbiAgbWF4LXdpZHRoOiAxMDAlO1xufVxuXG5cbi8vIEFkZHMgcGFkZGluZyB0byB0aGUgZWxlbWVudCBiYXNlZCBvbiBicmVha3BvaW50c1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtYWtlLWJyZWFrcG9pbnQtcGFkZGluZygkcGFkZGluZ3MpIHtcbiAgQGVhY2ggJGJyZWFrcG9pbnQgaW4gbWFwLWtleXMoJHBhZGRpbmdzKSB7XG4gICAgQGluY2x1ZGUgbWVkaWEtYnJlYWtwb2ludC11cCgkYnJlYWtwb2ludCkge1xuICAgICAgJHBhZGRpbmc6IG1hcC1nZXQoJHBhZGRpbmdzLCAkYnJlYWtwb2ludCk7XG5cbiAgICAgIEBpbmNsdWRlIHBhZGRpbmcoJHBhZGRpbmcpO1xuICAgIH1cbiAgfVxufVxuXG5cbi8vIEl0ZW0gTWl4aW5zXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gaXRlbS1wdXNoLXN2Zy11cmwoJGZpbGwpIHtcbiAgJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnOiBcIjxzdmcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyB2aWV3Qm94PScwIDAgMTIgMjAnPjxwYXRoIGQ9J00yLDIwbC0yLTJsOC04TDAsMmwyLTJsMTAsMTBMMiwyMHonIGZpbGw9JyN7JGZpbGx9Jy8+PC9zdmc+XCI7XG5cbiAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCB0cnVlKTtcbn1cbiIsIkB1c2UgXCJzYXNzOm1hdGhcIiBhcyBtYXRoO1xuXG4vKipcbiAqIEFwcCBjdXN0b20gbWl4aW5zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIG91ciBjdXN0b20gbWl4aW5zLlxuICovXG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCBibGFjayB0byBjcmVhdGUgaXRzIHNoYWRlLlxuLy8gRGVmYXVsdCB0byBib290c3RyYXAgbGV2ZWwgNi5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXNoYWRlLXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogNDglKSB7XG4gICAgQHJldHVybiBtaXgoIzAwMCwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCB3aGl0ZSB0byBjcmVhdGUgaXRzIHRpbnQuXG4vLyBEZWZhdWx0IHRvIGJvb3RzdHJhcCBsZXZlbCAtMTAuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci10aW50LXBlcmNlbnQoJGNvbG9yLCAkcGVyY2VudDogODAlKSB7XG4gICAgQHJldHVybiBtaXgoI2ZmZiwgJGNvbG9yLCAkcGVyY2VudCk7XG59XG5cbi8vIElvbmljIENvbG9yc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEdlbmVyYXRlcyB0aGUgY29sb3IgY2xhc3NlcyBhbmQgdmFyaWFibGVzIGJhc2VkIG9uIHRoZVxuLy8gY29sb3JzIG1hcFxuXG5AbWl4aW4gZ2VuZXJhdGUtY29sb3IoJGNvbG9yLW5hbWUsICRjb2xvcnMsICR0aGVtZSkge1xuICAgICRjb2xvci10aGVtZXM6IG1hcC1nZXQoJGNvbG9ycywgJGNvbG9yLW5hbWUpO1xuICAgICRiYXNlOiBtYXAtZ2V0KCRjb2xvci10aGVtZXMsICR0aGVtZSk7XG5cbiAgICBAaWYgJHRoZW1lID09ICdkYXJrJyB7XG4gICAgICAgICRiYXNlOiBtaXgobWFwLWdldCgkY29sb3ItdGhlbWVzLCAnbGlnaHQnKSwgd2hpdGUsIDgwJSkgIWRlZmF1bHQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgZ2VuZXJhdGUtY29sb3ItdmFyaWFudHMoJGNvbG9yLW5hbWUsICRiYXNlKTtcbn1cblxuQG1peGluIGdlbmVyYXRlLWNvbG9yLXZhcmlhbnRzKCRjb2xvci1uYW1lLCAkYmFzZSkge1xuICAgICRjb250cmFzdDogZ2V0X2NvbnRyYXN0X2NvbG9yKCRiYXNlKTtcbiAgICAkc2hhZGU6IGdldC1jb2xvci1zaGFkZS1wZXJjZW50KCRiYXNlKTtcbiAgICAkdGludDogZ2V0LWNvbG9yLXRpbnQtcGVyY2VudCgkYmFzZSk7XG5cbiAgICAtLSN7JGNvbG9yLW5hbWV9OiAjeyRiYXNlfTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LXNoYWRlOiAjeyRzaGFkZX07XG4gICAgLS0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcbiAgICAtLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0OiAjeyRjb250cmFzdH07XG5cbiAgICAvLyBJbnRlcm5hbCBpb25pYyB1c2Ugb25seS5cbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfTogdmFyKC0tI3skY29sb3ItbmFtZX0pO1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2U6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSk7XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tcmdiOiAje2NvbG9yLXRvLXJnYi1saXN0KCRiYXNlKX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3Q6ICN7JGNvbnRyYXN0fTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdC1yZ2I6ICN7Y29sb3ItdG8tcmdiLWxpc3QoJGNvbnRyYXN0KX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tc2hhZGU6ICN7JHNoYWRlfTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50OiAjeyR0aW50fTtcblxuICAgIC5pb24tY29sb3ItI3skY29sb3ItbmFtZX0ge1xuICAgICAgICAtLWlvbi1jb2xvcjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAgICAgLS1pb24tY29sb3ItYmFzZTogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWJhc2UpO1xuICAgICAgICAtLWlvbi1jb2xvci1yZ2I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1yZ2IpO1xuICAgICAgICAtLWlvbi1jb2xvci1jb250cmFzdDogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0KTtcbiAgICAgICAgLS1pb24tY29sb3ItY29udHJhc3QtcmdiOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QtcmdiKTtcbiAgICAgICAgLS1pb24tY29sb3Itc2hhZGU6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1zaGFkZSk7XG4gICAgICAgIC0taW9uLWNvbG9yLXRpbnQ6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS10aW50KTtcbiAgICB9XG59XG5cbkBtaXhpbiBjb3JlLWZvY3VzKCkge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xuICAgICY6OmFmdGVyIHtcbiAgICAgICAgQGluY2x1ZGUgcG9zaXRpb24oMCwgMCwgMCwgMCk7XG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgb3BhY2l0eTogMTtcbiAgICAgICAgei1pbmRleDogMTtcbiAgICAgICAgQGluY2x1ZGUgY29yZS1mb2N1cy1zdHlsZSgpO1xuICAgIH1cbn1cblxuQG1peGluIGNvcmUtZm9jdXMtc3R5bGUoKSB7XG4gICAgYm94LXNoYWRvdzogaW5zZXQgMCAwIHZhcigtLWExMXktZm9jdXMtd2lkdGgpIDFweCB2YXIoLS1hMTF5LWZvY3VzLWNvbG9yKTtcbiAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTtcbiAgICAvLyBUaGlja2VyIG9wdGlvbjpcbiAgICAvLyBib3JkZXI6IHZhcigtLWExMXktZm9jdXMtd2lkdGgpIHNvbGlkIHZhcigtLWExMXktZm9jdXMtY29sb3IpO1xufVxuXG5AbWl4aW4gY29yZS10cmFuc2l0aW9uKCRwcm9wZXJ0aWVzOiBhbGwsICRkdXJhdGlvbjogNTAwbXMsICR0aW1pbmctZnVuY3Rpb246IGVhc2UtaW4tb3V0KSB7XG4gICAgJHRyYW5zaXRpb25zOiAoKTtcbiAgICBAZWFjaCAkcHJvcGVydHkgaW4gJHByb3BlcnRpZXMge1xuICAgICAgJHRyYW5zaXRpb25zOiBhcHBlbmQoJHRyYW5zaXRpb25zLCAkcHJvcGVydHkgJGR1cmF0aW9uICR0aW1pbmctZnVuY3Rpb24sIGNvbW1hKTtcbiAgICB9XG5cbiAgICAtd2Via2l0LXRyYW5zaXRpb246ICR0cmFuc2l0aW9ucztcbiAgICB0cmFuc2l0aW9uOiAkdHJhbnNpdGlvbnM7XG59XG5cbkBtaXhpbiBzci1vbmx5KCkge1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICB3aWR0aDogMXB4O1xuICAgIGhlaWdodDogMXB4O1xuICAgIHBhZGRpbmc6IDA7XG4gICAgbWFyZ2luOiAtMXB4O1xuICAgIG92ZXJmbG93OiBoaWRkZW47XG4gICAgY2xpcDogcmVjdCgwLCAwLCAwLCAwKTtcbiAgICB3aGl0ZS1zcGFjZTogbm93cmFwO1xuICAgIGJvcmRlcjogMDtcbn1cblxuLyoqXG4gKiBTYW1lIGFzIGl0ZW0tcHVzaC1zdmctdXJsIGJ1dCBhZG1pdHMgZmxpcC1ydGxcbiAqL1xuQG1peGluIHB1c2gtYXJyb3ctY29sb3IoJGZpbGw6IDYyNjI2MiwgJGZsaXAtcnRsOiBmYWxzZSkge1xuICAgICRpdGVtLWRldGFpbC1wdXNoLXN2ZzogXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyIDIwJz48cGF0aCBkPSdNMiwyMGwtMi0ybDgtOEwwLDJsMi0ybDEwLDEwTDIsMjB6JyBmaWxsPScjeyRmaWxsfScvPjwvc3ZnPlwiO1xuXG4gICAgQGluY2x1ZGUgc3ZnLWJhY2tncm91bmQtaW1hZ2UoJGl0ZW0tZGV0YWlsLXB1c2gtc3ZnLCAkZmxpcC1ydGwpO1xufVxuXG5AbWl4aW4gYm9yZGVyLXN0YXJ0KCRweCwgJHR5cGU6IG51bGwsICRjb2xvcjogbnVsbCkge1xuICAgIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoYm9yZGVyLCAkcHggJHR5cGUgJGNvbG9yLCBudWxsKTtcbn1cblxuQG1peGluIGJvcmRlci1lbmQoJHB4LCAkdHlwZTogbnVsbCwgJGNvbG9yOiBudWxsKSB7XG4gICAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbChib3JkZXIsIG51bGwsICRweCAkdHlwZSAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1zdGFydCgkcHgsICR0eXBlLCAkY29sb3IpIHtcbiAgICAkc2FmZS1hcmVhLXBvc2l0aW9uOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRweH0pO1xuXG4gICAgQGluY2x1ZGUgYm9yZGVyLXN0YXJ0KCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLWJvcmRlci1lbmQoJHB4LCAkdHlwZSwgJGNvbG9yKSB7XG4gICAgJHNhZmUtYXJlYS1wb3NpdGlvbjogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JHB4fSk7XG5cbiAgICBAaW5jbHVkZSBib3JkZXItZW5kKCRzYWZlLWFyZWEtcG9zaXRpb24sICR0eXBlLCAkY29sb3IpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IG51bGw7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogbnVsbDtcblxuICAgIEBpZiAoJGVuZCkge1xuICAgICAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuICAgIH1cbiAgICBAaWYgKCRzdGFydCkge1xuICAgICAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgIH1cblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4tc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRlbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLW1hcmdpbi1lbmQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIG1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBudWxsO1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IG51bGw7XG5cbiAgICBAaWYgKCRlbmQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcbiAgICB9XG4gICAgQGlmICgkc3RhcnQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBhZGRpbmctc3RhcnQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLWVuZCgkc3RhcnQsICRlbmQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLXJpZ2h0KSArICN7JGVuZH0pO1xuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJHNhZmUtYXJlYS1lbmQpO1xufVxuXG5AbWl4aW4gc2FmZS1hcmVhLXBvc2l0aW9uKCR0b3A6IG51bGwsICRlbmQ6IG51bGwsICRib3R0b206IG51bGwsICRzdGFydDogbnVsbCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIHBvc2l0aW9uKCR0b3AsICRzYWZlLWFyZWEtZW5kLCAkYm90dG9tLCAkc2FmZS1hcmVhLXN0YXJ0KTtcbn1cblxuQG1peGluIGNvcmUtaGVhZGluZ3MoKSB7XG4gICAgaDEge1xuICAgICAgICBmb250LXNpemU6IDI2cHg7XG4gICAgfVxuICAgIGgyLCAuaXRlbS1oZWFkaW5nIHtcbiAgICAgICAgZm9udC1zaXplOiAyNHB4O1xuICAgIH1cbiAgICBoMyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICB9XG4gICAgaDQge1xuICAgICAgICBmb250LXNpemU6IDIwcHg7XG4gICAgfVxuICAgIGg1IHtcbiAgICAgICAgZm9udC1zaXplOiAxOHB4O1xuICAgIH1cbiAgICBoNiB7XG4gICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICB9XG59XG5cbkBtaXhpbiBkYXJrbW9kZSgpIHtcbiAgICAkcm9vdDogI3smfTtcblxuICAgIEBhdC1yb290ICN7YWRkLXJvb3Qtc2VsZWN0b3IoJHJvb3QsIFwiaHRtbC5kYXJrXCIpfSB7XG4gICAgICAgIEBjb250ZW50O1xuICAgIH1cbn1cblxuQG1peGluIGhvcml6b250YWxfc2Nyb2xsX2l0ZW0oJHdpZHRoLCAkbWluLXdpZHRoLCAkbWF4LXdpZHRoKSB7XG4gICAgZmxleDogMCAwICR3aWR0aDtcbiAgICBtaW4td2lkdGg6ICRtaW4td2lkdGg7XG4gICAgbWF4LXdpZHRoOiAkbWF4LXdpZHRoO1xuICAgIGFsaWduLXNlbGY6IHN0cmV0Y2g7XG4gICAgZGlzcGxheTogYmxvY2s7XG5cbiAgICBpb24tY2FyZCB7XG4gICAgICAgIC0tdmVydGljYWwtbWFyZ2luOiAxMHB4O1xuICAgICAgICAtLWhvcml6b250YWwtbWFyZ2luOiAxMHB4O1xuXG4gICAgICAgIHdpZHRoOiBjYWxjKDEwMCUgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikgLSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbikpO1xuICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIHZhcigtLXZlcnRpY2FsLW1hcmdpbikgLSB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pKTtcbiAgICAgICAgbWFyZ2luOiB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pIHZhcigtLWhvcml6b250YWwtbWFyZ2luKTtcblxuICAgICAgICBAbWVkaWEgKG1heC13aWR0aDogMzYwcHgpIHtcbiAgICAgICAgICAgIC0taG9yaXpvbnRhbC1tYXJnaW46IDZweDtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLy8gQ29sb3IgbWl4aW5zLlxuQGZ1bmN0aW9uIGdldF9icmlnaHRuZXNzKCRjb2xvcikge1xuICAgIEByZXR1cm4gbWF0aC5kaXYocmVkKCRjb2xvcikgKyBncmVlbigkY29sb3IpICsgYmx1ZSgkY29sb3IpLCAzKTtcbn1cblxuLy8gR2V0IHRoZSBiZXR0ZXIgY29sb3IgY29udHJhc3QgdXNpbmcgV0NBRyBhbGdvcnl0aG0uXG5AZnVuY3Rpb24gZ2V0X2NvbnRyYXN0X2NvbG9yKCRjb2xvcikge1xuICAgICRsdW1pYW5jZTogbHVtaW5hbmNlKCRjb2xvcik7XG5cbiAgICAvLyBXaGl0ZSBsdW1pYW5jZSBpcyAxLlxuICAgICR3aGl0ZUNvbnRyYXN0OiBtYXRoLmRpdigkbHVtaWFuY2UgKyAwLjA1LCAxICsgMC4wNSk7XG4gICAgLy8gV2hpdGUgbHVtaWFuY2UgaXMgMC5cbiAgICAkYmxhY2tDb250cmFzdDogbWF0aC5kaXYoMC4wNSwgJGx1bWlhbmNlICsgMC4wNSk7XG5cbiAgICBAcmV0dXJuIGlmKCR3aGl0ZUNvbnRyYXN0IDwgJGJsYWNrQ29udHJhc3QsIHdoaXRlLCBibGFjayk7XG59XG5cbi8vIENvbG9yIGNvbnRyYXN0IHVzaW5nIHlpcSBhcHJveGltYXRpb24gd2l0aCAxNTAgdGhyZXNob2xkLlxuQGZ1bmN0aW9uIGdldF9jb250cmFzdF9jb2xvcl95aXEoJGNvbG9yLCAkZGFyazogYmxhY2ssICRsaWdodDogd2hpdGUpIHtcbiAgICAkcjogcmVkKCRjb2xvcik7XG4gICAgJGc6IGdyZWVuKCRjb2xvcik7XG4gICAgJGI6IGJsdWUoJGNvbG9yKTtcblxuICAgICR5aXE6IG1hdGguZGl2KCgkciAqIDI5OSkgKyAoJGcgKiA1ODcpICsgKCRiICogMTE0KSwgMTAwMCk7XG5cbiAgICBAcmV0dXJuIGlmKCR5aXEgPj0gMTI4LCAkZGFyaywgJGxpZ2h0KTtcbn1cblxuLy8gV0NBRyBjb250cmFzdCBhbGdvcml0aG1cbkBmdW5jdGlvbiBjaGVjay1jb250cmFzdCgkZm9yZWdyb3VuZCwgJGJhY2tncm91bmQpIHtcbiAgICAkZm9yZWdyb3VuZEx1bWlhbmNlOiBsdW1pbmFuY2UoJGZvcmVncm91bmQpO1xuICAgICRiYWNrZ3JvdW5kTHVtaW5hbmNlOiBsdW1pbmFuY2UoJGJhY2tncm91bmQpO1xuXG4gICAgQGlmICgkYmFja2dyb3VuZEx1bWluYW5jZSA8ICRmb3JlZ3JvdW5kTHVtaWFuY2UpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkYmFja2dyb3VuZEx1bWluYW5jZSArIDAuMDUsICRmb3JlZ3JvdW5kTHVtaWFuY2UgKyAwLjA1KTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkZm9yZWdyb3VuZEx1bWlhbmNlICsgMC4wNSwgJGJhY2tncm91bmRMdW1pbmFuY2UgKyAwLjA1KTtcbiAgICB9XG59XG5cbkBmdW5jdGlvbiBsdW1pbmFuY2UoJGNvbG9yKSB7XG4gICAgJHI6IHJlZCgkY29sb3IpO1xuICAgICRnOiBncmVlbigkY29sb3IpO1xuICAgICRiOiBibHVlKCRjb2xvcik7XG5cbiAgICAkcjogY29tcG9uZW50LWx1bWluYW5jZSgkcik7XG4gICAgJGc6IGNvbXBvbmVudC1sdW1pbmFuY2UoJGcpO1xuICAgICRiOiBjb21wb25lbnQtbHVtaW5hbmNlKCRiKTtcblxuICAgIEByZXR1cm4gJHIgKiAwLjIxMjYgKyAkZyAqIDAuNzE1MiArICRiICogMC4wNzIyO1xufVxuXG5AZnVuY3Rpb24gY29tcG9uZW50LWx1bWluYW5jZSgkdmFsdWUpIHtcbiAgICAkdmFsdWU6IG1hdGguZGl2KCR2YWx1ZSwgMjU1KTtcblxuICAgIEBpZiAoJHZhbHVlIDw9IDAuMDM5MjgpIHtcbiAgICAgICAgQHJldHVybiBtYXRoLmRpdigkdmFsdWUsIDEyLjkyKTtcbiAgICB9IEBlbHNlIHtcbiAgICAgICAgQHJldHVybiBtYXRoLnBvdyhtYXRoLmRpdigkdmFsdWUgKyAwLjA1NSwgMS4wNTUpLCAyLjQpO1xuICAgIH1cbn1cbiIsIi8qXG4gKiBBcHAgQ3VzdG9tIEFwcCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBhbGwgY3VzdG9tIGFwcCB2YXJpYWJsZXMuXG4gKi9cbiIsIi8qXG4gKiBBcHAgR2xvYmFsIHZhcmlhYmxlcyBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBQbGFjZSBoZXJlIGFsbCBnbG9iYWwgdmFyaWFibGVzLlxuICovXG5cbiR3aGl0ZTogICAgICAgI2ZmZmZmZiAhZGVmYXVsdDtcbiRncmF5LTEwMDogICAgI2Y4ZjlmYSAhZGVmYXVsdDtcbiRncmF5LTIwMDogICAgI2U5ZWNlZiAhZGVmYXVsdDtcbiRncmF5LTMwMDogICAgI2RlZTJlNiAhZGVmYXVsdDsgLy8gU3Ryb2tlXG4kZ3JheS00MDA6ICAgICNjZWQ0ZGEgIWRlZmF1bHQ7XG4kZ3JheS01MDA6ICAgICM4Zjk1OWUgIWRlZmF1bHQ7IC8vIFN0cm9rZSBvbiBpbnB1dHNcbiRncmF5LTYwMDogICAgIzZhNzM3YiAhZGVmYXVsdDtcbiRncmF5LTcwMDogICAgIzQ5NTA1NyAhZGVmYXVsdDtcbiRncmF5LTgwMDogICAgIzM0M2E0MCAhZGVmYXVsdDtcbiRncmF5LTkwMDogICAgIzI4MjgyOCAhZGVmYXVsdDsgLy8gQ29weSB0ZXh0XG4kYmxhY2s6ICAgICAgICMwMDAwMDAgIWRlZmF1bHQ7IC8vIEF2b2lkIHVzYWdlXG5cbiRibHVlOiAgICAgICAgIzBmNmNiZiAhZGVmYXVsdDtcbiRjeWFuOiAgICAgICAgIzAwODE5NiAhZGVmYXVsdDsgLy8gTm90IHVzZWQuXG4kZ3JlZW46ICAgICAgICMzNTdhMzIgIWRlZmF1bHQ7XG4kcmVkOiAgICAgICAgICNjYTMxMjAgIWRlZmF1bHQ7XG4keWVsbG93OiAgICAgICNmMGFkNGUgIWRlZmF1bHQ7XG5cbiRicmFuZC1jb2xvcjogI2Y5ODAxMiAhZGVmYXVsdDtcblxuJHRleHQtY29sb3I6ICAgICAgICAgICAgICAgJGdyYXktOTAwICFkZWZhdWx0O1xuJHRleHQtY29sb3ItcmdiOiAgICAgICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3IpICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyazogICAgICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJHRleHQtY29sb3ItZGFyay1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJHRleHQtY29sb3ItZGFyaykgIWRlZmF1bHQ7XG5cbiRiYWNrZ3JvdW5kLWNvbG9yOiAgICAgICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kYmFja2dyb3VuZC1jb2xvci1yZ2I6ICAgICAgY29sb3ItdG8tcmdiLWxpc3QoJGJhY2tncm91bmQtY29sb3IpICFkZWZhdWx0O1xuJGJhY2tncm91bmQtY29sb3ItZGFyazogICAgICRncmF5LTkwMCAhZGVmYXVsdDsgLy8gIzFhMWExYVxuJGJhY2tncm91bmQtY29sb3ItZGFyay1yZ2I6IGNvbG9yLXRvLXJnYi1saXN0KCRiYWNrZ3JvdW5kLWNvbG9yLWRhcmspICFkZWZhdWx0O1xuXG4kaW9uLWl0ZW0tYmFja2dyb3VuZDogICAgICAkd2hpdGUgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1yZ2I6ICBjb2xvci10by1yZ2ItbGlzdCgkaW9uLWl0ZW0tYmFja2dyb3VuZCkgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrOiAkZ3JheS05MDAgIWRlZmF1bHQ7XG4kaW9uLWl0ZW0tYmFja2dyb3VuZC1kYXJrLXJnYjogY29sb3ItdG8tcmdiLWxpc3QoJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyaykgIWRlZmF1bHQ7XG5cbiRwcmltYXJ5OiAgICAkYnJhbmQtY29sb3IgIWRlZmF1bHQ7XG4kc2Vjb25kYXJ5OiAgJGdyYXktMzAwICFkZWZhdWx0O1xuJGRhbmdlcjogICAgICRyZWQgIWRlZmF1bHQ7XG4kd2FybmluZzogICAgJHllbGxvdyAhZGVmYXVsdDtcbiRzdWNjZXNzOiAgICAkZ3JlZW4gIWRlZmF1bHQ7XG4kaW5mbzogICAgICAgJGJsdWUgIWRlZmF1bHQ7XG4kbGlnaHQ6ICAgICAgJGdyYXktMTAwICFkZWZhdWx0O1xuJG1lZGl1bTogICAgICRncmF5LTcwMCAhZGVmYXVsdDtcbiRkYXJrOiAgICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7XG5cbiRjb2xvcnM6ICAoXG4gICAgcHJpbWFyeTogKGxpZ2h0OiAkcHJpbWFyeSwgZGFyazogJHByaW1hcnkpLFxuICAgIHNlY29uZGFyeTogKGxpZ2h0OiAkc2Vjb25kYXJ5LCBkYXJrOiAkZ3JheS03MDApLFxuICAgIHN1Y2Nlc3M6IChsaWdodDogJHN1Y2Nlc3MpLFxuICAgIHdhcm5pbmc6IChsaWdodDogJHdhcm5pbmcpLFxuICAgIGRhbmdlcjogIChsaWdodDogJGRhbmdlciksXG4gICAgaW5mbzogKGxpZ2h0OiAkaW5mbyksXG4gICAgbGlnaHQ6IChsaWdodDogJGxpZ2h0LCBkYXJrOiAkZGFyayksXG4gICAgbWVkaXVtOiAobGlnaHQ6ICRtZWRpdW0sIGRhcms6ICRncmF5LTIwMCksXG4gICAgZGFyazogKGxpZ2h0OiAkZGFyaywgZGFyazogJGxpZ2h0KSxcbikgIWRlZmF1bHQ7XG5cbi8qKlxuICogTGF5b3V0IEJyZWFrcG9pbnRzXG4gKlxuICogaHR0cHM6Ly9pb25pY2ZyYW1ld29yay5jb20vZG9jcy9sYXlvdXQvZ3JpZCNkZWZhdWx0LWJyZWFrcG9pbnRzXG4gKi9cblxuLy8gVGhlIG1pbmltdW0gZGltZW5zaW9ucyBhdCB3aGljaCB5b3VyIGxheW91dCB3aWxsIGNoYW5nZSxcbi8vIGFkYXB0aW5nIHRvIGRpZmZlcmVudCBzY3JlZW4gc2l6ZXMsIGZvciB1c2UgaW4gbWVkaWEgcXVlcmllc1xuJHNjcmVlbi1icmVha3BvaW50czogKFxuICAgIHhzOiAwcHgsXG4gICAgc206IDU3NnB4LFxuICAgIG1kOiA3NjhweCxcbiAgICBsZzogOTkycHgsXG4gICAgdGFibGV0OiA5OTJweCxcbiAgICB4bDogMTIwMHB4XG4pICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaW1hZ2UtYmFja2dyb3VuZDogIzgxZWNlYywgIzc0YjlmZiwgI2EyOWJmZSwgI2RmZTZlOSwgIzAwYjg5NCwgIzA5ODRlMywgI2IyYmVjMywgI2ZkY2I2ZSwgI2ZkNzlhOCwgIzZjNWNlNyAhZGVmYXVsdDtcbiRjb3JlLWRkLXF1ZXN0aW9uLWNvbG9yczogI0ZGRkZGRiwgI0IwQzRERSwgI0RDRENEQywgI0Q4QkZEOCwgIzg3Q0VGQSwgI0RBQTUyMCwgI0ZGRDcwMCwgI0YwRTY4QyAhZGVmYXVsdDtcbiRjb3JlLXRleHQtaGlnaHRsaWdodC1iYWNrZ3JvdW5kLWNvbG9yOiBsaWdodGVuKCRibHVlLCA0MCUpICFkZWZhdWx0O1xuXG4kY29yZS1maXhlZC11cmw6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtZGFzaGJvYXJkLWxvZ286IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtYWx3YXlzLXNob3ctbWFpbi1tZW51OiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWZvcm1hdC10ZXh0LW5ldmVyLXNob3J0ZW46IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1oaWRlLWNvdXJzZWltYWdlLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLWNvdXJzZTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1oaWRlLXByb2dyZXNzLW9uLXNlY3Rpb24tc2VsZWN0b3I6IGZhbHNlICFkZWZhdWx0O1xuXG4kY29yZS1jb3Vyc2UtaGlkZS10aHVtYi1vbi1jYXJkczogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1jb3Vyc2UtdGh1bWItb24tY2FyZHMtYmFja2dyb3VuZDogbnVsbCAhZGVmYXVsdDtcbiRjb3JlLWNvdXJzZS1oaWRlLXByb2dyZXNzLW9uLWNhcmRzOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBsb2dpbiBwYWdlLlxuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUtZGFyazogJGNvcmUtbG9naW4tYnV0dG9uLW91dGxpbmUgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3ItZGFyazogJHRleHQtY29sb3ItZGFyayAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtZm9yZ290LXBhc3N3b3JkOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtbmVlZC1oZWxwOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWhpZGUtcXJjb2RlOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciBtb3JlIHBhZ2UuIChkZXByZWNhdGVkIG9uIDQuMClcbiRjb3JlLW1vcmUtaGlkZS1zaXRlaW5mbzogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWU6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmw6IGZhbHNlICFkZWZhdWx0O1xuXG4vLyBDb25maWd1cmF0aW9uIG9wdGlvbnMgZm9yIHVzZXIgcGFnZS5cbiRjb3JlLXVzZXItaGlkZS1zaXRlaW5mbzogJGNvcmUtbW9yZS1oaWRlLXNpdGVpbmZvICFkZWZhdWx0O1xuJGNvcmUtdXNlci1oaWRlLXNpdGVuYW1lOiAkY29yZS1tb3JlLWhpZGUtc2l0ZW5hbWUgIWRlZmF1bHQ7XG4kY29yZS11c2VyLWhpZGUtc2l0ZXVybDogJGNvcmUtbW9yZS1oaWRlLXNpdGV1cmwgIWRlZmF1bHQ7XG5cbi8vIEFjdGl2aXR5IGljb24gYmFja2dyb3VuZCBjb2xvcnMuXG4kYWN0aXZpdHktaWNvbi1jb2xvcnM6IChcbiAgICBhZG1pbmlzdHJhdGlvbjogIzVkNjNmNixcbiAgICBhc3Nlc3NtZW50OiAjZWI2NmEyLFxuICAgIGNvbGxhYm9yYXRpb246ICNmNzYzNGQsXG4gICAgY29tbXVuaWNhdGlvbjogIzExYTY3NixcbiAgICBjb250ZW50OiAjMzk5YmUyLFxuICAgIGludGVyZmFjZTogI2EzNzhmZlxuKSAhZGVmYXVsdDtcblxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNhdGVnb3J5OiAjOGUyNGFhICFkZWZhdWx0O1xuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvdXJzZTogJHJlZCAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1ncm91cDogJHllbGxvdyAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS11c2VyOiAkYmx1ZSAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1zaXRlOiAkZ3JlZW4gIWRlZmF1bHQ7XG5cbi8vIENhbGVuZGFyIGV2ZW50IGNhdGVnb3J5IGJhY2tncm91bmQgY29sb3JzLlxuJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvbG9yczogKFxuICAgIGNhdGVnb3J5OiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY2F0ZWdvcnksXG4gICAgY291cnNlOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktY291cnNlLFxuICAgIGdyb3VwOiAkY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktZ3JvdXAsXG4gICAgdXNlcjogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXVzZXIsXG4gICAgc2l0ZTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LXNpdGUsXG4pICFkZWZhdWx0O1xuIiwiQHVzZSBcInRoZW1lL2dsb2JhbHNcIiBhcyAqO1xuXG46aG9zdCB7XG4gICAgaW9uLWNvbnRlbnQsXG4gICAgaW9uLWxpc3Qge1xuICAgICAgICAtLWJhY2tncm91bmQ6IHZhcigtLWNvcmUtbG9naW4tYmFja2dyb3VuZCk7XG4gICAgICAgIC0taW9uLWl0ZW0tYmFja2dyb3VuZDogdmFyKC0tY29yZS1sb2dpbi1iYWNrZ3JvdW5kKTtcbiAgICAgICAgLS1jb2xvcjogdmFyKC0tY29yZS1sb2dpbi10ZXh0LWNvbG9yKTtcbiAgICB9XG5cbiAgICBpb24taXRlbSBpb24tbGFiZWwge1xuICAgICAgICAtLWNvbG9yOiB2YXIoLS1jb3JlLWxvZ2luLXRleHQtY29sb3IpO1xuXG4gICAgICAgIHAsIGgyLCBoMywgLmNvcmUtb2F1dGgtaWNvbiB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29sb3IpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW9uLWJ1dHRvbi5jb3JlLWJ1dHRvbi1hcy1saW5rIHtcbiAgICAgICAgLS1jb2xvcjogdmFyKC0tY29yZS1sb2dpbi10ZXh0LWNvbG9yKTtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uLWNvbG9yOiB2YXIoLS1jb3JlLWxvZ2luLXRleHQtY29sb3IpO1xuXG4gICAgICAgIGlvbi1sYWJlbCB7XG4gICAgICAgICAgICBjb2xvcjogdmFyKC0tY29yZS1sb2dpbi10ZXh0LWNvbG9yKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbiAgICAuY29yZS1sb2dpbi1yZWNvbm5lY3Qtd2FybmluZyB7XG4gICAgICAgIG1hcmdpbjogMHB4IDBweCAzMnB4IDBweDtcbiAgICB9XG5cbiAgICAuY29yZS1sb2dpbi1pbmZvLWJveCB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDMycHg7XG5cbiAgICAgICAgLmNvcmUtbG9naW4tc2l0ZSB7XG4gICAgICAgICAgICAuY29yZS1sb2dpbi1zaXRlLWxvZ28ge1xuICAgICAgICAgICAgICAgIHdpZHRoOiA5MCU7XG4gICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAzMDBweDtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDBweCBhdXRvO1xuXG4gICAgICAgICAgICAgICAgaW1nIHtcbiAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiAxMDAlO1xuICAgICAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAxMDRweDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jb3JlLXNpdGVuYW1lIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMnJlbTtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiA4cHg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC5jb3JlLXNpdGV1cmwge1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDhweDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAuY29yZS1sb2dpbi1zaXRlICsgLmNvcmUtbG9naW4tdXNlciB7XG4gICAgICAgICAgICBtYXJnaW4tdG9wOiAyNHB4O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgY29yZS11c2VyLWF2YXRhci5sYXJnZS1hdmF0YXIge1xuICAgICAgICAtLWNvcmUtYXZhdGFyLXNpemU6IHZhcigtLWNvcmUtbGFyZ2UtYXZhdGFyLXNpemUpO1xuICAgIH1cblxuICAgIC5jb3JlLWxvZ2luLWZ1bGxuYW1lIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBtYXJnaW4tYm90dG9tOiAwcHg7XG4gICAgfVxuXG4gICAgLmNvcmUtbG9naW4tbWV0aG9kcyB7XG4gICAgICAgIGZvcm0gLml0ZW0uaXRlbS1pbnB1dCB7XG4gICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgZm9ybSAuaXRlbSxcbiAgICAgICAgZm9ybSAuaXRlbSBpb24tbGFiZWwge1xuICAgICAgICAgICAgLS1iYWNrZ3JvdW5kOiB2YXIoLS1jb3JlLWxvZ2luLWlucHV0LWJhY2tncm91bmQpO1xuICAgICAgICAgICAgLS1jb2xvcjogdmFyKC0tY29yZS1sb2dpbi1pbnB1dC1jb2xvcik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBpb24tYnV0dG9uIHtcbiAgICAgICAgbWFyZ2luLWxlZnQ6IDBweDtcbiAgICAgICAgbWFyZ2luLXJpZ2h0OiAwcHg7XG4gICAgfVxuXG4gICAgLmNvcmUtbG9naW4tZm9yZ290dGVuLXBhc3N3b3JkIHtcbiAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgfVxuXG4gICAgQGlmICgkY29yZS1sb2dpbi1oaWRlLWZvcmdvdC1wYXNzd29yZCkge1xuICAgICAgICAuY29yZS1sb2dpbi1mb3Jnb3R0ZW4tcGFzc3dvcmQge1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBpZiAoJGNvcmUtZml4ZWQtdXJsKSB7XG4gICAgICAgIC5jb3JlLXNpdGVuYW1lLCAuY29yZS1zaXRldXJsIHtcbiAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBAaWYgKCRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lKSB7XG4gICAgICAgIGZvcm0gaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICAtLWJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgLS1jb2xvcjogdmFyKC0tY29yZS1sb2dpbi1iYWNrZ3JvdW5kKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIEBpZiAoJGNvcmUtbG9naW4tbG9hZGluZy1jb2xvcikge1xuICAgICAgICBjb3JlLWxvYWRpbmcge1xuICAgICAgICAgICAgLS1sb2FkaW5nLWJhY2tncm91bmQ6IHZhcigtLWNvcmUtbG9naW4tYmFja2dyb3VuZCk7XG4gICAgICAgICAgICAtLWxvYWRpbmctdGV4dC1jb2xvcjogI3skY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yfTtcbiAgICAgICAgICAgIC0tbG9hZGluZy1zcGlubmVyOiAjeyRjb3JlLWxvZ2luLWxvYWRpbmctY29sb3J9O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLmNvcmUtbG9naW4tbWV0aG9kcy1zZXBhcmF0b3Ige1xuICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgIHBhZGRpbmc6IDhweCAwO1xuXG4gICAgICAgIHNwYW4ge1xuICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tY29yZS1sb2dpbi1iYWNrZ3JvdW5kKTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAgOHB4O1xuICAgICAgICB9XG5cbiAgICAgICAgJjo6YmVmb3JlIHtcbiAgICAgICAgICAgIGhlaWdodDogMXB4O1xuICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xuICAgICAgICAgICAgdG9wOiA1MCU7XG4gICAgICAgICAgICBsZWZ0OiAwcHg7XG4gICAgICAgICAgICByaWdodDogMHB4O1xuICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLWdyYXktMzAwKTtcbiAgICAgICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgICAgICB6LWluZGV4OiAtMTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgQGlmICgkY29yZS1sb2dpbi1oaWRlLXFyY29kZSkge1xuICAgICAgICAuY29yZS1sb2dpbi1zaXRlLXFyY29kZSxcbiAgICAgICAgLmNvcmUtbG9naW4tbWV0aG9kcy1zZXBhcmF0b3Ige1xuICAgICAgICAgICAgZGlzcGxheTogbm9uZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC5jb3JlLWxvZ2luLWxvZ2luLWJ1dHRvbiB7XG4gICAgICAgIG1hcmdpbi10b3A6IDMycHg7XG4gICAgfVxuXG4gICAgLmNvcmUtbG9naW4tbG9naW4taW5icm93c2VyLWJ1dHRvbiB7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICB9XG5cbiAgICBwLmNvcmUtbG9naW4taW5icm93c2VyIHtcbiAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICBtYXJnaW4tdG9wOiA4cHg7XG4gICAgICAgIG1hcmdpbi1ib3R0b206IDhweDtcbiAgICB9XG5cbiAgICAuY29yZS1sb2dpbi1zaWduLXVwIHtcbiAgICAgICAgbWFyZ2luLXRvcDogOHB4O1xuICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tZ3JheS0zMDApO1xuICAgIH1cblxuICAgIC5jb3JlLWxvZ2luLWlkZW50aXR5LXByb3ZpZGVycyBoMixcbiAgICAuY29yZS1sb2dpbi1zaWduLXVwIGgyIHtcbiAgICAgICAgbWFyZ2luLXRvcDogMTZweDtcbiAgICAgICAgbWFyZ2luLWJvdHRvbTogOHB4O1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgfVxuXG59XG5cbjpob3N0LWNvbnRleHQoaHRtbC5kYXJrKSB7XG4gICAgQGlmICgkY29yZS1sb2dpbi1idXR0b24tb3V0bGluZS1kYXJrKSB7XG4gICAgICAgIGZvcm0gaW9uLWJ1dHRvbiB7XG4gICAgICAgICAgICAtLWJhY2tncm91bmQ6IHdoaXRlO1xuICAgICAgICAgICAgLS1jb2xvcjogdmFyKC0tY29yZS1sb2dpbi1iYWNrZ3JvdW5kLWRhcmspO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgQGlmICgkY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yLWRhcmspIHtcbiAgICAgICAgY29yZS1sb2FkaW5nIHtcbiAgICAgICAgICAgIC0tbG9hZGluZy1iYWNrZ3JvdW5kOiB2YXIoLS1jb3JlLWxvZ2luLWJhY2tncm91bmQtZGFyayk7XG4gICAgICAgICAgICAtLWxvYWRpbmctdGV4dC1jb2xvcjogI3skY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yLWRhcmt9O1xuICAgICAgICAgICAgLS1sb2FkaW5nLXNwaW5uZXI6ICN7JGNvcmUtbG9naW4tbG9hZGluZy1jb2xvci1kYXJrfTtcbiAgICAgICAgfVxuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"names":["Validators","CoreDomUtils","CoreTextUtils","CoreUtils","CoreWS","Translate","CoreUserProfileFieldDelegate","CoreLoginHelper","CoreNavigator","CoreForms","CoreRecaptchaComponent","CorePath","CoreDom","CoreSitesFactory","EMAIL_SIGNUP_FEATURE_NAME","i0","ɵɵelementStart","ɵɵlistener","CoreLoginEmailSignupPage_ion_button_10_Template_ion_button_click_0_listener","ɵɵrestoreView","_r4","ctx_r3","ɵɵnextContext","ɵɵresetView","showAuthInstructions","ɵɵelement","ɵɵelementEnd","ɵɵattribute","ɵɵpipeBind1","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","ɵɵproperty","ctx_r5","signupUrl","country_r11","code","ɵɵtextInterpolate","name","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_Template_form_ngSubmit_0_listener","$event","_r13","ctx_r12","verifyAge","ɵɵtemplate","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_ion_select_option_25_Template","ctx_r7","ageVerificationForm","countries","valid","ctx_r15","site","siteUrl","ctx_r16","siteName","ctx_r17","ctx_r18","settings","passwordpolicy","nameField_r24","ɵɵpropertyInterpolate","ctx_r19","signupForm","controls","namefieldsErrors","country_r25","field_r28","ctx_r27","ɵɵelementContainerStart","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_core_user_profile_field_5_Template","ɵɵelementContainerEnd","category_r26","fields","ctx_r22","recaptchapublickey","captcha","formSubmitClicked","ctx_r23","sitepolicy","ɵɵsanitizeUrl","policyagreed","policyErrors","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_Template_form_ngSubmit_0_listener","_r30","ctx_r29","create","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_4_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_5_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_6_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_p_28_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_item_51_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ion_select_option_69_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_70_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_71_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_ng_container_72_Template","ctx_r8","displaySiteUrl","username","usernameErrors","password","passwordErrors","email","emailErrors","escapeMail","value","email2","email2Errors","namefields","categories","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_1_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_form_2_Template","ctx_r6","ageDigitalConsentVerification","CoreLoginEmailSignupPage_core_loading_12_ion_list_2_Template","CoreLoginEmailSignupPage_core_loading_12_ng_container_3_Template","ctx_r1","settingsLoaded","allRequiredSupported","ctx_r31","ctx_r32","supportName","ctx_r33","supportEmail","CoreLoginEmailSignupPage_ion_list_14_ion_button_15_Template_ion_button_click_0_listener","_r36","ctx_r35","showContactOnSite","CoreLoginEmailSignupPage_ion_list_14_h2_3_Template","CoreLoginEmailSignupPage_ion_list_14_p_12_Template","CoreLoginEmailSignupPage_ion_list_14_p_13_Template","CoreLoginEmailSignupPage_ion_list_14_ion_button_15_Template","ctx_r2","CoreLoginEmailSignupPage","constructor","fb","elementRef","changeDetector","authInstructions","recaptcharesponse","isMinor","group","age","required","countryControl","control","addControl","compose","getErrorMessages","undefined","ngOnInit","getRouteParam","showErrorModal","back","makeUnauthenticatedSite","shouldDisplayInformativeLinks","fetchData","finally","completeFormGroup","_this$settings","_this$settings2","_this$settings5","defaultcity","signUpCountryControl","country","i","_this$settings3","_this$settings4","requiredTrue","_this","_asyncToGenerator","siteConfig","getPublicConfig","concatenatePaths","httpswwwroot","configValid","treatSiteConfig","result","ignoreErrors","callAjax","getURL","status","getSignupSettings","error","_this2","hasRequiredUnsupportedField","profilefields","Error","instant","formatProfileFieldsForSignup","setValue","forEach","field","getCountryListSorted","_this3","_this3$siteConfig","registerauth","isFeatureDisabled","getSiteName","authinstructions","agedigitalconsentverification","supportname","supportemail","$a","e","_this4","_this4$settings","_this4$siteConfig","_this4$settings2","preventDefault","stopPropagation","markAsDirty","detectChanges","errorFound","scrollToInputError","nativeElement","modal","showModalLoading","params","trim","toLowerCase","firstname","cleanTags","lastname","city","launchurl","redirect","prepareForSSOLogin","_this4$settings3","customprofilefields","getDataForFields","success","triggerFormSubmittedEvent","signupFormElement","message","showAlert","_this4$recaptchaCompo","_result$warnings","recaptchaComponent","expireRecaptchaAnswer","warning","warnings","item","showErrorModalDefault","dismiss","text","escapeForRegex","viewText","openInBrowser","showBrowserWarning","_this5","parseInt","ageFormElement","_this5$signUpCountryC","_unused","ɵɵdirectiveInject","i1","FormBuilder","ElementRef","ChangeDetectorRef","selectors","viewQuery","CoreLoginEmailSignupPage_Query","rf","ctx","CoreLoginEmailSignupPage_ion_button_10_Template","CoreLoginEmailSignupPage_core_loading_12_Template","CoreLoginEmailSignupPage_ion_list_14_Template"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/login/pages/email-signup/email-signup.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/login/pages/email-signup/email-signup.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, ViewChild, ElementRef, OnInit, ChangeDetectorRef } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators, FormControl } from '@angular/forms';\n\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreCountry, CoreUtils } from '@services/utils/utils';\nimport { CoreWS, CoreWSExternalWarning } from '@services/ws';\nimport { Translate } from '@singletons';\nimport { CoreSitePublicConfigResponse, CoreUnauthenticatedSite } from '@classes/sites/unauthenticated-site';\nimport { CoreUserProfileFieldDelegate } from '@features/user/services/user-profile-field-delegate';\n\nimport {\n    AuthEmailSignupProfileFieldsCategory,\n    AuthEmailSignupSettings,\n    CoreLoginHelper,\n} from '@features/login/services/login-helper';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreForms } from '@singletons/form';\nimport { CoreRecaptchaComponent } from '@components/recaptcha/recaptcha';\nimport { CorePath } from '@singletons/path';\nimport { CoreDom } from '@singletons/dom';\nimport { CoreSitesFactory } from '@services/sites-factory';\nimport { EMAIL_SIGNUP_FEATURE_NAME } from '@features/login/constants';\n\n/**\n * Page to signup using email.\n */\n@Component({\n    selector: 'page-core-login-email-signup',\n    templateUrl: 'email-signup.html',\n    styleUrls: ['../../login.scss'],\n})\nexport class CoreLoginEmailSignupPage implements OnInit {\n\n    @ViewChild(CoreRecaptchaComponent) recaptchaComponent?: CoreRecaptchaComponent;\n    @ViewChild('ageForm') ageFormElement?: ElementRef;\n    @ViewChild('signupFormEl') signupFormElement?: ElementRef;\n\n    signupForm: FormGroup;\n    site!: CoreUnauthenticatedSite;\n    displaySiteUrl = false;\n    siteConfig?: CoreSitePublicConfigResponse;\n    siteName?: string;\n    authInstructions = '';\n    settings?: AuthEmailSignupSettings;\n    countries?: CoreCountry[];\n    categories?: AuthEmailSignupProfileFieldsCategory[];\n    settingsLoaded = false;\n    allRequiredSupported = true;\n    signupUrl?: string;\n    formSubmitClicked = false;\n    captcha = {\n        recaptcharesponse: '',\n    };\n\n    // Data for age verification.\n    ageVerificationForm: FormGroup;\n    countryControl: FormControl;\n    signUpCountryControl?: FormControl;\n    isMinor = false; // Whether the user is minor age.\n    ageDigitalConsentVerification?: boolean; // Whether the age verification is enabled.\n    supportName?: string;\n    supportEmail?: string;\n\n    // Validation errors.\n    usernameErrors: Record<string, string>;\n    passwordErrors: Record<string, string>;\n    emailErrors: Record<string, string>;\n    email2Errors: Record<string, string>;\n    policyErrors: Record<string, string>;\n    namefieldsErrors?: Record<string, Record<string, string>>;\n\n    constructor(\n        protected fb: FormBuilder,\n        protected elementRef: ElementRef,\n        protected changeDetector: ChangeDetectorRef,\n    ) {\n        // Create the ageVerificationForm.\n        this.ageVerificationForm = this.fb.group({\n            age: ['', Validators.required],\n        });\n        this.countryControl = this.fb.control('', Validators.required);\n        this.ageVerificationForm.addControl('country', this.countryControl);\n\n        // Create the signupForm with the basic controls. More controls will be added later.\n        this.signupForm = this.fb.group({\n            username: ['', Validators.required],\n            password: ['', Validators.required],\n            email: ['', Validators.compose([Validators.required, Validators.email])],\n            email2: ['', Validators.compose([Validators.required, Validators.email])],\n        });\n\n        // Setup validation errors.\n        this.usernameErrors = CoreLoginHelper.getErrorMessages('core.login.usernamerequired');\n        this.passwordErrors = CoreLoginHelper.getErrorMessages('core.login.passwordrequired');\n        this.emailErrors = CoreLoginHelper.getErrorMessages('core.login.missingemail');\n        this.policyErrors = CoreLoginHelper.getErrorMessages('core.login.policyagree');\n        this.email2Errors = CoreLoginHelper.getErrorMessages(\n            'core.login.missingemail',\n            undefined,\n            'core.login.emailnotmatch',\n        );\n    }\n\n    /**\n     * Component initialized.\n     */\n    ngOnInit(): void {\n        const siteUrl = CoreNavigator.getRouteParam<string>('siteUrl');\n        if (!siteUrl) {\n            CoreDomUtils.showErrorModal('Site URL not supplied.');\n            CoreNavigator.back();\n\n            return;\n        }\n\n        this.site = CoreSitesFactory.makeUnauthenticatedSite(siteUrl);\n        this.displaySiteUrl = this.site.shouldDisplayInformativeLinks();\n\n        // Fetch the data.\n        this.fetchData().finally(() => {\n            this.settingsLoaded = true;\n        });\n    }\n\n    /**\n     * Complete the FormGroup using the settings received from server.\n     */\n    protected completeFormGroup(): void {\n        this.signupForm.addControl('city', this.fb.control(this.settings?.defaultcity || ''));\n        this.signUpCountryControl = this.fb.control(this.settings?.country || '');\n        this.signupForm.addControl('country', this.signUpCountryControl);\n\n        // Add the name fields.\n        for (const i in this.settings?.namefields) {\n            this.signupForm.addControl(this.settings?.namefields[i], this.fb.control('', Validators.required));\n        }\n\n        if (this.settings?.sitepolicy) {\n            this.signupForm.addControl('policyagreed', this.fb.control(false, Validators.requiredTrue));\n        }\n    }\n\n    /**\n     * Fetch the required data from the server.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchData(): Promise<void> {\n        try {\n            // Get site config.\n            this.siteConfig = await this.site.getPublicConfig();\n            this.signupUrl = CorePath.concatenatePaths(this.siteConfig.httpswwwroot, 'login/signup.php');\n\n            const configValid = await this.treatSiteConfig();\n            if (configValid) {\n                // Check content verification.\n                if (this.ageDigitalConsentVerification === undefined) {\n\n                    const result = await CoreUtils.ignoreErrors(\n                        CoreWS.callAjax<IsAgeVerificationEnabledWSResponse>(\n                            'core_auth_is_age_digital_consent_verification_enabled',\n                            {},\n                            { siteUrl: this.site.getURL() },\n                        ),\n                    );\n\n                    this.ageDigitalConsentVerification = !!result?.status;\n                }\n\n                await this.getSignupSettings();\n            }\n\n            this.completeFormGroup();\n        } catch (error) {\n            if (this.allRequiredSupported) {\n                CoreDomUtils.showErrorModal(error);\n            }\n        }\n    }\n\n    /**\n     * Get signup settings from server.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async getSignupSettings(): Promise<void> {\n        this.settings = await CoreWS.callAjax<AuthEmailSignupSettings>(\n            'auth_email_get_signup_settings',\n            {},\n            { siteUrl: this.site.getURL() },\n        );\n\n        if (CoreUserProfileFieldDelegate.hasRequiredUnsupportedField(this.settings.profilefields)) {\n            this.allRequiredSupported = false;\n\n            throw new Error(Translate.instant('core.login.signuprequiredfieldnotsupported'));\n        }\n\n        this.categories = CoreLoginHelper.formatProfileFieldsForSignup(this.settings.profilefields);\n\n        if (this.settings.recaptchapublickey) {\n            this.captcha.recaptcharesponse = ''; // Reset captcha.\n        }\n\n        if (!this.countryControl.value) {\n            this.countryControl.setValue(this.settings.country || '');\n        }\n\n        const namefieldsErrors = {};\n        if (this.settings.namefields) {\n            this.settings.namefields.forEach((field) => {\n                namefieldsErrors[field] = CoreLoginHelper.getErrorMessages('core.login.missing' + field);\n            });\n        }\n        this.namefieldsErrors = namefieldsErrors;\n\n        this.countries = await CoreUtils.getCountryListSorted();\n    }\n\n    /**\n     * Treat the site config, checking if it's valid and extracting the data we're interested in.\n     *\n     * @returns True if success.\n     */\n    protected async treatSiteConfig(): Promise<boolean> {\n        if (this.siteConfig?.registerauth == 'email' && !this.site.isFeatureDisabled(EMAIL_SIGNUP_FEATURE_NAME)) {\n            this.siteName = await this.site.getSiteName();\n\n            this.authInstructions = this.siteConfig.authinstructions;\n            this.ageDigitalConsentVerification = this.siteConfig.agedigitalconsentverification;\n            this.supportName = this.siteConfig.supportname;\n            this.supportEmail = this.siteConfig.supportemail;\n            this.countryControl.setValue(this.siteConfig.country || '');\n\n            return true;\n        } else {\n            CoreDomUtils.showErrorModal(\n                Translate.instant(\n                    'core.login.signupplugindisabled',\n                    { $a: Translate.instant('core.login.auth_email') },\n                ),\n            );\n            CoreNavigator.back();\n\n            return false;\n        }\n    }\n\n    /**\n     * Create account.\n     *\n     * @param e Event.\n     * @returns Promise resolved when done.\n     */\n    async create(e: Event): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.formSubmitClicked = true;\n\n        if (!this.signupForm.valid || (this.settings?.recaptchapublickey && !this.captcha.recaptcharesponse)) {\n            // Form not valid. Mark all controls as dirty to display errors.\n            for (const name in this.signupForm.controls) {\n                this.signupForm.controls[name].markAsDirty();\n            }\n            this.changeDetector.detectChanges();\n\n            // Scroll to the first element with errors.\n            const errorFound = await CoreDom.scrollToInputError(\n                this.elementRef.nativeElement,\n            );\n\n            if (!errorFound) {\n                // Input not found, show an error modal.\n                CoreDomUtils.showErrorModal('core.errorinvalidform', true);\n            }\n\n            return;\n        }\n\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        const params: SignupUserWSParams = {\n            username: this.signupForm.value.username.trim().toLowerCase(),\n            password: this.signupForm.value.password,\n            firstname: CoreTextUtils.cleanTags(this.signupForm.value.firstname),\n            lastname: CoreTextUtils.cleanTags(this.signupForm.value.lastname),\n            email: this.signupForm.value.email.trim(),\n            city: CoreTextUtils.cleanTags(this.signupForm.value.city),\n            country: this.signupForm.value.country,\n        };\n\n        if (this.siteConfig?.launchurl) {\n            params.redirect = CoreLoginHelper.prepareForSSOLogin(this.site.getURL(), undefined, this.siteConfig.launchurl);\n        }\n\n        // Get the recaptcha response (if needed).\n        if (this.settings?.recaptchapublickey && this.captcha.recaptcharesponse) {\n            params.recaptcharesponse = this.captcha.recaptcharesponse;\n        }\n\n        try {\n            // Get the data for the custom profile fields.\n            params.customprofilefields = await CoreUserProfileFieldDelegate.getDataForFields(\n                this.settings?.profilefields,\n                true,\n                'email',\n                this.signupForm.value,\n            );\n\n            const result = await CoreWS.callAjax<SignupUserWSResult>(\n                'auth_email_signup_user',\n                params,\n                { siteUrl: this.site.getURL() },\n            );\n\n            if (result.success) {\n\n                CoreForms.triggerFormSubmittedEvent(this.signupFormElement, true);\n\n                // Show alert and ho back.\n                const message = Translate.instant('core.login.emailconfirmsent', { $a: params.email });\n                CoreDomUtils.showAlert(Translate.instant('core.success'), message);\n                CoreNavigator.back();\n            } else {\n                this.recaptchaComponent?.expireRecaptchaAnswer();\n\n                const warning = result.warnings?.[0];\n                if (warning) {\n                    let error = warning.message;\n                    if (error == 'incorrect-captcha-sol' || (!error && warning.item == 'recaptcharesponse')) {\n                        error = Translate.instant('core.login.recaptchaincorrect');\n                    }\n\n                    CoreDomUtils.showErrorModal(error);\n                } else {\n                    CoreDomUtils.showErrorModal('core.login.usernotaddederror', true);\n                }\n            }\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'core.login.usernotaddederror', true);\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n    /**\n     * Escape mail to avoid special characters to be treated as a RegExp.\n     *\n     * @param text Initial mail.\n     * @returns Escaped mail.\n     */\n    escapeMail(text: string): string {\n        return CoreTextUtils.escapeForRegex(text);\n    }\n\n    /**\n     * Show authentication instructions.\n     */\n    showAuthInstructions(): void {\n        CoreTextUtils.viewText(Translate.instant('core.login.instructions'), this.authInstructions);\n    }\n\n    /**\n     * Show contact information on site (we have to display again the age verification form).\n     */\n    showContactOnSite(): void {\n        CoreUtils.openInBrowser(\n            CorePath.concatenatePaths(this.site.getURL(), '/login/verify_age_location.php'),\n            { showBrowserWarning: false },\n        );\n    }\n\n    /**\n     * Verify Age.\n     *\n     * @param e Event.\n     * @returns Promise resolved when done.\n     */\n    async verifyAge(e: Event): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (!this.ageVerificationForm.valid) {\n            CoreDomUtils.showErrorModal('core.errorinvalidform', true);\n\n            return;\n        }\n\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        const params = this.ageVerificationForm.value;\n\n        params.age = parseInt(params.age, 10); // Use just the integer part.\n\n        try {\n            const result = await CoreWS.callAjax<IsMinorWSResult>('core_auth_is_minor', params, { siteUrl: this.site.getURL() });\n\n            CoreForms.triggerFormSubmittedEvent(this.ageFormElement, true);\n\n            if (!result.status) {\n                if (this.countryControl.value) {\n                    this.signUpCountryControl?.setValue(this.countryControl.value);\n                }\n\n                // Not a minor, go ahead.\n                this.ageDigitalConsentVerification = false;\n            } else {\n                // Is a minor.\n                this.isMinor = true;\n            }\n        } catch {\n            // Something wrong, redirect to the site.\n            CoreDomUtils.showErrorModal('There was an error verifying your age, please try again using the browser.');\n        } finally {\n            modal.dismiss();\n        }\n    }\n\n}\n\n/**\n * Result of WS core_auth_is_age_digital_consent_verification_enabled.\n */\ntype IsAgeVerificationEnabledWSResponse = {\n    status: boolean; // True if digital consent verification is enabled, false otherwise.\n};\n\n/**\n * Params for WS auth_email_signup_user.\n */\ntype SignupUserWSParams = {\n    username: string; // Username.\n    password: string; // Plain text password.\n    firstname: string; // The first name(s) of the user.\n    lastname: string; // The family name of the user.\n    email: string; // A valid and unique email address.\n    city?: string; // Home city of the user.\n    country?: string; // Home country code.\n    recaptchachallengehash?: string; // Recaptcha challenge hash.\n    recaptcharesponse?: string; // Recaptcha response.\n    customprofilefields?: { // User custom fields (also known as user profile fields).\n        type: string; // The type of the custom field.\n        name: string; // The name of the custom field.\n        value: unknown; // Custom field value, can be an encoded json if required.\n    }[];\n    redirect?: string; // Redirect the user to this site url after confirmation.\n};\n\n/**\n * Result of WS auth_email_signup_user.\n */\ntype SignupUserWSResult = {\n    success: boolean; // True if the user was created false otherwise.\n    warnings?: CoreWSExternalWarning[];\n};\n\n/**\n * Result of WS core_auth_is_minor.\n */\ntype IsMinorWSResult = {\n    status: boolean; // True if the user is considered to be a digital minor, false if not.\n};\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n\n        <ion-title>\n            <h1>{{ 'core.login.newaccount' | translate }}</h1>\n        </ion-title>\n\n        <ion-buttons slot=\"end\">\n            <ion-button fill=\"clear\" *ngIf=\"authInstructions\" (click)=\"showAuthInstructions()\"\n                [attr.aria-label]=\"'core.login.instructions' | translate\">\n                <ion-icon slot=\"icon-only\" name=\"far-circle-question\" aria-hidden=\"true\" />\n            </ion-button>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content>\n    <core-loading [hideUntil]=\"settingsLoaded\" *ngIf=\"!isMinor\">\n        <div class=\"list-item-limited-width\">\n\n            <!-- Site has an unsupported required field. -->\n            <ion-list *ngIf=\"!allRequiredSupported\" class=\"ion-padding\">\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        {{ 'core.login.signuprequiredfieldnotsupported' | translate }}\n                    </ion-label>\n                </ion-item>\n                <ion-button expand=\"block\" [href]=\"signupUrl\" core-link autoLogin=\"no\" [showBrowserWarning]=\"false\">\n                    {{ 'core.openinbrowser' | translate }}\n                </ion-button>\n            </ion-list>\n\n            <ng-container *ngIf=\"allRequiredSupported && settingsLoaded && settings\">\n                <!-- Age verification. -->\n                <form *ngIf=\"ageDigitalConsentVerification\" [formGroup]=\"ageVerificationForm\" (ngSubmit)=\"verifyAge($event)\" #ageForm>\n\n                    <ion-item-divider class=\"ion-text-wrap\">\n                        <ion-label>\n                            <h2>{{ 'core.agelocationverification' | translate }}</h2>\n                        </ion-label>\n                    </ion-item-divider>\n\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.whatisyourage' | translate }}</span>\n                        </ion-label>\n                        <ion-input type=\"number\" name=\"age\" placeholder=\"0\" formControlName=\"age\" autocapitalize=\"none\" autocorrect=\"off\" />\n                    </ion-item>\n\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.wheredoyoulive' | translate }}</span>\n                        </ion-label>\n                        <ion-select name=\"country\" formControlName=\"country\" [cancelText]=\"'core.cancel' | translate\"\n                            [okText]=\"'core.ok' | translate\" [placeholder]=\"'core.login.selectacountry' | translate\">\n                            <ion-select-option value=\"\">{{ 'core.login.selectacountry' | translate }}</ion-select-option>\n                            <ion-select-option *ngFor=\"let country of countries\" [value]=\"country.code\">{{country.name}}</ion-select-option>\n                        </ion-select>\n                    </ion-item>\n\n                    <!-- Submit button. -->\n                    <div class=\"ion-padding\">\n                        <ion-button expand=\"block\" type=\"submit\" [disabled]=\"!ageVerificationForm.valid\">\n                            {{ 'core.proceed' | translate }}\n                        </ion-button>\n                    </div>\n\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label>\n                            <p class=\"item-heading\">{{ 'core.whyisthisrequired' | translate }}</p>\n                            <p>{{ 'core.explanationdigitalminor' | translate }}</p>\n                        </ion-label>\n                    </ion-item>\n                </form>\n\n                <!-- Signup form. -->\n                <form *ngIf=\"!ageDigitalConsentVerification && site\" [formGroup]=\"signupForm\" (ngSubmit)=\"create($event)\" #signupFormEl>\n\n                    <ion-item class=\"ion-text-wrap ion-text-center\">\n                        <ion-label>\n                            <!-- If no sitename show big siteurl. -->\n                            <p *ngIf=\"!siteName && displaySiteUrl\" class=\"ion-padding item-heading\">{{site.siteUrl}}</p>\n                            <!-- If sitename, show big sitename and small siteurl. -->\n                            <p *ngIf=\"siteName\" class=\"ion-padding item-heading\">\n                                <core-format-text [text]=\"siteName\" [filter]=\"false\" />\n                            </p>\n                            <p *ngIf=\"siteName && displaySiteUrl\">{{site.siteUrl}}</p>\n                        </ion-label>\n                    </ion-item>\n\n                    <!-- Username and password. -->\n                    <ion-item-divider class=\"ion-text-wrap\">\n                        <ion-label>\n                            <h2>{{ 'core.login.createuserandpass' | translate }}</h2>\n                        </ion-label>\n                    </ion-item-divider>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.login.username' | translate }}</span>\n                        </ion-label>\n                        <ion-input type=\"text\" name=\"username\" placeholder=\"{{ 'core.login.username' | translate }}\"\n                            formControlName=\"username\" autocapitalize=\"none\" autocorrect=\"off\" />\n                        <core-input-errors [control]=\"signupForm.controls.username\" [errorMessages]=\"usernameErrors\" />\n                    </ion-item>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.login.password' | translate }}</span>\n                        </ion-label>\n                        <core-show-password name=\"password\">\n                            <ion-input name=\"password\" type=\"password\" placeholder=\"{{ 'core.login.password' | translate }}\"\n                                formControlName=\"password\" [clearOnEdit]=\"false\" autocomplete=\"new-password\" required=\"true\" />\n                        </core-show-password>\n                        <p *ngIf=\"settings.passwordpolicy\" class=\"core-input-footnote\">\n                            {{settings.passwordpolicy}}\n                        </p>\n                        <core-input-errors [control]=\"signupForm.controls.password\" [errorMessages]=\"passwordErrors\" />\n                    </ion-item>\n\n                    <!-- More details. -->\n                    <ion-item-divider class=\"ion-text-wrap\">\n                        <ion-label>\n                            <h2>{{ 'core.login.supplyinfo' | translate }}</h2>\n                        </ion-label>\n                    </ion-item-divider>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.user.email' | translate }}</span>\n                        </ion-label>\n                        <ion-input type=\"email\" name=\"email\" placeholder=\"{{ 'core.user.email' | translate }}\" formControlName=\"email\"\n                            autocapitalize=\"none\" autocorrect=\"off\" />\n                        <core-input-errors [control]=\"signupForm.controls.email\" [errorMessages]=\"emailErrors\" />\n                    </ion-item>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.user.emailagain' | translate }}</span>\n                        </ion-label>\n                        <ion-input type=\"email\" name=\"email2\" placeholder=\"{{ 'core.user.emailagain' | translate }}\" autocapitalize=\"none\"\n                            formControlName=\"email2\" autocorrect=\"off\" [pattern]=\"escapeMail(signupForm.controls.email.value)\" />\n                        <core-input-errors [control]=\"signupForm.controls.email2\" [errorMessages]=\"email2Errors\" />\n                    </ion-item>\n                    <ion-item *ngFor=\"let nameField of settings.namefields\" class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">\n                            <span core-mark-required=\"true\">{{ 'core.user.' + nameField | translate }}</span>\n                        </ion-label>\n                        <ion-input type=\"text\" [name]=\"nameField\" placeholder=\"{{ 'core.user.' + nameField | translate }}\"\n                            formControlName=\"{{nameField}}\" autocorrect=\"off\" />\n                        <core-input-errors [control]=\"signupForm.controls[nameField]\" [errorMessages]=\"namefieldsErrors![nameField]\" />\n                    </ion-item>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">{{ 'core.user.city' | translate }}</ion-label>\n                        <ion-input type=\"text\" name=\"city\" placeholder=\"{{ 'core.user.city' | translate }}\" formControlName=\"city\"\n                            autocorrect=\"off\" />\n                    </ion-item>\n                    <ion-item class=\"ion-text-wrap\">\n                        <ion-label position=\"stacked\">{{ 'core.user.country' | translate }}</ion-label>\n                        <ion-select name=\"country\" formControlName=\"country\" [placeholder]=\"'core.login.selectacountry' | translate\"\n                            [cancelText]=\"'core.cancel' | translate\" [okText]=\"'core.ok' | translate\">\n                            <ion-select-option value=\"\">{{ 'core.login.selectacountry' | translate }}</ion-select-option>\n                            <ion-select-option *ngFor=\"let country of countries\" [value]=\"country.code\">{{country.name}}</ion-select-option>\n                        </ion-select>\n                    </ion-item>\n\n                    <!-- Other categories. -->\n                    <ng-container *ngFor=\"let category of categories\">\n                        <ion-item-divider class=\"ion-text-wrap\">\n                            <ion-label>\n                                <p class=\"item-heading\">{{ category.name }}</p>\n                            </ion-label>\n                        </ion-item-divider>\n                        <core-user-profile-field *ngFor=\"let field of category.fields\" [field]=\"field\" [edit]=\"true\" [signup]=\"true\"\n                            registerAuth=\"email\" [form]=\"signupForm\" />\n                    </ng-container>\n\n                    <!-- ReCAPTCHA -->\n                    <ng-container *ngIf=\"settings.recaptchapublickey\">\n                        <ion-item-divider class=\"ion-text-wrap\">\n                            <ion-label>\n                                <h2><span [core-mark-required]=\"true\">{{ 'core.login.security_question' | translate }}</span></h2>\n                            </ion-label>\n                        </ion-item-divider>\n                        <core-recaptcha [publicKey]=\"settings.recaptchapublickey\" [model]=\"captcha\" [siteUrl]=\"site.siteUrl\"\n                            [showRequiredError]=\"formSubmitClicked\" />\n                    </ng-container>\n\n                    <!-- Site policy (if any). -->\n                    <ng-container *ngIf=\"settings.sitepolicy\">\n                        <ion-item-divider class=\"ion-text-wrap\">\n                            <ion-label>\n                                <h2>{{ 'core.login.policyagreement' | translate }}</h2>\n                            </ion-label>\n                        </ion-item-divider>\n                        <ion-item class=\"ion-text-wrap\">\n                            <ion-label>\n                                <a [href]=\"settings.sitepolicy\" core-link capture=\"false\">\n                                    {{ 'core.login.policyagreementclick' | translate }}\n                                </a>\n                            </ion-label>\n                        </ion-item>\n                        <ion-item class=\"ion-text-wrap\">\n                            <ion-label>\n                                <span [core-mark-required]=\"true\">{{ 'core.login.policyacceptmandatory' | translate }}</span>\n                                <core-input-errors [control]=\"signupForm.controls.policyagreed\" [errorMessages]=\"policyErrors\" />\n                            </ion-label>\n                            <ion-checkbox slot=\"end\" name=\"policyagreed\" formControlName=\"policyagreed\" />\n                        </ion-item>\n                    </ng-container>\n\n                    <div class=\"ion-padding\">\n                        <!-- Submit button. -->\n                        <ion-button expand=\"block\" type=\"submit\">{{ 'core.login.createaccount' | translate }}</ion-button>\n                        <!-- Remove this once Ionic fixes this bug: https://github.com/ionic-team/ionic-framework/issues/19368 -->\n                        <input type=\"submit\" class=\"core-submit-hidden-enter\" />\n                    </div>\n                </form>\n            </ng-container>\n        </div>\n    </core-loading>\n\n    <div class=\"list-item-limited-width\">\n        <ion-list *ngIf=\"allRequiredSupported && isMinor\">\n            <ion-item-divider class=\"ion-text-wrap\">\n                <ion-label>\n                    <h2 *ngIf=\"siteName\" class=\"item-heading ion-padding\">\n                        <core-format-text [text]=\"siteName\" [filter]=\"false\" />\n                    </h2>\n                </ion-label>\n            </ion-item-divider>\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.considereddigitalminor' | translate }}</p>\n                    <p>{{ 'core.digitalminor_desc' | translate }}</p>\n                    <p *ngIf=\"supportName\">{{ supportName }}</p>\n                    <p *ngIf=\"supportEmail\">{{ supportEmail }}</p>\n                </ion-label>\n            </ion-item>\n            <div class=\"ion-padding\">\n                <ion-button *ngIf=\"!supportName && !supportEmail\" expand=\"block\" (click)=\"showContactOnSite()\">\n                    {{ 'core.openinbrowser' | translate }}\n                </ion-button>\n            </div>\n        </ion-list>\n    </div>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}