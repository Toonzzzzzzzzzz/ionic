{"ast":null,"code":"var _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { APP_INITIALIZER } from '@angular/core';\nimport { CoreMainMenuTabRoutingModule } from '@features/mainmenu/mainmenu-tab-routing.module';\nimport { CORE_SITE_SCHEMAS } from '@services/sites';\nimport { SITE_SCHEMA, OFFLINE_SITE_SCHEMA } from './services/database/user';\nimport { CoreUserComponentsModule } from './components/components.module';\nimport { CoreUserDelegate, CoreUserDelegateService } from './services/user-delegate';\nimport { CoreUserProfileMailHandler } from './services/handlers/profile-mail';\nimport { CoreContentLinksDelegate } from '@features/contentlinks/services/contentlinks-delegate';\nimport { CoreUserProfileLinkHandler } from './services/handlers/profile-link';\nimport { CoreCronDelegate } from '@services/cron';\nimport { CoreUserSyncCronHandler } from './services/handlers/sync-cron';\nimport { CoreUserTagAreaHandler } from './services/handlers/tag-area';\nimport { CoreTagAreaDelegate } from '@features/tag/services/tag-area-delegate';\nimport { CoreCourseIndexRoutingModule } from '@features/course/course-routing.module';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { CoreUserCourseOptionHandler } from './services/handlers/course-option';\nimport { CoreUserProfileFieldDelegateService } from './services/user-profile-field-delegate';\nimport { CoreUserProvider } from './services/user';\nimport { CoreUserHelper, CoreUserHelperProvider } from './services/user-helper';\nimport { CoreUserOfflineProvider } from './services/user-offline';\nimport { CoreUserSyncProvider } from './services/user-sync';\nimport { AppRoutingModule, conditionalRoutes } from '@/app/app-routing.module';\nimport { CoreScreen } from '@services/screen';\nimport { COURSE_PAGE_NAME } from '@features/course/course.module';\nimport { COURSE_INDEX_PATH } from '@features/course/course-lazy.module';\nimport { CoreEvents } from '@singletons/events';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../app/app-routing.module\";\nimport * as i2 from \"../mainmenu/mainmenu-tab-routing.module\";\nimport * as i3 from \"../course/course-routing.module\";\nexport const CORE_USER_SERVICES = [CoreUserDelegateService, CoreUserProfileFieldDelegateService, CoreUserProvider, CoreUserHelperProvider, CoreUserOfflineProvider, CoreUserSyncProvider];\nexport const PARTICIPANTS_PAGE_NAME = 'participants';\nconst appRoutes = [{\n  path: 'user',\n  loadChildren: () => import('@features/user/user-app-lazy.module').then(m => m.CoreUserAppLazyModule)\n}];\nconst routes = [{\n  path: 'user',\n  loadChildren: () => import('@features/user/user-lazy.module').then(m => m.CoreUserLazyModule)\n}, ...conditionalRoutes([{\n  path: `${COURSE_PAGE_NAME}/${COURSE_INDEX_PATH}/${PARTICIPANTS_PAGE_NAME}/:userId`,\n  loadChildren: () => import('@features/user/user-profile-lazy.module').then(m => m.CoreUserProfileLazyModule),\n  data: {\n    swipeManagerSource: 'participants'\n  }\n}], () => CoreScreen.isMobile)];\nconst courseIndexRoutes = [{\n  path: PARTICIPANTS_PAGE_NAME,\n  loadChildren: () => import('@features/user/user-course-lazy.module').then(m => m.CoreUserCourseLazyModule)\n}];\nexport class CoreUserModule {}\n_class = CoreUserModule;\n_class.ɵfac = function CoreUserModule_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵmod = /*@__PURE__*/i0.ɵɵdefineNgModule({\n  type: _class\n});\n_class.ɵinj = /*@__PURE__*/i0.ɵɵdefineInjector({\n  providers: [{\n    provide: CORE_SITE_SCHEMAS,\n    useValue: [SITE_SCHEMA, OFFLINE_SITE_SCHEMA],\n    multi: true\n  }, {\n    provide: APP_INITIALIZER,\n    multi: true,\n    useValue: () => {\n      CoreUserDelegate.registerHandler(CoreUserProfileMailHandler.instance);\n      CoreContentLinksDelegate.registerHandler(CoreUserProfileLinkHandler.instance);\n      CoreCronDelegate.register(CoreUserSyncCronHandler.instance);\n      CoreTagAreaDelegate.registerHandler(CoreUserTagAreaHandler.instance);\n      CoreCourseOptionsDelegate.registerHandler(CoreUserCourseOptionHandler.instance);\n      CoreEvents.on(CoreEvents.USER_NOT_FULLY_SETUP, data => {\n        CoreUserHelper.openCompleteProfile(data.siteId);\n      });\n    }\n  }],\n  imports: [AppRoutingModule.forChild(appRoutes), CoreMainMenuTabRoutingModule.forChild(routes), CoreCourseIndexRoutingModule.forChild({\n    children: courseIndexRoutes\n  }), CoreUserComponentsModule]\n});\n(function () {\n  (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(CoreUserModule, {\n    imports: [i1.AppRoutingModule, i2.CoreMainMenuTabRoutingModule, i3.CoreCourseIndexRoutingModule, CoreUserComponentsModule]\n  });\n})();","map":{"version":3,"names":["APP_INITIALIZER","CoreMainMenuTabRoutingModule","CORE_SITE_SCHEMAS","SITE_SCHEMA","OFFLINE_SITE_SCHEMA","CoreUserComponentsModule","CoreUserDelegate","CoreUserDelegateService","CoreUserProfileMailHandler","CoreContentLinksDelegate","CoreUserProfileLinkHandler","CoreCronDelegate","CoreUserSyncCronHandler","CoreUserTagAreaHandler","CoreTagAreaDelegate","CoreCourseIndexRoutingModule","CoreCourseOptionsDelegate","CoreUserCourseOptionHandler","CoreUserProfileFieldDelegateService","CoreUserProvider","CoreUserHelper","CoreUserHelperProvider","CoreUserOfflineProvider","CoreUserSyncProvider","AppRoutingModule","conditionalRoutes","CoreScreen","COURSE_PAGE_NAME","COURSE_INDEX_PATH","CoreEvents","CORE_USER_SERVICES","PARTICIPANTS_PAGE_NAME","appRoutes","path","loadChildren","then","m","CoreUserAppLazyModule","routes","CoreUserLazyModule","CoreUserProfileLazyModule","data","swipeManagerSource","isMobile","courseIndexRoutes","CoreUserCourseLazyModule","CoreUserModule","provide","useValue","multi","registerHandler","instance","register","on","USER_NOT_FULLY_SETUP","openCompleteProfile","siteId","imports","forChild","children","i1","i2","i3"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/user/user.module.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { APP_INITIALIZER, NgModule, Type } from '@angular/core';\nimport { Routes } from '@angular/router';\n\nimport { CoreMainMenuTabRoutingModule } from '@features/mainmenu/mainmenu-tab-routing.module';\nimport { CORE_SITE_SCHEMAS } from '@services/sites';\nimport { SITE_SCHEMA, OFFLINE_SITE_SCHEMA } from './services/database/user';\nimport { CoreUserComponentsModule } from './components/components.module';\nimport { CoreUserDelegate, CoreUserDelegateService } from './services/user-delegate';\nimport { CoreUserProfileMailHandler } from './services/handlers/profile-mail';\nimport { CoreContentLinksDelegate } from '@features/contentlinks/services/contentlinks-delegate';\nimport { CoreUserProfileLinkHandler } from './services/handlers/profile-link';\nimport { CoreCronDelegate } from '@services/cron';\nimport { CoreUserSyncCronHandler } from './services/handlers/sync-cron';\nimport { CoreUserTagAreaHandler } from './services/handlers/tag-area';\nimport { CoreTagAreaDelegate } from '@features/tag/services/tag-area-delegate';\nimport { CoreCourseIndexRoutingModule } from '@features/course/course-routing.module';\nimport { CoreCourseOptionsDelegate } from '@features/course/services/course-options-delegate';\nimport { CoreUserCourseOptionHandler } from './services/handlers/course-option';\nimport { CoreUserProfileFieldDelegateService } from './services/user-profile-field-delegate';\nimport { CoreUserProvider } from './services/user';\nimport { CoreUserHelper, CoreUserHelperProvider } from './services/user-helper';\nimport { CoreUserOfflineProvider } from './services/user-offline';\nimport { CoreUserSyncProvider } from './services/user-sync';\nimport { AppRoutingModule, conditionalRoutes } from '@/app/app-routing.module';\nimport { CoreScreen } from '@services/screen';\nimport { COURSE_PAGE_NAME } from '@features/course/course.module';\nimport { COURSE_INDEX_PATH } from '@features/course/course-lazy.module';\nimport { CoreEvents } from '@singletons/events';\n\nexport const CORE_USER_SERVICES: Type<unknown>[] = [\n    CoreUserDelegateService,\n    CoreUserProfileFieldDelegateService,\n    CoreUserProvider,\n    CoreUserHelperProvider,\n    CoreUserOfflineProvider,\n    CoreUserSyncProvider,\n];\n\nexport const PARTICIPANTS_PAGE_NAME = 'participants';\n\nconst appRoutes: Routes = [\n    {\n        path: 'user',\n        loadChildren: () => import('@features/user/user-app-lazy.module').then(m => m.CoreUserAppLazyModule),\n    },\n];\n\nconst routes: Routes = [\n    {\n        path: 'user',\n        loadChildren: () => import('@features/user/user-lazy.module').then(m => m.CoreUserLazyModule),\n    },\n    ...conditionalRoutes([\n        {\n            path: `${COURSE_PAGE_NAME}/${COURSE_INDEX_PATH}/${PARTICIPANTS_PAGE_NAME}/:userId`,\n            loadChildren: () => import('@features/user/user-profile-lazy.module').then(m => m.CoreUserProfileLazyModule),\n            data: {\n                swipeManagerSource: 'participants',\n            },\n        },\n    ], () => CoreScreen.isMobile),\n];\n\nconst courseIndexRoutes: Routes = [\n    {\n        path: PARTICIPANTS_PAGE_NAME,\n        loadChildren: () => import('@features/user/user-course-lazy.module').then(m => m.CoreUserCourseLazyModule),\n    },\n];\n\n@NgModule({\n    imports: [\n        AppRoutingModule.forChild(appRoutes),\n        CoreMainMenuTabRoutingModule.forChild(routes),\n        CoreCourseIndexRoutingModule.forChild({ children: courseIndexRoutes }),\n        CoreUserComponentsModule,\n    ],\n    providers: [\n        {\n            provide: CORE_SITE_SCHEMAS,\n            useValue: [\n                SITE_SCHEMA,\n                OFFLINE_SITE_SCHEMA,\n            ],\n            multi: true,\n        },\n        {\n            provide: APP_INITIALIZER,\n            multi: true,\n            useValue: () => {\n                CoreUserDelegate.registerHandler(CoreUserProfileMailHandler.instance);\n                CoreContentLinksDelegate.registerHandler(CoreUserProfileLinkHandler.instance);\n                CoreCronDelegate.register(CoreUserSyncCronHandler.instance);\n                CoreTagAreaDelegate.registerHandler(CoreUserTagAreaHandler.instance);\n                CoreCourseOptionsDelegate.registerHandler(CoreUserCourseOptionHandler.instance);\n\n                CoreEvents.on(CoreEvents.USER_NOT_FULLY_SETUP, (data) => {\n                    CoreUserHelper.openCompleteProfile(data.siteId);\n                });\n            },\n        },\n    ],\n})\nexport class CoreUserModule {}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}