{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreApp } from '@services/app';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreListItemsManager } from '@classes/items-management/list-items-manager';\nimport { CoreSplitViewComponent } from '@components/split-view/split-view';\nimport { CoreUser } from '@features/user/services/user';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreUserParticipantsSource } from '@features/user/classes/participants-source';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { Translate } from '@singletons';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../components/empty-box/empty-box\";\nimport * as i3 from \"../../../../components/infinite-loading/infinite-loading\";\nimport * as i4 from \"../../../../components/loading/loading\";\nimport * as i5 from \"../../../../components/split-view/split-view\";\nimport * as i6 from \"../../../../components/user-avatar/user-avatar\";\nimport * as i7 from \"../../../../directives/format-text\";\nimport * as i8 from \"../../../../directives/content\";\nimport * as i9 from \"@ionic/angular\";\nimport * as i10 from \"../../../search/components/search-box/search-box\";\nimport * as i11 from \"../../../../pipes/time-ago\";\nimport * as i12 from \"@ngx-translate/core\";\nfunction CoreUserParticipantsPage_core_empty_box_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 8);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"core.user.noparticipants\"));\n  }\n}\nfunction CoreUserParticipantsPage_core_empty_box_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 9);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"core.noresults\"));\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreTimeAgo\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(2, 1, participant_r4.lastcourseaccess), \" \");\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.never\"));\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_4_Template, 3, 3, \"ng-container\", 6);\n    i0.ɵɵtemplate(5, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_5_Template, 3, 3, \"ng-container\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 3, \"core.user.lastcourseaccess\"), \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", participant_r4.lastcourseaccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !participant_r4.lastcourseaccess);\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"coreTimeAgo\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext(3).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, participant_r4.lastaccess));\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(2, 1, \"core.never\"));\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\")(1, \"strong\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_4_Template, 3, 3, \"ng-container\", 6);\n    i0.ɵɵtemplate(5, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_5_Template, 3, 3, \"ng-container\", 6);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 3, \"core.lastaccess\"), \": \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", participant_r4.lastaccess);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !participant_r4.lastaccess);\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 13);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_Template, 6, 5, \"p\", 6);\n    i0.ɵɵtemplate(4, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_Template, 6, 5, \"p\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(participant_r4.fullname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", participant_r4.lastcourseaccess !== undefined);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", participant_r4.lastcourseaccess === undefined && participant_r4.lastaccess !== undefined);\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"p\", 13);\n    i0.ɵɵelement(2, \"core-format-text\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const participant_r4 = i0.ɵɵnextContext().$implicit;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", participant_r4.fullname)(\"highlight\", ctx_r6.searchQuery)(\"filter\", false);\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r20 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 11);\n    i0.ɵɵlistener(\"click\", function CoreUserParticipantsPage_ion_list_9_ion_item_1_Template_ion_item_click_0_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r20);\n      const participant_r4 = restoredCtx.$implicit;\n      const ctx_r19 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r19.participants.select(participant_r4));\n    });\n    i0.ɵɵelement(1, \"core-user-avatar\", 12);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵtemplate(3, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_Template, 5, 3, \"ng-container\", 6);\n    i0.ɵɵtemplate(4, CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_4_Template, 3, 3, \"ng-container\", 6);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const participant_r4 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"detail\", true);\n    i0.ɵɵattribute(\"aria-current\", ctx_r3.participants.getItemAriaCurrent(participant_r4))(\"aria-label\", participant_r4.fullname);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", participant_r4)(\"linkProfile\", false)(\"checkOnline\", true);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.searchQuery);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.searchQuery);\n  }\n}\nfunction CoreUserParticipantsPage_ion_list_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\");\n    i0.ɵɵtemplate(1, CoreUserParticipantsPage_ion_list_9_ion_item_1_Template, 5, 8, \"ion-item\", 10);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.participants.items);\n  }\n}\n/**\n * Page that displays the list of course participants.\n */\nexport class CoreUserParticipantsPage {\n  constructor() {\n    this.searchQuery = null;\n    this.searchInProgress = false;\n    this.searchEnabled = false;\n    this.fetchMoreParticipantsFailed = false;\n    try {\n      this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n      this.participants = new CoreUserParticipantsManager(CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(CoreUserParticipantsSource, [this.courseId]), CoreUserParticipantsPage);\n    } catch (error) {\n      CoreDomUtils.showErrorModal(error);\n      CoreNavigator.back();\n      return;\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.searchEnabled = yield CoreUser.canSearchParticipantsInSite();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngAfterViewInit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.fetchInitialParticipants();\n      yield _this2.participants.start(_this2.splitView);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ionViewDidEnter() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      yield _this3.participants.start();\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    this.participants.destroy();\n  }\n  /**\n   * Clear search.\n   */\n  clearSearch() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      if (_this4.searchQuery === null) {\n        // Nothing to clear.\n        return;\n      }\n      const newSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(CoreUserParticipantsSource, [_this4.courseId]);\n      _this4.searchQuery = null;\n      _this4.searchInProgress = false;\n      _this4.participants.setSource(newSource);\n      yield _this4.fetchInitialParticipants();\n    })();\n  }\n  /**\n   * Start a new search.\n   *\n   * @param query Text to search for.\n   */\n  search(query) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      CoreApp.closeKeyboard();\n      const newSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(CoreUserParticipantsSource, [_this5.courseId, query]);\n      _this5.searchInProgress = true;\n      _this5.searchQuery = query;\n      _this5.participants.setSource(newSource);\n      yield _this5.fetchInitialParticipants();\n      _this5.searchInProgress = false;\n    })();\n  }\n  /**\n   * Refresh participants.\n   *\n   * @param refresher Refresher.\n   */\n  refreshParticipants(refresher) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      yield CoreUtils.ignoreErrors(CoreUser.invalidateParticipantsList(_this6.courseId));\n      yield CoreUtils.ignoreErrors(_this6.fetchParticipants(true));\n      refresher === null || refresher === void 0 || refresher.complete();\n    })();\n  }\n  /**\n   * Load a new batch of participants.\n   *\n   * @param complete Completion callback.\n   */\n  fetchMoreParticipants(complete) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this7.fetchParticipants(false);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading more participants');\n        _this7.fetchMoreParticipantsFailed = true;\n      }\n      complete();\n    })();\n  }\n  /**\n   * Obtain the initial batch of participants.\n   */\n  fetchInitialParticipants() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        yield _this8.fetchParticipants(true);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error loading participants');\n        _this8.participants.reset();\n      }\n    })();\n  }\n  /**\n   * Update the list of participants.\n   *\n   * @param reload Whether to reload the list or load the next page.\n   */\n  fetchParticipants(reload) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      reload ? yield _this9.participants.reload() : yield _this9.participants.load();\n      _this9.fetchMoreParticipantsFailed = false;\n    })();\n  }\n}\n/**\n * Helper to manage the list of participants.\n */\n_class = CoreUserParticipantsPage;\n_class.ɵfac = function CoreUserParticipantsPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-core-user-participants\"]],\n  viewQuery: function CoreUserParticipantsPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(CoreSplitViewComponent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.splitView = _t.first);\n    }\n  },\n  decls: 11,\n  vars: 13,\n  consts: [[\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [\"autocorrect\", \"off\", \"searchArea\", \"CoreUserParticipants\", 3, \"disabled\", \"spellcheck\", \"lengthCheck\", \"onSubmit\", \"onClear\"], [3, \"hideUntil\"], [\"icon\", \"far-user\", 3, \"message\", 4, \"ngIf\"], [\"icon\", \"fas-magnifying-glass\", 3, \"message\", 4, \"ngIf\"], [4, \"ngIf\"], [3, \"enabled\", \"error\", \"action\"], [\"icon\", \"far-user\", 3, \"message\"], [\"icon\", \"fas-magnifying-glass\", 3, \"message\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"start\", 3, \"user\", \"linkProfile\", \"checkOnline\"], [1, \"item-heading\"], [3, \"text\", \"highlight\", \"filter\"]],\n  template: function CoreUserParticipantsPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-content\")(1, \"core-split-view\")(2, \"ion-refresher\", 0);\n      i0.ɵɵlistener(\"ionRefresh\", function CoreUserParticipantsPage_Template_ion_refresher_ionRefresh_2_listener($event) {\n        return ctx.refreshParticipants($event.target);\n      });\n      i0.ɵɵelement(3, \"ion-refresher-content\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"core-search-box\", 2);\n      i0.ɵɵlistener(\"onSubmit\", function CoreUserParticipantsPage_Template_core_search_box_onSubmit_5_listener($event) {\n        return ctx.search($event);\n      })(\"onClear\", function CoreUserParticipantsPage_Template_core_search_box_onClear_5_listener() {\n        return ctx.clearSearch();\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"core-loading\", 3);\n      i0.ɵɵtemplate(7, CoreUserParticipantsPage_core_empty_box_7_Template, 2, 3, \"core-empty-box\", 4);\n      i0.ɵɵtemplate(8, CoreUserParticipantsPage_core_empty_box_8_Template, 2, 3, \"core-empty-box\", 5);\n      i0.ɵɵtemplate(9, CoreUserParticipantsPage_ion_list_9_Template, 2, 1, \"ion-list\", 6);\n      i0.ɵɵelementStart(10, \"core-infinite-loading\", 7);\n      i0.ɵɵlistener(\"action\", function CoreUserParticipantsPage_Template_core_infinite_loading_action_10_listener($event) {\n        return ctx.fetchMoreParticipants($event);\n      });\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", !ctx.participants.loaded || ctx.searchInProgress);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(4, 11, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"disabled\", ctx.searchInProgress)(\"spellcheck\", false)(\"lengthCheck\", 1);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"hideUntil\", ctx.participants.loaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.participants.empty && !ctx.searchInProgress && !ctx.searchQuery);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.participants.empty && !ctx.searchInProgress && ctx.searchQuery);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", !ctx.participants.empty);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"enabled\", ctx.participants.loaded && !ctx.participants.completed)(\"error\", ctx.fetchMoreParticipantsFailed);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreEmptyBoxComponent, i3.CoreInfiniteLoadingComponent, i4.CoreLoadingComponent, i5.CoreSplitViewComponent, i6.CoreUserAvatarComponent, i7.CoreFormatTextDirective, i8.CoreContentDirective, i9.IonContent, i9.IonItem, i9.IonLabel, i9.IonList, i9.IonRefresher, i9.IonRefresherContent, i10.CoreSearchBoxComponent, i11.CoreTimeAgoPipe, i12.TranslatePipe],\n  encapsulation: 2\n});\nclass CoreUserParticipantsManager extends CoreListItemsManager {\n  /**\n   * @inheritdoc\n   */\n  logActivity() {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      yield CoreUtils.ignoreErrors(CoreUser.logParticipantsView(_this10.getSource().COURSE_ID));\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n        ws: 'core_user_view_user_list',\n        name: Translate.instant('core.user.participants'),\n        data: {\n          courseid: _this10.getSource().COURSE_ID,\n          category: 'user'\n        },\n        url: `/user/index.php?id=${_this10.getSource().COURSE_ID}`\n      });\n    })();\n  }\n}","map":{"version":3,"names":["CoreApp","CoreDomUtils","CoreNavigator","CoreListItemsManager","CoreSplitViewComponent","CoreUser","CoreUtils","CoreUserParticipantsSource","CoreRoutedItemsManagerSourcesTracker","CoreAnalytics","CoreAnalyticsEventType","Translate","i0","ɵɵelement","ɵɵproperty","ɵɵpipeBind1","ɵɵelementContainerStart","ɵɵtext","ɵɵelementContainerEnd","ɵɵadvance","ɵɵtextInterpolate1","participant_r4","lastcourseaccess","ɵɵtextInterpolate","ɵɵelementStart","ɵɵelementEnd","ɵɵtemplate","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_4_Template","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_ng_container_5_Template","lastaccess","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_4_Template","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_ng_container_5_Template","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_3_Template","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_p_4_Template","fullname","undefined","ctx_r6","searchQuery","ɵɵlistener","CoreUserParticipantsPage_ion_list_9_ion_item_1_Template_ion_item_click_0_listener","restoredCtx","ɵɵrestoreView","_r20","$implicit","ctx_r19","ɵɵnextContext","ɵɵresetView","participants","select","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_3_Template","CoreUserParticipantsPage_ion_list_9_ion_item_1_ng_container_4_Template","ɵɵattribute","ctx_r3","getItemAriaCurrent","CoreUserParticipantsPage_ion_list_9_ion_item_1_Template","ctx_r2","items","CoreUserParticipantsPage","constructor","searchInProgress","searchEnabled","fetchMoreParticipantsFailed","courseId","getRequiredRouteNumberParam","CoreUserParticipantsManager","getOrCreateSource","error","showErrorModal","back","ngOnInit","_this","_asyncToGenerator","canSearchParticipantsInSite","ngAfterViewInit","_this2","fetchInitialParticipants","start","splitView","ionViewDidEnter","_this3","ngOnDestroy","destroy","clearSearch","_this4","newSource","setSource","search","query","_this5","closeKeyboard","refreshParticipants","refresher","_this6","ignoreErrors","invalidateParticipantsList","fetchParticipants","complete","fetchMoreParticipants","_this7","showErrorModalDefault","_this8","reset","reload","_this9","load","_class","selectors","viewQuery","CoreUserParticipantsPage_Query","rf","ctx","CoreUserParticipantsPage_Template_ion_refresher_ionRefresh_2_listener","$event","target","CoreUserParticipantsPage_Template_core_search_box_onSubmit_5_listener","CoreUserParticipantsPage_Template_core_search_box_onClear_5_listener","CoreUserParticipantsPage_core_empty_box_7_Template","CoreUserParticipantsPage_core_empty_box_8_Template","CoreUserParticipantsPage_ion_list_9_Template","CoreUserParticipantsPage_Template_core_infinite_loading_action_10_listener","loaded","ɵɵpropertyInterpolate","empty","completed","logActivity","_this10","logParticipantsView","getSource","COURSE_ID","logEvent","type","VIEW_ITEM_LIST","ws","name","instant","data","courseid","category","url"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/user/pages/participants/participants.page.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/user/pages/participants/participants.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { AfterViewInit, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\n\nimport { CoreApp } from '@services/app';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreListItemsManager } from '@classes/items-management/list-items-manager';\nimport { CoreSplitViewComponent } from '@components/split-view/split-view';\nimport { CoreUser, CoreUserParticipant, CoreUserData } from '@features/user/services/user';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreUserParticipantsSource } from '@features/user/classes/participants-source';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { Translate } from '@singletons';\n\n/**\n * Page that displays the list of course participants.\n */\n@Component({\n    selector: 'page-core-user-participants',\n    templateUrl: 'participants.html',\n})\nexport class CoreUserParticipantsPage implements OnInit, AfterViewInit, OnDestroy {\n\n    courseId!: number;\n    participants!: CoreUserParticipantsManager;\n    searchQuery: string | null = null;\n    searchInProgress = false;\n    searchEnabled = false;\n    fetchMoreParticipantsFailed = false;\n\n    @ViewChild(CoreSplitViewComponent) splitView!: CoreSplitViewComponent;\n\n    constructor() {\n        try {\n            this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n            this.participants = new CoreUserParticipantsManager(\n                CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(CoreUserParticipantsSource, [this.courseId]),\n                CoreUserParticipantsPage,\n            );\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        this.searchEnabled = await CoreUser.canSearchParticipantsInSite();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngAfterViewInit(): Promise<void> {\n        await this.fetchInitialParticipants();\n        await this.participants.start(this.splitView);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ionViewDidEnter(): Promise<void> {\n        await this.participants.start();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.participants.destroy();\n    }\n\n    /**\n     * Clear search.\n     */\n    async clearSearch(): Promise<void> {\n        if (this.searchQuery === null) {\n            // Nothing to clear.\n            return;\n        }\n\n        const newSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(CoreUserParticipantsSource, [this.courseId]);\n\n        this.searchQuery = null;\n        this.searchInProgress = false;\n        this.participants.setSource(newSource);\n\n        await this.fetchInitialParticipants();\n    }\n\n    /**\n     * Start a new search.\n     *\n     * @param query Text to search for.\n     */\n    async search(query: string): Promise<void> {\n        CoreApp.closeKeyboard();\n\n        const newSource = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(\n            CoreUserParticipantsSource,\n            [this.courseId, query],\n        );\n\n        this.searchInProgress = true;\n        this.searchQuery = query;\n        this.participants.setSource(newSource);\n\n        await this.fetchInitialParticipants();\n\n        this.searchInProgress = false;\n    }\n\n    /**\n     * Refresh participants.\n     *\n     * @param refresher Refresher.\n     */\n    async refreshParticipants(refresher: HTMLIonRefresherElement): Promise<void> {\n        await CoreUtils.ignoreErrors(CoreUser.invalidateParticipantsList(this.courseId));\n        await CoreUtils.ignoreErrors(this.fetchParticipants(true));\n\n        refresher?.complete();\n    }\n\n    /**\n     * Load a new batch of participants.\n     *\n     * @param complete Completion callback.\n     */\n    async fetchMoreParticipants(complete: () => void): Promise<void> {\n        try {\n            await this.fetchParticipants(false);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading more participants');\n\n            this.fetchMoreParticipantsFailed = true;\n        }\n\n        complete();\n    }\n\n    /**\n     * Obtain the initial batch of participants.\n     */\n    private async fetchInitialParticipants(): Promise<void> {\n        try {\n            await this.fetchParticipants(true);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error loading participants');\n\n            this.participants.reset();\n        }\n    }\n\n    /**\n     * Update the list of participants.\n     *\n     * @param reload Whether to reload the list or load the next page.\n     */\n    private async fetchParticipants(reload: boolean): Promise<void> {\n        reload\n            ? await this.participants.reload()\n            : await this.participants.load();\n\n        this.fetchMoreParticipantsFailed = false;\n    }\n\n}\n\n/**\n * Helper to manage the list of participants.\n */\nclass CoreUserParticipantsManager extends CoreListItemsManager<CoreUserParticipant | CoreUserData, CoreUserParticipantsSource> {\n\n    /**\n     * @inheritdoc\n     */\n    protected async logActivity(): Promise<void> {\n        await CoreUtils.ignoreErrors(CoreUser.logParticipantsView(this.getSource().COURSE_ID));\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n            ws: 'core_user_view_user_list',\n            name: Translate.instant('core.user.participants'),\n            data: { courseid: this.getSource().COURSE_ID, category: 'user' },\n            url: `/user/index.php?id=${this.getSource().COURSE_ID}`,\n        });\n    }\n\n}\n","<ion-content>\n    <core-split-view>\n        <ion-refresher slot=\"fixed\" [disabled]=\"!participants.loaded || searchInProgress\" (ionRefresh)=\"refreshParticipants($event.target)\">\n            <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n        </ion-refresher>\n\n        <core-search-box [disabled]=\"searchInProgress\" [spellcheck]=\"false\" [lengthCheck]=\"1\" autocorrect=\"off\"\n            searchArea=\"CoreUserParticipants\" (onSubmit)=\"search($event)\" (onClear)=\"clearSearch()\" />\n\n        <core-loading [hideUntil]=\"participants.loaded\">\n            <core-empty-box *ngIf=\"participants.empty && !searchInProgress && !searchQuery\" icon=\"far-user\"\n                [message]=\"'core.user.noparticipants' | translate\" />\n\n            <core-empty-box *ngIf=\"participants.empty && !searchInProgress && searchQuery\" icon=\"fas-magnifying-glass\"\n                [message]=\"'core.noresults' | translate\" />\n\n            <ion-list *ngIf=\"!participants.empty\">\n                <ion-item *ngFor=\"let participant of participants.items\" class=\"ion-text-wrap\"\n                    [attr.aria-current]=\"participants.getItemAriaCurrent(participant)\" [attr.aria-label]=\"participant.fullname\"\n                    (click)=\"participants.select(participant)\" button [detail]=\"true\">\n\n                    <core-user-avatar [user]=\"participant\" [linkProfile]=\"false\" [checkOnline]=\"true\" slot=\"start\" />\n\n                    <ion-label>\n                        <ng-container *ngIf=\"!searchQuery\">\n                            <p class=\"item-heading\">{{ participant.fullname }}</p>\n                            <p *ngIf=\"participant.lastcourseaccess !== undefined\">\n                                <strong>{{ 'core.user.lastcourseaccess' | translate }}: </strong>\n                                <ng-container *ngIf=\"participant.lastcourseaccess\">{{ participant.lastcourseaccess | coreTimeAgo }}\n                                </ng-container>\n                                <ng-container *ngIf=\"!participant.lastcourseaccess\">{{ 'core.never' | translate }}</ng-container>\n                            </p>\n                            <p *ngIf=\"participant.lastcourseaccess === undefined && participant.lastaccess !== undefined\">\n                                <strong>{{ 'core.lastaccess' | translate }}: </strong>\n                                <ng-container *ngIf=\"participant.lastaccess\">{{ participant.lastaccess | coreTimeAgo }}</ng-container>\n                                <ng-container *ngIf=\"!participant.lastaccess\">{{ 'core.never' | translate }}</ng-container>\n                            </p>\n                        </ng-container>\n\n                        <ng-container *ngIf=\"searchQuery\">\n                            <p class=\"item-heading\">\n                                <core-format-text [text]=\"participant.fullname\" [highlight]=\"searchQuery\" [filter]=\"false\" />\n                            </p>\n                        </ng-container>\n                    </ion-label>\n\n                </ion-item>\n            </ion-list>\n            <core-infinite-loading [enabled]=\"participants.loaded && !participants.completed\" (action)=\"fetchMoreParticipants($event)\"\n                [error]=\"fetchMoreParticipantsFailed\" />\n        </core-loading>\n    </core-split-view>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}