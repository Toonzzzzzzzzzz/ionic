{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreConstants } from '@/core/constants';\nimport { CoreModuleHandlerBase } from '@features/course/classes/module-base-handler';\nimport { CoreSitePlugins } from '@features/siteplugins/services/siteplugins';\nimport { makeSingleton } from '@singletons';\nimport { AddonModBBBIndexComponent } from '../../components/index';\nimport { AddonModBBB } from '../bigbluebuttonbn';\nimport * as i0 from \"@angular/core\";\nexport const ADDON_MOD_BBB_MAIN_MENU_PAGE_NAME = 'mod_bigbluebuttonbn';\n/**\n * Handler to support Big Blue Button activities.\n */\nexport class AddonModBBBModuleHandlerService extends CoreModuleHandlerBase {\n  constructor() {\n    super(...arguments);\n    this.name = 'AddonModBBB';\n    this.modName = 'bigbluebuttonbn';\n    this.pageName = ADDON_MOD_BBB_MAIN_MENU_PAGE_NAME;\n    this.supportedFeatures = {\n      [CoreConstants.FEATURE_GROUPS]: true,\n      [CoreConstants.FEATURE_GROUPINGS]: true,\n      [CoreConstants.FEATURE_MOD_INTRO]: true,\n      [CoreConstants.FEATURE_COMPLETION_TRACKS_VIEWS]: true,\n      [CoreConstants.FEATURE_GRADE_HAS_GRADE]: false,\n      [CoreConstants.FEATURE_GRADE_OUTCOMES]: true,\n      [CoreConstants.FEATURE_BACKUP_MOODLE2]: true,\n      [CoreConstants.FEATURE_SHOW_DESCRIPTION]: true,\n      [CoreConstants.FEATURE_MOD_PURPOSE]: \"other\" /* ModPurpose.MOD_PURPOSE_OTHER */\n    };\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      var _this$sitePluginHandl;\n      const enabled = yield AddonModBBB.isPluginEnabled();\n      if (enabled) {\n        delete _this.sitePluginHandler;\n        _this.name = 'AddonModBBB';\n        return true;\n      }\n      // Native support not available in this site. Check if it's supported by site plugin.\n      _this.sitePluginHandler = CoreSitePlugins.getModuleHandlerInstance(_this.modName);\n      // Change the handler name to be able to retrieve the plugin data in component.\n      _this.name = ((_this$sitePluginHandl = _this.sitePluginHandler) === null || _this$sitePluginHandl === void 0 ? void 0 : _this$sitePluginHandl.name) || _this.name;\n      return !!_this.sitePluginHandler;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getData(module, courseId, sectionId, forCoursePage) {\n    var _superprop_getGetData = () => super.getData,\n      _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (_this2.sitePluginHandler) {\n        return _this2.sitePluginHandler.getData(module, courseId, sectionId, forCoursePage);\n      }\n      const data = yield _superprop_getGetData().call(_this2, module, courseId, sectionId, forCoursePage);\n      data.showDownloadButton = false;\n      return data;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getMainComponent() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      if (_this3.sitePluginHandler) {\n        return _this3.sitePluginHandler.getMainComponent();\n      }\n      return AddonModBBBIndexComponent;\n    })();\n  }\n}\n_class = AddonModBBBModuleHandlerService;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵAddonModBBBModuleHandlerService_BaseFactory;\n  return function AddonModBBBModuleHandlerService_Factory(t) {\n    return (ɵAddonModBBBModuleHandlerService_BaseFactory || (ɵAddonModBBBModuleHandlerService_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonModBBBModuleHandler = makeSingleton(AddonModBBBModuleHandlerService);","map":{"version":3,"names":["CoreConstants","CoreModuleHandlerBase","CoreSitePlugins","makeSingleton","AddonModBBBIndexComponent","AddonModBBB","ADDON_MOD_BBB_MAIN_MENU_PAGE_NAME","AddonModBBBModuleHandlerService","constructor","name","modName","pageName","supportedFeatures","FEATURE_GROUPS","FEATURE_GROUPINGS","FEATURE_MOD_INTRO","FEATURE_COMPLETION_TRACKS_VIEWS","FEATURE_GRADE_HAS_GRADE","FEATURE_GRADE_OUTCOMES","FEATURE_BACKUP_MOODLE2","FEATURE_SHOW_DESCRIPTION","FEATURE_MOD_PURPOSE","isEnabled","_this","_asyncToGenerator","_this$sitePluginHandl","enabled","isPluginEnabled","sitePluginHandler","getModuleHandlerInstance","getData","module","courseId","sectionId","forCoursePage","_superprop_getGetData","_this2","data","call","showDownloadButton","getMainComponent","_this3","t","factory","ɵfac","providedIn","AddonModBBBModuleHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/bigbluebuttonbn/services/handlers/module.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreConstants, ModPurpose } from '@/core/constants';\nimport { Injectable, Type } from '@angular/core';\nimport { CoreModuleHandlerBase } from '@features/course/classes/module-base-handler';\nimport { CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { CoreCourseModuleHandler, CoreCourseModuleHandlerData } from '@features/course/services/module-delegate';\nimport { CoreSitePluginsModuleHandler } from '@features/siteplugins/classes/handlers/module-handler';\nimport { CoreSitePlugins } from '@features/siteplugins/services/siteplugins';\nimport { makeSingleton } from '@singletons';\nimport { AddonModBBBIndexComponent } from '../../components/index';\nimport { AddonModBBB } from '../bigbluebuttonbn';\n\nexport const ADDON_MOD_BBB_MAIN_MENU_PAGE_NAME = 'mod_bigbluebuttonbn';\n\n/**\n * Handler to support Big Blue Button activities.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonModBBBModuleHandlerService extends CoreModuleHandlerBase implements CoreCourseModuleHandler {\n\n    name = 'AddonModBBB';\n    modName = 'bigbluebuttonbn';\n    protected pageName = ADDON_MOD_BBB_MAIN_MENU_PAGE_NAME;\n    protected sitePluginHandler?: CoreSitePluginsModuleHandler;\n\n    supportedFeatures = {\n        [CoreConstants.FEATURE_GROUPS]: true,\n        [CoreConstants.FEATURE_GROUPINGS]: true,\n        [CoreConstants.FEATURE_MOD_INTRO]: true,\n        [CoreConstants.FEATURE_COMPLETION_TRACKS_VIEWS]: true,\n        [CoreConstants.FEATURE_GRADE_HAS_GRADE]: false,\n        [CoreConstants.FEATURE_GRADE_OUTCOMES]: true,\n        [CoreConstants.FEATURE_BACKUP_MOODLE2]: true,\n        [CoreConstants.FEATURE_SHOW_DESCRIPTION]: true,\n        [CoreConstants.FEATURE_MOD_PURPOSE]: ModPurpose.MOD_PURPOSE_OTHER,\n    };\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        const enabled = await AddonModBBB.isPluginEnabled();\n\n        if (enabled) {\n            delete this.sitePluginHandler;\n            this.name = 'AddonModBBB';\n\n            return true;\n        }\n\n        // Native support not available in this site. Check if it's supported by site plugin.\n        this.sitePluginHandler = CoreSitePlugins.getModuleHandlerInstance(this.modName);\n        // Change the handler name to be able to retrieve the plugin data in component.\n        this.name = this.sitePluginHandler?.name || this.name;\n\n        return !!this.sitePluginHandler;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async getData(\n        module: CoreCourseModuleData,\n        courseId: number,\n        sectionId?: number,\n        forCoursePage?: boolean,\n    ): Promise<CoreCourseModuleHandlerData> {\n        if (this.sitePluginHandler) {\n            return this.sitePluginHandler.getData(module, courseId, sectionId, forCoursePage);\n        }\n\n        const data = await super.getData(module, courseId, sectionId, forCoursePage);\n\n        data.showDownloadButton = false;\n\n        return data;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async getMainComponent(): Promise<Type<unknown>> {\n        if (this.sitePluginHandler) {\n            return this.sitePluginHandler.getMainComponent();\n        }\n\n        return AddonModBBBIndexComponent;\n    }\n\n}\n\nexport const AddonModBBBModuleHandler = makeSingleton(AddonModBBBModuleHandlerService);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}