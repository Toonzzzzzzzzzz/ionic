{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreConstants } from '@/core/constants';\nimport { makeSingleton } from '@singletons';\nimport { AddonModLtiHelper } from '../lti-helper';\nimport { AddonModLtiIndexComponent } from '../../components/index';\nimport { CoreModuleHandlerBase } from '@features/course/classes/module-base-handler';\nimport { CoreCourse } from '@features/course/services/course';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler to support LTI modules.\n */\nexport class AddonModLtiModuleHandlerService extends CoreModuleHandlerBase {\n  constructor() {\n    super(...arguments);\n    this.name = 'AddonModLti';\n    this.modName = 'lti';\n    this.pageName = AddonModLtiModuleHandlerService.PAGE_NAME;\n    this.supportedFeatures = {\n      [CoreConstants.FEATURE_GROUPS]: false,\n      [CoreConstants.FEATURE_GROUPINGS]: false,\n      [CoreConstants.FEATURE_MOD_INTRO]: true,\n      [CoreConstants.FEATURE_COMPLETION_TRACKS_VIEWS]: true,\n      [CoreConstants.FEATURE_GRADE_HAS_GRADE]: true,\n      [CoreConstants.FEATURE_GRADE_OUTCOMES]: true,\n      [CoreConstants.FEATURE_BACKUP_MOODLE2]: true,\n      [CoreConstants.FEATURE_SHOW_DESCRIPTION]: true,\n      [CoreConstants.FEATURE_MOD_PURPOSE]: \"content\" /* ModPurpose.MOD_PURPOSE_CONTENT */\n    };\n  }\n\n  /**\n   * @inheritdoc\n   */\n  getData(module, courseId, sectionId, forCoursePage) {\n    var _superprop_getGetData = () => super.getData,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      const data = yield _superprop_getGetData().call(_this, module, courseId, sectionId, forCoursePage);\n      data.showDownloadButton = false;\n      data.button = {\n        icon: 'fas-up-right-from-square',\n        label: 'addon.mod_lti.launchactivity',\n        action: (event, module, courseId) => {\n          // Launch the LTI.\n          AddonModLtiHelper.getDataAndLaunch(courseId, module);\n          CoreCourse.storeModuleViewed(courseId, module.id);\n        }\n      };\n      return data;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getMainComponent() {\n    return _asyncToGenerator(function* () {\n      return AddonModLtiIndexComponent;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getIconSrc(module, modicon) {\n    var _ref, _module$modicon;\n    return (_ref = (_module$modicon = module === null || module === void 0 ? void 0 : module.modicon) !== null && _module$modicon !== void 0 ? _module$modicon : modicon) !== null && _ref !== void 0 ? _ref : CoreCourse.getModuleIconSrc(this.modName);\n  }\n}\n_class = AddonModLtiModuleHandlerService;\n_class.PAGE_NAME = 'mod_lti';\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵAddonModLtiModuleHandlerService_BaseFactory;\n  return function AddonModLtiModuleHandlerService_Factory(t) {\n    return (ɵAddonModLtiModuleHandlerService_BaseFactory || (ɵAddonModLtiModuleHandlerService_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const AddonModLtiModuleHandler = makeSingleton(AddonModLtiModuleHandlerService);","map":{"version":3,"names":["CoreConstants","makeSingleton","AddonModLtiHelper","AddonModLtiIndexComponent","CoreModuleHandlerBase","CoreCourse","AddonModLtiModuleHandlerService","constructor","name","modName","pageName","PAGE_NAME","supportedFeatures","FEATURE_GROUPS","FEATURE_GROUPINGS","FEATURE_MOD_INTRO","FEATURE_COMPLETION_TRACKS_VIEWS","FEATURE_GRADE_HAS_GRADE","FEATURE_GRADE_OUTCOMES","FEATURE_BACKUP_MOODLE2","FEATURE_SHOW_DESCRIPTION","FEATURE_MOD_PURPOSE","getData","module","courseId","sectionId","forCoursePage","_superprop_getGetData","_this","_asyncToGenerator","data","call","showDownloadButton","button","icon","label","action","event","getDataAndLaunch","storeModuleViewed","id","getMainComponent","getIconSrc","modicon","_ref","_module$modicon","getModuleIconSrc","_class","t","factory","ɵfac","providedIn","AddonModLtiModuleHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/lti/services/handlers/module.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable, Type } from '@angular/core';\n\nimport { CoreConstants, ModPurpose } from '@/core/constants';\nimport { CoreCourseModuleHandler, CoreCourseModuleHandlerData } from '@features/course/services/module-delegate';\nimport { CoreCourseModuleData } from '@features/course/services/course-helper';\nimport { makeSingleton } from '@singletons';\nimport { AddonModLtiHelper } from '../lti-helper';\nimport { AddonModLtiIndexComponent } from '../../components/index';\nimport { CoreModuleHandlerBase } from '@features/course/classes/module-base-handler';\nimport { CoreCourse } from '@features/course/services/course';\n\n/**\n * Handler to support LTI modules.\n */\n@Injectable({ providedIn: 'root' })\nexport class AddonModLtiModuleHandlerService extends CoreModuleHandlerBase implements CoreCourseModuleHandler {\n\n    static readonly PAGE_NAME = 'mod_lti';\n\n    name = 'AddonModLti';\n    modName = 'lti';\n    protected pageName = AddonModLtiModuleHandlerService.PAGE_NAME;\n\n    supportedFeatures = {\n        [CoreConstants.FEATURE_GROUPS]: false,\n        [CoreConstants.FEATURE_GROUPINGS]: false,\n        [CoreConstants.FEATURE_MOD_INTRO]: true,\n        [CoreConstants.FEATURE_COMPLETION_TRACKS_VIEWS]: true,\n        [CoreConstants.FEATURE_GRADE_HAS_GRADE]: true,\n        [CoreConstants.FEATURE_GRADE_OUTCOMES]: true,\n        [CoreConstants.FEATURE_BACKUP_MOODLE2]: true,\n        [CoreConstants.FEATURE_SHOW_DESCRIPTION]: true,\n        [CoreConstants.FEATURE_MOD_PURPOSE]: ModPurpose.MOD_PURPOSE_CONTENT,\n    };\n\n    /**\n     * @inheritdoc\n     */\n    async getData(\n        module: CoreCourseModuleData,\n        courseId: number,\n        sectionId?: number,\n        forCoursePage?: boolean,\n    ): Promise<CoreCourseModuleHandlerData> {\n        const data = await super.getData(module, courseId, sectionId, forCoursePage);\n        data.showDownloadButton = false;\n        data.button = {\n            icon: 'fas-up-right-from-square',\n            label: 'addon.mod_lti.launchactivity',\n            action: (event: Event, module: CoreCourseModuleData, courseId: number): void => {\n                // Launch the LTI.\n                AddonModLtiHelper.getDataAndLaunch(courseId, module);\n\n                CoreCourse.storeModuleViewed(courseId, module.id);\n            },\n        };\n\n        return data;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async getMainComponent(): Promise<Type<unknown>> {\n        return AddonModLtiIndexComponent;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getIconSrc(module?: CoreCourseModuleData | undefined, modicon?: string | undefined): string | undefined {\n        return module?.modicon ?? modicon ?? CoreCourse.getModuleIconSrc(this.modName);\n    }\n\n}\n\nexport const AddonModLtiModuleHandler = makeSingleton(AddonModLtiModuleHandlerService);\n"],"mappings":";;AAgBA,SAASA,aAAa,QAAoB,kBAAkB;AAG5D,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,iBAAiB,QAAQ,eAAe;AACjD,SAASC,yBAAyB,QAAQ,wBAAwB;AAClE,SAASC,qBAAqB,QAAQ,8CAA8C;AACpF,SAASC,UAAU,QAAQ,kCAAkC;;AAE7D;;;AAIA,OAAM,MAAOC,+BAAgC,SAAQF,qBAAqB;EAD1EG,YAAA;;IAKI,KAAAC,IAAI,GAAG,aAAa;IACpB,KAAAC,OAAO,GAAG,KAAK;IACL,KAAAC,QAAQ,GAAGJ,+BAA+B,CAACK,SAAS;IAE9D,KAAAC,iBAAiB,GAAG;MAChB,CAACZ,aAAa,CAACa,cAAc,GAAG,KAAK;MACrC,CAACb,aAAa,CAACc,iBAAiB,GAAG,KAAK;MACxC,CAACd,aAAa,CAACe,iBAAiB,GAAG,IAAI;MACvC,CAACf,aAAa,CAACgB,+BAA+B,GAAG,IAAI;MACrD,CAAChB,aAAa,CAACiB,uBAAuB,GAAG,IAAI;MAC7C,CAACjB,aAAa,CAACkB,sBAAsB,GAAG,IAAI;MAC5C,CAAClB,aAAa,CAACmB,sBAAsB,GAAG,IAAI;MAC5C,CAACnB,aAAa,CAACoB,wBAAwB,GAAG,IAAI;MAC9C,CAACpB,aAAa,CAACqB,mBAAmB,GAAC;KACtC;;;EAED;;;EAGMC,OAAOA,CACTC,MAA4B,EAC5BC,QAAgB,EAChBC,SAAkB,EAClBC,aAAuB;IAAA,IAAAC,qBAAA,GAAAA,CAAA,WAAAL,OAAA;MAAAM,KAAA;IAAA,OAAAC,iBAAA;MAEvB,MAAMC,IAAI,SAASH,qBAAA,GAAAI,IAAA,CAAAH,KAAA,EAAcL,MAAM,EAAEC,QAAQ,EAAEC,SAAS,EAAEC,aAAa,CAAC;MAC5EI,IAAI,CAACE,kBAAkB,GAAG,KAAK;MAC/BF,IAAI,CAACG,MAAM,GAAG;QACVC,IAAI,EAAE,0BAA0B;QAChCC,KAAK,EAAE,8BAA8B;QACrCC,MAAM,EAAEA,CAACC,KAAY,EAAEd,MAA4B,EAAEC,QAAgB,KAAU;UAC3E;UACAtB,iBAAiB,CAACoC,gBAAgB,CAACd,QAAQ,EAAED,MAAM,CAAC;UAEpDlB,UAAU,CAACkC,iBAAiB,CAACf,QAAQ,EAAED,MAAM,CAACiB,EAAE,CAAC;QACrD;OACH;MAED,OAAOV,IAAI;IAAC;EAChB;EAEA;;;EAGMW,gBAAgBA,CAAA;IAAA,OAAAZ,iBAAA;MAClB,OAAO1B,yBAAyB;IAAC;EACrC;EAEA;;;EAGAuC,UAAUA,CAACnB,MAAyC,EAAEoB,OAA4B;IAAA,IAAAC,IAAA,EAAAC,eAAA;IAC9E,QAAAD,IAAA,IAAAC,eAAA,GAAOtB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEoB,OAAO,cAAAE,eAAA,cAAAA,eAAA,GAAIF,OAAO,cAAAC,IAAA,cAAAA,IAAA,GAAIvC,UAAU,CAACyC,gBAAgB,CAAC,IAAI,CAACrC,OAAO,CAAC;EAClF;;SAzDSH,+BAAgC;AAEzByC,MAAA,CAAApC,SAAS,GAAG,SAAS;;;;qIAF5BL,MAA+B,IAAA0C,CAAA,IAA/B1C,MAA+B;EAAA;AAAA;;SAA/BA,MAA+B;EAAA2C,OAAA,EAA/B3C,MAA+B,CAAA4C,IAAA;EAAAC,UAAA,EADlB;AAAM;AA8DhC,OAAO,MAAMC,wBAAwB,GAAGnD,aAAa,CAACK,+BAA+B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}