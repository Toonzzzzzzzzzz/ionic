{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreConstants } from '@/core/constants';\nimport { AddonNotesAddComponent } from '@addons/notes/components/add/add-modal';\nimport { AddonNotes } from '@addons/notes/services/notes';\nimport { AddonNotesOffline } from '@addons/notes/services/notes-offline';\nimport { AddonNotesSync, AddonNotesSyncProvider } from '@addons/notes/services/notes-sync';\nimport { CoreAnimations } from '@components/animations';\nimport { CoreUser } from '@features/user/services/user';\nimport { IonContent } from '@ionic/angular';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils, ToastDuration } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { Translate } from '@singletons';\nimport { CoreEvents } from '@singletons/events';\nimport { CoreTime } from '@singletons/time';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/context-menu/context-menu\";\nimport * as i3 from \"../../../../core/components/context-menu/context-menu-item\";\nimport * as i4 from \"../../../../core/components/empty-box/empty-box\";\nimport * as i5 from \"../../../../core/components/loading/loading\";\nimport * as i6 from \"../../../../core/components/navbar-buttons/navbar-buttons\";\nimport * as i7 from \"../../../../core/components/user-avatar/user-avatar\";\nimport * as i8 from \"../../../../core/components/combobox/combobox\";\nimport * as i9 from \"../../../../core/directives/fab\";\nimport * as i10 from \"../../../../core/directives/fa-icon\";\nimport * as i11 from \"../../../../core/directives/format-text\";\nimport * as i12 from \"../../../../core/directives/content\";\nimport * as i13 from \"../../../../core/directives/update-non-reactive-attributes\";\nimport * as i14 from \"@ionic/angular\";\nimport * as i15 from \"../../../../core/pipes/date-day-or-time\";\nimport * as i16 from \"@ngx-translate/core\";\nfunction AddonNotesListPage_ion_item_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 19);\n    i0.ɵɵelement(1, \"core-user-avatar\", 20);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 21);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", ctx_r0.user)(\"courseId\", ctx_r0.courseId)(\"linkProfile\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r0.user.fullname);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction AddonNotesListPage_ion_card_35_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 22)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 23);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵpipe(6, \"lowercase\");\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind2(5, 1, \"core.thereisdatatosync\", i0.ɵɵpureFunction1(8, _c0, i0.ɵɵpipeBind1(6, 4, i0.ɵɵpipeBind1(7, 6, \"addon.notes.notes\")))), \" \");\n  }\n}\nfunction AddonNotesListPage_core_empty_box_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-empty-box\", 24);\n    i0.ɵɵpipe(1, \"translate\");\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"message\", i0.ɵɵpipeBind1(1, 1, \"addon.notes.nonotes\"));\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_core_user_avatar_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-user-avatar\", 31);\n  }\n  if (rf & 2) {\n    const note_r6 = i0.ɵɵnextContext().$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"user\", note_r6)(\"courseId\", ctx_r7.courseId);\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 21);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const note_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(note_r6.userfullname);\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 2)(1, \"span\", 19);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"coreDateDayOrTime\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const note_r6 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 1, note_r6.lastmodified));\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_p_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 2);\n    i0.ɵɵelement(1, \"ion-icon\", 32);\n    i0.ɵɵelementStart(2, \"span\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.notsent\"), \" \");\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 2);\n    i0.ɵɵelement(1, \"ion-icon\", 33);\n    i0.ɵɵelementStart(2, \"span\", 19);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 1, \"core.deletedoffline\"), \" \");\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_ion_button_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 34);\n    i0.ɵɵlistener(\"click\", function AddonNotesListPage_ng_container_37_ion_card_1_ion_button_8_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r19);\n      const note_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.undoDeleteNote($event, note_r6));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 35);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 1, \"core.restore\"));\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_ion_button_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-button\", 34);\n    i0.ɵɵlistener(\"click\", function AddonNotesListPage_ng_container_37_ion_card_1_ion_button_9_Template_ion_button_click_0_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const note_r6 = i0.ɵɵnextContext().$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.deleteNote($event, note_r6));\n    });\n    i0.ɵɵpipe(1, \"translate\");\n    i0.ɵɵelement(2, \"ion-icon\", 36);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵproperty(\"@coreSlideInOut\", \"fromRight\");\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(1, 2, \"core.delete\"));\n  }\n}\nfunction AddonNotesListPage_ng_container_37_ion_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 19);\n    i0.ɵɵtemplate(2, AddonNotesListPage_ng_container_37_ion_card_1_core_user_avatar_2_Template, 1, 2, \"core-user-avatar\", 26);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtemplate(4, AddonNotesListPage_ng_container_37_ion_card_1_p_4_Template, 2, 1, \"p\", 27);\n    i0.ɵɵtemplate(5, AddonNotesListPage_ng_container_37_ion_card_1_p_5_Template, 4, 3, \"p\", 28);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(6, AddonNotesListPage_ng_container_37_ion_card_1_p_6_Template, 5, 3, \"p\", 28);\n    i0.ɵɵtemplate(7, AddonNotesListPage_ng_container_37_ion_card_1_p_7_Template, 5, 3, \"p\", 28);\n    i0.ɵɵtemplate(8, AddonNotesListPage_ng_container_37_ion_card_1_ion_button_8_Template, 3, 3, \"ion-button\", 29);\n    i0.ɵɵtemplate(9, AddonNotesListPage_ng_container_37_ion_card_1_ion_button_9_Template, 3, 4, \"ion-button\", 29);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"ion-item\", 19)(11, \"ion-label\");\n    i0.ɵɵelement(12, \"core-format-text\", 30);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const note_r6 = ctx.$implicit;\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.userId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r5.userId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !note_r6.deleted && !note_r6.offline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", note_r6.offline);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", note_r6.deleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", note_r6.deleted);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r5.showDelete && !note_r6.deleted && (ctx_r5.type !== \"personal\" || note_r6.usermodified === ctx_r5.currentUserId));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", note_r6.content)(\"filter\", false);\n  }\n}\nfunction AddonNotesListPage_ng_container_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonNotesListPage_ng_container_37_ion_card_1_Template, 13, 9, \"ion-card\", 25);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.notes);\n  }\n}\nfunction AddonNotesListPage_ion_fab_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-fab\", 37)(1, \"ion-fab-button\", 38);\n    i0.ɵɵlistener(\"click\", function AddonNotesListPage_ion_fab_38_Template_ion_fab_button_click_1_listener($event) {\n      i0.ɵɵrestoreView(_r24);\n      const ctx_r23 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r23.addNote($event));\n    });\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelement(3, \"ion-icon\", 39);\n    i0.ɵɵelementStart(4, \"span\", 40);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(2, 2, \"addon.notes.addnewnote\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 4, \"addon.notes.addnewnote\"));\n  }\n}\n/**\n * Page that displays a list of notes.\n */\nexport class AddonNotesListPage {\n  constructor() {\n    this.type = 'course';\n    this.refreshIcon = CoreConstants.ICON_LOADING;\n    this.syncIcon = CoreConstants.ICON_LOADING;\n    this.notes = [];\n    this.hasOffline = false;\n    this.notesLoaded = false;\n    this.showDelete = false;\n    this.canDeleteNotes = false;\n    this.logView = CoreTime.once(() => this.performLogView());\n    try {\n      this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n      this.userId = CoreNavigator.getRouteNumberParam('userId');\n    } catch (error) {\n      CoreDomUtils.showErrorModal(error);\n      CoreNavigator.back();\n      return;\n    }\n    // Refresh data if notes are synchronized automatically.\n    this.syncObserver = CoreEvents.on(AddonNotesSyncProvider.AUTO_SYNCED, data => {\n      if (data.courseId == this.courseId) {\n        var _this$content;\n        // Show the sync warnings.\n        this.showSyncWarnings(data.warnings);\n        // Refresh the data.\n        this.notesLoaded = false;\n        this.refreshIcon = CoreConstants.ICON_LOADING;\n        this.syncIcon = CoreConstants.ICON_LOADING;\n        (_this$content = this.content) === null || _this$content === void 0 || _this$content.scrollToTop();\n        this.fetchNotes(false);\n      }\n    }, CoreSites.getCurrentSiteId());\n    this.currentUserId = CoreSites.getCurrentSiteUserId();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      yield _this.fetchNotes(true);\n    })();\n  }\n  /**\n   * Fetch notes.\n   *\n   * @param sync When to resync notes.\n   * @param showSyncErrors When to display sync errors or not.\n   * @returns Promise with the notes.\n   */\n  fetchNotes(sync = false, showSyncErrors = false) {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      if (sync) {\n        yield _this2.syncNotes(showSyncErrors);\n      }\n      try {\n        const allNotes = yield AddonNotes.getNotes(_this2.courseId, _this2.userId);\n        const notesList = allNotes[_this2.type + 'notes'] || [];\n        notesList.forEach(note => {\n          note.content = CoreTextUtils.decodeHTML(note.content);\n        });\n        yield AddonNotes.setOfflineDeletedNotes(notesList, _this2.courseId);\n        _this2.hasOffline = notesList.some(note => note.offline || note.deleted);\n        if (_this2.userId) {\n          _this2.notes = notesList;\n          // Get the user profile to retrieve the user image.\n          _this2.user = yield CoreUser.getProfile(_this2.userId, _this2.courseId, true);\n        } else {\n          _this2.notes = yield AddonNotes.getNotesUserData(notesList);\n        }\n        _this2.logView();\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n      } finally {\n        let canDelete = _this2.notes && _this2.notes.length > 0;\n        if (canDelete && _this2.type == 'personal') {\n          canDelete = !!_this2.notes.find(note => note.usermodified == _this2.currentUserId);\n        }\n        _this2.canDeleteNotes = canDelete;\n        _this2.notesLoaded = true;\n        _this2.refreshIcon = CoreConstants.ICON_REFRESH;\n        _this2.syncIcon = CoreConstants.ICON_SYNC;\n      }\n    })();\n  }\n  /**\n   * Refresh notes on PTR.\n   *\n   * @param showSyncErrors Whether to display sync errors or not.\n   * @param refresher Refresher instance.\n   */\n  refreshNotes(showSyncErrors, refresher) {\n    this.refreshIcon = CoreConstants.ICON_LOADING;\n    this.syncIcon = CoreConstants.ICON_LOADING;\n    AddonNotes.invalidateNotes(this.courseId, this.userId).finally(() => {\n      this.fetchNotes(true, showSyncErrors).finally(() => {\n        if (refresher) {\n          refresher === null || refresher === void 0 || refresher.complete();\n        }\n      });\n    });\n  }\n  /**\n   * Function called when the type has changed.\n   *\n   * @param type New type.\n   */\n  typeChanged(type) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.type = type;\n      _this3.notesLoaded = false;\n      _this3.refreshIcon = CoreConstants.ICON_LOADING;\n      _this3.syncIcon = CoreConstants.ICON_LOADING;\n      yield _this3.fetchNotes(true);\n    })();\n  }\n  /**\n   * Add a new Note to user and course.\n   *\n   * @param e Event.\n   */\n  addNote(e) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      _this4.logViewAdd();\n      const modalData = yield CoreDomUtils.openModal({\n        component: AddonNotesAddComponent,\n        componentProps: {\n          userId: _this4.userId,\n          courseId: _this4.courseId,\n          type: _this4.type\n        }\n      });\n      if (modalData !== undefined) {\n        if (modalData.sent && modalData.type) {\n          if (modalData.type != _this4.type) {\n            _this4.type = modalData.type;\n            _this4.notesLoaded = false;\n          }\n          _this4.refreshNotes(false);\n        } else if (modalData.type && modalData.type != _this4.type) {\n          _this4.typeChanged(modalData.type);\n        }\n      }\n    })();\n  }\n  /**\n   * Delete a note.\n   *\n   * @param e Click event.\n   * @param note Note to delete.\n   */\n  deleteNote(e, note) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      try {\n        _this5.logViewDelete(note);\n        yield CoreDomUtils.showDeleteConfirm('addon.notes.deleteconfirm');\n        try {\n          yield AddonNotes.deleteNote(note, _this5.courseId);\n          _this5.showDelete = false;\n          _this5.refreshNotes(false);\n          CoreDomUtils.showToast('addon.notes.eventnotedeleted', true, ToastDuration.LONG);\n        } catch (error) {\n          CoreDomUtils.showErrorModalDefault(error, 'Delete note failed.');\n        }\n      } catch (_unused) {\n        // User cancelled, nothing to do.\n      }\n    })();\n  }\n  /**\n   * Restore a note.\n   *\n   * @param e Click event.\n   * @param note Note to delete.\n   */\n  undoDeleteNote(e, note) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      yield AddonNotesOffline.undoDeleteNote(note.id);\n      _this6.refreshNotes(false);\n    })();\n  }\n  /**\n   * Toggle delete.\n   */\n  toggleDelete() {\n    this.showDelete = !this.showDelete;\n  }\n  /**\n   * Tries to synchronize course notes.\n   *\n   * @param showSyncErrors Whether to display sync errors or not.\n   * @returns Promise resolved when done.\n   */\n  syncNotes(showSyncErrors) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const result = yield AddonNotesSync.syncNotes(_this7.courseId);\n        _this7.showSyncWarnings(result.warnings);\n      } catch (error) {\n        if (showSyncErrors) {\n          CoreDomUtils.showErrorModalDefault(error, 'core.errorsync', true);\n        }\n      }\n    })();\n  }\n  /**\n   * Show sync warnings if any.\n   *\n   * @param warnings the warnings\n   */\n  showSyncWarnings(warnings) {\n    const message = CoreTextUtils.buildMessage(warnings);\n    if (message) {\n      CoreDomUtils.showAlert(undefined, message);\n    }\n  }\n  /**\n   * Log view.\n   */\n  performLogView() {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      yield CoreUtils.ignoreErrors(AddonNotes.logView(_this8.courseId, _this8.userId));\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n        ws: 'core_notes_view_notes',\n        name: Translate.instant('addon.notes.notes'),\n        data: {\n          courseid: _this8.courseId,\n          userid: _this8.userId || 0,\n          category: 'notes'\n        },\n        url: CoreUrlUtils.addParamsToUrl('/notes/index.php', {\n          user: _this8.userId,\n          course: _this8.courseId !== CoreSites.getCurrentSiteHomeId() ? _this8.courseId : undefined\n        })\n      });\n    })();\n  }\n  /**\n   * Log view.\n   */\n  logViewAdd() {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'core_notes_create_notes',\n        name: Translate.instant('addon.notes.notes'),\n        data: {\n          courseid: _this9.courseId,\n          userid: _this9.userId || 0,\n          category: 'notes'\n        },\n        url: CoreUrlUtils.addParamsToUrl('/notes/edit.php', {\n          courseid: _this9.courseId,\n          userid: _this9.userId,\n          publishstate: _this9.type === 'personal' ? 'draft' : _this9.type === 'course' ? 'public' : 'site'\n        })\n      });\n    })();\n  }\n  /**\n   * Log view.\n   */\n  logViewDelete(note) {\n    return _asyncToGenerator(function* () {\n      if (!note.id) {\n        return;\n      }\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'core_notes_delete_notes',\n        name: Translate.instant('addon.notes.notes'),\n        data: {\n          id: note.id,\n          category: 'notes'\n        },\n        url: `/notes/delete.php?id=${note.id}`\n      });\n    })();\n  }\n  /**\n   * Page destroyed.\n   */\n  ngOnDestroy() {\n    this.syncObserver && this.syncObserver.off();\n  }\n}\n_class = AddonNotesListPage;\n_class.ɵfac = function AddonNotesListPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-notes-list-page\"]],\n  viewQuery: function AddonNotesListPage_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(IonContent, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.content = _t.first);\n    }\n  },\n  decls: 39,\n  vars: 44,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"slot\", \"end\", \"fill\", \"clear\", 3, \"hidden\", \"click\"], [\"name\", \"fas-pen\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [1, \"limited-width\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [3, \"selection\", \"onChange\"], [\"value\", \"site\", 1, \"ion-text-wrap\"], [\"value\", \"course\", 1, \"ion-text-wrap\"], [\"value\", \"personal\", 1, \"ion-text-wrap\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [\"icon\", \"fas-receipt\", 3, \"message\", 4, \"ngIf\"], [4, \"ngIf\"], [\"slot\", \"fixed\", \"core-fab\", \"\", \"vertical\", \"bottom\", \"horizontal\", \"end\", 4, \"ngIf\"], [1, \"ion-text-wrap\"], [\"slot\", \"start\", 3, \"user\", \"courseId\", \"linkProfile\"], [1, \"item-heading\"], [1, \"core-warning-card\"], [\"name\", \"fas-triangle-exclamation\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"icon\", \"fas-receipt\", 3, \"message\"], [4, \"ngFor\", \"ngForOf\"], [\"slot\", \"start\", 3, \"user\", \"courseId\", 4, \"ngIf\"], [\"class\", \"item-heading\", 4, \"ngIf\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [3, \"text\", \"filter\"], [\"slot\", \"start\", 3, \"user\", \"courseId\"], [\"name\", \"fas-clock\", \"aria-hidden\", \"true\"], [\"name\", \"fas-trash\", \"aria-hidden\", \"true\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [\"name\", \"fas-rotate-left\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"slot\", \"fixed\", \"core-fab\", \"\", \"vertical\", \"bottom\", \"horizontal\", \"end\"], [3, \"click\"], [\"name\", \"fas-plus\", \"aria-hidden\", \"true\"], [1, \"sr-only\"]],\n  template: function AddonNotesListPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\")(6, \"h1\");\n      i0.ɵɵtext(7);\n      i0.ɵɵpipe(8, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelement(9, \"ion-buttons\", 2);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(10, \"core-navbar-buttons\", 2)(11, \"ion-button\", 3);\n      i0.ɵɵlistener(\"click\", function AddonNotesListPage_Template_ion_button_click_11_listener() {\n        return ctx.toggleDelete();\n      });\n      i0.ɵɵpipe(12, \"translate\");\n      i0.ɵɵelement(13, \"ion-icon\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"core-context-menu\")(15, \"core-context-menu-item\", 5);\n      i0.ɵɵlistener(\"action\", function AddonNotesListPage_Template_core_context_menu_item_action_15_listener() {\n        return ctx.refreshNotes(false);\n      });\n      i0.ɵɵpipe(16, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"core-context-menu-item\", 5);\n      i0.ɵɵlistener(\"action\", function AddonNotesListPage_Template_core_context_menu_item_action_17_listener() {\n        return ctx.refreshNotes(true);\n      });\n      i0.ɵɵpipe(18, \"translate\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(19, \"ion-content\", 6)(20, \"ion-refresher\", 7);\n      i0.ɵɵlistener(\"ionRefresh\", function AddonNotesListPage_Template_ion_refresher_ionRefresh_20_listener($event) {\n        return ctx.refreshNotes(false, $event.target);\n      });\n      i0.ɵɵelement(21, \"ion-refresher-content\", 8);\n      i0.ɵɵpipe(22, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"core-loading\", 9);\n      i0.ɵɵtemplate(24, AddonNotesListPage_ion_item_24_Template, 5, 4, \"ion-item\", 10);\n      i0.ɵɵelementStart(25, \"core-combobox\", 11);\n      i0.ɵɵlistener(\"onChange\", function AddonNotesListPage_Template_core_combobox_onChange_25_listener($event) {\n        return ctx.typeChanged($event);\n      });\n      i0.ɵɵelementStart(26, \"ion-select-option\", 12);\n      i0.ɵɵtext(27);\n      i0.ɵɵpipe(28, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"ion-select-option\", 13);\n      i0.ɵɵtext(30);\n      i0.ɵɵpipe(31, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"ion-select-option\", 14);\n      i0.ɵɵtext(33);\n      i0.ɵɵpipe(34, \"translate\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(35, AddonNotesListPage_ion_card_35_Template, 8, 10, \"ion-card\", 15);\n      i0.ɵɵtemplate(36, AddonNotesListPage_core_empty_box_36_Template, 2, 3, \"core-empty-box\", 16);\n      i0.ɵɵtemplate(37, AddonNotesListPage_ng_container_37_Template, 2, 1, \"ng-container\", 17);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(38, AddonNotesListPage_ion_fab_38_Template, 7, 6, \"ion-fab\", 18);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 26, \"core.back\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(8, 28, \"addon.notes.notes\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", !ctx.canDeleteNotes);\n      i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(12, 30, \"core.toggledelete\"));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"hidden\", !(ctx.notesLoaded && !ctx.hasOffline))(\"priority\", 100)(\"content\", i0.ɵɵpipeBind1(16, 32, \"core.refresh\"))(\"iconAction\", ctx.refreshIcon)(\"closeOnClick\", true);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !(ctx.notesLoaded && ctx.hasOffline))(\"priority\", 100)(\"content\", i0.ɵɵpipeBind1(18, 34, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !ctx.notesLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(22, 36, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.notesLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"selection\", ctx.type);\n      i0.ɵɵadvance(2);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(28, 38, \"addon.notes.sitenotes\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(31, 40, \"addon.notes.coursenotes\"), \" \");\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(34, 42, \"addon.notes.personalnotes\"), \" \");\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.hasOffline);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.notes && ctx.notes.length === 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.notes && ctx.notes.length > 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.userId && ctx.notesLoaded);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreContextMenuComponent, i3.CoreContextMenuItemComponent, i4.CoreEmptyBoxComponent, i5.CoreLoadingComponent, i6.CoreNavBarButtonsComponent, i7.CoreUserAvatarComponent, i8.CoreComboboxComponent, i9.CoreFabDirective, i10.CoreFaIconDirective, i11.CoreFormatTextDirective, i12.CoreContentDirective, i13.CoreUpdateNonReactiveAttributesDirective, i14.IonButton, i14.IonButtons, i14.IonCard, i14.IonContent, i14.IonFab, i14.IonFabButton, i14.IonHeader, i14.IonIcon, i14.IonItem, i14.IonLabel, i14.IonRefresher, i14.IonRefresherContent, i14.IonSelectOption, i14.IonTitle, i14.IonToolbar, i14.IonBackButton, i1.LowerCasePipe, i15.CoreDateDayOrTimePipe, i16.TranslatePipe],\n  encapsulation: 2,\n  data: {\n    animation: [CoreAnimations.SLIDE_IN_OUT]\n  }\n});","map":{"version":3,"names":["CoreConstants","AddonNotesAddComponent","AddonNotes","AddonNotesOffline","AddonNotesSync","AddonNotesSyncProvider","CoreAnimations","CoreUser","IonContent","CoreAnalytics","CoreAnalyticsEventType","CoreNavigator","CoreSites","CoreDomUtils","ToastDuration","CoreTextUtils","CoreUrlUtils","CoreUtils","Translate","CoreEvents","CoreTime","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","user","courseId","ɵɵtextInterpolate","fullname","ɵɵtextInterpolate1","ɵɵpipeBind2","ɵɵpureFunction1","_c0","ɵɵpipeBind1","note_r6","ctx_r7","userfullname","lastmodified","ɵɵlistener","AddonNotesListPage_ng_container_37_ion_card_1_ion_button_8_Template_ion_button_click_0_listener","$event","ɵɵrestoreView","_r19","ɵɵnextContext","$implicit","ctx_r17","ɵɵresetView","undoDeleteNote","ɵɵattribute","AddonNotesListPage_ng_container_37_ion_card_1_ion_button_9_Template_ion_button_click_0_listener","_r22","ctx_r20","deleteNote","ɵɵtemplate","AddonNotesListPage_ng_container_37_ion_card_1_core_user_avatar_2_Template","AddonNotesListPage_ng_container_37_ion_card_1_p_4_Template","AddonNotesListPage_ng_container_37_ion_card_1_p_5_Template","AddonNotesListPage_ng_container_37_ion_card_1_p_6_Template","AddonNotesListPage_ng_container_37_ion_card_1_p_7_Template","AddonNotesListPage_ng_container_37_ion_card_1_ion_button_8_Template","AddonNotesListPage_ng_container_37_ion_card_1_ion_button_9_Template","ctx_r5","userId","deleted","offline","showDelete","type","usermodified","currentUserId","content","ɵɵelementContainerStart","AddonNotesListPage_ng_container_37_ion_card_1_Template","ɵɵelementContainerEnd","ctx_r3","notes","AddonNotesListPage_ion_fab_38_Template_ion_fab_button_click_1_listener","_r24","ctx_r23","addNote","AddonNotesListPage","constructor","refreshIcon","ICON_LOADING","syncIcon","hasOffline","notesLoaded","canDeleteNotes","logView","once","performLogView","getRequiredRouteNumberParam","getRouteNumberParam","error","showErrorModal","back","syncObserver","on","AUTO_SYNCED","data","_this$content","showSyncWarnings","warnings","scrollToTop","fetchNotes","getCurrentSiteId","getCurrentSiteUserId","ngOnInit","_this","_asyncToGenerator","sync","showSyncErrors","_this2","syncNotes","allNotes","getNotes","notesList","forEach","note","decodeHTML","setOfflineDeletedNotes","some","getProfile","getNotesUserData","canDelete","length","find","ICON_REFRESH","ICON_SYNC","refreshNotes","refresher","invalidateNotes","finally","complete","typeChanged","_this3","e","_this4","preventDefault","stopPropagation","logViewAdd","modalData","openModal","component","componentProps","undefined","sent","_this5","logViewDelete","showDeleteConfirm","showToast","LONG","showErrorModalDefault","_unused","_this6","id","toggleDelete","_this7","result","message","buildMessage","showAlert","_this8","ignoreErrors","logEvent","VIEW_ITEM_LIST","ws","name","instant","courseid","userid","category","url","addParamsToUrl","course","getCurrentSiteHomeId","_this9","VIEW_ITEM","publishstate","ngOnDestroy","off","selectors","viewQuery","AddonNotesListPage_Query","rf","ctx","AddonNotesListPage_Template_ion_button_click_11_listener","AddonNotesListPage_Template_core_context_menu_item_action_15_listener","AddonNotesListPage_Template_core_context_menu_item_action_17_listener","AddonNotesListPage_Template_ion_refresher_ionRefresh_20_listener","target","AddonNotesListPage_ion_item_24_Template","AddonNotesListPage_Template_core_combobox_onChange_25_listener","AddonNotesListPage_ion_card_35_Template","AddonNotesListPage_core_empty_box_36_Template","AddonNotesListPage_ng_container_37_Template","AddonNotesListPage_ion_fab_38_Template","ɵɵpropertyInterpolate","SLIDE_IN_OUT"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/notes/pages/list/list.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/notes/pages/list/list.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreConstants } from '@/core/constants';\nimport { AddonNotesAddComponent, AddonNotesAddModalReturn } from '@addons/notes/components/add/add-modal';\nimport { AddonNotes, AddonNotesNoteFormatted, AddonNotesPublishState } from '@addons/notes/services/notes';\nimport { AddonNotesOffline } from '@addons/notes/services/notes-offline';\nimport { AddonNotesSync, AddonNotesSyncProvider } from '@addons/notes/services/notes-sync';\nimport { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { CoreAnimations } from '@components/animations';\nimport { CoreUser, CoreUserProfile } from '@features/user/services/user';\nimport { IonContent } from '@ionic/angular';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils, ToastDuration } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport { CoreUtils } from '@services/utils/utils';\nimport { Translate } from '@singletons';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreTime } from '@singletons/time';\n\n/**\n * Page that displays a list of notes.\n */\n@Component({\n    selector: 'page-addon-notes-list-page',\n    templateUrl: 'list.html',\n    animations: [CoreAnimations.SLIDE_IN_OUT],\n})\nexport class AddonNotesListPage implements OnInit, OnDestroy {\n\n    @ViewChild(IonContent) content?: IonContent;\n\n    courseId!: number;\n    userId?: number;\n    type: AddonNotesPublishState = 'course';\n    refreshIcon = CoreConstants.ICON_LOADING;\n    syncIcon = CoreConstants.ICON_LOADING;\n    notes: AddonNotesNoteFormatted[] = [];\n    hasOffline = false;\n    notesLoaded = false;\n    user?: CoreUserProfile;\n    showDelete = false;\n    canDeleteNotes = false;\n    currentUserId!: number;\n\n    protected syncObserver!: CoreEventObserver;\n    protected logView: () => void;\n\n    constructor() {\n        this.logView = CoreTime.once(() => this.performLogView());\n\n        try {\n            this.courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n            this.userId = CoreNavigator.getRouteNumberParam('userId');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        // Refresh data if notes are synchronized automatically.\n        this.syncObserver = CoreEvents.on(AddonNotesSyncProvider.AUTO_SYNCED, (data) => {\n            if (data.courseId == this.courseId) {\n                // Show the sync warnings.\n                this.showSyncWarnings(data.warnings);\n\n                // Refresh the data.\n                this.notesLoaded = false;\n                this.refreshIcon = CoreConstants.ICON_LOADING;\n                this.syncIcon = CoreConstants.ICON_LOADING;\n\n                this.content?.scrollToTop();\n                this.fetchNotes(false);\n            }\n        }, CoreSites.getCurrentSiteId());\n\n        this.currentUserId = CoreSites.getCurrentSiteUserId();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        await this.fetchNotes(true);\n    }\n\n    /**\n     * Fetch notes.\n     *\n     * @param sync When to resync notes.\n     * @param showSyncErrors When to display sync errors or not.\n     * @returns Promise with the notes.\n     */\n    protected async fetchNotes(sync = false, showSyncErrors = false): Promise<void> {\n        if (sync) {\n            await this.syncNotes(showSyncErrors);\n        }\n\n        try {\n            const allNotes = await AddonNotes.getNotes(this.courseId, this.userId);\n\n            const notesList: AddonNotesNoteFormatted[] = allNotes[this.type + 'notes'] || [];\n\n            notesList.forEach((note) => {\n                note.content = CoreTextUtils.decodeHTML(note.content);\n            });\n\n            await AddonNotes.setOfflineDeletedNotes(notesList, this.courseId);\n\n            this.hasOffline = notesList.some((note) => note.offline || note.deleted);\n\n            if (this.userId) {\n                this.notes = notesList;\n\n                // Get the user profile to retrieve the user image.\n                this.user = await CoreUser.getProfile(this.userId, this.courseId, true);\n            } else {\n                this.notes = await AddonNotes.getNotesUserData(notesList);\n            }\n\n            this.logView();\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n        } finally {\n            let canDelete = this.notes && this.notes.length > 0;\n            if (canDelete && this.type == 'personal') {\n                canDelete = !!this.notes.find((note) => note.usermodified == this.currentUserId);\n            }\n            this.canDeleteNotes = canDelete;\n\n            this.notesLoaded = true;\n            this.refreshIcon = CoreConstants.ICON_REFRESH;\n            this.syncIcon = CoreConstants.ICON_SYNC;\n        }\n    }\n\n    /**\n     * Refresh notes on PTR.\n     *\n     * @param showSyncErrors Whether to display sync errors or not.\n     * @param refresher Refresher instance.\n     */\n    refreshNotes(showSyncErrors: boolean, refresher?: HTMLIonRefresherElement): void {\n        this.refreshIcon = CoreConstants.ICON_LOADING;\n        this.syncIcon = CoreConstants.ICON_LOADING;\n\n        AddonNotes.invalidateNotes(this.courseId, this.userId).finally(() => {\n            this.fetchNotes(true, showSyncErrors).finally(() => {\n                if (refresher) {\n                    refresher?.complete();\n                }\n            });\n        });\n    }\n\n    /**\n     * Function called when the type has changed.\n     *\n     * @param type New type.\n     */\n    async typeChanged(type: AddonNotesPublishState): Promise<void> {\n        this.type = type;\n        this.notesLoaded = false;\n        this.refreshIcon = CoreConstants.ICON_LOADING;\n        this.syncIcon = CoreConstants.ICON_LOADING;\n\n        await this.fetchNotes(true);\n    }\n\n    /**\n     * Add a new Note to user and course.\n     *\n     * @param e Event.\n     */\n    async addNote(e: Event): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        this.logViewAdd();\n\n        const modalData = await CoreDomUtils.openModal<AddonNotesAddModalReturn>({\n            component: AddonNotesAddComponent,\n            componentProps: {\n                userId: this.userId,\n                courseId: this.courseId,\n                type: this.type,\n            },\n        });\n\n        if (modalData !== undefined) {\n\n            if (modalData.sent && modalData.type) {\n                if (modalData.type != this.type) {\n                    this.type = modalData.type;\n                    this.notesLoaded = false;\n                }\n\n                this.refreshNotes(false);\n            } else if (modalData.type && modalData.type != this.type) {\n                this.typeChanged(modalData.type);\n            }\n        }\n    }\n\n    /**\n     * Delete a note.\n     *\n     * @param e Click event.\n     * @param note Note to delete.\n     */\n    async deleteNote(e: Event, note: AddonNotesNoteFormatted): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        try {\n            this.logViewDelete(note);\n\n            await CoreDomUtils.showDeleteConfirm('addon.notes.deleteconfirm');\n            try {\n                await AddonNotes.deleteNote(note, this.courseId);\n                this.showDelete = false;\n\n                this.refreshNotes(false);\n\n                CoreDomUtils.showToast('addon.notes.eventnotedeleted', true, ToastDuration.LONG);\n\n            } catch (error) {\n                CoreDomUtils.showErrorModalDefault(error, 'Delete note failed.');\n            }\n        } catch {\n            // User cancelled, nothing to do.\n        }\n    }\n\n    /**\n     * Restore a note.\n     *\n     * @param e Click event.\n     * @param note Note to delete.\n     */\n    async undoDeleteNote(e: Event, note: AddonNotesNoteFormatted): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        await AddonNotesOffline.undoDeleteNote(note.id);\n        this.refreshNotes(false);\n    }\n\n    /**\n     * Toggle delete.\n     */\n    toggleDelete(): void {\n        this.showDelete = !this.showDelete;\n    }\n\n    /**\n     * Tries to synchronize course notes.\n     *\n     * @param showSyncErrors Whether to display sync errors or not.\n     * @returns Promise resolved when done.\n     */\n    protected async syncNotes(showSyncErrors: boolean): Promise<void> {\n        try {\n            const result = await AddonNotesSync.syncNotes(this.courseId);\n\n            this.showSyncWarnings(result.warnings);\n        } catch (error) {\n            if (showSyncErrors) {\n                CoreDomUtils.showErrorModalDefault(error, 'core.errorsync', true);\n            }\n        }\n    }\n\n    /**\n     * Show sync warnings if any.\n     *\n     * @param warnings the warnings\n     */\n    protected showSyncWarnings(warnings: string[]): void {\n        const message = CoreTextUtils.buildMessage(warnings);\n\n        if (message) {\n            CoreDomUtils.showAlert(undefined, message);\n        }\n    }\n\n    /**\n     * Log view.\n     */\n    protected async performLogView(): Promise<void> {\n        await CoreUtils.ignoreErrors(AddonNotes.logView(this.courseId, this.userId));\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM_LIST,\n            ws: 'core_notes_view_notes',\n            name: Translate.instant('addon.notes.notes'),\n            data: { courseid: this.courseId, userid: this.userId || 0, category: 'notes' },\n            url: CoreUrlUtils.addParamsToUrl('/notes/index.php', {\n                user: this.userId,\n                course: this.courseId !== CoreSites.getCurrentSiteHomeId() ? this.courseId : undefined,\n            }),\n        });\n    }\n\n    /**\n     * Log view.\n     */\n    protected async logViewAdd(): Promise<void> {\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: 'core_notes_create_notes',\n            name: Translate.instant('addon.notes.notes'),\n            data: { courseid: this.courseId, userid: this.userId || 0, category: 'notes' },\n            url: CoreUrlUtils.addParamsToUrl('/notes/edit.php', {\n                courseid: this.courseId,\n                userid: this.userId,\n                publishstate: this.type === 'personal' ? 'draft' : (this.type === 'course' ? 'public' : 'site'),\n            }),\n        });\n    }\n\n    /**\n     * Log view.\n     */\n    protected async logViewDelete(note: AddonNotesNoteFormatted): Promise<void> {\n        if (!note.id) {\n            return;\n        }\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: 'core_notes_delete_notes',\n            name: Translate.instant('addon.notes.notes'),\n            data: { id: note.id, category: 'notes' },\n            url: `/notes/delete.php?id=${note.id}`,\n        });\n    }\n\n    /**\n     * Page destroyed.\n     */\n    ngOnDestroy(): void {\n        this.syncObserver && this.syncObserver.off();\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n\n        <ion-title>\n            <h1>{{ 'addon.notes.notes' | translate }}</h1>\n        </ion-title>\n        <ion-buttons slot=\"end\" />\n    </ion-toolbar>\n</ion-header>\n<core-navbar-buttons slot=\"end\">\n    <ion-button [hidden]=\"!canDeleteNotes\" slot=\"end\" fill=\"clear\" (click)=\"toggleDelete()\"\n        [attr.aria-label]=\"'core.toggledelete' | translate\">\n        <ion-icon name=\"fas-pen\" slot=\"icon-only\" aria-hidden=\"true\" />\n    </ion-button>\n    <core-context-menu>\n        <core-context-menu-item [hidden]=\"!(notesLoaded && !hasOffline)\" [priority]=\"100\" [content]=\"'core.refresh' | translate\"\n            (action)=\"refreshNotes(false)\" [iconAction]=\"refreshIcon\" [closeOnClick]=\"true\" />\n        <core-context-menu-item [hidden]=\"!(notesLoaded && hasOffline)\" [priority]=\"100\"\n            [content]=\"'core.settings.synchronizenow' | translate\" (action)=\"refreshNotes(true)\" [iconAction]=\"syncIcon\"\n            [closeOnClick]=\"false\" />\n    </core-context-menu>\n</core-navbar-buttons>\n<ion-content class=\"limited-width\">\n    <ion-refresher slot=\"fixed\" [disabled]=\"!notesLoaded\" (ionRefresh)=\"refreshNotes(false, $event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n\n    <core-loading [hideUntil]=\"notesLoaded\">\n        <ion-item class=\"ion-text-wrap\" *ngIf=\"user\">\n            <core-user-avatar [user]=\"user\" [courseId]=\"courseId\" slot=\"start\" [linkProfile]=\"false\" />\n            <ion-label>\n                <p class=\"item-heading\">{{user!.fullname}}</p>\n            </ion-label>\n        </ion-item>\n\n        <core-combobox [selection]=\"type\" (onChange)=\"typeChanged($event)\">\n            <ion-select-option class=\"ion-text-wrap\" value=\"site\">\n                {{ 'addon.notes.sitenotes' | translate }}\n            </ion-select-option>\n            <ion-select-option class=\"ion-text-wrap\" value=\"course\">\n                {{ 'addon.notes.coursenotes' | translate }}\n            </ion-select-option>\n            <ion-select-option class=\"ion-text-wrap\" value=\"personal\">\n                {{ 'addon.notes.personalnotes' | translate }}\n            </ion-select-option>\n        </core-combobox>\n\n        <ion-card class=\"core-warning-card\" *ngIf=\"hasOffline\">\n            <ion-item>\n                <ion-icon name=\"fas-triangle-exclamation\" slot=\"start\" aria-hidden=\"true\" />\n                <ion-label>\n                    {{ 'core.thereisdatatosync' | translate:{$a: 'addon.notes.notes' | translate | lowercase } }}\n                </ion-label>\n            </ion-item>\n        </ion-card>\n\n        <core-empty-box *ngIf=\"notes && notes.length === 0\" icon=\"fas-receipt\" [message]=\"'addon.notes.nonotes' | translate\" />\n\n        <ng-container *ngIf=\"notes && notes.length > 0\">\n            <ion-card *ngFor=\"let note of notes\">\n                <ion-item class=\"ion-text-wrap\">\n                    <core-user-avatar [user]=\"note\" [courseId]=\"courseId\" slot=\"start\" *ngIf=\"!userId\" />\n                    <ion-label>\n                        <p class=\"item-heading\" *ngIf=\"!userId\">{{note.userfullname}}</p>\n                        <p *ngIf=\"!note.deleted && !note.offline\" slot=\"end\">\n                            <span class=\"ion-text-wrap\">{{note.lastmodified | coreDateDayOrTime}}</span>\n                        </p>\n                    </ion-label>\n                    <p *ngIf=\"note.offline\" slot=\"end\">\n                        <ion-icon name=\"fas-clock\" aria-hidden=\"true\" /> <span class=\"ion-text-wrap\">\n                            {{ 'core.notsent' | translate }}\n                        </span>\n                    </p>\n                    <p *ngIf=\"note.deleted\" slot=\"end\">\n                        <ion-icon name=\"fas-trash\" aria-hidden=\"true\" /> <span class=\"ion-text-wrap\">\n                            {{ 'core.deletedoffline' | translate }}\n                        </span>\n                    </p>\n                    <ion-button *ngIf=\"note.deleted\" slot=\"end\" fill=\"clear\" color=\"danger\" (click)=\"undoDeleteNote($event, note)\"\n                        [attr.aria-label]=\"'core.restore' | translate\">\n                        <ion-icon name=\"fas-rotate-left\" slot=\"icon-only\" aria-hidden=\"true\" />\n                    </ion-button>\n                    <ion-button *ngIf=\"showDelete && !note.deleted && (type !== 'personal' || note.usermodified === currentUserId)\"\n                        slot=\"end\" fill=\"clear\" [@coreSlideInOut]=\"'fromRight'\" color=\"danger\" (click)=\"deleteNote($event, note)\"\n                        [attr.aria-label]=\"'core.delete' | translate\">\n                        <ion-icon name=\"fas-trash\" slot=\"icon-only\" aria-hidden=\"true\" />\n                    </ion-button>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <core-format-text [text]=\"note.content\" [filter]=\"false\" />\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n        </ng-container>\n    </core-loading>\n\n    <ion-fab slot=\"fixed\" core-fab vertical=\"bottom\" horizontal=\"end\" *ngIf=\"userId && notesLoaded\">\n        <ion-fab-button (click)=\"addNote($event)\" [attr.aria-label]=\"'addon.notes.addnewnote' |translate\">\n            <ion-icon name=\"fas-plus\" aria-hidden=\"true\" />\n            <span class=\"sr-only\">{{ 'addon.notes.addnewnote' | translate }}</span>\n        </ion-fab-button>\n    </ion-fab>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}