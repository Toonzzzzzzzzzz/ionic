{"ast":null,"code":"var _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { AddonModDataProvider } from '@addons/mod/data/services/data';\nimport { CoreFileHelper } from '@services/file-helper';\nimport { CoreFileSession } from '@services/file-session';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { AddonModDataFieldPluginBaseComponent } from '../../../classes/base-field-plugin-component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../../../core/components/attachments/attachments\";\nimport * as i3 from \"../../../../../../core/components/input-errors/input-errors\";\nimport * as i4 from \"../../../../../../core/components/mark-required/mark-required\";\nimport * as i5 from \"../../../../../../core/directives/external-content\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"@ionic/angular\";\nimport * as i8 from \"@ngx-translate/core\";\nfunction AddonModDataFieldPictureComponent_span_0_core_input_errors_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-input-errors\", 9);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"errorText\", ctx_r4.error);\n  }\n}\nfunction AddonModDataFieldPictureComponent_span_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵelement(1, \"span\", 4)(2, \"core-attachments\", 5);\n    i0.ɵɵtemplate(3, AddonModDataFieldPictureComponent_span_0_core_input_errors_3_Template, 1, 1, \"core-input-errors\", 6);\n    i0.ɵɵelementStart(4, \"ion-label\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(7, \"ion-input\", 8);\n    i0.ɵɵpipe(8, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r0.form);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"core-mark-required\", ctx_r0.field.required);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"files\", ctx_r0.files)(\"maxSize\", ctx_r0.maxSizeBytes)(\"component\", ctx_r0.component)(\"componentId\", ctx_r0.componentId)(\"allowOffline\", true)(\"courseId\", ctx_r0.database == null ? null : ctx_r0.database.course);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.error);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 12, \"addon.mod_data.alttext\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"formControlName\", \"f_\" + ctx_r0.field.id + \"_alttext\")(\"placeholder\", i0.ɵɵpipeBind1(8, 14, \"addon.mod_data.alttext\"));\n  }\n}\nfunction AddonModDataFieldPictureComponent_span_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 3);\n    i0.ɵɵelement(1, \"ion-input\", 8);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"formGroup\", ctx_r1.form);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formControlName\", \"f_\" + ctx_r1.field.id)(\"placeholder\", ctx_r1.field.name);\n  }\n}\nfunction AddonModDataFieldPictureComponent_button_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function AddonModDataFieldPictureComponent_button_2_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r6);\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.navigateEntry());\n    });\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"src\", ctx_r2.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r2.title);\n  }\n}\nfunction AddonModDataFieldPictureComponent_img_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"img\", 11);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"src\", ctx_r3.imageUrl, i0.ɵɵsanitizeUrl)(\"alt\", ctx_r3.title);\n    i0.ɵɵattribute(\"width\", ctx_r3.width)(\"height\", ctx_r3.height);\n  }\n}\n/**\n * Component to render data picture field.\n */\nexport class AddonModDataFieldPictureComponent extends AddonModDataFieldPluginBaseComponent {\n  constructor() {\n    super(...arguments);\n    this.files = [];\n  }\n  /**\n   * Get the files from the input value.\n   *\n   * @param value Input value.\n   * @returns List of files.\n   */\n  getFiles(value) {\n    let files = (value === null || value === void 0 ? void 0 : value.files) || [];\n    // Reduce to first element.\n    if (files.length > 0) {\n      files = [files[0]];\n    }\n    return files;\n  }\n  /**\n   * Find file in a list.\n   *\n   * @param files File list where to search.\n   * @param filenameSeek Filename to search.\n   * @returns File found or false.\n   */\n  findFile(files, filenameSeek) {\n    return files.find(file => ('name' in file ? file.name : file.filename) == filenameSeek) || undefined;\n  }\n  /**\n   * @inheritdoc\n   */\n  init() {\n    if (this.searchMode) {\n      this.addControl('f_' + this.field.id);\n      return;\n    }\n    this.component = AddonModDataProvider.COMPONENT;\n    this.componentId = this.database.coursemodule;\n    this.updateValue(this.value);\n    if (this.editMode) {\n      this.maxSizeBytes = parseInt(this.field.param3, 10);\n      CoreFileSession.setFiles(this.component, this.database.id + '_' + this.field.id, this.files);\n      const alttext = this.value && this.value.content1 || '';\n      this.addControl('f_' + this.field.id + '_alttext', alttext);\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  updateValue(value) {\n    // Edit mode, the list shouldn't change so there is no need to watch it.\n    const files = (value === null || value === void 0 ? void 0 : value.files) || [];\n    // Get image or thumb.\n    if (files.length > 0) {\n      const filenameSeek = this.listMode ? 'thumb_' + (value === null || value === void 0 ? void 0 : value.content) : value === null || value === void 0 ? void 0 : value.content;\n      this.image = this.findFile(files, filenameSeek || '');\n      if (!this.image && this.listMode) {\n        this.image = this.findFile(files, (value === null || value === void 0 ? void 0 : value.content) || '');\n      }\n      if (this.image) {\n        this.files = [this.image];\n      }\n    } else {\n      this.image = undefined;\n      this.files = [];\n    }\n    if (!this.editMode) {\n      this.entryId = value && value.recordid || undefined;\n      this.title = value && value.content1 || '';\n      this.imageUrl = undefined;\n      setTimeout(() => {\n        if (this.image) {\n          this.imageUrl = 'name' in this.image ? this.image.toURL() // Is Offline.\n          : CoreFileHelper.getFileUrl(this.image);\n        }\n      }, 1);\n      this.width = CoreDomUtils.formatPixelsSize(this.field.param1);\n      this.height = CoreDomUtils.formatPixelsSize(this.field.param2);\n    }\n  }\n  /**\n   * Navigate to the entry.\n   */\n  navigateEntry() {\n    this.gotoEntry.emit(this.entryId);\n  }\n}\n_class = AddonModDataFieldPictureComponent;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵAddonModDataFieldPictureComponent_BaseFactory;\n  return function AddonModDataFieldPictureComponent_Factory(t) {\n    return (ɵAddonModDataFieldPictureComponent_BaseFactory || (ɵAddonModDataFieldPictureComponent_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"addon-mod-data-field-picture\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 4,\n  vars: 4,\n  consts: [[3, \"formGroup\", 4, \"ngIf\"], [\"class\", \"as-link\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"core-media-adapt-width listMode_picture\", \"core-external-content\", \"\", 3, \"src\", \"alt\", 4, \"ngIf\"], [3, \"formGroup\"], [1, \"core-mark-required\", 3, \"core-mark-required\"], [\"maxSubmissions\", \"1\", \"acceptedTypes\", \"image\", 3, \"files\", \"maxSize\", \"component\", \"componentId\", \"allowOffline\", \"courseId\"], [3, \"errorText\", 4, \"ngIf\"], [\"position\", \"stacked\"], [\"type\", \"text\", 3, \"formControlName\", \"placeholder\"], [3, \"errorText\"], [1, \"as-link\", 3, \"click\"], [\"core-external-content\", \"\", 1, \"core-media-adapt-width\", \"listMode_picture\", 3, \"src\", \"alt\"]],\n  template: function AddonModDataFieldPictureComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, AddonModDataFieldPictureComponent_span_0_Template, 9, 16, \"span\", 0);\n      i0.ɵɵtemplate(1, AddonModDataFieldPictureComponent_span_1_Template, 2, 3, \"span\", 0);\n      i0.ɵɵtemplate(2, AddonModDataFieldPictureComponent_button_2_Template, 2, 2, \"button\", 1);\n      i0.ɵɵtemplate(3, AddonModDataFieldPictureComponent_img_3_Template, 1, 4, \"img\", 2);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.editMode && ctx.form);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.searchMode && ctx.form);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.listMode && ctx.imageUrl);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.showMode && ctx.imageUrl);\n    }\n  },\n  dependencies: [i1.NgIf, i2.CoreAttachmentsComponent, i3.CoreInputErrorsComponent, i4.CoreMarkRequiredComponent, i5.CoreExternalContentDirective, i6.NgControlStatus, i6.NgControlStatusGroup, i7.IonInput, i7.IonLabel, i7.TextValueAccessor, i6.FormGroupDirective, i6.FormControlName, i8.TranslatePipe],\n  encapsulation: 2\n});","map":{"version":3,"names":["AddonModDataProvider","CoreFileHelper","CoreFileSession","CoreDomUtils","AddonModDataFieldPluginBaseComponent","i0","ɵɵelement","ɵɵproperty","ctx_r4","error","ɵɵelementStart","ɵɵtemplate","AddonModDataFieldPictureComponent_span_0_core_input_errors_3_Template","ɵɵtext","ɵɵelementEnd","ctx_r0","form","ɵɵadvance","field","required","files","maxSizeBytes","component","componentId","database","course","ɵɵtextInterpolate","ɵɵpipeBind1","id","ctx_r1","name","ɵɵlistener","AddonModDataFieldPictureComponent_button_2_Template_button_click_0_listener","ɵɵrestoreView","_r6","ctx_r5","ɵɵnextContext","ɵɵresetView","navigateEntry","ctx_r2","imageUrl","ɵɵsanitizeUrl","title","ctx_r3","ɵɵattribute","width","height","AddonModDataFieldPictureComponent","constructor","getFiles","value","length","findFile","filenameSeek","find","file","filename","undefined","init","searchMode","addControl","COMPONENT","coursemodule","updateValue","editMode","parseInt","param3","setFiles","alttext","content1","listMode","content","image","entryId","recordid","setTimeout","toURL","getFileUrl","formatPixelsSize","param1","param2","gotoEntry","emit","t","selectors","features","ɵɵInheritDefinitionFeature","decls","vars","consts","template","AddonModDataFieldPictureComponent_Template","rf","ctx","AddonModDataFieldPictureComponent_span_0_Template","AddonModDataFieldPictureComponent_span_1_Template","AddonModDataFieldPictureComponent_button_2_Template","AddonModDataFieldPictureComponent_img_3_Template","showMode"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/data/fields/picture/component/picture.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/mod/data/fields/picture/component/addon-mod-data-field-picture.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { AddonModDataEntryField, AddonModDataProvider } from '@addons/mod/data/services/data';\nimport { Component } from '@angular/core';\nimport { CoreFileEntry, CoreFileHelper } from '@services/file-helper';\nimport { CoreFileSession } from '@services/file-session';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { AddonModDataFieldPluginBaseComponent } from '../../../classes/base-field-plugin-component';\n\n/**\n * Component to render data picture field.\n */\n@Component({\n    selector: 'addon-mod-data-field-picture',\n    templateUrl: 'addon-mod-data-field-picture.html',\n})\nexport class AddonModDataFieldPictureComponent extends AddonModDataFieldPluginBaseComponent {\n\n    files: CoreFileEntry[] = [];\n    component?: string;\n    componentId?: number;\n    maxSizeBytes?: number;\n\n    image?: CoreFileEntry;\n    entryId?: number;\n    imageUrl?: string;\n    title?: string;\n    width?: string;\n    height?: string;\n\n    /**\n     * Get the files from the input value.\n     *\n     * @param value Input value.\n     * @returns List of files.\n     */\n    protected getFiles(value?: Partial<AddonModDataEntryField>): CoreFileEntry[] {\n        let files = value?.files || [];\n\n        // Reduce to first element.\n        if (files.length > 0) {\n            files = [files[0]];\n        }\n\n        return files;\n    }\n\n    /**\n     * Find file in a list.\n     *\n     * @param files File list where to search.\n     * @param filenameSeek Filename to search.\n     * @returns File found or false.\n     */\n    protected findFile(\n        files: CoreFileEntry[],\n        filenameSeek: string,\n    ): CoreFileEntry | undefined {\n        return files.find((file) => ('name' in file ? file.name : file.filename) == filenameSeek) || undefined;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected init(): void {\n        if (this.searchMode) {\n            this.addControl('f_' + this.field.id);\n\n            return;\n        }\n\n        this.component = AddonModDataProvider.COMPONENT;\n        this.componentId = this.database!.coursemodule;\n\n        this.updateValue(this.value);\n\n        if (this.editMode) {\n            this.maxSizeBytes = parseInt(this.field.param3, 10);\n            CoreFileSession.setFiles(this.component, this.database!.id + '_' + this.field.id, this.files);\n\n            const alttext = (this.value && this.value.content1) || '';\n            this.addControl('f_' + this.field.id + '_alttext', alttext);\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected updateValue(value?: Partial<AddonModDataEntryField>): void {\n\n        // Edit mode, the list shouldn't change so there is no need to watch it.\n        const files = value?.files || [];\n\n        // Get image or thumb.\n        if (files.length > 0) {\n            const filenameSeek = this.listMode\n                ? 'thumb_' + value?.content\n                : value?.content;\n            this.image = this.findFile(files, filenameSeek || '');\n\n            if (!this.image && this.listMode) {\n                this.image = this.findFile(files, value?.content || '');\n            }\n\n            if (this.image) {\n                this.files = [this.image];\n            }\n        } else {\n            this.image = undefined;\n            this.files = [];\n        }\n\n        if (!this.editMode) {\n            this.entryId = (value && value.recordid) || undefined;\n            this.title = (value && value.content1) || '';\n            this.imageUrl = undefined;\n            setTimeout(() => {\n                if (this.image) {\n                    this.imageUrl = 'name' in this.image\n                        ? this.image.toURL() // Is Offline.\n                        : CoreFileHelper.getFileUrl(this.image);\n                }\n            }, 1);\n\n            this.width = CoreDomUtils.formatPixelsSize(this.field.param1);\n            this.height = CoreDomUtils.formatPixelsSize(this.field.param2);\n        }\n    }\n\n    /**\n     * Navigate to the entry.\n     */\n    navigateEntry(): void {\n        this.gotoEntry.emit(this.entryId);\n    }\n\n}\n","<span *ngIf=\"editMode && form\" [formGroup]=\"form\">\n    <span [core-mark-required]=\"field.required\" class=\"core-mark-required\"></span>\n    <core-attachments [files]=\"files\" [maxSize]=\"maxSizeBytes\" maxSubmissions=\"1\" [component]=\"component\" [componentId]=\"componentId\"\n        [allowOffline]=\"true\" acceptedTypes=\"image\" [courseId]=\"database?.course\" />\n    <core-input-errors *ngIf=\"error\" [errorText]=\"error\" />\n\n    <ion-label position=\"stacked\">{{ 'addon.mod_data.alttext' | translate }}</ion-label>\n    <ion-input type=\"text\" [formControlName]=\"'f_'+field.id+'_alttext'\" [placeholder]=\" 'addon.mod_data.alttext' | translate\" />\n</span>\n\n<span *ngIf=\"searchMode && form\" [formGroup]=\"form\">\n    <ion-input type=\"text\" [formControlName]=\"'f_'+field.id\" [placeholder]=\"field.name\" />\n</span>\n\n<button class=\"as-link\" *ngIf=\"listMode && imageUrl\" (click)=\"navigateEntry()\">\n    <img [src]=\"imageUrl\" [alt]=\"title\" class=\"core-media-adapt-width listMode_picture\" core-external-content />\n</button>\n\n<img *ngIf=\"showMode && imageUrl\" [src]=\"imageUrl\" [alt]=\"title\" class=\"core-media-adapt-width listMode_picture\" [attr.width]=\"width\"\n    [attr.height]=\"height\" core-external-content />\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}