{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { AddonCompetencyHelper } from '@addons/competency/services/competency-helper';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { Translate } from '@singletons';\nimport { AddonCompetency, AddonCompetencyProvider } from '@addons/competency/services/competency';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ADDON_COMPETENCY_SUMMARY_PAGE } from '@addons/competency/competency.module';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCompetencyPlanCompetenciesSource } from '@addons/competency/classes/competency-plan-competencies-source';\nimport { AddonCompetencyCourseCompetenciesSource } from '@addons/competency/classes/competency-course-competencies-source';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreUrlUtils } from '@services/utils/url';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"../../../../core/components/loading/loading\";\nimport * as i3 from \"../../../../core/components/mod-icon/mod-icon\";\nimport * as i4 from \"../../../../core/components/user-avatar/user-avatar\";\nimport * as i5 from \"../../../../core/directives/format-text\";\nimport * as i6 from \"../../../../core/directives/link\";\nimport * as i7 from \"../../../../core/directives/user-link\";\nimport * as i8 from \"../../../../core/directives/swipe-navigation\";\nimport * as i9 from \"../../../../core/directives/content\";\nimport * as i10 from \"@ionic/angular\";\nimport * as i11 from \"../../../../core/pipes/format-date\";\nimport * as i12 from \"@ngx-translate/core\";\nfunction AddonCompetencyCompetencyPage_h1_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementStart(2, \"small\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r0.competency.competency.competency.shortname)(\"contextLevel\", ctx_r0.contextLevel)(\"contextInstanceId\", ctx_r0.contextInstanceId);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r0.competency.competency.competency.idnumber);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\", 8);\n    i0.ɵɵelement(2, \"core-user-avatar\", 9);\n    i0.ɵɵelementStart(3, \"ion-label\")(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"user\", ctx_r1.user);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r1.user.fullname);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\");\n    i0.ɵɵelement(2, \"core-format-text\", 7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r4.competency.competency.competency.description)(\"contextLevel\", ctx_r4.contextLevel)(\"contextInstanceId\", ctx_r4.contextInstanceId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_a_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 15);\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"href\", ctx_r5.competencyFrameworkUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r5.competency.competency.comppath.framework.name)(\"contextLevel\", ctx_r5.contextLevel)(\"contextInstanceId\", ctx_r5.contextInstanceId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r6.competency.competency.comppath.framework.name)(\"contextLevel\", ctx_r6.contextLevel)(\"contextInstanceId\", ctx_r6.contextInstanceId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const ancestor_r12 = i0.ɵɵnextContext().$implicit;\n      const ctx_r16 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r16.openCompetencySummary(ancestor_r12.id));\n    });\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ancestor_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ancestor_r12.name)(\"contextLevel\", ctx_r13.contextLevel)(\"contextInstanceId\", ctx_r13.contextInstanceId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"core-format-text\", 7);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ancestor_r12 = i0.ɵɵnextContext().$implicit;\n    const ctx_r14 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ancestor_r12.name)(\"contextLevel\", ctx_r14.contextLevel)(\"contextInstanceId\", ctx_r14.contextInstanceId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtext(1, \"\\u00A0/\\u00A0\");\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template, 2, 3, \"button\", 16);\n    i0.ɵɵtemplate(2, AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_2_Template, 2, 3, \"ng-container\", 2);\n    i0.ɵɵtemplate(3, AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_3_Template, 2, 0, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ancestor_r12 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.competency.competency.comppath.showlinks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r7.competency.competency.comppath.showlinks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ancestor_r12.last);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_p_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.competency.nocrossreferencedcompetencies\"), \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"p\")(1, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template_button_click_1_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r24);\n      const relatedcomp_r22 = restoredCtx.$implicit;\n      const ctx_r23 = i0.ɵɵnextContext(3);\n      return i0.ɵɵresetView(ctx_r23.openCompetencySummary(relatedcomp_r22.id));\n    });\n    i0.ɵɵelement(2, \"core-format-text\", 7);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const relatedcomp_r22 = ctx.$implicit;\n    const ctx_r21 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", relatedcomp_r22.shortname)(\"contextLevel\", ctx_r21.contextLevel)(\"contextInstanceId\", ctx_r21.contextInstanceId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" - \", relatedcomp_r22.idnumber, \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template, 4, 4, \"p\", 14);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r9.competency.competency.relatedcompetencies);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_p_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.competency.noactivities\"), \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_core_mod_icon_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-mod-icon\", 22);\n  }\n  if (rf & 2) {\n    const activity_r27 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵproperty(\"modicon\", activity_r27.iconurl)(\"showAlt\", false);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 19);\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_core_mod_icon_1_Template, 1, 2, \"core-mod-icon\", 20);\n    i0.ɵɵelementStart(2, \"ion-label\");\n    i0.ɵɵelement(3, \"core-format-text\", 21);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const activity_r27 = ctx.$implicit;\n    const ctx_r26 = i0.ɵɵnextContext(3);\n    i0.ɵɵproperty(\"href\", activity_r27.url);\n    i0.ɵɵattribute(\"aria-label\", activity_r27.name);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", activity_r27.iconurl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", activity_r27.name)(\"contextInstanceId\", activity_r27.id)(\"courseId\", ctx_r26.courseId);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_p_5_Template, 3, 3, \"p\", 2);\n    i0.ɵɵtemplate(6, AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_Template, 4, 6, \"ion-item\", 18);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"addon.competency.activities\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r10.coursemodules.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r10.coursemodules);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 8)(1, \"ion-label\")(2, \"p\", 10);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r30 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, \"addon.competency.reviewstatus\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r30.competency.usercompetency.statusname);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.yes\"), \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-badge\", 27);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"core.no\"), \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_item_1_Template, 7, 4, \"ion-item\", 11);\n    i0.ɵɵelementStart(2, \"ion-item\", 8)(3, \"ion-label\")(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_7_Template, 3, 3, \"ion-badge\", 23);\n    i0.ɵɵtemplate(8, AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_8_Template, 3, 3, \"ion-badge\", 24);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"ion-item\", 8)(10, \"ion-label\")(11, \"p\", 10);\n    i0.ɵɵtext(12);\n    i0.ɵɵpipe(13, \"translate\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"ion-badge\", 25);\n    i0.ɵɵtext(15);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.competency.usercompetency && ctx_r11.competency.usercompetency.status);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 6, \"addon.competency.proficient\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r11.userCompetency.proficiency);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r11.userCompetency.proficiency);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(13, 8, \"addon.competency.rating\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(ctx_r11.userCompetency.gradename);\n  }\n}\nfunction AddonCompetencyCompetencyPage_ion_card_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_ion_card_13_ion_item_1_Template, 3, 3, \"ion-item\", 11);\n    i0.ɵɵelementStart(2, \"ion-item\", 12)(3, \"ion-label\")(4, \"p\", 10);\n    i0.ɵɵtext(5);\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\");\n    i0.ɵɵtemplate(8, AddonCompetencyCompetencyPage_ion_card_13_a_8_Template, 2, 4, \"a\", 13);\n    i0.ɵɵtemplate(9, AddonCompetencyCompetencyPage_ion_card_13_ng_container_9_Template, 2, 3, \"ng-container\", 2);\n    i0.ɵɵtext(10, \" \\u00A0/\\u00A0 \");\n    i0.ɵɵtemplate(11, AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_Template, 4, 3, \"ng-container\", 14);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(12, \"ion-item\", 8)(13, \"ion-label\")(14, \"p\", 10);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(17, AddonCompetencyCompetencyPage_ion_card_13_p_17_Template, 3, 3, \"p\", 2);\n    i0.ɵɵtemplate(18, AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_Template, 2, 1, \"ng-container\", 2);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(19, AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_Template, 7, 5, \"ion-item\", 11);\n    i0.ɵɵtemplate(20, AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_Template, 16, 10, \"ng-container\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.competency.competency.competency.description);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(6, 10, \"addon.competency.path\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.competency.competency.comppath.showlinks);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.competency.competency.comppath.showlinks);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.competency.competency.comppath.ancestors);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 12, \"addon.competency.crossreferencedcompetencies\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.competency.competency.hasrelatedcompetencies);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.competency.competency.hasrelatedcompetencies);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.coursemodules);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.userCompetency);\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 28);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(2, 1, \"addon.competency.noevidence\"), \" \");\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_ion_card_5_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 33);\n    i0.ɵɵelement(1, \"core-user-avatar\", 34);\n    i0.ɵɵelementStart(2, \"ion-label\")(3, \"p\", 10);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"coreFormatDate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const evidence_r35 = i0.ɵɵnextContext().$implicit;\n    const ctx_r36 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"userId\", evidence_r35.actionuser.id)(\"courseId\", ctx_r36.courseId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"user\", evidence_r35.actionuser)(\"linkProfile\", false);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(evidence_r35.actionuser.fullname);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(7, 6, evidence_r35.timemodified * 1000));\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_ion_card_5_p_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 35);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const evidence_r35 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(evidence_r35.description);\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_ion_card_5_blockquote_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"blockquote\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const evidence_r35 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(evidence_r35.note);\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_ion_card_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\");\n    i0.ɵɵtemplate(1, AddonCompetencyCompetencyPage_div_14_ion_card_5_ion_item_1_Template, 8, 8, \"ion-item\", 30);\n    i0.ɵɵelementStart(2, \"ion-item\", 8)(3, \"ion-label\")(4, \"p\")(5, \"ion-badge\", 31);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵtemplate(7, AddonCompetencyCompetencyPage_div_14_ion_card_5_p_7_Template, 2, 1, \"p\", 32);\n    i0.ɵɵtemplate(8, AddonCompetencyCompetencyPage_div_14_ion_card_5_blockquote_8_Template, 2, 1, \"blockquote\", 2);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const evidence_r35 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", evidence_r35.actionuser);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(evidence_r35.gradename);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", evidence_r35.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", evidence_r35.note);\n  }\n}\nfunction AddonCompetencyCompetencyPage_div_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\", 28);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonCompetencyCompetencyPage_div_14_p_4_Template, 3, 3, \"p\", 29);\n    i0.ɵɵtemplate(5, AddonCompetencyCompetencyPage_div_14_ion_card_5_Template, 9, 4, \"ion-card\", 14);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(3, 3, \"addon.competency.evidence\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.competency.evidence.length === 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r3.competency.evidence);\n  }\n}\n/**\n * Page that displays the competency information.\n */\nexport class AddonCompetencyCompetencyPage {\n  constructor() {\n    this.competencyLoaded = false;\n    this.logView = CoreTime.once(() => this.performLogView());\n    try {\n      const planId = CoreNavigator.getRouteNumberParam('planId');\n      if (!planId) {\n        const courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n        const userId = CoreNavigator.getRouteNumberParam('userId');\n        const source = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(AddonCompetencyCourseCompetenciesSource, [courseId, userId]);\n        this.competencies = new AddonCompetencyCompetenciesSwipeManager(source);\n        return;\n      }\n      const source = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(AddonCompetencyPlanCompetenciesSource, [planId]);\n      this.competencies = new AddonCompetencyCompetenciesSwipeManager(source);\n    } catch (error) {\n      CoreDomUtils.showErrorModal(error);\n      CoreNavigator.back();\n      return;\n    }\n  }\n  get competencyFrameworkUrl() {\n    if (!this.competency) {\n      return;\n    }\n    const {\n      pluginbaseurl,\n      framework,\n      pagecontextid\n    } = this.competency.competency.comppath;\n    return `${pluginbaseurl}/competencies.php?competencyframeworkid=${framework.id}&pagecontextid=${pagecontextid}`;\n  }\n  get courseId() {\n    const source = this.competencies.getSource();\n    if (!(source instanceof AddonCompetencyCourseCompetenciesSource)) {\n      return;\n    }\n    return source.COURSE_ID;\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const source = _this.competencies.getSource();\n        yield source.reload();\n        yield _this.competencies.start();\n        yield _this.fetchCompetency();\n      } finally {\n        _this.competencyLoaded = true;\n      }\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    this.competencies.destroy();\n  }\n  /**\n   * Fetches the competency and updates the view.\n   *\n   * @returns Promise resolved when done.\n   */\n  fetchCompetency() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        const source = _this2.competencies.getSource();\n        _this2.competency = source instanceof AddonCompetencyPlanCompetenciesSource ? yield _this2.fetchCompetencySummaryFromPlan(source) : yield _this2.fetchCompetencySummaryFromCourse(source);\n        if (_this2.competency.user.id != CoreSites.getCurrentSiteUserId()) {\n          // Get the user profile from the returned object.\n          _this2.user = _this2.competency.user;\n        }\n        _this2.competency.evidence.forEach(evidence => {\n          if (evidence.descidentifier) {\n            const key = 'addon.competency.' + evidence.descidentifier;\n            evidence.description = Translate.instant(key, {\n              $a: evidence.desca\n            });\n          }\n        });\n        _this2.logView();\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error getting competency data.');\n      }\n    })();\n  }\n  /**\n   * Refreshes the competency.\n   *\n   * @param refresher Refresher.\n   */\n  refreshCompetency(refresher) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      const source = _this3.competencies.getSource();\n      yield CoreUtils.ignoreErrors(source instanceof AddonCompetencyPlanCompetenciesSource ? AddonCompetency.invalidateCompetencyInPlan(source.PLAN_ID, _this3.requireCompetencyId()) : AddonCompetency.invalidateCompetencyInCourse(source.COURSE_ID, _this3.requireCompetencyId(), source.USER_ID));\n      _this3.fetchCompetency().finally(() => {\n        refresher === null || refresher === void 0 || refresher.complete();\n      });\n    })();\n  }\n  /**\n   * Opens the summary of a competency.\n   *\n   * @param competencyId Competency Id.\n   */\n  openCompetencySummary(competencyId) {\n    CoreNavigator.navigate(`../${competencyId}/${ADDON_COMPETENCY_SUMMARY_PAGE}`, {\n      params: {\n        contextLevel: this.contextLevel,\n        contextInstanceId: this.contextInstanceId\n      }\n    });\n  }\n  /**\n   * Get competency id or fail.\n   *\n   * @returns Competency id.\n   */\n  requireCompetencyId() {\n    const selectedItem = this.competencies.getSelectedItem();\n    if (!selectedItem) {\n      throw new Error('Failed to get competency id from selected item');\n    }\n    return selectedItem.competency.id;\n  }\n  /**\n   * Fetch competency summary from a plan source.\n   *\n   * @param source Plan competencies source.\n   * @returns Competency summary.\n   */\n  fetchCompetencySummaryFromPlan(source) {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      var _source$user;\n      const competency = yield AddonCompetency.getCompetencyInPlan(source.PLAN_ID, _this4.requireCompetencyId());\n      _this4.planStatus = competency.plan.status;\n      if (competency.usercompetencysummary.usercompetency) {\n        competency.usercompetencysummary.usercompetency.statusname = AddonCompetencyHelper.getCompetencyStatusName(competency.usercompetencysummary.usercompetency.status);\n      }\n      _this4.contextLevel = \"user\" /* ContextLevel.USER */;\n      _this4.contextInstanceId = ((_source$user = source.user) === null || _source$user === void 0 ? void 0 : _source$user.id) || competency.usercompetencysummary.user.id;\n      _this4.userCompetency = competency.usercompetencysummary.usercompetencyplan || competency.usercompetencysummary.usercompetency;\n      return competency.usercompetencysummary;\n    })();\n  }\n  /**\n   * Fetch competency summary from a course source.\n   *\n   * @param source Course competencies source.\n   * @returns Competency summary.\n   */\n  fetchCompetencySummaryFromCourse(source) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const competency = yield AddonCompetency.getCompetencyInCourse(source.COURSE_ID, _this5.requireCompetencyId(), source.USER_ID);\n      _this5.coursemodules = competency.coursemodules;\n      _this5.contextLevel = \"course\" /* ContextLevel.COURSE */;\n      _this5.contextInstanceId = source.COURSE_ID;\n      _this5.userCompetency = competency.usercompetencysummary.usercompetencycourse || competency.usercompetencysummary.usercompetency;\n      return competency.usercompetencysummary;\n    })();\n  }\n  /**\n   * Log view.\n   */\n  performLogView() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      var _source$user2;\n      if (!_this6.competency) {\n        return;\n      }\n      const source = _this6.competencies.getSource();\n      const compId = _this6.requireCompetencyId();\n      const name = _this6.competency.competency.competency.shortname;\n      const userId = (_source$user2 = source.user) === null || _source$user2 === void 0 ? void 0 : _source$user2.id;\n      if (source instanceof AddonCompetencyPlanCompetenciesSource) {\n        if (!_this6.planStatus) {\n          return;\n        }\n        yield CoreUtils.ignoreErrors(AddonCompetency.logCompetencyInPlanView(source.PLAN_ID, compId, _this6.planStatus, name, userId));\n        const wsName = _this6.planStatus === AddonCompetencyProvider.STATUS_COMPLETE ? 'core_competency_user_competency_plan_viewed' : 'core_competency_user_competency_viewed_in_plan';\n        CoreAnalytics.logEvent({\n          type: CoreAnalyticsEventType.VIEW_ITEM,\n          ws: wsName,\n          name,\n          data: {\n            id: compId,\n            category: 'competency',\n            planid: source.PLAN_ID,\n            planstatus: _this6.planStatus,\n            userid: userId\n          },\n          url: CoreUrlUtils.addParamsToUrl('/admin/tool/lp/user_competency_in_plan.php', {\n            planid: source.PLAN_ID,\n            userid: userId,\n            competencyid: compId\n          })\n        });\n        return;\n      }\n      yield CoreUtils.ignoreErrors(AddonCompetency.logCompetencyInCourseView(source.COURSE_ID, compId, name, source.USER_ID));\n      CoreAnalytics.logEvent({\n        type: CoreAnalyticsEventType.VIEW_ITEM,\n        ws: 'core_competency_user_competency_viewed_in_course',\n        name,\n        data: {\n          id: compId,\n          category: 'competency',\n          courseid: source.COURSE_ID,\n          userid: userId\n        },\n        url: CoreUrlUtils.addParamsToUrl('/admin/tool/lp/user_competency_in_course.php', {\n          courseid: source.COURSE_ID,\n          competencyid: compId,\n          userid: userId\n        })\n      });\n    })();\n  }\n}\n/**\n * Helper to manage swiping within a collection of competencies.\n */\n_class = AddonCompetencyCompetencyPage;\n_class.ɵfac = function AddonCompetencyCompetencyPage_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-competency-competency\"]],\n  decls: 15,\n  vars: 13,\n  consts: [[\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [1, \"limited-width\", 3, \"core-swipe-navigation\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [3, \"text\", \"contextLevel\", \"contextInstanceId\"], [1, \"ion-text-wrap\"], [\"slot\", \"start\", 3, \"user\"], [1, \"item-heading\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [1, \"ion-text-wrap\", \"only-links\"], [\"core-link\", \"\", 3, \"href\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [\"core-link\", \"\", 3, \"href\"], [\"class\", \"as-link\", 3, \"click\", 4, \"ngIf\"], [1, \"as-link\", 3, \"click\"], [\"class\", \"ion-text-wrap\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\", 4, \"ngFor\", \"ngForOf\"], [\"core-link\", \"\", \"capture\", \"true\", 1, \"ion-text-wrap\", 3, \"href\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", 4, \"ngIf\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\"], [\"slot\", \"end\", \"color\", \"success\", 4, \"ngIf\"], [\"slot\", \"end\", \"color\", \"danger\", 4, \"ngIf\"], [\"color\", \"dark\", \"slot\", \"end\"], [\"slot\", \"end\", \"color\", \"success\"], [\"slot\", \"end\", \"color\", \"danger\"], [1, \"ion-margin-horizontal\"], [\"class\", \"ion-margin-horizontal\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"core-user-link\", \"\", 3, \"userId\", \"courseId\", 4, \"ngIf\"], [\"color\", \"dark\"], [\"class\", \"ion-margin-top\", 4, \"ngIf\"], [\"core-user-link\", \"\", 1, \"ion-text-wrap\", 3, \"userId\", \"courseId\"], [\"slot\", \"start\", 3, \"user\", \"linkProfile\"], [1, \"ion-margin-top\"]],\n  template: function AddonCompetencyCompetencyPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\")(1, \"ion-toolbar\")(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-back-button\", 1);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtemplate(6, AddonCompetencyCompetencyPage_h1_6_Template, 4, 4, \"h1\", 2);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(7, \"ion-content\", 3)(8, \"ion-refresher\", 4);\n      i0.ɵɵlistener(\"ionRefresh\", function AddonCompetencyCompetencyPage_Template_ion_refresher_ionRefresh_8_listener($event) {\n        return ctx.refreshCompetency($event.target);\n      });\n      i0.ɵɵelement(9, \"ion-refresher-content\", 5);\n      i0.ɵɵpipe(10, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"core-loading\", 6);\n      i0.ɵɵtemplate(12, AddonCompetencyCompetencyPage_ion_card_12_Template, 6, 2, \"ion-card\", 2);\n      i0.ɵɵtemplate(13, AddonCompetencyCompetencyPage_ion_card_13_Template, 21, 14, \"ion-card\", 2);\n      i0.ɵɵtemplate(14, AddonCompetencyCompetencyPage_div_14_Template, 6, 5, \"div\", 2);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 9, \"core.back\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.competency);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"core-swipe-navigation\", ctx.competencies);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.competencyLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(10, 11, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.competencyLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.user);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.competency);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.competency);\n    }\n  },\n  dependencies: [i1.NgForOf, i1.NgIf, i2.CoreLoadingComponent, i3.CoreModIconComponent, i4.CoreUserAvatarComponent, i5.CoreFormatTextDirective, i6.CoreLinkDirective, i7.CoreUserLinkDirective, i8.CoreSwipeNavigationDirective, i9.CoreContentDirective, i10.IonBadge, i10.IonButtons, i10.IonCard, i10.IonContent, i10.IonHeader, i10.IonItem, i10.IonLabel, i10.IonRefresher, i10.IonRefresherContent, i10.IonTitle, i10.IonToolbar, i10.IonBackButton, i11.CoreFormatDatePipe, i12.TranslatePipe],\n  encapsulation: 2\n});\nclass AddonCompetencyCompetenciesSwipeManager extends CoreSwipeNavigationItemsManager {\n  /**\n   * @inheritdoc\n   */\n  getSelectedItemPathFromRoute(route) {\n    return route.params.competencyId;\n  }\n}","map":{"version":3,"names":["AddonCompetencyHelper","CoreSites","CoreDomUtils","Translate","AddonCompetency","AddonCompetencyProvider","CoreNavigator","CoreUtils","ADDON_COMPETENCY_SUMMARY_PAGE","CoreSwipeNavigationItemsManager","CoreRoutedItemsManagerSourcesTracker","AddonCompetencyPlanCompetenciesSource","AddonCompetencyCourseCompetenciesSource","CoreTime","CoreAnalytics","CoreAnalyticsEventType","CoreUrlUtils","i0","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","competency","shortname","contextLevel","contextInstanceId","ɵɵtextInterpolate","idnumber","ctx_r1","user","fullname","ctx_r4","description","ctx_r5","competencyFrameworkUrl","ɵɵsanitizeUrl","comppath","framework","name","ɵɵelementContainerStart","ɵɵelementContainerEnd","ctx_r6","ɵɵlistener","AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template_button_click_0_listener","ɵɵrestoreView","_r18","ancestor_r12","ɵɵnextContext","$implicit","ctx_r16","ɵɵresetView","openCompetencySummary","id","ctx_r13","ctx_r14","ɵɵtemplate","AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_2_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_3_Template","ctx_r7","showlinks","last","ɵɵtextInterpolate1","ɵɵpipeBind1","AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template_button_click_1_listener","restoredCtx","_r24","relatedcomp_r22","ctx_r23","ctx_r21","AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template","ctx_r9","relatedcompetencies","activity_r27","iconurl","AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_core_mod_icon_1_Template","url","ɵɵattribute","ctx_r26","courseId","AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_p_5_Template","AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_Template","ctx_r10","coursemodules","length","ctx_r30","usercompetency","statusname","AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_item_1_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_7_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_8_Template","ctx_r11","status","userCompetency","proficiency","gradename","AddonCompetencyCompetencyPage_ion_card_13_ion_item_1_Template","AddonCompetencyCompetencyPage_ion_card_13_a_8_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_9_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_Template","AddonCompetencyCompetencyPage_ion_card_13_p_17_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_Template","AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_Template","AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_Template","ctx_r2","ancestors","hasrelatedcompetencies","evidence_r35","actionuser","ctx_r36","timemodified","note","AddonCompetencyCompetencyPage_div_14_ion_card_5_ion_item_1_Template","AddonCompetencyCompetencyPage_div_14_ion_card_5_p_7_Template","AddonCompetencyCompetencyPage_div_14_ion_card_5_blockquote_8_Template","AddonCompetencyCompetencyPage_div_14_p_4_Template","AddonCompetencyCompetencyPage_div_14_ion_card_5_Template","ctx_r3","evidence","AddonCompetencyCompetencyPage","constructor","competencyLoaded","logView","once","performLogView","planId","getRouteNumberParam","getRequiredRouteNumberParam","userId","source","getOrCreateSource","competencies","AddonCompetencyCompetenciesSwipeManager","error","showErrorModal","back","pluginbaseurl","pagecontextid","getSource","COURSE_ID","ngOnInit","_this","_asyncToGenerator","reload","start","fetchCompetency","ngOnDestroy","destroy","_this2","fetchCompetencySummaryFromPlan","fetchCompetencySummaryFromCourse","getCurrentSiteUserId","forEach","descidentifier","key","instant","$a","desca","showErrorModalDefault","refreshCompetency","refresher","_this3","ignoreErrors","invalidateCompetencyInPlan","PLAN_ID","requireCompetencyId","invalidateCompetencyInCourse","USER_ID","finally","complete","competencyId","navigate","params","selectedItem","getSelectedItem","Error","_this4","_source$user","getCompetencyInPlan","planStatus","plan","usercompetencysummary","getCompetencyStatusName","usercompetencyplan","_this5","getCompetencyInCourse","usercompetencycourse","_this6","_source$user2","compId","logCompetencyInPlanView","wsName","STATUS_COMPLETE","logEvent","type","VIEW_ITEM","ws","data","category","planid","planstatus","userid","addParamsToUrl","competencyid","logCompetencyInCourseView","courseid","_class","selectors","decls","vars","consts","template","AddonCompetencyCompetencyPage_Template","rf","ctx","AddonCompetencyCompetencyPage_h1_6_Template","AddonCompetencyCompetencyPage_Template_ion_refresher_ionRefresh_8_listener","$event","target","AddonCompetencyCompetencyPage_ion_card_12_Template","AddonCompetencyCompetencyPage_ion_card_13_Template","AddonCompetencyCompetencyPage_div_14_Template","ɵɵpropertyInterpolate","getSelectedItemPathFromRoute","route"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/competency/pages/competency/competency.page.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/competency/pages/competency/competency.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { AddonCompetencyHelper } from '@addons/competency/services/competency-helper';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { CoreCourseModuleSummary } from '@features/course/services/course';\nimport { CoreUserSummary } from '@features/user/services/user';\nimport { CoreSites } from '@services/sites';\nimport { CoreDomUtils } from '@services/utils/dom';\nimport { Translate } from '@singletons';\nimport {\n    AddonCompetencyDataForUserCompetencySummaryWSResponse,\n    AddonCompetencyUserCompetencyPlan,\n    AddonCompetencyUserCompetency,\n    AddonCompetencyUserCompetencyCourse,\n    AddonCompetency,\n    AddonCompetencyDataForPlanPageCompetency,\n    AddonCompetencyDataForCourseCompetenciesPageCompetency,\n    AddonCompetencyProvider,\n} from '@addons/competency/services/competency';\nimport { CoreNavigator } from '@services/navigator';\nimport { ContextLevel } from '@/core/constants';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ADDON_COMPETENCY_SUMMARY_PAGE } from '@addons/competency/competency.module';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCompetencyPlanCompetenciesSource } from '@addons/competency/classes/competency-plan-competencies-source';\nimport { ActivatedRouteSnapshot } from '@angular/router';\nimport { AddonCompetencyCourseCompetenciesSource } from '@addons/competency/classes/competency-course-competencies-source';\nimport { CoreTime } from '@singletons/time';\nimport { CoreAnalytics, CoreAnalyticsEventType } from '@services/analytics';\nimport { CoreUrlUtils } from '@services/utils/url';\n\n/**\n * Page that displays the competency information.\n */\n@Component({\n    selector: 'page-addon-competency-competency',\n    templateUrl: 'competency.html',\n})\nexport class AddonCompetencyCompetencyPage implements OnInit, OnDestroy {\n\n    competencyLoaded = false;\n    competencies!: AddonCompetencyCompetenciesSwipeManager;\n    planStatus?: number;\n    coursemodules?: CoreCourseModuleSummary[];\n    user?: CoreUserSummary;\n    competency?: AddonCompetencyDataForUserCompetencySummaryWSResponse;\n    userCompetency?: AddonCompetencyUserCompetencyPlan | AddonCompetencyUserCompetency | AddonCompetencyUserCompetencyCourse;\n    contextLevel?: string;\n    contextInstanceId?: number;\n\n    protected logView: () => void;\n\n    constructor() {\n        this.logView = CoreTime.once(() => this.performLogView());\n\n        try {\n            const planId = CoreNavigator.getRouteNumberParam('planId');\n\n            if (!planId) {\n                const courseId = CoreNavigator.getRequiredRouteNumberParam('courseId');\n                const userId = CoreNavigator.getRouteNumberParam('userId');\n                const source = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(\n                    AddonCompetencyCourseCompetenciesSource,\n                    [courseId, userId],\n                );\n\n                this.competencies = new AddonCompetencyCompetenciesSwipeManager(source);\n\n                return;\n            }\n\n            const source = CoreRoutedItemsManagerSourcesTracker.getOrCreateSource(AddonCompetencyPlanCompetenciesSource, [planId]);\n\n            this.competencies = new AddonCompetencyCompetenciesSwipeManager(source);\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n    }\n\n    get competencyFrameworkUrl(): string | undefined {\n        if (!this.competency) {\n            return;\n        }\n\n        const { pluginbaseurl, framework, pagecontextid } = this.competency.competency.comppath;\n\n        return `${pluginbaseurl}/competencies.php?competencyframeworkid=${framework.id}&pagecontextid=${pagecontextid}`;\n    }\n\n    get courseId(): number | undefined {\n        const source = this.competencies.getSource();\n\n        if (!(source instanceof AddonCompetencyCourseCompetenciesSource)) {\n            return;\n        }\n\n        return source.COURSE_ID;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            const source = this.competencies.getSource();\n\n            await source.reload();\n            await this.competencies.start();\n            await this.fetchCompetency();\n        } finally {\n            this.competencyLoaded = true;\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.competencies.destroy();\n    }\n\n    /**\n     * Fetches the competency and updates the view.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async fetchCompetency(): Promise<void> {\n        try {\n            const source = this.competencies.getSource();\n\n            this.competency = source instanceof AddonCompetencyPlanCompetenciesSource\n                ? await this.fetchCompetencySummaryFromPlan(source)\n                : await this.fetchCompetencySummaryFromCourse(source);\n\n            if (this.competency.user.id != CoreSites.getCurrentSiteUserId()) {\n                // Get the user profile from the returned object.\n                this.user = this.competency.user;\n            }\n\n            this.competency.evidence.forEach((evidence) => {\n                if (evidence.descidentifier) {\n                    const key = 'addon.competency.' + evidence.descidentifier;\n                    evidence.description = Translate.instant(key, { $a: evidence.desca });\n                }\n            });\n\n            this.logView();\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error getting competency data.');\n        }\n    }\n\n    /**\n     * Refreshes the competency.\n     *\n     * @param refresher Refresher.\n     */\n    async refreshCompetency(refresher: HTMLIonRefresherElement): Promise<void> {\n        const source = this.competencies.getSource();\n\n        await CoreUtils.ignoreErrors(\n            source instanceof AddonCompetencyPlanCompetenciesSource\n                ? AddonCompetency.invalidateCompetencyInPlan(source.PLAN_ID, this.requireCompetencyId())\n                : AddonCompetency.invalidateCompetencyInCourse(source.COURSE_ID, this.requireCompetencyId(), source.USER_ID),\n        );\n\n        this.fetchCompetency().finally(() => {\n            refresher?.complete();\n        });\n    }\n\n    /**\n     * Opens the summary of a competency.\n     *\n     * @param competencyId Competency Id.\n     */\n    openCompetencySummary(competencyId: number): void {\n        CoreNavigator.navigate(\n            `../${competencyId}/${ADDON_COMPETENCY_SUMMARY_PAGE}`,\n            {\n                params: { contextLevel: this.contextLevel, contextInstanceId: this.contextInstanceId },\n            },\n        );\n    }\n\n    /**\n     * Get competency id or fail.\n     *\n     * @returns Competency id.\n     */\n    private requireCompetencyId(): number {\n        const selectedItem = this.competencies.getSelectedItem();\n\n        if (!selectedItem) {\n            throw new Error('Failed to get competency id from selected item');\n        }\n\n        return selectedItem.competency.id;\n    }\n\n    /**\n     * Fetch competency summary from a plan source.\n     *\n     * @param source Plan competencies source.\n     * @returns Competency summary.\n     */\n    private async fetchCompetencySummaryFromPlan(\n        source: AddonCompetencyPlanCompetenciesSource,\n    ): Promise<AddonCompetencyDataForUserCompetencySummaryWSResponse> {\n        const competency = await AddonCompetency.getCompetencyInPlan(\n            source.PLAN_ID,\n            this.requireCompetencyId(),\n        );\n\n        this.planStatus = competency.plan.status;\n\n        if (competency.usercompetencysummary.usercompetency) {\n            competency.usercompetencysummary.usercompetency.statusname =\n                AddonCompetencyHelper.getCompetencyStatusName(competency.usercompetencysummary.usercompetency.status);\n        }\n\n        this.contextLevel = ContextLevel.USER;\n        this.contextInstanceId = source.user?.id || competency.usercompetencysummary.user.id;\n        this.userCompetency = competency.usercompetencysummary.usercompetencyplan\n            || competency.usercompetencysummary.usercompetency;\n\n        return competency.usercompetencysummary;\n    }\n\n    /**\n     * Fetch competency summary from a course source.\n     *\n     * @param source Course competencies source.\n     * @returns Competency summary.\n     */\n    private async fetchCompetencySummaryFromCourse(\n        source: AddonCompetencyCourseCompetenciesSource,\n    ): Promise<AddonCompetencyDataForUserCompetencySummaryWSResponse> {\n        const competency = await AddonCompetency.getCompetencyInCourse(\n            source.COURSE_ID,\n            this.requireCompetencyId(),\n            source.USER_ID,\n        );\n\n        this.coursemodules = competency.coursemodules;\n\n        this.contextLevel = ContextLevel.COURSE;\n        this.contextInstanceId = source.COURSE_ID;\n        this.userCompetency = competency.usercompetencysummary.usercompetencycourse\n            || competency.usercompetencysummary.usercompetency;\n\n        return competency.usercompetencysummary;\n    }\n\n    /**\n     * Log view.\n     */\n    protected async performLogView(): Promise<void> {\n        if (!this.competency) {\n            return;\n        }\n\n        const source = this.competencies.getSource();\n        const compId = this.requireCompetencyId();\n        const name = this.competency.competency.competency.shortname;\n        const userId = source.user?.id;\n\n        if (source instanceof AddonCompetencyPlanCompetenciesSource) {\n            if (!this.planStatus) {\n                return;\n            }\n\n            await CoreUtils.ignoreErrors(\n                AddonCompetency.logCompetencyInPlanView(source.PLAN_ID, compId, this.planStatus, name, userId),\n            );\n\n            const wsName = this.planStatus === AddonCompetencyProvider.STATUS_COMPLETE\n                ? 'core_competency_user_competency_plan_viewed'\n                : 'core_competency_user_competency_viewed_in_plan';\n\n            CoreAnalytics.logEvent({\n                type: CoreAnalyticsEventType.VIEW_ITEM,\n                ws: wsName,\n                name,\n                data: {\n                    id: compId,\n                    category: 'competency',\n                    planid: source.PLAN_ID,\n                    planstatus: this.planStatus,\n                    userid: userId,\n                },\n                url: CoreUrlUtils.addParamsToUrl('/admin/tool/lp/user_competency_in_plan.php', {\n                    planid: source.PLAN_ID,\n                    userid: userId,\n                    competencyid: compId,\n                }),\n            });\n\n            return;\n        }\n\n        await CoreUtils.ignoreErrors(AddonCompetency.logCompetencyInCourseView(source.COURSE_ID, compId, name, source.USER_ID));\n\n        CoreAnalytics.logEvent({\n            type: CoreAnalyticsEventType.VIEW_ITEM,\n            ws: 'core_competency_user_competency_viewed_in_course',\n            name,\n            data: {\n                id: compId,\n                category: 'competency',\n                courseid: source.COURSE_ID,\n                userid: userId,\n            },\n            url: CoreUrlUtils.addParamsToUrl('/admin/tool/lp/user_competency_in_course.php', {\n                courseid: source.COURSE_ID,\n                competencyid: compId,\n                userid: userId,\n            }),\n        });\n    }\n\n}\n\n/**\n * Helper to manage swiping within a collection of competencies.\n */\nclass AddonCompetencyCompetenciesSwipeManager\n    extends CoreSwipeNavigationItemsManager<\n    AddonCompetencyDataForPlanPageCompetency | AddonCompetencyDataForCourseCompetenciesPageCompetency,\n    AddonCompetencyPlanCompetenciesSource | AddonCompetencyCourseCompetenciesSource\n    > {\n\n    /**\n     * @inheritdoc\n     */\n    protected getSelectedItemPathFromRoute(route: ActivatedRouteSnapshot): string | null {\n        return route.params.competencyId;\n    }\n\n}\n","<ion-header>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1 *ngIf=\"competency\">\n                <core-format-text [text]=\"competency.competency.competency.shortname\" [contextLevel]=\"contextLevel\"\n                    [contextInstanceId]=\"contextInstanceId\" /> <small>{{ competency.competency.competency.idnumber }}</small>\n            </h1>\n        </ion-title>\n    </ion-toolbar>\n</ion-header>\n<ion-content [core-swipe-navigation]=\"competencies\" class=\"limited-width\">\n    <ion-refresher slot=\"fixed\" [disabled]=\"!competencyLoaded\" (ionRefresh)=\"refreshCompetency($event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n    <core-loading [hideUntil]=\"competencyLoaded\">\n        <ion-card *ngIf=\"user\">\n            <ion-item class=\"ion-text-wrap\">\n                <core-user-avatar [user]=\"user\" slot=\"start\" />\n                <ion-label>\n                    <p class=\"item-heading\">{{ user.fullname }}</p>\n                </ion-label>\n            </ion-item>\n        </ion-card>\n\n        <ion-card *ngIf=\"competency\">\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"competency.competency.competency.description\">\n                <ion-label>\n                    <core-format-text [text]=\"competency.competency.competency.description\" [contextLevel]=\"contextLevel\"\n                        [contextInstanceId]=\"contextInstanceId\" />\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap only-links\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.competency.path' | translate }}</p>\n                    <p>\n                        <a *ngIf=\"competency.competency.comppath.showlinks\" [href]=\"competencyFrameworkUrl\" core-link>\n                            <core-format-text [text]=\"competency.competency.comppath.framework.name\" [contextLevel]=\"contextLevel\"\n                                [contextInstanceId]=\"contextInstanceId\" />\n                        </a>\n                        <ng-container *ngIf=\"!competency.competency.comppath.showlinks\">\n                            <core-format-text [text]=\"competency.competency.comppath.framework.name\" [contextLevel]=\"contextLevel\"\n                                [contextInstanceId]=\"contextInstanceId\" />\n                        </ng-container>\n                        &nbsp;/&nbsp;\n                        <ng-container *ngFor=\"let ancestor of competency.competency.comppath.ancestors\">\n                            <button *ngIf=\"competency.competency.comppath.showlinks\" (click)=\"openCompetencySummary(ancestor.id)\"\n                                class=\"as-link\">\n                                <core-format-text [text]=\"ancestor.name\" [contextLevel]=\"contextLevel\"\n                                    [contextInstanceId]=\"contextInstanceId\" />\n                            </button>\n                            <ng-container *ngIf=\"!competency.competency.comppath.showlinks\">\n                                <core-format-text [text]=\"ancestor.name\" [contextLevel]=\"contextLevel\"\n                                    [contextInstanceId]=\"contextInstanceId\" />\n                            </ng-container>\n                            <ng-container *ngIf=\"!ancestor.last\">&nbsp;/&nbsp;</ng-container>\n                        </ng-container>\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.competency.crossreferencedcompetencies' | translate }}</p>\n                    <p *ngIf=\"!competency.competency.hasrelatedcompetencies\">\n                        {{ 'addon.competency.nocrossreferencedcompetencies' | translate }}\n                    </p>\n                    <ng-container *ngIf=\"competency.competency.hasrelatedcompetencies\">\n                        <p *ngFor=\"let relatedcomp of competency.competency.relatedcompetencies\">\n                            <button (click)=\"openCompetencySummary(relatedcomp.id)\" class=\"as-link\">\n                                <core-format-text [text]=\"relatedcomp.shortname\" [contextLevel]=\"contextLevel\"\n                                    [contextInstanceId]=\"contextInstanceId\" /> - {{ relatedcomp.idnumber }}\n                            </button>\n                        </p>\n                    </ng-container>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"coursemodules\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.competency.activities' | translate }}</p>\n                    <p *ngIf=\"coursemodules.length === 0\">\n                        {{ 'addon.competency.noactivities' | translate }}\n                    </p>\n                    <ion-item class=\"ion-text-wrap\" *ngFor=\"let activity of coursemodules\" [href]=\"activity.url\"\n                        [attr.aria-label]=\"activity.name\" core-link capture=\"true\">\n                        <core-mod-icon slot=\"start\" [modicon]=\"activity.iconurl\" [showAlt]=\"false\" *ngIf=\"activity.iconurl\" />\n                        <ion-label>\n                            <core-format-text [text]=\"activity.name\" contextLevel=\"module\" [contextInstanceId]=\"activity.id\"\n                                [courseId]=\"courseId\" />\n                        </ion-label>\n                    </ion-item>\n                </ion-label>\n            </ion-item>\n            <ng-container *ngIf=\"userCompetency\">\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"competency.usercompetency && competency.usercompetency!.status\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.reviewstatus' | translate }}</p>\n                        <p>{{ competency.usercompetency!.statusname }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.proficient' | translate }}</p>\n                    </ion-label>\n                    <ion-badge slot=\"end\" color=\"success\" *ngIf=\"userCompetency.proficiency\">\n                        {{ 'core.yes' | translate }}\n                    </ion-badge>\n                    <ion-badge slot=\"end\" color=\"danger\" *ngIf=\"!userCompetency.proficiency\">\n                        {{ 'core.no' | translate }}\n                    </ion-badge>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ 'addon.competency.rating' | translate }}</p>\n                    </ion-label>\n                    <ion-badge color=\"dark\" slot=\"end\">{{ userCompetency.gradename }}</ion-badge>\n                </ion-item>\n            </ng-container>\n        </ion-card>\n\n        <div *ngIf=\"competency\">\n            <h2 class=\"ion-margin-horizontal\">{{ 'addon.competency.evidence' | translate }}</h2>\n            <p class=\"ion-margin-horizontal\" *ngIf=\"competency.evidence.length === 0\">\n                {{ 'addon.competency.noevidence' | translate }}\n            </p>\n            <ion-card *ngFor=\"let evidence of competency.evidence\">\n                <ion-item class=\"ion-text-wrap\" *ngIf=\"evidence.actionuser\" core-user-link [userId]=\"evidence.actionuser.id\"\n                    [courseId]=\"courseId\">\n                    <core-user-avatar [user]=\"evidence.actionuser\" slot=\"start\" [linkProfile]=\"false\" />\n                    <ion-label>\n                        <p class=\"item-heading\">{{ evidence.actionuser.fullname }}</p>\n                        <p>{{ evidence.timemodified * 1000 | coreFormatDate }}</p>\n                    </ion-label>\n                </ion-item>\n                <ion-item class=\"ion-text-wrap\">\n                    <ion-label>\n                        <p>\n                            <ion-badge color=\"dark\">{{ evidence.gradename }}</ion-badge>\n                        </p>\n                        <p class=\"ion-margin-top\" *ngIf=\"evidence.description\">{{ evidence.description }}</p>\n                        <blockquote *ngIf=\"evidence.note\">{{ evidence.note }}</blockquote>\n                    </ion-label>\n                </ion-item>\n            </ion-card>\n        </div>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}