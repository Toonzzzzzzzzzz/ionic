{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreSearchGlobalSearch, CORE_SEARCH_GLOBAL_SEARCH_PAGE_LENGTH } from '@features/search/services/global-search';\nimport { CorePaginatedItemsManagerSource } from '@classes/items-management/paginated-items-manager-source';\n/**\n * Provides a collection of global search results.\n */\nexport class CoreSearchGlobalSearchResultsSource extends CorePaginatedItemsManagerSource {\n  constructor(query, filters) {\n    super();\n    this.query = query;\n    this.filters = filters;\n  }\n  /**\n   * Check whether the source has an empty query.\n   *\n   * @returns Whether the source has an empty query.\n   */\n  hasEmptyQuery() {\n    return !this.query || this.query.trim().length === 0;\n  }\n  /**\n   * Get search query.\n   *\n   * @returns Search query.\n   */\n  getQuery() {\n    return this.query;\n  }\n  /**\n   * Get search filters.\n   *\n   * @returns Search filters.\n   */\n  getFilters() {\n    return this.filters;\n  }\n  /**\n   * Set search query.\n   *\n   * @param query Search query.\n   */\n  setQuery(query) {\n    this.query = query;\n    this.setDirty(true);\n  }\n  /**\n   * Set search filters.\n   *\n   * @param filters Search filters.\n   */\n  setFilters(filters) {\n    this.filters = filters;\n    this.setDirty(true);\n  }\n  /**\n   * @inheritdoc\n   */\n  loadPageItems(page) {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      const pageResults = yield CoreSearchGlobalSearch.getResults(_this.query, _this.filters, page);\n      return {\n        items: pageResults.results,\n        hasMoreItems: pageResults.canLoadMore\n      };\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getPageLength() {\n    return CORE_SEARCH_GLOBAL_SEARCH_PAGE_LENGTH;\n  }\n}","map":{"version":3,"names":["CoreSearchGlobalSearch","CORE_SEARCH_GLOBAL_SEARCH_PAGE_LENGTH","CorePaginatedItemsManagerSource","CoreSearchGlobalSearchResultsSource","constructor","query","filters","hasEmptyQuery","trim","length","getQuery","getFilters","setQuery","setDirty","setFilters","loadPageItems","page","_this","_asyncToGenerator","pageResults","getResults","items","results","hasMoreItems","canLoadMore","getPageLength"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/search/classes/global-search-results-source.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport {\n    CoreSearchGlobalSearchResult,\n    CoreSearchGlobalSearch,\n    CORE_SEARCH_GLOBAL_SEARCH_PAGE_LENGTH,\n    CoreSearchGlobalSearchFilters,\n} from '@features/search/services/global-search';\nimport { CorePaginatedItemsManagerSource } from '@classes/items-management/paginated-items-manager-source';\n\n/**\n * Provides a collection of global search results.\n */\nexport class CoreSearchGlobalSearchResultsSource extends CorePaginatedItemsManagerSource<CoreSearchGlobalSearchResult> {\n\n    private query: string;\n    private filters: CoreSearchGlobalSearchFilters;\n\n    constructor(query: string, filters: CoreSearchGlobalSearchFilters) {\n        super();\n\n        this.query = query;\n        this.filters = filters;\n    }\n\n    /**\n     * Check whether the source has an empty query.\n     *\n     * @returns Whether the source has an empty query.\n     */\n    hasEmptyQuery(): boolean {\n        return !this.query || this.query.trim().length === 0;\n    }\n\n    /**\n     * Get search query.\n     *\n     * @returns Search query.\n     */\n    getQuery(): string {\n        return this.query;\n    }\n\n    /**\n     * Get search filters.\n     *\n     * @returns Search filters.\n     */\n    getFilters(): CoreSearchGlobalSearchFilters {\n        return this.filters;\n    }\n\n    /**\n     * Set search query.\n     *\n     * @param query Search query.\n     */\n    setQuery(query: string): void {\n        this.query = query;\n\n        this.setDirty(true);\n    }\n\n    /**\n     * Set search filters.\n     *\n     * @param filters Search filters.\n     */\n    setFilters(filters: CoreSearchGlobalSearchFilters): void {\n        this.filters = filters;\n\n        this.setDirty(true);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected async loadPageItems(page: number): Promise<{ items: CoreSearchGlobalSearchResult[]; hasMoreItems: boolean }> {\n        const pageResults = await CoreSearchGlobalSearch.getResults(this.query, this.filters, page);\n\n        return { items: pageResults.results, hasMoreItems: pageResults.canLoadMore };\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected getPageLength(): number {\n        return CORE_SEARCH_GLOBAL_SEARCH_PAGE_LENGTH;\n    }\n\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,SAEIA,sBAAsB,EACtBC,qCAAqC,QAElC,yCAAyC;AAChD,SAASC,+BAA+B,QAAQ,0DAA0D;AAE1G;;;AAGA,OAAM,MAAOC,mCAAoC,SAAQD,+BAA6D;EAKlHE,YAAYC,KAAa,EAAEC,OAAsC;IAC7D,KAAK,EAAE;IAEP,IAAI,CAACD,KAAK,GAAGA,KAAK;IAClB,IAAI,CAACC,OAAO,GAAGA,OAAO;EAC1B;EAEA;;;;;EAKAC,aAAaA,CAAA;IACT,OAAO,CAAC,IAAI,CAACF,KAAK,IAAI,IAAI,CAACA,KAAK,CAACG,IAAI,EAAE,CAACC,MAAM,KAAK,CAAC;EACxD;EAEA;;;;;EAKAC,QAAQA,CAAA;IACJ,OAAO,IAAI,CAACL,KAAK;EACrB;EAEA;;;;;EAKAM,UAAUA,CAAA;IACN,OAAO,IAAI,CAACL,OAAO;EACvB;EAEA;;;;;EAKAM,QAAQA,CAACP,KAAa;IAClB,IAAI,CAACA,KAAK,GAAGA,KAAK;IAElB,IAAI,CAACQ,QAAQ,CAAC,IAAI,CAAC;EACvB;EAEA;;;;;EAKAC,UAAUA,CAACR,OAAsC;IAC7C,IAAI,CAACA,OAAO,GAAGA,OAAO;IAEtB,IAAI,CAACO,QAAQ,CAAC,IAAI,CAAC;EACvB;EAEA;;;EAGgBE,aAAaA,CAACC,IAAY;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACtC,MAAMC,WAAW,SAASnB,sBAAsB,CAACoB,UAAU,CAACH,KAAI,CAACZ,KAAK,EAAEY,KAAI,CAACX,OAAO,EAAEU,IAAI,CAAC;MAE3F,OAAO;QAAEK,KAAK,EAAEF,WAAW,CAACG,OAAO;QAAEC,YAAY,EAAEJ,WAAW,CAACK;MAAW,CAAE;IAAC;EACjF;EAEA;;;EAGUC,aAAaA,CAAA;IACnB,OAAOxB,qCAAqC;EAChD"},"metadata":{},"sourceType":"module","externalDependencies":[]}