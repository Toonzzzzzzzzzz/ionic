{"ast":null,"code":"var _class;\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n// Based on https://medium.com/madewithply/ionic-4-long-press-gestures-96cf1e44098b\nimport { EventEmitter } from '@angular/core';\nimport { GestureController } from '@singletons';\nimport * as i0 from \"@angular/core\";\n/**\n * Directive to add long press actions to html elements.\n */\nexport class CoreLongPressDirective {\n  constructor(el) {\n    this.HOLD_DURATION = 500;\n    this.longPress = new EventEmitter();\n    this.element = el.nativeElement;\n    this.element.setAttribute('tappable', '');\n  }\n  /**\n   * Initialize gesture listening.\n   */\n  ngOnInit() {\n    this.pressGesture = GestureController.create({\n      el: this.element,\n      threshold: 0,\n      disableScroll: true,\n      gestureName: 'longpress',\n      onStart: event => {\n        this.timeout = window.setTimeout(() => {\n          this.longPress.emit(event);\n          delete this.timeout;\n        }, this.HOLD_DURATION);\n      },\n      onMove: () => this.clearTimeout(),\n      onEnd: () => this.clearTimeout()\n    }, true);\n    this.pressGesture.enable();\n  }\n  /**\n   * Destroy gesture listening.\n   */\n  ngOnDestroy() {\n    var _this$pressGesture;\n    (_this$pressGesture = this.pressGesture) === null || _this$pressGesture === void 0 || _this$pressGesture.destroy();\n    this.clearTimeout();\n  }\n  clearTimeout() {\n    if (!this.timeout) {\n      return;\n    }\n    clearTimeout(this.timeout);\n    delete this.timeout;\n  }\n}\n_class = CoreLongPressDirective;\n_class.ɵfac = function CoreLongPressDirective_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n_class.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n  type: _class,\n  selectors: [[\"\", \"longPress\", \"\"]],\n  outputs: {\n    longPress: \"longPress\"\n  }\n});","map":{"version":3,"names":["EventEmitter","GestureController","CoreLongPressDirective","constructor","el","HOLD_DURATION","longPress","element","nativeElement","setAttribute","ngOnInit","pressGesture","create","threshold","disableScroll","gestureName","onStart","event","timeout","window","setTimeout","emit","onMove","clearTimeout","onEnd","enable","ngOnDestroy","_this$pressGesture","destroy","i0","ɵɵdirectiveInject","ElementRef","selectors","outputs"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/directives/long-press.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n// Based on https://medium.com/madewithply/ionic-4-long-press-gestures-96cf1e44098b\n\nimport { Directive, ElementRef, OnInit, OnDestroy, Output, EventEmitter } from '@angular/core';\nimport { Gesture } from '@ionic/angular';\nimport { GestureController } from '@singletons';\n/**\n * Directive to add long press actions to html elements.\n */\n@Directive({\n    selector: '[longPress]',\n})\nexport class CoreLongPressDirective implements OnInit, OnDestroy {\n\n    readonly HOLD_DURATION = 500;\n\n    element: HTMLElement;\n    pressGesture?: Gesture;\n    timeout?: number;\n\n    @Output() longPress = new EventEmitter();\n\n    constructor(el: ElementRef) {\n        this.element = el.nativeElement;\n        this.element.setAttribute('tappable', '');\n    }\n\n    /**\n     * Initialize gesture listening.\n     */\n    ngOnInit(): void {\n        this.pressGesture = GestureController.create({\n            el: this.element,\n            threshold: 0,\n            disableScroll: true,\n            gestureName: 'longpress',\n            onStart: (event) => {\n                this.timeout = window.setTimeout(() => {\n                    this.longPress.emit(event);\n\n                    delete this.timeout;\n                }, this.HOLD_DURATION);\n            },\n            onMove: () => this.clearTimeout(),\n            onEnd: () => this.clearTimeout(),\n        }, true);\n\n        this.pressGesture.enable();\n    }\n\n    /**\n     * Destroy gesture listening.\n     */\n    ngOnDestroy(): void {\n        this.pressGesture?.destroy();\n        this.clearTimeout();\n    }\n\n    protected clearTimeout(): void {\n        if (!this.timeout) {\n            return;\n        }\n\n        clearTimeout(this.timeout);\n        delete this.timeout;\n    }\n\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,SAA2DA,YAAY,QAAQ,eAAe;AAE9F,SAASC,iBAAiB,QAAQ,aAAa;;AAC/C;;;AAMA,OAAM,MAAOC,sBAAsB;EAU/BC,YAAYC,EAAc;IARjB,KAAAC,aAAa,GAAG,GAAG;IAMlB,KAAAC,SAAS,GAAG,IAAIN,YAAY,EAAE;IAGpC,IAAI,CAACO,OAAO,GAAGH,EAAE,CAACI,aAAa;IAC/B,IAAI,CAACD,OAAO,CAACE,YAAY,CAAC,UAAU,EAAE,EAAE,CAAC;EAC7C;EAEA;;;EAGAC,QAAQA,CAAA;IACJ,IAAI,CAACC,YAAY,GAAGV,iBAAiB,CAACW,MAAM,CAAC;MACzCR,EAAE,EAAE,IAAI,CAACG,OAAO;MAChBM,SAAS,EAAE,CAAC;MACZC,aAAa,EAAE,IAAI;MACnBC,WAAW,EAAE,WAAW;MACxBC,OAAO,EAAGC,KAAK,IAAI;QACf,IAAI,CAACC,OAAO,GAAGC,MAAM,CAACC,UAAU,CAAC,MAAK;UAClC,IAAI,CAACd,SAAS,CAACe,IAAI,CAACJ,KAAK,CAAC;UAE1B,OAAO,IAAI,CAACC,OAAO;QACvB,CAAC,EAAE,IAAI,CAACb,aAAa,CAAC;MAC1B,CAAC;MACDiB,MAAM,EAAEA,CAAA,KAAM,IAAI,CAACC,YAAY,EAAE;MACjCC,KAAK,EAAEA,CAAA,KAAM,IAAI,CAACD,YAAY;KACjC,EAAE,IAAI,CAAC;IAER,IAAI,CAACZ,YAAY,CAACc,MAAM,EAAE;EAC9B;EAEA;;;EAGAC,WAAWA,CAAA;IAAA,IAAAC,kBAAA;IACP,CAAAA,kBAAA,OAAI,CAAChB,YAAY,cAAAgB,kBAAA,eAAjBA,kBAAA,CAAmBC,OAAO,EAAE;IAC5B,IAAI,CAACL,YAAY,EAAE;EACvB;EAEUA,YAAYA,CAAA;IAClB,IAAI,CAAC,IAAI,CAACL,OAAO,EAAE;MACf;;IAGJK,YAAY,CAAC,IAAI,CAACL,OAAO,CAAC;IAC1B,OAAO,IAAI,CAACA,OAAO;EACvB;;SArDShB,sBAAsB;;mBAAtBA,MAAsB,EAAA2B,EAAA,CAAAC,iBAAA,CAAAD,EAAA,CAAAE,UAAA;AAAA;;QAAtB7B,MAAsB;EAAA8B,SAAA;EAAAC,OAAA;IAAA3B,SAAA;EAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}