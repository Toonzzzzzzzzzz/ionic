{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreRoutedItemsManager } from './routed-items-manager';\n/**\n * Helper class to manage the state and routing of a swipeable page.\n */\nexport class CoreSwipeNavigationItemsManager extends CoreRoutedItemsManager {\n  /**\n   * Process page started operations.\n   */\n  start() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      _this.updateSelectedItem();\n    })();\n  }\n  /**\n   * Navigate to the next item.\n   */\n  navigateToNextItem() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      yield _this2.navigateToItemBy(1, 'forward');\n    })();\n  }\n  /**\n   * Navigate to the previous item.\n   */\n  navigateToPreviousItem() {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      yield _this3.navigateToItemBy(-1, 'back');\n    })();\n  }\n  /**\n   * Has a next item.\n   *\n   * @returns If has next item.\n   */\n  hasNextItem() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const item = yield _this4.getItemBy(1);\n      return !!item;\n    })();\n  }\n  /**\n   * Has a previous item.\n   *\n   * @returns If has previous item.\n   */\n  hasPreviousItem() {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      const item = yield _this5.getItemBy(-1);\n      return !!item;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getCurrentPageRoute() {\n    return CoreNavigator.getCurrentRoute();\n  }\n  /**\n   * @inheritdoc\n   */\n  getSelectedItemPathFromRoute(route) {\n    const segments = [];\n    while (route) {\n      segments.push(...route.url);\n      if (!route.firstChild) {\n        break;\n      }\n      route = route.firstChild;\n    }\n    return segments.map(segment => segment.path).join('/').replace(/\\/+/, '/').trim() || null;\n  }\n  /**\n   * Navigate to an item by an offset.\n   *\n   * @param delta Index offset.\n   * @param animationDirection Animation direction.\n   */\n  navigateToItemBy(delta, animationDirection) {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      const item = yield _this6.getItemBy(delta);\n      if (!item) {\n        return;\n      }\n      yield _this6.navigateToItem(item, {\n        animationDirection,\n        replace: true\n      });\n    })();\n  }\n  /**\n   * Get item by an offset.\n   *\n   * @param delta Index offset.\n   * @returns The item or null if none.\n   */\n  getItemBy(delta) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      var _ref;\n      const items = _this7.getSource().getItems();\n      const selectedIndex = (_ref = _this7.selectedItem && (items === null || items === void 0 ? void 0 : items.indexOf(_this7.selectedItem))) !== null && _ref !== void 0 ? _ref : -1;\n      if (selectedIndex === -1 || items === null) {\n        return null;\n      }\n      const deltaStep = delta > 0 ? 1 : -1;\n      let nextIndex = selectedIndex;\n      let deltaMoved = 0;\n      while (deltaMoved !== delta) {\n        nextIndex += deltaStep;\n        if (nextIndex < 0) {\n          return null;\n        }\n        if (nextIndex >= items.length) {\n          break;\n        }\n        if (_this7.skipItemInSwipe(items[nextIndex])) {\n          continue;\n        }\n        deltaMoved += deltaStep;\n      }\n      if (deltaMoved === delta) {\n        return items[nextIndex];\n      }\n      if (!_this7.getSource().isCompleted()) {\n        yield _this7.getSource().load();\n        return _this7.getItemBy(delta);\n      }\n      return null;\n    })();\n  }\n  /**\n   * Check if an item should be skipped during swipe navigation.\n   *\n   * @param item Item.\n   * @returns Whether to skip this item during swipe navigation.\n   */\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  skipItemInSwipe(item) {\n    return false;\n  }\n}","map":{"version":3,"names":["CoreNavigator","CoreRoutedItemsManager","CoreSwipeNavigationItemsManager","start","_this","_asyncToGenerator","updateSelectedItem","navigateToNextItem","_this2","navigateToItemBy","navigateToPreviousItem","_this3","hasNextItem","_this4","item","getItemBy","hasPreviousItem","_this5","getCurrentPageRoute","getCurrentRoute","getSelectedItemPathFromRoute","route","segments","push","url","firstChild","map","segment","path","join","replace","trim","delta","animationDirection","_this6","navigateToItem","_this7","_ref","items","getSource","getItems","selectedIndex","selectedItem","indexOf","deltaStep","nextIndex","deltaMoved","length","skipItemInSwipe","isCompleted","load"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/classes/items-management/swipe-navigation-items-manager.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { ActivatedRoute, ActivatedRouteSnapshot, UrlSegment } from '@angular/router';\n\nimport { CoreNavigator } from '@services/navigator';\n\nimport { CoreRoutedItemsManager } from './routed-items-manager';\nimport { CoreRoutedItemsManagerSource } from './routed-items-manager-source';\n\n/**\n * Helper class to manage the state and routing of a swipeable page.\n */\nexport class CoreSwipeNavigationItemsManager<\n    Item = unknown,\n    Source extends CoreRoutedItemsManagerSource<Item> = CoreRoutedItemsManagerSource<Item>\n>\n    extends CoreRoutedItemsManager<Item, Source> {\n\n    /**\n     * Process page started operations.\n     */\n    async start(): Promise<void> {\n        this.updateSelectedItem();\n    }\n\n    /**\n     * Navigate to the next item.\n     */\n    async navigateToNextItem(): Promise<void> {\n        await this.navigateToItemBy(1, 'forward');\n    }\n\n    /**\n     * Navigate to the previous item.\n     */\n    async navigateToPreviousItem(): Promise<void> {\n        await this.navigateToItemBy(-1, 'back');\n    }\n\n    /**\n     * Has a next item.\n     *\n     * @returns If has next item.\n     */\n    async hasNextItem(): Promise<boolean> {\n        const item = await this.getItemBy(1);\n\n        return !!item;\n    }\n\n    /**\n     * Has a previous item.\n     *\n     * @returns If has previous item.\n     */\n    async hasPreviousItem(): Promise<boolean> {\n        const item = await this.getItemBy(-1);\n\n        return !!item;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected getCurrentPageRoute(): ActivatedRoute | null {\n        return CoreNavigator.getCurrentRoute();\n    }\n\n    /**\n     * @inheritdoc\n     */\n    protected getSelectedItemPathFromRoute(route: ActivatedRouteSnapshot): string | null {\n        const segments: UrlSegment[] = [];\n\n        while (route) {\n            segments.push(...route.url);\n\n            if (!route.firstChild) {\n                break;\n            }\n\n            route = route.firstChild;\n        }\n\n        return segments.map(segment => segment.path).join('/').replace(/\\/+/, '/').trim() || null;\n    }\n\n    /**\n     * Navigate to an item by an offset.\n     *\n     * @param delta Index offset.\n     * @param animationDirection Animation direction.\n     */\n    protected async navigateToItemBy(delta: number, animationDirection: 'forward' | 'back'): Promise<void> {\n        const item = await this.getItemBy(delta);\n\n        if (!item) {\n            return;\n        }\n\n        await this.navigateToItem(item, { animationDirection, replace: true });\n    }\n\n    /**\n     * Get item by an offset.\n     *\n     * @param delta Index offset.\n     * @returns The item or null if none.\n     */\n    protected async getItemBy(delta: number): Promise<Item | null> {\n        const items = this.getSource().getItems();\n        const selectedIndex = (this.selectedItem && items?.indexOf(this.selectedItem)) ?? -1;\n\n        if (selectedIndex === -1 || items === null) {\n            return null;\n        }\n\n        const deltaStep = delta > 0 ? 1 : -1;\n        let nextIndex = selectedIndex;\n        let deltaMoved = 0;\n\n        while (deltaMoved !== delta) {\n            nextIndex += deltaStep;\n\n            if (nextIndex < 0) {\n                return null;\n            }\n\n            if (nextIndex >= items.length) {\n                break;\n            }\n\n            if (this.skipItemInSwipe(items[nextIndex])) {\n                continue;\n            }\n\n            deltaMoved += deltaStep;\n        }\n\n        if (deltaMoved === delta) {\n            return items[nextIndex];\n        }\n\n        if (!this.getSource().isCompleted()) {\n            await this.getSource().load();\n\n            return this.getItemBy(delta);\n        }\n\n        return null;\n    }\n\n    /**\n     * Check if an item should be skipped during swipe navigation.\n     *\n     * @param item Item.\n     * @returns Whether to skip this item during swipe navigation.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    protected skipItemInSwipe(item: Item): boolean {\n        return false;\n    }\n\n}\n"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA,SAASA,aAAa,QAAQ,qBAAqB;AAEnD,SAASC,sBAAsB,QAAQ,wBAAwB;AAG/D;;;AAGA,OAAM,MAAOC,+BAIT,SAAQD,sBAAoC;EAE5C;;;EAGME,KAAKA,CAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA;MACPD,KAAI,CAACE,kBAAkB,EAAE;IAAC;EAC9B;EAEA;;;EAGMC,kBAAkBA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAH,iBAAA;MACpB,MAAMG,MAAI,CAACC,gBAAgB,CAAC,CAAC,EAAE,SAAS,CAAC;IAAC;EAC9C;EAEA;;;EAGMC,sBAAsBA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAN,iBAAA;MACxB,MAAMM,MAAI,CAACF,gBAAgB,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC;IAAC;EAC5C;EAEA;;;;;EAKMG,WAAWA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAR,iBAAA;MACb,MAAMS,IAAI,SAASD,MAAI,CAACE,SAAS,CAAC,CAAC,CAAC;MAEpC,OAAO,CAAC,CAACD,IAAI;IAAC;EAClB;EAEA;;;;;EAKME,eAAeA,CAAA;IAAA,IAAAC,MAAA;IAAA,OAAAZ,iBAAA;MACjB,MAAMS,IAAI,SAASG,MAAI,CAACF,SAAS,CAAC,CAAC,CAAC,CAAC;MAErC,OAAO,CAAC,CAACD,IAAI;IAAC;EAClB;EAEA;;;EAGUI,mBAAmBA,CAAA;IACzB,OAAOlB,aAAa,CAACmB,eAAe,EAAE;EAC1C;EAEA;;;EAGUC,4BAA4BA,CAACC,KAA6B;IAChE,MAAMC,QAAQ,GAAiB,EAAE;IAEjC,OAAOD,KAAK,EAAE;MACVC,QAAQ,CAACC,IAAI,CAAC,GAAGF,KAAK,CAACG,GAAG,CAAC;MAE3B,IAAI,CAACH,KAAK,CAACI,UAAU,EAAE;QACnB;;MAGJJ,KAAK,GAAGA,KAAK,CAACI,UAAU;;IAG5B,OAAOH,QAAQ,CAACI,GAAG,CAACC,OAAO,IAAIA,OAAO,CAACC,IAAI,CAAC,CAACC,IAAI,CAAC,GAAG,CAAC,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAACC,IAAI,EAAE,IAAI,IAAI;EAC7F;EAEA;;;;;;EAMgBtB,gBAAgBA,CAACuB,KAAa,EAAEC,kBAAsC;IAAA,IAAAC,MAAA;IAAA,OAAA7B,iBAAA;MAClF,MAAMS,IAAI,SAASoB,MAAI,CAACnB,SAAS,CAACiB,KAAK,CAAC;MAExC,IAAI,CAAClB,IAAI,EAAE;QACP;;MAGJ,MAAMoB,MAAI,CAACC,cAAc,CAACrB,IAAI,EAAE;QAAEmB,kBAAkB;QAAEH,OAAO,EAAE;MAAI,CAAE,CAAC;IAAC;EAC3E;EAEA;;;;;;EAMgBf,SAASA,CAACiB,KAAa;IAAA,IAAAI,MAAA;IAAA,OAAA/B,iBAAA;MAAA,IAAAgC,IAAA;MACnC,MAAMC,KAAK,GAAGF,MAAI,CAACG,SAAS,EAAE,CAACC,QAAQ,EAAE;MACzC,MAAMC,aAAa,IAAAJ,IAAA,GAAID,MAAI,CAACM,YAAY,KAAIJ,KAAK,aAALA,KAAK,uBAALA,KAAK,CAAEK,OAAO,CAACP,MAAI,CAACM,YAAY,CAAC,eAAAL,IAAA,cAAAA,IAAA,GAAK,CAAC,CAAC;MAEpF,IAAII,aAAa,KAAK,CAAC,CAAC,IAAIH,KAAK,KAAK,IAAI,EAAE;QACxC,OAAO,IAAI;;MAGf,MAAMM,SAAS,GAAGZ,KAAK,GAAG,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;MACpC,IAAIa,SAAS,GAAGJ,aAAa;MAC7B,IAAIK,UAAU,GAAG,CAAC;MAElB,OAAOA,UAAU,KAAKd,KAAK,EAAE;QACzBa,SAAS,IAAID,SAAS;QAEtB,IAAIC,SAAS,GAAG,CAAC,EAAE;UACf,OAAO,IAAI;;QAGf,IAAIA,SAAS,IAAIP,KAAK,CAACS,MAAM,EAAE;UAC3B;;QAGJ,IAAIX,MAAI,CAACY,eAAe,CAACV,KAAK,CAACO,SAAS,CAAC,CAAC,EAAE;UACxC;;QAGJC,UAAU,IAAIF,SAAS;;MAG3B,IAAIE,UAAU,KAAKd,KAAK,EAAE;QACtB,OAAOM,KAAK,CAACO,SAAS,CAAC;;MAG3B,IAAI,CAACT,MAAI,CAACG,SAAS,EAAE,CAACU,WAAW,EAAE,EAAE;QACjC,MAAMb,MAAI,CAACG,SAAS,EAAE,CAACW,IAAI,EAAE;QAE7B,OAAOd,MAAI,CAACrB,SAAS,CAACiB,KAAK,CAAC;;MAGhC,OAAO,IAAI;IAAC;EAChB;EAEA;;;;;;EAMA;EACUgB,eAAeA,CAAClC,IAAU;IAChC,OAAO,KAAK;EAChB"},"metadata":{},"sourceType":"module","externalDependencies":[]}