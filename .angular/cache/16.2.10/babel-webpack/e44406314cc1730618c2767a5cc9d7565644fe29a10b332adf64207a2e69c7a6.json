{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreSiteInfoUserHomepage } from '@classes/sites/unauthenticated-site';\nimport { CoreSiteHomeHomeHandler } from '@features/sitehome/services/handlers/sitehome-home';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\nimport { CoreCourses } from '../courses';\nimport { CoreDashboardHomeHandler } from './dashboard-home';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler to add my courses into main menu.\n */\nexport class CoreCoursesMyCoursesMainMenuHandlerService {\n  constructor() {\n    this.name = 'CoreCoursesMyCourses';\n    this.priority = 900;\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled() {\n    return _asyncToGenerator(function* () {\n      const site = CoreSites.getRequiredCurrentSite();\n      const siteId = site.getId();\n      const disabled = yield CoreCourses.isMyCoursesDisabled(siteId);\n      if (disabled) {\n        return false;\n      }\n      if (site.isVersionGreaterEqualThan('4.0')) {\n        return true;\n      }\n      // Dashboard cannot be disabled on 3.5 or 3.6 so it will never show this tab.\n      const dashboardEnabled = yield CoreDashboardHomeHandler.isEnabledForSite(siteId);\n      const siteHomeEnabled = yield CoreSiteHomeHomeHandler.isEnabledForSite(siteId);\n      return !dashboardEnabled && !siteHomeEnabled;\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  getDisplayData() {\n    var _site$getInfo;\n    const site = CoreSites.getCurrentSite();\n    const displayMyCourses = (site === null || site === void 0 ? void 0 : site.getInfo()) && (site === null || site === void 0 || (_site$getInfo = site.getInfo()) === null || _site$getInfo === void 0 ? void 0 : _site$getInfo.userhomepage) === CoreSiteInfoUserHomepage.HOMEPAGE_MYCOURSES;\n    return {\n      title: 'core.courses.mycourses',\n      page: CoreCoursesMyCoursesMainMenuHandlerService.PAGE_NAME,\n      class: 'core-courses-my-courses-handler',\n      icon: 'fas-graduation-cap',\n      priority: displayMyCourses ? this.priority + 200 : this.priority\n    };\n  }\n}\n_class = CoreCoursesMyCoursesMainMenuHandlerService;\n_class.PAGE_NAME = 'courses';\n_class.ɵfac = function CoreCoursesMyCoursesMainMenuHandlerService_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const CoreCoursesMyCoursesHomeHandler = makeSingleton(CoreCoursesMyCoursesMainMenuHandlerService);","map":{"version":3,"names":["CoreSiteInfoUserHomepage","CoreSiteHomeHomeHandler","CoreSites","makeSingleton","CoreCourses","CoreDashboardHomeHandler","CoreCoursesMyCoursesMainMenuHandlerService","constructor","name","priority","isEnabled","_asyncToGenerator","site","getRequiredCurrentSite","siteId","getId","disabled","isMyCoursesDisabled","isVersionGreaterEqualThan","dashboardEnabled","isEnabledForSite","siteHomeEnabled","getDisplayData","_site$getInfo","getCurrentSite","displayMyCourses","getInfo","userhomepage","HOMEPAGE_MYCOURSES","title","page","PAGE_NAME","class","icon","_class","factory","ɵfac","providedIn","CoreCoursesMyCoursesHomeHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/courses/services/handlers/my-courses-mainmenu.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\nimport { CoreSiteInfoUserHomepage } from '@classes/sites/unauthenticated-site';\nimport { CoreMainMenuHandler, CoreMainMenuHandlerData } from '@features/mainmenu/services/mainmenu-delegate';\nimport { CoreSiteHomeHomeHandler } from '@features/sitehome/services/handlers/sitehome-home';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\nimport { CoreCourses } from '../courses';\nimport { CoreDashboardHomeHandler } from './dashboard-home';\n\n/**\n * Handler to add my courses into main menu.\n */\n@Injectable({ providedIn: 'root' })\nexport class CoreCoursesMyCoursesMainMenuHandlerService implements CoreMainMenuHandler {\n\n    static readonly PAGE_NAME = 'courses';\n\n    name = 'CoreCoursesMyCourses';\n    priority = 900;\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(): Promise<boolean> {\n        const site = CoreSites.getRequiredCurrentSite();\n\n        const siteId = site.getId();\n        const disabled = await CoreCourses.isMyCoursesDisabled(siteId);\n\n        if (disabled) {\n            return false;\n        }\n\n        if (site.isVersionGreaterEqualThan('4.0')) {\n            return true;\n        }\n\n        // Dashboard cannot be disabled on 3.5 or 3.6 so it will never show this tab.\n        const dashboardEnabled = await CoreDashboardHomeHandler.isEnabledForSite(siteId);\n        const siteHomeEnabled = await CoreSiteHomeHomeHandler.isEnabledForSite(siteId);\n\n        return !dashboardEnabled && !siteHomeEnabled;\n    }\n\n    /**\n     * @inheritdoc\n     */\n    getDisplayData(): CoreMainMenuHandlerData {\n        const site = CoreSites.getCurrentSite();\n\n        const displayMyCourses = site?.getInfo() && site?.getInfo()?.userhomepage === CoreSiteInfoUserHomepage.HOMEPAGE_MYCOURSES;\n\n        return {\n            title: 'core.courses.mycourses',\n            page: CoreCoursesMyCoursesMainMenuHandlerService.PAGE_NAME,\n            class: 'core-courses-my-courses-handler',\n            icon: 'fas-graduation-cap',\n            priority: displayMyCourses ? this.priority + 200 : this.priority,\n        };\n    }\n\n}\n\nexport const CoreCoursesMyCoursesHomeHandler = makeSingleton(CoreCoursesMyCoursesMainMenuHandlerService);\n"],"mappings":";;AAeA,SAASA,wBAAwB,QAAQ,qCAAqC;AAE9E,SAASC,uBAAuB,QAAQ,oDAAoD;AAC5F,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,aAAa,QAAQ,aAAa;AAC3C,SAASC,WAAW,QAAQ,YAAY;AACxC,SAASC,wBAAwB,QAAQ,kBAAkB;;AAE3D;;;AAIA,OAAM,MAAOC,0CAA0C;EADvDC,YAAA;IAKI,KAAAC,IAAI,GAAG,sBAAsB;IAC7B,KAAAC,QAAQ,GAAG,GAAG;;EAEd;;;EAGMC,SAASA,CAAA;IAAA,OAAAC,iBAAA;MACX,MAAMC,IAAI,GAAGV,SAAS,CAACW,sBAAsB,EAAE;MAE/C,MAAMC,MAAM,GAAGF,IAAI,CAACG,KAAK,EAAE;MAC3B,MAAMC,QAAQ,SAASZ,WAAW,CAACa,mBAAmB,CAACH,MAAM,CAAC;MAE9D,IAAIE,QAAQ,EAAE;QACV,OAAO,KAAK;;MAGhB,IAAIJ,IAAI,CAACM,yBAAyB,CAAC,KAAK,CAAC,EAAE;QACvC,OAAO,IAAI;;MAGf;MACA,MAAMC,gBAAgB,SAASd,wBAAwB,CAACe,gBAAgB,CAACN,MAAM,CAAC;MAChF,MAAMO,eAAe,SAASpB,uBAAuB,CAACmB,gBAAgB,CAACN,MAAM,CAAC;MAE9E,OAAO,CAACK,gBAAgB,IAAI,CAACE,eAAe;IAAC;EACjD;EAEA;;;EAGAC,cAAcA,CAAA;IAAA,IAAAC,aAAA;IACV,MAAMX,IAAI,GAAGV,SAAS,CAACsB,cAAc,EAAE;IAEvC,MAAMC,gBAAgB,GAAG,CAAAb,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEc,OAAO,EAAE,KAAI,CAAAd,IAAI,aAAJA,IAAI,gBAAAW,aAAA,GAAJX,IAAI,CAAEc,OAAO,EAAE,cAAAH,aAAA,uBAAfA,aAAA,CAAiBI,YAAY,MAAK3B,wBAAwB,CAAC4B,kBAAkB;IAEzH,OAAO;MACHC,KAAK,EAAE,wBAAwB;MAC/BC,IAAI,EAAExB,0CAA0C,CAACyB,SAAS;MAC1DC,KAAK,EAAE,iCAAiC;MACxCC,IAAI,EAAE,oBAAoB;MAC1BxB,QAAQ,EAAEgB,gBAAgB,GAAG,IAAI,CAAChB,QAAQ,GAAG,GAAG,GAAG,IAAI,CAACA;KAC3D;EACL;;SA9CSH,0CAA0C;AAEnC4B,MAAA,CAAAH,SAAS,GAAG,SAAS;;mBAF5BzB,MAA0C;AAAA;;SAA1CA,MAA0C;EAAA6B,OAAA,EAA1C7B,MAA0C,CAAA8B,IAAA;EAAAC,UAAA,EAD7B;AAAM;AAmDhC,OAAO,MAAMC,+BAA+B,GAAGnC,aAAa,CAACG,0CAA0C,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}