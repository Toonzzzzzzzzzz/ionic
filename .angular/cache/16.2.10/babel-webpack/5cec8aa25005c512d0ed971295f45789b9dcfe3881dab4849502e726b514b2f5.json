{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { CoreContentLinksHandlerBase } from '@features/contentlinks/classes/base-handler';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\nimport * as i0 from \"@angular/core\";\n/**\n * Handler to treat links to user profiles.\n */\nexport class CoreUserProfileLinkHandlerService extends CoreContentLinksHandlerBase {\n  constructor() {\n    super(...arguments);\n    this.name = 'CoreUserProfileLinkHandler';\n    // Match user/view.php and user/profile.php but NOT grade/report/user/.\n    this.pattern = /(\\/user\\/view\\.php)|(\\/user\\/profile\\.php)/;\n  }\n  /**\n   * @inheritdoc\n   */\n  getActions(siteIds, url, params) {\n    return [{\n      action: function () {\n        var _ref = _asyncToGenerator(function* (siteId) {\n          let userId = params.id ? parseInt(params.id, 10) : 0;\n          if (!userId) {\n            const site = yield CoreSites.getSite(siteId);\n            userId = site.getUserId();\n          }\n          const pageParams = {\n            courseId: params.course,\n            userId\n          };\n          CoreNavigator.navigateToSitePath('/user', {\n            params: pageParams,\n            siteId\n          });\n        });\n        return function action(_x) {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    }];\n  }\n  /**\n   * @inheritdoc\n   */\n  isEnabled(siteId, url) {\n    return _asyncToGenerator(function* () {\n      return url.indexOf('/grade/report/') === -1;\n    })();\n  }\n}\n_class = CoreUserProfileLinkHandlerService;\n_class.ɵfac = /*@__PURE__*/function () {\n  let ɵCoreUserProfileLinkHandlerService_BaseFactory;\n  return function CoreUserProfileLinkHandlerService_Factory(t) {\n    return (ɵCoreUserProfileLinkHandlerService_BaseFactory || (ɵCoreUserProfileLinkHandlerService_BaseFactory = i0.ɵɵgetInheritedFactory(_class)))(t || _class);\n  };\n}();\n_class.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: _class,\n  factory: _class.ɵfac,\n  providedIn: 'root'\n});\nexport const CoreUserProfileLinkHandler = makeSingleton(CoreUserProfileLinkHandlerService);","map":{"version":3,"names":["CoreContentLinksHandlerBase","CoreNavigator","CoreSites","makeSingleton","CoreUserProfileLinkHandlerService","constructor","name","pattern","getActions","siteIds","url","params","action","_ref","_asyncToGenerator","siteId","userId","id","parseInt","site","getSite","getUserId","pageParams","courseId","course","navigateToSitePath","_x","apply","arguments","isEnabled","indexOf","t","factory","ɵfac","providedIn","CoreUserProfileLinkHandler"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/user/services/handlers/profile-link.ts"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Injectable } from '@angular/core';\n\nimport { CoreContentLinksHandlerBase } from '@features/contentlinks/classes/base-handler';\nimport { CoreContentLinksAction } from '@features/contentlinks/services/contentlinks-delegate';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreSites } from '@services/sites';\nimport { makeSingleton } from '@singletons';\n\n/**\n * Handler to treat links to user profiles.\n */\n@Injectable({ providedIn: 'root' })\nexport class CoreUserProfileLinkHandlerService extends CoreContentLinksHandlerBase {\n\n    name = 'CoreUserProfileLinkHandler';\n    // Match user/view.php and user/profile.php but NOT grade/report/user/.\n    pattern = /(\\/user\\/view\\.php)|(\\/user\\/profile\\.php)/;\n\n    /**\n     * @inheritdoc\n     */\n    getActions(\n        siteIds: string[],\n        url: string,\n        params: Record<string, string>,\n    ): CoreContentLinksAction[] | Promise<CoreContentLinksAction[]> {\n\n        return [{\n            action: async (siteId): Promise<void> => {\n                let userId = params.id ? parseInt(params.id, 10) : 0;\n                if (!userId) {\n                    const site = await CoreSites.getSite(siteId);\n                    userId = site.getUserId();\n                }\n\n                const pageParams = {\n                    courseId: params.course,\n                    userId,\n                };\n\n                CoreNavigator.navigateToSitePath('/user', { params: pageParams, siteId });\n            },\n        }];\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async isEnabled(siteId: string, url: string): Promise<boolean> {\n        return url.indexOf('/grade/report/') === -1;\n    }\n\n}\n\nexport const CoreUserProfileLinkHandler = makeSingleton(CoreUserProfileLinkHandlerService);\n"],"mappings":";;AAgBA,SAASA,2BAA2B,QAAQ,6CAA6C;AAEzF,SAASC,aAAa,QAAQ,qBAAqB;AACnD,SAASC,SAAS,QAAQ,iBAAiB;AAC3C,SAASC,aAAa,QAAQ,aAAa;;AAE3C;;;AAIA,OAAM,MAAOC,iCAAkC,SAAQJ,2BAA2B;EADlFK,YAAA;;IAGI,KAAAC,IAAI,GAAG,4BAA4B;IACnC;IACA,KAAAC,OAAO,GAAG,4CAA4C;;EAEtD;;;EAGAC,UAAUA,CACNC,OAAiB,EACjBC,GAAW,EACXC,MAA8B;IAG9B,OAAO,CAAC;MACJC,MAAM;QAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAE,WAAOC,MAAM,EAAmB;UACpC,IAAIC,MAAM,GAAGL,MAAM,CAACM,EAAE,GAAGC,QAAQ,CAACP,MAAM,CAACM,EAAE,EAAE,EAAE,CAAC,GAAG,CAAC;UACpD,IAAI,CAACD,MAAM,EAAE;YACT,MAAMG,IAAI,SAASjB,SAAS,CAACkB,OAAO,CAACL,MAAM,CAAC;YAC5CC,MAAM,GAAGG,IAAI,CAACE,SAAS,EAAE;;UAG7B,MAAMC,UAAU,GAAG;YACfC,QAAQ,EAAEZ,MAAM,CAACa,MAAM;YACvBR;WACH;UAEDf,aAAa,CAACwB,kBAAkB,CAAC,OAAO,EAAE;YAAEd,MAAM,EAAEW,UAAU;YAAEP;UAAM,CAAE,CAAC;QAC7E,CAAC;QAAA,gBAAAH,OAAAc,EAAA;UAAA,OAAAb,IAAA,CAAAc,KAAA,OAAAC,SAAA;QAAA;MAAA;KACJ,CAAC;EACN;EAEA;;;EAGMC,SAASA,CAACd,MAAc,EAAEL,GAAW;IAAA,OAAAI,iBAAA;MACvC,OAAOJ,GAAG,CAACoB,OAAO,CAAC,gBAAgB,CAAC,KAAK,CAAC,CAAC;IAAC;EAChD;;SAtCS1B,iCAAkC;;;;yIAAlCA,MAAiC,IAAA2B,CAAA,IAAjC3B,MAAiC;EAAA;AAAA;;SAAjCA,MAAiC;EAAA4B,OAAA,EAAjC5B,MAAiC,CAAA6B,IAAA;EAAAC,UAAA,EADpB;AAAM;AA2ChC,OAAO,MAAMC,0BAA0B,GAAGhC,aAAa,CAACC,iCAAiC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}