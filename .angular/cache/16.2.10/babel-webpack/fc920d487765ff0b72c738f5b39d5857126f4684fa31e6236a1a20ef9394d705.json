{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { Md5 } from 'ts-md5';\nimport { CoreBlockBaseComponent } from '@features/block/classes/base-block-component';\nimport { CoreBlockDelegate } from '@features/block/services/block-delegate';\nimport { CoreSitePlugins } from '@features/siteplugins/services/siteplugins';\nimport { CoreNavigator } from '@services/navigator';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"@ngx-translate/core\";\n/**\n * Component to render blocks with only a title and link.\n */\nexport class CoreSitePluginsOnlyTitleBlockComponent extends CoreBlockBaseComponent {\n  constructor() {\n    super('CoreSitePluginsOnlyTitleBlockComponent');\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _superprop_getNgOnInit = () => super.ngOnInit,\n      _this = this;\n    return _asyncToGenerator(function* () {\n      var _this$block$contents;\n      _superprop_getNgOnInit().call(_this);\n      _this.fetchContentDefaultError = 'Error getting ' + (((_this$block$contents = _this.block.contents) === null || _this$block$contents === void 0 ? void 0 : _this$block$contents.title) || 'block') + ' data.';\n    })();\n  }\n  /**\n   * Go to the block page.\n   */\n  gotoBlock() {\n    const handlerName = CoreBlockDelegate.getHandlerName(this.block.name);\n    const handler = CoreSitePlugins.getSitePluginHandler(handlerName);\n    if (!handler) {\n      return;\n    }\n    const args = {\n      contextlevel: this.contextLevel,\n      instanceid: this.instanceId\n    };\n    const hash = Md5.hashAsciiStr(JSON.stringify(args));\n    CoreNavigator.navigateToSitePath(`siteplugins/content/${handler.plugin.component}/${handler.handlerSchema.method}/${hash}`, {\n      params: {\n        title: this.title,\n        args,\n        initResult: handler.initResult,\n        ptrEnabled: handler.handlerSchema.ptrenabled\n      }\n    });\n  }\n}\n_class = CoreSitePluginsOnlyTitleBlockComponent;\n_class.ɵfac = function CoreSitePluginsOnlyTitleBlockComponent_Factory(t) {\n  return new (t || _class)();\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"core-siteplugins-only-title-block\"]],\n  features: [i0.ɵɵInheritDefinitionFeature],\n  decls: 5,\n  vars: 4,\n  consts: [[\"button\", \"\", 1, \"divider\", \"ion-text-wrap\", 3, \"detail\", \"click\"]],\n  template: function CoreSitePluginsOnlyTitleBlockComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-item\", 0);\n      i0.ɵɵlistener(\"click\", function CoreSitePluginsOnlyTitleBlockComponent_Template_ion_item_click_0_listener() {\n        return ctx.gotoBlock();\n      });\n      i0.ɵɵelementStart(1, \"ion-label\")(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"detail\", true);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 2, ctx.title));\n    }\n  },\n  dependencies: [i1.IonItem, i1.IonLabel, i2.TranslatePipe],\n  styles: [\"[_nghost-%COMP%] { display: contents; }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9jb3JlL2ZlYXR1cmVzL3NpdGVwbHVnaW5zL2NvbXBvbmVudHMvb25seS10aXRsZS1ibG9jay9vbmx5LXRpdGxlLWJsb2NrLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFFBQVEsaUJBQWlCLEVBQUUiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7IGRpc3BsYXk6IGNvbnRlbnRzOyB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["Md5","CoreBlockBaseComponent","CoreBlockDelegate","CoreSitePlugins","CoreNavigator","CoreSitePluginsOnlyTitleBlockComponent","constructor","ngOnInit","_superprop_getNgOnInit","_this","_asyncToGenerator","_this$block$contents","call","fetchContentDefaultError","block","contents","title","gotoBlock","handlerName","getHandlerName","name","handler","getSitePluginHandler","args","contextlevel","contextLevel","instanceid","instanceId","hash","hashAsciiStr","JSON","stringify","navigateToSitePath","plugin","component","handlerSchema","method","params","initResult","ptrEnabled","ptrenabled","selectors","features","i0","ɵɵInheritDefinitionFeature","decls","vars","consts","template","CoreSitePluginsOnlyTitleBlockComponent_Template","rf","ctx","ɵɵelementStart","ɵɵlistener","CoreSitePluginsOnlyTitleBlockComponent_Template_ion_item_click_0_listener","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵadvance","ɵɵtextInterpolate","ɵɵpipeBind1"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/siteplugins/components/only-title-block/only-title-block.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/core/features/siteplugins/components/only-title-block/core-siteplugins-only-title-block.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { OnInit, Component } from '@angular/core';\nimport { Md5 } from 'ts-md5';\n\nimport { CoreBlockBaseComponent } from '@features/block/classes/base-block-component';\nimport { CoreBlockDelegate } from '@features/block/services/block-delegate';\nimport { CoreSitePlugins, CoreSitePluginsUserHandlerData } from '@features/siteplugins/services/siteplugins';\nimport { CoreNavigator } from '@services/navigator';\n\n/**\n * Component to render blocks with only a title and link.\n */\n@Component({\n    selector: 'core-siteplugins-only-title-block',\n    templateUrl: 'core-siteplugins-only-title-block.html',\n    styles: [':host { display: contents; }'],\n})\nexport class CoreSitePluginsOnlyTitleBlockComponent extends CoreBlockBaseComponent implements OnInit {\n\n    constructor() {\n        super('CoreSitePluginsOnlyTitleBlockComponent');\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        super.ngOnInit();\n\n        this.fetchContentDefaultError = 'Error getting ' + (this.block.contents?.title || 'block') + ' data.';\n    }\n\n    /**\n     * Go to the block page.\n     */\n    gotoBlock(): void {\n        const handlerName = CoreBlockDelegate.getHandlerName(this.block.name);\n        const handler = CoreSitePlugins.getSitePluginHandler(handlerName);\n\n        if (!handler) {\n            return;\n        }\n\n        const args = {\n            contextlevel: this.contextLevel,\n            instanceid: this.instanceId,\n        };\n        const hash = <string> Md5.hashAsciiStr(JSON.stringify(args));\n\n        CoreNavigator.navigateToSitePath(\n            `siteplugins/content/${handler.plugin.component}/${handler.handlerSchema.method}/${hash}`,\n            {\n                params: {\n                    title: this.title,\n                    args,\n                    initResult: handler.initResult,\n                    ptrEnabled: (<CoreSitePluginsUserHandlerData> handler.handlerSchema).ptrenabled,\n                },\n            },\n        );\n    }\n\n}\n","<ion-item button class=\"divider ion-text-wrap\" [detail]=\"true\" (click)=\"gotoBlock()\">\n    <ion-label>\n        <h2>{{ title | translate }}</h2>\n    </ion-label>\n</ion-item>\n"],"mappings":";;AAeA,SAASA,GAAG,QAAQ,QAAQ;AAE5B,SAASC,sBAAsB,QAAQ,8CAA8C;AACrF,SAASC,iBAAiB,QAAQ,yCAAyC;AAC3E,SAASC,eAAe,QAAwC,4CAA4C;AAC5G,SAASC,aAAa,QAAQ,qBAAqB;;;;AAEnD;;;AAQA,OAAM,MAAOC,sCAAuC,SAAQJ,sBAAsB;EAE9EK,YAAA;IACI,KAAK,CAAC,wCAAwC,CAAC;EACnD;EAEA;;;EAGMC,QAAQA,CAAA;IAAA,IAAAC,sBAAA,GAAAA,CAAA,WAAAD,QAAA;MAAAE,KAAA;IAAA,OAAAC,iBAAA;MAAA,IAAAC,oBAAA;MACVH,sBAAA,GAAAI,IAAA,CAAAH,KAAc,CAAE;MAEhBA,KAAI,CAACI,wBAAwB,GAAG,gBAAgB,IAAI,EAAAF,oBAAA,GAAAF,KAAI,CAACK,KAAK,CAACC,QAAQ,cAAAJ,oBAAA,uBAAnBA,oBAAA,CAAqBK,KAAK,KAAI,OAAO,CAAC,GAAG,QAAQ;IAAC;EAC1G;EAEA;;;EAGAC,SAASA,CAAA;IACL,MAAMC,WAAW,GAAGhB,iBAAiB,CAACiB,cAAc,CAAC,IAAI,CAACL,KAAK,CAACM,IAAI,CAAC;IACrE,MAAMC,OAAO,GAAGlB,eAAe,CAACmB,oBAAoB,CAACJ,WAAW,CAAC;IAEjE,IAAI,CAACG,OAAO,EAAE;MACV;;IAGJ,MAAME,IAAI,GAAG;MACTC,YAAY,EAAE,IAAI,CAACC,YAAY;MAC/BC,UAAU,EAAE,IAAI,CAACC;KACpB;IACD,MAAMC,IAAI,GAAY5B,GAAG,CAAC6B,YAAY,CAACC,IAAI,CAACC,SAAS,CAACR,IAAI,CAAC,CAAC;IAE5DnB,aAAa,CAAC4B,kBAAkB,CAC5B,uBAAuBX,OAAO,CAACY,MAAM,CAACC,SAAS,IAAIb,OAAO,CAACc,aAAa,CAACC,MAAM,IAAIR,IAAI,EAAE,EACzF;MACIS,MAAM,EAAE;QACJrB,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBO,IAAI;QACJe,UAAU,EAAEjB,OAAO,CAACiB,UAAU;QAC9BC,UAAU,EAAoClB,OAAO,CAACc,aAAc,CAACK;;KAE5E,CACJ;EACL;;SA3CSnC,sCAAuC;;mBAAvCA,MAAsC;AAAA;;QAAtCA,MAAsC;EAAAoC,SAAA;EAAAC,QAAA,GAAAC,EAAA,CAAAC,0BAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,gDAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MC9BnDP,EAAA,CAAAS,cAAA,kBAAqF;MAAtBT,EAAA,CAAAU,UAAA,mBAAAC,0EAAA;QAAA,OAASH,GAAA,CAAAlC,SAAA,EAAW;MAAA,EAAC;MAChF0B,EAAA,CAAAS,cAAA,gBAAW;MACHT,EAAA,CAAAY,MAAA,GAAuB;;MAAAZ,EAAA,CAAAa,YAAA,EAAK;;;MAFOb,EAAA,CAAAc,UAAA,gBAAe;MAElDd,EAAA,CAAAe,SAAA,GAAuB;MAAvBf,EAAA,CAAAgB,iBAAA,CAAAhB,EAAA,CAAAiB,WAAA,OAAAT,GAAA,CAAAnC,KAAA,EAAuB"},"metadata":{},"sourceType":"module","externalDependencies":[]}