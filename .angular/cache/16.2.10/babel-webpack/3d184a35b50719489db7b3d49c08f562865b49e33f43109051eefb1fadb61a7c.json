{"ast":null,"code":"import _asyncToGenerator from \"/home/toon/works/gitionic7/ionic-github/ionic/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar _class;\nimport { AddonCalendar, AddonCalendarProvider } from '../../services/calendar';\nimport { AddonCalendarHelper } from '../../services/calendar-helper';\nimport { AddonCalendarOffline } from '../../services/calendar-offline';\nimport { AddonCalendarSync, AddonCalendarSyncProvider } from '../../services/calendar-sync';\nimport { CoreNetwork } from '@services/network';\nimport { CoreEvents } from '@singletons/events';\nimport { CoreDomUtils, ToastDuration } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreSites } from '@services/sites';\nimport { CoreCourse } from '@features/course/services/course';\nimport { CoreTimeUtils } from '@services/utils/time';\nimport { NgZone, Translate } from '@singletons';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreConstants } from '@/core/constants';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCalendarEventsSource } from '@addons/calendar/classes/events-source';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreReminders, CoreRemindersService } from '@features/reminders/services/reminders';\nimport { CoreRemindersSetReminderMenuComponent } from '@features/reminders/components/set-reminder-menu/set-reminder-menu';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../../../../core/components/context-menu/context-menu\";\nimport * as i4 from \"../../../../core/components/context-menu/context-menu-item\";\nimport * as i5 from \"../../../../core/components/loading/loading\";\nimport * as i6 from \"../../../../core/components/mod-icon/mod-icon\";\nimport * as i7 from \"../../../../core/directives/fa-icon\";\nimport * as i8 from \"../../../../core/directives/format-text\";\nimport * as i9 from \"../../../../core/directives/link\";\nimport * as i10 from \"../../../../core/directives/collapsible-header\";\nimport * as i11 from \"../../../../core/directives/swipe-navigation\";\nimport * as i12 from \"../../../../core/directives/content\";\nimport * as i13 from \"../../../../core/directives/update-non-reactive-attributes\";\nimport * as i14 from \"@ionic/angular\";\nimport * as i15 from \"@ngx-translate/core\";\nfunction AddonCalendarEventPage_h1_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"h1\");\n    i0.ɵɵelement(1, \"core-format-text\", 13);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r0.event.name)(\"contextLevel\", ctx_r0.event.contextLevel)(\"contextInstanceId\", ctx_r0.event.contextInstanceId);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_core_mod_icon_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"core-mod-icon\", 27);\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"modicon\", ctx_r3.event.moduleIcon)(\"showAlt\", false)(\"modname\", ctx_r3.event.modulename)(\"componentId\", ctx_r3.event.instance)(\"purpose\", ctx_r3.event.purpose);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_icon_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"ion-icon\", 28);\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"name\", ctx_r4.event.eventIcon);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_span_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"span\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r5.event.iconTitle);\n  }\n}\nconst _c0 = function (a0) {\n  return {\n    $a: a0\n  };\n};\nfunction AddonCalendarEventPage_ion_list_22_ion_card_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\", 29)(1, \"ion-item\");\n    i0.ɵɵelement(2, \"ion-icon\", 30);\n    i0.ɵɵelementStart(3, \"ion-label\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(5, 1, \"core.hasdatatosync\", i0.ɵɵpureFunction1(6, _c0, i0.ɵɵpipeBind1(6, 4, \"addon.calendar.calendarevent\"))));\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_note_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-note\", 4);\n    i0.ɵɵelement(1, \"ion-icon\", 31);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"translate\");\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(3, 1, \"core.deletedoffline\"), \" \");\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_27_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 32)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r8 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"href\", ctx_r8.courseUrl)(\"detail\", true);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 5, \"core.course\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r8.courseName)(\"contextInstanceId\", ctx_r8.courseId);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_28_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 34)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 33);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"core.group\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r9.groupName)(\"contextInstanceId\", ctx_r9.event.courseid);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 20)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 35);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r10 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 3, \"core.category\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r10.categoryPath)(\"contextInstanceId\", ctx_r10.event.categoryid);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_30_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 20)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\");\n    i0.ɵɵelement(6, \"core-format-text\", 13);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r11 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 4, \"core.description\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"text\", ctx_r11.event.description)(\"contextLevel\", ctx_r11.event.contextLevel)(\"contextInstanceId\", ctx_r11.event.contextInstanceId);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_31_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\", 20)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\")(6, \"a\", 36);\n    i0.ɵɵelement(7, \"core-format-text\", 13);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r12 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(4, 5, \"core.location\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"href\", ctx_r12.event.encodedLocation, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"text\", ctx_r12.event.location)(\"contextLevel\", ctx_r12.event.contextLevel)(\"contextInstanceId\", ctx_r12.event.contextInstanceId);\n  }\n}\nfunction AddonCalendarEventPage_ion_list_22_ion_item_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-item\")(1, \"ion-label\")(2, \"ion-button\", 37);\n    i0.ɵɵtext(3);\n    i0.ɵɵpipe(4, \"translate\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const ctx_r13 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"href\", ctx_r13.moduleUrl);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(4, 2, \"addon.calendar.gotoactivity\"), \" \");\n  }\n}\nconst _c1 = function (a0) {\n  return [a0];\n};\nfunction AddonCalendarEventPage_ion_list_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-list\")(1, \"ion-item\", 14);\n    i0.ɵɵtemplate(2, AddonCalendarEventPage_ion_list_22_core_mod_icon_2_Template, 1, 5, \"core-mod-icon\", 15);\n    i0.ɵɵtemplate(3, AddonCalendarEventPage_ion_list_22_ion_icon_3_Template, 1, 1, \"ion-icon\", 16);\n    i0.ɵɵelementStart(4, \"ion-label\")(5, \"span\", 17);\n    i0.ɵɵtext(6);\n    i0.ɵɵpipe(7, \"translate\");\n    i0.ɵɵtemplate(8, AddonCalendarEventPage_ion_list_22_span_8_Template, 2, 1, \"span\", 18);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"h1\");\n    i0.ɵɵelement(10, \"core-format-text\", 13);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(11, AddonCalendarEventPage_ion_list_22_ion_card_11_Template, 7, 8, \"ion-card\", 19);\n    i0.ɵɵelementStart(12, \"ion-item\", 20)(13, \"ion-label\")(14, \"p\", 21);\n    i0.ɵɵtext(15);\n    i0.ɵɵpipe(16, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(17, \"core-format-text\", 22);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(18, AddonCalendarEventPage_ion_list_22_ion_note_18_Template, 4, 3, \"ion-note\", 23);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(19, \"ion-item\")(20, \"ion-label\")(21, \"p\", 21);\n    i0.ɵɵtext(22);\n    i0.ɵɵpipe(23, \"translate\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(24, \"p\");\n    i0.ɵɵtext(25);\n    i0.ɵɵpipe(26, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(27, AddonCalendarEventPage_ion_list_22_ion_item_27_Template, 7, 7, \"ion-item\", 24);\n    i0.ɵɵtemplate(28, AddonCalendarEventPage_ion_list_22_ion_item_28_Template, 7, 5, \"ion-item\", 25);\n    i0.ɵɵtemplate(29, AddonCalendarEventPage_ion_list_22_ion_item_29_Template, 7, 5, \"ion-item\", 26);\n    i0.ɵɵtemplate(30, AddonCalendarEventPage_ion_list_22_ion_item_30_Template, 7, 6, \"ion-item\", 26);\n    i0.ɵɵtemplate(31, AddonCalendarEventPage_ion_list_22_ion_item_31_Template, 8, 7, \"ion-item\", 26);\n    i0.ɵɵtemplate(32, AddonCalendarEventPage_ion_list_22_ion_item_32_Template, 5, 4, \"ion-item\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction1(29, _c1, \"addon-calendar-eventtype-\" + ctx_r1.event.eventtype));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.moduleIcon);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.eventIcon && !ctx_r1.event.moduleIcon);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(7, 21, \"addon.calendar.type\" + ctx_r1.event.formattedType), \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.moduleIcon && ctx_r1.event.iconTitle);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r1.event.name)(\"contextLevel\", ctx_r1.event.contextLevel)(\"contextInstanceId\", ctx_r1.event.contextInstanceId);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.hasOffline || ctx_r1.event.deleted);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(16, 23, \"addon.calendar.when\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"text\", ctx_r1.event.formattedtime)(\"filter\", false);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.deleted);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(23, 25, \"addon.calendar.eventtype\"));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(26, 27, \"addon.calendar.type\" + ctx_r1.event.formattedType));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.courseName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.groupName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.categoryPath);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.description);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.event.location);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.moduleUrl);\n  }\n}\nfunction AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_p_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const reminder_r16 = i0.ɵɵnextContext(2).$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(reminder_r16.sublabel);\n  }\n}\nfunction AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r22 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"ion-item\", 20)(1, \"ion-label\")(2, \"p\", 21);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(4, AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_p_4_Template, 2, 1, \"p\", 3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"ion-button\", 40);\n    i0.ɵɵlistener(\"click\", function AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_Template_ion_button_click_5_listener($event) {\n      i0.ɵɵrestoreView(_r22);\n      const reminder_r16 = i0.ɵɵnextContext().$implicit;\n      const ctx_r20 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r20.deleteReminder(reminder_r16.id, $event));\n    });\n    i0.ɵɵpipe(6, \"translate\");\n    i0.ɵɵelement(7, \"ion-icon\", 41);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const reminder_r16 = i0.ɵɵnextContext().$implicit;\n    const ctx_r17 = i0.ɵɵnextContext(2);\n    i0.ɵɵclassProp(\"item-dimmed\", reminder_r16.timestamp <= ctx_r17.currentTime);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(reminder_r16.label);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", reminder_r16.sublabel);\n    i0.ɵɵadvance(1);\n    i0.ɵɵattribute(\"aria-label\", i0.ɵɵpipeBind1(6, 5, \"core.delete\"));\n  }\n}\nfunction AddonCalendarEventPage_ion_card_23_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_Template, 8, 7, \"ion-item\", 39);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const reminder_r16 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", reminder_r16.timestamp > 0);\n  }\n}\nfunction AddonCalendarEventPage_ion_card_23_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"ion-item\")(2, \"ion-label\")(3, \"ion-button\", 42);\n    i0.ɵɵlistener(\"click\", function AddonCalendarEventPage_ion_card_23_ng_container_7_Template_ion_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r25);\n      const ctx_r24 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r24.addReminder());\n    });\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(5, 1, \"addon.calendar.setnewreminder\"), \" \");\n  }\n}\nfunction AddonCalendarEventPage_ion_card_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"ion-card\")(1, \"ion-item\")(2, \"ion-label\")(3, \"h2\");\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"translate\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵtemplate(6, AddonCalendarEventPage_ion_card_23_ng_container_6_Template, 2, 1, \"ng-container\", 38);\n    i0.ɵɵtemplate(7, AddonCalendarEventPage_ion_card_23_ng_container_7_Template, 6, 3, \"ng-container\", 3);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(5, 3, \"addon.calendar.reminders\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.reminders);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.event.timestart > ctx_r2.currentTime);\n  }\n}\n/**\n * Page that displays a single calendar event.\n */\nexport class AddonCalendarEventPage {\n  constructor(route) {\n    this.route = route;\n    this.eventLoaded = false;\n    this.courseName = '';\n    this.courseUrl = '';\n    this.remindersEnabled = false;\n    this.moduleUrl = '';\n    this.categoryPath = '';\n    this.currentTime = -1;\n    this.reminders = [];\n    this.canEdit = false;\n    this.hasOffline = false;\n    this.isOnline = false;\n    this.syncIcon = CoreConstants.ICON_LOADING; // Sync icon.\n    this.remindersEnabled = CoreReminders.isEnabled();\n    this.siteHomeId = CoreSites.getCurrentSiteHomeId();\n    this.currentSiteId = CoreSites.getCurrentSiteId();\n    // Check if site supports editing. No need to check allowed types, event.canedit already does it.\n    this.canEdit = AddonCalendar.canEditEventsInSite();\n    // Listen for event edited. If current event is edited, reload the data.\n    this.editEventObserver = CoreEvents.on(AddonCalendarProvider.EDIT_EVENT_EVENT, data => {\n      if (data && data.eventId === this.eventId) {\n        this.eventLoaded = false;\n        this.refreshEvent(true, false);\n      }\n    }, this.currentSiteId);\n    // Listen for event created. If user edits the data of a new offline event or it's sent to server, this event is triggered.\n    this.newEventObserver = CoreEvents.on(AddonCalendarProvider.NEW_EVENT_EVENT, data => {\n      if (this.eventId < 0 && data && (data.eventId === this.eventId || data.oldEventId === this.eventId)) {\n        this.eventId = data.eventId;\n        this.eventLoaded = false;\n        this.refreshEvent(true, false);\n      }\n    }, this.currentSiteId);\n    // Refresh data if this calendar event is synchronized automatically.\n    this.syncObserver = CoreEvents.on(AddonCalendarSyncProvider.AUTO_SYNCED, data => this.checkSyncResult(false, data), this.currentSiteId);\n    // Refresh data if calendar events are synchronized manually but not by this page.\n    this.manualSyncObserver = CoreEvents.on(AddonCalendarSyncProvider.MANUAL_SYNCED, data => this.checkSyncResult(true, data), this.currentSiteId);\n    // Refresh online status when changes.\n    this.onlineObserver = CoreNetwork.onChange().subscribe(() => {\n      // Execute the callback in the Angular zone, so change detection doesn't stop working.\n      NgZone.run(() => {\n        this.isOnline = CoreNetwork.isOnline();\n      });\n    });\n    // Reload reminders if default notification time changes.\n    this.defaultTimeChangedObserver = CoreEvents.on(CoreRemindersService.DEFAULT_NOTIFICATION_TIME_CHANGED, () => {\n      this.loadReminders();\n    }, this.currentSiteId);\n    // Set and update current time. Use a 5 seconds error margin.\n    this.currentTime = CoreTimeUtils.timestamp();\n    this.updateCurrentTime = window.setInterval(() => {\n      this.currentTime = CoreTimeUtils.timestamp();\n    }, 5000);\n  }\n  /**\n   * Load reminders.\n   *\n   * @returns Promise resolved when done.\n   */\n  loadReminders() {\n    var _this = this;\n    return _asyncToGenerator(function* () {\n      if (!_this.remindersEnabled || !_this.event) {\n        return;\n      }\n      _this.reminders = yield AddonCalendarHelper.getEventReminders(_this.eventId, _this.event.timestart, _this.currentSiteId);\n    })();\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnInit() {\n    var _this2 = this;\n    return _asyncToGenerator(function* () {\n      try {\n        _this2.eventId = CoreNavigator.getRequiredRouteNumberParam('id');\n      } catch (error) {\n        CoreDomUtils.showErrorModal(error);\n        CoreNavigator.back();\n        return;\n      }\n      _this2.syncIcon = CoreConstants.ICON_LOADING;\n      yield _this2.initializeSwipeManager();\n      yield _this2.fetchEvent();\n    })();\n  }\n  /**\n   * Fetches the event and updates the view.\n   *\n   * @param sync Whether it should try to synchronize offline events.\n   * @param showErrors Whether to show sync errors to the user.\n   * @returns Promise resolved when done.\n   */\n  fetchEvent(sync = false, showErrors = false) {\n    var _this3 = this;\n    return _asyncToGenerator(function* () {\n      _this3.isOnline = CoreNetwork.isOnline();\n      if (sync) {\n        const deleted = yield _this3.syncEvents(showErrors);\n        if (deleted) {\n          return;\n        }\n      }\n      try {\n        // Get the event data.\n        if (_this3.eventId >= 0) {\n          const event = yield AddonCalendar.getEventById(_this3.eventId);\n          _this3.event = yield AddonCalendarHelper.formatEventData(event);\n        }\n        try {\n          const offlineEvent = AddonCalendarHelper.formatOfflineEventData(yield AddonCalendarOffline.getEvent(_this3.eventId));\n          // There is offline data, apply it.\n          _this3.hasOffline = true;\n          _this3.event = Object.assign(_this3.event || {}, offlineEvent);\n        } catch (_unused) {\n          // No offline data.\n          _this3.hasOffline = false;\n          if (_this3.eventId < 0) {\n            // It's an offline event, but it wasn't found. Shouldn't happen.\n            CoreDomUtils.showErrorModal('Event not found.');\n            CoreNavigator.back();\n            return;\n          }\n        }\n        if (!_this3.event) {\n          return; // At this point we should always have the event, adding this check to avoid TS errors.\n        }\n        // Load reminders.\n        _this3.loadReminders();\n        // Reset some of the calculated data.\n        _this3.categoryPath = '';\n        _this3.courseName = '';\n        _this3.courseUrl = '';\n        _this3.moduleUrl = '';\n        if (_this3.event.moduleIcon) {\n          // It's a module event, translate the module name to the current language.\n          const name = CoreCourse.translateModuleName(_this3.event.modulename || '');\n          if (name.indexOf('core.mod_') === -1) {\n            _this3.event.modulename = name;\n          }\n          // Get the module URL.\n          _this3.moduleUrl = _this3.event.url || '';\n        }\n        const promises = [];\n        const event = _this3.event;\n        const courseId = _this3.event.courseid;\n        if (courseId != _this3.siteHomeId) {\n          // If the event belongs to a course, get the course name and the URL to view it.\n          if (_this3.event.course) {\n            _this3.courseId = _this3.event.course.id;\n            _this3.courseName = _this3.event.course.fullname;\n            _this3.courseUrl = _this3.event.course.viewurl;\n          }\n        }\n        // If it's a group event, get the name of the group.\n        if (courseId && _this3.event.groupid) {\n          _this3.groupName = event.groupname;\n        }\n        if (_this3.event.iscategoryevent && _this3.event.category) {\n          _this3.categoryPath = _this3.event.category.nestedname;\n        }\n        if (_this3.event.location) {\n          // Build a link to open the address in maps.\n          _this3.event.location = CoreTextUtils.decodeHTML(_this3.event.location);\n          _this3.event.encodedLocation = CoreTextUtils.buildAddressURL(_this3.event.location);\n        }\n        // Check if event was deleted in offine.\n        promises.push(AddonCalendarOffline.isEventDeleted(_this3.eventId).then(deleted => {\n          event.deleted = deleted;\n          return;\n        }));\n        // Re-calculate the formatted time so it uses the device date.\n        promises.push(AddonCalendar.getCalendarTimeFormat().then( /*#__PURE__*/function () {\n          var _ref = _asyncToGenerator(function* (timeFormat) {\n            event.formattedtime = yield AddonCalendar.formatEventTime(event, timeFormat);\n            return;\n          });\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()));\n        yield Promise.all(promises);\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevent', true);\n      }\n      _this3.eventLoaded = true;\n      _this3.syncIcon = CoreConstants.ICON_SYNC;\n    })();\n  }\n  /**\n   * Initialize swipe manager if enabled.\n   */\n  initializeSwipeManager() {\n    var _this4 = this;\n    return _asyncToGenerator(function* () {\n      const date = CoreNavigator.getRouteParam('date');\n      const source = date && CoreRoutedItemsManagerSourcesTracker.getSource(AddonCalendarEventsSource, [date]);\n      if (!source) {\n        return;\n      }\n      _this4.events = new AddonCalendarEventsSwipeItemsManager(source);\n      yield _this4.events.start();\n    })();\n  }\n  /**\n   * Sync offline events.\n   *\n   * @param showErrors Whether to show sync errors to the user.\n   * @returns Promise resolved with boolean: whether event was deleted on sync.\n   */\n  syncEvents(showErrors = false) {\n    var _this5 = this;\n    return _asyncToGenerator(function* () {\n      let deleted = false;\n      // Try to synchronize offline events.\n      try {\n        const result = yield AddonCalendarSync.syncEvents();\n        if (result.warnings && result.warnings.length) {\n          CoreDomUtils.showAlert(undefined, result.warnings[0]);\n        }\n        if (result.deleted && result.deleted.indexOf(_this5.eventId) != -1) {\n          // This event was deleted during the sync.\n          deleted = true;\n        } else if (_this5.eventId < 0 && result.offlineIdMap[_this5.eventId]) {\n          // Event was created, use the online ID.\n          _this5.eventId = result.offlineIdMap[_this5.eventId];\n        }\n        if (result.updated) {\n          // Trigger a manual sync event.\n          result.source = 'event';\n          CoreEvents.trigger(AddonCalendarSyncProvider.MANUAL_SYNCED, result, _this5.currentSiteId);\n        }\n      } catch (error) {\n        if (showErrors) {\n          CoreDomUtils.showErrorModalDefault(error, 'core.errorsync', true);\n        }\n      }\n      return deleted;\n    })();\n  }\n  /**\n   * Add a reminder for this event.\n   */\n  addReminder() {\n    var _this6 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this6.event || !_this6.event.id) {\n        return;\n      }\n      const reminderTime = yield CoreDomUtils.openPopover({\n        component: CoreRemindersSetReminderMenuComponent,\n        componentProps: {\n          eventTime: _this6.event.timestart\n        }\n        // TODO: Add event to open the popover in place.\n      });\n\n      if (reminderTime === undefined) {\n        // User canceled.\n        return;\n      }\n      yield AddonCalendar.addEventReminder(_this6.event, reminderTime.timeBefore, _this6.currentSiteId);\n      yield _this6.loadReminders();\n    })();\n  }\n  /**\n   * Delete the selected reminder.\n   *\n   * @param id Reminder ID.\n   * @param e Click event.\n   */\n  deleteReminder(id, e) {\n    var _this7 = this;\n    return _asyncToGenerator(function* () {\n      e.preventDefault();\n      e.stopPropagation();\n      try {\n        yield CoreDomUtils.showDeleteConfirm();\n        const modal = yield CoreDomUtils.showModalLoading('core.deleting', true);\n        try {\n          yield CoreReminders.removeReminder(id);\n          yield _this7.loadReminders();\n        } catch (error) {\n          CoreDomUtils.showErrorModalDefault(error, 'Error deleting reminder');\n        } finally {\n          modal.dismiss();\n        }\n      } catch (_unused2) {\n        // Ignore errors.\n      }\n    })();\n  }\n  /**\n   * Refresh the data.\n   *\n   * @param refresher Refresher.\n   * @param done Function to call when done.\n   * @param showErrors Whether to show sync errors to the user.\n   * @returns Promise resolved when done.\n   */\n  doRefresh(refresher, done, showErrors = false) {\n    var _this8 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this8.eventLoaded) {\n        return;\n      }\n      yield _this8.refreshEvent(true, showErrors).finally(() => {\n        refresher === null || refresher === void 0 || refresher.complete();\n        done && done();\n      });\n    })();\n  }\n  /**\n   * Refresh the event.\n   *\n   * @param sync Whether it should try to synchronize offline events.\n   * @param showErrors Whether to show sync errors to the user.\n   * @returns Promise resolved when done.\n   */\n  refreshEvent(sync = false, showErrors = false) {\n    var _this9 = this;\n    return _asyncToGenerator(function* () {\n      _this9.syncIcon = CoreConstants.ICON_LOADING;\n      const promises = [];\n      if (_this9.eventId > 0) {\n        promises.push(AddonCalendar.invalidateEvent(_this9.eventId));\n      }\n      promises.push(AddonCalendar.invalidateTimeFormat());\n      yield CoreUtils.allPromisesIgnoringErrors(promises);\n      yield _this9.fetchEvent(sync, showErrors);\n    })();\n  }\n  /**\n   * Open the page to edit the event.\n   */\n  openEdit() {\n    CoreNavigator.navigateToSitePath(`/calendar/edit/${this.eventId}`);\n  }\n  /**\n   * Delete the event.\n   */\n  deleteEvent() {\n    var _this10 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this10.event) {\n        return;\n      }\n      const title = Translate.instant('addon.calendar.deleteevent');\n      const options = {};\n      let message;\n      if (_this10.event.eventcount > 1) {\n        // It's a repeated event.\n        message = Translate.instant('addon.calendar.confirmeventseriesdelete', {\n          $a: {\n            name: _this10.event.name,\n            count: _this10.event.eventcount\n          }\n        });\n        options.inputs = [{\n          type: 'radio',\n          name: 'deleteall',\n          checked: true,\n          value: false,\n          label: Translate.instant('addon.calendar.deleteoneevent')\n        }, {\n          type: 'radio',\n          name: 'deleteall',\n          checked: false,\n          value: true,\n          label: Translate.instant('addon.calendar.deleteallevents')\n        }];\n      } else {\n        // Not repeated, display a simple confirm.\n        message = Translate.instant('addon.calendar.confirmeventdelete', {\n          $a: _this10.event.name\n        });\n      }\n      let deleteAll = false;\n      try {\n        deleteAll = yield CoreDomUtils.showConfirm(message, title, undefined, undefined, options);\n      } catch (_unused3) {\n        // User canceled.\n        return;\n      }\n      const modal = yield CoreDomUtils.showModalLoading('core.sending', true);\n      try {\n        let onlineEventDeleted = false;\n        if (_this10.event.id < 0) {\n          yield AddonCalendarOffline.deleteEvent(_this10.event.id);\n        } else {\n          onlineEventDeleted = yield AddonCalendar.deleteEvent(_this10.event.id, _this10.event.name, deleteAll);\n        }\n        if (onlineEventDeleted) {\n          // Event deleted, invalidate right days & months.\n          try {\n            yield AddonCalendarHelper.refreshAfterChangeEvent(_this10.event, deleteAll ? _this10.event.eventcount : 1);\n          } catch (_unused4) {\n            // Ignore errors.\n          }\n        }\n        // Trigger an event.\n        if (_this10.event.id < 0) {\n          CoreEvents.trigger(AddonCalendarProvider.NEW_EVENT_DISCARDED_EVENT, {}, CoreSites.getCurrentSiteId());\n        } else {\n          CoreEvents.trigger(AddonCalendarProvider.DELETED_EVENT_EVENT, {\n            eventId: _this10.eventId,\n            sent: onlineEventDeleted\n          }, CoreSites.getCurrentSiteId());\n        }\n        if (onlineEventDeleted || _this10.event.id < 0) {\n          CoreDomUtils.showToast('addon.calendar.eventcalendareventdeleted', true, ToastDuration.LONG);\n          // Event deleted, close the view.\n          CoreNavigator.back();\n        } else {\n          // Event deleted in offline, just mark it as deleted.\n          _this10.event.deleted = true;\n        }\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error deleting event.');\n      }\n      modal.dismiss();\n    })();\n  }\n  /**\n   * Undo delete the event.\n   */\n  undoDelete() {\n    var _this11 = this;\n    return _asyncToGenerator(function* () {\n      if (!_this11.event) {\n        return;\n      }\n      const modal = yield CoreDomUtils.showModalLoading('core.sending', true);\n      try {\n        yield AddonCalendarOffline.unmarkDeleted(_this11.event.id);\n        // Trigger an event.\n        CoreEvents.trigger(AddonCalendarProvider.UNDELETED_EVENT_EVENT, {\n          eventId: _this11.eventId\n        }, CoreSites.getCurrentSiteId());\n        _this11.event.deleted = false;\n      } catch (error) {\n        CoreDomUtils.showErrorModalDefault(error, 'Error undeleting event.');\n      }\n      modal.dismiss();\n    })();\n  }\n  /**\n   * Check the result of an automatic sync or a manual sync not done by this page.\n   *\n   * @param isManual Whether it's a manual sync.\n   * @param data Sync result.\n   */\n  checkSyncResult(isManual, data) {\n    if (!data) {\n      return;\n    }\n    if (data.deleted && data.deleted.indexOf(this.eventId) != -1) {\n      CoreDomUtils.showToast('addon.calendar.eventcalendareventdeleted', true, ToastDuration.LONG);\n      // Event was deleted, close the view.\n      CoreNavigator.back();\n    } else if (data.events && (!isManual || data.source != 'event')) {\n      if (this.eventId < 0) {\n        if (data.offlineIdMap[this.eventId]) {\n          // Event was created, use the online ID.\n          this.eventId = data.offlineIdMap[this.eventId];\n          this.eventLoaded = false;\n          this.refreshEvent();\n        }\n      } else {\n        const event = data.events.find(ev => ev.id == this.eventId);\n        if (event) {\n          this.eventLoaded = false;\n          this.refreshEvent();\n        }\n      }\n    }\n  }\n  /**\n   * @inheritdoc\n   */\n  ngOnDestroy() {\n    var _this$events;\n    this.editEventObserver.off();\n    this.syncObserver.off();\n    this.manualSyncObserver.off();\n    this.onlineObserver.unsubscribe();\n    this.newEventObserver.off();\n    (_this$events = this.events) === null || _this$events === void 0 || _this$events.destroy();\n    clearInterval(this.updateCurrentTime);\n  }\n}\n/**\n * Helper to manage swiping within a collection of events.\n */\n_class = AddonCalendarEventPage;\n_class.ɵfac = function AddonCalendarEventPage_Factory(t) {\n  return new (t || _class)(i0.ɵɵdirectiveInject(i1.ActivatedRoute));\n};\n_class.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: _class,\n  selectors: [[\"page-addon-calendar-event\"]],\n  decls: 24,\n  vars: 34,\n  consts: [[\"collapsible\", \"\"], [\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [\"slot\", \"end\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [\"iconAction\", \"fas-pen\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-trash\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-rotate-left\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [3, \"core-swipe-navigation\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [3, \"text\", \"contextLevel\", \"contextInstanceId\"], [\"collapsible\", \"\", 1, \"ion-text-wrap\", \"addon-calendar-event\", 3, \"ngClass\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\", \"purpose\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\", 4, \"ngIf\"], [1, \"sr-only\"], [\"class\", \"sr-only\", 4, \"ngIf\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [1, \"ion-text-wrap\"], [1, \"item-heading\"], [3, \"text\", \"filter\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\", \"detail\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap core-groupname\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\", \"purpose\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\"], [1, \"core-warning-card\"], [\"name\", \"fas-triangle-exclamation\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"name\", \"fas-trash\", \"aria-hidden\", \"true\"], [\"core-link\", \"\", \"capture\", \"true\", 1, \"ion-text-wrap\", 3, \"href\", \"detail\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [1, \"ion-text-wrap\", \"core-groupname\"], [\"contextLevel\", \"coursecat\", 3, \"text\", \"contextInstanceId\"], [\"core-link\", \"\", \"auto-login\", \"no\", 3, \"href\"], [\"expand\", \"block\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-text-wrap\", 3, \"item-dimmed\", 4, \"ngIf\"], [\"fill\", \"clear\", \"slot\", \"end\", 3, \"click\"], [\"name\", \"fas-trash\", \"color\", \"danger\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 3, \"click\"]],\n  template: function AddonCalendarEventPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\", 0)(1, \"ion-toolbar\")(2, \"ion-buttons\", 1);\n      i0.ɵɵelement(3, \"ion-back-button\", 2);\n      i0.ɵɵpipe(4, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"ion-title\");\n      i0.ɵɵtemplate(6, AddonCalendarEventPage_h1_6_Template, 2, 3, \"h1\", 3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"ion-buttons\", 4)(8, \"core-context-menu\")(9, \"core-context-menu-item\", 5);\n      i0.ɵɵlistener(\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener($event) {\n        return ctx.doRefresh(undefined, $event, true);\n      });\n      i0.ɵɵpipe(10, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"core-context-menu-item\", 6);\n      i0.ɵɵlistener(\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener() {\n        return ctx.openEdit();\n      });\n      i0.ɵɵpipe(12, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"core-context-menu-item\", 7);\n      i0.ɵɵlistener(\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener() {\n        return ctx.deleteEvent();\n      });\n      i0.ɵɵpipe(14, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(15, \"core-context-menu-item\", 8);\n      i0.ɵɵlistener(\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener() {\n        return ctx.undoDelete();\n      });\n      i0.ɵɵpipe(16, \"translate\");\n      i0.ɵɵelementEnd()()()()();\n      i0.ɵɵelementStart(17, \"ion-content\", 9)(18, \"ion-refresher\", 10);\n      i0.ɵɵlistener(\"ionRefresh\", function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener($event) {\n        return ctx.doRefresh($event.target);\n      });\n      i0.ɵɵelement(19, \"ion-refresher-content\", 11);\n      i0.ɵɵpipe(20, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(21, \"core-loading\", 12);\n      i0.ɵɵtemplate(22, AddonCalendarEventPage_ion_list_22_Template, 33, 31, \"ion-list\", 3);\n      i0.ɵɵtemplate(23, AddonCalendarEventPage_ion_card_23_Template, 8, 5, \"ion-card\", 3);\n      i0.ɵɵelementEnd()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"text\", i0.ɵɵpipeBind1(4, 22, \"core.back\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.event);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"hidden\", !ctx.eventLoaded || !ctx.hasOffline && ctx.event && !ctx.event.deleted || !ctx.isOnline)(\"priority\", 400)(\"content\", i0.ɵɵpipeBind1(10, 24, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.event || !ctx.event.canedit || ctx.event.deleted || !ctx.canEdit && ctx.event.id > 0)(\"priority\", 300)(\"content\", i0.ɵɵpipeBind1(12, 26, \"core.edit\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.event || !ctx.event.candelete || ctx.event.deleted)(\"priority\", 200)(\"content\", i0.ɵɵpipeBind1(14, 28, \"core.delete\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hidden\", !ctx.event || !ctx.event.deleted)(\"priority\", 200)(\"content\", i0.ɵɵpipeBind1(16, 30, \"core.restore\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"core-swipe-navigation\", ctx.events);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", !ctx.eventLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵpropertyInterpolate(\"pullingText\", i0.ɵɵpipeBind1(20, 32, \"core.pulltorefresh\"));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"hideUntil\", ctx.eventLoaded);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.event);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.remindersEnabled && ctx.event);\n    }\n  },\n  dependencies: [i2.NgClass, i2.NgForOf, i2.NgIf, i3.CoreContextMenuComponent, i4.CoreContextMenuItemComponent, i5.CoreLoadingComponent, i6.CoreModIconComponent, i7.CoreFaIconDirective, i8.CoreFormatTextDirective, i9.CoreLinkDirective, i10.CoreCollapsibleHeaderDirective, i11.CoreSwipeNavigationDirective, i12.CoreContentDirective, i13.CoreUpdateNonReactiveAttributesDirective, i14.IonButton, i14.IonButtons, i14.IonCard, i14.IonContent, i14.IonHeader, i14.IonIcon, i14.IonItem, i14.IonLabel, i14.IonList, i14.IonNote, i14.IonRefresher, i14.IonRefresherContent, i14.IonTitle, i14.IonToolbar, i14.IonBackButton, i15.TranslatePipe],\n  styles: [\"\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n\\n[_nghost-%COMP%] {\\n  --addon-calendar-blank-day-background-color: var(--light);\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  color: white;\\n  border-radius: 50%;\\n  padding: 0.7rem;\\n  --margin-vertical: 12px;\\n  --margin-end: 12px;\\n  margin-top: var(--margin-vertical);\\n  margin-bottom: var(--margin-vertical);\\n  -webkit-margin-end: var(--margin-end);\\n  margin-inline-end: var(--margin-end);\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  background-color: #8e24aa;\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  background-color: #ca3120;\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  background-color: #f0ad4e;\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  background-color: #0f6cbf;\\n}\\n[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%]    > ion-icon[_ngcontent-%COMP%] {\\n  background-color: #357a32;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvdGhlbWUvaGVscGVycy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2lvbmljLm1peGlucy5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2hlbHBlcnMvaW9uaWMuY29tcG9uZW50cy5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9oZWxwZXJzL2N1c3RvbS5taXhpbnMuc2NzcyIsIndlYnBhY2s6Ly8uL3NyYy90aGVtZS9nbG9iYWxzLmN1c3RvbS5zY3NzIiwid2VicGFjazovLy4vc3JjL3RoZW1lL2dsb2JhbHMudmFyaWFibGVzLnNjc3MiLCJ3ZWJwYWNrOi8vLi9zcmMvYWRkb25zL2NhbGVuZGFyL2NhbGVuZGFyLWNvbW1vbi5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7O0VBQUE7QUNBQTs7Ozs7RUFBQTtBQ0FBOzs7OztFQUFBO0FDQUE7Ozs7O0VBQUE7QUNBQTs7Ozs7O0VBQUE7QUNFQTs7OztFQUFBO0FBNEdBOztFQUFBO0FDOUdBOzs7O0VBQUE7QUNBQTs7OztFQUFBO0FBK0RBOzs7O0VBQUE7QUM3REE7RUFFSSx5REFBQTtBQW1ESjtBQWhEUTtFQUNJLFlBQUE7RUFDQSxrQkFBQTtFQUNBLGVBQUE7RUFDQSx1QkFBQTtFQUNBLGtCQUFBO0VBQ0Esa0NBQUE7RUFDQSxxQ0FBQTtFTHlTUixxQ0t4U3lDO0VMeVN6QyxvQ0t6U3lDO0FBbUQ3QztBQTlDWTtFQUNJLHlCRGdIaUI7QUNoRWpDO0FBakRZO0VBQ0kseUJEZ0hpQjtBQzdEakM7QUFwRFk7RUFDSSx5QkRnSGlCO0FDMURqQztBQXZEWTtFQUNJLHlCRGdIaUI7QUN2RGpDO0FBMURZO0VBQ0kseUJEZ0hpQjtBQ3BEakMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEFwcCBHbG9iYWwgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgdGhlIGRpZmZlcmVudCBmaWxlcyB5b3Ugc2hvdWxkIGltcG9ydCB0byB1c2UgZ2xvYmFsIHZhcmlhYmxlcy5cbiAqL1xuXG4kZm9udC1wYXRoOiBcIi4uL2Fzc2V0cy9mb250c1wiO1xuJGFzc2V0cy1wYXRoOiBcIi4uL2Fzc2V0c1wiO1xuXG5AaW1wb3J0IFwiLi9oZWxwZXJzL2hlbHBlcnMuc2Nzc1wiO1xuQGltcG9ydCBcIi4vZ2xvYmFscy5jdXN0b20uc2Nzc1wiO1xuQGltcG9ydCBcIi4vZ2xvYmFscy52YXJpYWJsZXMuc2Nzc1wiO1xuIiwiLyoqXG4gKiBJbXBvcnRlZCBpb25pYyBzdHJpbmcgZnVuY3Rpb25zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5mdW5jdGlvbnMuc3RyaW5nLnNjc3NcbiAqL1xuXG5cbi8vIFN0cmluZyBVdGlsaXR5IEZ1bmN0aW9uc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuLy8gU3RyaW5nIFJlcGxhY2UgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItcmVwbGFjZSgkc3RyaW5nLCAkc2VhcmNoLCAkcmVwbGFjZTogXCJcIikge1xuICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VhcmNoKTtcblxuICBAaWYgJGluZGV4IHtcbiAgICBAcmV0dXJuIHN0ci1zbGljZSgkc3RyaW5nLCAxLCAkaW5kZXggLSAxKSArICRyZXBsYWNlICsgc3RyLXJlcGxhY2Uoc3RyLXNsaWNlKCRzdHJpbmcsICRpbmRleCArIHN0ci1sZW5ndGgoJHNlYXJjaCkpLCAkc2VhcmNoLCAkcmVwbGFjZSk7XG4gIH1cblxuICBAcmV0dXJuICRzdHJpbmc7XG59XG5cbi8vIFN0cmluZyBTcGxpdCBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG5AZnVuY3Rpb24gc3RyLXNwbGl0KCRzdHJpbmcsICRzZXBhcmF0b3IpIHtcbiAgLy8gZW1wdHkgYXJyYXkvbGlzdFxuICAkc3BsaXQtYXJyOiAoKTtcbiAgLy8gZmlyc3QgaW5kZXggb2Ygc2VwYXJhdG9yIGluIHN0cmluZ1xuICAkaW5kZXg6IHN0ci1pbmRleCgkc3RyaW5nLCAkc2VwYXJhdG9yKTtcbiAgLy8gbG9vcCB0aHJvdWdoIHN0cmluZ1xuICBAd2hpbGUgJGluZGV4ICE9IG51bGwge1xuICAgIC8vIGdldCB0aGUgc3Vic3RyaW5nIGZyb20gdGhlIGZpcnN0IGNoYXJhY3RlciB0byB0aGUgc2VwYXJhdG9yXG4gICAgJGl0ZW06IHN0ci1zbGljZSgkc3RyaW5nLCAxLCAkaW5kZXggLSAxKTtcbiAgICAvLyBwdXNoIGl0ZW0gdG8gYXJyYXlcbiAgICAkc3BsaXQtYXJyOiBhcHBlbmQoJHNwbGl0LWFyciwgJGl0ZW0pO1xuICAgIC8vIHJlbW92ZSBpdGVtIGFuZCBzZXBhcmF0b3IgZnJvbSBzdHJpbmdcbiAgICAkc3RyaW5nOiBzdHItc2xpY2UoJHN0cmluZywgJGluZGV4ICsgMSk7XG4gICAgLy8gZmluZCBuZXcgaW5kZXggb2Ygc2VwYXJhdG9yXG4gICAgJGluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHNlcGFyYXRvcik7XG4gIH1cbiAgLy8gYWRkIHRoZSByZW1haW5pbmcgc3RyaW5nIHRvIGxpc3QgKHRoZSBsYXN0IGl0ZW0pXG4gICRzcGxpdC1hcnI6IGFwcGVuZCgkc3BsaXQtYXJyLCAkc3RyaW5nKTtcblxuICBAcmV0dXJuICRzcGxpdC1hcnI7XG59XG5cblxuLy8gU3RyaW5nIEV4dHJhY3QgRnVuY3Rpb25cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBmdW5jdGlvbiBzdHItZXh0cmFjdCgkc3RyaW5nLCAkc3RhcnQsICRlbmQpIHtcbiAgJHN0YXJ0LWluZGV4OiBzdHItaW5kZXgoJHN0cmluZywgJHN0YXJ0KTtcblxuICBAaWYgJHN0YXJ0LWluZGV4IHtcbiAgICAkcG9zdDogc3RyLXNsaWNlKCRzdHJpbmcsICRzdGFydC1pbmRleCArIHN0ci1sZW5ndGgoJHN0YXJ0KSk7XG4gICAgJGVuZC1pbmRleDogc3RyLWluZGV4KCRwb3N0LCAkZW5kKTtcblxuICAgIEBpZiAkZW5kLWluZGV4IHtcbiAgICAgIEByZXR1cm4gc3RyLXNsaWNlKCRwb3N0LCAxLCAkZW5kLWluZGV4IC0gMSk7XG4gICAgfVxuICB9XG5cbiAgQHJldHVybiBudWxsO1xufVxuXG5cbi8vIFN0cmluZyBDb250YWlucyBGdW5jdGlvblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIHN0ci1jb250YWlucygkc3RyaW5nLCAkbmVlZGxlKSB7XG4gIEBpZiAodHlwZS1vZigkc3RyaW5nKSA9PSBzdHJpbmcpIHtcbiAgICBAcmV0dXJuIHN0ci1pbmRleCgkc3RyaW5nLCAkbmVlZGxlKSAhPSBudWxsO1xuICB9XG5cbiAgQHJldHVybiBmYWxzZTtcbn1cblxuXG4vLyBVUkwgRW5jb2RlIEZ1bmN0aW9uXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AZnVuY3Rpb24gdXJsLWVuY29kZSgkdmFsKSB7XG4gICRzcGFjZXM6IHN0ci1yZXBsYWNlKCR2YWwsIFwiIFwiLCBcIiUyMFwiKTtcbiAgJGVuY29kZWQ6IHN0ci1yZXBsYWNlKCRzcGFjZXMsIFwiI1wiLCBcIiUyM1wiKTtcbiAgQHJldHVybiAkZW5jb2RlZDtcbn1cblxuXG4vLyBBZGQgUm9vdCBTZWxlY3RvclxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbi8vIEFkZHMgYSByb290IHNlbGVjdG9yIHVzaW5nIGhvc3QgYmFzZWQgb24gdGhlIHNlbGVjdG9yIHBhc3NlZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQGZ1bmN0aW9uIGFkZC1yb290LXNlbGVjdG9yKCRyb290LCAkYWRkSG9zdFNlbGVjdG9yKSB7XG4gICRzZWxlY3RvcnM6IHN0ci1zcGxpdCgkcm9vdCwgXCIsXCIpO1xuXG4gICRsaXN0OiAoKTtcblxuICBAZWFjaCAkc2VsZWN0b3IgaW4gJHNlbGVjdG9ycyB7XG4gICAgLy8gSWYgdGhlIHNlbGVjdG9yIGNvbnRhaW5zIDpob3N0KCBpdCBtZWFucyBpdCBpcyB0YXJnZXRpbmcgYSBjbGFzcyBvbiB0aGUgaG9zdFxuICAgIC8vIGVsZW1lbnQgc28gd2UgbmVlZCB0byBjaGFuZ2UgaG93IHdlIHRhcmdldCBpdDpcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKVxuICAgIC8vIC0tPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICBAaWYgc3RyLWNvbnRhaW5zKCRzZWxlY3RvciwgXCI6aG9zdChcIikge1xuICAgICAgLy8gQGluY2x1ZGUgYWRkLXJvb3Qtc2VsZWN0b3IoXCI6aG9zdCguZml4ZWQpXCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKVxuICAgICAgJHNoYWRvdy1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2VsZWN0b3IsIFwiOmhvc3QoXCIsIFwiOmhvc3QtY29udGV4dCgjeyRhZGRIb3N0U2VsZWN0b3J9KTpob3N0KFwiKTtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRzaGFkb3ctZWxlbWVudCwgY29tbWEpO1xuXG4gICAgICAkbmV3LWVsZW1lbnQ6ICgpO1xuICAgICAgJGVsZW1lbnRzOiBzdHItc3BsaXQoJHNlbGVjdG9yLCBcIiBcIik7XG5cbiAgICAgIEBlYWNoICRlbGVtZW50IGluICRlbGVtZW50cyB7XG4gICAgICAgIEBpZiBzdHItY29udGFpbnMoJGVsZW1lbnQsIFwiOmhvc3QoXCIpIHtcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6ICRlbGVtZW50O1xuXG4gICAgICAgICAgLy8gUmVwbGFjZSB0aGUgOmhvc3QoIGFuZCApIHNvIGFsbCB3ZSBoYXZlIGxlZnQgaXMgdGhlIGNsYXNzXG4gICAgICAgICAgLy8gaW5zaWRlIG9mIGl0OlxuICAgICAgICAgIC8vIDpob3N0KC5maXhlZCkgLT4gLmZpeGVkXG4gICAgICAgICAgJHNjb3BlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkc2NvcGVkLWVsZW1lbnQsIFwiKVwiLCBcIlwiKTtcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgXCI6aG9zdChcIiwgXCJcIik7XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGNsYXNzIGJhY2sgaW5zaWRlIG9mIGhvc3Qgd2l0aCB0aGUgcnRsIHNlbGVjdG9yOlxuICAgICAgICAgIC8vIC5maXhlZCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkuZml4ZWRcbiAgICAgICAgICAkc2NvcGVkLWVsZW1lbnQ6IHN0ci1yZXBsYWNlKCRzY29wZWQtZWxlbWVudCwgJHNjb3BlZC1lbGVtZW50LCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSkjeyRzY29wZWQtZWxlbWVudH1cIik7XG5cbiAgICAgICAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0KC5maXhlZClcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pLmZpeGVkXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkc2NvcGVkLWVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfSBAZWxzZSB7XG4gICAgICAgICAgLy8gQWRkIGJhY2sgYW55IHNlbGVjdG9ycyB0aGF0IGZvbGxvd2VkIHRoZSBob3N0IGFmdGVyIHRyYW5zZm9ybWluZyB0aGVcbiAgICAgICAgICAvLyBmaXJzdCBzZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCguZml4ZWQpIDo6c2xvdHRlZChpb24taWNvbilcbiAgICAgICAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pOmhvc3QoLmZpeGVkKSA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKS5maXhlZCA6OnNsb3R0ZWQoaW9uLWljb24pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkZWxlbWVudCwgc3BhY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsICRuZXctZWxlbWVudCwgY29tbWEpO1xuICAgIC8vIElmIHRoZSBzZWxlY3RvciBjb250YWlucyA6aG9zdCB3aXRob3V0IGEgcGFyYW50aGVzZXNcbiAgICAvLyBpdCBtZWFucyBpdCBpcyB0YXJnZXRpbmcganVzdCB0aGUgaG9zdFxuICAgIC8vIGVsZW1lbnQgc28gd2UgY2FuIGNoYW5nZSBpdCB0byBsb29rIGZvciBob3N0LWNvbnRleHRcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcIjpob3N0XCIsIFwiW2Rpcj1ydGxdXCIpXG4gICAgLy8gLS0+IDpob3N0LWNvbnRleHQoW2Rpcj1ydGxdKVxuICAgIC8vIC0tPiA6aG9zdDpkaXIocnRsKVxuICAgIH0gQGVsc2UgaWYgc3RyLWNvbnRhaW5zKCRzZWxlY3RvciwgXCI6aG9zdFwiKSB7XG4gICAgICAkbmV3LWVsZW1lbnQ6ICgpO1xuICAgICAgJGVsZW1lbnRzOiBzdHItc3BsaXQoJHNlbGVjdG9yLCBcIiBcIik7XG5cbiAgICAgIEBlYWNoICRlbGVtZW50IGluICRlbGVtZW50cyB7XG4gICAgICAgIEBpZiBzdHItY29udGFpbnMoJGVsZW1lbnQsIFwiOmhvc3RcIikge1xuICAgICAgICAgIC8vIFJlcGxhY2UgdGhlIDpob3N0IHdpdGggdGhlIGFkZEhvc3RTZWxlY3RvcjpcbiAgICAgICAgICAvLyA6aG9zdCAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSlcbiAgICAgICAgICAkdXBkYXRlZC1lbGVtZW50OiBzdHItcmVwbGFjZSgkZWxlbWVudCwgXCI6aG9zdFwiLCBcIjpob3N0LWNvbnRleHQoI3skYWRkSG9zdFNlbGVjdG9yfSlcIik7XG5cbiAgICAgICAgICAvLyBBZGQgdGhlIGZpbmFsIHNlbGVjdG9yIGFmdGVyIGFsbCB0cmFuc2Zvcm1hdGlvbnM6XG4gICAgICAgICAgLy8gOmhvc3QgLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pXG4gICAgICAgICAgJG5ldy1lbGVtZW50OiBhcHBlbmQoJG5ldy1lbGVtZW50LCAkdXBkYXRlZC1lbGVtZW50LCBzcGFjZSk7XG4gICAgICAgIH0gQGVsc2Uge1xuICAgICAgICAgIC8vIEFkZCBiYWNrIGFueSBzZWxlY3RvcnMgdGhhdCBmb2xsb3dlZCB0aGUgaG9zdCBhZnRlciB0cmFuc2Zvcm1pbmcgdGhlXG4gICAgICAgICAgLy8gZmlyc3Qgc2VsZWN0b3I6XG4gICAgICAgICAgLy8gOmhvc3QgOjpzbG90dGVkKGlvbi1pY29uKSAtPiA6aG9zdC1jb250ZXh0KFtkaXI9cnRsXSkgOjpzbG90dGVkKGlvbi1pY29uKVxuICAgICAgICAgICRuZXctZWxlbWVudDogYXBwZW5kKCRuZXctZWxlbWVudCwgJGVsZW1lbnQsIHNwYWNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAkbGlzdDogYXBwZW5kKCRsaXN0LCAkbmV3LWVsZW1lbnQsIGNvbW1hKTtcbiAgICAvLyBJZiB0aGUgc2VsZWN0b3IgZG9lcyBub3QgY29udGFpbiBob3N0IGF0IGFsbCBpdCBpcyBlaXRoZXIgYSBzaGFkb3dcbiAgICAvLyBvciBub3JtYWwgZWxlbWVudCBzbyBhcHBlbmQgYm90aCB0aGUgYWRkSG9zdFNlbGVjdG9yIGFuZCBob3N0LWNvbnRleHRcbiAgICAvLyBAaW5jbHVkZSBhZGQtcm9vdC1zZWxlY3RvcihcImlvbi1jb21wb25lbnRcIiwgXCJbZGlyPXJ0bF1cIilcbiAgICAvLyAtLT4gOmhvc3QtY29udGV4dChbZGlyPXJ0bF0pIGlvbi1jb21wb25lbnRcbiAgICAvLyAtLT4gW2Rpcj1ydGxdIGlvbi1jb21wb25lbnRcbiAgICB9IEBlbHNlIHtcbiAgICAgICRsaXN0OiBhcHBlbmQoJGxpc3QsIFwiI3skYWRkSG9zdFNlbGVjdG9yfSAjeyRzZWxlY3Rvcn1cIiwgY29tbWEpO1xuICAgICAgJGxpc3Q6IGFwcGVuZCgkbGlzdCwgXCI6aG9zdC1jb250ZXh0KCN7JGFkZEhvc3RTZWxlY3Rvcn0pICN7JHNlbGVjdG9yfVwiLCBjb21tYSk7XG4gICAgfVxuICB9XG5cbiAgQHJldHVybiAkbGlzdDtcbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgY29sb3IgZnVuY3Rpb25zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5mdW5jdGlvbnMuY29sb3Iuc2Nzc1xuICovXG5cbi8vIEdldHMgdGhlIGFjdGl2ZSBjb2xvcidzIGNzcyB2YXJpYWJsZSBmcm9tIGEgdmFyaWF0aW9uLiBBbHBoYSBpcyBvcHRpb25hbC5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBFeGFtcGxlIHVzYWdlOlxuLy8gY3VycmVudC1jb2xvcihiYXNlKSA9PiB2YXIoLS1pb24tY29sb3ItYmFzZSlcbi8vIGN1cnJlbnQtY29sb3IoY29udHJhc3QsIDAuMSkgPT4gcmdiYSh2YXIoLS1pb24tY29sb3ItY29udHJhc3QtcmdiKSwgMC4xKVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBjdXJyZW50LWNvbG9yKCR2YXJpYXRpb24sICRhbHBoYTogbnVsbCkge1xuICBAaWYgJGFscGhhID09IG51bGwge1xuICAgIEByZXR1cm4gdmFyKC0taW9uLWNvbG9yLSN7JHZhcmlhdGlvbn0pO1xuICB9IEBlbHNlIHtcbiAgICBAcmV0dXJuIHJnYmEodmFyKC0taW9uLWNvbG9yLSN7JHZhcmlhdGlvbn0tcmdiKSwgI3skYWxwaGF9KTtcbiAgfVxufVxuXG4vLyBHZXRzIHRoZSBzcGVjaWZpYyBjb2xvcidzIGNzcyB2YXJpYWJsZSBmcm9tIHRoZSBuYW1lIGFuZCB2YXJpYXRpb24uIEFscGhhL3JnYiBhcmUgb3B0aW9uYWwuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuLy8gRXhhbXBsZSB1c2FnZTpcbi8vIGlvbi1jb2xvcihwcmltYXJ5LCBiYXNlKSA9PiB2YXIoLS1pb24tY29sb3ItcHJpbWFyeSwgIzM4ODBmZilcbi8vIGlvbi1jb2xvcihzZWNvbmRhcnksIGNvbnRyYXN0KSA9PiB2YXIoLS1pb24tY29sb3Itc2Vjb25kYXJ5LWNvbnRyYXN0KVxuLy8gaW9uLWNvbG9yKHByaW1hcnksIGJhc2UsIDAuNSkgPT4gcmdiYSh2YXIoLS1pb24tY29sb3ItcHJpbWFyeS1yZ2IsIDU2LCAxMjgsIDI1NSksIDAuNSlcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gaW9uLWNvbG9yKCRuYW1lLCAkdmFyaWF0aW9uLCAkYWxwaGE6IG51bGwsICRyZ2I6IG51bGwpIHtcbiAgJHZhbHVlczogbWFwLWdldCgkY29sb3JzLCAkbmFtZSk7XG4gICR2YWx1ZTogbWFwLWdldCgkdmFsdWVzLCAkdmFyaWF0aW9uKTtcbiAgJHZhcmlhYmxlOiAtLWlvbi1jb2xvci0jeyRuYW1lfS0jeyR2YXJpYXRpb259O1xuXG4gIEBpZiAoJHZhcmlhdGlvbiA9PSBiYXNlKSB7XG4gICAgJHZhcmlhYmxlOiAtLWlvbi1jb2xvci0jeyRuYW1lfTtcbiAgfVxuXG4gIEBpZiAoJGFscGhhKSB7XG4gICAgJHZhbHVlOiBjb2xvci10by1yZ2ItbGlzdCgkdmFsdWUpO1xuICAgIEByZXR1cm4gcmdiYSh2YXIoI3skdmFyaWFibGV9LXJnYiwgJHZhbHVlKSwgJGFscGhhKTtcbiAgfVxuICBAaWYgKCRyZ2IpIHtcbiAgICAkdmFsdWU6IGNvbG9yLXRvLXJnYi1saXN0KCR2YWx1ZSk7XG4gICAgJHZhcmlhYmxlOiAjeyR2YXJpYWJsZX0tcmdiO1xuICB9XG5cbiAgQHJldHVybiB2YXIoI3skdmFyaWFibGV9LCAkdmFsdWUpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggYmxhY2sgdG8gY3JlYXRlIGl0cyBzaGFkZS5cbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AZnVuY3Rpb24gZ2V0LWNvbG9yLXNoYWRlKCRjb2xvcikge1xuICBAcmV0dXJuIG1peCgjMDAwLCAkY29sb3IsIDEyJSk7XG59XG5cbi8vIE1peGVzIGEgY29sb3Igd2l0aCB3aGl0ZSB0byBjcmVhdGUgaXRzIHRpbnQuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci10aW50KCRjb2xvcikge1xuICBAcmV0dXJuIG1peCgjZmZmLCAkY29sb3IsIDEwJSk7XG59XG5cbi8vIENvbnZlcnRzIGEgY29sb3IgdG8gYSBjb21tYSBzZXBhcmF0ZWQgcmdiLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBjb2xvci10by1yZ2ItbGlzdCgkY29sb3IpIHtcbiAgQHJldHVybiAje3JlZCgkY29sb3IpfSwje2dyZWVuKCRjb2xvcil9LCN7Ymx1ZSgkY29sb3IpfTtcbn1cbiIsIi8qKlxuICogSW1wb3J0ZWQgaW9uaWMgbWl4aW5zIGZvciBTQ1NTXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL3RoZW1lcy9pb25pYy5taXhpbnMuc2Nzc1xuICovXG5cbkBtaXhpbiBpbnB1dC1jb3ZlcigpIHtcbiAgQGluY2x1ZGUgcG9zaXRpb24oMCwgbnVsbCwgbnVsbCwgMCk7XG4gIEBpbmNsdWRlIG1hcmdpbigwKTtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgd2lkdGg6IDEwMCU7XG4gIGhlaWdodDogMTAwJTtcblxuICBib3JkZXI6IDA7XG4gIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xuICBjdXJzb3I6IHBvaW50ZXI7XG5cbiAgYXBwZWFyYW5jZTogbm9uZTtcbiAgb3V0bGluZTogbm9uZTtcblxuICAmOjotbW96LWZvY3VzLWlubmVyIHtcbiAgICBib3JkZXI6IDA7XG4gIH1cbn1cblxuQG1peGluIHZpc3VhbGx5LWhpZGRlbigpIHtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuXG4gIHRvcDogMDtcbiAgbGVmdDogMDtcbiAgcmlnaHQ6IDA7XG4gIGJvdHRvbTogMDtcblxuICB3aWR0aDogMTAwJTtcbiAgaGVpZ2h0OiAxMDAlO1xuXG4gIG1hcmdpbjogMDtcbiAgcGFkZGluZzogMDtcblxuICBib3JkZXI6IDA7XG4gIG91dGxpbmU6IDA7XG4gIGNsaXA6IHJlY3QoMCAwIDAgMCk7XG5cbiAgb3BhY2l0eTogMDtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcblxuICAtd2Via2l0LWFwcGVhcmFuY2U6IG5vbmU7XG4gIC1tb3otYXBwZWFyYW5jZTogbm9uZTtcbn1cblxuQG1peGluIHRleHQtaW5oZXJpdCgpIHtcbiAgZm9udC1mYW1pbHk6IGluaGVyaXQ7XG4gIGZvbnQtc2l6ZTogaW5oZXJpdDtcbiAgZm9udC1zdHlsZTogaW5oZXJpdDtcbiAgZm9udC13ZWlnaHQ6IGluaGVyaXQ7XG4gIGxldHRlci1zcGFjaW5nOiBpbmhlcml0O1xuICB0ZXh0LWRlY29yYXRpb246IGluaGVyaXQ7XG4gIHRleHQtaW5kZW50OiBpbmhlcml0O1xuICB0ZXh0LW92ZXJmbG93OiBpbmhlcml0O1xuICB0ZXh0LXRyYW5zZm9ybTogaW5oZXJpdDtcbiAgdGV4dC1hbGlnbjogaW5oZXJpdDtcbiAgd2hpdGUtc3BhY2U6IGluaGVyaXQ7XG4gIGNvbG9yOiBpbmhlcml0O1xufVxuXG5AbWl4aW4gYnV0dG9uLXN0YXRlKCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbigwLCAwLCAwLCAwKTtcblxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG5cbiAgY29udGVudDogXCJcIjtcblxuICBvcGFjaXR5OiAwO1xufVxuXG4vLyBGb250IHNtb290aGluZ1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIGZvbnQtc21vb3RoaW5nKCkge1xuICAtbW96LW9zeC1mb250LXNtb290aGluZzogZ3JheXNjYWxlO1xuICAtd2Via2l0LWZvbnQtc21vb3RoaW5nOiBhbnRpYWxpYXNlZDtcbn1cblxuLy8gR2V0IHRoZSBrZXkgZnJvbSBhIG1hcCBiYXNlZCBvbiB0aGUgaW5kZXhcbkBmdW5jdGlvbiBpbmRleC10by1rZXkoJG1hcCwgJGluZGV4KSB7XG4gICRrZXlzOiBtYXAta2V5cygkbWFwKTtcblxuICBAcmV0dXJuIG50aCgka2V5cywgJGluZGV4KTtcbn1cblxuXG4vLyBCcmVha3BvaW50IE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIEJyZWFrcG9pbnQgdmlld3BvcnQgc2l6ZXMgYW5kIG1lZGlhIHF1ZXJpZXMuXG4vL1xuLy8gQnJlYWtwb2ludHMgYXJlIGRlZmluZWQgYXMgYSBtYXAgb2YgKG5hbWU6IG1pbmltdW0gd2lkdGgpLCBvcmRlciBmcm9tIHNtYWxsIHRvIGxhcmdlOlxuLy9cbi8vICAgICh4czogMCwgc206IDU3NnB4LCBtZDogNzY4cHgsIGxnOiA5OTJweCwgeGw6IDEyMDBweClcbi8vXG4vLyBUaGUgbWFwIGRlZmluZWQgaW4gdGhlIGAkc2NyZWVuLWJyZWFrcG9pbnRzYCBnbG9iYWwgdmFyaWFibGUgaXMgdXNlZCBhcyB0aGUgYCRicmVha3BvaW50c2AgYXJndW1lbnQgYnkgZGVmYXVsdC5cblxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbi8vIE1pbmltdW0gYnJlYWtwb2ludCB3aWR0aC4gTnVsbCBmb3IgdGhlIHNtYWxsZXN0IChmaXJzdCkgYnJlYWtwb2ludC5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW1pbihzbSwgKHhzOiAwLCBzbTogNTc2cHgsIG1kOiA3NjhweCwgbGc6IDk5MnB4LCB4bDogMTIwMHB4KSlcbi8vICAgIDU3NnB4XG5AZnVuY3Rpb24gYnJlYWtwb2ludC1taW4oJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWluOiBtYXAtZ2V0KCRicmVha3BvaW50cywgJG5hbWUpO1xuXG4gIEByZXR1cm4gaWYoJG5hbWUgIT0gaW5kZXgtdG8ta2V5KCRicmVha3BvaW50cywgMSksICRtaW4sIG51bGwpO1xufVxuXG4vLyBSZXR1cm5zIGEgYmxhbmsgc3RyaW5nIGlmIHNtYWxsZXN0IGJyZWFrcG9pbnQsIG90aGVyd2lzZSByZXR1cm5zIHRoZSBuYW1lIHdpdGggYSBkYXNoIGluZnJvbnQuXG4vLyBVc2VmdWwgZm9yIG1ha2luZyByZXNwb25zaXZlIHV0aWxpdGllcy5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LWluZml4KHhzLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgXCJcIiAgKFJldHVybnMgYSBibGFuayBzdHJpbmcpXG4vLyAgICA+PiBicmVha3BvaW50LWluZml4KHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgXCItc21cIlxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtaW5maXgoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICBAcmV0dXJuIGlmKGJyZWFrcG9pbnQtbWluKCRuYW1lLCAkYnJlYWtwb2ludHMpID09IG51bGwsIFwiXCIsIFwiLSN7JG5hbWV9XCIpO1xufVxuXG4vLyBNZWRpYSBvZiBhdCBsZWFzdCB0aGUgbWluaW11bSBicmVha3BvaW50IHdpZHRoLiBObyBxdWVyeSBmb3IgdGhlIHNtYWxsZXN0IGJyZWFrcG9pbnQuXG4vLyBNYWtlcyB0aGUgQGNvbnRlbnQgYXBwbHkgdG8gdGhlIGdpdmVuIGJyZWFrcG9pbnQgYW5kIHdpZGVyLlxuQG1peGluIG1lZGlhLWJyZWFrcG9pbnQtdXAoJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWluOiBicmVha3BvaW50LW1pbigkbmFtZSwgJGJyZWFrcG9pbnRzKTtcbiAgQGlmICRtaW4ge1xuICAgIEBtZWRpYSAobWluLXdpZHRoOiAkbWluKSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cbi8vIE5hbWUgb2YgdGhlIG5leHQgYnJlYWtwb2ludCwgb3IgbnVsbCBmb3IgdGhlIGxhc3QgYnJlYWtwb2ludC5cbi8vXG4vLyAgICA+PiBicmVha3BvaW50LW5leHQoc20pXG4vLyAgICBtZFxuLy8gICAgPj4gYnJlYWtwb2ludC1uZXh0KHNtLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgbWRcbi8vICAgID4+IGJyZWFrcG9pbnQtbmV4dChzbSwgJGJyZWFrcG9pbnQtbmFtZXM6ICh4cyBzbSBtZCBsZyB4bCkpXG4vLyAgICBtZFxuQGZ1bmN0aW9uIGJyZWFrcG9pbnQtbmV4dCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzLCAkYnJlYWtwb2ludC1uYW1lczogbWFwLWtleXMoJGJyZWFrcG9pbnRzKSkge1xuICAkbjogaW5kZXgoJGJyZWFrcG9pbnQtbmFtZXMsICRuYW1lKTtcbiAgQHJldHVybiBpZigkbiA8IGxlbmd0aCgkYnJlYWtwb2ludC1uYW1lcyksIG50aCgkYnJlYWtwb2ludC1uYW1lcywgJG4gKyAxKSwgbnVsbCk7XG59XG5cbi8vIE1heGltdW0gYnJlYWtwb2ludCB3aWR0aC4gTnVsbCBmb3IgdGhlIHNtYWxsZXN0IChmaXJzdCkgYnJlYWtwb2ludC5cbi8vIFRoZSBtYXhpbXVtIHZhbHVlIGlzIHJlZHVjZWQgYnkgMC4wMnB4IHRvIHdvcmsgYXJvdW5kIHRoZSBsaW1pdGF0aW9ucyBvZlxuLy8gYG1pbi1gIGFuZCBgbWF4LWAgcHJlZml4ZXMgYW5kIHZpZXdwb3J0cyB3aXRoIGZyYWN0aW9uYWwgd2lkdGhzLlxuLy9cbi8vIFNlZSBodHRwczovL3d3dy53My5vcmcvVFIvbWVkaWFxdWVyaWVzLTQvI21xLW1pbi1tYXhcbi8vIFVzZXMgMC4wMnB4IHJhdGhlciB0aGFuIDAuMDFweCB0byB3b3JrIGFyb3VuZCBhIGN1cnJlbnQgcm91bmRpbmcgYnVnIGluIFNhZmFyaS5cdC8vIFVzZXMgMC4wMnB4IHJhdGhlciB0aGFuIDAuMDFweCB0byB3b3JrIGFyb3VuZCBhIGN1cnJlbnQgcm91bmRpbmcgYnVnIGluIFNhZmFyaS5cbi8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTc4MjYxXHQvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE3ODI2MVxuLy9cbi8vICAgID4+IGJyZWFrcG9pbnQtbWF4KG1kLCAoeHM6IDAsIHNtOiA1NzZweCwgbWQ6IDc2OHB4LCBsZzogOTkycHgsIHhsOiAxMjAwcHgpKVxuLy8gICAgNzY3Ljk4cHhcbkBmdW5jdGlvbiBicmVha3BvaW50LW1heCgkbmFtZSwgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gICRtYXg6IG1hcC1nZXQoJGJyZWFrcG9pbnRzLCAkbmFtZSk7XG4gIEByZXR1cm4gaWYoJG1heCBhbmQgJG1heCA+IDAsICRtYXggLSAuMDIsIG51bGwpO1xufVxuXG4vLyBNZWRpYSBvZiBhdCBtb3N0IHRoZSBtYXhpbXVtIGJyZWFrcG9pbnQgd2lkdGguIE5vIHF1ZXJ5IGZvciB0aGUgbGFyZ2VzdCBicmVha3BvaW50LlxuLy8gTWFrZXMgdGhlIEBjb250ZW50IGFwcGx5IHRvIHRoZSBnaXZlbiBicmVha3BvaW50IGFuZCBuYXJyb3dlci5cbkBtaXhpbiBtZWRpYS1icmVha3BvaW50LWRvd24oJG5hbWUsICRicmVha3BvaW50czogJHNjcmVlbi1icmVha3BvaW50cykge1xuICAkbWF4OiBicmVha3BvaW50LW1heCgkbmFtZSwgJGJyZWFrcG9pbnRzKTtcbiAgQGlmICRtYXgge1xuICAgIEBtZWRpYSAobWF4LXdpZHRoOiAkbWF4KSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBjb250ZW50O1xuICB9XG59XG5cblxuLy8gVGV4dCBEaXJlY3Rpb24gLSBsdHIgLyBydGxcbi8vXG4vLyBDU1MgZGVmYXVsdHMgdG8gdXNlIHRoZSBsdHIgY3NzLCBhbmQgYWRkcyBbZGlyPXJ0bF0gc2VsZWN0b3JzXG4vLyB0byBvdmVycmlkZSBsdHIgZGVmYXVsdHMuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtdWx0aS1kaXIoKSB7XG4gIEBjb250ZW50O1xuXG4gIC8vICRyb290OiAjeyZ9O1xuICAvLyBAYXQtcm9vdCBbZGlyXSB7XG4gIC8vICAgI3skcm9vdH0ge1xuICAvLyAgICAgQGNvbnRlbnQ7XG4gIC8vICAgfVxuICAvLyB9XG59XG5cbkBtaXhpbiBydGwoKSB7XG4gICRyb290OiAjeyZ9O1xuXG4gICRyb290U3BsaXQ6IHN0ci1zcGxpdCgkcm9vdCwgXCIsXCIpO1xuICAkc2VsZWN0b3JzOiAje2FkZC1yb290LXNlbGVjdG9yKCRyb290LCBcIltkaXI9cnRsXVwiKX07XG4gICRzZWxlY3RvcnNTcGxpdDogc3RyLXNwbGl0KCRzZWxlY3RvcnMsIFwiLFwiKTtcblxuICAkaG9zdENvbnRleHRTZWxlY3RvcnM6ICgpO1xuICAkcmVzdFNlbGVjdG9yczogKCk7XG4gICRkaXJTZWxlY3RvcnM6ICgpO1xuXG4gIC8vIFNlbGVjdG9ycyBtdXN0IGJlIHNwbGl0IGludG8gaW5kaXZpZHVhbCBzZWxlY3RvcnMgaW4gY2FzZSB0aGUgYnJvd3NlclxuICAvLyBkb2Vzbid0IHN1cHBvcnQgYSBzcGVjaWZpYyBzZWxlY3Rvci5cbiAgLy8gRm9yIGV4YW1wbGUsIEZpcmVmb3ggYW5kIFNhZmFyaSBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAuXG4gIC8vIElmIGFuIGludmFsaWQgc2VsZWN0b3IgaXMgdXNlZCwgdGhlbiB0aGUgZW50aXJlIGdyb3VwIG9mIHNlbGVjdG9yc1xuICAvLyB3aWxsIGJlIGlnbm9yZWQuXG4gIC8vIEBsaW5rIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMtMy8jZ3JvdXBpbmdcbiAgQGVhY2ggJHNlbGVjdG9yIGluICRzZWxlY3RvcnNTcGxpdCB7XG4gICAgLy8gR3JvdXAgdGhlIHNlbGVjdG9ycyBiYWNrIGludG8gYSBzaW5nbGUgc2VsZWN0b3IgdG8gb3B0aW1pemUgdGhlIG91dHB1dC5cbiAgICBAaWYgc3RyLWluZGV4KCRzZWxlY3RvciwgXCI6aG9zdC1jb250ZXh0XCIpIHtcbiAgICAgICRob3N0Q29udGV4dFNlbGVjdG9yczogYXBwZW5kKCRob3N0Q29udGV4dFNlbGVjdG9ycywgJHNlbGVjdG9yLCBjb21tYSk7XG4gICAgfSBAZWxzZSB7XG4gICAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgICAgJHJlc3RTZWxlY3RvcnM6IGFwcGVuZCgkcmVzdFNlbGVjdG9ycywgJHNlbGVjdG9yLCBjb21tYSk7XG4gICAgfVxuICB9XG5cbiAgLy8gU3VwcG9ydGVkIGJ5IENocm9tZS5cbiAgQGlmIGxlbmd0aCgkaG9zdENvbnRleHRTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skaG9zdENvbnRleHRTZWxlY3RvcnN9IHtcbiAgICAgIEBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBhbGwgYnJvd3NlcnMuXG4gIEBpZiBsZW5ndGgoJHJlc3RTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skcmVzdFNlbGVjdG9yc30ge1xuICAgICAgQGNvbnRlbnQ7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgYnJvd3NlciBjYW4gc3VwcG9ydCBgOmRpcigpYCwgdGhlbiBhZGQgdGhlIGA6ZGlyKClgIHNlbGVjdG9ycy5cbiAgLy8gQHN1cHBvcnRzIHNlbGVjdG9yKDpkaXIocnRsKSkgeyAvLyBAIElNUE9UQU5UIE5PVEU6IFRoaXMgaGFzIGJlZW4gcmVtb3ZlZCBiZWNhdXNlIHNlbGVjdG9yIGZ1bmN0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gY3VycmVudCBTQ1NTXG4gIC8vIEFkZGluZyA6ZGlyKCkgaW4gY2FzZSB0aGUgYnJvd3NlciBkb2Vzbid0IHN1cHBvcnQgYDpob3N0LWNvbnRleHQoKWAgYW5kIGRvZXMgc3VwcG9ydCBgOmRpcigpYC5cbiAgLy8gYDpob3N0LWNvbnRleHQoKWAgaXMgYWRkZWQ6XG4gIC8vIC0gdGhyb3VnaCB0aGUgYGFkZC1yb290LXNlbGVjdG9yKClgIGZ1bmN0aW9uLlxuICAvLyAtIGZpcnN0IHNvIHRoYXQgaXQgdGFrZXMgcHJlY2VkZW5jZSBvdmVyIGA6ZGlyKClgLlxuICAvLyBGb3IgZXhhbXBsZSxcbiAgLy8gLSBGaXJlZm94IGRvZXNuJ3Qgc3VwcG9ydCBgOmhvc3QtY29udGV4dCgpYCwgYnV0IGRvZXMgc3VwcG9ydCBgOmRpcigpYC5cbiAgLy8gLSBTYWZhcmkgZG9lc24ndCBzdXBwb3J0IGA6aG9zdC1jb250ZXh0KClgLCBidXQgU2FmYXJpIDE2LjQrIHN1cHBvcnRzIGA6ZGlyKClgXG4gIC8vIEBsaW5rIGh0dHBzOi8vd2Via2l0Lm9yZy9ibG9nLzEzOTY2L3dlYmtpdC1mZWF0dXJlcy1pbi1zYWZhcmktMTYtNC9cbiAgQGVhY2ggJHNlbGVjdG9yIGluICRyb290U3BsaXQge1xuICAgICRkaXJTZWxlY3RvcjogXCIjeyRzZWxlY3Rvcn06ZGlyKHJ0bClcIjtcbiAgICAvLyBHcm91cCB0aGUgc2VsZWN0b3JzIGJhY2sgaW50byBhIHNpbmdsZSBzZWxlY3RvciB0byBvcHRpbWl6ZSB0aGUgb3V0cHV0LlxuICAgICRkaXJTZWxlY3RvcnM6IGFwcGVuZCgkZGlyU2VsZWN0b3JzLCAkZGlyU2VsZWN0b3IsIGNvbW1hKTtcbiAgfVxuXG4gIC8vIFN1cHBvcnRlZCBieSBGaXJlZm94LlxuICBAaWYgbGVuZ3RoKCRkaXJTZWxlY3RvcnMpID4gMCB7XG4gICAgQGF0LXJvb3QgI3skZGlyU2VsZWN0b3JzfSB7XG4gICAgICBAY29udGVudDtcbiAgICB9XG4gIH1cbiAgLy99XG59XG5cbkBtaXhpbiBsdHIoKSB7XG4gIEBjb250ZW50O1xufVxuXG5cbi8vIFNWRyBCYWNrZ3JvdW5kIEltYWdlIE1peGluXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN2Z1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRzdmcsICRmbGlwLXJ0bDogZmFsc2UpIHtcbiAgJHVybDogdXJsLWVuY29kZSgkc3ZnKTtcbiAgJHZpZXdCb3g6IHN0ci1zcGxpdChzdHItZXh0cmFjdCgkc3ZnLCBcInZpZXdCb3g9J1wiLCBcIidcIiksIFwiIFwiKTtcblxuICBAaWYgJGZsaXAtcnRsICE9IHRydWUgb3IgJHZpZXdCb3ggPT0gbnVsbCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYmFja2dyb3VuZC1pbWFnZTogdXJsKFwiZGF0YTppbWFnZS9zdmcreG1sO2NoYXJzZXQ9dXRmLTgsI3skdXJsfVwiKTtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgICR0cmFuc2Zvcm06IFwidHJhbnNmb3JtPSd0cmFuc2xhdGUoI3tudGgoJHZpZXdCb3gsIDMpfSwgMCkgc2NhbGUoLTEsIDEpJ1wiO1xuICAgICRmbGlwcGVkLXVybDogJHN2ZztcbiAgICAkZmxpcHBlZC11cmw6IHN0ci1yZXBsYWNlKCRmbGlwcGVkLXVybCwgXCI8cGF0aFwiLCBcIjxwYXRoICN7JHRyYW5zZm9ybX1cIik7XG4gICAgJGZsaXBwZWQtdXJsOiBzdHItcmVwbGFjZSgkZmxpcHBlZC11cmwsIFwiPGxpbmVcIiwgXCI8bGluZSAjeyR0cmFuc2Zvcm19XCIpO1xuICAgICRmbGlwcGVkLXVybDogc3RyLXJlcGxhY2UoJGZsaXBwZWQtdXJsLCBcIjxwb2x5Z29uXCIsIFwiPHBvbHlnb24gI3skdHJhbnNmb3JtfVwiKTtcbiAgICAkZmxpcHBlZC11cmw6IHVybC1lbmNvZGUoJGZsaXBwZWQtdXJsKTtcblxuICAgIEBpbmNsdWRlIGx0ciAoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyR1cmx9XCIpO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoXCJkYXRhOmltYWdlL3N2Zyt4bWw7Y2hhcnNldD11dGYtOCwjeyRmbGlwcGVkLXVybH1cIik7XG4gICAgfVxuICB9XG59XG5cbi8vIEFkZCBwcm9wZXJ0eSBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHByb3BlcnR5LWhvcml6b250YWwoJHByb3AsICRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpZiAkc3RhcnQgPT0gMCBhbmQgJGVuZCA9PSAwIHtcbiAgICAjeyRwcm9wfS1sZWZ0OiAkc3RhcnQ7XG4gICAgI3skcHJvcH0tcmlnaHQ6ICRlbmQ7XG5cbiAgfSBAZWxzZSB7XG4gICAgLXdlYmtpdC0jeyRwcm9wfS1zdGFydDogJHN0YXJ0O1xuICAgICN7JHByb3B9LWlubGluZS1zdGFydDogJHN0YXJ0O1xuICAgIC13ZWJraXQtI3skcHJvcH0tZW5kOiAkZW5kO1xuICAgICN7JHByb3B9LWlubGluZS1lbmQ6ICRlbmQ7XG4gIH1cbn1cblxuLy8gQWRkIHByb3BlcnR5IGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRwcm9wXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge2Jvb2xlYW59ICRjb250ZW50IGluY2x1ZGUgY29udGVudCBvciB1c2UgZGVmYXVsdFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHByb3BlcnR5KCRwcm9wLCAkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHktaG9yaXpvbnRhbCgkcHJvcCwgJHN0YXJ0LCAkZW5kKTtcbiAgI3skcHJvcH0tdG9wOiAkdG9wO1xuICAjeyRwcm9wfS1ib3R0b206ICRib3R0b207XG59XG5cbi8vIEFkZCBwYWRkaW5nIGhvcml6b250YWxcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc3RhcnRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcGFkZGluZy1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwocGFkZGluZywgJHN0YXJ0LCAkZW5kKTtcbn1cblxuLy8gQWRkIHBhZGRpbmcgZm9yIGFsbCBkaXJlY3Rpb25zXG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcGFkZGluZygkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkocGFkZGluZywgJHRvcCwgJGVuZCwgJGJvdHRvbSwgJHN0YXJ0KTtcbn1cblxuLy8gQWRkIG1hcmdpbiBob3Jpem9udGFsXG4vLyBAcGFyYW0ge3N0cmluZ30gJHN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJGVuZFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIG1hcmdpbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZDogJHN0YXJ0KSB7XG4gIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwobWFyZ2luLCAkc3RhcnQsICRlbmQpO1xufVxuXG4vLyBBZGQgbWFyZ2luIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIG1hcmdpbigkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkobWFyZ2luLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgcG9zaXRpb24gaG9yaXpvbnRhbFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydCAtIGFtb3VudCB0byBwb3NpdGlvbiBzdGFydFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRlbmQgLSBhbW91bnQgdG8gbGVmdDogMDsgZW5kXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5AbWl4aW4gcG9zaXRpb24taG9yaXpvbnRhbCgkc3RhcnQ6IG51bGwsICRlbmQ6IG51bGwpIHtcbiAgQGlmICRzdGFydCA9PSAkZW5kIHtcbiAgICBAaW5jbHVkZSBtdWx0aS1kaXIoKSB7XG4gICAgICBsZWZ0OiAkc3RhcnQ7XG4gICAgICByaWdodDogJGVuZDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBhdC1yb290IHtcbiAgICAgIEBzdXBwb3J0cyAoaW5zZXQtaW5saW5lLXN0YXJ0OiAwKSB7XG4gICAgICAgICYge1xuICAgICAgICAgIGluc2V0LWlubGluZS1zdGFydDogJHN0YXJ0O1xuICAgICAgICAgIGluc2V0LWlubGluZS1lbmQ6ICRlbmQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBUT0RPIEZXLTM3NjZcbiAgICBAYXQtcm9vdCB7XG4gICAgICBAc3VwcG9ydHMgbm90IChpbnNldC1pbmxpbmUtc3RhcnQ6IDApIHtcbiAgICAgICAgJiB7XG4gICAgICAgICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgICAgICAgbGVmdDogJHN0YXJ0O1xuICAgICAgICAgICAgcmlnaHQ6ICRlbmQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgICAgICAgIGxlZnQ6IHVuc2V0O1xuICAgICAgICAgICAgcmlnaHQ6IHVuc2V0O1xuXG4gICAgICAgICAgICBsZWZ0OiAkZW5kO1xuICAgICAgICAgICAgcmlnaHQ6ICRzdGFydDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLy8gQWRkIHBvc2l0aW9uIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIHBvc2l0aW9uKCR0b3A6IG51bGwsICRlbmQ6IG51bGwsICRib3R0b206IG51bGwsICRzdGFydDogbnVsbCkge1xuICBAaW5jbHVkZSBwb3NpdGlvbi1ob3Jpem9udGFsKCRzdGFydCwgJGVuZCk7XG4gIHRvcDogJHRvcDtcbiAgYm90dG9tOiAkYm90dG9tO1xufVxuXG4vLyBBZGQgYm9yZGVyIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0b3Bcbi8vIEBwYXJhbSB7c3RyaW5nfSAkZW5kXG4vLyBAcGFyYW0ge3N0cmluZ30gJGJvdHRvbVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRzdGFydFxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQG1peGluIGJvcmRlcigkdG9wLCAkZW5kOiAkdG9wLCAkYm90dG9tOiAkdG9wLCAkc3RhcnQ6ICRlbmQpIHtcbiAgQGluY2x1ZGUgcHJvcGVydHkoYm9yZGVyLCAkdG9wLCAkZW5kLCAkYm90dG9tLCAkc3RhcnQpO1xufVxuXG4vLyBBZGQgYm9yZGVyIHJhZGl1cyBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkdG9wLXN0YXJ0XG4vLyBAcGFyYW0ge3N0cmluZ30gJHRvcC1lbmRcbi8vIEBwYXJhbSB7c3RyaW5nfSAkYm90dG9tLWVuZFxuLy8gQHBhcmFtIHtzdHJpbmd9ICRib3R0b20tc3RhcnRcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBtaXhpbiBib3JkZXItcmFkaXVzKCR0b3Atc3RhcnQsICR0b3AtZW5kOiAkdG9wLXN0YXJ0LCAkYm90dG9tLWVuZDogJHRvcC1zdGFydCwgJGJvdHRvbS1zdGFydDogJHRvcC1lbmQpIHtcbiAgQGlmICR0b3Atc3RhcnQgPT0gJHRvcC1lbmQgYW5kICR0b3Atc3RhcnQgPT0gJGJvdHRvbS1lbmQgYW5kICR0b3Atc3RhcnQgPT0gJGJvdHRvbS1zdGFydCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgYm9yZGVyLXJhZGl1czogJHRvcC1zdGFydDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIGx0cigpIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgICBib3JkZXItdG9wLXJpZ2h0LXJhZGl1czogJHRvcC1lbmQ7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogJGJvdHRvbS1lbmQ7XG4gICAgICBib3JkZXItYm90dG9tLWxlZnQtcmFkaXVzOiAkYm90dG9tLXN0YXJ0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIHJ0bCgpIHtcbiAgICAgIGJvcmRlci10b3AtbGVmdC1yYWRpdXM6ICR0b3AtZW5kO1xuICAgICAgYm9yZGVyLXRvcC1yaWdodC1yYWRpdXM6ICR0b3Atc3RhcnQ7XG4gICAgICBib3JkZXItYm90dG9tLXJpZ2h0LXJhZGl1czogJGJvdHRvbS1zdGFydDtcbiAgICAgIGJvcmRlci1ib3R0b20tbGVmdC1yYWRpdXM6ICRib3R0b20tZW5kO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgZGlyZWN0aW9uIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICRkaXIgLSBEaXJlY3Rpb24gb24gTFRSXG5AbWl4aW4gZGlyZWN0aW9uKCRkaXIpIHtcbiAgJG90aGVyLWRpcjogbnVsbDtcblxuICBAaWYgJGRpciA9PSBsdHIge1xuICAgICRvdGhlci1kaXI6IHJ0bDtcbiAgfSBAZWxzZSB7XG4gICAgJG90aGVyLWRpcjogbHRyO1xuICB9XG5cbiAgQGluY2x1ZGUgbHRyKCkge1xuICAgIGRpcmVjdGlvbjogJGRpcjtcbiAgfVxuICBAaW5jbHVkZSBydGwoKSB7XG4gICAgZGlyZWN0aW9uOiAkb3RoZXItZGlyO1xuICB9XG59XG5cbi8vIEFkZCBmbG9hdCBmb3IgYWxsIGRpcmVjdGlvbnNcbi8vIEBwYXJhbSB7c3RyaW5nfSAkc2lkZVxuLy8gQHBhcmFtIHtzdHJpbmd9ICRkZWNvcmF0b3IgLSAhaW1wb3J0YW50XG5AbWl4aW4gZmxvYXQoJHNpZGUsICRkZWNvcmF0b3I6IG51bGwpIHtcbiAgQGlmICRzaWRlID09IHN0YXJ0IHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBmbG9hdDogbGVmdCAkZGVjb3JhdG9yO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICBmbG9hdDogcmlnaHQgJGRlY29yYXRvcjtcbiAgICB9XG4gIH0gQGVsc2UgaWYgJHNpZGUgPT0gZW5kIHtcbiAgICBAaW5jbHVkZSBsdHIoKSB7XG4gICAgICBmbG9hdDogcmlnaHQgJGRlY29yYXRvcjtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgZmxvYXQ6IGxlZnQgJGRlY29yYXRvcjtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGZsb2F0OiAkc2lkZSAkZGVjb3JhdG9yO1xuICAgIH1cbiAgfVxufVxuXG5AbWl4aW4gYmFja2dyb3VuZC1wb3NpdGlvbigkaG9yaXpvbnRhbCwgJGhvcml6b250YWwtYW1vdW50OiBudWxsLCAkdmVydGljYWw6IG51bGwsICR2ZXJ0aWNhbC1hbW91bnQ6IG51bGwpIHtcbiAgQGlmICRob3Jpem9udGFsID09IHN0YXJ0IG9yICRob3Jpem9udGFsID09IGVuZCB7XG4gICAgJGhvcml6b250YWwtbHRyOiBudWxsO1xuICAgICRob3Jpem9udGFsLXJ0bDogbnVsbDtcbiAgICBAaWYgJGhvcml6b250YWwgPT0gc3RhcnQge1xuICAgICAgJGhvcml6b250YWwtbHRyOiBsZWZ0O1xuICAgICAgJGhvcml6b250YWwtcnRsOiByaWdodDtcbiAgICB9IEBlbHNlIHtcbiAgICAgICRob3Jpem9udGFsLWx0cjogcmlnaHQ7XG4gICAgICAkaG9yaXpvbnRhbC1ydGw6IGxlZnQ7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwtbHRyICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgYmFja2dyb3VuZC1wb3NpdGlvbjogJGhvcml6b250YWwtcnRsICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gIH0gQGVsc2Uge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246ICRob3Jpem9udGFsICRob3Jpem9udGFsLWFtb3VudCAkdmVydGljYWwgJHZlcnRpY2FsLWFtb3VudDtcbiAgICB9XG4gIH1cbn1cblxuQG1peGluIHRyYW5zZm9ybS1vcmlnaW4oJHgtYXhpcywgJHktYXhpczogbnVsbCkge1xuICBAaWYgJHgtYXhpcyA9PSBzdGFydCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiByaWdodCAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkeC1heGlzID09IGVuZCB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogcmlnaHQgJHktYXhpcztcbiAgICB9XG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogbGVmdCAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSBpZiAkeC1heGlzID09IGxlZnQgb3IgJHgtYXhpcyA9PSByaWdodCB7XG4gICAgQGluY2x1ZGUgbXVsdGktZGlyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHgtYXhpcyAkeS1heGlzO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtLW9yaWdpbjogJHgtYXhpcyAkeS1heGlzO1xuICAgIH1cbiAgICBAaW5jbHVkZSBydGwoKSB7XG4gICAgICB0cmFuc2Zvcm0tb3JpZ2luOiBjYWxjKDEwMCUgLSAjeyR4LWF4aXN9KSAkeS1heGlzO1xuICAgIH1cbiAgfVxufVxuXG4vLyBBZGQgdHJhbnNmb3JtIGZvciBhbGwgZGlyZWN0aW9uc1xuLy8gQHBhcmFtIHtzdHJpbmd9ICR0cmFuc2Zvcm1zIC0gY29tbWEgc2VwYXJhdGVkIGxpc3Qgb2YgdHJhbnNmb3Jtc1xuQG1peGluIHRyYW5zZm9ybSgkdHJhbnNmb3Jtcy4uLikge1xuICAkZXh0cmE6IG51bGw7XG5cbiAgJHg6IG51bGw7XG4gICRsdHItdHJhbnNsYXRlOiBudWxsO1xuICAkcnRsLXRyYW5zbGF0ZTogbnVsbDtcblxuICBAZWFjaCAkdHJhbnNmb3JtIGluICR0cmFuc2Zvcm1zIHtcbiAgICBAaWYgKHN0ci1pbmRleCgkdHJhbnNmb3JtLCB0cmFuc2xhdGUzZCkpIHtcbiAgICAgICR0cmFuc2Zvcm06IHN0ci1yZXBsYWNlKCR0cmFuc2Zvcm0sICd0cmFuc2xhdGUzZCgnKTtcbiAgICAgICR0cmFuc2Zvcm06IHN0ci1yZXBsYWNlKCR0cmFuc2Zvcm0sICcpJyk7XG5cbiAgICAgICRjb29yZGluYXRlczogc3RyLXNwbGl0KCR0cmFuc2Zvcm0sICcsJyk7XG5cbiAgICAgICR4OiBudGgoJGNvb3JkaW5hdGVzLCAxKTtcbiAgICAgICR5OiBudGgoJGNvb3JkaW5hdGVzLCAyKTtcbiAgICAgICR6OiBudGgoJGNvb3JkaW5hdGVzLCAzKTtcblxuICAgICAgJGx0ci10cmFuc2xhdGU6IHRyYW5zbGF0ZTNkKCR4LCAkeSwgJHopO1xuICAgICAgJHJ0bC10cmFuc2xhdGU6IHRyYW5zbGF0ZTNkKGNhbGMoLTEgKiAjeyR4fSksICR5LCAkeik7XG4gICAgfSBAZWxzZSB7XG4gICAgICBAaWYgJGV4dHJhID09IG51bGwge1xuICAgICAgICAkZXh0cmE6ICR0cmFuc2Zvcm07XG4gICAgICB9IEBlbHNlIHtcbiAgICAgICAgJGV4dHJhOiAkZXh0cmEgJHRyYW5zZm9ybTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBAaWYgJHggPT0gJzAnIG9yICR4ID09IG51bGwge1xuICAgIEBpbmNsdWRlIG11bHRpLWRpcigpIHtcbiAgICAgIHRyYW5zZm9ybTogJGx0ci10cmFuc2xhdGUgJGV4dHJhO1xuICAgIH1cbiAgfSBAZWxzZSB7XG4gICAgQGluY2x1ZGUgbHRyKCkge1xuICAgICAgdHJhbnNmb3JtOiAkbHRyLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcnRsKCkge1xuICAgICAgdHJhbnNmb3JtOiAkcnRsLXRyYW5zbGF0ZSAkZXh0cmE7XG4gICAgfVxuICB9XG59XG4iLCIvKipcbiAqIEltcG9ydGVkIGlvbmljIG1peGlucyBmb3IgU0NTUyBmcm9tIGRpZmZlcmVudCBjb21wb25lbnRzXG4gKiAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiBFeHRyYWN0ZWQgZnJvbVxuICogaHR0cHM6Ly9naXRodWIuY29tL2lvbmljLXRlYW0vaW9uaWMtZnJhbWV3b3JrL2Jsb2IvbWFzdGVyL2NvcmUvc3JjL2NvbXBvbmVudHMvZ3JpZC9ncmlkLm1peGlucy5zY3NzXG4gKiBodHRwczovL2dpdGh1Yi5jb20vaW9uaWMtdGVhbS9pb25pYy1mcmFtZXdvcmsvYmxvYi9tYXN0ZXIvY29yZS9zcmMvY29tcG9uZW50cy9pdGVtL2l0ZW0ubWl4aW5zLnNjc3NcbiAqL1xuXG4vLyBSZXNwb25zaXZlIE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuXG4vLyBDcmVhdGVzIGEgZml4ZWQgd2lkdGggZm9yIHRoZSBncmlkIGJhc2VkIG9uIHRoZSBzY3JlZW4gc2l6ZVxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbkBtaXhpbiBtYWtlLWdyaWQtd2lkdGhzKCR3aWR0aHM6ICRncmlkLXdpZHRocywgJGJyZWFrcG9pbnRzOiAkc2NyZWVuLWJyZWFrcG9pbnRzKSB7XG4gIEBlYWNoICRicmVha3BvaW50LCAkd2lkdGggaW4gJHdpZHRocyB7XG4gICAgQGluY2x1ZGUgbWVkaWEtYnJlYWtwb2ludC11cCgkYnJlYWtwb2ludCwgJGJyZWFrcG9pbnRzKSB7XG4gICAgICB3aWR0aDogJHdpZHRoO1xuICAgIH1cbiAgfVxuXG4gIG1heC13aWR0aDogMTAwJTtcbn1cblxuXG4vLyBBZGRzIHBhZGRpbmcgdG8gdGhlIGVsZW1lbnQgYmFzZWQgb24gYnJlYWtwb2ludHNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXG5AbWl4aW4gbWFrZS1icmVha3BvaW50LXBhZGRpbmcoJHBhZGRpbmdzKSB7XG4gIEBlYWNoICRicmVha3BvaW50IGluIG1hcC1rZXlzKCRwYWRkaW5ncykge1xuICAgIEBpbmNsdWRlIG1lZGlhLWJyZWFrcG9pbnQtdXAoJGJyZWFrcG9pbnQpIHtcbiAgICAgICRwYWRkaW5nOiBtYXAtZ2V0KCRwYWRkaW5ncywgJGJyZWFrcG9pbnQpO1xuXG4gICAgICBAaW5jbHVkZSBwYWRkaW5nKCRwYWRkaW5nKTtcbiAgICB9XG4gIH1cbn1cblxuXG4vLyBJdGVtIE1peGluc1xuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblxuQG1peGluIGl0ZW0tcHVzaC1zdmctdXJsKCRmaWxsKSB7XG4gICRpdGVtLWRldGFpbC1wdXNoLXN2ZzogXCI8c3ZnIHhtbG5zPSdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zycgdmlld0JveD0nMCAwIDEyIDIwJz48cGF0aCBkPSdNMiwyMGwtMi0ybDgtOEwwLDJsMi0ybDEwLDEwTDIsMjB6JyBmaWxsPScjeyRmaWxsfScvPjwvc3ZnPlwiO1xuXG4gIEBpbmNsdWRlIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRpdGVtLWRldGFpbC1wdXNoLXN2ZywgdHJ1ZSk7XG59XG4iLCJAdXNlIFwic2FzczptYXRoXCIgYXMgbWF0aDtcblxuLyoqXG4gKiBBcHAgY3VzdG9tIG1peGlucyBmb3IgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBvdXIgY3VzdG9tIG1peGlucy5cbiAqL1xuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggYmxhY2sgdG8gY3JlYXRlIGl0cyBzaGFkZS5cbi8vIERlZmF1bHQgdG8gYm9vdHN0cmFwIGxldmVsIDYuXG4vLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuQGZ1bmN0aW9uIGdldC1jb2xvci1zaGFkZS1wZXJjZW50KCRjb2xvciwgJHBlcmNlbnQ6IDQ4JSkge1xuICAgIEByZXR1cm4gbWl4KCMwMDAsICRjb2xvciwgJHBlcmNlbnQpO1xufVxuXG4vLyBNaXhlcyBhIGNvbG9yIHdpdGggd2hpdGUgdG8gY3JlYXRlIGl0cyB0aW50LlxuLy8gRGVmYXVsdCB0byBib290c3RyYXAgbGV2ZWwgLTEwLlxuLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbkBmdW5jdGlvbiBnZXQtY29sb3ItdGludC1wZXJjZW50KCRjb2xvciwgJHBlcmNlbnQ6IDgwJSkge1xuICAgIEByZXR1cm4gbWl4KCNmZmYsICRjb2xvciwgJHBlcmNlbnQpO1xufVxuXG4vLyBJb25pYyBDb2xvcnNcbi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4vLyBHZW5lcmF0ZXMgdGhlIGNvbG9yIGNsYXNzZXMgYW5kIHZhcmlhYmxlcyBiYXNlZCBvbiB0aGVcbi8vIGNvbG9ycyBtYXBcblxuQG1peGluIGdlbmVyYXRlLWNvbG9yKCRjb2xvci1uYW1lLCAkY29sb3JzLCAkdGhlbWUpIHtcbiAgICAkY29sb3ItdGhlbWVzOiBtYXAtZ2V0KCRjb2xvcnMsICRjb2xvci1uYW1lKTtcbiAgICAkYmFzZTogbWFwLWdldCgkY29sb3ItdGhlbWVzLCAkdGhlbWUpO1xuXG4gICAgQGlmICR0aGVtZSA9PSAnZGFyaycge1xuICAgICAgICAkYmFzZTogbWl4KG1hcC1nZXQoJGNvbG9yLXRoZW1lcywgJ2xpZ2h0JyksIHdoaXRlLCA4MCUpICFkZWZhdWx0O1xuICAgIH1cblxuICAgIEBpbmNsdWRlIGdlbmVyYXRlLWNvbG9yLXZhcmlhbnRzKCRjb2xvci1uYW1lLCAkYmFzZSk7XG59XG5cbkBtaXhpbiBnZW5lcmF0ZS1jb2xvci12YXJpYW50cygkY29sb3ItbmFtZSwgJGJhc2UpIHtcbiAgICAkY29udHJhc3Q6IGdldF9jb250cmFzdF9jb2xvcigkYmFzZSk7XG4gICAgJHNoYWRlOiBnZXQtY29sb3Itc2hhZGUtcGVyY2VudCgkYmFzZSk7XG4gICAgJHRpbnQ6IGdldC1jb2xvci10aW50LXBlcmNlbnQoJGJhc2UpO1xuXG4gICAgLS0jeyRjb2xvci1uYW1lfTogI3skYmFzZX07XG4gICAgLS0jeyRjb2xvci1uYW1lfS1zaGFkZTogI3skc2hhZGV9O1xuICAgIC0tI3skY29sb3ItbmFtZX0tdGludDogI3skdGludH07XG4gICAgLS0jeyRjb2xvci1uYW1lfS1jb250cmFzdDogI3skY29udHJhc3R9O1xuXG4gICAgLy8gSW50ZXJuYWwgaW9uaWMgdXNlIG9ubHkuXG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX06IHZhcigtLSN7JGNvbG9yLW5hbWV9KTtcbiAgICAtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1iYXNlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0pO1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXJnYjogI3tjb2xvci10by1yZ2ItbGlzdCgkYmFzZSl9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0OiAjeyRjb250cmFzdH07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tY29udHJhc3QtcmdiOiAje2NvbG9yLXRvLXJnYi1saXN0KCRjb250cmFzdCl9O1xuICAgIC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LXNoYWRlOiAjeyRzaGFkZX07XG4gICAgLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tdGludDogI3skdGludH07XG5cbiAgICAuaW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9IHtcbiAgICAgICAgLS1pb24tY29sb3I6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfSk7XG4gICAgICAgIC0taW9uLWNvbG9yLWJhc2U6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1iYXNlKTtcbiAgICAgICAgLS1pb24tY29sb3ItcmdiOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tcmdiKTtcbiAgICAgICAgLS1pb24tY29sb3ItY29udHJhc3Q6IHZhcigtLWlvbi1jb2xvci0jeyRjb2xvci1uYW1lfS1jb250cmFzdCk7XG4gICAgICAgIC0taW9uLWNvbG9yLWNvbnRyYXN0LXJnYjogdmFyKC0taW9uLWNvbG9yLSN7JGNvbG9yLW5hbWV9LWNvbnRyYXN0LXJnYik7XG4gICAgICAgIC0taW9uLWNvbG9yLXNoYWRlOiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tc2hhZGUpO1xuICAgICAgICAtLWlvbi1jb2xvci10aW50OiB2YXIoLS1pb24tY29sb3ItI3skY29sb3ItbmFtZX0tdGludCk7XG4gICAgfVxufVxuXG5AbWl4aW4gY29yZS1mb2N1cygpIHtcbiAgICBvdXRsaW5lOiBub25lO1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICAmOjphZnRlciB7XG4gICAgICAgIEBpbmNsdWRlIHBvc2l0aW9uKDAsIDAsIDAsIDApO1xuICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgIGNvbnRlbnQ6IFwiXCI7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgICAgIHotaW5kZXg6IDE7XG4gICAgICAgIEBpbmNsdWRlIGNvcmUtZm9jdXMtc3R5bGUoKTtcbiAgICB9XG59XG5cbkBtaXhpbiBjb3JlLWZvY3VzLXN0eWxlKCkge1xuICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCB2YXIoLS1hMTF5LWZvY3VzLXdpZHRoKSAxcHggdmFyKC0tYTExeS1mb2N1cy1jb2xvcik7XG4gICAgYm9yZGVyLXJhZGl1czogdmFyKC0tYm9yZGVyLXJhZGl1cyk7XG4gICAgLy8gVGhpY2tlciBvcHRpb246XG4gICAgLy8gYm9yZGVyOiB2YXIoLS1hMTF5LWZvY3VzLXdpZHRoKSBzb2xpZCB2YXIoLS1hMTF5LWZvY3VzLWNvbG9yKTtcbn1cblxuQG1peGluIGNvcmUtdHJhbnNpdGlvbigkcHJvcGVydGllczogYWxsLCAkZHVyYXRpb246IDUwMG1zLCAkdGltaW5nLWZ1bmN0aW9uOiBlYXNlLWluLW91dCkge1xuICAgICR0cmFuc2l0aW9uczogKCk7XG4gICAgQGVhY2ggJHByb3BlcnR5IGluICRwcm9wZXJ0aWVzIHtcbiAgICAgICR0cmFuc2l0aW9uczogYXBwZW5kKCR0cmFuc2l0aW9ucywgJHByb3BlcnR5ICRkdXJhdGlvbiAkdGltaW5nLWZ1bmN0aW9uLCBjb21tYSk7XG4gICAgfVxuXG4gICAgLXdlYmtpdC10cmFuc2l0aW9uOiAkdHJhbnNpdGlvbnM7XG4gICAgdHJhbnNpdGlvbjogJHRyYW5zaXRpb25zO1xufVxuXG5AbWl4aW4gc3Itb25seSgpIHtcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgd2lkdGg6IDFweDtcbiAgICBoZWlnaHQ6IDFweDtcbiAgICBwYWRkaW5nOiAwO1xuICAgIG1hcmdpbjogLTFweDtcbiAgICBvdmVyZmxvdzogaGlkZGVuO1xuICAgIGNsaXA6IHJlY3QoMCwgMCwgMCwgMCk7XG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbiAgICBib3JkZXI6IDA7XG59XG5cbi8qKlxuICogU2FtZSBhcyBpdGVtLXB1c2gtc3ZnLXVybCBidXQgYWRtaXRzIGZsaXAtcnRsXG4gKi9cbkBtaXhpbiBwdXNoLWFycm93LWNvbG9yKCRmaWxsOiA2MjYyNjIsICRmbGlwLXJ0bDogZmFsc2UpIHtcbiAgICAkaXRlbS1kZXRhaWwtcHVzaC1zdmc6IFwiPHN2ZyB4bWxucz0naHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnIHZpZXdCb3g9JzAgMCAxMiAyMCc+PHBhdGggZD0nTTIsMjBsLTItMmw4LThMMCwybDItMmwxMCwxMEwyLDIweicgZmlsbD0nI3skZmlsbH0nLz48L3N2Zz5cIjtcblxuICAgIEBpbmNsdWRlIHN2Zy1iYWNrZ3JvdW5kLWltYWdlKCRpdGVtLWRldGFpbC1wdXNoLXN2ZywgJGZsaXAtcnRsKTtcbn1cblxuQG1peGluIGJvcmRlci1zdGFydCgkcHgsICR0eXBlOiBudWxsLCAkY29sb3I6IG51bGwpIHtcbiAgICBAaW5jbHVkZSBwcm9wZXJ0eS1ob3Jpem9udGFsKGJvcmRlciwgJHB4ICR0eXBlICRjb2xvciwgbnVsbCk7XG59XG5cbkBtaXhpbiBib3JkZXItZW5kKCRweCwgJHR5cGU6IG51bGwsICRjb2xvcjogbnVsbCkge1xuICAgIEBpbmNsdWRlIHByb3BlcnR5LWhvcml6b250YWwoYm9yZGVyLCBudWxsLCAkcHggJHR5cGUgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1ib3JkZXItc3RhcnQoJHB4LCAkdHlwZSwgJGNvbG9yKSB7XG4gICAgJHNhZmUtYXJlYS1wb3NpdGlvbjogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skcHh9KTtcblxuICAgIEBpbmNsdWRlIGJvcmRlci1zdGFydCgkc2FmZS1hcmVhLXBvc2l0aW9uLCAkdHlwZSwgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1ib3JkZXItZW5kKCRweCwgJHR5cGUsICRjb2xvcikge1xuICAgICRzYWZlLWFyZWEtcG9zaXRpb246IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRweH0pO1xuXG4gICAgQGluY2x1ZGUgYm9yZGVyLWVuZCgkc2FmZS1hcmVhLXBvc2l0aW9uLCAkdHlwZSwgJGNvbG9yKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRlbmQ6ICRzdGFydCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBudWxsO1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IG51bGw7XG5cbiAgICBAaWYgKCRlbmQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcbiAgICB9XG4gICAgQGlmICgkc3RhcnQpIHtcbiAgICAgICAgJHNhZmUtYXJlYS1zdGFydDogY2FsYyh2YXIoLS1pb24tc2FmZS1hcmVhLWxlZnQpICsgI3skc3RhcnR9KTtcbiAgICB9XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkc2FmZS1hcmVhLWVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtbWFyZ2luLXN0YXJ0KCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc2FmZS1hcmVhLXN0YXJ0LCAkZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1tYXJnaW4tZW5kKCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbCgkc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLWhvcml6b250YWwoJHN0YXJ0LCAkZW5kOiAkc3RhcnQpIHtcbiAgICAkc2FmZS1hcmVhLWVuZDogbnVsbDtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBudWxsO1xuXG4gICAgQGlmICgkZW5kKSB7XG4gICAgICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG4gICAgfVxuICAgIEBpZiAoJHN0YXJ0KSB7XG4gICAgICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG4gICAgfVxuXG4gICAgQGluY2x1ZGUgcGFkZGluZy1ob3Jpem9udGFsKCRzYWZlLWFyZWEtc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wYWRkaW5nLXN0YXJ0KCRzdGFydCwgJGVuZCkge1xuICAgICRzYWZlLWFyZWEtc3RhcnQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1sZWZ0KSArICN7JHN0YXJ0fSk7XG5cbiAgICBAaW5jbHVkZSBwYWRkaW5nLWhvcml6b250YWwoJHNhZmUtYXJlYS1zdGFydCwgJGVuZCk7XG59XG5cbkBtaXhpbiBzYWZlLWFyZWEtcGFkZGluZy1lbmQoJHN0YXJ0LCAkZW5kKSB7XG4gICAgJHNhZmUtYXJlYS1lbmQ6IGNhbGModmFyKC0taW9uLXNhZmUtYXJlYS1yaWdodCkgKyAjeyRlbmR9KTtcblxuICAgIEBpbmNsdWRlIHBhZGRpbmctaG9yaXpvbnRhbCgkc3RhcnQsICRzYWZlLWFyZWEtZW5kKTtcbn1cblxuQG1peGluIHNhZmUtYXJlYS1wb3NpdGlvbigkdG9wOiBudWxsLCAkZW5kOiBudWxsLCAkYm90dG9tOiBudWxsLCAkc3RhcnQ6IG51bGwpIHtcbiAgICAkc2FmZS1hcmVhLXN0YXJ0OiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtbGVmdCkgKyAjeyRzdGFydH0pO1xuICAgICRzYWZlLWFyZWEtZW5kOiBjYWxjKHZhcigtLWlvbi1zYWZlLWFyZWEtcmlnaHQpICsgI3skZW5kfSk7XG5cbiAgICBAaW5jbHVkZSBwb3NpdGlvbigkdG9wLCAkc2FmZS1hcmVhLWVuZCwgJGJvdHRvbSwgJHNhZmUtYXJlYS1zdGFydCk7XG59XG5cbkBtaXhpbiBjb3JlLWhlYWRpbmdzKCkge1xuICAgIGgxIHtcbiAgICAgICAgZm9udC1zaXplOiAyNnB4O1xuICAgIH1cbiAgICBoMiwgLml0ZW0taGVhZGluZyB7XG4gICAgICAgIGZvbnQtc2l6ZTogMjRweDtcbiAgICB9XG4gICAgaDMge1xuICAgICAgICBmb250LXNpemU6IDIycHg7XG4gICAgfVxuICAgIGg0IHtcbiAgICAgICAgZm9udC1zaXplOiAyMHB4O1xuICAgIH1cbiAgICBoNSB7XG4gICAgICAgIGZvbnQtc2l6ZTogMThweDtcbiAgICB9XG4gICAgaDYge1xuICAgICAgICBmb250LXNpemU6IDE2cHg7XG4gICAgfVxufVxuXG5AbWl4aW4gZGFya21vZGUoKSB7XG4gICAgJHJvb3Q6ICN7Jn07XG5cbiAgICBAYXQtcm9vdCAje2FkZC1yb290LXNlbGVjdG9yKCRyb290LCBcImh0bWwuZGFya1wiKX0ge1xuICAgICAgICBAY29udGVudDtcbiAgICB9XG59XG5cbkBtaXhpbiBob3Jpem9udGFsX3Njcm9sbF9pdGVtKCR3aWR0aCwgJG1pbi13aWR0aCwgJG1heC13aWR0aCkge1xuICAgIGZsZXg6IDAgMCAkd2lkdGg7XG4gICAgbWluLXdpZHRoOiAkbWluLXdpZHRoO1xuICAgIG1heC13aWR0aDogJG1heC13aWR0aDtcbiAgICBhbGlnbi1zZWxmOiBzdHJldGNoO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xuXG4gICAgaW9uLWNhcmQge1xuICAgICAgICAtLXZlcnRpY2FsLW1hcmdpbjogMTBweDtcbiAgICAgICAgLS1ob3Jpem9udGFsLW1hcmdpbjogMTBweDtcblxuICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pIC0gdmFyKC0taG9yaXpvbnRhbC1tYXJnaW4pKTtcbiAgICAgICAgaGVpZ2h0OiBjYWxjKDEwMCUgLSB2YXIoLS12ZXJ0aWNhbC1tYXJnaW4pIC0gdmFyKC0tdmVydGljYWwtbWFyZ2luKSk7XG4gICAgICAgIG1hcmdpbjogdmFyKC0tdmVydGljYWwtbWFyZ2luKSB2YXIoLS1ob3Jpem9udGFsLW1hcmdpbik7XG5cbiAgICAgICAgQG1lZGlhIChtYXgtd2lkdGg6IDM2MHB4KSB7XG4gICAgICAgICAgICAtLWhvcml6b250YWwtbWFyZ2luOiA2cHg7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbi8vIENvbG9yIG1peGlucy5cbkBmdW5jdGlvbiBnZXRfYnJpZ2h0bmVzcygkY29sb3IpIHtcbiAgICBAcmV0dXJuIG1hdGguZGl2KHJlZCgkY29sb3IpICsgZ3JlZW4oJGNvbG9yKSArIGJsdWUoJGNvbG9yKSwgMyk7XG59XG5cbi8vIEdldCB0aGUgYmV0dGVyIGNvbG9yIGNvbnRyYXN0IHVzaW5nIFdDQUcgYWxnb3J5dGhtLlxuQGZ1bmN0aW9uIGdldF9jb250cmFzdF9jb2xvcigkY29sb3IpIHtcbiAgICAkbHVtaWFuY2U6IGx1bWluYW5jZSgkY29sb3IpO1xuXG4gICAgLy8gV2hpdGUgbHVtaWFuY2UgaXMgMS5cbiAgICAkd2hpdGVDb250cmFzdDogbWF0aC5kaXYoJGx1bWlhbmNlICsgMC4wNSwgMSArIDAuMDUpO1xuICAgIC8vIFdoaXRlIGx1bWlhbmNlIGlzIDAuXG4gICAgJGJsYWNrQ29udHJhc3Q6IG1hdGguZGl2KDAuMDUsICRsdW1pYW5jZSArIDAuMDUpO1xuXG4gICAgQHJldHVybiBpZigkd2hpdGVDb250cmFzdCA8ICRibGFja0NvbnRyYXN0LCB3aGl0ZSwgYmxhY2spO1xufVxuXG4vLyBDb2xvciBjb250cmFzdCB1c2luZyB5aXEgYXByb3hpbWF0aW9uIHdpdGggMTUwIHRocmVzaG9sZC5cbkBmdW5jdGlvbiBnZXRfY29udHJhc3RfY29sb3JfeWlxKCRjb2xvciwgJGRhcms6IGJsYWNrLCAkbGlnaHQ6IHdoaXRlKSB7XG4gICAgJHI6IHJlZCgkY29sb3IpO1xuICAgICRnOiBncmVlbigkY29sb3IpO1xuICAgICRiOiBibHVlKCRjb2xvcik7XG5cbiAgICAkeWlxOiBtYXRoLmRpdigoJHIgKiAyOTkpICsgKCRnICogNTg3KSArICgkYiAqIDExNCksIDEwMDApO1xuXG4gICAgQHJldHVybiBpZigkeWlxID49IDEyOCwgJGRhcmssICRsaWdodCk7XG59XG5cbi8vIFdDQUcgY29udHJhc3QgYWxnb3JpdGhtXG5AZnVuY3Rpb24gY2hlY2stY29udHJhc3QoJGZvcmVncm91bmQsICRiYWNrZ3JvdW5kKSB7XG4gICAgJGZvcmVncm91bmRMdW1pYW5jZTogbHVtaW5hbmNlKCRmb3JlZ3JvdW5kKTtcbiAgICAkYmFja2dyb3VuZEx1bWluYW5jZTogbHVtaW5hbmNlKCRiYWNrZ3JvdW5kKTtcblxuICAgIEBpZiAoJGJhY2tncm91bmRMdW1pbmFuY2UgPCAkZm9yZWdyb3VuZEx1bWlhbmNlKSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJGJhY2tncm91bmRMdW1pbmFuY2UgKyAwLjA1LCAkZm9yZWdyb3VuZEx1bWlhbmNlICsgMC4wNSk7XG4gICAgfSBAZWxzZSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJGZvcmVncm91bmRMdW1pYW5jZSArIDAuMDUsICRiYWNrZ3JvdW5kTHVtaW5hbmNlICsgMC4wNSk7XG4gICAgfVxufVxuXG5AZnVuY3Rpb24gbHVtaW5hbmNlKCRjb2xvcikge1xuICAgICRyOiByZWQoJGNvbG9yKTtcbiAgICAkZzogZ3JlZW4oJGNvbG9yKTtcbiAgICAkYjogYmx1ZSgkY29sb3IpO1xuXG4gICAgJHI6IGNvbXBvbmVudC1sdW1pbmFuY2UoJHIpO1xuICAgICRnOiBjb21wb25lbnQtbHVtaW5hbmNlKCRnKTtcbiAgICAkYjogY29tcG9uZW50LWx1bWluYW5jZSgkYik7XG5cbiAgICBAcmV0dXJuICRyICogMC4yMTI2ICsgJGcgKiAwLjcxNTIgKyAkYiAqIDAuMDcyMjtcbn1cblxuQGZ1bmN0aW9uIGNvbXBvbmVudC1sdW1pbmFuY2UoJHZhbHVlKSB7XG4gICAgJHZhbHVlOiBtYXRoLmRpdigkdmFsdWUsIDI1NSk7XG5cbiAgICBAaWYgKCR2YWx1ZSA8PSAwLjAzOTI4KSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5kaXYoJHZhbHVlLCAxMi45Mik7XG4gICAgfSBAZWxzZSB7XG4gICAgICAgIEByZXR1cm4gbWF0aC5wb3cobWF0aC5kaXYoJHZhbHVlICsgMC4wNTUsIDEuMDU1KSwgMi40KTtcbiAgICB9XG59XG4iLCIvKlxuICogQXBwIEN1c3RvbSBBcHAgdmFyaWFibGVzIFNDU1NcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAqIFBsYWNlIGhlcmUgYWxsIGN1c3RvbSBhcHAgdmFyaWFibGVzLlxuICovXG4iLCIvKlxuICogQXBwIEdsb2JhbCB2YXJpYWJsZXMgU0NTU1xuICogLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuICogUGxhY2UgaGVyZSBhbGwgZ2xvYmFsIHZhcmlhYmxlcy5cbiAqL1xuXG4kd2hpdGU6ICAgICAgICNmZmZmZmYgIWRlZmF1bHQ7XG4kZ3JheS0xMDA6ICAgICNmOGY5ZmEgIWRlZmF1bHQ7XG4kZ3JheS0yMDA6ICAgICNlOWVjZWYgIWRlZmF1bHQ7XG4kZ3JheS0zMDA6ICAgICNkZWUyZTYgIWRlZmF1bHQ7IC8vIFN0cm9rZVxuJGdyYXktNDAwOiAgICAjY2VkNGRhICFkZWZhdWx0O1xuJGdyYXktNTAwOiAgICAjOGY5NTllICFkZWZhdWx0OyAvLyBTdHJva2Ugb24gaW5wdXRzXG4kZ3JheS02MDA6ICAgICM2YTczN2IgIWRlZmF1bHQ7XG4kZ3JheS03MDA6ICAgICM0OTUwNTcgIWRlZmF1bHQ7XG4kZ3JheS04MDA6ICAgICMzNDNhNDAgIWRlZmF1bHQ7XG4kZ3JheS05MDA6ICAgICMyODI4MjggIWRlZmF1bHQ7IC8vIENvcHkgdGV4dFxuJGJsYWNrOiAgICAgICAjMDAwMDAwICFkZWZhdWx0OyAvLyBBdm9pZCB1c2FnZVxuXG4kYmx1ZTogICAgICAgICMwZjZjYmYgIWRlZmF1bHQ7XG4kY3lhbjogICAgICAgICMwMDgxOTYgIWRlZmF1bHQ7IC8vIE5vdCB1c2VkLlxuJGdyZWVuOiAgICAgICAjMzU3YTMyICFkZWZhdWx0O1xuJHJlZDogICAgICAgICAjY2EzMTIwICFkZWZhdWx0O1xuJHllbGxvdzogICAgICAjZjBhZDRlICFkZWZhdWx0O1xuXG4kYnJhbmQtY29sb3I6ICNmOTgwMTIgIWRlZmF1bHQ7XG5cbiR0ZXh0LWNvbG9yOiAgICAgICAgICAgICAgICRncmF5LTkwMCAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLXJnYjogICAgICAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCR0ZXh0LWNvbG9yKSAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLWRhcms6ICAgICAgICAgICR3aGl0ZSAhZGVmYXVsdDtcbiR0ZXh0LWNvbG9yLWRhcmstcmdiOiAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCR0ZXh0LWNvbG9yLWRhcmspICFkZWZhdWx0O1xuXG4kYmFja2dyb3VuZC1jb2xvcjogICAgICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJGJhY2tncm91bmQtY29sb3ItcmdiOiAgICAgIGNvbG9yLXRvLXJnYi1saXN0KCRiYWNrZ3JvdW5kLWNvbG9yKSAhZGVmYXVsdDtcbiRiYWNrZ3JvdW5kLWNvbG9yLWRhcms6ICAgICAkZ3JheS05MDAgIWRlZmF1bHQ7IC8vICMxYTFhMWFcbiRiYWNrZ3JvdW5kLWNvbG9yLWRhcmstcmdiOiBjb2xvci10by1yZ2ItbGlzdCgkYmFja2dyb3VuZC1jb2xvci1kYXJrKSAhZGVmYXVsdDtcblxuJGlvbi1pdGVtLWJhY2tncm91bmQ6ICAgICAgJHdoaXRlICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtcmdiOiAgY29sb3ItdG8tcmdiLWxpc3QoJGlvbi1pdGVtLWJhY2tncm91bmQpICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyazogJGdyYXktOTAwICFkZWZhdWx0O1xuJGlvbi1pdGVtLWJhY2tncm91bmQtZGFyay1yZ2I6IGNvbG9yLXRvLXJnYi1saXN0KCRpb24taXRlbS1iYWNrZ3JvdW5kLWRhcmspICFkZWZhdWx0O1xuXG4kcHJpbWFyeTogICAgJGJyYW5kLWNvbG9yICFkZWZhdWx0O1xuJHNlY29uZGFyeTogICRncmF5LTMwMCAhZGVmYXVsdDtcbiRkYW5nZXI6ICAgICAkcmVkICFkZWZhdWx0O1xuJHdhcm5pbmc6ICAgICR5ZWxsb3cgIWRlZmF1bHQ7XG4kc3VjY2VzczogICAgJGdyZWVuICFkZWZhdWx0O1xuJGluZm86ICAgICAgICRibHVlICFkZWZhdWx0O1xuJGxpZ2h0OiAgICAgICRncmF5LTEwMCAhZGVmYXVsdDtcbiRtZWRpdW06ICAgICAkZ3JheS03MDAgIWRlZmF1bHQ7XG4kZGFyazogICAgICAgJGdyYXktOTAwICFkZWZhdWx0O1xuXG4kY29sb3JzOiAgKFxuICAgIHByaW1hcnk6IChsaWdodDogJHByaW1hcnksIGRhcms6ICRwcmltYXJ5KSxcbiAgICBzZWNvbmRhcnk6IChsaWdodDogJHNlY29uZGFyeSwgZGFyazogJGdyYXktNzAwKSxcbiAgICBzdWNjZXNzOiAobGlnaHQ6ICRzdWNjZXNzKSxcbiAgICB3YXJuaW5nOiAobGlnaHQ6ICR3YXJuaW5nKSxcbiAgICBkYW5nZXI6ICAobGlnaHQ6ICRkYW5nZXIpLFxuICAgIGluZm86IChsaWdodDogJGluZm8pLFxuICAgIGxpZ2h0OiAobGlnaHQ6ICRsaWdodCwgZGFyazogJGRhcmspLFxuICAgIG1lZGl1bTogKGxpZ2h0OiAkbWVkaXVtLCBkYXJrOiAkZ3JheS0yMDApLFxuICAgIGRhcms6IChsaWdodDogJGRhcmssIGRhcms6ICRsaWdodCksXG4pICFkZWZhdWx0O1xuXG4vKipcbiAqIExheW91dCBCcmVha3BvaW50c1xuICpcbiAqIGh0dHBzOi8vaW9uaWNmcmFtZXdvcmsuY29tL2RvY3MvbGF5b3V0L2dyaWQjZGVmYXVsdC1icmVha3BvaW50c1xuICovXG5cbi8vIFRoZSBtaW5pbXVtIGRpbWVuc2lvbnMgYXQgd2hpY2ggeW91ciBsYXlvdXQgd2lsbCBjaGFuZ2UsXG4vLyBhZGFwdGluZyB0byBkaWZmZXJlbnQgc2NyZWVuIHNpemVzLCBmb3IgdXNlIGluIG1lZGlhIHF1ZXJpZXNcbiRzY3JlZW4tYnJlYWtwb2ludHM6IChcbiAgICB4czogMHB4LFxuICAgIHNtOiA1NzZweCxcbiAgICBtZDogNzY4cHgsXG4gICAgbGc6IDk5MnB4LFxuICAgIHRhYmxldDogOTkycHgsXG4gICAgeGw6IDEyMDBweFxuKSAhZGVmYXVsdDtcblxuJGNvcmUtY291cnNlLWltYWdlLWJhY2tncm91bmQ6ICM4MWVjZWMsICM3NGI5ZmYsICNhMjliZmUsICNkZmU2ZTksICMwMGI4OTQsICMwOTg0ZTMsICNiMmJlYzMsICNmZGNiNmUsICNmZDc5YTgsICM2YzVjZTcgIWRlZmF1bHQ7XG4kY29yZS1kZC1xdWVzdGlvbi1jb2xvcnM6ICNGRkZGRkYsICNCMEM0REUsICNEQ0RDREMsICNEOEJGRDgsICM4N0NFRkEsICNEQUE1MjAsICNGRkQ3MDAsICNGMEU2OEMgIWRlZmF1bHQ7XG4kY29yZS10ZXh0LWhpZ2h0bGlnaHQtYmFja2dyb3VuZC1jb2xvcjogbGlnaHRlbigkYmx1ZSwgNDAlKSAhZGVmYXVsdDtcblxuJGNvcmUtZml4ZWQtdXJsOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWRhc2hib2FyZC1sb2dvOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWFsd2F5cy1zaG93LW1haW4tbWVudTogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1mb3JtYXQtdGV4dC1uZXZlci1zaG9ydGVuOiBmYWxzZSAhZGVmYXVsdDtcblxuJGNvcmUtaGlkZS1jb3Vyc2VpbWFnZS1vbi1jb3Vyc2U6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtaGlkZS1wcm9ncmVzcy1vbi1jb3Vyc2U6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtaGlkZS1wcm9ncmVzcy1vbi1zZWN0aW9uLXNlbGVjdG9yOiBmYWxzZSAhZGVmYXVsdDtcblxuJGNvcmUtY291cnNlLWhpZGUtdGh1bWItb24tY2FyZHM6IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtY291cnNlLXRodW1iLW9uLWNhcmRzLWJhY2tncm91bmQ6IG51bGwgIWRlZmF1bHQ7XG4kY29yZS1jb3Vyc2UtaGlkZS1wcm9ncmVzcy1vbi1jYXJkczogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgbG9naW4gcGFnZS5cbiRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lLWRhcms6ICRjb3JlLWxvZ2luLWJ1dHRvbi1vdXRsaW5lICFkZWZhdWx0O1xuJGNvcmUtbG9naW4tbG9hZGluZy1jb2xvcjogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1sb2FkaW5nLWNvbG9yLWRhcms6ICR0ZXh0LWNvbG9yLWRhcmsgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLWZvcmdvdC1wYXNzd29yZDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLW5lZWQtaGVscDogZmFsc2UgIWRlZmF1bHQ7XG4kY29yZS1sb2dpbi1oaWRlLXFyY29kZTogZmFsc2UgIWRlZmF1bHQ7XG5cbi8vIENvbmZpZ3VyYXRpb24gb3B0aW9ucyBmb3IgbW9yZSBwYWdlLiAoZGVwcmVjYXRlZCBvbiA0LjApXG4kY29yZS1tb3JlLWhpZGUtc2l0ZWluZm86IGZhbHNlICFkZWZhdWx0O1xuJGNvcmUtbW9yZS1oaWRlLXNpdGVuYW1lOiBmYWxzZSAhZGVmYXVsdDtcbiRjb3JlLW1vcmUtaGlkZS1zaXRldXJsOiBmYWxzZSAhZGVmYXVsdDtcblxuLy8gQ29uZmlndXJhdGlvbiBvcHRpb25zIGZvciB1c2VyIHBhZ2UuXG4kY29yZS11c2VyLWhpZGUtc2l0ZWluZm86ICRjb3JlLW1vcmUtaGlkZS1zaXRlaW5mbyAhZGVmYXVsdDtcbiRjb3JlLXVzZXItaGlkZS1zaXRlbmFtZTogJGNvcmUtbW9yZS1oaWRlLXNpdGVuYW1lICFkZWZhdWx0O1xuJGNvcmUtdXNlci1oaWRlLXNpdGV1cmw6ICRjb3JlLW1vcmUtaGlkZS1zaXRldXJsICFkZWZhdWx0O1xuXG4vLyBBY3Rpdml0eSBpY29uIGJhY2tncm91bmQgY29sb3JzLlxuJGFjdGl2aXR5LWljb24tY29sb3JzOiAoXG4gICAgYWRtaW5pc3RyYXRpb246ICM1ZDYzZjYsXG4gICAgYXNzZXNzbWVudDogI2ViNjZhMixcbiAgICBjb2xsYWJvcmF0aW9uOiAjZjc2MzRkLFxuICAgIGNvbW11bmljYXRpb246ICMxMWE2NzYsXG4gICAgY29udGVudDogIzM5OWJlMixcbiAgICBpbnRlcmZhY2U6ICNhMzc4ZmZcbikgIWRlZmF1bHQ7XG5cbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jYXRlZ29yeTogIzhlMjRhYSAhZGVmYXVsdDtcbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb3Vyc2U6ICRyZWQgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktZ3JvdXA6ICR5ZWxsb3cgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktdXNlcjogJGJsdWUgIWRlZmF1bHQ7XG4kY2FsZW5kYXItZXZlbnQtY2F0ZWdvcnktc2l0ZTogJGdyZWVuICFkZWZhdWx0O1xuXG4vLyBDYWxlbmRhciBldmVudCBjYXRlZ29yeSBiYWNrZ3JvdW5kIGNvbG9ycy5cbiRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb2xvcnM6IChcbiAgICBjYXRlZ29yeTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNhdGVnb3J5LFxuICAgIGNvdXJzZTogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWNvdXJzZSxcbiAgICBncm91cDogJGNhbGVuZGFyLWV2ZW50LWNhdGVnb3J5LWdyb3VwLFxuICAgIHVzZXI6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS11c2VyLFxuICAgIHNpdGU6ICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1zaXRlLFxuKSAhZGVmYXVsdDtcbiIsIkB1c2UgXCJ0aGVtZS9nbG9iYWxzXCIgYXMgKjtcblxuOmhvc3Qge1xuXG4gICAgLS1hZGRvbi1jYWxlbmRhci1ibGFuay1kYXktYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tbGlnaHQpO1xuXG4gICAgLml0ZW0uYWRkb24tY2FsZW5kYXItZXZlbnQge1xuICAgICAgICA+IGlvbi1pY29uIHtcbiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTtcbiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDUwJTtcbiAgICAgICAgICAgIHBhZGRpbmc6IDAuN3JlbTtcbiAgICAgICAgICAgIC0tbWFyZ2luLXZlcnRpY2FsOiAxMnB4O1xuICAgICAgICAgICAgLS1tYXJnaW4tZW5kOiAxMnB4O1xuICAgICAgICAgICAgbWFyZ2luLXRvcDogdmFyKC0tbWFyZ2luLXZlcnRpY2FsKTtcbiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IHZhcigtLW1hcmdpbi12ZXJ0aWNhbCk7XG4gICAgICAgICAgICBAaW5jbHVkZSBtYXJnaW4taG9yaXpvbnRhbChudWxsLCB2YXIoLS1tYXJnaW4tZW5kKSk7XG5cbiAgICAgICAgfVxuXG4gICAgICAgIEBlYWNoICRjYXRlZ29yeSwgJHZhbHVlIGluICRjYWxlbmRhci1ldmVudC1jYXRlZ29yeS1jb2xvcnMge1xuICAgICAgICAgICAgJi5hZGRvbi1jYWxlbmRhci1ldmVudHR5cGUtI3skY2F0ZWdvcnl9ID4gaW9uLWljb24ge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR2YWx1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\", \"[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%] {\\n  font-size: 1.6rem;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hZGRvbnMvY2FsZW5kYXIvcGFnZXMvZXZlbnQvZXZlbnQuc2NzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDSTtFQUNJLGlCQUFBO0FBQVIiLCJzb3VyY2VzQ29udGVudCI6WyI6aG9zdCB7XG4gICAgaW9uLWNhcmQgaW9uLW5vdGUge1xuICAgICAgICBmb250LXNpemU6IDEuNnJlbTtcbiAgICB9XG59XG4iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});\nclass AddonCalendarEventsSwipeItemsManager extends CoreSwipeNavigationItemsManager {\n  /**\n   * @inheritdoc\n   */\n  getSelectedItemPathFromRoute(route) {\n    return route.params.id;\n  }\n}","map":{"version":3,"names":["AddonCalendar","AddonCalendarProvider","AddonCalendarHelper","AddonCalendarOffline","AddonCalendarSync","AddonCalendarSyncProvider","CoreNetwork","CoreEvents","CoreDomUtils","ToastDuration","CoreTextUtils","CoreSites","CoreCourse","CoreTimeUtils","NgZone","Translate","CoreNavigator","CoreUtils","CoreConstants","CoreRoutedItemsManagerSourcesTracker","AddonCalendarEventsSource","CoreSwipeNavigationItemsManager","CoreReminders","CoreRemindersService","CoreRemindersSetReminderMenuComponent","i0","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ɵɵadvance","ɵɵproperty","ctx_r0","event","name","contextLevel","contextInstanceId","ctx_r3","moduleIcon","modulename","instance","purpose","ctx_r4","eventIcon","ɵɵtext","ɵɵtextInterpolate","ctx_r5","iconTitle","ɵɵpipeBind2","ɵɵpureFunction1","_c0","ɵɵpipeBind1","ɵɵtextInterpolate1","ctx_r8","courseUrl","courseName","courseId","ctx_r9","groupName","courseid","ctx_r10","categoryPath","categoryid","ctx_r11","description","ctx_r12","encodedLocation","ɵɵsanitizeUrl","location","ctx_r13","moduleUrl","ɵɵtemplate","AddonCalendarEventPage_ion_list_22_core_mod_icon_2_Template","AddonCalendarEventPage_ion_list_22_ion_icon_3_Template","AddonCalendarEventPage_ion_list_22_span_8_Template","AddonCalendarEventPage_ion_list_22_ion_card_11_Template","AddonCalendarEventPage_ion_list_22_ion_note_18_Template","AddonCalendarEventPage_ion_list_22_ion_item_27_Template","AddonCalendarEventPage_ion_list_22_ion_item_28_Template","AddonCalendarEventPage_ion_list_22_ion_item_29_Template","AddonCalendarEventPage_ion_list_22_ion_item_30_Template","AddonCalendarEventPage_ion_list_22_ion_item_31_Template","AddonCalendarEventPage_ion_list_22_ion_item_32_Template","_c1","ctx_r1","eventtype","formattedType","hasOffline","deleted","formattedtime","reminder_r16","sublabel","AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_p_4_Template","ɵɵlistener","AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_Template_ion_button_click_5_listener","$event","ɵɵrestoreView","_r22","ɵɵnextContext","$implicit","ctx_r20","ɵɵresetView","deleteReminder","id","ɵɵclassProp","timestamp","ctx_r17","currentTime","label","ɵɵattribute","ɵɵelementContainerStart","AddonCalendarEventPage_ion_card_23_ng_container_6_ion_item_1_Template","ɵɵelementContainerEnd","AddonCalendarEventPage_ion_card_23_ng_container_7_Template_ion_button_click_3_listener","_r25","ctx_r24","addReminder","AddonCalendarEventPage_ion_card_23_ng_container_6_Template","AddonCalendarEventPage_ion_card_23_ng_container_7_Template","ctx_r2","reminders","timestart","AddonCalendarEventPage","constructor","route","eventLoaded","remindersEnabled","canEdit","isOnline","syncIcon","ICON_LOADING","isEnabled","siteHomeId","getCurrentSiteHomeId","currentSiteId","getCurrentSiteId","canEditEventsInSite","editEventObserver","on","EDIT_EVENT_EVENT","data","eventId","refreshEvent","newEventObserver","NEW_EVENT_EVENT","oldEventId","syncObserver","AUTO_SYNCED","checkSyncResult","manualSyncObserver","MANUAL_SYNCED","onlineObserver","onChange","subscribe","run","defaultTimeChangedObserver","DEFAULT_NOTIFICATION_TIME_CHANGED","loadReminders","updateCurrentTime","window","setInterval","_this","_asyncToGenerator","getEventReminders","ngOnInit","_this2","getRequiredRouteNumberParam","error","showErrorModal","back","initializeSwipeManager","fetchEvent","sync","showErrors","_this3","syncEvents","getEventById","formatEventData","offlineEvent","formatOfflineEventData","getEvent","Object","assign","_unused","translateModuleName","indexOf","url","promises","course","fullname","viewurl","groupid","groupname","iscategoryevent","category","nestedname","decodeHTML","buildAddressURL","push","isEventDeleted","then","getCalendarTimeFormat","_ref","timeFormat","formatEventTime","_x","apply","arguments","Promise","all","showErrorModalDefault","ICON_SYNC","_this4","date","getRouteParam","source","getSource","events","AddonCalendarEventsSwipeItemsManager","start","_this5","result","warnings","length","showAlert","undefined","offlineIdMap","updated","trigger","_this6","reminderTime","openPopover","component","componentProps","eventTime","addEventReminder","timeBefore","e","_this7","preventDefault","stopPropagation","showDeleteConfirm","modal","showModalLoading","removeReminder","dismiss","_unused2","doRefresh","refresher","done","_this8","finally","complete","_this9","invalidateEvent","invalidateTimeFormat","allPromisesIgnoringErrors","openEdit","navigateToSitePath","deleteEvent","_this10","title","instant","options","message","eventcount","$a","count","inputs","type","checked","value","deleteAll","showConfirm","_unused3","onlineEventDeleted","refreshAfterChangeEvent","_unused4","NEW_EVENT_DISCARDED_EVENT","DELETED_EVENT_EVENT","sent","showToast","LONG","undoDelete","_this11","unmarkDeleted","UNDELETED_EVENT_EVENT","isManual","find","ev","ngOnDestroy","_this$events","off","unsubscribe","destroy","clearInterval","_class","ɵɵdirectiveInject","i1","ActivatedRoute","selectors","decls","vars","consts","template","AddonCalendarEventPage_Template","rf","ctx","AddonCalendarEventPage_h1_6_Template","AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener","AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener","AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener","AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener","AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener","target","AddonCalendarEventPage_ion_list_22_Template","AddonCalendarEventPage_ion_card_23_Template","canedit","candelete","ɵɵpropertyInterpolate","getSelectedItemPathFromRoute","params"],"sources":["/home/toon/works/gitionic7/ionic-github/ionic/src/addons/calendar/pages/event/event.ts","/home/toon/works/gitionic7/ionic-github/ionic/src/addons/calendar/pages/event/event.html"],"sourcesContent":["// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AlertOptions } from '@ionic/core';\nimport {\n    AddonCalendar,\n    AddonCalendarEventToDisplay,\n    AddonCalendarProvider,\n} from '../../services/calendar';\nimport { AddonCalendarEventReminder, AddonCalendarHelper } from '../../services/calendar-helper';\nimport { AddonCalendarOffline } from '../../services/calendar-offline';\nimport { AddonCalendarSync, AddonCalendarSyncEvents, AddonCalendarSyncProvider } from '../../services/calendar-sync';\nimport { CoreNetwork } from '@services/network';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreDomUtils, ToastDuration } from '@services/utils/dom';\nimport { CoreTextUtils } from '@services/utils/text';\nimport { CoreSites } from '@services/sites';\nimport { CoreCourse } from '@features/course/services/course';\nimport { CoreTimeUtils } from '@services/utils/time';\nimport { NgZone, Translate } from '@singletons';\nimport { Subscription } from 'rxjs';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreUtils } from '@services/utils/utils';\nimport { ActivatedRoute, ActivatedRouteSnapshot } from '@angular/router';\nimport { CoreConstants } from '@/core/constants';\nimport { CoreRoutedItemsManagerSourcesTracker } from '@classes/items-management/routed-items-manager-sources-tracker';\nimport { AddonCalendarEventsSource } from '@addons/calendar/classes/events-source';\nimport { CoreSwipeNavigationItemsManager } from '@classes/items-management/swipe-navigation-items-manager';\nimport { CoreReminders, CoreRemindersService } from '@features/reminders/services/reminders';\nimport { CoreRemindersSetReminderMenuComponent } from '@features/reminders/components/set-reminder-menu/set-reminder-menu';\n\n/**\n * Page that displays a single calendar event.\n */\n@Component({\n    selector: 'page-addon-calendar-event',\n    templateUrl: 'event.html',\n    styleUrls: ['../../calendar-common.scss', 'event.scss'],\n})\nexport class AddonCalendarEventPage implements OnInit, OnDestroy {\n\n    protected eventId!: number;\n    protected siteHomeId: number;\n    protected newEventObserver: CoreEventObserver;\n    protected editEventObserver: CoreEventObserver;\n    protected syncObserver: CoreEventObserver;\n    protected manualSyncObserver: CoreEventObserver;\n    protected onlineObserver: Subscription;\n    protected defaultTimeChangedObserver: CoreEventObserver;\n    protected currentSiteId: string;\n    protected updateCurrentTime?: number;\n\n    eventLoaded = false;\n    event?: AddonCalendarEventToDisplay;\n    events?: CoreSwipeNavigationItemsManager;\n    courseId?: number;\n    courseName = '';\n    groupName?: string;\n    courseUrl = '';\n    remindersEnabled = false;\n    moduleUrl = '';\n    categoryPath = '';\n    currentTime = -1;\n    reminders: AddonCalendarEventReminder[] = [];\n    canEdit = false;\n    hasOffline = false;\n    isOnline = false;\n    syncIcon = CoreConstants.ICON_LOADING; // Sync icon.\n\n    constructor(\n        protected route: ActivatedRoute,\n    ) {\n        this.remindersEnabled = CoreReminders.isEnabled();\n        this.siteHomeId = CoreSites.getCurrentSiteHomeId();\n        this.currentSiteId = CoreSites.getCurrentSiteId();\n\n        // Check if site supports editing. No need to check allowed types, event.canedit already does it.\n        this.canEdit = AddonCalendar.canEditEventsInSite();\n\n        // Listen for event edited. If current event is edited, reload the data.\n        this.editEventObserver = CoreEvents.on(AddonCalendarProvider.EDIT_EVENT_EVENT, (data) => {\n            if (data && data.eventId === this.eventId) {\n                this.eventLoaded = false;\n                this.refreshEvent(true, false);\n            }\n        }, this.currentSiteId);\n\n        // Listen for event created. If user edits the data of a new offline event or it's sent to server, this event is triggered.\n        this.newEventObserver = CoreEvents.on(AddonCalendarProvider.NEW_EVENT_EVENT, (data) => {\n            if (this.eventId < 0 && data && (data.eventId === this.eventId || data.oldEventId === this.eventId)) {\n                this.eventId = data.eventId;\n                this.eventLoaded = false;\n                this.refreshEvent(true, false);\n            }\n        }, this.currentSiteId);\n\n        // Refresh data if this calendar event is synchronized automatically.\n        this.syncObserver = CoreEvents.on(\n            AddonCalendarSyncProvider.AUTO_SYNCED,\n            (data) => this.checkSyncResult(false, data),\n            this.currentSiteId,\n        );\n\n        // Refresh data if calendar events are synchronized manually but not by this page.\n        this.manualSyncObserver = CoreEvents.on(\n            AddonCalendarSyncProvider.MANUAL_SYNCED,\n            (data) => this.checkSyncResult(true, data),\n            this.currentSiteId,\n        );\n\n        // Refresh online status when changes.\n        this.onlineObserver = CoreNetwork.onChange().subscribe(() => {\n            // Execute the callback in the Angular zone, so change detection doesn't stop working.\n            NgZone.run(() => {\n                this.isOnline = CoreNetwork.isOnline();\n            });\n        });\n\n        // Reload reminders if default notification time changes.\n        this.defaultTimeChangedObserver = CoreEvents.on(CoreRemindersService.DEFAULT_NOTIFICATION_TIME_CHANGED, () => {\n            this.loadReminders();\n        }, this.currentSiteId);\n\n        // Set and update current time. Use a 5 seconds error margin.\n        this.currentTime = CoreTimeUtils.timestamp();\n        this.updateCurrentTime = window.setInterval(() => {\n            this.currentTime = CoreTimeUtils.timestamp();\n        }, 5000);\n    }\n\n    /**\n     * Load reminders.\n     *\n     * @returns Promise resolved when done.\n     */\n    protected async loadReminders(): Promise<void> {\n        if (!this.remindersEnabled || !this.event) {\n            return;\n        }\n\n        this.reminders = await AddonCalendarHelper.getEventReminders(this.eventId, this.event.timestart, this.currentSiteId);\n    }\n\n    /**\n     * @inheritdoc\n     */\n    async ngOnInit(): Promise<void> {\n        try {\n            this.eventId = CoreNavigator.getRequiredRouteNumberParam('id');\n        } catch (error) {\n            CoreDomUtils.showErrorModal(error);\n\n            CoreNavigator.back();\n\n            return;\n        }\n\n        this.syncIcon = CoreConstants.ICON_LOADING;\n\n        await this.initializeSwipeManager();\n        await this.fetchEvent();\n    }\n\n    /**\n     * Fetches the event and updates the view.\n     *\n     * @param sync Whether it should try to synchronize offline events.\n     * @param showErrors Whether to show sync errors to the user.\n     * @returns Promise resolved when done.\n     */\n    async fetchEvent(sync = false, showErrors = false): Promise<void> {\n        this.isOnline = CoreNetwork.isOnline();\n\n        if (sync) {\n            const deleted = await this.syncEvents(showErrors);\n\n            if (deleted) {\n                return;\n            }\n        }\n\n        try {\n            // Get the event data.\n            if (this.eventId >= 0) {\n                const event = await AddonCalendar.getEventById(this.eventId);\n                this.event = await AddonCalendarHelper.formatEventData(event);\n            }\n\n            try {\n                const offlineEvent = AddonCalendarHelper.formatOfflineEventData(\n                    await AddonCalendarOffline.getEvent(this.eventId),\n                );\n\n                // There is offline data, apply it.\n                this.hasOffline = true;\n                this.event = Object.assign(this.event || {}, offlineEvent);\n            } catch {\n                // No offline data.\n                this.hasOffline = false;\n\n                if (this.eventId < 0) {\n                    // It's an offline event, but it wasn't found. Shouldn't happen.\n                    CoreDomUtils.showErrorModal('Event not found.');\n                    CoreNavigator.back();\n\n                    return;\n                }\n            }\n\n            if (!this.event) {\n                return; // At this point we should always have the event, adding this check to avoid TS errors.\n            }\n\n            // Load reminders.\n            this.loadReminders();\n\n            // Reset some of the calculated data.\n            this.categoryPath = '';\n            this.courseName = '';\n            this.courseUrl = '';\n            this.moduleUrl = '';\n\n            if (this.event.moduleIcon) {\n                // It's a module event, translate the module name to the current language.\n                const name = CoreCourse.translateModuleName(this.event.modulename || '');\n                if (name.indexOf('core.mod_') === -1) {\n                    this.event.modulename = name;\n                }\n\n                // Get the module URL.\n                this.moduleUrl = this.event.url || '';\n            }\n\n            const promises: Promise<void>[] = [];\n            const event = this.event;\n\n            const courseId = this.event.courseid;\n            if (courseId != this.siteHomeId) {\n                // If the event belongs to a course, get the course name and the URL to view it.\n                if (this.event.course) {\n                    this.courseId = this.event.course.id;\n                    this.courseName = this.event.course.fullname;\n                    this.courseUrl = this.event.course.viewurl;\n                }\n            }\n\n            // If it's a group event, get the name of the group.\n            if (courseId && this.event.groupid) {\n                this.groupName = event.groupname;\n            }\n\n            if (this.event.iscategoryevent && this.event.category) {\n                this.categoryPath = this.event.category.nestedname;\n            }\n\n            if (this.event.location) {\n                // Build a link to open the address in maps.\n                this.event.location = CoreTextUtils.decodeHTML(this.event.location);\n                this.event.encodedLocation = CoreTextUtils.buildAddressURL(this.event.location);\n            }\n\n            // Check if event was deleted in offine.\n            promises.push(AddonCalendarOffline.isEventDeleted(this.eventId).then((deleted) => {\n                event.deleted = deleted;\n\n                return;\n            }));\n\n            // Re-calculate the formatted time so it uses the device date.\n            promises.push(AddonCalendar.getCalendarTimeFormat().then(async (timeFormat) => {\n                event.formattedtime = await AddonCalendar.formatEventTime(event, timeFormat);\n\n                return;\n            }));\n\n            await Promise.all(promises);\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'addon.calendar.errorloadevent', true);\n        }\n\n        this.eventLoaded = true;\n        this.syncIcon = CoreConstants.ICON_SYNC;\n    }\n\n    /**\n     * Initialize swipe manager if enabled.\n     */\n    protected async initializeSwipeManager(): Promise<void> {\n        const date = CoreNavigator.getRouteParam('date');\n        const source = date && CoreRoutedItemsManagerSourcesTracker.getSource(\n            AddonCalendarEventsSource,\n            [date],\n        );\n\n        if (!source) {\n            return;\n        }\n\n        this.events = new AddonCalendarEventsSwipeItemsManager(source);\n\n        await this.events.start();\n    }\n\n    /**\n     * Sync offline events.\n     *\n     * @param showErrors Whether to show sync errors to the user.\n     * @returns Promise resolved with boolean: whether event was deleted on sync.\n     */\n    protected async syncEvents(showErrors = false): Promise<boolean> {\n        let deleted = false;\n\n        // Try to synchronize offline events.\n        try {\n            const result = await AddonCalendarSync.syncEvents();\n            if (result.warnings && result.warnings.length) {\n                CoreDomUtils.showAlert(undefined, result.warnings[0]);\n            }\n\n            if (result.deleted && result.deleted.indexOf(this.eventId) != -1) {\n                // This event was deleted during the sync.\n                deleted = true;\n            } else if (this.eventId < 0 && result.offlineIdMap[this.eventId]) {\n                // Event was created, use the online ID.\n                this.eventId = result.offlineIdMap[this.eventId];\n            }\n\n            if (result.updated) {\n                // Trigger a manual sync event.\n                result.source = 'event';\n\n                CoreEvents.trigger(\n                    AddonCalendarSyncProvider.MANUAL_SYNCED,\n                    result,\n                    this.currentSiteId,\n                );\n            }\n        } catch (error) {\n            if (showErrors) {\n                CoreDomUtils.showErrorModalDefault(error, 'core.errorsync', true);\n            }\n        }\n\n        return deleted;\n    }\n\n    /**\n     * Add a reminder for this event.\n     */\n    async addReminder(): Promise<void> {\n        if (!this.event || !this.event.id) {\n            return;\n        }\n\n        const reminderTime = await CoreDomUtils.openPopover<{timeBefore: number}>({\n            component: CoreRemindersSetReminderMenuComponent,\n            componentProps: {\n                eventTime: this.event.timestart,\n            },\n            // TODO: Add event to open the popover in place.\n        });\n\n        if (reminderTime === undefined) {\n            // User canceled.\n            return;\n        }\n\n        await AddonCalendar.addEventReminder(this.event, reminderTime.timeBefore, this.currentSiteId);\n\n        await this.loadReminders();\n    }\n\n    /**\n     * Delete the selected reminder.\n     *\n     * @param id Reminder ID.\n     * @param e Click event.\n     */\n    async deleteReminder(id: number, e: Event): Promise<void> {\n        e.preventDefault();\n        e.stopPropagation();\n\n        try {\n            await CoreDomUtils.showDeleteConfirm();\n\n            const modal = await CoreDomUtils.showModalLoading('core.deleting', true);\n\n            try {\n                await CoreReminders.removeReminder(id);\n                await this.loadReminders();\n            } catch (error) {\n                CoreDomUtils.showErrorModalDefault(error, 'Error deleting reminder');\n            } finally {\n                modal.dismiss();\n            }\n        } catch {\n            // Ignore errors.\n        }\n    }\n\n    /**\n     * Refresh the data.\n     *\n     * @param refresher Refresher.\n     * @param done Function to call when done.\n     * @param showErrors Whether to show sync errors to the user.\n     * @returns Promise resolved when done.\n     */\n    async doRefresh(refresher?: HTMLIonRefresherElement, done?: () => void, showErrors= false): Promise<void> {\n        if (!this.eventLoaded) {\n            return;\n        }\n\n        await this.refreshEvent(true, showErrors).finally(() => {\n            refresher?.complete();\n            done && done();\n        });\n    }\n\n    /**\n     * Refresh the event.\n     *\n     * @param sync Whether it should try to synchronize offline events.\n     * @param showErrors Whether to show sync errors to the user.\n     * @returns Promise resolved when done.\n     */\n    async refreshEvent(sync = false, showErrors = false): Promise<void> {\n        this.syncIcon = CoreConstants.ICON_LOADING;\n\n        const promises: Promise<void>[] = [];\n\n        if (this.eventId > 0) {\n            promises.push(AddonCalendar.invalidateEvent(this.eventId));\n        }\n        promises.push(AddonCalendar.invalidateTimeFormat());\n\n        await CoreUtils.allPromisesIgnoringErrors(promises);\n\n        await this.fetchEvent(sync, showErrors);\n    }\n\n    /**\n     * Open the page to edit the event.\n     */\n    openEdit(): void {\n        CoreNavigator.navigateToSitePath(`/calendar/edit/${this.eventId}`);\n    }\n\n    /**\n     * Delete the event.\n     */\n    async deleteEvent(): Promise<void> {\n        if (!this.event) {\n            return;\n        }\n\n        const title = Translate.instant('addon.calendar.deleteevent');\n        const options: AlertOptions = {};\n        let message: string;\n\n        if (this.event.eventcount > 1) {\n            // It's a repeated event.\n            message = Translate.instant(\n                'addon.calendar.confirmeventseriesdelete',\n                { $a: { name: this.event.name, count: this.event.eventcount } },\n            );\n\n            options.inputs = [\n                {\n                    type: 'radio',\n                    name: 'deleteall',\n                    checked: true,\n                    value: false,\n                    label: Translate.instant('addon.calendar.deleteoneevent'),\n                },\n                {\n                    type: 'radio',\n                    name: 'deleteall',\n                    checked: false,\n                    value: true,\n                    label: Translate.instant('addon.calendar.deleteallevents'),\n                },\n            ];\n        } else {\n            // Not repeated, display a simple confirm.\n            message = Translate.instant('addon.calendar.confirmeventdelete', { $a: this.event.name });\n        }\n\n        let deleteAll = false;\n        try {\n            deleteAll = await CoreDomUtils.showConfirm(message, title, undefined, undefined, options);\n        } catch {\n\n            // User canceled.\n            return;\n        }\n\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        try {\n            let onlineEventDeleted = false;\n            if (this.event.id < 0) {\n                await AddonCalendarOffline.deleteEvent(this.event.id);\n            } else {\n                onlineEventDeleted = await AddonCalendar.deleteEvent(this.event.id, this.event.name, deleteAll);\n            }\n\n            if (onlineEventDeleted) {\n                // Event deleted, invalidate right days & months.\n                try {\n                    await AddonCalendarHelper.refreshAfterChangeEvent(this.event, deleteAll ? this.event.eventcount : 1);\n                } catch {\n                    // Ignore errors.\n                }\n            }\n\n            // Trigger an event.\n            if (this.event.id < 0) {\n                CoreEvents.trigger(AddonCalendarProvider.NEW_EVENT_DISCARDED_EVENT, {}, CoreSites.getCurrentSiteId());\n            } else {\n                CoreEvents.trigger(AddonCalendarProvider.DELETED_EVENT_EVENT, {\n                    eventId: this.eventId,\n                    sent: onlineEventDeleted,\n                }, CoreSites.getCurrentSiteId());\n            }\n\n            if (onlineEventDeleted || this.event.id < 0) {\n                CoreDomUtils.showToast('addon.calendar.eventcalendareventdeleted', true, ToastDuration.LONG);\n\n                // Event deleted, close the view.\n                CoreNavigator.back();\n            } else {\n                // Event deleted in offline, just mark it as deleted.\n                this.event.deleted = true;\n            }\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error deleting event.');\n        }\n\n        modal.dismiss();\n    }\n\n    /**\n     * Undo delete the event.\n     */\n    async undoDelete(): Promise<void> {\n        if (!this.event) {\n            return;\n        }\n\n        const modal = await CoreDomUtils.showModalLoading('core.sending', true);\n\n        try {\n\n            await AddonCalendarOffline.unmarkDeleted(this.event.id);\n\n            // Trigger an event.\n            CoreEvents.trigger(AddonCalendarProvider.UNDELETED_EVENT_EVENT, {\n                eventId: this.eventId,\n            }, CoreSites.getCurrentSiteId());\n\n            this.event.deleted = false;\n\n        } catch (error) {\n            CoreDomUtils.showErrorModalDefault(error, 'Error undeleting event.');\n        }\n\n        modal.dismiss();\n    }\n\n    /**\n     * Check the result of an automatic sync or a manual sync not done by this page.\n     *\n     * @param isManual Whether it's a manual sync.\n     * @param data Sync result.\n     */\n    protected checkSyncResult(isManual: boolean, data: AddonCalendarSyncEvents): void {\n        if (!data) {\n            return;\n        }\n\n        if (data.deleted && data.deleted.indexOf(this.eventId) != -1) {\n            CoreDomUtils.showToast('addon.calendar.eventcalendareventdeleted', true, ToastDuration.LONG);\n\n            // Event was deleted, close the view.\n            CoreNavigator.back();\n        } else if (data.events && (!isManual || data.source != 'event')) {\n            if (this.eventId < 0) {\n                if (data.offlineIdMap[this.eventId]) {\n                    // Event was created, use the online ID.\n                    this.eventId = data.offlineIdMap[this.eventId];\n\n                    this.eventLoaded = false;\n                    this.refreshEvent();\n                }\n            } else {\n                const event = data.events.find((ev) => ev.id == this.eventId);\n\n                if (event) {\n                    this.eventLoaded = false;\n                    this.refreshEvent();\n                }\n            }\n        }\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.editEventObserver.off();\n        this.syncObserver.off();\n        this.manualSyncObserver.off();\n        this.onlineObserver.unsubscribe();\n        this.newEventObserver.off();\n        this.events?.destroy();\n        clearInterval(this.updateCurrentTime);\n    }\n\n}\n\n/**\n * Helper to manage swiping within a collection of events.\n */\nclass AddonCalendarEventsSwipeItemsManager extends CoreSwipeNavigationItemsManager {\n\n    /**\n     * @inheritdoc\n     */\n    protected getSelectedItemPathFromRoute(route: ActivatedRouteSnapshot): string | null {\n        return route.params.id;\n    }\n\n}\n","<ion-header collapsible>\n    <ion-toolbar>\n        <ion-buttons slot=\"start\">\n            <ion-back-button [text]=\"'core.back' | translate\" />\n        </ion-buttons>\n        <ion-title>\n            <h1 *ngIf=\"event\">\n                <core-format-text [text]=\"event.name\" [contextLevel]=\"event.contextLevel\" [contextInstanceId]=\"event.contextInstanceId\" />\n            </h1>\n        </ion-title>\n        <ion-buttons slot=\"end\">\n            <core-context-menu>\n                <core-context-menu-item [hidden]=\"!eventLoaded || (!hasOffline && event && !event.deleted) || !isOnline\" [priority]=\"400\"\n                    [content]=\"'core.settings.synchronizenow' | translate\" (action)=\"doRefresh(undefined, $event, true)\"\n                    [iconAction]=\"syncIcon\" [closeOnClick]=\"false\" />\n                <core-context-menu-item [hidden]=\"!event || !event.canedit || event.deleted || (!canEdit && event.id > 0)\" [priority]=\"300\"\n                    [content]=\"'core.edit' | translate\" (action)=\"openEdit()\" iconAction=\"fas-pen\" />\n                <core-context-menu-item [hidden]=\"!event || !event.candelete || event.deleted\" [priority]=\"200\"\n                    [content]=\"'core.delete' | translate\" (action)=\"deleteEvent()\" iconAction=\"fas-trash\" />\n                <core-context-menu-item [hidden]=\"!event || !event.deleted\" [priority]=\"200\" [content]=\"'core.restore' | translate\"\n                    (action)=\"undoDelete()\" iconAction=\"fas-rotate-left\" />\n            </core-context-menu>\n        </ion-buttons>\n    </ion-toolbar>\n</ion-header>\n<ion-content [core-swipe-navigation]=\"events\">\n    <ion-refresher slot=\"fixed\" [disabled]=\"!eventLoaded\" (ionRefresh)=\"doRefresh($event.target)\">\n        <ion-refresher-content pullingText=\"{{ 'core.pulltorefresh' | translate }}\" />\n    </ion-refresher>\n    <core-loading [hideUntil]=\"eventLoaded\">\n        <ion-list *ngIf=\"event\">\n            <ion-item class=\"ion-text-wrap addon-calendar-event\" collapsible [ngClass]=\"['addon-calendar-eventtype-'+event.eventtype]\">\n                <core-mod-icon *ngIf=\"event.moduleIcon\" [modicon]=\"event.moduleIcon\" [showAlt]=\"false\" [modname]=\"event.modulename\"\n                    [componentId]=\"event.instance\" slot=\"start\" [purpose]=\"event.purpose\" />\n                <ion-icon *ngIf=\" event.eventIcon && !event.moduleIcon\" [name]=\"event.eventIcon\" aria-hidden=\"true\" slot=\"start\" />\n                <ion-label>\n                    <!-- Add the icon title so accessibility tools read it. -->\n                    <span class=\"sr-only\">\n                        {{ 'addon.calendar.type' + event.formattedType | translate }}\n                        <span class=\"sr-only\" *ngIf=\"event.moduleIcon && event.iconTitle\">{{ event.iconTitle }}</span>\n                    </span>\n                    <h1>\n                        <core-format-text [text]=\"event.name\" [contextLevel]=\"event.contextLevel\"\n                            [contextInstanceId]=\"event.contextInstanceId\" />\n                    </h1>\n                </ion-label>\n            </ion-item>\n            <!-- There is data to be synchronized -->\n            <ion-card class=\"core-warning-card\" *ngIf=\"hasOffline || event.deleted\">\n                <ion-item>\n                    <ion-icon name=\"fas-triangle-exclamation\" slot=\"start\" aria-hidden=\"true\" />\n                    <ion-label>{{ 'core.hasdatatosync' | translate:{$a: 'addon.calendar.calendarevent' | translate} }}</ion-label>\n                </ion-item>\n            </ion-card>\n            <ion-item class=\"ion-text-wrap\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.calendar.when' | translate }}</p>\n                    <core-format-text [text]=\"event.formattedtime\" [filter]=\"false\" />\n                </ion-label>\n                <ion-note slot=\"end\" *ngIf=\"event.deleted\">\n                    <ion-icon name=\"fas-trash\" aria-hidden=\"true\" /> {{ 'core.deletedoffline' | translate }}\n                </ion-note>\n            </ion-item>\n            <ion-item>\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'addon.calendar.eventtype' | translate }}</p>\n                    <p>{{ 'addon.calendar.type' + event.formattedType | translate }}</p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"courseName\" [href]=\"courseUrl\" core-link capture=\"true\" [detail]=\"true\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.course' | translate}}</p>\n                    <p>\n                        <core-format-text [text]=\"courseName\" contextLevel=\"course\" [contextInstanceId]=\"courseId\" />\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap core-groupname\" *ngIf=\"groupName\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.group' | translate}}</p>\n                    <p>\n                        <core-format-text [text]=\"groupName\" contextLevel=\"course\" [contextInstanceId]=\"event.courseid\" />\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"categoryPath\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.category' | translate}}</p>\n                    <p>\n                        <core-format-text [text]=\"categoryPath\" contextLevel=\"coursecat\" [contextInstanceId]=\"event.categoryid\" />\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"event.description\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.description' | translate}}</p>\n                    <p>\n                        <core-format-text [text]=\"event.description\" [contextLevel]=\"event.contextLevel\"\n                            [contextInstanceId]=\"event.contextInstanceId\" />\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item class=\"ion-text-wrap\" *ngIf=\"event.location\">\n                <ion-label>\n                    <p class=\"item-heading\">{{ 'core.location' | translate}}</p>\n                    <p>\n                        <a [href]=\"event.encodedLocation\" core-link auto-login=\"no\">\n                            <core-format-text [text]=\"event.location\" [contextLevel]=\"event.contextLevel\"\n                                [contextInstanceId]=\"event.contextInstanceId\" />\n                        </a>\n                    </p>\n                </ion-label>\n            </ion-item>\n            <ion-item *ngIf=\"moduleUrl\">\n                <ion-label>\n                    <ion-button expand=\"block\" [href]=\"moduleUrl\" core-link capture=\"true\">\n                        {{ 'addon.calendar.gotoactivity' | translate }}\n                    </ion-button>\n                </ion-label>\n            </ion-item>\n        </ion-list>\n\n        <ion-card *ngIf=\"remindersEnabled && event\">\n            <ion-item>\n                <ion-label>\n                    <h2>{{ 'addon.calendar.reminders' | translate }}</h2>\n                </ion-label>\n            </ion-item>\n            <ng-container *ngFor=\"let reminder of reminders\">\n                <ion-item *ngIf=\"reminder.timestamp > 0\" class=\"ion-text-wrap\" [class.item-dimmed]=\"reminder.timestamp <= currentTime\">\n                    <ion-label>\n                        <p class=\"item-heading\">{{ reminder.label }}</p>\n                        <p *ngIf=\"reminder.sublabel\">{{ reminder.sublabel }}</p>\n                    </ion-label>\n                    <ion-button fill=\"clear\" (click)=\"deleteReminder(reminder.id, $event)\" [attr.aria-label]=\"'core.delete' | translate\"\n                        slot=\"end\">\n                        <ion-icon name=\"fas-trash\" color=\"danger\" slot=\"icon-only\" aria-hidden=\"true\" />\n                    </ion-button>\n                </ion-item>\n            </ng-container>\n\n            <ng-container *ngIf=\"event.timestart > currentTime\">\n                <ion-item>\n                    <ion-label>\n                        <ion-button expand=\"block\" (click)=\"addReminder()\">\n                            {{ 'addon.calendar.setnewreminder' | translate }}\n                        </ion-button>\n                    </ion-label>\n                </ion-item>\n            </ng-container>\n        </ion-card>\n    </core-loading>\n</ion-content>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}